var B4=Object.defineProperty,$4=Object.defineProperties;var H4=Object.getOwnPropertyDescriptors;var O1=Object.getOwnPropertySymbols;var q4=Object.prototype.hasOwnProperty,z4=Object.prototype.propertyIsEnumerable;var F1=(n,e,t)=>e in n?B4(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,B=(n,e)=>{for(var t in e||={})q4.call(e,t)&&F1(n,t,e[t]);if(O1)for(var t of O1(e))z4.call(e,t)&&F1(n,t,e[t]);return n},ie=(n,e)=>$4(n,H4(e));var Mn=null,zg=!1,xw=1,G4=null,Bn=Symbol("SIGNAL");function pe(n){let e=Mn;return Mn=n,e}function Wg(){return Mn}var Wl={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function xh(n){if(zg)throw new Error("");if(Mn===null)return;Mn.consumerOnSignalRead(n);let e=Mn.producersTail;if(e!==void 0&&e.producer===n)return;let t,r=Mn.recomputing;if(r&&(t=e!==void 0?e.nextProducer:Mn.producers,t!==void 0&&t.producer===n)){Mn.producersTail=t,t.lastReadVersion=n.version;return}let i=n.consumersTail;if(i!==void 0&&i.consumer===Mn&&(!r||K4(i,Mn)))return;let s=Ql(Mn),o={producer:n,consumer:Mn,nextProducer:t,prevConsumer:i,lastReadVersion:n.version,nextConsumer:void 0};Mn.producersTail=o,e!==void 0?e.nextProducer=o:Mn.producers=o,s&&j1(n,o)}function V1(){xw++}function Rw(n){if(!(Ql(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===xw)){if(!n.producerMustRecompute(n)&&!kh(n)){Aw(n);return}n.producerRecomputeValue(n),Aw(n)}}function kw(n){if(n.consumers===void 0)return;let e=zg;zg=!0;try{for(let t=n.consumers;t!==void 0;t=t.nextConsumer){let r=t.consumer;r.dirty||W4(r)}}finally{zg=e}}function Nw(){return Mn?.consumerAllowSignalWrites!==!1}function W4(n){n.dirty=!0,kw(n),n.consumerMarkedDirty?.(n)}function Aw(n){n.dirty=!1,n.lastCleanEpoch=xw}function Kl(n){return n&&L1(n),pe(n)}function L1(n){n.producersTail=void 0,n.recomputing=!0}function Rh(n,e){pe(e),n&&U1(n)}function U1(n){n.recomputing=!1;let e=n.producersTail,t=e!==void 0?e.nextProducer:n.producers;if(t!==void 0){if(Ql(n))do t=Mw(t);while(t!==void 0);e!==void 0?e.nextProducer=void 0:n.producers=void 0}}function kh(n){for(let e=n.producers;e!==void 0;e=e.nextProducer){let t=e.producer,r=e.lastReadVersion;if(r!==t.version||(Rw(t),r!==t.version))return!0}return!1}function ec(n){if(Ql(n)){let e=n.producers;for(;e!==void 0;)e=Mw(e)}n.producers=void 0,n.producersTail=void 0,n.consumers=void 0,n.consumersTail=void 0}function j1(n,e){let t=n.consumersTail,r=Ql(n);if(t!==void 0?(e.nextConsumer=t.nextConsumer,t.nextConsumer=e):(e.nextConsumer=void 0,n.consumers=e),e.prevConsumer=t,n.consumersTail=e,!r)for(let i=n.producers;i!==void 0;i=i.nextProducer)j1(i.producer,i)}function Mw(n){let e=n.producer,t=n.nextProducer,r=n.nextConsumer,i=n.prevConsumer;if(n.nextConsumer=void 0,n.prevConsumer=void 0,r!==void 0?r.prevConsumer=i:e.consumersTail=i,i!==void 0)i.nextConsumer=r;else if(e.consumers=r,!Ql(e)){let s=e.producers;for(;s!==void 0;)s=Mw(s)}return t}function Ql(n){return n.consumerIsAlwaysLive||n.consumers!==void 0}function Pw(n){G4?.(n)}function K4(n,e){let t=e.producersTail;if(t!==void 0){let r=e.producers;do{if(r===n)return!0;if(r===t)break;r=r.nextProducer}while(r!==void 0)}return!1}function Ow(n,e){return Object.is(n,e)}function Kg(n,e){let t=Object.create(Q4);t.computation=n,e!==void 0&&(t.equal=e);let r=()=>{if(Rw(t),xh(t),t.value===Gg)throw t.error;return t.value};return r[Bn]=t,Pw(t),r}var Sw=Symbol("UNSET"),Dw=Symbol("COMPUTING"),Gg=Symbol("ERRORED"),Q4=ie(B({},Wl),{value:Sw,dirty:!0,error:null,equal:Ow,kind:"computed",producerMustRecompute(n){return n.value===Sw||n.value===Dw},producerRecomputeValue(n){if(n.value===Dw)throw new Error("");let e=n.value;n.value=Dw;let t=Kl(n),r,i=!1;try{r=n.computation(),pe(null),i=e!==Sw&&e!==Gg&&r!==Gg&&n.equal(e,r)}catch(s){r=Gg,n.error=s}finally{Rh(n,t)}if(i){n.value=e;return}n.value=r,n.version++}});function Y4(){throw new Error}var B1=Y4;function $1(n){B1(n)}function Fw(n){B1=n}var J4=null;function Vw(n,e){let t=Object.create(Qg);t.value=n,e!==void 0&&(t.equal=e);let r=()=>H1(t);return r[Bn]=t,Pw(t),[r,o=>Nh(t,o),o=>q1(t,o)]}function H1(n){return xh(n),n.value}function Nh(n,e){Nw()||$1(n),n.equal(n.value,e)||(n.value=e,X4(n))}function q1(n,e){Nw()||$1(n),Nh(n,e(n.value))}var Qg=ie(B({},Wl),{equal:Ow,value:void 0,kind:"signal"});function X4(n){n.version++,V1(),kw(n),J4?.(n)}function Lw(n){let e=pe(null);try{return n()}finally{pe(e)}}var Uw=ie(B({},Wl),{consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!0,dirty:!0,kind:"effect"});function jw(n){if(n.dirty=!1,n.version>0&&!kh(n))return;n.version++;let e=Kl(n);try{n.cleanup(),n.fn()}finally{Rh(n,e)}}function Ae(n){return typeof n=="function"}function Yl(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var Yg=Yl(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function tc(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var sn=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let s of t)s.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(Ae(r))try{r()}catch(s){e=s instanceof Yg?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{z1(s)}catch(o){e=e??[],o instanceof Yg?e=[...e,...o.errors]:e.push(o)}}if(e)throw new Yg(e)}}add(e){var t;if(e&&e!==this)if(this.closed)z1(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&tc(t,e)}remove(e){let{_finalizers:t}=this;t&&tc(t,e),e instanceof n&&e._removeParent(this)}};sn.EMPTY=(()=>{let n=new sn;return n.closed=!0,n})();var Bw=sn.EMPTY;function Jg(n){return n instanceof sn||n&&"closed"in n&&Ae(n.remove)&&Ae(n.add)&&Ae(n.unsubscribe)}function z1(n){Ae(n)?n():n.unsubscribe()}var Wr={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Jl={setTimeout(n,e,...t){let{delegate:r}=Jl;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=Jl;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Xg(n){Jl.setTimeout(()=>{let{onUnhandledError:e}=Wr;if(e)e(n);else throw n})}function Mh(){}var G1=$w("C",void 0,void 0);function W1(n){return $w("E",void 0,n)}function K1(n){return $w("N",n,void 0)}function $w(n,e,t){return{kind:n,value:e,error:t}}var nc=null;function Xl(n){if(Wr.useDeprecatedSynchronousErrorHandling){let e=!nc;if(e&&(nc={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=nc;if(nc=null,t)throw r}}else n()}function Q1(n){Wr.useDeprecatedSynchronousErrorHandling&&nc&&(nc.errorThrown=!0,nc.error=n)}var rc=class extends sn{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Jg(e)&&e.add(this)):this.destination=tB}static create(e,t,r){return new Ro(e,t,r)}next(e){this.isStopped?qw(K1(e),this):this._next(e)}error(e){this.isStopped?qw(W1(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?qw(G1,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},Z4=Function.prototype.bind;function Hw(n,e){return Z4.call(n,e)}var zw=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){Zg(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){Zg(r)}else Zg(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Zg(t)}}},Ro=class extends rc{constructor(e,t,r){super();let i;if(Ae(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let s;this&&Wr.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Hw(e.next,s),error:e.error&&Hw(e.error,s),complete:e.complete&&Hw(e.complete,s)}):i=e}this.destination=new zw(i)}};function Zg(n){Wr.useDeprecatedSynchronousErrorHandling?Q1(n):Xg(n)}function eB(n){throw n}function qw(n,e){let{onStoppedNotification:t}=Wr;t&&Jl.setTimeout(()=>t(n,e))}var tB={closed:!0,next:Mh,error:eB,complete:Mh};var Zl=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Kr(n){return n}function Gw(...n){return Ww(n)}function Ww(n){return n.length===0?Kr:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var Le=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let s=rB(t)?t:new Ro(t,r,i);return Xl(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=Y1(r),new r((i,s)=>{let o=new Ro({next:a=>{try{t(a)}catch(c){s(c),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[Zl](){return this}pipe(...t){return Ww(t)(this)}toPromise(t){return t=Y1(t),new t((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return n.create=e=>new n(e),n})();function Y1(n){var e;return(e=n??Wr.Promise)!==null&&e!==void 0?e:Promise}function nB(n){return n&&Ae(n.next)&&Ae(n.error)&&Ae(n.complete)}function rB(n){return n&&n instanceof rc||nB(n)&&Jg(n)}function iB(n){return Ae(n?.lift)}function tt(n){return e=>{if(iB(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function nt(n,e,t,r,i){return new Kw(n,e,t,r,i)}var Kw=class extends rc{constructor(e,t,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};var J1=Yl(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var gt=(()=>{class n extends Le{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new em(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new J1}next(t){Xl(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){Xl(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Xl(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:s}=this;return r||i?Bw:(this.currentObservers=null,s.push(t),new sn(()=>{this.currentObservers=null,tc(s,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:s}=this;r?t.error(i):s&&t.complete()}asObservable(){let t=new Le;return t.source=this,t}}return n.create=(e,t)=>new em(e,t),n})(),em=class extends gt{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:Bw}};var dt=class extends gt{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Qw={now(){return(Qw.delegate||Date).now()},delegate:void 0};var tm=class extends sn{constructor(e,t){super()}schedule(e,t=0){return this}};var Ph={setInterval(n,e,...t){let{delegate:r}=Ph;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=Ph;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var eu=class extends tm{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,s=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(s,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,r=0){return Ph.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&Ph.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,tc(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var tu=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};tu.now=Qw.now;var nu=class extends tu{constructor(e,t=tu.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var Yw=new nu(eu);var nm=class extends eu{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var rm=class extends nu{};var Jw=new rm(nm);var Yn=new Le(n=>n.complete());function X1(n){return n&&Ae(n.schedule)}function Z1(n){return n[n.length-1]}function im(n){return Ae(Z1(n))?n.pop():void 0}function ko(n){return X1(Z1(n))?n.pop():void 0}function Xw(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function tR(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{d(r.next(h))}catch(p){o(p)}}function c(h){try{d(r.throw(h))}catch(p){o(p)}}function d(h){h.done?s(h.value):i(h.value).then(a,c)}d((r=r.apply(n,e||[])).next())})}function eR(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ic(n){return this instanceof ic?(this.v=n,this):new ic(n)}function nR(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(E){return function(k){return Promise.resolve(k).then(E,p)}}function a(E,k){r[E]&&(i[E]=function(P){return new Promise(function(M,H){s.push([E,P,M,H])>1||c(E,P)})},k&&(i[E]=k(i[E])))}function c(E,k){try{d(r[E](k))}catch(P){y(s[0][3],P)}}function d(E){E.value instanceof ic?Promise.resolve(E.value.v).then(h,p):y(s[0][2],E)}function h(E){c("next",E)}function p(E){c("throw",E)}function y(E,k){E(k),s.shift(),s.length&&c(s[0][0],s[0][1])}}function rR(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof eR=="function"?eR(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(s){t[s]=n[s]&&function(o){return new Promise(function(a,c){o=n[s](o),i(a,c,o.done,o.value)})}}function i(s,o,a,c){Promise.resolve(c).then(function(d){s({value:d,done:a})},o)}}var sm=n=>n&&typeof n.length=="number"&&typeof n!="function";function om(n){return Ae(n?.then)}function am(n){return Ae(n[Zl])}function cm(n){return Symbol.asyncIterator&&Ae(n?.[Symbol.asyncIterator])}function lm(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function sB(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var um=sB();function dm(n){return Ae(n?.[um])}function hm(n){return nR(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield ic(t.read());if(i)return yield ic(void 0);yield yield ic(r)}}finally{t.releaseLock()}})}function fm(n){return Ae(n?.getReader)}function Vt(n){if(n instanceof Le)return n;if(n!=null){if(am(n))return oB(n);if(sm(n))return aB(n);if(om(n))return cB(n);if(cm(n))return iR(n);if(dm(n))return lB(n);if(fm(n))return uB(n)}throw lm(n)}function oB(n){return new Le(e=>{let t=n[Zl]();if(Ae(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function aB(n){return new Le(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function cB(n){return new Le(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Xg)})}function lB(n){return new Le(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function iR(n){return new Le(e=>{dB(n,e).catch(t=>e.error(t))})}function uB(n){return iR(hm(n))}function dB(n,e){var t,r,i,s;return tR(this,void 0,void 0,function*(){try{for(t=rR(n);r=yield t.next(),!r.done;){let o=r.value;if(e.next(o),e.closed)return}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=t.return)&&(yield s.call(t))}finally{if(i)throw i.error}}e.complete()})}function Jn(n,e,t,r=0,i=!1){let s=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(s),!i)return s}function No(n,e=0){return tt((t,r)=>{t.subscribe(nt(r,i=>Jn(r,n,()=>r.next(i),e),()=>Jn(r,n,()=>r.complete(),e),i=>Jn(r,n,()=>r.error(i),e)))})}function Mo(n,e=0){return tt((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function sR(n,e){return Vt(n).pipe(Mo(e),No(e))}function oR(n,e){return Vt(n).pipe(Mo(e),No(e))}function aR(n,e){return new Le(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function cR(n,e){return new Le(t=>{let r;return Jn(t,e,()=>{r=n[um](),Jn(t,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){t.error(o);return}s?t.complete():t.next(i)},0,!0)}),()=>Ae(r?.return)&&r.return()})}function pm(n,e){if(!n)throw new Error("Iterable cannot be null");return new Le(t=>{Jn(t,e,()=>{let r=n[Symbol.asyncIterator]();Jn(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function lR(n,e){return pm(hm(n),e)}function uR(n,e){if(n!=null){if(am(n))return sR(n,e);if(sm(n))return aR(n,e);if(om(n))return oR(n,e);if(cm(n))return pm(n,e);if(dm(n))return cR(n,e);if(fm(n))return lR(n,e)}throw lm(n)}function Ne(n,e){return e?uR(n,e):Vt(n)}function de(...n){let e=ko(n);return Ne(n,e)}function Ei(n,e){let t=Ae(n)?n:()=>n,r=i=>i.error(t());return new Le(e?i=>e.schedule(r,0,i):r)}function gm(n){return!!n&&(n instanceof Le||Ae(n.lift)&&Ae(n.subscribe))}var hs=Yl(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function mm(n,e){let t=typeof e=="object";return new Promise((r,i)=>{let s=new Ro({next:o=>{r(o),s.unsubscribe()},error:i,complete:()=>{t?r(e.defaultValue):i(new hs)}});n.subscribe(s)})}function _e(n,e){return tt((t,r)=>{let i=0;t.subscribe(nt(r,s=>{r.next(n.call(e,s,i++))}))})}var{isArray:hB}=Array;function fB(n,e){return hB(e)?n(...e):n(e)}function ym(n){return _e(e=>fB(n,e))}var{isArray:pB}=Array,{getPrototypeOf:gB,prototype:mB,keys:yB}=Object;function vm(n){if(n.length===1){let e=n[0];if(pB(e))return{args:e,keys:null};if(vB(e)){let t=yB(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function vB(n){return n&&typeof n=="object"&&gB(n)===mB}function _m(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function Zw(...n){let e=ko(n),t=im(n),{args:r,keys:i}=vm(n);if(r.length===0)return Ne([],e);let s=new Le(_B(r,e,i?o=>_m(i,o):Kr));return t?s.pipe(ym(t)):s}function _B(n,e,t=Kr){return r=>{dR(e,()=>{let{length:i}=n,s=new Array(i),o=i,a=i;for(let c=0;c<i;c++)dR(e,()=>{let d=Ne(n[c],e),h=!1;d.subscribe(nt(r,p=>{s[c]=p,h||(h=!0,a--),a||r.next(t(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}function dR(n,e,t){n?Jn(t,n,e):e()}function hR(n,e,t,r,i,s,o,a){let c=[],d=0,h=0,p=!1,y=()=>{p&&!c.length&&!d&&e.complete()},E=P=>d<r?k(P):c.push(P),k=P=>{s&&e.next(P),d++;let M=!1;Vt(t(P,h++)).subscribe(nt(e,H=>{i?.(H),s?E(H):e.next(H)},()=>{M=!0},void 0,()=>{if(M)try{for(d--;c.length&&d<r;){let H=c.shift();o?Jn(e,o,()=>k(H)):k(H)}y()}catch(H){e.error(H)}}))};return n.subscribe(nt(e,E,()=>{p=!0,y()})),()=>{a?.()}}function Pn(n,e,t=1/0){return Ae(e)?Pn((r,i)=>_e((s,o)=>e(r,s,i,o))(Vt(n(r,i))),t):(typeof e=="number"&&(t=e),tt((r,i)=>hR(r,i,n,t)))}function ru(n=1/0){return Pn(Kr,n)}function fR(){return ru(1)}function iu(...n){return fR()(Ne(n,ko(n)))}function Oh(n){return new Le(e=>{Vt(n()).subscribe(e)})}function Po(...n){let e=im(n),{args:t,keys:r}=vm(n),i=new Le(s=>{let{length:o}=t;if(!o){s.complete();return}let a=new Array(o),c=o,d=o;for(let h=0;h<o;h++){let p=!1;Vt(t[h]).subscribe(nt(s,y=>{p||(p=!0,d--),a[h]=y},()=>c--,void 0,()=>{(!c||!p)&&(d||s.next(r?_m(r,a):a),s.complete())}))}});return e?i.pipe(ym(e)):i}function Qr(n,e){return tt((t,r)=>{let i=0;t.subscribe(nt(r,s=>n.call(e,s,i++)&&r.next(s)))})}function fs(n){return tt((e,t)=>{let r=null,i=!1,s;r=e.subscribe(nt(t,void 0,void 0,o=>{s=Vt(n(o,fs(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}function Fh(n,e){return Ae(e)?Pn(n,e,1):Pn(n,1)}function eI(n){return tt((e,t)=>{let r=!1;e.subscribe(nt(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Xn(n){return n<=0?()=>Yn:tt((e,t)=>{let r=0;e.subscribe(nt(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function pR(n=wB){return tt((e,t)=>{let r=!1;e.subscribe(nt(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function wB(){return new hs}function su(n){return tt((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function ps(n,e){let t=arguments.length>=2;return r=>r.pipe(n?Qr((i,s)=>n(i,s,r)):Kr,Xn(1),t?eI(e):pR(()=>new hs))}function wm(n){return n<=0?()=>Yn:tt((e,t)=>{let r=[];e.subscribe(nt(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function tI(...n){let e=ko(n);return tt((t,r)=>{(e?iu(n,t,e):iu(n,t)).subscribe(r)})}function Cr(n,e){return tt((t,r)=>{let i=null,s=0,o=!1,a=()=>o&&!i&&r.complete();t.subscribe(nt(r,c=>{i?.unsubscribe();let d=0,h=s++;Vt(n(c,h)).subscribe(i=nt(r,p=>r.next(e?e(c,p,h,d++):p),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function Vh(n){return tt((e,t)=>{Vt(n).subscribe(nt(t,()=>t.complete(),Mh)),!t.closed&&e.subscribe(t)})}function mt(n,e,t){let r=Ae(n)||e||t?{next:n,error:e,complete:t}:n;return r?tt((i,s)=>{var o;(o=r.subscribe)===null||o===void 0||o.call(r);let a=!0;i.subscribe(nt(s,c=>{var d;(d=r.next)===null||d===void 0||d.call(r,c),s.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),s.complete()},c=>{var d;a=!1,(d=r.error)===null||d===void 0||d.call(r,c),s.error(c)},()=>{var c,d;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(d=r.finalize)===null||d===void 0||d.call(r)}))}):Kr}var nI;function Im(){return nI}function bi(n){let e=nI;return nI=n,e}var gR=Symbol("NotFound");function ou(n){return n===gR||n?.name==="\u0275NotFound"}var oc=class{full;major;minor;patch;constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},mI=new oc("21.0.5");var Am="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",ae=class extends Error{code;constructor(e,t){super(cu(e,t)),this.code=e}};function IB(n){return`NG0${Math.abs(n)}`}function cu(n,e){return`${IB(n)}${e?": "+e:""}`}var vs=globalThis;function rt(n){for(let e in n)if(n[e]===rt)return e;throw Error("")}function wR(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function ms(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(ms).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let r=t.indexOf(`
`);return r>=0?t.slice(0,r):t}function xm(n,e){return n?e?`${n} ${e}`:n:e||""}var EB=rt({__forward_ref__:rt});function _s(n){return n.__forward_ref__=_s,n.toString=function(){return ms(this())},n}function Cn(n){return yI(n)?n():n}function yI(n){return typeof n=="function"&&n.hasOwnProperty(EB)&&n.__forward_ref__===_s}function se(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Ti(n){return{providers:n.providers||[],imports:n.imports||[]}}function qh(n){return bB(n,Rm)}function vI(n){return qh(n)!==null}function bB(n,e){return n.hasOwnProperty(e)&&n[e]||null}function CB(n){let e=n?.[Rm]??null;return e||null}function iI(n){return n&&n.hasOwnProperty(bm)?n[bm]:null}var Rm=rt({\u0275prov:rt}),bm=rt({\u0275inj:rt}),ce=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=se({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function _I(n){return n&&!!n.\u0275providers}var wI=rt({\u0275cmp:rt}),II=rt({\u0275dir:rt}),EI=rt({\u0275pipe:rt}),bI=rt({\u0275mod:rt}),Uh=rt({\u0275fac:rt}),uc=rt({__NG_ELEMENT_ID__:rt}),mR=rt({__NG_ENV_ID__:rt});function CI(n){return n[bI]||null}function Lo(n){return n[wI]||null}function TI(n){return n[II]||null}function IR(n){return n[EI]||null}function dc(n){return typeof n=="string"?n:n==null?"":String(n)}function ER(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():dc(n)}var bR=rt({ngErrorCode:rt}),TB=rt({ngErrorMessage:rt}),SB=rt({ngTokenPath:rt});function SI(n,e){return CR("",-200,e)}function km(n,e){throw new ae(-201,!1)}function CR(n,e,t){let r=new ae(e,n);return r[bR]=e,r[TB]=n,t&&(r[SB]=t),r}function DB(n){return n[bR]}var sI;function TR(){return sI}function $n(n){let e=sI;return sI=n,e}function DI(n,e,t){let r=qh(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&8)return null;if(e!==void 0)return e;km(n,"Injector")}var AB={},sc=AB,oI="__NG_DI_FLAG__",aI=class{injector;constructor(e){this.injector=e}retrieve(e,t){let r=ac(t)||0;try{return this.injector.get(e,r&8?null:sc,r)}catch(i){if(ou(i))return i;throw i}}};function xB(n,e=0){let t=Im();if(t===void 0)throw new ae(-203,!1);if(t===null)return DI(n,void 0,e);{let r=RB(e),i=t.retrieve(n,r);if(ou(i)){if(r.optional)return null;throw i}return i}}function Me(n,e=0){return(TR()||xB)(Cn(n),e)}function j(n,e){return Me(n,ac(e))}function ac(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function RB(n){return{optional:!!(n&8),host:!!(n&1),self:!!(n&2),skipSelf:!!(n&4)}}function cI(n){let e=[];for(let t=0;t<n.length;t++){let r=Cn(n[t]);if(Array.isArray(r)){if(r.length===0)throw new ae(900,!1);let i,s=0;for(let o=0;o<r.length;o++){let a=r[o],c=kB(a);typeof c=="number"?c===-1?i=a.token:s|=c:i=a}e.push(Me(i,s))}else e.push(Me(r))}return e}function SR(n,e){return n[oI]=e,n.prototype[oI]=e,n}function kB(n){return n[oI]}function Oo(n,e){let t=n.hasOwnProperty(Uh);return t?n[Uh]:null}function DR(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],s=e[r];if(t&&(i=t(i),s=t(s)),s!==i)return!1}return!0}function AR(n){return n.flat(Number.POSITIVE_INFINITY)}function Nm(n,e){n.forEach(t=>Array.isArray(t)?Nm(t,e):e(t))}function AI(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function zh(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function xR(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let s=i-2;n[i]=n[s],i--}n[e]=t,n[e+1]=r}}function Mm(n,e,t){let r=lu(n,e);return r>=0?n[r|1]=t:(r=~r,xR(n,r,e,t)),r}function Pm(n,e){let t=lu(n,e);if(t>=0)return n[t|1]}function lu(n,e){return NB(n,e,1)}function NB(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let s=r+(i-r>>1),o=n[s<<t];if(e===o)return s<<t;o>e?i=s:r=s+1}return~(i<<t)}var Uo={},Hn=[],hc=new ce(""),xI=new ce("",-1),RI=new ce(""),jh=class{get(e,t=sc){if(t===sc){let i=CR("",-201);throw i.name="\u0275NotFound",i}return t}};function lr(n){return{\u0275providers:n}}function RR(n){return lr([{provide:hc,multi:!0,useValue:n}])}function kR(...n){return{\u0275providers:kI(!0,n),\u0275fromNgModule:!0}}function kI(n,...e){let t=[],r=new Set,i,s=o=>{t.push(o)};return Nm(e,o=>{let a=o;Cm(a,s,[],r)&&(i||=[],i.push(a))}),i!==void 0&&NR(i,s),t}function NR(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];NI(i,s=>{e(s,r)})}}function Cm(n,e,t,r){if(n=Cn(n),!n)return!1;let i=null,s=iI(n),o=!s&&Lo(n);if(!s&&!o){let c=n.ngModule;if(s=iI(c),s)i=c;else return!1}else{if(o&&!o.standalone)return!1;i=n}let a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){let c=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let d of c)Cm(d,e,t,r)}}else if(s){if(s.imports!=null&&!a){r.add(i);let d;try{Nm(s.imports,h=>{Cm(h,e,t,r)&&(d||=[],d.push(h))})}finally{}d!==void 0&&NR(d,e)}if(!a){let d=Oo(i)||(()=>new i);e({provide:i,useFactory:d,deps:Hn},i),e({provide:RI,useValue:i,multi:!0},i),e({provide:hc,useValue:()=>Me(i),multi:!0},i)}let c=s.providers;if(c!=null&&!a){let d=n;NI(c,h=>{e(h,d)})}}else return!1;return i!==n&&n.providers!==void 0}function NI(n,e){for(let t of n)_I(t)&&(t=t.\u0275providers),Array.isArray(t)?NI(t,e):e(t)}var MB=rt({provide:String,useValue:rt});function MR(n){return n!==null&&typeof n=="object"&&MB in n}function PB(n){return!!(n&&n.useExisting)}function OB(n){return!!(n&&n.useFactory)}function cc(n){return typeof n=="function"}function PR(n){return!!n.useClass}var Gh=new ce(""),Em={},yR={},rI;function Wh(){return rI===void 0&&(rI=new jh),rI}var Lt=class{},lc=class extends Lt{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,uI(e,o=>this.processProvider(o)),this.records.set(xI,au(void 0,this)),i.has("environment")&&this.records.set(Lt,au(void 0,this));let s=this.records.get(Gh);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(RI,Hn,{self:!0}))}retrieve(e,t){let r=ac(t)||0;try{return this.get(e,sc,r)}catch(i){if(ou(i))return i;throw i}}destroy(){Lh(this),this._destroyed=!0;let e=pe(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),pe(e)}}onDestroy(e){return Lh(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){Lh(this);let t=bi(this),r=$n(void 0),i;try{return e()}finally{bi(t),$n(r)}}get(e,t=sc,r){if(Lh(this),e.hasOwnProperty(mR))return e[mR](this);let i=ac(r),s,o=bi(this),a=$n(void 0);try{if(!(i&4)){let d=this.records.get(e);if(d===void 0){let h=jB(e)&&qh(e);h&&this.injectableDefInScope(h)?d=au(lI(e),Em):d=null,this.records.set(e,d)}if(d!=null)return this.hydrate(e,d,i)}let c=i&2?Wh():this.parent;return t=i&8&&t===sc?null:t,c.get(e,t)}catch(c){let d=DB(c);throw d===-200||d===-201?new ae(d,null):c}finally{$n(a),bi(o)}}resolveInjectorInitializers(){let e=pe(null),t=bi(this),r=$n(void 0),i;try{let s=this.get(hc,Hn,{self:!0});for(let o of s)o()}finally{bi(t),$n(r),pe(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(ms(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=Cn(e);let t=cc(e)?e:Cn(e&&e.provide),r=VB(e);if(!cc(e)&&e.multi===!0){let i=this.records.get(t);i||(i=au(void 0,Em,!0),i.factory=()=>cI(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t,r){let i=pe(null);try{if(t.value===yR)throw SI(ms(e));return t.value===Em&&(t.value=yR,t.value=t.factory(void 0,r)),typeof t.value=="object"&&t.value&&UB(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{pe(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=Cn(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function lI(n){let e=qh(n),t=e!==null?e.factory:Oo(n);if(t!==null)return t;if(n instanceof ce)throw new ae(204,!1);if(n instanceof Function)return FB(n);throw new ae(204,!1)}function FB(n){if(n.length>0)throw new ae(204,!1);let t=CB(n);return t!==null?()=>t.factory(n):()=>new n}function VB(n){if(MR(n))return au(void 0,n.useValue);{let e=MI(n);return au(e,Em)}}function MI(n,e,t){let r;if(cc(n)){let i=Cn(n);return Oo(i)||lI(i)}else if(MR(n))r=()=>Cn(n.useValue);else if(OB(n))r=()=>n.useFactory(...cI(n.deps||[]));else if(PB(n))r=(i,s)=>Me(Cn(n.useExisting),s!==void 0&&s&8?8:void 0);else{let i=Cn(n&&(n.useClass||n.provide));if(LB(n))r=()=>new i(...cI(n.deps));else return Oo(i)||lI(i)}return r}function Lh(n){if(n.destroyed)throw new ae(205,!1)}function au(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function LB(n){return!!n.deps}function UB(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function jB(n){return typeof n=="function"||typeof n=="object"&&n.ngMetadataName==="InjectionToken"}function uI(n,e){for(let t of n)Array.isArray(t)?uI(t,e):t&&_I(t)?uI(t.\u0275providers,e):e(t)}function an(n,e){let t;n instanceof lc?(Lh(n),t=n):t=new aI(n);let r,i=bi(t),s=$n(void 0);try{return e()}finally{bi(i),$n(s)}}function OR(){return TR()!==void 0||Im()!=null}var Yr=0,ge=1,Ie=2,on=3,Tr=4,Sr=5,uu=6,du=7,Pt=8,ws=9,Si=10,yt=11,hu=12,PI=13,fc=14,ur=15,jo=16,pc=17,Di=18,Kh=19,OI=20,gs=21,Om=22,Fo=23,dr=24,gc=25,mc=26,Ut=27,FR=1,FI=6,Bo=7,Qh=8,yc=9,At=10;function Ai(n){return Array.isArray(n)&&typeof n[FR]=="object"}function Jr(n){return Array.isArray(n)&&n[FR]===!0}function VI(n){return(n.flags&4)!==0}function $o(n){return n.componentOffset>-1}function Fm(n){return(n.flags&1)===1}function xi(n){return!!n.template}function fu(n){return(n[Ie]&512)!==0}function vc(n){return(n[Ie]&256)===256}var VR="svg",LR="math";function Dr(n){for(;Array.isArray(n);)n=n[Yr];return n}function LI(n,e){return Dr(e[n])}function Xr(n,e){return Dr(e[n.index])}function Yh(n,e){return n.data[e]}function UI(n,e){return n[e]}function jI(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function Ar(n,e){let t=e[n];return Ai(t)?t:t[Yr]}function UR(n){return(n[Ie]&4)===4}function Vm(n){return(n[Ie]&128)===128}function jR(n){return Jr(n[on])}function Ri(n,e){return e==null?null:n[e]}function BI(n){n[pc]=0}function $I(n){n[Ie]&1024||(n[Ie]|=1024,Vm(n)&&_c(n))}function BR(n,e){for(;n>0;)e=e[fc],n--;return e}function Jh(n){return!!(n[Ie]&9216||n[dr]?.dirty)}function Lm(n){n[Si].changeDetectionScheduler?.notify(8),n[Ie]&64&&(n[Ie]|=1024),Jh(n)&&_c(n)}function _c(n){n[Si].changeDetectionScheduler?.notify(0);let e=Vo(n);for(;e!==null&&!(e[Ie]&8192||(e[Ie]|=8192,!Vm(e)));)e=Vo(e)}function HI(n,e){if(vc(n))throw new ae(911,!1);n[gs]===null&&(n[gs]=[]),n[gs].push(e)}function $R(n,e){if(n[gs]===null)return;let t=n[gs].indexOf(e);t!==-1&&n[gs].splice(t,1)}function Vo(n){let e=n[on];return Jr(e)?e[on]:e}function qI(n){return n[du]??=[]}function zI(n){return n.cleanup??=[]}function HR(n,e,t,r){let i=qI(e);i.push(t),n.firstCreatePass&&zI(n).push(r,i.length-1)}var Oe={lFrame:sk(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var dI=!1;function qR(){return Oe.lFrame.elementDepthCount}function zR(){Oe.lFrame.elementDepthCount++}function GI(){Oe.lFrame.elementDepthCount--}function GR(){return Oe.bindingsEnabled}function WR(){return Oe.skipHydrationRootTNode!==null}function WI(n){return Oe.skipHydrationRootTNode===n}function KI(){Oe.skipHydrationRootTNode=null}function Pe(){return Oe.lFrame.lView}function jt(){return Oe.lFrame.tView}function X(n){return Oe.lFrame.contextLView=n,n[Pt]}function Z(n){return Oe.lFrame.contextLView=null,n}function pn(){let n=QI();for(;n!==null&&n.type===64;)n=n.parent;return n}function QI(){return Oe.lFrame.currentTNode}function KR(){let n=Oe.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function pu(n,e){let t=Oe.lFrame;t.currentTNode=n,t.isParent=e}function YI(){return Oe.lFrame.isParent}function QR(){Oe.lFrame.isParent=!1}function YR(){return Oe.lFrame.contextLView}function JI(){return dI}function Bh(n){let e=dI;return dI=n,e}function JR(){let n=Oe.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function XR(){return Oe.lFrame.bindingIndex}function ZR(n){return Oe.lFrame.bindingIndex=n}function wc(){return Oe.lFrame.bindingIndex++}function Um(n){let e=Oe.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function ek(){return Oe.lFrame.inI18n}function tk(n,e){let t=Oe.lFrame;t.bindingIndex=t.bindingRootIndex=n,jm(e)}function nk(){return Oe.lFrame.currentDirectiveIndex}function jm(n){Oe.lFrame.currentDirectiveIndex=n}function rk(n){let e=Oe.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function XI(){return Oe.lFrame.currentQueryIndex}function Bm(n){Oe.lFrame.currentQueryIndex=n}function BB(n){let e=n[ge];return e.type===2?e.declTNode:e.type===1?n[Sr]:null}function ZI(n,e,t){if(t&4){let i=e,s=n;for(;i=i.parent,i===null&&!(t&1);)if(i=BB(s),i===null||(s=s[fc],i.type&10))break;if(i===null)return!1;e=i,n=s}let r=Oe.lFrame=ik();return r.currentTNode=e,r.lView=n,!0}function $m(n){let e=ik(),t=n[ge];Oe.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function ik(){let n=Oe.lFrame,e=n===null?null:n.child;return e===null?sk(n):e}function sk(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function ok(){let n=Oe.lFrame;return Oe.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var eE=ok;function Hm(){let n=ok();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function ak(n){return(Oe.lFrame.contextLView=BR(n,Oe.lFrame.contextLView))[Pt]}function ki(){return Oe.lFrame.selectedIndex}function Ho(n){Oe.lFrame.selectedIndex=n}function qm(){let n=Oe.lFrame;return Yh(n.tView,n.selectedIndex)}function ck(){return Oe.lFrame.currentNamespace}var lk=!0;function zm(){return lk}function Gm(n){lk=n}function hI(n,e=null,t=null,r){let i=tE(n,e,t,r);return i.resolveInjectorInitializers(),i}function tE(n,e=null,t=null,r,i=new Set){let s=[t||Hn,kR(n)];return r=r||(typeof n=="object"?void 0:ms(n)),new lc(s,e||Wh(),r||null,i)}var Mt=class n{static THROW_IF_NOT_FOUND=sc;static NULL=new jh;static create(e,t){if(Array.isArray(e))return hI({name:""},t,e,"");{let r=e.name??"";return hI({name:r},e.parent,e.providers,r)}}static \u0275prov=se({token:n,providedIn:"any",factory:()=>Me(xI)});static __NG_ELEMENT_ID__=-1},cn=new ce(""),xr=(()=>{class n{static __NG_ELEMENT_ID__=$B;static __NG_ENV_ID__=t=>t}return n})(),Tm=class extends xr{_lView;constructor(e){super(),this._lView=e}get destroyed(){return vc(this._lView)}onDestroy(e){let t=this._lView;return HI(t,e),()=>$R(t,e)}};function $B(){return new Tm(Pe())}var uk=!1,Is=(()=>{class n{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new dt(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new Le(t=>{t.next(!1),t.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=se({token:n,providedIn:"root",factory:()=>new n})}return n})(),fI=class extends gt{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,OR()&&(this.destroyRef=j(xr,{optional:!0})??void 0,this.pendingTasks=j(Is,{optional:!0})??void 0)}emit(e){let t=pe(null);try{super.next(e)}finally{pe(t)}}subscribe(e,t,r){let i=e,s=t||(()=>null),o=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),s=c.error?.bind(c),o=c.complete?.bind(c)}this.__isAsync&&(s=this.wrapInTimeout(s),i&&(i=this.wrapInTimeout(i)),o&&(o=this.wrapInTimeout(o)));let a=super.subscribe({next:i,error:s,complete:o});return e instanceof sn&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(t)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},Dt=fI;function Sm(...n){}function nE(n){let e,t;function r(){n=Sm;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function rE(n){return queueMicrotask(()=>n()),()=>{n=Sm}}var iE="isAngularZone",$h=iE+"_ID",HB=0,wt=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new Dt(!1);onMicrotaskEmpty=new Dt(!1);onStable=new Dt(!1);onError=new Dt(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:s=uk}=e;if(typeof Zone>"u")throw new ae(908,!1);Zone.assertZonePatched();let o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!i&&r,o.shouldCoalesceRunChangeDetection=i,o.callbackScheduled=!1,o.scheduleInRootZone=s,GB(o)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(iE)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new ae(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new ae(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,qB,Sm,Sm);try{return s.runTask(o,t,r)}finally{s.cancelTask(o)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},qB={};function sE(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function zB(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){nE(()=>{n.callbackScheduled=!1,pI(n),n.isCheckStableRunning=!0,sE(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),pI(n)}function GB(n){let e=()=>{zB(n)},t=HB++;n._inner=n._inner.fork({name:"angular",properties:{[iE]:!0,[$h]:t,[$h+t]:!0},onInvokeTask:(r,i,s,o,a,c)=>{if(WB(c))return r.invokeTask(s,o,a,c);try{return vR(n),r.invokeTask(s,o,a,c)}finally{(n.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),_R(n)}},onInvoke:(r,i,s,o,a,c,d)=>{try{return vR(n),r.invoke(s,o,a,c,d)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!KB(c)&&e(),_R(n)}},onHasTask:(r,i,s,o)=>{r.hasTask(s,o),i===s&&(o.change=="microTask"?(n._hasPendingMicrotasks=o.microTask,pI(n),sE(n)):o.change=="macroTask"&&(n.hasPendingMacrotasks=o.macroTask))},onHandleError:(r,i,s,o)=>(r.handleError(s,o),n.runOutsideAngular(()=>n.onError.emit(o)),!1)})}function pI(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function vR(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function _R(n){n._nesting--,sE(n)}var Hh=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new Dt;onMicrotaskEmpty=new Dt;onStable=new Dt;onError=new Dt;run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function WB(n){return dk(n,"__ignore_ng_zone__")}function KB(n){return dk(n,"__scheduler_tick__")}function dk(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var Ci=class{_console=console;handleError(e){this._console.error("ERROR",e)}},hr=new ce("",{factory:()=>{let n=j(wt),e=j(Lt),t;return r=>{n.runOutsideAngular(()=>{e.destroyed&&!t?setTimeout(()=>{throw r}):(t??=e.get(Ci),t.handleError(r))})}}}),hk={provide:hc,useValue:()=>{let n=j(Ci,{optional:!0})},multi:!0},QB=new ce("",{factory:()=>{let n=j(cn).defaultView;if(!n)return;let e=j(hr),t=s=>{e(s.reason),s.preventDefault()},r=s=>{s.error?e(s.error):e(new Error(s.message,{cause:s})),s.preventDefault()},i=()=>{n.addEventListener("unhandledrejection",t),n.addEventListener("error",r)};typeof Zone<"u"?Zone.root.run(i):i(),j(xr).onDestroy(()=>{n.removeEventListener("error",r),n.removeEventListener("unhandledrejection",t)})}});function oE(){return lr([RR(()=>void j(QB))])}function Ee(n,e){let[t,r,i]=Vw(n,e?.equal),s=t,o=s[Bn];return s.set=r,s.update=i,s.asReadonly=fk.bind(s),s}function fk(){let n=this[Bn];if(n.readonlyFn===void 0){let e=()=>this();e[Bn]=n,n.readonlyFn=e}return n.readonlyFn}var Xh=(()=>{class n{view;node;constructor(t,r){this.view=t,this.node=r}static __NG_ELEMENT_ID__=YB}return n})();function YB(){return new Xh(Pe(),pn())}var ys=class{},Zh=new ce("",{factory:()=>!0});var aE=new ce(""),gu=(()=>{class n{internalPendingTasks=j(Is);scheduler=j(ys);errorHandler=j(hr);add(){let t=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(t)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(t))}}run(t){let r=this.add();t().catch(this.errorHandler).finally(r)}static \u0275prov=se({token:n,providedIn:"root",factory:()=>new n})}return n})(),Wm=(()=>{class n{static \u0275prov=se({token:n,providedIn:"root",factory:()=>new gI})}return n})(),gI=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let t=e.zone,r=this.queues.get(t);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let r=this.queues.get(t);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[t,r]of this.queues)t===null?e||=this.flushQueue(r):e||=t.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let t=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,t=!0,r.run());return t}},Dm=class{[Bn];constructor(e){this[Bn]=e}destroy(){this[Bn].destroy()}};function Ni(n,e){let t=e?.injector??j(Mt),r=e?.manualCleanup!==!0?t.get(xr):null,i,s=t.get(Xh,null,{optional:!0}),o=t.get(ys);return s!==null?(i=ZB(s.view,o,n),r instanceof Tm&&r._lView===s.view&&(r=null)):i=e3(n,t.get(Wm),o),i.injector=t,r!==null&&(i.onDestroyFns=[r.onDestroy(()=>i.destroy())]),new Dm(i)}var pk=ie(B({},Uw),{cleanupFns:void 0,zone:null,onDestroyFns:null,run(){let n=Bh(!1);try{jw(this)}finally{Bh(n)}},cleanup(){if(!this.cleanupFns?.length)return;let n=pe(null);try{for(;this.cleanupFns.length;)this.cleanupFns.pop()()}finally{this.cleanupFns=[],pe(n)}}}),JB=ie(B({},pk),{consumerMarkedDirty(){this.scheduler.schedule(this),this.notifier.notify(12)},destroy(){if(ec(this),this.onDestroyFns!==null)for(let n of this.onDestroyFns)n();this.cleanup(),this.scheduler.remove(this)}}),XB=ie(B({},pk),{consumerMarkedDirty(){this.view[Ie]|=8192,_c(this.view),this.notifier.notify(13)},destroy(){if(ec(this),this.onDestroyFns!==null)for(let n of this.onDestroyFns)n();this.cleanup(),this.view[Fo]?.delete(this)}});function ZB(n,e,t){let r=Object.create(XB);return r.view=n,r.zone=typeof Zone<"u"?Zone.current:null,r.notifier=e,r.fn=gk(r,t),n[Fo]??=new Set,n[Fo].add(r),r.consumerMarkedDirty(r),r}function e3(n,e,t){let r=Object.create(JB);return r.fn=gk(r,n),r.scheduler=e,r.notifier=t,r.zone=typeof Zone<"u"?Zone.current:null,r.scheduler.add(r),r.notifier.notify(12),r}function gk(n,e){return()=>{e(t=>(n.cleanupFns??=[]).push(t))}}function ln(n){return Lw(n)}function bu(n){return{toString:n}.toString()}var Km="__parameters__";function c3(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function l3(n,e,t){return bu(()=>{let r=c3(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;let o=new i(...s);return a.annotation=o,a;function a(c,d,h){let p=c.hasOwnProperty(Km)?c[Km]:Object.defineProperty(c,Km,{value:[]})[Km];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(o),c}}return i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var fr=SR(l3("Optional"),8);function u3(n){return typeof n=="function"}function qk(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}var ny=class{previousValue;currentValue;firstChange;constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}},Es=(()=>{let n=()=>zk;return n.ngInherit=!0,n})();function zk(n){return n.type.prototype.ngOnChanges&&(n.setInput=h3),d3}function d3(){let n=Wk(this),e=n?.current;if(e){let t=n.previous;if(t===Uo)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function h3(n,e,t,r,i){let s=this.declaredInputs[r],o=Wk(n)||f3(n,{previous:Uo,current:null}),a=o.current||(o.current={}),c=o.previous,d=c[s];a[s]=new ny(d&&d.currentValue,t,c===Uo),qk(n,e,i,t)}var Gk="__ngSimpleChanges__";function Wk(n){return n[Gk]||null}function f3(n,e){return n[Gk]=e}var mk=[];var it=function(n,e=null,t){for(let r=0;r<mk.length;r++){let i=mk[r];i(n,e,t)}},Ke=(function(n){return n[n.TemplateCreateStart=0]="TemplateCreateStart",n[n.TemplateCreateEnd=1]="TemplateCreateEnd",n[n.TemplateUpdateStart=2]="TemplateUpdateStart",n[n.TemplateUpdateEnd=3]="TemplateUpdateEnd",n[n.LifecycleHookStart=4]="LifecycleHookStart",n[n.LifecycleHookEnd=5]="LifecycleHookEnd",n[n.OutputStart=6]="OutputStart",n[n.OutputEnd=7]="OutputEnd",n[n.BootstrapApplicationStart=8]="BootstrapApplicationStart",n[n.BootstrapApplicationEnd=9]="BootstrapApplicationEnd",n[n.BootstrapComponentStart=10]="BootstrapComponentStart",n[n.BootstrapComponentEnd=11]="BootstrapComponentEnd",n[n.ChangeDetectionStart=12]="ChangeDetectionStart",n[n.ChangeDetectionEnd=13]="ChangeDetectionEnd",n[n.ChangeDetectionSyncStart=14]="ChangeDetectionSyncStart",n[n.ChangeDetectionSyncEnd=15]="ChangeDetectionSyncEnd",n[n.AfterRenderHooksStart=16]="AfterRenderHooksStart",n[n.AfterRenderHooksEnd=17]="AfterRenderHooksEnd",n[n.ComponentStart=18]="ComponentStart",n[n.ComponentEnd=19]="ComponentEnd",n[n.DeferBlockStateStart=20]="DeferBlockStateStart",n[n.DeferBlockStateEnd=21]="DeferBlockStateEnd",n[n.DynamicComponentStart=22]="DynamicComponentStart",n[n.DynamicComponentEnd=23]="DynamicComponentEnd",n[n.HostBindingsUpdateStart=24]="HostBindingsUpdateStart",n[n.HostBindingsUpdateEnd=25]="HostBindingsUpdateEnd",n})(Ke||{});function p3(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){let o=zk(e);(t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o)}i&&(t.preOrderHooks??=[]).push(0-n,i),s&&((t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s))}function g3(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:d,ngOnDestroy:h}=s;o&&(n.contentHooks??=[]).push(-t,o),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),d&&((n.viewHooks??=[]).push(t,d),(n.viewCheckHooks??=[]).push(t,d)),h!=null&&(n.destroyHooks??=[]).push(t,h)}}function Jm(n,e,t){Kk(n,e,3,t)}function Xm(n,e,t,r){(n[Ie]&3)===t&&Kk(n,e,t,r)}function cE(n,e){let t=n[Ie];(t&3)===e&&(t&=16383,t+=1,n[Ie]=t)}function Kk(n,e,t,r){let i=r!==void 0?n[pc]&65535:0,s=r??-1,o=e.length-1,a=0;for(let c=i;c<o;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(n[pc]+=65536),(a<s||s==-1)&&(m3(n,t,e,c),n[pc]=(n[pc]&4294901760)+c+2),c++}function yk(n,e){it(Ke.LifecycleHookStart,n,e);let t=pe(null);try{e.call(n)}finally{pe(t),it(Ke.LifecycleHookEnd,n,e)}}function m3(n,e,t,r){let i=t[r]<0,s=t[r+1],o=i?-t[r]:t[r],a=n[o];i?n[Ie]>>14<n[pc]>>16&&(n[Ie]&3)===e&&(n[Ie]+=16384,yk(a,s)):yk(a,s)}var yu=-1,Ec=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,r,i){this.factory=e,this.name=i,this.canSeeViewProviders=t,this.injectImpl=r}};function y3(n){return(n.flags&8)!==0}function v3(n){return(n.flags&16)!==0}function _3(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let s=t[r++],o=t[r++],a=t[r++];n.setAttribute(e,o,a,s)}else{let s=i,o=t[++r];w3(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),r++}}return r}function Qk(n){return n===3||n===4||n===6}function w3(n){return n.charCodeAt(0)===64}function vu(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?vk(n,t,i,null,e[++r]):vk(n,t,i,null,null))}}return n}function vk(n,e,t,r,i){let s=0,o=n.length;if(e===-1)o=-1;else for(;s<n.length;){let a=n[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<n.length;){let a=n[s];if(typeof a=="number")break;if(a===t){i!==null&&(n[s+1]=i);return}s++,i!==null&&s++}o!==-1&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),i!==null&&n.splice(s++,0,i)}function Yk(n){return n!==yu}function ry(n){return n&32767}function I3(n){return n>>16}function iy(n,e){let t=I3(n),r=e;for(;t>0;)r=r[fc],t--;return r}var _E=!0;function sy(n){let e=_E;return _E=n,e}var E3=256,Jk=E3-1,Xk=5,b3=0,Mi={};function C3(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(uc)&&(r=t[uc]),r==null&&(r=t[uc]=b3++);let i=r&Jk,s=1<<i;e.data[n+(i>>Xk)]|=s}function oy(n,e){let t=Zk(n,e);if(t!==-1)return t;let r=e[ge];r.firstCreatePass&&(n.injectorIndex=e.length,lE(r.data,n),lE(e,null),lE(r.blueprint,null));let i=WE(n,e),s=n.injectorIndex;if(Yk(i)){let o=ry(i),a=iy(i,e),c=a[ge].data;for(let d=0;d<8;d++)e[s+d]=a[o+d]|c[o+d]}return e[s+8]=i,s}function lE(n,e){n.push(0,0,0,0,0,0,0,0,e)}function Zk(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function WE(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=iN(i),r===null)return yu;if(t++,i=i[fc],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return yu}function wE(n,e,t){C3(n,e,t)}function T3(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let r=t.length,i=0;for(;i<r;){let s=t[i];if(Qk(s))break;if(s===0)i=i+2;else if(typeof s=="number")for(i++;i<r&&typeof t[i]=="string";)i++;else{if(s===e)return t[i+1];i=i+2}}}return null}function eN(n,e,t){if(t&8||n!==void 0)return n;km(e,"NodeInjector")}function tN(n,e,t,r){if(t&8&&r===void 0&&(r=null),(t&3)===0){let i=n[ws],s=$n(void 0);try{return i?i.get(e,r,t&8):DI(e,r,t&8)}finally{$n(s)}}return eN(r,e,t)}function nN(n,e,t,r=0,i){if(n!==null){if(e[Ie]&2048&&!(r&2)){let o=x3(n,e,t,r,Mi);if(o!==Mi)return o}let s=rN(n,e,t,r,Mi);if(s!==Mi)return s}return tN(e,t,r,i)}function rN(n,e,t,r,i){let s=D3(t);if(typeof s=="function"){if(!ZI(e,n,r))return r&1?eN(i,t,r):tN(e,t,r,i);try{let o;if(o=s(r),o==null&&!(r&8))km(t);else return o}finally{eE()}}else if(typeof s=="number"){let o=null,a=Zk(n,e),c=yu,d=r&1?e[ur][Sr]:null;for((a===-1||r&4)&&(c=a===-1?WE(n,e):e[a+8],c===yu||!wk(r,!1)?a=-1:(o=e[ge],a=ry(c),e=iy(c,e)));a!==-1;){let h=e[ge];if(_k(s,a,h.data)){let p=S3(a,e,t,o,r,d);if(p!==Mi)return p}c=e[a+8],c!==yu&&wk(r,e[ge].data[a+8]===d)&&_k(s,a,e)?(o=h,a=ry(c),e=iy(c,e)):a=-1}}return i}function S3(n,e,t,r,i,s){let o=e[ge],a=o.data[n+8],c=r==null?$o(a)&&_E:r!=o&&(a.type&3)!==0,d=i&1&&s===a,h=Zm(a,o,t,c,d);return h!==null?rf(e,o,h,a,i):Mi}function Zm(n,e,t,r,i){let s=n.providerIndexes,o=e.data,a=s&1048575,c=n.directiveStart,d=n.directiveEnd,h=s>>20,p=r?a:a+h,y=i?a+h:d;for(let E=p;E<y;E++){let k=o[E];if(E<c&&t===k||E>=c&&k.type===t)return E}if(i){let E=o[c];if(E&&xi(E)&&E.type===t)return c}return null}function rf(n,e,t,r,i){let s=n[t],o=e.data;if(s instanceof Ec){let a=s;if(a.resolving){let E=ER(o[t]);throw SI(E)}let c=sy(a.canSeeViewProviders);a.resolving=!0;let d=o[t].type||o[t],h,p=a.injectImpl?$n(a.injectImpl):null,y=ZI(n,r,0);try{s=n[t]=a.factory(void 0,i,o,n,r),e.firstCreatePass&&t>=r.directiveStart&&p3(t,o[t],e)}finally{p!==null&&$n(p),sy(c),a.resolving=!1,eE()}}return s}function D3(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(uc)?n[uc]:void 0;return typeof e=="number"?e>=0?e&Jk:A3:e}function _k(n,e,t){let r=1<<n;return!!(t[e+(n>>Xk)]&r)}function wk(n,e){return!(n&2)&&!(n&1&&e)}var Ic=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return nN(this._tNode,this._lView,e,ac(r),t)}};function A3(){return new Ic(pn(),Pe())}function bs(n){return bu(()=>{let e=n.prototype.constructor,t=e[Uh]||IE(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let s=i[Uh]||IE(i);if(s&&s!==t)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function IE(n){return yI(n)?()=>{let e=IE(Cn(n));return e&&e()}:Oo(n)}function x3(n,e,t,r,i){let s=n,o=e;for(;s!==null&&o!==null&&o[Ie]&2048&&!fu(o);){let a=rN(s,o,t,r|2,Mi);if(a!==Mi)return a;let c=s.parent;if(!c){let d=o[OI];if(d){let h=d.get(t,Mi,r);if(h!==Mi)return h}c=iN(o),o=o[fc]}s=c}return i}function iN(n){let e=n[ge],t=e.type;return t===2?e.declTNode:t===1?n[Sr]:null}function uf(n){return T3(pn(),n)}function R3(){return Cu(pn(),Pe())}function Cu(n,e){return new Zn(Xr(n,e))}var Zn=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=R3}return n})();function k3(n){return n instanceof Zn?n.nativeElement:n}function N3(){return this._results[Symbol.iterator]()}var ay=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new gt}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;let r=AR(e);(this._changesDetected=!DR(this._results,r,t))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=N3};function sN(n){return(n.flags&128)===128}var KE=(function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n})(KE||{}),oN=new Map,M3=0;function P3(){return M3++}function O3(n){oN.set(n[Kh],n)}function EE(n){oN.delete(n[Kh])}var Ik="__ngContext__";function _u(n,e){Ai(e)?(n[Ik]=e[Kh],O3(e)):n[Ik]=e}function aN(n){return lN(n[hu])}function cN(n){return lN(n[Tr])}function lN(n){for(;n!==null&&!Jr(n);)n=n[Tr];return n}var F3;function QE(n){F3=n}var Iy=new ce("",{factory:()=>V3}),V3="ng";var Ey=new ce(""),Dc=new ce("",{providedIn:"platform",factory:()=>"unknown"});var by=new ce("",{factory:()=>j(cn).body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var uN="r";var dN="di";var hN=!1,fN=new ce("",{factory:()=>hN});var L3=(n,e,t,r)=>{};function U3(n,e,t,r){L3(n,e,t,r)}function YE(n){return(n.flags&32)===32}var j3=()=>null;function pN(n,e,t=!1){return j3(n,e,t)}function gN(n,e){let t=n.contentQueries;if(t!==null){let r=pe(null);try{for(let i=0;i<t.length;i+=2){let s=t[i],o=t[i+1];if(o!==-1){let a=n.data[o];Bm(s),a.contentQueries(2,e[o],o)}}}finally{pe(r)}}}function bE(n,e,t){Bm(0);let r=pe(null);try{e(n,t)}finally{pe(r)}}function mN(n,e,t){if(VI(e)){let r=pe(null);try{let i=e.directiveStart,s=e.directiveEnd;for(let o=i;o<s;o++){let a=n.data[o];if(a.contentQueries){let c=t[o];a.contentQueries(1,c,o)}}}finally{pe(r)}}}var ti=(function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n[n.ExperimentalIsolatedShadowDom=4]="ExperimentalIsolatedShadowDom",n})(ti||{});var Qm;function B3(){if(Qm===void 0&&(Qm=null,vs.trustedTypes))try{Qm=vs.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Qm}function Ek(n){return B3()?.createScriptURL(n)||n}var cy=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Am})`}};function df(n){return n instanceof cy?n.changingThisBreaksApplicationSecurity:n}function JE(n,e){let t=yN(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${Am})`)}return t===e}function yN(n){return n instanceof cy&&n.getTypeName()||null}var $3=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function vN(n){return n=String(n),n.match($3)?n:"unsafe:"+n}function H3(n,e){return n.createText(e)}function q3(n,e,t){n.setValue(e,t)}function _N(n,e,t){return n.createElement(e,t)}function ly(n,e,t,r,i){n.insertBefore(e,t,r,i)}function wN(n,e,t){n.appendChild(e,t)}function bk(n,e,t,r,i){r!==null?ly(n,e,t,r,i):wN(n,e,t)}function IN(n,e,t,r){n.removeChild(null,e,t,r)}function z3(n,e,t){n.setAttribute(e,"style",t)}function G3(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function EN(n,e,t){let{mergedAttrs:r,classes:i,styles:s}=t;r!==null&&_3(n,e,r),i!==null&&G3(n,e,i),s!==null&&z3(n,e,s)}var Cy=(function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n})(Cy||{});function er(n){let e=CN();return e?e.sanitize(Cy.URL,n)||"":JE(n,"URL")?df(n):vN(dc(n))}function bN(n){let e=CN();if(e)return Ek(e.sanitize(Cy.RESOURCE_URL,n)||"");if(JE(n,"ResourceURL"))return Ek(df(n));throw new ae(904,!1)}function W3(n,e){return e==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||e==="href"&&(n==="base"||n==="link")?bN:er}function XE(n,e,t){return W3(e,t)(n)}function CN(){let n=Pe();return n&&n[Si].sanitizer}function TN(n){return n instanceof Function?n():n}function K3(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let s=e.length;if(i+s===r||n.charCodeAt(i+s)<=32)return i}t=i+1}}var SN="ng-template";function Q3(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&K3(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(ZE(n))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&typeof(s=e[i])=="string";)if(s.toLowerCase()===t)return!0}return!1}function ZE(n){return n.type===4&&n.value!==SN}function Y3(n,e,t){let r=n.type===4&&!t?SN:n.value;return e===r}function J3(n,e,t){let r=4,i=n.attrs,s=i!==null?e9(i):0,o=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!o&&!Zr(r)&&!Zr(c))return!1;if(o&&Zr(c))continue;o=!1,r=c|r&1;continue}if(!o)if(r&4){if(r=2|r&1,c!==""&&!Y3(n,c,t)||c===""&&e.length===1){if(Zr(r))return!1;o=!0}}else if(r&8){if(i===null||!Q3(n,i,c,t)){if(Zr(r))return!1;o=!0}}else{let d=e[++a],h=X3(c,i,ZE(n),t);if(h===-1){if(Zr(r))return!1;o=!0;continue}if(d!==""){let p;if(h>s?p="":p=i[h+1].toLowerCase(),r&2&&d!==p){if(Zr(r))return!1;o=!0}}}}return Zr(r)||o}function Zr(n){return(n&1)===0}function X3(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let s=!1;for(;i<e.length;){let o=e[i];if(o===n)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return t9(e,n)}function Z3(n,e,t=!1){for(let r=0;r<e.length;r++)if(J3(n,e[r],t))return!0;return!1}function e9(n){for(let e=0;e<n.length;e++){let t=n[e];if(Qk(t))return e}return n.length}function t9(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function Ck(n,e){return n?":not("+e.trim()+")":e}function n9(n){let e=n[0],t=1,r=2,i="",s=!1;for(;t<n.length;){let o=n[t];if(typeof o=="string")if(r&2){let a=n[++t];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+o:r&4&&(i+=" "+o);else i!==""&&!Zr(o)&&(e+=Ck(s,i),i=""),r=o,s=s||!Zr(r);t++}return i!==""&&(e+=Ck(s,i)),e}function r9(n){return n.map(n9).join(",")}function i9(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let s=n[r];if(typeof s=="string")i===2?s!==""&&e.push(s,n[++r]):i===8&&t.push(s);else{if(!Zr(i))break;i=s}r++}return t.length&&e.push(1,...t),e}var tr={};function eb(n,e,t,r,i,s,o,a,c,d,h){let p=Ut+r,y=p+i,E=s9(p,y),k=typeof d=="function"?d():d;return E[ge]={type:n,blueprint:E,template:t,queries:null,viewQuery:a,declTNode:e,data:E.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:y,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:c,consts:k,incompleteFirstPass:!1,ssrId:h}}function s9(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:tr);return t}function o9(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=eb(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function tb(n,e,t,r,i,s,o,a,c,d,h){let p=e.blueprint.slice();return p[Yr]=i,p[Ie]=r|4|128|8|64|1024,(d!==null||n&&n[Ie]&2048)&&(p[Ie]|=2048),BI(p),p[on]=p[fc]=n,p[Pt]=t,p[Si]=o||n&&n[Si],p[yt]=a||n&&n[yt],p[ws]=c||n&&n[ws]||null,p[Sr]=s,p[Kh]=P3(),p[uu]=h,p[OI]=d,p[ur]=e.type==2?n[ur]:p,p}function a9(n,e,t){let r=Xr(e,n),i=o9(t),s=n[Si].rendererFactory,o=nb(n,tb(n,i,null,DN(t),r,e,null,s.createRenderer(r,t),null,null,null));return n[e.index]=o}function DN(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function AN(n,e,t,r){if(t===0)return-1;let i=e.length;for(let s=0;s<t;s++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function nb(n,e){return n[hu]?n[PI][Tr]=e:n[hu]=e,n[PI]=e,e}function F(n=1){xN(jt(),Pe(),ki()+n,!1)}function xN(n,e,t,r){if(!r)if((e[Ie]&3)===3){let s=n.preOrderCheckHooks;s!==null&&Jm(e,s,t)}else{let s=n.preOrderHooks;s!==null&&Xm(e,s,0,t)}Ho(t)}var Ty=(function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n})(Ty||{});function CE(n,e,t,r){let i=pe(null);try{let[s,o,a]=n.inputs[t],c=null;(o&Ty.SignalBased)!==0&&(c=e[s][Bn]),c!==null&&c.transformFn!==void 0?r=c.transformFn(r):a!==null&&(r=a.call(e,r)),n.setInput!==null?n.setInput(e,c,r,t,s):qk(e,c,s,r)}finally{pe(i)}}var Pi=(function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n})(Pi||{}),c9;function rb(n,e){return c9(n,e)}var bc=new Set,Sy=(function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n})(Sy||{}),Ac=new ce(""),Tk=new Set;function zo(n){Tk.has(n)||(Tk.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var ib=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=se({token:n,providedIn:"root",factory:()=>new n})}return n})(),RN=[0,1,2,3],kN=(()=>{class n{ngZone=j(wt);scheduler=j(ys);errorHandler=j(Ci,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){j(Ac,{optional:!0})}execute(){let t=this.sequences.size>0;t&&it(Ke.AfterRenderHooksStart),this.executing=!0;for(let r of RN)for(let i of this.sequences)if(!(i.erroredOrDestroyed||!i.hooks[r]))try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let s=i.hooks[r];return s(i.pipelinedValue)},i.snapshot))}catch(s){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(s)}this.executing=!1;for(let r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(let r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),t&&it(Ke.AfterRenderHooksEnd)}register(t){let{view:r}=t;r!==void 0?((r[gc]??=[]).push(t),_c(r),r[Ie]|=8192):this.executing?this.deferredRegistrations.add(t):this.addSequence(t)}addSequence(t){this.sequences.add(t),this.scheduler.notify(7)}unregister(t){this.executing&&this.sequences.has(t)?(t.erroredOrDestroyed=!0,t.pipelinedValue=void 0,t.once=!0):(this.sequences.delete(t),this.deferredRegistrations.delete(t))}maybeTrace(t,r){return r?r.run(Sy.AFTER_NEXT_RENDER,t):t()}static \u0275prov=se({token:n,providedIn:"root",factory:()=>new n})}return n})(),uy=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,t,r,i,s,o=null){this.impl=e,this.hooks=t,this.view=r,this.once=i,this.snapshot=o,this.unregisterOnDestroy=s?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let e=this.view?.[gc];e&&(this.view[gc]=e.filter(t=>t!==this))}};function Dy(n,e){let t=e?.injector??j(Mt);return zo("NgAfterNextRender"),u9(n,t,e,!0)}function l9(n){return n instanceof Function?[void 0,void 0,n,void 0]:[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function u9(n,e,t,r){let i=e.get(ib);i.impl??=e.get(kN);let s=e.get(Ac,null,{optional:!0}),o=t?.manualCleanup!==!0?e.get(xr):null,a=e.get(Xh,null,{optional:!0}),c=new uy(i.impl,l9(n),a?.view,r,o,s?.snapshot(null));return i.impl.register(c),c}var NN=new ce("",{factory:()=>({queue:new Set,isScheduled:!1,scheduler:null,injector:j(Lt)})});function MN(n,e,t){let r=n.get(NN);if(Array.isArray(e))for(let i of e)r.queue.add(i),t?.detachedLeaveAnimationFns?.push(i);else r.queue.add(e),t?.detachedLeaveAnimationFns?.push(e);r.scheduler&&r.scheduler(n)}function d9(n,e){let t=n.get(NN);if(e.detachedLeaveAnimationFns){for(let r of e.detachedLeaveAnimationFns)t.queue.delete(r);e.detachedLeaveAnimationFns=void 0}}function h9(n,e){for(let[t,r]of e)MN(n,r.animateFns)}function Sk(n,e,t,r){let i=n?.[mc]?.enter;e!==null&&i&&i.has(t.index)&&h9(r,i)}function mu(n,e,t,r,i,s,o,a){if(i!=null){let c,d=!1;Jr(i)?c=i:Ai(i)&&(d=!0,i=i[Yr]);let h=Dr(i);n===0&&r!==null?(Sk(a,r,s,t),o==null?wN(e,r,h):ly(e,r,h,o||null,!0)):n===1&&r!==null?(Sk(a,r,s,t),ly(e,r,h,o||null,!0)):n===2?Dk(a,s,t,p=>{IN(e,h,d,p)}):n===3&&Dk(a,s,t,()=>{e.destroyNode(h)}),c!=null&&T9(e,n,t,c,s,r,o)}}function f9(n,e){PN(n,e),e[Yr]=null,e[Sr]=null}function p9(n,e,t,r,i,s){r[Yr]=i,r[Sr]=e,xy(n,r,t,1,i,s)}function PN(n,e){e[Si].changeDetectionScheduler?.notify(9),xy(n,e,e[yt],2,null,null)}function g9(n){let e=n[hu];if(!e)return uE(n[ge],n);for(;e;){let t=null;if(Ai(e))t=e[hu];else{let r=e[At];r&&(t=r)}if(!t){for(;e&&!e[Tr]&&e!==n;)Ai(e)&&uE(e[ge],e),e=e[on];e===null&&(e=n),Ai(e)&&uE(e[ge],e),t=e&&e[Tr]}e=t}}function sb(n,e){let t=n[yc],r=t.indexOf(e);t.splice(r,1)}function Ay(n,e){if(vc(e))return;let t=e[yt];t.destroyNode&&xy(n,e,t,3,null,null),g9(e)}function uE(n,e){if(vc(e))return;let t=pe(null);try{e[Ie]&=-129,e[Ie]|=256,e[dr]&&ec(e[dr]),v9(n,e),y9(n,e),e[ge].type===1&&e[yt].destroy();let r=e[jo];if(r!==null&&Jr(e[on])){r!==e[on]&&sb(r,e);let i=e[Di];i!==null&&i.detachView(n)}EE(e)}finally{pe(t)}}function Dk(n,e,t,r){let i=n?.[mc];if(i==null||i.leave==null||!i.leave.has(e.index))return r(!1);n&&bc.add(n),MN(t,()=>{if(i.leave&&i.leave.has(e.index)){let o=i.leave.get(e.index),a=[];if(o){for(let c=0;c<o.animateFns.length;c++){let d=o.animateFns[c],{promise:h}=d();a.push(h)}i.detachedLeaveAnimationFns=void 0}i.running=Promise.allSettled(a),m9(n,r)}else n&&bc.delete(n),r(!1)},i)}function m9(n,e){let t=n[mc]?.running;if(t){t.then(()=>{n[mc].running=void 0,bc.delete(n),e(!0)});return}e(!1)}function y9(n,e){let t=n.cleanup,r=e[du];if(t!==null)for(let o=0;o<t.length-1;o+=2)if(typeof t[o]=="string"){let a=t[o+3];a>=0?r[a]():r[-a].unsubscribe(),o+=2}else{let a=r[t[o+1]];t[o].call(a)}r!==null&&(e[du]=null);let i=e[gs];if(i!==null){e[gs]=null;for(let o=0;o<i.length;o++){let a=i[o];a()}}let s=e[Fo];if(s!==null){e[Fo]=null;for(let o of s)o.destroy()}}function v9(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof Ec)){let s=t[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=i[s[o]],c=s[o+1];it(Ke.LifecycleHookStart,a,c);try{c.call(a)}finally{it(Ke.LifecycleHookEnd,a,c)}}else{it(Ke.LifecycleHookStart,i,s);try{s.call(i)}finally{it(Ke.LifecycleHookEnd,i,s)}}}}}function _9(n,e,t){return w9(n,e.parent,t)}function w9(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[Yr];if($o(r)){let{encapsulation:i}=n.data[r.directiveStart+r.componentOffset];if(i===ti.None||i===ti.Emulated)return null}return Xr(r,t)}function I9(n,e,t){return b9(n,e,t)}function E9(n,e,t){return n.type&40?Xr(n,t):null}var b9=E9,Ak;function ob(n,e,t,r){let i=_9(n,r,e),s=e[yt],o=r.parent||e[Sr],a=I9(o,r,e);if(i!=null)if(Array.isArray(t))for(let c=0;c<t.length;c++)bk(s,i,t[c],a,!1);else bk(s,i,t,a,!1);Ak!==void 0&&Ak(s,r,e,t,i)}function tf(n,e){if(e!==null){let t=e.type;if(t&3)return Xr(e,n);if(t&4)return TE(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return tf(n,r);{let i=n[e.index];return Jr(i)?TE(-1,i):Dr(i)}}else{if(t&128)return tf(n,e.next);if(t&32)return rb(e,n)()||Dr(n[e.index]);{let r=ON(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Vo(n[ur]);return tf(i,r)}else return tf(n,e.next)}}}return null}function ON(n,e){if(e!==null){let r=n[ur][Sr],i=e.projection;return r.projection[i]}return null}function TE(n,e){let t=At+n+1;if(t<e.length){let r=e[t],i=r[ge].firstChild;if(i!==null)return tf(r,i)}return e[Bo]}function ab(n,e,t,r,i,s,o){for(;t!=null;){let a=r[ws];if(t.type===128){t=t.next;continue}let c=r[t.index],d=t.type;if(o&&e===0&&(c&&_u(Dr(c),r),t.flags|=2),!YE(t))if(d&8)ab(n,e,t.child,r,i,s,!1),mu(e,n,a,i,c,t,s,r);else if(d&32){let h=rb(t,r),p;for(;p=h();)mu(e,n,a,i,p,t,s,r);mu(e,n,a,i,c,t,s,r)}else d&16?C9(n,e,r,t,i,s):mu(e,n,a,i,c,t,s,r);t=o?t.projectionNext:t.next}}function xy(n,e,t,r,i,s){ab(t,r,n.firstChild,e,i,s,!1)}function C9(n,e,t,r,i,s){let o=t[ur],c=o[Sr].projection[r.projection];if(Array.isArray(c))for(let d=0;d<c.length;d++){let h=c[d];mu(e,n,t[ws],i,h,r,s,t)}else{let d=c,h=o[on];sN(r)&&(d.flags|=128),ab(n,e,d,h,i,s,!0)}}function T9(n,e,t,r,i,s,o){let a=r[Bo],c=Dr(r);a!==c&&mu(e,n,t,s,a,i,o);for(let d=At;d<r.length;d++){let h=r[d];xy(h[ge],h,n,e,s,a)}}function S9(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let s=r.indexOf("-")===-1?void 0:Pi.DashCase;i==null?n.removeStyle(t,r,s):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=Pi.Important),n.setStyle(t,r,i,s))}}function FN(n,e,t,r,i){let s=ki(),o=r&2;try{Ho(-1),o&&e.length>Ut&&xN(n,e,Ut,!1);let a=o?Ke.TemplateUpdateStart:Ke.TemplateCreateStart;it(a,i,t),t(r,i)}finally{Ho(s);let a=o?Ke.TemplateUpdateEnd:Ke.TemplateCreateEnd;it(a,i,t)}}function VN(n,e,t){M9(n,e,t),(t.flags&64)===64&&P9(n,e,t)}function cb(n,e,t=Xr){let r=e.localNames;if(r!==null){let i=e.index+1;for(let s=0;s<r.length;s+=2){let o=r[s+1],a=o===-1?t(e,n):n[o];n[i++]=a}}}function D9(n,e,t,r){let s=r.get(fN,hN)||t===ti.ShadowDom||t===ti.ExperimentalIsolatedShadowDom,o=n.selectRootElement(e,s);return A9(o),o}function A9(n){x9(n)}var x9=()=>null;function R9(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function LN(n,e,t,r,i,s){let o=e[ge];if(lb(n,o,e,t,r)){$o(n)&&N9(e,n.index);return}n.type&3&&(t=R9(t)),k9(n,e,t,r,i,s)}function k9(n,e,t,r,i,s){if(n.type&3){let o=Xr(n,e);r=s!=null?s(r,n.value||"",t):r,i.setProperty(o,t,r)}else n.type&12}function N9(n,e){let t=Ar(e,n);t[Ie]&16||(t[Ie]|=64)}function M9(n,e,t){let r=t.directiveStart,i=t.directiveEnd;$o(t)&&a9(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||oy(t,e);let s=t.initialInputs;for(let o=r;o<i;o++){let a=n.data[o],c=rf(e,n,o,t);if(_u(c,e),s!==null&&U9(e,o-r,c,a,t,s),xi(a)){let d=Ar(t.index,e);d[Pt]=rf(e,n,o,t)}}}function P9(n,e,t){let r=t.directiveStart,i=t.directiveEnd,s=t.index,o=nk();try{Ho(s);for(let a=r;a<i;a++){let c=n.data[a],d=e[a];jm(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&O9(c,d)}}finally{Ho(-1),jm(o)}}function O9(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function F9(n,e){let t=n.directiveRegistry,r=null;if(t)for(let i=0;i<t.length;i++){let s=t[i];Z3(e,s.selectors,!1)&&(r??=[],xi(s)?r.unshift(s):r.push(s))}return r}function V9(n,e,t,r,i,s){let o=Xr(n,e);L9(e[yt],o,s,n.value,t,r,i)}function L9(n,e,t,r,i,s,o){if(s==null)n.removeAttribute(e,i,t);else{let a=o==null?dc(s):o(s,r||"",i);n.setAttribute(e,i,a,t)}}function U9(n,e,t,r,i,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;a+=2){let c=o[a],d=o[a+1];CE(r,t,c,d)}}function UN(n,e,t,r,i){let s=Ut+t,o=e[ge],a=i(o,e,n,r,t);e[s]=a,pu(n,!0);let c=n.type===2;return c?(EN(e[yt],a,n),(qR()===0||Fm(n))&&_u(a,e),zR()):_u(a,e),zm()&&(!c||!YE(n))&&ob(o,e,a,n),n}function jN(n){let e=n;return YI()?QR():(e=e.parent,pu(e,!1)),e}function j9(n,e){let t=n[ws];if(!t)return;let r;try{r=t.get(hr,null)}catch{r=null}r?.(e)}function lb(n,e,t,r,i){let s=n.inputs?.[r],o=n.hostDirectiveInputs?.[r],a=!1;if(o)for(let c=0;c<o.length;c+=2){let d=o[c],h=o[c+1],p=e.data[d];CE(p,t[d],h,i),a=!0}if(s)for(let c of s){let d=t[c],h=e.data[c];CE(h,d,r,i),a=!0}return a}function B9(n,e){let t=Ar(e,n),r=t[ge];$9(r,t);let i=t[Yr];i!==null&&t[uu]===null&&(t[uu]=pN(i,t[ws])),it(Ke.ComponentStart);try{ub(r,t,t[Pt])}finally{it(Ke.ComponentEnd,t[Pt])}}function $9(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function ub(n,e,t){$m(e);try{let r=n.viewQuery;r!==null&&bE(1,r,t);let i=n.template;i!==null&&FN(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[Di]?.finishViewCreation(n),n.staticContentQueries&&gN(n,e),n.staticViewQueries&&bE(2,n.viewQuery,t);let s=n.components;s!==null&&H9(e,s)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[Ie]&=-5,Hm()}}function H9(n,e){for(let t=0;t<e.length;t++)B9(n,e[t])}function Ry(n,e,t,r){let i=pe(null);try{let s=e.tView,a=n[Ie]&4096?4096:16,c=tb(n,s,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),d=n[e.index];c[jo]=d;let h=n[Di];return h!==null&&(c[Di]=h.createEmbeddedView(s)),ub(s,c,t),c}finally{pe(i)}}function sf(n,e){return!e||e.firstChild===null||sN(n)}function of(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let s=e[t.index];s!==null&&r.push(Dr(s)),Jr(s)&&BN(s,r);let o=t.type;if(o&8)of(n,e,t.child,r);else if(o&32){let a=rb(t,e),c;for(;c=a();)r.push(c)}else if(o&16){let a=ON(e,t);if(Array.isArray(a))r.push(...a);else{let c=Vo(e[ur]);of(c[ge],c,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function BN(n,e){for(let t=At;t<n.length;t++){let r=n[t],i=r[ge].firstChild;i!==null&&of(r[ge],r,i,e)}n[Bo]!==n[Yr]&&e.push(n[Bo])}function $N(n){if(n[gc]!==null){for(let e of n[gc])e.impl.addSequence(e);n[gc].length=0}}var HN=[];function q9(n){return n[dr]??z9(n)}function z9(n){let e=HN.pop()??Object.create(W9);return e.lView=n,e}function G9(n){n.lView[dr]!==n&&(n.lView=null,HN.push(n))}var W9=ie(B({},Wl),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{_c(n.lView)},consumerOnSignalRead(){this.lView[dr]=this}});function K9(n){let e=n[dr]??Object.create(Q9);return e.lView=n,e}var Q9=ie(B({},Wl),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=Vo(n.lView);for(;e&&!qN(e[ge]);)e=Vo(e);e&&$I(e)},consumerOnSignalRead(){this.lView[dr]=this}});function qN(n){return n.type!==2}function zN(n){if(n[Fo]===null)return;let e=!0;for(;e;){let t=!1;for(let r of n[Fo])r.dirty&&(t=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=t&&!!(n[Ie]&8192)}}var Y9=100;function GN(n,e=0){let r=n[Si].rendererFactory,i=!1;i||r.begin?.();try{J9(n,e)}finally{i||r.end?.()}}function J9(n,e){let t=JI();try{Bh(!0),SE(n,e);let r=0;for(;Jh(n);){if(r===Y9)throw new ae(103,!1);r++,SE(n,1)}}finally{Bh(t)}}function X9(n,e,t,r){if(vc(e))return;let i=e[Ie],s=!1,o=!1;$m(e);let a=!0,c=null,d=null;s||(qN(n)?(d=q9(e),c=Kl(d)):Wg()===null?(a=!1,d=K9(e),c=Kl(d)):e[dr]&&(ec(e[dr]),e[dr]=null));try{BI(e),ZR(n.bindingStartIndex),t!==null&&FN(n,e,t,2,r);let h=(i&3)===3;if(!s)if(h){let E=n.preOrderCheckHooks;E!==null&&Jm(e,E,null)}else{let E=n.preOrderHooks;E!==null&&Xm(e,E,0,null),cE(e,0)}if(o||Z9(e),zN(e),WN(e,0),n.contentQueries!==null&&gN(n,e),!s)if(h){let E=n.contentCheckHooks;E!==null&&Jm(e,E)}else{let E=n.contentHooks;E!==null&&Xm(e,E,1),cE(e,1)}t6(n,e);let p=n.components;p!==null&&QN(e,p,0);let y=n.viewQuery;if(y!==null&&bE(2,y,r),!s)if(h){let E=n.viewCheckHooks;E!==null&&Jm(e,E)}else{let E=n.viewHooks;E!==null&&Xm(e,E,2),cE(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[Om]){for(let E of e[Om])E();e[Om]=null}s||($N(e),e[Ie]&=-73)}catch(h){throw s||_c(e),h}finally{d!==null&&(Rh(d,c),a&&G9(d)),Hm()}}function WN(n,e){for(let t=aN(n);t!==null;t=cN(t))for(let r=At;r<t.length;r++){let i=t[r];KN(i,e)}}function Z9(n){for(let e=aN(n);e!==null;e=cN(e)){if(!(e[Ie]&2))continue;let t=e[yc];for(let r=0;r<t.length;r++){let i=t[r];$I(i)}}}function e6(n,e,t){it(Ke.ComponentStart);let r=Ar(e,n);try{KN(r,t)}finally{it(Ke.ComponentEnd,r[Pt])}}function KN(n,e){Vm(n)&&SE(n,e)}function SE(n,e){let r=n[ge],i=n[Ie],s=n[dr],o=!!(e===0&&i&16);if(o||=!!(i&64&&e===0),o||=!!(i&1024),o||=!!(s?.dirty&&kh(s)),o||=!1,s&&(s.dirty=!1),n[Ie]&=-9217,o)X9(r,n,r.template,n[Pt]);else if(i&8192){let a=pe(null);try{zN(n),WN(n,1);let c=r.components;c!==null&&QN(n,c,1),$N(n)}finally{pe(a)}}}function QN(n,e,t){for(let r=0;r<e.length;r++)e6(n,e[r],t)}function t6(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)Ho(~i);else{let s=i,o=t[++r],a=t[++r];tk(o,s);let c=e[s];it(Ke.HostBindingsUpdateStart,c);try{a(2,c)}finally{it(Ke.HostBindingsUpdateEnd,c)}}}}finally{Ho(-1)}}function db(n,e){let t=JI()?64:1088;for(n[Si].changeDetectionScheduler?.notify(e);n;){n[Ie]|=t;let r=Vo(n);if(fu(n)&&!r)return n;n=r}return null}function YN(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function JN(n,e){let t=At+e;if(t<n.length)return n[t]}function ky(n,e,t,r=!0){let i=e[ge];if(n6(i,e,n,t),r){let o=TE(t,n),a=e[yt],c=a.parentNode(n[Bo]);c!==null&&p9(i,n[Sr],a,e,c,o)}let s=e[uu];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function XN(n,e){let t=af(n,e);return t!==void 0&&Ay(t[ge],t),t}function af(n,e){if(n.length<=At)return;let t=At+e,r=n[t];if(r){let i=r[jo];i!==null&&i!==n&&sb(i,r),e>0&&(n[t-1][Tr]=r[Tr]);let s=zh(n,At+e);f9(r[ge],r);let o=s[Di];o!==null&&o.detachView(s[ge]),r[on]=null,r[Tr]=null,r[Ie]&=-129}return r}function n6(n,e,t,r){let i=At+r,s=t.length;r>0&&(t[i-1][Tr]=e),r<s-At?(e[Tr]=t[i],AI(t,At+r,e)):(t.push(e),e[Tr]=null),e[on]=t;let o=e[jo];o!==null&&t!==o&&ZN(o,e);let a=e[Di];a!==null&&a.insertView(n),Lm(e),e[Ie]|=128}function ZN(n,e){let t=n[yc],r=e[on];if(Ai(r))n[Ie]|=2;else{let i=r[on][ur];e[ur]!==i&&(n[Ie]|=2)}t===null?n[yc]=[e]:t.push(e)}var qo=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,t=e[ge];return of(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t}get context(){return this._lView[Pt]}set context(e){this._lView[Pt]=e}get destroyed(){return vc(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[on];if(Jr(e)){let t=e[Qh],r=t?t.indexOf(this):-1;r>-1&&(af(e,r),zh(t,r))}this._attachedToViewContainer=!1}Ay(this._lView[ge],this._lView)}onDestroy(e){HI(this._lView,e)}markForCheck(){db(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[Ie]&=-129}reattach(){Lm(this._lView),this._lView[Ie]|=128}detectChanges(){this._lView[Ie]|=1024,GN(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ae(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=fu(this._lView),t=this._lView[jo];t!==null&&!e&&sb(t,this._lView),PN(this._lView[ge],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new ae(902,!1);this._appRef=e;let t=fu(this._lView),r=this._lView[jo];r!==null&&!t&&ZN(r,this._lView),Lm(this._lView)}};var wu=(()=>{class n{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=r6;constructor(t,r,i){this._declarationLView=t,this._declarationTContainer=r,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,r){return this.createEmbeddedViewImpl(t,r)}createEmbeddedViewImpl(t,r,i){let s=Ry(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:r,dehydratedView:i});return new qo(s)}}return n})();function r6(){return hb(pn(),Pe())}function hb(n,e){return n.type&4?new wu(e,n,Cu(n,e)):null}function Ny(n,e,t,r,i){let s=n.data[e];if(s===null)s=i6(n,e,t,r,i),ek()&&(s.flags|=32);else if(s.type&64){s.type=t,s.value=r,s.attrs=i;let o=KR();s.injectorIndex=o===null?-1:o.injectorIndex}return pu(s,!0),s}function i6(n,e,t,r,i){let s=QI(),o=YI(),a=o?s:s&&s.parent,c=n.data[e]=o6(n,a,t,e,r,i);return s6(n,c,s,o),c}function s6(n,e,t,r){n.firstChild===null&&(n.firstChild=e),t!==null&&(r?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function o6(n,e,t,r,i,s){let o=e?e.injectorIndex:-1,a=0;return WR()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,fieldIndex:-1,customControlIndex:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function a6(n){let e=n[FI]??[],r=n[on][yt],i=[];for(let s of e)s.data[dN]!==void 0?i.push(s):c6(s,r);n[FI]=i}function c6(n,e){let t=0,r=n.firstChild;if(r){let i=n.data[uN];for(;t<i;){let s=r.nextSibling;IN(e,r,!1),r=s,t++}}}var l6=()=>null,u6=()=>null;function DE(n,e){return l6(n,e)}function eM(n,e,t){return u6(n,e,t)}var tM=class{},My=class{},AE=class{resolveComponentFactory(e){throw new ae(917,!1)}},hf=class{static NULL=new AE},Cc=class{},Fi=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>d6()}return n})();function d6(){let n=Pe(),e=pn(),t=Ar(e.index,n);return(Ai(t)?t:n)[yt]}var nM=(()=>{class n{static \u0275prov=se({token:n,providedIn:"root",factory:()=>null})}return n})();var ey={},xE=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){let i=this.injector.get(e,ey,r);return i!==ey||t===ey?i:this.parentInjector.get(e,t,r)}};function dy(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)i=xm(i,a);else if(s==2){let c=a,d=e[++o];r=xm(r,c+": "+d+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function Ue(n,e=0){let t=Pe();if(t===null)return Me(n,e);let r=pn();return nN(r,t,Cn(n),e)}function h6(n,e,t,r,i){let s=r===null?null:{"":-1},o=i(n,t);if(o!==null){let a=o,c=null,d=null;for(let h of o)if(h.resolveHostDirectives!==null){[a,c,d]=h.resolveHostDirectives(o);break}g6(n,e,t,a,s,c,d)}s!==null&&r!==null&&f6(t,r,s)}function f6(n,e,t){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let s=t[e[i+1]];if(s==null)throw new ae(-301,!1);r.push(e[i],s)}}function p6(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function g6(n,e,t,r,i,s,o){let a=r.length,c=null;for(let y=0;y<a;y++){let E=r[y];c===null&&xi(E)&&(c=E,p6(n,t,y)),wE(oy(t,e),n,E.type)}I6(t,n.data.length,a),c?.viewProvidersResolver&&c.viewProvidersResolver(c);for(let y=0;y<a;y++){let E=r[y];E.providersResolver&&E.providersResolver(E)}let d=!1,h=!1,p=AN(n,e,a,null);a>0&&(t.directiveToIndex=new Map);for(let y=0;y<a;y++){let E=r[y];if(t.mergedAttrs=vu(t.mergedAttrs,E.hostAttrs),y6(n,t,e,p,E),w6(p,E,i),o!==null&&o.has(E)){let[P,M]=o.get(E);t.directiveToIndex.set(E.type,[p,P+t.directiveStart,M+t.directiveStart])}else(s===null||!s.has(E))&&t.directiveToIndex.set(E.type,p);E.contentQueries!==null&&(t.flags|=4),(E.hostBindings!==null||E.hostAttrs!==null||E.hostVars!==0)&&(t.flags|=64);let k=E.type.prototype;!d&&(k.ngOnChanges||k.ngOnInit||k.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),d=!0),!h&&(k.ngOnChanges||k.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),h=!0),p++}m6(n,t,s)}function m6(n,e,t){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=n.data[r];if(t===null||!t.has(i))xk(0,e,i,r),xk(1,e,i,r),kk(e,r,!1);else{let s=t.get(i);Rk(0,e,s,r),Rk(1,e,s,r),kk(e,r,!0)}}}function xk(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let s in i)if(i.hasOwnProperty(s)){let o;n===0?o=e.inputs??={}:o=e.outputs??={},o[s]??=[],o[s].push(r),rM(e,s)}}function Rk(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let s in i)if(i.hasOwnProperty(s)){let o=i[s],a;n===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[o]??=[],a[o].push(r,s),rM(e,o)}}function rM(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function kk(n,e,t){let{attrs:r,inputs:i,hostDirectiveInputs:s}=n;if(r===null||!t&&i===null||t&&s===null||ZE(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let o=null,a=0;for(;a<r.length;){let c=r[a];if(c===0){a+=4;continue}else if(c===5){a+=2;continue}else if(typeof c=="number")break;if(!t&&i.hasOwnProperty(c)){let d=i[c];for(let h of d)if(h===e){o??=[],o.push(c,r[a+1]);break}}else if(t&&s.hasOwnProperty(c)){let d=s[c];for(let h=0;h<d.length;h+=2)if(d[h]===e){o??=[],o.push(d[h+1],r[a+1]);break}}a+=2}n.initialInputs??=[],n.initialInputs.push(o)}function y6(n,e,t,r,i){n.data[r]=i;let s=i.factory||(i.factory=Oo(i.type,!0)),o=new Ec(s,xi(i),Ue,null);n.blueprint[r]=o,t[r]=o,v6(n,e,r,AN(n,t,i.hostVars,tr),i)}function v6(n,e,t,r,i){let s=i.hostBindings;if(s){let o=n.hostBindingOpCodes;o===null&&(o=n.hostBindingOpCodes=[]);let a=~e.index;_6(o)!=a&&o.push(a),o.push(t,r,s)}}function _6(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function w6(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;xi(e)&&(t[""]=n)}}function I6(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function iM(n,e,t,r,i,s,o,a){let c=e[ge],d=c.consts,h=Ri(d,o),p=Ny(c,n,t,r,h);return s&&h6(c,e,p,Ri(d,a),i),p.mergedAttrs=vu(p.mergedAttrs,p.attrs),p.attrs!==null&&dy(p,p.attrs,!1),p.mergedAttrs!==null&&dy(p,p.mergedAttrs,!0),c.queries!==null&&c.queries.elementStart(c,p),p}function sM(n,e){g3(n,e),VI(e)&&n.queries.elementEnd(e)}function E6(n,e,t,r,i,s){let o=e.consts,a=Ri(o,i),c=Ny(e,n,t,r,a);if(c.mergedAttrs=vu(c.mergedAttrs,c.attrs),s!=null){let d=Ri(o,s);c.localNames=[];for(let h=0;h<d.length;h+=2)c.localNames.push(d[h],-1)}return c.attrs!==null&&dy(c,c.attrs,!1),c.mergedAttrs!==null&&dy(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function b6(n,e,t){return n[e]=t}function Oi(n,e,t){if(t===tr)return!1;let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function oM(n,e,t,r){let i=Oi(n,e,t);return Oi(n,e+1,r)||i}function ty(n,e,t){return function r(i){let s=$o(n)?Ar(n.index,e):e;db(s,5);let o=e[Pt],a=Nk(e,o,t,i),c=r.__ngNextListenerFn__;for(;c;)a=Nk(e,o,c,i)&&a,c=c.__ngNextListenerFn__;return a}}function Nk(n,e,t,r){let i=pe(null);try{return it(Ke.OutputStart,e,t),t(r)!==!1}catch(s){return j9(n,s),!1}finally{it(Ke.OutputEnd,e,t),pe(i)}}function aM(n,e,t,r,i,s,o,a){let c=Fm(n),d=!1,h=null;if(!r&&c&&(h=T6(e,t,s,n.index)),h!==null){let p=h.__ngLastListenerFn__||h;p.__ngNextListenerFn__=o,h.__ngLastListenerFn__=o,d=!0}else{let p=Xr(n,t),y=r?r(p):p;U3(t,y,s,a);let E=i.listen(y,s,a);if(!C6(s)){let k=r?P=>r(Dr(P[n.index])):n.index;cM(k,e,t,s,a,E,!1)}}return d}function C6(n){return n.startsWith("animation")||n.startsWith("transition")}function T6(n,e,t,r){let i=n.cleanup;if(i!=null)for(let s=0;s<i.length-1;s+=2){let o=i[s];if(o===t&&i[s+1]===r){let a=e[du],c=i[s+2];return a&&a.length>c?a[c]:null}typeof o=="string"&&(s+=2)}return null}function cM(n,e,t,r,i,s,o){let a=e.firstCreatePass?zI(e):null,c=qI(t),d=c.length;c.push(i,s),a&&a.push(r,n,d,(d+1)*(o?-1:1))}function Mk(n,e,t,r,i,s){let o=e[t],a=e[ge],d=a.data[t].outputs[r],p=o[d].subscribe(s);cM(n.index,a,e,i,s,p,!0)}var RE=Symbol("BINDING");var hy=class extends hf{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=Lo(e);return new Iu(t,this.ngModule)}};function S6(n){return Object.keys(n).map(e=>{let[t,r,i]=n[e],s={propName:t,templateName:e,isSignal:(r&Ty.SignalBased)!==0};return i&&(s.transform=i),s})}function D6(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function A6(n,e,t){let r=e instanceof Lt?e:e?.injector;return r&&n.getStandaloneInjector!==null&&(r=n.getStandaloneInjector(r)||r),r?new xE(t,r):t}function x6(n){let e=n.get(Cc,null);if(e===null)throw new ae(407,!1);let t=n.get(nM,null),r=n.get(ys,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:r,ngReflect:!1}}function R6(n,e){let t=lM(n);return _N(e,t,t==="svg"?VR:t==="math"?LR:null)}function lM(n){return(n.selectors[0][0]||"div").toLowerCase()}var Iu=class extends My{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=S6(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=D6(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=r9(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,r,i,s,o){it(Ke.DynamicComponentStart);let a=pe(null);try{let c=this.componentDef,d=k6(r,c,o,s),h=A6(c,i||this.ngModule,e),p=x6(h),y=p.rendererFactory.createRenderer(null,c),E=r?D9(y,r,c.encapsulation,h):R6(c,y),k=o?.some(Pk)||s?.some(H=>typeof H!="function"&&H.bindings.some(Pk)),P=tb(null,d,null,512|DN(c),null,null,p,y,h,null,pN(E,h,!0));P[Ut]=E,$m(P);let M=null;try{let H=iM(Ut,P,2,"#host",()=>d.directiveRegistry,!0,0);EN(y,E,H),_u(E,P),VN(d,P,H),mN(d,H,P),sM(d,H),t!==void 0&&M6(H,this.ngContentSelectors,t),M=Ar(H.index,P),P[Pt]=M[Pt],ub(d,P,null)}catch(H){throw M!==null&&EE(M),EE(P),H}finally{it(Ke.DynamicComponentEnd),Hm()}return new fy(this.componentType,P,!!k)}finally{pe(a)}}};function k6(n,e,t,r){let i=n?["ng-version","21.0.5"]:i9(e.selectors[0]),s=null,o=null,a=0;if(t)for(let h of t)a+=h[RE].requiredVars,h.create&&(h.targetIdx=0,(s??=[]).push(h)),h.update&&(h.targetIdx=0,(o??=[]).push(h));if(r)for(let h=0;h<r.length;h++){let p=r[h];if(typeof p!="function")for(let y of p.bindings){a+=y[RE].requiredVars;let E=h+1;y.create&&(y.targetIdx=E,(s??=[]).push(y)),y.update&&(y.targetIdx=E,(o??=[]).push(y))}}let c=[e];if(r)for(let h of r){let p=typeof h=="function"?h:h.type,y=TI(p);c.push(y)}return eb(0,null,N6(s,o),1,a,c,null,null,null,[i],null)}function N6(n,e){return!n&&!e?null:t=>{if(t&1&&n)for(let r of n)r.create();if(t&2&&e)for(let r of e)r.update()}}function Pk(n){let e=n[RE].kind;return e==="input"||e==="twoWay"}var fy=class extends tM{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t,r){super(),this._rootLView=t,this._hasInputBindings=r,this._tNode=Yh(t[ge],Ut),this.location=Cu(this._tNode,t),this.instance=Ar(this._tNode.index,t)[Pt],this.hostView=this.changeDetectorRef=new qo(t,void 0),this.componentType=e}setInput(e,t){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let i=this._rootLView,s=lb(r,i[ge],i,e,t);this.previousInputValues.set(e,t);let o=Ar(r.index,i);db(o,1)}get injector(){return new Ic(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function M6(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let s=t[i];r.push(s!=null&&s.length?Array.from(s):null)}}var xc=(()=>{class n{static __NG_ELEMENT_ID__=P6}return n})();function P6(){let n=pn();return dM(n,Pe())}var O6=xc,uM=class extends O6{_lContainer;_hostTNode;_hostLView;constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Cu(this._hostTNode,this._hostLView)}get injector(){return new Ic(this._hostTNode,this._hostLView)}get parentInjector(){let e=WE(this._hostTNode,this._hostLView);if(Yk(e)){let t=iy(e,this._hostLView),r=ry(e),i=t[ge].data[r+8];return new Ic(i,t)}else return new Ic(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=Ok(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-At}createEmbeddedView(e,t,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let o=DE(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},s,o);return this.insertImpl(a,i,sf(this._hostTNode,o)),a}createComponent(e,t,r,i,s,o,a){let c=e&&!u3(e),d;if(c)d=t;else{let M=t||{};d=M.index,r=M.injector,i=M.projectableNodes,s=M.environmentInjector||M.ngModuleRef,o=M.directives,a=M.bindings}let h=c?e:new Iu(Lo(e)),p=r||this.parentInjector;if(!s&&h.ngModule==null){let H=(c?p:this.parentInjector).get(Lt,null);H&&(s=H)}let y=Lo(h.componentType??{}),E=DE(this._lContainer,y?.id??null),k=E?.firstChild??null,P=h.create(p,i,k,s,o,a);return this.insertImpl(P.hostView,d,sf(this._hostTNode,E)),P}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(jR(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[on],d=new uM(c,c[Sr],c[on]);d.detach(d.indexOf(e))}}let s=this._adjustIndex(t),o=this._lContainer;return ky(o,i,s,r),e.attachToViewContainerRef(),AI(dE(o),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=Ok(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=af(this._lContainer,t);r&&(zh(dE(this._lContainer),t),Ay(r[ge],r))}detach(e){let t=this._adjustIndex(e,-1),r=af(this._lContainer,t);return r&&zh(dE(this._lContainer),t)!=null?new qo(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function Ok(n){return n[Qh]}function dE(n){return n[Qh]||(n[Qh]=[])}function dM(n,e){let t,r=e[n.index];return Jr(r)?t=r:(t=YN(r,e,null,n),e[n.index]=t,nb(e,t)),V6(t,e,n,r),new uM(t,n,e)}function F6(n,e){let t=n[yt],r=t.createComment(""),i=Xr(e,n),s=t.parentNode(i);return ly(t,s,r,t.nextSibling(i),!1),r}var V6=j6,L6=()=>!1;function U6(n,e,t){return L6(n,e,t)}function j6(n,e,t,r){if(n[Bo])return;let i;t.type&8?i=Dr(r):i=F6(e,t),n[Bo]=i}var kE=class n{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},NE=class n{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){let t=e.queries;if(t!==null){let r=e.contentQueries!==null?e.contentQueries[0]:t.length,i=[];for(let s=0;s<r;s++){let o=t.getByIndex(s),a=this.queries[o.indexInDeclarationView];i.push(a.clone())}return new n(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)fb(e,t).matches!==null&&this.queries[t].setDirty()}},ME=class{flags;read;predicate;constructor(e,t,r=null){this.flags=t,this.read=r,typeof e=="string"?this.predicate=K6(e):this.predicate=e}},PE=class n{queries;constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){let i=t!==null?t.length:0,s=this.getByIndex(r).embeddedTView(e,i);s&&(s.indexInDeclarationView=r,t!==null?t.push(s):t=[s])}return t!==null?new n(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},OE=class n{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,t=-1){this.metadata=e,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new n(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==t;)r=r.parent;return t===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let s=r[i];this.matchTNodeWithReadOption(e,t,B6(t,s)),this.matchTNodeWithReadOption(e,t,Zm(t,e,s,!1,!1))}else r===wu?t.type&4&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,Zm(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===Zn||i===xc||i===wu&&t.type&4)this.addMatch(t.index,-2);else{let s=Zm(t,e,i,!1,!1);s!==null&&this.addMatch(t.index,s)}else this.addMatch(t.index,r)}}addMatch(e,t){this.matches===null?this.matches=[e,t]:this.matches.push(e,t)}};function B6(n,e){let t=n.localNames;if(t!==null){for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1]}return null}function $6(n,e){return n.type&11?Cu(n,e):n.type&4?hb(n,e):null}function H6(n,e,t,r){return t===-1?$6(e,n):t===-2?q6(n,e,r):rf(n,n[ge],t,e)}function q6(n,e,t){if(t===Zn)return Cu(e,n);if(t===wu)return hb(e,n);if(t===xc)return dM(e,n)}function hM(n,e,t,r){let i=e[Di].queries[r];if(i.matches===null){let s=n.data,o=t.matches,a=[];for(let c=0;o!==null&&c<o.length;c+=2){let d=o[c];if(d<0)a.push(null);else{let h=s[d];a.push(H6(e,h,o[c+1],t.metadata.read))}}i.matches=a}return i.matches}function FE(n,e,t,r){let i=n.queries.getByIndex(t),s=i.matches;if(s!==null){let o=hM(n,e,i,t);for(let a=0;a<s.length;a+=2){let c=s[a];if(c>0)r.push(o[a/2]);else{let d=s[a+1],h=e[-c];for(let p=At;p<h.length;p++){let y=h[p];y[jo]===y[on]&&FE(y[ge],y,d,r)}if(h[yc]!==null){let p=h[yc];for(let y=0;y<p.length;y++){let E=p[y];FE(E[ge],E,d,r)}}}}}return r}function z6(n,e){return n[Di].queries[e].queryList}function G6(n,e,t){let r=new ay((t&4)===4);return HR(n,e,r,r.destroy),(e[Di]??=new NE).queries.push(new kE(r))-1}function W6(n,e,t,r){let i=jt();if(i.firstCreatePass){let s=pn();Q6(i,new ME(e,t,r),s.index),Y6(i,n),(t&2)===2&&(i.staticContentQueries=!0)}return G6(i,Pe(),t)}function K6(n){return n.split(",").map(e=>e.trim())}function Q6(n,e,t){n.queries===null&&(n.queries=new PE),n.queries.track(new OE(e,t))}function Y6(n,e){let t=n.contentQueries||(n.contentQueries=[]),r=t.length?t[t.length-1]:-1;e!==r&&t.push(n.queries.length-1,e)}function fb(n,e){return n.queries.getByIndex(e)}function J6(n,e){let t=n[ge],r=fb(t,e);return r.crossesNgTemplate?FE(t,n,e,[]):hM(t,n,r,e)}var Tc=class{},Py=class{};var py=class extends Tc{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new hy(this);constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t;let s=CI(e);this._bootstrapComponents=TN(s.bootstrap),this._r3Injector=tE(e,t,[{provide:Tc,useValue:this},{provide:hf,useValue:this.componentFactoryResolver},...r],ms(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},gy=class extends Py{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new py(this.moduleType,e,[])}};var cf=class extends Tc{injector;componentFactoryResolver=new hy(this);instance=null;constructor(e){super();let t=new lc([...e.providers,{provide:Tc,useValue:this},{provide:hf,useValue:this.componentFactoryResolver}],e.parent||Wh(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function ff(n,e,t=null){return new cf({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var X6=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=kI(!1,t.type),i=r.length>0?ff([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=se({token:n,providedIn:"environment",factory:()=>new n(Me(Lt))})}return n})();function Tn(n){return bu(()=>{let e=fM(n),t=ie(B({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===KE.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(X6).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||ti.Emulated,styles:n.styles||Hn,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&zo("NgStandalone"),pM(t);let r=n.dependencies;return t.directiveDefs=Fk(r,Z6),t.pipeDefs=Fk(r,IR),t.id=n5(t),t})}function Z6(n){return Lo(n)||TI(n)}function Cs(n){return bu(()=>({type:n.type,bootstrap:n.bootstrap||Hn,declarations:n.declarations||Hn,imports:n.imports||Hn,exports:n.exports||Hn,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function e5(n,e){if(n==null)return Uo;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],s,o,a,c;Array.isArray(i)?(a=i[0],s=i[1],o=i[2]??s,c=i[3]||null):(s=i,o=i,a=Ty.None,c=null),t[s]=[r,a,c],e[s]=o}return t}function t5(n){if(n==null)return Uo;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function Sn(n){return bu(()=>{let e=fM(n);return pM(e),e})}function pb(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone??!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function fM(n){let e={};return{type:n.type,providersResolver:null,viewProvidersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||Uo,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||Hn,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:e5(n.inputs,e),outputs:t5(n.outputs),debugInfo:null}}function pM(n){n.features?.forEach(e=>e(n))}function Fk(n,e){return n?()=>{let t=typeof n=="function"?n():n,r=[];for(let i of t){let s=e(i);s!==null&&r.push(s)}return r}:null}function n5(n){let e=0,t=typeof n.consts=="function"?"":n.consts,r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let s of r.join("|"))e=Math.imul(31,e)+s.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function r5(n){return Object.getPrototypeOf(n.prototype).constructor}function Ts(n){let e=r5(n.type),t=!0,r=[n];for(;e;){let i;if(xi(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new ae(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let o=n;o.inputs=hE(n.inputs),o.declaredInputs=hE(n.declaredInputs),o.outputs=hE(n.outputs);let a=i.hostBindings;a&&c5(n,a);let c=i.viewQuery,d=i.contentQueries;if(c&&o5(n,c),d&&a5(n,d),i5(n,i),wR(n.outputs,i.outputs),xi(i)&&i.data.animation){let h=n.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let s=i.features;if(s)for(let o=0;o<s.length;o++){let a=s[o];a&&a.ngInherit&&a(n),a===Ts&&(t=!1)}}e=Object.getPrototypeOf(e)}s5(r)}function i5(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t])}}function s5(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=vu(i.hostAttrs,t=vu(t,i.hostAttrs))}}function hE(n){return n===Uo?{}:n===Hn?[]:n}function o5(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function a5(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,s)=>{e(r,i,s),t(r,i,s)}:n.contentQueries=e}function c5(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function l5(n,e,t,r,i,s,o,a){if(t.firstCreatePass){n.mergedAttrs=vu(n.mergedAttrs,n.attrs);let h=n.tView=eb(2,n,i,s,o,t.directiveRegistry,t.pipeRegistry,null,t.schemas,t.consts,null);t.queries!==null&&(t.queries.template(t,n),h.queries=t.queries.embeddedTView(n))}a&&(n.flags|=a),pu(n,!1);let c=u5(t,e,n,r);zm()&&ob(t,e,c,n),_u(c,e);let d=YN(c,e,c,n);e[r+Ut]=d,nb(e,d),U6(d,n,e)}function my(n,e,t,r,i,s,o,a,c,d,h){let p=t+Ut,y;if(e.firstCreatePass){if(y=Ny(e,p,4,o||null,a||null),d!=null){let E=Ri(e.consts,d);y.localNames=[];for(let k=0;k<E.length;k+=2)y.localNames.push(E[k],-1)}}else y=e.data[p];return l5(y,n,e,t,r,i,s,c),d!=null&&cb(n,y,h),y}var u5=d5;function d5(n,e,t,r){return Gm(!0),e[yt].createComment("")}var gb=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=se({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();function gM(n){return typeof n=="function"&&n[Bn]!==void 0}function mb(n){return gM(n)&&typeof n.set=="function"}var yb=new ce("");function Go(n){return!!n&&typeof n.then=="function"}function vb(n){return!!n&&typeof n.subscribe=="function"}var mM=new ce("");var _b=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r});appInits=j(mM,{optional:!0})??[];injector=j(Mt);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let s=an(this.injector,i);if(Go(s))t.push(s);else if(vb(s)){let o=new Promise((a,c)=>{s.subscribe({complete:a,error:c})});t.push(o)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=se({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Oy=new ce("");function yM(){Fw(()=>{let n="";throw new ae(600,n)})}function vM(n){return n.isBoundToModule}var h5=10;var Wo=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=j(hr);afterRenderManager=j(ib);zonelessEnabled=j(Zh);rootEffectScheduler=j(Wm);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new gt;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=j(Is);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(_e(t=>!t))}constructor(){j(Ac,{optional:!0})}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}_injector=j(Lt);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,r){return this.bootstrapImpl(t,r)}bootstrapImpl(t,r,i=Mt.NULL){return this._injector.get(wt).run(()=>{it(Ke.BootstrapComponentStart);let o=t instanceof My;if(!this._injector.get(_b).done){let k="";throw new ae(405,k)}let c;o?c=t:c=this._injector.get(hf).resolveComponentFactory(t),this.componentTypes.push(c.componentType);let d=vM(c)?void 0:this._injector.get(Tc),h=r||c.selector,p=c.create(i,[],h,d),y=p.location.nativeElement,E=p.injector.get(yb,null);return E?.registerApplication(y),p.onDestroy(()=>{this.detachView(p.hostView),nf(this.components,p),E?.unregisterApplication(y)}),this._loadComponent(p),it(Ke.BootstrapComponentEnd,p),p})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){it(Ke.ChangeDetectionStart),this.tracingSnapshot!==null?this.tracingSnapshot.run(Sy.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw it(Ke.ChangeDetectionEnd),new ae(101,!1);let t=pe(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,pe(t),this.afterTick.next(),it(Ke.ChangeDetectionEnd)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(Cc,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<h5;){it(Ke.ChangeDetectionSyncStart);try{this.synchronizeOnce()}finally{it(Ke.ChangeDetectionSyncEnd)}}}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let t=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!Jh(i))continue;let s=r&&!this.zonelessEnabled?0:1;GN(i,s),t=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}t||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>Jh(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;nf(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(t),this._injector.get(Oy,[]).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>nf(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new ae(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||n)};static \u0275prov=se({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function nf(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function pf(n,e,t,r){let i=Pe(),s=wc();if(Oi(i,s,e)){let o=jt(),a=qm();V9(a,i,n,e,t,r)}return pf}var pce=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";var VE=class{destroy(e){}updateValue(e,t){}swap(e,t){let r=Math.min(e,t),i=Math.max(e,t),s=this.detach(i);if(i-r>1){let o=this.detach(r);this.attach(r,s),this.attach(i,o)}else this.attach(r,s)}move(e,t){this.attach(t,this.detach(e))}};function fE(n,e,t,r,i){return n===t&&Object.is(e,r)?1:Object.is(i(n,e),i(t,r))?-1:0}function f5(n,e,t,r){let i,s,o=0,a=n.length-1,c=void 0;if(Array.isArray(e)){pe(r);let d=e.length-1;for(pe(null);o<=a&&o<=d;){let h=n.at(o),p=e[o],y=fE(o,h,o,p,t);if(y!==0){y<0&&n.updateValue(o,p),o++;continue}let E=n.at(a),k=e[d],P=fE(a,E,d,k,t);if(P!==0){P<0&&n.updateValue(a,k),a--,d--;continue}let M=t(o,h),H=t(a,E),Y=t(o,p);if(Object.is(Y,H)){let ee=t(d,k);Object.is(ee,M)?(n.swap(o,a),n.updateValue(a,k),d--,a--):n.move(a,o),n.updateValue(o,p),o++;continue}if(i??=new yy,s??=Lk(n,o,a,t),LE(n,i,o,Y))n.updateValue(o,p),o++,a++;else if(s.has(Y))i.set(M,n.detach(o)),a--;else{let ee=n.create(o,e[o]);n.attach(o,ee),o++,a++}}for(;o<=d;)Vk(n,i,t,o,e[o]),o++}else if(e!=null){pe(r);let d=e[Symbol.iterator]();pe(null);let h=d.next();for(;!h.done&&o<=a;){let p=n.at(o),y=h.value,E=fE(o,p,o,y,t);if(E!==0)E<0&&n.updateValue(o,y),o++,h=d.next();else{i??=new yy,s??=Lk(n,o,a,t);let k=t(o,y);if(LE(n,i,o,k))n.updateValue(o,y),o++,a++,h=d.next();else if(!s.has(k))n.attach(o,n.create(o,y)),o++,a++,h=d.next();else{let P=t(o,p);i.set(P,n.detach(o)),a--}}}for(;!h.done;)Vk(n,i,t,n.length,h.value),h=d.next()}for(;o<=a;)n.destroy(n.detach(a--));i?.forEach(d=>{n.destroy(d)})}function LE(n,e,t,r){return e!==void 0&&e.has(r)?(n.attach(t,e.get(r)),e.delete(r),!0):!1}function Vk(n,e,t,r,i){if(LE(n,e,r,t(r,i)))n.updateValue(r,i);else{let s=n.create(r,i);n.attach(r,s)}}function Lk(n,e,t,r){let i=new Set;for(let s=e;s<=t;s++)i.add(r(s,n.at(s)));return i}var yy=class{kvMap=new Map;_vMap=void 0;has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let t=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(t)?(this.kvMap.set(e,this._vMap.get(t)),this._vMap.delete(t)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,t){if(this.kvMap.has(e)){let r=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,t)}else this.kvMap.set(e,t)}forEach(e){for(let[t,r]of this.kvMap)if(e(r,t),this._vMap!==void 0){let i=this._vMap;for(;i.has(r);)r=i.get(r),e(r,t)}}};function le(n,e,t,r,i,s,o,a){zo("NgControlFlow");let c=Pe(),d=jt(),h=Ri(d.consts,s);return my(c,d,n,e,t,r,i,h,256,o,a),wb}function wb(n,e,t,r,i,s,o,a){zo("NgControlFlow");let c=Pe(),d=jt(),h=Ri(d.consts,s);return my(c,d,n,e,t,r,i,h,512,o,a),wb}function ue(n,e){zo("NgControlFlow");let t=Pe(),r=wc(),i=t[r]!==tr?t[r]:-1,s=i!==-1?vy(t,Ut+i):void 0,o=0;if(Oi(t,r,n)){let a=pe(null);try{if(s!==void 0&&XN(s,o),n!==-1){let c=Ut+n,d=vy(t,c),h=$E(t[ge],c),p=eM(d,h,t),y=Ry(t,h,e,{dehydratedView:p});ky(d,y,o,sf(h,p))}}finally{pe(a)}}else if(s!==void 0){let a=JN(s,o);a!==void 0&&(a[Pt]=e)}}var UE=class{lContainer;$implicit;$index;constructor(e,t,r){this.lContainer=e,this.$implicit=t,this.$index=r}get $count(){return this.lContainer.length-At}};function Tu(n,e){return e}var jE=class{hasEmptyBlock;trackByFn;liveCollection;constructor(e,t,r){this.hasEmptyBlock=e,this.trackByFn=t,this.liveCollection=r}};function Tt(n,e,t,r,i,s,o,a,c,d,h,p,y){zo("NgControlFlow");let E=Pe(),k=jt(),P=c!==void 0,M=Pe(),H=a?o.bind(M[ur][Pt]):o,Y=new jE(P,H);M[Ut+n]=Y,my(E,k,n+1,e,t,r,i,Ri(k.consts,s),256),P&&my(E,k,n+2,c,d,h,p,Ri(k.consts,y),512)}var BE=class extends VE{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(e,t,r){super(),this.lContainer=e,this.hostLView=t,this.templateTNode=r}get length(){return this.lContainer.length-At}at(e){return this.getLView(e)[Pt].$implicit}attach(e,t){let r=t[uu];this.needsIndexUpdate||=e!==this.length,ky(this.lContainer,t,e,sf(this.templateTNode,r)),p5(this.lContainer,e)}detach(e){return this.needsIndexUpdate||=e!==this.length-1,g5(this.lContainer,e),m5(this.lContainer,e)}create(e,t){let r=DE(this.lContainer,this.templateTNode.tView.ssrId);return Ry(this.hostLView,this.templateTNode,new UE(this.lContainer,t,e),{dehydratedView:r})}destroy(e){Ay(e[ge],e)}updateValue(e,t){this.getLView(e)[Pt].$implicit=t}reset(){this.needsIndexUpdate=!1}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[Pt].$index=e}getLView(e){return y5(this.lContainer,e)}};function St(n){let e=pe(null),t=ki();try{let r=Pe(),i=r[ge],s=r[t],o=t+1,a=vy(r,o);if(s.liveCollection===void 0){let d=$E(i,o);s.liveCollection=new BE(a,r,d)}else s.liveCollection.reset();let c=s.liveCollection;if(f5(c,n,s.trackByFn,e),c.updateIndexes(),s.hasEmptyBlock){let d=wc(),h=c.length===0;if(Oi(r,d,h)){let p=t+2,y=vy(r,p);if(h){let E=$E(i,p),k=eM(y,E,r),P=Ry(r,E,void 0,{dehydratedView:k});ky(y,P,0,sf(E,k))}else i.firstUpdatePass&&a6(y),XN(y,0)}}}finally{pe(e)}}function vy(n,e){return n[e]}function p5(n,e){if(n.length<=At)return;let t=At+e,r=n[t],i=r?r[mc]:void 0;if(r&&i&&i.detachedLeaveAnimationFns&&i.detachedLeaveAnimationFns.length>0){let s=r[ws];d9(s,i),bc.delete(r),i.detachedLeaveAnimationFns=void 0}}function g5(n,e){if(n.length<=At)return;let t=At+e,r=n[t],i=r?r[mc]:void 0;i&&i.leave&&i.leave.size>0&&(i.detachedLeaveAnimationFns=[])}function m5(n,e){return af(n,e)}function y5(n,e){return JN(n,e)}function $E(n,e){return Yh(n,e)}function Fe(n,e,t){let r=Pe(),i=wc();if(Oi(r,i,e)){let s=jt(),o=qm();LN(o,r,n,e,r[yt],t)}return Fe}function HE(n,e,t,r,i){lb(e,n,t,i?"class":"style",r)}function x(n,e,t,r){let i=Pe(),s=i[ge],o=n+Ut,a=s.firstCreatePass?iM(o,i,2,e,F9,GR(),t,r):s.data[o];if(UN(a,i,n,e,_M),Fm(a)){let c=i[ge];VN(c,i,a),mN(c,a,i)}return r!=null&&cb(i,a),x}function R(){let n=jt(),e=pn(),t=jN(e);return n.firstCreatePass&&sM(n,t),WI(t)&&KI(),GI(),t.classesWithoutHost!=null&&y3(t)&&HE(n,t,Pe(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&v3(t)&&HE(n,t,Pe(),t.stylesWithoutHost,!1),R}function Ot(n,e,t,r){return x(n,e,t,r),R(),Ot}function Dn(n,e,t,r){let i=Pe(),s=i[ge],o=n+Ut,a=s.firstCreatePass?E6(o,s,2,e,t,r):s.data[o];return UN(a,i,n,e,_M),r!=null&&cb(i,a),Dn}function qn(){let n=pn(),e=jN(n);return WI(e)&&KI(),GI(),qn}function gf(n,e,t,r){return Dn(n,e,t,r),qn(),gf}var _M=(n,e,t,r,i)=>(Gm(!0),_N(e[yt],r,ck()));function je(){return Pe()}var ef=void 0;function v5(n){let e=Math.floor(Math.abs(n)),t=n.toString().replace(/^[^.]*\.?/,"").length;return e===1&&t===0?1:5}var _5=["en",[["a","p"],["AM","PM"]],[["AM","PM"]],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],ef,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],ef,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm\u202Fa","h:mm:ss\u202Fa","h:mm:ss\u202Fa z","h:mm:ss\u202Fa zzzz"],["{1}, {0}",ef,ef,ef],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",v5],pE={};function pr(n){let e=w5(n),t=Uk(e);if(t)return t;let r=e.split("-")[0];if(t=Uk(r),t)return t;if(r==="en")return _5;throw new ae(701,!1)}function Uk(n){return n in pE||(pE[n]=vs.ng&&vs.ng.common&&vs.ng.common.locales&&vs.ng.common.locales[n]),pE[n]}var Ft=(function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n})(Ft||{});function w5(n){return n.toLowerCase().replace(/_/g,"-")}var mf="en-US";var I5=mf;function wM(n){typeof n=="string"&&(I5=n.toLowerCase().replace(/_/g,"-"))}function Q(n,e,t){let r=Pe(),i=jt(),s=pn();return IM(i,r,r[yt],s,n,e,t),Q}function Su(n,e,t){let r=Pe(),i=jt(),s=pn();return(s.type&3||t)&&aM(s,i,r,t,r[yt],n,e,ty(s,r,e)),Su}function IM(n,e,t,r,i,s,o){let a=!0,c=null;if((r.type&3||o)&&(c??=ty(r,e,s),aM(r,n,e,o,t,i,s,c)&&(a=!1)),a){let d=r.outputs?.[i],h=r.hostDirectiveOutputs?.[i];if(h&&h.length)for(let p=0;p<h.length;p+=2){let y=h[p],E=h[p+1];c??=ty(r,e,s),Mk(r,e,y,E,i,c)}if(d&&d.length)for(let p of d)c??=ty(r,e,s),Mk(r,e,p,i,i,c)}}function $(n=1){return ak(n)}function Fy(n,e,t,r){return W6(n,e,t,r),Fy}function Ib(n){let e=Pe(),t=jt(),r=XI();Bm(r+1);let i=fb(t,r);if(n.dirty&&UR(e)===((i.metadata.flags&2)===2)){if(i.matches===null)n.reset([]);else{let s=J6(e,r);n.reset(s,k3),n.notifyOnChanges()}return!0}return!1}function Eb(){return z6(Pe(),XI())}function bb(n){let e=YR();return UI(e,Ut+n)}function Ym(n,e){return n<<17|e<<2}function Sc(n){return n>>17&32767}function E5(n){return(n&2)==2}function b5(n,e){return n&131071|e<<17}function qE(n){return n|2}function Eu(n){return(n&131068)>>2}function gE(n,e){return n&-131069|e<<2}function C5(n){return(n&1)===1}function zE(n){return n|1}function T5(n,e,t,r,i,s){let o=s?e.classBindings:e.styleBindings,a=Sc(o),c=Eu(o);n[r]=t;let d=!1,h;if(Array.isArray(t)){let p=t;h=p[1],(h===null||lu(p,h)>0)&&(d=!0)}else h=t;if(i)if(c!==0){let y=Sc(n[a+1]);n[r+1]=Ym(y,a),y!==0&&(n[y+1]=gE(n[y+1],r)),n[a+1]=b5(n[a+1],r)}else n[r+1]=Ym(a,0),a!==0&&(n[a+1]=gE(n[a+1],r)),a=r;else n[r+1]=Ym(c,0),a===0?a=r:n[c+1]=gE(n[c+1],r),c=r;d&&(n[r+1]=qE(n[r+1])),jk(n,h,r,!0),jk(n,h,r,!1),S5(e,h,n,r,s),o=Ym(a,c),s?e.classBindings=o:e.styleBindings=o}function S5(n,e,t,r,i){let s=i?n.residualClasses:n.residualStyles;s!=null&&typeof e=="string"&&lu(s,e)>=0&&(t[r+1]=zE(t[r+1]))}function jk(n,e,t,r){let i=n[t+1],s=e===null,o=r?Sc(i):Eu(i),a=!1;for(;o!==0&&(a===!1||s);){let c=n[o],d=n[o+1];D5(c,e)&&(a=!0,n[o+1]=r?zE(d):qE(d)),o=r?Sc(d):Eu(d)}a&&(n[t+1]=r?qE(i):zE(i))}function D5(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?lu(n,e)>=0:!1}var ei={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function A5(n){return n.substring(ei.key,ei.keyEnd)}function x5(n){return R5(n),EM(n,bM(n,0,ei.textEnd))}function EM(n,e){let t=ei.textEnd;return t===e?-1:(e=ei.keyEnd=k5(n,ei.key=e,t),bM(n,e,t))}function R5(n){ei.key=0,ei.keyEnd=0,ei.value=0,ei.valueEnd=0,ei.textEnd=n.length}function bM(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function k5(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}function Du(n,e,t){return CM(n,e,t,!1),Du}function On(n,e){return CM(n,e,null,!0),On}function st(n){M5(U5,N5,n,!0)}function N5(n,e){for(let t=x5(e);t>=0;t=EM(e,t))Mm(n,A5(e),!0)}function CM(n,e,t,r){let i=Pe(),s=jt(),o=Um(2);if(s.firstUpdatePass&&SM(s,n,o,r),e!==tr&&Oi(i,o,e)){let a=s.data[ki()];DM(s,a,i,i[yt],n,i[o+1]=B5(e,t),r,o)}}function M5(n,e,t,r){let i=jt(),s=Um(2);i.firstUpdatePass&&SM(i,null,s,r);let o=Pe();if(t!==tr&&Oi(o,s,t)){let a=i.data[ki()];if(AM(a,r)&&!TM(i,s)){let c=r?a.classesWithoutHost:a.stylesWithoutHost;c!==null&&(t=xm(c,t||"")),HE(i,a,o,t,r)}else j5(i,a,o,o[yt],o[s+1],o[s+1]=L5(n,e,t),r,s)}}function TM(n,e){return e>=n.expandoStartIndex}function SM(n,e,t,r){let i=n.data;if(i[t+1]===null){let s=i[ki()],o=TM(n,t);AM(s,r)&&e===null&&!o&&(e=!1),e=P5(i,s,e,r),T5(i,s,e,t,o,r)}}function P5(n,e,t,r){let i=rk(n),s=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=mE(null,n,e,t,r),t=lf(t,e.attrs,r),s=null);else{let o=e.directiveStylingLast;if(o===-1||n[o]!==i)if(t=mE(i,n,e,t,r),s===null){let c=O5(n,e,r);c!==void 0&&Array.isArray(c)&&(c=mE(null,n,e,c[1],r),c=lf(c,e.attrs,r),F5(n,e,r,c))}else s=V5(n,e,r)}return s!==void 0&&(r?e.residualClasses=s:e.residualStyles=s),t}function O5(n,e,t){let r=t?e.classBindings:e.styleBindings;if(Eu(r)!==0)return n[Sc(r)]}function F5(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[Sc(i)]=r}function V5(n,e,t){let r,i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++){let o=n[s].hostAttrs;r=lf(r,o,t)}return lf(r,e.attrs,t)}function mE(n,e,t,r,i){let s=null,o=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<o&&(s=e[a],r=lf(r,s.hostAttrs,i),s!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function lf(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let s=0;s<e.length;s++){let o=e[s];typeof o=="number"?i=o:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),Mm(n,o,t?!0:e[++s]))}return n===void 0?null:n}function L5(n,e,t){if(t==null||t==="")return Hn;let r=[],i=df(t);if(Array.isArray(i))for(let s=0;s<i.length;s++)n(r,i[s],!0);else if(typeof i=="object")for(let s in i)i.hasOwnProperty(s)&&n(r,s,i[s]);else typeof i=="string"&&e(r,i);return r}function U5(n,e,t){let r=String(e);r!==""&&!r.includes(" ")&&Mm(n,r,t)}function j5(n,e,t,r,i,s,o,a){i===tr&&(i=Hn);let c=0,d=0,h=0<i.length?i[0]:null,p=0<s.length?s[0]:null;for(;h!==null||p!==null;){let y=c<i.length?i[c+1]:void 0,E=d<s.length?s[d+1]:void 0,k=null,P;h===p?(c+=2,d+=2,y!==E&&(k=p,P=E)):p===null||h!==null&&h<p?(c+=2,k=h):(d+=2,k=p,P=E),k!==null&&DM(n,e,t,r,k,P,o,a),h=c<i.length?i[c]:null,p=d<s.length?s[d]:null}}function DM(n,e,t,r,i,s,o,a){if(!(e.type&3))return;let c=n.data,d=c[a+1],h=C5(d)?Bk(c,e,t,i,Eu(d),o):void 0;if(!_y(h)){_y(s)||E5(d)&&(s=Bk(c,null,t,i,a,o));let p=LI(ki(),t);S9(r,o,p,i,s)}}function Bk(n,e,t,r,i,s){let o=e===null,a;for(;i>0;){let c=n[i],d=Array.isArray(c),h=d?c[1]:c,p=h===null,y=t[i+1];y===tr&&(y=p?Hn:void 0);let E=p?Pm(y,r):h===r?y:void 0;if(d&&!_y(E)&&(E=Pm(c,r)),_y(E)&&(a=E,o))return a;let k=n[i+1];i=o?Sc(k):Eu(k)}if(e!==null){let c=s?e.residualClasses:e.residualStyles;c!=null&&(a=Pm(c,r))}return a}function _y(n){return n!==void 0}function B5(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=ms(df(n)))),n}function AM(n,e){return(n.flags&(e?8:16))!==0}function N(n,e=""){let t=Pe(),r=jt(),i=n+Ut,s=r.firstCreatePass?Ny(r,i,1,e,null):r.data[i],o=$5(r,t,s,e,n);t[i]=o,zm()&&ob(r,t,o,s),pu(s,!1)}var $5=(n,e,t,r,i)=>(Gm(!0),H3(e[yt],r));function H5(n,e,t,r=""){return Oi(n,wc(),t)?e+dc(t)+r:tr}function q5(n,e,t,r,i,s=""){let o=XR(),a=oM(n,o,t,i);return Um(2),a?e+dc(t)+r+dc(i)+s:tr}function xe(n){return Xe("",n),xe}function Xe(n,e,t){let r=Pe(),i=H5(r,n,e,t);return i!==tr&&xM(r,ki(),i),Xe}function Vy(n,e,t,r,i){let s=Pe(),o=q5(s,n,e,t,r,i);return o!==tr&&xM(s,ki(),o),Vy}function xM(n,e,t){let r=LI(e,n);q3(n[yt],r,t)}function un(n,e,t){mb(e)&&(e=e());let r=Pe(),i=wc();if(Oi(r,i,e)){let s=jt(),o=qm();LN(o,r,n,e,r[yt],t)}return un}function gn(n,e){let t=mb(n);return t&&n.set(e),t}function dn(n,e){let t=Pe(),r=jt(),i=pn();return IM(r,t,t[yt],i,n,e),dn}function $k(n,e,t){let r=jt();r.firstCreatePass&&RM(e,r.data,r.blueprint,xi(n),t)}function RM(n,e,t,r,i){if(n=Cn(n),Array.isArray(n))for(let s=0;s<n.length;s++)RM(n[s],e,t,r,i);else{let s=jt(),o=Pe(),a=pn(),c=cc(n)?n:Cn(n.provide),d=MI(n),h=a.providerIndexes&1048575,p=a.directiveStart,y=a.providerIndexes>>20;if(cc(n)||!n.multi){let E=new Ec(d,i,Ue,null),k=vE(c,e,i?h:h+y,p);k===-1?(wE(oy(a,o),s,c),yE(s,n,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(E),o.push(E)):(t[k]=E,o[k]=E)}else{let E=vE(c,e,h+y,p),k=vE(c,e,h,h+y),P=E>=0&&t[E],M=k>=0&&t[k];if(i&&!M||!i&&!P){wE(oy(a,o),s,c);let H=W5(i?G5:z5,t.length,i,r,d,n);!i&&M&&(t[k].providerFactory=H),yE(s,n,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(H),o.push(H)}else{let H=kM(t[i?k:E],d,!i&&r);yE(s,n,E>-1?E:k,H)}!i&&r&&M&&t[k].componentProviders++}}}function yE(n,e,t,r){let i=cc(e),s=PR(e);if(i||s){let c=(s?Cn(e.useClass):e).prototype.ngOnDestroy;if(c){let d=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let h=d.indexOf(t);h===-1?d.push(t,[r,c]):d[h+1].push(r,c)}else d.push(t,c)}}}function kM(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function vE(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function z5(n,e,t,r,i){return GE(this.multi,[])}function G5(n,e,t,r,i){let s=this.multi,o;if(this.providerFactory){let a=this.providerFactory.componentProviders,c=rf(r,r[ge],this.providerFactory.index,i);o=c.slice(0,a),GE(s,o);for(let d=a;d<c.length;d++)o.push(c[d])}else o=[],GE(s,o);return o}function GE(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function W5(n,e,t,r,i,s){let o=new Ec(n,t,Ue,null);return o.multi=[],o.index=e,o.componentProviders=0,kM(o,i,r&&!t),o}function Au(n,e){return t=>{t.providersResolver=(r,i)=>$k(r,i?i(n):n,!1),e&&(t.viewProvidersResolver=(r,i)=>$k(r,i?i(e):e,!0))}}function K5(n,e){let t=n[e];return t===tr?void 0:t}function Q5(n,e,t,r,i,s,o){let a=e+t;return oM(n,a,i,s)?b6(n,a+2,o?r.call(o,i,s):r(i,s)):K5(n,a+2)}function yf(n,e){let t=jt(),r,i=n+Ut;t.firstCreatePass?(r=Y5(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];let s=r.factory||(r.factory=Oo(r.type,!0)),o,a=$n(Ue);try{let c=sy(!1),d=s();return sy(c),jI(t,Pe(),i,d),d}finally{$n(a)}}function Y5(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function vf(n,e,t,r){let i=n+Ut,s=Pe(),o=UI(s,i);return J5(s,i)?Q5(s,JR(),e,o.transform,t,r,o):o.transform(t,r)}function J5(n,e){return n[ge].data[e].pure}var wy=class{ngModuleFactory;componentFactories;constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},Cb=(()=>{class n{compileModuleSync(t){return new gy(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=CI(t),s=TN(i.declarations).reduce((o,a)=>{let c=Lo(a);return c&&o.push(new Iu(c)),o},[]);return new wy(r,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=se({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var NM=(()=>{class n{applicationErrorHandler=j(hr);appRef=j(Wo);taskService=j(Is);ngZone=j(wt);zonelessEnabled=j(Zh);tracing=j(Ac,{optional:!0});zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new sn;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get($h):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(j(aE,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()}))}notify(t){if(!this.zonelessEnabled&&t===5)return;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2;break}case 12:{this.appRef.dirtyFlags|=16;break}case 13:{this.appRef.dirtyFlags|=2;break}case 11:break;case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?rE:nE;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get($h+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(t),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,rE(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=se({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function MM(){return[{provide:ys,useExisting:NM},{provide:wt,useClass:Hh},{provide:Zh,useValue:!0}]}function X5(){return typeof $localize<"u"&&$localize.locale||mf}var _f=new ce("",{factory:()=>j(_f,{optional:!0,skipSelf:!0})||X5()});function ot(n,e){return Kg(n,e?.equal)}var OM=Symbol("InputSignalNode#UNSET"),d$=ie(B({},Qg),{transformFn:void 0,applyValueToInputSignal(n,e){Nh(n,e)}});function FM(n,e){let t=Object.create(d$);t.value=n,t.transformFn=e?.transform;function r(){if(xh(t),t.value===OM){let i=null;throw new ae(-950,i)}return t.value}return r[Bn]=t,r}var Uy=class{attributeName;constructor(e){this.attributeName=e}__NG_ELEMENT_ID__=()=>uf(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}};function PM(n,e){return FM(n,e)}function h$(n){return FM(OM,n)}var VM=(PM.required=h$,PM);var Tb=new ce(""),f$=new ce("");function wf(n){return!n.moduleRef}function p$(n){let e=wf(n)?n.r3Injector:n.moduleRef.injector,t=e.get(wt);return t.run(()=>{wf(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(hr),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:r})}),wf(n)){let s=()=>e.destroy(),o=n.platformInjector.get(Tb);o.add(s),e.onDestroy(()=>{i.unsubscribe(),o.delete(s)})}else{let s=()=>n.moduleRef.destroy(),o=n.platformInjector.get(Tb);o.add(s),n.moduleRef.onDestroy(()=>{nf(n.allPlatformModules,n.moduleRef),i.unsubscribe(),o.delete(s)})}return m$(r,t,()=>{let s=e.get(Is),o=s.add(),a=e.get(_b);return a.runInitializers(),a.donePromise.then(()=>{let c=e.get(_f,mf);if(wM(c||mf),!e.get(f$,!0))return wf(n)?e.get(Wo):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(wf(n)){let h=e.get(Wo);return n.rootComponent!==void 0&&h.bootstrap(n.rootComponent),h}else return g$?.(n.moduleRef,n.allPlatformModules),n.moduleRef}).finally(()=>void s.remove(o))})})}var g$;function m$(n,e,t){try{let r=t();return Go(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n(r)),r}}var Ly=null;function y$(n=[],e){return Mt.create({name:e,providers:[{provide:Gh,useValue:"platform"},{provide:Tb,useValue:new Set([()=>Ly=null])},...n]})}function v$(n=[]){if(Ly)return Ly;let e=y$(n);return Ly=e,yM(),_$(e),e}function _$(n){let e=n.get(Ey,null);an(n,()=>{e?.forEach(t=>t())})}function Sb(){return!1}var Ko=(()=>{class n{static __NG_ELEMENT_ID__=w$}return n})();function w$(n){return I$(pn(),Pe(),(n&16)===16)}function I$(n,e,t){if($o(n)&&!t){let r=Ar(n.index,e);return new qo(r,r)}else if(n.type&175){let r=e[ur];return new qo(r,e)}return null}function LM(n){let{rootComponent:e,appProviders:t,platformProviders:r,platformRef:i}=n;it(Ke.BootstrapApplicationStart);try{let s=i?.injector??v$(r),o=[MM(),hk,...t||[]],a=new cf({providers:o,parent:s,debugName:"",runEnvironmentInitializers:!1});return p$({r3Injector:a.injector,platformInjector:s,rootComponent:e})}catch(s){return Promise.reject(s)}finally{it(Ke.BootstrapApplicationEnd)}}function xu(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}var UM=null;function Rr(){return UM}function Db(n){UM??=n}var If=class{},jy=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=se({token:n,factory:()=>j(jM),providedIn:"platform"})}return n})();var jM=(()=>{class n extends jy{_location;_history;_doc=j(cn);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Rr().getBaseHref(this._doc)}onPopState(t){let r=Rr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=Rr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||n)};static \u0275prov=se({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function HM(n,e){return n?e?n.endsWith("/")?e.startsWith("/")?n+e.slice(1):n+e:e.startsWith("/")?n+e:`${n}/${e}`:n:e}function BM(n){let e=n.search(/#|\?|$/);return n[e-1]==="/"?n.slice(0,e-1)+n.slice(e):n}function Qo(n){return n&&n[0]!=="?"?`?${n}`:n}var Ru=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=se({token:n,factory:()=>j(b$),providedIn:"root"})}return n})(),E$=new ce(""),b$=(()=>{class n extends Ru{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??j(cn).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return HM(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+Qo(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){let o=this.prepareExternalUrl(i+Qo(s));this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){let o=this.prepareExternalUrl(i+Qo(s));this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(Me(jy),Me(E$,8))};static \u0275prov=se({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),ku=(()=>{class n{_subject=new gt;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=S$(BM($M(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Qo(r))}normalize(t){return n.stripTrailingSlash(T$(this._basePath,$M(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Qo(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Qo(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=Qo;static joinWithSlash=HM;static stripTrailingSlash=BM;static \u0275fac=function(r){return new(r||n)(Me(Ru))};static \u0275prov=se({token:n,factory:()=>C$(),providedIn:"root"})}return n})();function C$(){return new ku(Me(Ru))}function T$(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function $M(n){return n.replace(/\/index.html$/,"")}function S$(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var Fn=(function(n){return n[n.Format=0]="Format",n[n.Standalone=1]="Standalone",n})(Fn||{}),ht=(function(n){return n[n.Narrow=0]="Narrow",n[n.Abbreviated=1]="Abbreviated",n[n.Wide=2]="Wide",n[n.Short=3]="Short",n})(ht||{}),nr=(function(n){return n[n.Short=0]="Short",n[n.Medium=1]="Medium",n[n.Long=2]="Long",n[n.Full=3]="Full",n})(nr||{}),Ds={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function zM(n){return pr(n)[Ft.LocaleId]}function GM(n,e,t){let r=pr(n),i=[r[Ft.DayPeriodsFormat],r[Ft.DayPeriodsStandalone]],s=kr(i,e);return kr(s,t)}function WM(n,e,t){let r=pr(n),i=[r[Ft.DaysFormat],r[Ft.DaysStandalone]],s=kr(i,e);return kr(s,t)}function KM(n,e,t){let r=pr(n),i=[r[Ft.MonthsFormat],r[Ft.MonthsStandalone]],s=kr(i,e);return kr(s,t)}function QM(n,e){let r=pr(n)[Ft.Eras];return kr(r,e)}function Ef(n,e){let t=pr(n);return kr(t[Ft.DateFormat],e)}function bf(n,e){let t=pr(n);return kr(t[Ft.TimeFormat],e)}function Cf(n,e){let r=pr(n)[Ft.DateTimeFormat];return kr(r,e)}function Tf(n,e){let t=pr(n),r=t[Ft.NumberSymbols][e];if(typeof r>"u"){if(e===Ds.CurrencyDecimal)return t[Ft.NumberSymbols][Ds.Decimal];if(e===Ds.CurrencyGroup)return t[Ft.NumberSymbols][Ds.Group]}return r}function YM(n){if(!n[Ft.ExtraData])throw new ae(2303,!1)}function JM(n){let e=pr(n);return YM(e),(e[Ft.ExtraData][2]||[]).map(r=>typeof r=="string"?Ab(r):[Ab(r[0]),Ab(r[1])])}function XM(n,e,t){let r=pr(n);YM(r);let i=[r[Ft.ExtraData][0],r[Ft.ExtraData][1]],s=kr(i,e)||[];return kr(s,t)||[]}function kr(n,e){for(let t=e;t>-1;t--)if(typeof n[t]<"u")return n[t];throw new ae(2304,!1)}function Ab(n){let[e,t]=n.split(":");return{hours:+e,minutes:+t}}var D$=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,By={},A$=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;function ZM(n,e,t,r){let i=V$(n);e=Ss(t,e)||e;let o=[],a;for(;e;)if(a=A$.exec(e),a){o=o.concat(a.slice(1));let h=o.pop();if(!h)break;e=h}else{o.push(e);break}let c=i.getTimezoneOffset();r&&(c=tP(r,c),i=F$(i,r));let d="";return o.forEach(h=>{let p=P$(h);d+=p?p(i,t,c):h==="''"?"'":h.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),d}function Gy(n,e,t){let r=new Date(0);return r.setFullYear(n,e,t),r.setHours(0,0,0),r}function Ss(n,e){let t=zM(n);if(By[t]??={},By[t][e])return By[t][e];let r="";switch(e){case"shortDate":r=Ef(n,nr.Short);break;case"mediumDate":r=Ef(n,nr.Medium);break;case"longDate":r=Ef(n,nr.Long);break;case"fullDate":r=Ef(n,nr.Full);break;case"shortTime":r=bf(n,nr.Short);break;case"mediumTime":r=bf(n,nr.Medium);break;case"longTime":r=bf(n,nr.Long);break;case"fullTime":r=bf(n,nr.Full);break;case"short":let i=Ss(n,"shortTime"),s=Ss(n,"shortDate");r=$y(Cf(n,nr.Short),[i,s]);break;case"medium":let o=Ss(n,"mediumTime"),a=Ss(n,"mediumDate");r=$y(Cf(n,nr.Medium),[o,a]);break;case"long":let c=Ss(n,"longTime"),d=Ss(n,"longDate");r=$y(Cf(n,nr.Long),[c,d]);break;case"full":let h=Ss(n,"fullTime"),p=Ss(n,"fullDate");r=$y(Cf(n,nr.Full),[h,p]);break}return r&&(By[t][e]=r),r}function $y(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,r){return e!=null&&r in e?e[r]:t})),n}function ni(n,e,t="-",r,i){let s="";(n<0||i&&n<=0)&&(i?n=-n+1:(n=-n,s=t));let o=String(n);for(;o.length<e;)o="0"+o;return r&&(o=o.slice(o.length-e)),s+o}function x$(n,e){return ni(n,3).substring(0,e)}function Bt(n,e,t=0,r=!1,i=!1){return function(s,o){let a=R$(n,s);if((t>0||a>-t)&&(a+=t),n===3)a===0&&t===-12&&(a=12);else if(n===6)return x$(a,e);let c=Tf(o,Ds.MinusSign);return ni(a,e,c,r,i)}}function R$(n,e){switch(n){case 0:return e.getFullYear();case 1:return e.getMonth();case 2:return e.getDate();case 3:return e.getHours();case 4:return e.getMinutes();case 5:return e.getSeconds();case 6:return e.getMilliseconds();case 7:return e.getDay();default:throw new ae(2301,!1)}}function pt(n,e,t=Fn.Format,r=!1){return function(i,s){return k$(i,s,n,e,t,r)}}function k$(n,e,t,r,i,s){switch(t){case 2:return KM(e,i,r)[n.getMonth()];case 1:return WM(e,i,r)[n.getDay()];case 0:let o=n.getHours(),a=n.getMinutes();if(s){let d=JM(e),h=XM(e,i,r),p=d.findIndex(y=>{if(Array.isArray(y)){let[E,k]=y,P=o>=E.hours&&a>=E.minutes,M=o<k.hours||o===k.hours&&a<k.minutes;if(E.hours<k.hours){if(P&&M)return!0}else if(P||M)return!0}else if(y.hours===o&&y.minutes===a)return!0;return!1});if(p!==-1)return h[p]}return GM(e,i,r)[o<12?0:1];case 3:return QM(e,r)[n.getFullYear()<=0?0:1];default:let c=t;throw new ae(2302,!1)}}function Hy(n){return function(e,t,r){let i=-1*r,s=Tf(t,Ds.MinusSign),o=i>0?Math.floor(i/60):Math.ceil(i/60);switch(n){case 0:return(i>=0?"+":"")+ni(o,2,s)+ni(Math.abs(i%60),2,s);case 1:return"GMT"+(i>=0?"+":"")+ni(o,1,s);case 2:return"GMT"+(i>=0?"+":"")+ni(o,2,s)+":"+ni(Math.abs(i%60),2,s);case 3:return r===0?"Z":(i>=0?"+":"")+ni(o,2,s)+":"+ni(Math.abs(i%60),2,s);default:throw new ae(2310,!1)}}}var N$=0,zy=4;function M$(n){let e=Gy(n,N$,1).getDay();return Gy(n,0,1+(e<=zy?zy:zy+7)-e)}function eP(n){let e=n.getDay(),t=e===0?-3:zy-e;return Gy(n.getFullYear(),n.getMonth(),n.getDate()+t)}function xb(n,e=!1){return function(t,r){let i;if(e){let s=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,o=t.getDate();i=1+Math.floor((o+s)/7)}else{let s=eP(t),o=M$(s.getFullYear()),a=s.getTime()-o.getTime();i=1+Math.round(a/6048e5)}return ni(i,n,Tf(r,Ds.MinusSign))}}function qy(n,e=!1){return function(t,r){let s=eP(t).getFullYear();return ni(s,n,Tf(r,Ds.MinusSign),e)}}var Rb={};function P$(n){if(Rb[n])return Rb[n];let e;switch(n){case"G":case"GG":case"GGG":e=pt(3,ht.Abbreviated);break;case"GGGG":e=pt(3,ht.Wide);break;case"GGGGG":e=pt(3,ht.Narrow);break;case"y":e=Bt(0,1,0,!1,!0);break;case"yy":e=Bt(0,2,0,!0,!0);break;case"yyy":e=Bt(0,3,0,!1,!0);break;case"yyyy":e=Bt(0,4,0,!1,!0);break;case"Y":e=qy(1);break;case"YY":e=qy(2,!0);break;case"YYY":e=qy(3);break;case"YYYY":e=qy(4);break;case"M":case"L":e=Bt(1,1,1);break;case"MM":case"LL":e=Bt(1,2,1);break;case"MMM":e=pt(2,ht.Abbreviated);break;case"MMMM":e=pt(2,ht.Wide);break;case"MMMMM":e=pt(2,ht.Narrow);break;case"LLL":e=pt(2,ht.Abbreviated,Fn.Standalone);break;case"LLLL":e=pt(2,ht.Wide,Fn.Standalone);break;case"LLLLL":e=pt(2,ht.Narrow,Fn.Standalone);break;case"w":e=xb(1);break;case"ww":e=xb(2);break;case"W":e=xb(1,!0);break;case"d":e=Bt(2,1);break;case"dd":e=Bt(2,2);break;case"c":case"cc":e=Bt(7,1);break;case"ccc":e=pt(1,ht.Abbreviated,Fn.Standalone);break;case"cccc":e=pt(1,ht.Wide,Fn.Standalone);break;case"ccccc":e=pt(1,ht.Narrow,Fn.Standalone);break;case"cccccc":e=pt(1,ht.Short,Fn.Standalone);break;case"E":case"EE":case"EEE":e=pt(1,ht.Abbreviated);break;case"EEEE":e=pt(1,ht.Wide);break;case"EEEEE":e=pt(1,ht.Narrow);break;case"EEEEEE":e=pt(1,ht.Short);break;case"a":case"aa":case"aaa":e=pt(0,ht.Abbreviated);break;case"aaaa":e=pt(0,ht.Wide);break;case"aaaaa":e=pt(0,ht.Narrow);break;case"b":case"bb":case"bbb":e=pt(0,ht.Abbreviated,Fn.Standalone,!0);break;case"bbbb":e=pt(0,ht.Wide,Fn.Standalone,!0);break;case"bbbbb":e=pt(0,ht.Narrow,Fn.Standalone,!0);break;case"B":case"BB":case"BBB":e=pt(0,ht.Abbreviated,Fn.Format,!0);break;case"BBBB":e=pt(0,ht.Wide,Fn.Format,!0);break;case"BBBBB":e=pt(0,ht.Narrow,Fn.Format,!0);break;case"h":e=Bt(3,1,-12);break;case"hh":e=Bt(3,2,-12);break;case"H":e=Bt(3,1);break;case"HH":e=Bt(3,2);break;case"m":e=Bt(4,1);break;case"mm":e=Bt(4,2);break;case"s":e=Bt(5,1);break;case"ss":e=Bt(5,2);break;case"S":e=Bt(6,1);break;case"SS":e=Bt(6,2);break;case"SSS":e=Bt(6,3);break;case"Z":case"ZZ":case"ZZZ":e=Hy(0);break;case"ZZZZZ":e=Hy(3);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=Hy(1);break;case"OOOO":case"ZZZZ":case"zzzz":e=Hy(2);break;default:return null}return Rb[n]=e,e}function tP(n,e){n=n.replace(/:/g,"");let t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function O$(n,e){return n=new Date(n.getTime()),n.setMinutes(n.getMinutes()+e),n}function F$(n,e,t){let i=n.getTimezoneOffset(),s=tP(e,i);return O$(n,-1*(s-i))}function V$(n){if(qM(n))return n;if(typeof n=="number"&&!isNaN(n))return new Date(n);if(typeof n=="string"){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){let[i,s=1,o=1]=n.split("-").map(a=>+a);return Gy(i,s-1,o)}let t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let r;if(r=n.match(D$))return L$(r)}let e=new Date(n);if(!qM(e))throw new ae(2311,!1);return e}function L$(n){let e=new Date(0),t=0,r=0,i=n[8]?e.setUTCFullYear:e.setFullYear,s=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),r=Number(n[9]+n[11])),i.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));let o=Number(n[4]||0)-t,a=Number(n[5]||0)-r,c=Number(n[6]||0),d=Math.floor(parseFloat("0."+(n[7]||0))*1e3);return s.call(e,o,a,c,d),e}function qM(n){return n instanceof Date&&!isNaN(n.valueOf())}function U$(n,e){return new ae(2100,!1)}var j$="mediumDate",nP=new ce(""),rP=new ce(""),Sf=(()=>{class n{locale;defaultTimezone;defaultOptions;constructor(t,r,i){this.locale=t,this.defaultTimezone=r,this.defaultOptions=i}transform(t,r,i,s){if(t==null||t===""||t!==t)return null;try{let o=r??this.defaultOptions?.dateFormat??j$,a=i??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return ZM(t,o,s||this.locale,a)}catch(o){throw U$(n,o.message)}}static \u0275fac=function(r){return new(r||n)(Ue(_f,16),Ue(nP,24),Ue(rP,24))};static \u0275pipe=pb({name:"date",type:n,pure:!0})}return n})();var rr=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Cs({type:n});static \u0275inj=Ti({})}return n})();function kb(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,s]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}var Df=class{};var iP="browser";var Af=class{_doc;constructor(e){this._doc=e}manager},Wy=(()=>{class n extends Af{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i,s){return t.addEventListener(r,i,s),()=>this.removeEventListener(t,r,i,s)}removeEventListener(t,r,i,s){return t.removeEventListener(r,i,s)}static \u0275fac=function(r){return new(r||n)(Me(cn))};static \u0275prov=se({token:n,factory:n.\u0275fac})}return n})(),Yy=new ce(""),Fb=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,r){this._zone=r,t.forEach(o=>{o.manager=this});let i=t.filter(o=>!(o instanceof Wy));this._plugins=i.slice().reverse();let s=t.find(o=>o instanceof Wy);s&&this._plugins.push(s)}addEventListener(t,r,i,s){return this._findPluginFor(r).addEventListener(t,r,i,s)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(s=>s.supports(t)),!r)throw new ae(5101,!1);return this._eventNameToPlugin.set(t,r),r}static \u0275fac=function(r){return new(r||n)(Me(Yy),Me(wt))};static \u0275prov=se({token:n,factory:n.\u0275fac})}return n})(),Mb="ng-app-id";function sP(n){for(let e of n)e.remove()}function oP(n,e){let t=e.createElement("style");return t.textContent=n,t}function $$(n,e,t,r){let i=n.head?.querySelectorAll(`style[${Mb}="${e}"],link[${Mb}="${e}"]`);if(i)for(let s of i)s.removeAttribute(Mb),s instanceof HTMLLinkElement?r.set(s.href.slice(s.href.lastIndexOf("/")+1),{usage:0,elements:[s]}):s.textContent&&t.set(s.textContent,{usage:0,elements:[s]})}function Ob(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var Vb=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(t,r,i,s={}){this.doc=t,this.appId=r,this.nonce=i,$$(t,r,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,r){for(let i of t)this.addUsage(i,this.inline,oP);r?.forEach(i=>this.addUsage(i,this.external,Ob))}removeStyles(t,r){for(let i of t)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(t,r,i){let s=r.get(t);s?s.usage++:r.set(t,{usage:1,elements:[...this.hosts].map(o=>this.addElement(o,i(t,this.doc)))})}removeUsage(t,r){let i=r.get(t);i&&(i.usage--,i.usage<=0&&(sP(i.elements),r.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])sP(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(t,oP(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(t,Ob(r,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,r){return this.nonce&&r.setAttribute("nonce",this.nonce),t.appendChild(r)}static \u0275fac=function(r){return new(r||n)(Me(cn),Me(Iy),Me(by,8),Me(Dc))};static \u0275prov=se({token:n,factory:n.\u0275fac})}return n})(),Pb={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Lb=/%COMP%/g;var cP="%COMP%",H$=`_nghost-${cP}`,q$=`_ngcontent-${cP}`,z$=!0,G$=new ce("",{factory:()=>z$});function W$(n){return q$.replace(Lb,n)}function K$(n){return H$.replace(Lb,n)}function lP(n,e){return e.map(t=>t.replace(Lb,n))}var Ub=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,r,i,s,o,a,c=null,d=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.ngZone=a,this.nonce=c,this.tracingService=d,this.platformIsServer=!1,this.defaultRenderer=new xf(t,o,a,this.platformIsServer,this.tracingService)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(t,r);return i instanceof Qy?i.applyToHost(t):i instanceof Rf&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,s=i.get(r.id);if(!s){let o=this.doc,a=this.ngZone,c=this.eventManager,d=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.platformIsServer,y=this.tracingService;switch(r.encapsulation){case ti.Emulated:s=new Qy(c,d,r,this.appId,h,o,a,p,y);break;case ti.ShadowDom:return new Ky(c,t,r,o,a,this.nonce,p,y,d);case ti.ExperimentalIsolatedShadowDom:return new Ky(c,t,r,o,a,this.nonce,p,y);default:s=new Rf(c,d,r,h,o,a,p,y);break}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(r){return new(r||n)(Me(Fb),Me(Vb),Me(Iy),Me(G$),Me(cn),Me(wt),Me(by),Me(Ac,8))};static \u0275prov=se({token:n,factory:n.\u0275fac})}return n})(),xf=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,r,i,s){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.tracingService=s}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(Pb[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(aP(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(aP(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new ae(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let s=Pb[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=Pb[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Pi.DashCase|Pi.Important)?e.style.setProperty(t,r,i&Pi.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Pi.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r,i){if(typeof e=="string"&&(e=Rr().getGlobalEventTarget(this.doc,e),!e))throw new ae(5102,!1);let s=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(s=this.tracingService.wrapEventListener(e,t,s)),this.eventManager.addEventListener(e,t,s,i)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;e(t)===!1&&t.preventDefault()}}};function aP(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var Ky=class extends xf{hostEl;sharedStylesHost;shadowRoot;constructor(e,t,r,i,s,o,a,c,d){super(e,i,s,a,c),this.hostEl=t,this.sharedStylesHost=d,this.shadowRoot=t.attachShadow({mode:"open"}),this.sharedStylesHost&&this.sharedStylesHost.addHost(this.shadowRoot);let h=r.styles;h=lP(r.id,h);for(let y of h){let E=document.createElement("style");o&&E.setAttribute("nonce",o),E.textContent=y,this.shadowRoot.appendChild(E)}let p=r.getExternalStyles?.();if(p)for(let y of p){let E=Ob(y,i);o&&E.setAttribute("nonce",o),this.shadowRoot.appendChild(E)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost&&this.sharedStylesHost.removeHost(this.shadowRoot)}},Rf=class extends xf{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,r,i,s,o,a,c,d){super(e,s,o,a,c),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i;let h=r.styles;this.styles=d?lP(d,h):h,this.styleUrls=r.getExternalStyles?.(d)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&bc.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},Qy=class extends Rf{contentAttr;hostAttr;constructor(e,t,r,i,s,o,a,c,d){let h=i+"-"+r.id;super(e,t,r,s,o,a,c,d,h),this.contentAttr=W$(h),this.hostAttr=K$(h)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}};var Jy=class n extends If{supportsDOMEvents=!0;static makeCurrent(){Db(new n)}onAndCancel(e,t,r,i){return e.addEventListener(t,r,i),()=>{e.removeEventListener(t,r,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=Q$();return t==null?null:Y$(t)}resetBaseElement(){kf=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return kb(document.cookie,e)}},kf=null;function Q$(){return kf=kf||document.head.querySelector("base"),kf?kf.getAttribute("href"):null}function Y$(n){return new URL(n,document.baseURI).pathname}var J$=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=se({token:n,factory:n.\u0275fac})}return n})(),uP=["alt","control","meta","shift"],X$={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Z$={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},dP=(()=>{class n extends Af{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i,s){let o=n.parseEventName(r),a=n.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Rr().onAndCancel(t,o.domEventName,a,s))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let s=n._normalizeKey(r.pop()),o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),uP.forEach(d=>{let h=r.indexOf(d);h>-1&&(r.splice(h,1),o+=d+".")}),o+=s,r.length!=0||s.length===0)return null;let c={};return c.domEventName=i,c.fullKey=o,c}static matchEventFullKeyCode(t,r){let i=X$[t.key]||t.key,s="";return r.indexOf("code.")>-1&&(i=t.code,s="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),uP.forEach(o=>{if(o!==i){let a=Z$[o];a(t)&&(s+=o+".")}}),s+=i,s===r)}static eventCallback(t,r,i){return s=>{n.matchEventFullKeyCode(s,t)&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(r){return new(r||n)(Me(cn))};static \u0275prov=se({token:n,factory:n.\u0275fac})}return n})();function jb(n,e,t){let r=B({rootComponent:n,platformRef:t?.platformRef},e8(e));return LM(r)}function e8(n){return{appProviders:[...s8,...n?.providers??[]],platformProviders:i8}}function t8(){Jy.makeCurrent()}function n8(){return new Ci}function r8(){return QE(document),document}var i8=[{provide:Dc,useValue:iP},{provide:Ey,useValue:t8,multi:!0},{provide:cn,useFactory:r8}];var s8=[{provide:Gh,useValue:"root"},{provide:Ci,useFactory:n8},{provide:Yy,useClass:Wy,multi:!0},{provide:Yy,useClass:dP,multi:!0},Ub,Vb,Fb,{provide:Cc,useExisting:Ub},{provide:Df,useClass:J$},[]];var hP=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(r){return new(r||n)(Me(cn))};static \u0275prov=se({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Ce="primary",qf=Symbol("RouteTitle"),zb=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Pc(n){return new zb(n)}function IP(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let s=0;s<r.length;s++){let o=r[s],a=n[s];if(o[0]===":")i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function rv(n){return new Promise((e,t)=>{n.pipe(ps()).subscribe({next:r=>e(r),error:r=>t(r)})})}function a8(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Vi(n[t],e[t]))return!1;return!0}function Vi(n,e){let t=n?Gb(n):void 0,r=e?Gb(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!EP(n[i],e[i]))return!1;return!0}function Gb(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function EP(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}else return n===e}function bP(n){return n.length>0?n[n.length-1]:null}function Fc(n){return gm(n)?n:Go(n)?Ne(Promise.resolve(n)):de(n)}function CP(n){return gm(n)?rv(n):Promise.resolve(n)}var c8={exact:SP,subset:DP},TP={exact:l8,subset:u8,ignored:()=>!0};function fP(n,e,t){return c8[t.paths](n.root,e.root,t.matrixParams)&&TP[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function l8(n,e){return Vi(n,e)}function SP(n,e,t){if(!Nc(n.segments,e.segments)||!ev(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!SP(n.children[r],e.children[r],t))return!1;return!0}function u8(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>EP(n[t],e[t]))}function DP(n,e,t){return AP(n,e,e.segments,t)}function AP(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!Nc(i,t)||e.hasChildren()||!ev(i,t,r))}else if(n.segments.length===t.length){if(!Nc(n.segments,t)||!ev(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!DP(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!Nc(n.segments,i)||!ev(n.segments,i,r)||!n.children[Ce]?!1:AP(n.children[Ce],e,s,r)}}function ev(n,e,t){return e.every((r,i)=>TP[t](n[i].parameters,r.parameters))}var ii=class{root;queryParams;fragment;_queryParamMap;constructor(e=new Ze([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Pc(this.queryParams),this._queryParamMap}toString(){return f8.serialize(this)}},Ze=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return tv(this)}},Yo=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Pc(this.parameters),this._parameterMap}toString(){return RP(this)}};function d8(n,e){return Nc(n,e)&&n.every((t,r)=>Vi(t.parameters,e[r].parameters))}function Nc(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function h8(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===Ce&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==Ce&&(t=t.concat(e(i,r)))}),t}var zf=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=se({token:n,factory:()=>new Jo,providedIn:"root"})}return n})(),Jo=class{parse(e){let t=new Kb(e);return new ii(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${Nf(e.root,!0)}`,r=m8(e.queryParams),i=typeof e.fragment=="string"?`#${p8(e.fragment)}`:"";return`${t}${r}${i}`}},f8=new Jo;function tv(n){return n.segments.map(e=>RP(e)).join("/")}function Nf(n,e){if(!n.hasChildren())return tv(n);if(e){let t=n.children[Ce]?Nf(n.children[Ce],!1):"",r=[];return Object.entries(n.children).forEach(([i,s])=>{i!==Ce&&r.push(`${i}:${Nf(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=h8(n,(r,i)=>i===Ce?[Nf(n.children[Ce],!1)]:[`${i}:${Nf(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[Ce]!=null?`${tv(n)}/${t[0]}`:`${tv(n)}/(${t.join("//")})`}}function xP(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Xy(n){return xP(n).replace(/%3B/gi,";")}function p8(n){return encodeURI(n)}function Wb(n){return xP(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function nv(n){return decodeURIComponent(n)}function pP(n){return nv(n.replace(/\+/g,"%20"))}function RP(n){return`${Wb(n.path)}${g8(n.parameters)}`}function g8(n){return Object.entries(n).map(([e,t])=>`;${Wb(e)}=${Wb(t)}`).join("")}function m8(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${Xy(t)}=${Xy(i)}`).join("&"):`${Xy(t)}=${Xy(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var y8=/^[^\/()?;#]+/;function Bb(n){let e=n.match(y8);return e?e[0]:""}var v8=/^[^\/()?;=#]+/;function _8(n){let e=n.match(v8);return e?e[0]:""}var w8=/^[^=?&#]+/;function I8(n){let e=n.match(w8);return e?e[0]:""}var E8=/^[^&#]+/;function b8(n){let e=n.match(E8);return e?e[0]:""}var Kb=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ze([],{}):new Ze([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Ce]=new Ze(e,t)),r}parseSegment(){let e=Bb(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new ae(4009,!1);return this.capture(e),new Yo(nv(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=_8(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=Bb(this.remaining);i&&(r=i,this.capture(r))}e[nv(t)]=nv(r)}parseQueryParam(e){let t=I8(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let o=b8(this.remaining);o&&(r=o,this.capture(r))}let i=pP(t),s=pP(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Bb(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new ae(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=Ce);let o=this.parseChildren();t[s??Ce]=Object.keys(o).length===1&&o[Ce]?o[Ce]:new Ze([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new ae(4011,!1)}};function kP(n){return n.segments.length>0?new Ze([],{[Ce]:n}):n}function NP(n){let e={};for(let[r,i]of Object.entries(n.children)){let s=NP(i);if(r===Ce&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let t=new Ze(n.segments,e);return C8(t)}function C8(n){if(n.numberOfChildren===1&&n.children[Ce]){let e=n.children[Ce];return new Ze(n.segments.concat(e.segments),e.children)}return n}function Xo(n){return n instanceof ii}function MP(n,e,t=null,r=null,i=new Jo){let s=PP(n);return OP(s,e,t,r,i)}function PP(n){let e;function t(s){let o={};for(let c of s.children){let d=t(c);o[c.outlet]=d}let a=new Ze(s.url,o);return s===n&&(e=a),a}let r=t(n.root),i=kP(r);return e??i}function OP(n,e,t,r,i){let s=n;for(;s.parent;)s=s.parent;if(e.length===0)return $b(s,s,s,t,r,i);let o=T8(e);if(o.toRoot())return $b(s,s,new Ze([],{}),t,r,i);let a=S8(o,s,n),c=a.processChildren?Pf(a.segmentGroup,a.index,o.commands):VP(a.segmentGroup,a.index,o.commands);return $b(s,a.segmentGroup,c,t,r,i)}function iv(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Vf(n){return typeof n=="object"&&n!=null&&n.outlets}function gP(n,e,t){n||="\u0275";let r=new ii;return r.queryParams={[n]:e},t.parse(t.serialize(r)).queryParams[n]}function $b(n,e,t,r,i,s){let o={};for(let[d,h]of Object.entries(r??{}))o[d]=Array.isArray(h)?h.map(p=>gP(d,p,s)):gP(d,h,s);let a;n===e?a=t:a=FP(n,e,t);let c=kP(NP(a));return new ii(c,o,i)}function FP(n,e,t){let r={};return Object.entries(n.children).forEach(([i,s])=>{s===e?r[i]=t:r[i]=FP(s,e,t)}),new Ze(n.segments,r)}var sv=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&iv(r[0]))throw new ae(4003,!1);let i=r.find(Vf);if(i&&i!==bP(r))throw new ae(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function T8(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new sv(!0,0,n);let e=0,t=!1,r=n.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([c,d])=>{a[c]=typeof d=="string"?d.split("/"):d}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,s]},[]);return new sv(t,e,r)}var Mu=class{segmentGroup;processChildren;index;constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function S8(n,e,t){if(n.isAbsolute)return new Mu(e,!0,0);if(!t)return new Mu(e,!1,NaN);if(t.parent===null)return new Mu(t,!0,0);let r=iv(n.commands[0])?0:1,i=t.segments.length-1+r;return D8(t,i,n.numberOfDoubleDots)}function D8(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new ae(4005,!1);i=r.segments.length}return new Mu(r,!1,i-s)}function A8(n){return Vf(n[0])?n[0].outlets:{[Ce]:n}}function VP(n,e,t){if(n??=new Ze([],{}),n.segments.length===0&&n.hasChildren())return Pf(n,e,t);let r=x8(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let s=new Ze(n.segments.slice(0,r.pathIndex),{});return s.children[Ce]=new Ze(n.segments.slice(r.pathIndex),n.children),Pf(s,0,i)}else return r.match&&i.length===0?new Ze(n.segments,{}):r.match&&!n.hasChildren()?Qb(n,e,t):r.match?Pf(n,0,i):Qb(n,e,t)}function Pf(n,e,t){if(t.length===0)return new Ze(n.segments,{});{let r=A8(t),i={};if(Object.keys(r).some(s=>s!==Ce)&&n.children[Ce]&&n.numberOfChildren===1&&n.children[Ce].segments.length===0){let s=Pf(n.children[Ce],e,t);return new Ze(n.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=VP(n.children[s],e,o))}),Object.entries(n.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new Ze(n.segments,i)}}function x8(n,e,t){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;let o=n.segments[i],a=t[r];if(Vf(a))break;let c=`${a}`,d=r<t.length-1?t[r+1]:null;if(i>0&&c===void 0)break;if(c&&d&&typeof d=="object"&&d.outlets===void 0){if(!yP(c,d,o))return s;r+=2}else{if(!yP(c,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Qb(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let s=t[i];if(Vf(s)){let c=R8(s.outlets);return new Ze(r,c)}if(i===0&&iv(t[0])){let c=n.segments[e];r.push(new Yo(c.path,mP(t[0]))),i++;continue}let o=Vf(s)?s.outlets[Ce]:`${s}`,a=i<t.length-1?t[i+1]:null;o&&a&&iv(a)?(r.push(new Yo(o,mP(a))),i+=2):(r.push(new Yo(o,{})),i++)}return new Ze(r,{})}function R8(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=Qb(new Ze([],{}),0,r))}),e}function mP(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function yP(n,e,t){return n==t.path&&Vi(e,t.parameters)}var Of="imperative",mn=(function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n})(mn||{}),mr=class{id;url;constructor(e,t){this.id=e,this.url=t}},Oc=class extends mr{type=mn.NavigationStart;navigationTrigger;restoredState;constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},si=class extends mr{urlAfterRedirects;type=mn.NavigationEnd;constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},zn=(function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n[n.Aborted=4]="Aborted",n})(zn||{}),Lf=(function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n})(Lf||{}),Li=class extends mr{reason;code;type=mn.NavigationCancel;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},As=class extends mr{reason;code;type=mn.NavigationSkipped;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}},Ou=class extends mr{error;target;type=mn.NavigationError;constructor(e,t,r,i){super(e,t),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Uf=class extends mr{urlAfterRedirects;state;type=mn.RoutesRecognized;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},ov=class extends mr{urlAfterRedirects;state;type=mn.GuardsCheckStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},av=class extends mr{urlAfterRedirects;state;shouldActivate;type=mn.GuardsCheckEnd;constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},cv=class extends mr{urlAfterRedirects;state;type=mn.ResolveStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},lv=class extends mr{urlAfterRedirects;state;type=mn.ResolveEnd;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},uv=class{route;type=mn.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},dv=class{route;type=mn.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},hv=class{snapshot;type=mn.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},fv=class{snapshot;type=mn.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},pv=class{snapshot;type=mn.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},gv=class{snapshot;type=mn.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var jf=class{},Fu=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function k8(n){return!(n instanceof jf)&&!(n instanceof Fu)}function N8(n,e){return n.providers&&!n._injector&&(n._injector=ff(n.providers,e,`Route: ${n.path}`)),n._injector??e}function ri(n){return n.outlet||Ce}function M8(n,e){let t=n.filter(r=>ri(r)===e);return t.push(...n.filter(r=>ri(r)!==e)),t}function Uu(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var mv=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return Uu(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new ju(this.rootInjector)}},ju=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new mv(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(r){return new(r||n)(Me(Lt))};static \u0275prov=se({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),yv=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=Yb(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=Yb(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=Jb(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Jb(e,this._root).map(t=>t.value)}};function Yb(n,e){if(n===e.value)return e;for(let t of e.children){let r=Yb(n,t);if(r)return r}return null}function Jb(n,e){if(n===e.value)return[e];for(let t of e.children){let r=Jb(n,t);if(r.length)return r.unshift(e),r}return[]}var gr=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function Nu(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var Bf=class extends yv{snapshot;constructor(e,t){super(e),this.snapshot=t,rC(this,e)}toString(){return this.snapshot.toString()}};function LP(n){let e=P8(n),t=new dt([new Yo("",{})]),r=new dt({}),i=new dt({}),s=new dt({}),o=new dt(""),a=new xs(t,r,s,o,i,Ce,n,e.root);return a.snapshot=e.root,new Bf(new gr(a,[]),e)}function P8(n){let e={},t={},r={},s=new Mc([],e,r,"",t,Ce,n,null,{});return new $f("",new gr(s,[]))}var xs=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,r,i,s,o,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(_e(d=>d[qf]))??de(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(_e(e=>Pc(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(_e(e=>Pc(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function vv(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:B(B({},e.params),n.params),data:B(B({},e.data),n.data),resolve:B(B(B(B({},n.data),e.data),i?.data),n._resolvedData)}:r={params:B({},n.params),data:B({},n.data),resolve:B(B({},n.data),n._resolvedData??{})},i&&jP(i)&&(r.resolve[qf]=i.title),r}var Mc=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[qf]}constructor(e,t,r,i,s,o,a,c,d){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=c,this._resolve=d}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Pc(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Pc(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},$f=class extends yv{url;constructor(e,t){super(t),this.url=e,rC(this,t)}toString(){return UP(this._root)}};function rC(n,e){e.value._routerState=n,e.children.forEach(t=>rC(n,t))}function UP(n){let e=n.children.length>0?` { ${n.children.map(UP).join(", ")} } `:"";return`${n.value}${e}`}function Hb(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Vi(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Vi(e.params,t.params)||n.paramsSubject.next(t.params),a8(e.url,t.url)||n.urlSubject.next(t.url),Vi(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function Xb(n,e){let t=Vi(n.params,e.params)&&d8(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||Xb(n.parent,e.parent))}function jP(n){return typeof n.title=="string"||n.title===null}var BP=new ce(""),Gf=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=Ce;activateEvents=new Dt;deactivateEvents=new Dt;attachEvents=new Dt;detachEvents=new Dt;routerOutletData=VM();parentContexts=j(ju);location=j(xc);changeDetector=j(Ko);inputBinder=j(Ev,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new ae(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new ae(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new ae(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new ae(4013,!1);this._activatedRoute=t;let i=this.location,o=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new Zb(t,a,i.injector,this.routerOutletData);this.activated=i.createComponent(o,{index:i.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=Sn({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[Es]})}return n})(),Zb=class{route;childContexts;parent;outletData;constructor(e,t,r,i){this.route=e,this.childContexts=t,this.parent=r,this.outletData=i}get(e,t){return e===xs?this.route:e===ju?this.childContexts:e===BP?this.outletData:this.parent.get(e,t)}},Ev=new ce("");var iC=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=Tn({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&Ot(0,"router-outlet")},dependencies:[Gf],encapsulation:2})}return n})();function sC(n){let e=n.children&&n.children.map(sC),t=e?ie(B({},n),{children:e}):B({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Ce&&(t.component=iC),t}function O8(n,e,t){let r=Hf(n,e._root,t?t._root:void 0);return new Bf(r,e)}function Hf(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=F8(n,e,t);return new gr(r,i)}else{if(n.shouldAttach(e.value)){let s=n.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>Hf(n,a)),o}}let r=V8(e.value),i=e.children.map(s=>Hf(n,s));return new gr(r,i)}}function F8(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Hf(n,r,i);return Hf(n,r)})}function V8(n){return new xs(new dt(n.url),new dt(n.params),new dt(n.queryParams),new dt(n.fragment),new dt(n.data),n.outlet,n.component,n)}var Vu=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},$P="ngNavigationCancelingError";function _v(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=Xo(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=HP(!1,zn.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function HP(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[$P]=!0,t.cancellationCode=e,t}function L8(n){return qP(n)&&Xo(n.url)}function qP(n){return!!n&&n[$P]}var U8=(n,e,t,r)=>_e(i=>(new eC(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),eC=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,r,i,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Hb(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=Nu(t);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Nu(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){let o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Nu(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=Nu(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new gv(s.value.snapshot))}),e.children.length&&this.forwardEvent(new fv(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(Hb(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),Hb(a.route.value),this.activateChildRoutes(e,null,o.children)}else o.attachRef=null,o.route=i,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}else this.activateChildRoutes(e,null,r)}},wv=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Pu=class{component;route;constructor(e,t){this.component=e,this.route=t}};function j8(n,e,t){let r=n._root,i=e?e._root:null;return Mf(r,i,t,[r.value])}function B8(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function Bu(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!vI(n)?n:e.get(n):r}function Mf(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=Nu(e);return n.children.forEach(o=>{$8(o,s[o.value.outlet],t,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>Ff(a,t.getContext(o),i)),i}function $8(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let c=H8(o,s,s.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new wv(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?Mf(n,e,a?a.children:null,r,i):Mf(n,e,t,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Pu(a.outlet.component,o))}else o&&Ff(e,a,i),i.canActivateChecks.push(new wv(r)),s.component?Mf(n,null,a?a.children:null,r,i):Mf(n,null,t,r,i);return i}function H8(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!Nc(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Nc(n.url,e.url)||!Vi(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Xb(n,e)||!Vi(n.queryParams,e.queryParams);case"paramsChange":default:return!Xb(n,e)}}function Ff(n,e,t){let r=Nu(n),i=n.value;Object.entries(r).forEach(([s,o])=>{i.component?e?Ff(o,e.children.getContext(s),t):Ff(o,null,t):Ff(o,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new Pu(e.outlet.component,i)):t.canDeactivateChecks.push(new Pu(null,i)):t.canDeactivateChecks.push(new Pu(null,i))}function Wf(n){return typeof n=="function"}function q8(n){return typeof n=="boolean"}function z8(n){return n&&Wf(n.canLoad)}function G8(n){return n&&Wf(n.canActivate)}function W8(n){return n&&Wf(n.canActivateChild)}function K8(n){return n&&Wf(n.canDeactivate)}function Q8(n){return n&&Wf(n.canMatch)}function zP(n){return n instanceof hs||n?.name==="EmptyError"}var Zy=Symbol("INITIAL_VALUE");function Lu(){return Cr(n=>Zw(n.map(e=>e.pipe(Xn(1),tI(Zy)))).pipe(_e(e=>{for(let t of e)if(t!==!0){if(t===Zy)return Zy;if(t===!1||Y8(t))return t}return!0}),Qr(e=>e!==Zy),Xn(1)))}function Y8(n){return Xo(n)||n instanceof Vu}function GP(n){return n.aborted?de(void 0).pipe(Xn(1)):new Le(e=>{let t=()=>{e.next(),e.complete()};return n.addEventListener("abort",t),()=>n.removeEventListener("abort",t)})}function WP(n){return Vh(GP(n))}function J8(n,e){return Pn(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return o.length===0&&s.length===0?de(ie(B({},t),{guardsResult:!0})):X8(o,r,i,n).pipe(Pn(a=>a&&q8(a)?Z8(r,s,n,e):de(a)),_e(a=>ie(B({},t),{guardsResult:a})))})}function X8(n,e,t,r){return Ne(n).pipe(Pn(i=>iH(i.component,i.route,t,e,r)),ps(i=>i!==!0,!0))}function Z8(n,e,t,r){return Ne(e).pipe(Fh(i=>iu(tH(i.route.parent,r),eH(i.route,r),rH(n,i.path,t),nH(n,i.route,t))),ps(i=>i!==!0,!0))}function eH(n,e){return n!==null&&e&&e(new pv(n)),de(!0)}function tH(n,e){return n!==null&&e&&e(new hv(n)),de(!0)}function nH(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return de(!0);let i=r.map(s=>Oh(()=>{let o=Uu(e)??t,a=Bu(s,o),c=G8(a)?a.canActivate(e,n):an(o,()=>a(e,n));return Fc(c).pipe(ps())}));return de(i).pipe(Lu())}function rH(n,e,t){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>B8(o)).filter(o=>o!==null).map(o=>Oh(()=>{let a=o.guards.map(c=>{let d=Uu(o.node)??t,h=Bu(c,d),p=W8(h)?h.canActivateChild(r,n):an(d,()=>h(r,n));return Fc(p).pipe(ps())});return de(a).pipe(Lu())}));return de(s).pipe(Lu())}function iH(n,e,t,r,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return de(!0);let o=s.map(a=>{let c=Uu(e)??i,d=Bu(a,c),h=K8(d)?d.canDeactivate(n,e,t,r):an(c,()=>d(n,e,t,r));return Fc(h).pipe(ps())});return de(o).pipe(Lu())}function sH(n,e,t,r,i){let s=e.canLoad;if(s===void 0||s.length===0)return de(!0);let o=s.map(a=>{let c=Bu(a,n),d=z8(c)?c.canLoad(e,t):an(n,()=>c(e,t)),h=Fc(d);return i?h.pipe(WP(i)):h});return de(o).pipe(Lu(),KP(r))}function KP(n){return Gw(mt(e=>{if(typeof e!="boolean")throw _v(n,e)}),_e(e=>e===!0))}function oH(n,e,t,r,i){let s=e.canMatch;if(!s||s.length===0)return de(!0);let o=s.map(a=>{let c=Bu(a,n),d=Q8(c)?c.canMatch(e,t):an(n,()=>c(e,t)),h=Fc(d);return i?h.pipe(WP(i)):h});return de(o).pipe(Lu(),KP(r))}var kc=class QP extends Error{segmentGroup;constructor(e){super(),this.segmentGroup=e||null,Object.setPrototypeOf(this,QP.prototype)}},tC=class YP extends Error{urlTree;constructor(e){super(),this.urlTree=e,Object.setPrototypeOf(this,YP.prototype)}};function aH(n){throw new ae(4e3,!1)}function cH(n){throw HP(!1,zn.GuardRejected)}var lH=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}async lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return r;if(i.numberOfChildren>1||!i.children[Ce])throw aH(`${e.redirectTo}`);i=i.children[Ce]}}async applyRedirectCommands(e,t,r,i,s){let o=await uH(t,i,s);if(o instanceof ii)throw new tC(o);let a=this.applyRedirectCreateUrlTree(o,this.urlSerializer.parse(o),e,r);if(o[0]==="/")throw new tC(a);return a}applyRedirectCreateUrlTree(e,t,r,i){let s=this.createSegmentGroup(e,t.root,r,i);return new ii(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s[0]===":"){let a=s.substring(1);r[i]=t[a]}else r[i]=s}),r}createSegmentGroup(e,t,r,i){let s=this.createSegments(e,t.segments,r,i),o={};return Object.entries(t.children).forEach(([a,c])=>{o[a]=this.createSegmentGroup(e,c,r,i)}),new Ze(s,o)}createSegments(e,t,r,i){return t.map(s=>s.path[0]===":"?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new ae(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}};function uH(n,e,t){if(typeof n=="string")return Promise.resolve(n);let r=n,{queryParams:i,fragment:s,routeConfig:o,url:a,outlet:c,params:d,data:h,title:p}=e;return rv(Fc(an(t,()=>r({params:d,data:h,queryParams:i,fragment:s,routeConfig:o,url:a,outlet:c,title:p}))))}var nC={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function dH(n,e,t,r,i,s){let o=JP(n,e,t);return o.matched?(r=N8(e,r),oH(r,e,t,i,s).pipe(_e(a=>a===!0?o:B({},nC)))):de(o)}function JP(n,e,t){if(e.path==="**")return hH(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?B({},nC):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||IP)(t,n,e);if(!i)return B({},nC);let s={};Object.entries(i.posParams??{}).forEach(([a,c])=>{s[a]=c.path});let o=i.consumed.length>0?B(B({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function hH(n){return{matched:!0,parameters:n.length>0?bP(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function vP(n,e,t,r){return t.length>0&&gH(n,t,r)?{segmentGroup:new Ze(e,pH(r,new Ze(t,n.children))),slicedSegments:[]}:t.length===0&&mH(n,t,r)?{segmentGroup:new Ze(n.segments,fH(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new Ze(n.segments,n.children),slicedSegments:t}}function fH(n,e,t,r){let i={};for(let s of t)if(bv(n,e,s)&&!r[ri(s)]){let o=new Ze([],{});i[ri(s)]=o}return B(B({},r),i)}function pH(n,e){let t={};t[Ce]=e;for(let r of n)if(r.path===""&&ri(r)!==Ce){let i=new Ze([],{});t[ri(r)]=i}return t}function gH(n,e,t){return t.some(r=>bv(n,e,r)&&ri(r)!==Ce)}function mH(n,e,t){return t.some(r=>bv(n,e,r))}function bv(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function yH(n,e,t){return e.length===0&&!n.children[t]}var vH=class{};async function _H(n,e,t,r,i,s,o="emptyOnly",a){return new IH(n,e,t,r,i,o,s,a).recognize()}var wH=31,IH=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;abortSignal;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,r,i,s,o,a,c){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.abortSignal=c,this.applyRedirects=new lH(this.urlSerializer,this.urlTree)}noMatchError(e){return new ae(4002,`'${e.segmentGroup}'`)}async recognize(){let e=vP(this.urlTree.root,[],[],this.config).segmentGroup,{children:t,rootSnapshot:r}=await this.match(e),i=new gr(r,t),s=new $f("",i),o=MP(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}async match(e){let t=new Mc([],Object.freeze({}),Object.freeze(B({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),Ce,this.rootComponentType,null,{});try{return{children:await this.processSegmentGroup(this.injector,this.config,e,Ce,t),rootSnapshot:t}}catch(r){if(r instanceof tC)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof kc?this.noMatchError(r):r}}async processSegmentGroup(e,t,r,i,s){if(r.segments.length===0&&r.hasChildren())return this.processChildren(e,t,r,s);let o=await this.processSegment(e,t,r,r.segments,i,!0,s);return o instanceof gr?[o]:[]}async processChildren(e,t,r,i){let s=[];for(let c of Object.keys(r.children))c==="primary"?s.unshift(c):s.push(c);let o=[];for(let c of s){let d=r.children[c],h=M8(t,c),p=await this.processSegmentGroup(e,h,d,c,i);o.push(...p)}let a=XP(o);return EH(a),a}async processSegment(e,t,r,i,s,o,a){for(let c of t)try{return await this.processSegmentAgainstRoute(c._injector??e,t,c,r,i,s,o,a)}catch(d){if(d instanceof kc||zP(d))continue;throw d}if(yH(r,i,s))return new vH;throw new kc(r)}async processSegmentAgainstRoute(e,t,r,i,s,o,a,c){if(ri(r)!==o&&(o===Ce||!bv(i,s,r)))throw new kc(i);if(r.redirectTo===void 0)return this.matchSegmentAgainstRoute(e,i,r,s,o,c);if(this.allowRedirects&&a)return this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,s,o,c);throw new kc(i)}async expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o,a){let{matched:c,parameters:d,consumedSegments:h,positionalParamSegments:p,remainingSegments:y}=JP(t,i,s);if(!c)throw new kc(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>wH&&(this.allowRedirects=!1));let E=new Mc(s,d,Object.freeze(B({},this.urlTree.queryParams)),this.urlTree.fragment,_P(i),ri(i),i.component??i._loadedComponent??null,i,wP(i)),k=vv(E,a,this.paramsInheritanceStrategy);if(E.params=Object.freeze(k.params),E.data=Object.freeze(k.data),this.abortSignal.aborted)throw new Error(this.abortSignal.reason);let P=await this.applyRedirects.applyRedirectCommands(h,i.redirectTo,p,E,e),M=await this.applyRedirects.lineralizeSegments(i,P);return this.processSegment(e,r,t,M.concat(y),o,!1,a)}async matchSegmentAgainstRoute(e,t,r,i,s,o){if(this.abortSignal.aborted)throw new Error(this.abortSignal.reason);let a=await rv(dH(t,r,i,e,this.urlSerializer,this.abortSignal));if(r.path==="**"&&(t.children={}),!a?.matched)throw new kc(t);e=r._injector??e;let{routes:c}=await this.getChildConfig(e,r,i),d=r._loadedInjector??e,{parameters:h,consumedSegments:p,remainingSegments:y}=a,E=new Mc(p,h,Object.freeze(B({},this.urlTree.queryParams)),this.urlTree.fragment,_P(r),ri(r),r.component??r._loadedComponent??null,r,wP(r)),k=vv(E,o,this.paramsInheritanceStrategy);E.params=Object.freeze(k.params),E.data=Object.freeze(k.data);let{segmentGroup:P,slicedSegments:M}=vP(t,p,y,c);if(M.length===0&&P.hasChildren()){let ee=await this.processChildren(d,c,P,E);return new gr(E,ee)}if(c.length===0&&M.length===0)return new gr(E,[]);let H=ri(r)===s,Y=await this.processSegment(d,c,P,M,H?Ce:s,!0,E);return new gr(E,Y instanceof gr?[Y]:[])}async getChildConfig(e,t,r){if(t.children)return{routes:t.children,injector:e};if(t.loadChildren){if(t._loadedRoutes!==void 0)return{routes:t._loadedRoutes,injector:t._loadedInjector};if(this.abortSignal.aborted)throw new Error(this.abortSignal.reason);if(await rv(sH(e,t,r,this.urlSerializer,this.abortSignal))){let s=await this.configLoader.loadChildren(e,t);return t._loadedRoutes=s.routes,t._loadedInjector=s.injector,s}throw cH(t)}return{routes:[],injector:e}}};function EH(n){n.sort((e,t)=>e.value.outlet===Ce?-1:t.value.outlet===Ce?1:e.value.outlet.localeCompare(t.value.outlet))}function bH(n){let e=n.value.routeConfig;return e&&e.path===""}function XP(n){let e=[],t=new Set;for(let r of n){if(!bH(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=XP(r.children);e.push(new gr(r.value,i))}return e.filter(r=>!t.has(r))}function _P(n){return n.data||{}}function wP(n){return n.resolve||{}}var CH=new ce("",{factory:()=>_H});function TH(n,e,t,r,i,s,o){let a=n.get(CH);return Pn(c=>de(c).pipe(Cr(d=>a(n,e,t,r,d.extractedUrl,i,s,o)),_e(({state:d,tree:h})=>ie(B({},c),{targetSnapshot:d,urlAfterRedirects:h}))))}function SH(n,e){return Pn(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return de(t);let s=new Set(i.map(c=>c.route)),o=new Set;for(let c of s)if(!o.has(c))for(let d of ZP(c))o.add(d);let a=0;return Ne(o).pipe(Fh(c=>s.has(c)?DH(c,r,n,e):(c.data=vv(c,c.parent,n).resolve,de(void 0))),mt(()=>a++),wm(1),Pn(c=>a===o.size?de(t):Yn))})}function ZP(n){let e=n.children.map(t=>ZP(t)).flat();return[n,...e]}function DH(n,e,t,r){let i=n.routeConfig,s=n._resolve;return i?.title!==void 0&&!jP(i)&&(s[qf]=i.title),Oh(()=>(n.data=vv(n,n.parent,t).resolve,AH(s,n,e,r).pipe(_e(o=>(n._resolvedData=o,n.data=B(B({},n.data),o),null)))))}function AH(n,e,t,r){let i=Gb(n);if(i.length===0)return de({});let s={};return Ne(i).pipe(Pn(o=>xH(n[o],e,t,r).pipe(ps(),mt(a=>{if(a instanceof Vu)throw _v(new Jo,a);s[o]=a}))),wm(1),_e(()=>s),fs(o=>zP(o)?Yn:Ei(o)))}function xH(n,e,t,r){let i=Uu(e)??r,s=Bu(n,i),o=s.resolve?s.resolve(e,t):an(i,()=>s(e,t));return Fc(o)}function qb(n){return Cr(e=>{let t=n(e);return t?Ne(t).pipe(_e(()=>e)):de(e)})}var oC=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===Ce);return r}getResolvedTitleForRoute(t){return t.data[qf]}static \u0275fac=function(r){return new(r||n)};static \u0275prov=se({token:n,factory:()=>j(eO),providedIn:"root"})}return n})(),eO=(()=>{class n extends oC{title;constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||n)(Me(hP))};static \u0275prov=se({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),$u=new ce("",{factory:()=>({})}),Kf=new ce(""),tO=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=j(Cb);async loadComponent(t,r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return Promise.resolve(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=(async()=>{try{let s=await CP(an(t,()=>r.loadComponent())),o=await iO(rO(s));return this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=o,o}finally{this.componentLoaders.delete(r)}})();return this.componentLoaders.set(r,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Promise.resolve({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let i=(async()=>{try{let s=await nO(r,this.compiler,t,this.onLoadEndListener);return r._loadedRoutes=s.routes,r._loadedInjector=s.injector,s}finally{this.childrenLoaders.delete(r)}})();return this.childrenLoaders.set(r,i),i}static \u0275fac=function(r){return new(r||n)};static \u0275prov=se({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();async function nO(n,e,t,r){let i=await CP(an(t,()=>n.loadChildren())),s=await iO(rO(i)),o;s instanceof Py||Array.isArray(s)?o=s:o=await e.compileModuleAsync(s),r&&r(n);let a,c,d=!1;return Array.isArray(o)?(c=o,d=!0):(a=o.create(t).injector,c=a.get(Kf,[],{optional:!0,self:!0}).flat()),{routes:c.map(sC),injector:a}}function RH(n){return n&&typeof n=="object"&&"default"in n}function rO(n){return RH(n)?n.default:n}async function iO(n){return n}var Cv=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=se({token:n,factory:()=>j(kH),providedIn:"root"})}return n})(),kH=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static \u0275fac=function(r){return new(r||n)};static \u0275prov=se({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),sO=new ce("");var NH=()=>{},oO=new ce(""),aO=(()=>{class n{currentNavigation=Ee(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=Ee(null);events=new gt;transitionAbortWithErrorSubject=new gt;configLoader=j(tO);environmentInjector=j(Lt);destroyRef=j(xr);urlSerializer=j(zf);rootContexts=j(ju);location=j(ku);inputBindingEnabled=j(Ev,{optional:!0})!==null;titleStrategy=j(oC);options=j($u,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=j(Cv);createViewTransition=j(sO,{optional:!0});navigationErrorHandler=j(oO,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>de(void 0);rootComponentType=null;destroyed=!1;constructor(){let t=i=>this.events.next(new uv(i)),r=i=>this.events.next(new dv(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;ln(()=>{this.transitions?.next(ie(B({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,id:r}))})}setupNavigations(t){return this.transitions=new dt(null),this.transitions.pipe(Qr(r=>r!==null),Cr(r=>{let i=!1,s=new AbortController;return de(r).pipe(Cr(o=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",zn.SupersededByNewNavigation),Yn;this.currentTransition=r;let a=this.lastSuccessfulNavigation();this.currentNavigation.set({id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,targetBrowserUrl:typeof o.extras.browserUrl=="string"?this.urlSerializer.parse(o.extras.browserUrl):o.extras.browserUrl,trigger:o.source,extras:o.extras,previousNavigation:a?ie(B({},a),{previousNavigation:null}):null,abort:()=>s.abort()});let c=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),d=o.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!c&&d!=="reload")return this.events.next(new As(o.id,this.urlSerializer.serialize(o.rawUrl),"",Lf.IgnoredSameUrlNavigation)),o.resolve(!1),Yn;if(this.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return de(o).pipe(Cr(h=>(this.events.next(new Oc(h.id,this.urlSerializer.serialize(h.extractedUrl),h.source,h.restoredState)),h.id!==this.navigationId?Yn:Promise.resolve(h))),TH(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy,s.signal),mt(h=>{r.targetSnapshot=h.targetSnapshot,r.urlAfterRedirects=h.urlAfterRedirects,this.currentNavigation.update(y=>(y.finalUrl=h.urlAfterRedirects,y));let p=new Uf(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(p)}));if(c&&this.urlHandlingStrategy.shouldProcessUrl(o.currentRawUrl)){let{id:h,extractedUrl:p,source:y,restoredState:E,extras:k}=o,P=new Oc(h,this.urlSerializer.serialize(p),y,E);this.events.next(P);let M=LP(this.rootComponentType).snapshot;return this.currentTransition=r=ie(B({},o),{targetSnapshot:M,urlAfterRedirects:p,extras:ie(B({},k),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update(H=>(H.finalUrl=p,H)),de(r)}else return this.events.next(new As(o.id,this.urlSerializer.serialize(o.extractedUrl),"",Lf.IgnoredByUrlHandlingStrategy)),o.resolve(!1),Yn}),mt(o=>{let a=new ov(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(a)}),_e(o=>(this.currentTransition=r=ie(B({},o),{guards:j8(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),r)),J8(this.environmentInjector,o=>this.events.next(o)),mt(o=>{if(r.guardsResult=o.guardsResult,o.guardsResult&&typeof o.guardsResult!="boolean")throw _v(this.urlSerializer,o.guardsResult);let a=new av(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(a)}),Qr(o=>o.guardsResult?!0:(this.cancelNavigationTransition(o,"",zn.GuardRejected),!1)),qb(o=>{if(o.guards.canActivateChecks.length!==0)return de(o).pipe(mt(a=>{let c=new cv(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(c)}),Cr(a=>{let c=!1;return de(a).pipe(SH(this.paramsInheritanceStrategy,this.environmentInjector),mt({next:()=>c=!0,complete:()=>{c||this.cancelNavigationTransition(a,"",zn.NoDataFromResolver)}}))}),mt(a=>{let c=new lv(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(c)}))}),qb(o=>{let a=d=>{let h=[];if(d.routeConfig?._loadedComponent)d.component=d.routeConfig?._loadedComponent;else if(d.routeConfig?.loadComponent){let p=Uu(d)??this.environmentInjector;h.push(this.configLoader.loadComponent(p,d.routeConfig).then(y=>{d.component=y}))}for(let p of d.children)h.push(...a(p));return h},c=a(o.targetSnapshot.root);return c.length===0?de(o):Ne(Promise.all(c).then(()=>o))}),qb(()=>this.afterPreactivation()),Cr(()=>{let{currentSnapshot:o,targetSnapshot:a}=r,c=this.createViewTransition?.(this.environmentInjector,o.root,a.root);return c?Ne(c).pipe(_e(()=>r)):de(r)}),_e(o=>{let a=O8(t.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return this.currentTransition=r=ie(B({},o),{targetRouterState:a}),this.currentNavigation.update(c=>(c.targetRouterState=a,c)),r}),mt(()=>{this.events.next(new jf)}),U8(this.rootContexts,t.routeReuseStrategy,o=>this.events.next(o),this.inputBindingEnabled),Xn(1),Vh(GP(s.signal).pipe(Qr(()=>!i&&!r.targetRouterState),mt(()=>{this.cancelNavigationTransition(r,s.signal.reason+"",zn.Aborted)}))),mt({next:o=>{i=!0,this.currentNavigation.update(a=>(a.abort=NH,a)),this.lastSuccessfulNavigation.set(ln(this.currentNavigation)),this.events.next(new si(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects))),this.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{i=!0}}),Vh(this.transitionAbortWithErrorSubject.pipe(mt(o=>{throw o}))),su(()=>{s.abort(),i||this.cancelNavigationTransition(r,"",zn.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),fs(o=>{if(this.destroyed)return r.resolve(!1),Yn;if(i=!0,qP(o))this.events.next(new Li(r.id,this.urlSerializer.serialize(r.extractedUrl),o.message,o.cancellationCode)),L8(o)?this.events.next(new Fu(o.url,o.navigationBehaviorOptions)):r.resolve(!1);else{let a=new Ou(r.id,this.urlSerializer.serialize(r.extractedUrl),o,r.targetSnapshot??void 0);try{let c=an(this.environmentInjector,()=>this.navigationErrorHandler?.(a));if(c instanceof Vu){let{message:d,cancellationCode:h}=_v(this.urlSerializer,c);this.events.next(new Li(r.id,this.urlSerializer.serialize(r.extractedUrl),d,h)),this.events.next(new Fu(c.redirectTo,c.navigationBehaviorOptions))}else throw this.events.next(a),o}catch(c){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(c)}}return Yn}))}))}cancelNavigationTransition(t,r,i){let s=new Li(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(s),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=ln(this.currentNavigation),i=r?.targetBrowserUrl??r?.extractedUrl;return t.toString()!==i?.toString()&&!r?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||n)};static \u0275prov=se({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function MH(n){return n!==Of}var cO=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=se({token:n,factory:()=>j(PH),providedIn:"root"})}return n})(),Iv=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},PH=(()=>{class n extends Iv{static \u0275fac=(()=>{let t;return function(i){return(t||(t=bs(n)))(i||n)}})();static \u0275prov=se({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),aC=(()=>{class n{urlSerializer=j(zf);options=j($u,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=j(ku);urlHandlingStrategy=j(Cv);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new ii;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:t,initialUrl:r,targetBrowserUrl:i}){let s=t!==void 0?this.urlHandlingStrategy.merge(t,r):r,o=i??s;return o instanceof ii?this.urlSerializer.serialize(o):o}commitTransition({targetRouterState:t,finalUrl:r,initialUrl:i}){r&&t?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=t):this.rawUrlTree=i}routerState=LP(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:t}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t??this.rawUrlTree)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=se({token:n,factory:()=>j(lO),providedIn:"root"})}return n})(),lO=(()=>{class n extends aC{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{t(r.url,r.state,"popstate")})})}handleRouterEvent(t,r){t instanceof Oc?this.updateStateMemento():t instanceof As?this.commitTransition(r):t instanceof Uf?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof jf?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof Li&&t.code!==zn.SupersededByNewNavigation&&t.code!==zn.Redirect?this.restoreHistory(r):t instanceof Ou?this.restoreHistory(r,!0):t instanceof si&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,{extras:r,id:i}){let{replaceUrl:s,state:o}=r;if(this.location.isCurrentPathEqualTo(t)||s){let a=this.browserPageId,c=B(B({},o),this.generateNgRouterState(i,a));this.location.replaceState(t,"",c)}else{let a=B(B({},o),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(t,"",a)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,s=this.currentPageId-i;s!==0?this.location.historyGo(s):this.getCurrentUrlTree()===t.finalUrl&&s===0&&(this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=bs(n)))(i||n)}})();static \u0275prov=se({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function cC(n,e){n.events.pipe(Qr(t=>t instanceof si||t instanceof Li||t instanceof Ou||t instanceof As),_e(t=>t instanceof si||t instanceof As?0:(t instanceof Li?t.code===zn.Redirect||t.code===zn.SupersededByNewNavigation:!1)?2:1),Qr(t=>t!==2),Xn(1)).subscribe(()=>{e()})}var OH={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},FH={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Hu=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=j(gb);stateManager=j(aC);options=j($u,{optional:!0})||{};pendingTasks=j(Is);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=j(aO);urlSerializer=j(zf);location=j(ku);urlHandlingStrategy=j(Cv);injector=j(Lt);_events=new gt;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=j(cO);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=j(Kf,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!j(Ev,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new sn;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,s=ln(this.navigationTransitions.currentNavigation);if(i!==null&&s!==null){if(this.stateManager.handleRouterEvent(r,s),r instanceof Li&&r.code!==zn.Redirect&&r.code!==zn.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof si)this.navigated=!0;else if(r instanceof Fu){let o=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c=B({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||MH(i.source)},o);this.scheduleNavigation(a,Of,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}k8(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Of,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r,i)=>{this.navigateToSyncWithBrowser(t,i,r)})}navigateToSyncWithBrowser(t,r,i){let s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){let c=B({},i);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(s.state=c)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,o,s).catch(c=>{this.disposed||this.injector.get(hr)(c)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return ln(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(sC),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:c}=r,d=c?this.currentUrlTree.fragment:o,h=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":h=B(B({},this.currentUrlTree.queryParams),s);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=s||null}h!==null&&(h=this.removeEmptyProps(h));let p;try{let y=i?i.snapshot:this.routerState.snapshot.root;p=PP(y)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),p=this.currentUrlTree.root}return OP(p,t,h,d??null,this.urlSerializer)}navigateByUrl(t,r={skipLocationChange:!1}){let i=Xo(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,Of,null,r)}navigate(t,r={skipLocationChange:!1}){return VH(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.console.warn(cu(4018,!1)),this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=B({},OH):r===!1?i=B({},FH):i=r,Xo(t))return fP(this.currentUrlTree,t,i);let s=this.parseUrl(t);return fP(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,s])=>(s!=null&&(r[i]=s),r),{})}scheduleNavigation(t,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let a,c,d;o?(a=o.resolve,c=o.reject,d=o.promise):d=new Promise((p,y)=>{a=p,c=y});let h=this.pendingTasks.add();return cC(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:s,resolve:a,reject:c,promise:d,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),d.catch(p=>Promise.reject(p))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=se({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function VH(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new ae(4008,!1)}var qu=(()=>{class n{router;route;tabIndexAttribute;renderer;el;locationStrategy;reactiveHref=Ee(null);get href(){return ln(this.reactiveHref)}set href(t){this.reactiveHref.set(t)}target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new gt;applicationErrorHandler=j(hr);options=j($u,{optional:!0});constructor(t,r,i,s,o,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=s,this.el=o,this.locationStrategy=a,this.reactiveHref.set(j(new Uy("href"),{optional:!0}));let c=o.nativeElement.tagName?.toLowerCase();this.isAnchorElement=c==="a"||c==="area"||!!(typeof customElements=="object"&&customElements.get(c)?.observedAttributes?.includes?.("href")),this.isAnchorElement?this.setTabIndexIfNotOnNativeEl("0"):this.subscribeToNavigationEventsIfNecessary()}subscribeToNavigationEventsIfNecessary(){if(this.subscription!==void 0||!this.isAnchorElement)return;let t=this.preserveFragment,r=i=>i==="merge"||i==="preserve";t||=r(this.queryParamsHandling),t||=!this.queryParamsHandling&&!r(this.options?.defaultQueryParamsHandling),t&&(this.subscription=this.router.events.subscribe(i=>{i instanceof si&&this.updateHref()}))}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&(this.updateHref(),this.subscribeToNavigationEventsIfNecessary()),this.onChanges.next(this)}routerLinkInput=null;set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(Xo(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,r,i,s,o){let a=this.urlTree;if(a===null||this.isAnchorElement&&(t!==0||r||i||s||o||typeof this.target=="string"&&this.target!="_self"))return!0;let c={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,c)?.catch(d=>{this.applicationErrorHandler(d)}),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.reactiveHref.set(t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t))??"":null)}applyAttributeValue(t,r){let i=this.renderer,s=this.el.nativeElement;r!==null?i.setAttribute(s,t,r):i.removeAttribute(s,t)}get urlTree(){return this.routerLinkInput===null?null:Xo(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||n)(Ue(Hu),Ue(xs),uf("tabindex"),Ue(Fi),Ue(Zn),Ue(Ru))};static \u0275dir=Sn({type:n,selectors:[["","routerLink",""]],hostVars:2,hostBindings:function(r,i){r&1&&Q("click",function(o){return i.onClick(o.button,o.ctrlKey,o.shiftKey,o.altKey,o.metaKey)}),r&2&&pf("href",i.reactiveHref(),XE)("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",xu],skipLocationChange:[2,"skipLocationChange","skipLocationChange",xu],replaceUrl:[2,"replaceUrl","replaceUrl",xu],routerLink:"routerLink"},features:[Es]})}return n})(),lC=(()=>{class n{router;element;renderer;cdr;links;classes=[];routerEventsSubscription;linkInputChangesSubscription;_isActive=!1;get isActive(){return this._isActive}routerLinkActiveOptions={exact:!1};ariaCurrentWhenActive;isActiveChange=new Dt;link=j(qu,{optional:!0});constructor(t,r,i,s){this.router=t,this.element=r,this.renderer=i,this.cdr=s,this.routerEventsSubscription=t.events.subscribe(o=>{o instanceof si&&this.update()})}ngAfterContentInit(){de(this.links.changes,de(null)).pipe(ru()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();let t=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=Ne(t).pipe(ru()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(t){let r=Array.isArray(t)?t:t.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(t){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{let t=this.hasActiveLinks();this.classes.forEach(r=>{t?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),t&&this.ariaCurrentWhenActive!==void 0?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==t&&(this._isActive=t,this.cdr.markForCheck(),this.isActiveChange.emit(t))})}isLinkActive(t){let r=UH(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>{let s=i.urlTree;return s?t.isActive(s,r):!1}}hasActiveLinks(){let t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.links.some(t)}static \u0275fac=function(r){return new(r||n)(Ue(Hu),Ue(Zn),Ue(Fi),Ue(Ko))};static \u0275dir=Sn({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(r,i,s){if(r&1&&Fy(s,qu,5),r&2){let o;Ib(o=Eb())&&(i.links=o)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[Es]})}return n})();function UH(n){return!!n.paths}var jH=new ce("");function uC(n,...e){return lr([{provide:Kf,multi:!0,useValue:n},[],{provide:xs,useFactory:BH},{provide:Oy,multi:!0,useFactory:$H},e.map(t=>t.\u0275providers)])}function BH(){return j(Hu).routerState.root}function $H(){let n=j(Mt);return e=>{let t=n.get(Wo);if(e!==t.components[0])return;let r=n.get(Hu),i=n.get(HH);n.get(qH)===1&&r.initialNavigation(),n.get(zH,null,{optional:!0})?.setUpPreloading(),n.get(jH,null,{optional:!0})?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var HH=new ce("",{factory:()=>new gt}),qH=new ce("",{factory:()=>1});var zH=new ce("");var uO=()=>{};var fO=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},GH=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=n[t++],o=n[t++],a=n[t++],c=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let s=n[t++],o=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},Tv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let s=n[i],o=i+1<n.length,a=o?n[i+1]:0,c=i+2<n.length,d=c?n[i+2]:0,h=s>>2,p=(s&3)<<4|a>>4,y=(a&15)<<2|d>>6,E=d&63;c||(E=64,o||(y=64)),r.push(t[h],t[p],t[y],t[E])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(fO(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):GH(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let s=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let d=i<n.length?t[n.charAt(i)]:64;++i;let p=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||a==null||d==null||p==null)throw new hC;let y=s<<2|a>>4;if(r.push(y),d!==64){let E=a<<4&240|d>>2;if(r.push(E),p!==64){let k=d<<6&192|p;r.push(k)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},hC=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},WH=function(n){let e=fO(n);return Tv.encodeByteArray(e,!0)},Yf=function(n){return WH(n).replace(/\./g,"")},Sv=function(n){try{return Tv.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function pC(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var KH=()=>pC().__FIREBASE_DEFAULTS__,QH=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},YH=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&Sv(n[1]);return e&&JSON.parse(e)},Dv=()=>{try{return uO()||KH()||QH()||YH()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},gC=n=>{var e,t;return(t=(e=Dv())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},pO=n=>{let e=gC(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},mC=()=>{var n;return(n=Dv())===null||n===void 0?void 0:n.config},yC=n=>{var e;return(e=Dv())===null||e===void 0?void 0:e[`_${n}`]};var Vc=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function Zo(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Av(n){return(await fetch(n,{credentials:"include"})).ok}function gO(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Yf(JSON.stringify(t)),Yf(JSON.stringify(o)),""].join(".")}var Qf={};function JH(){let n={prod:[],emulator:[]};for(let e of Object.keys(Qf))Qf[e]?n.emulator.push(e):n.prod.push(e);return n}function XH(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}var dO=!1;function xv(n,e){if(typeof window>"u"||typeof document>"u"||!Zo(window.location.host)||Qf[n]===e||Qf[n]||dO)return;Qf[n]=e;function t(y){return`__firebase__banner__${y}`}let r="__firebase__banner",s=JH().prod.length>0;function o(){let y=document.getElementById(r);y&&y.remove()}function a(y){y.style.display="flex",y.style.background="#7faaf0",y.style.position="fixed",y.style.bottom="5px",y.style.left="5px",y.style.padding=".5em",y.style.borderRadius="5px",y.style.alignItems="center"}function c(y,E){y.setAttribute("width","24"),y.setAttribute("id",E),y.setAttribute("height","24"),y.setAttribute("viewBox","0 0 24 24"),y.setAttribute("fill","none"),y.style.marginLeft="-6px"}function d(){let y=document.createElement("span");return y.style.cursor="pointer",y.style.marginLeft="16px",y.style.fontSize="24px",y.innerHTML=" &times;",y.onclick=()=>{dO=!0,o()},y}function h(y,E){y.setAttribute("id",E),y.innerText="Learn more",y.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",y.setAttribute("target","__blank"),y.style.paddingLeft="5px",y.style.textDecoration="underline"}function p(){let y=XH(r),E=t("text"),k=document.getElementById(E)||document.createElement("span"),P=t("learnmore"),M=document.getElementById(P)||document.createElement("a"),H=t("preprendIcon"),Y=document.getElementById(H)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(y.created){let ee=y.element;a(ee),h(M,P);let De=d();c(Y,H),ee.append(Y,k,M,De),document.body.appendChild(ee)}s?(k.innerText="Preview backend disconnected.",Y.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Y.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,k.innerText="Preview backend running in this workspace."),k.setAttribute("id",E)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}function yn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function mO(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(yn())}function ZH(){var n;let e=(n=Dv())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function yO(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function vO(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function _O(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function wO(){let n=yn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function IO(){return!ZH()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Jf(){try{return typeof indexedDB=="object"}catch{return!1}}function EO(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}var eq="FirebaseError",yr=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=eq,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,oi.prototype.create)}},oi=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?tq(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new yr(i,a,r)}};function tq(n,e){return n.replace(nq,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var nq=/\{\$([^}]+)}/g;function bO(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Ui(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let s=n[i],o=e[i];if(hO(s)&&hO(o)){if(!Ui(s,o))return!1}else if(s!==o)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function hO(n){return n!==null&&typeof n=="object"}function Xf(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function CO(n,e){let t=new fC(n,e);return t.subscribe.bind(t)}var fC=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");rq(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=dC),i.error===void 0&&(i.error=dC),i.complete===void 0&&(i.complete=dC);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function rq(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function dC(){}var xye=14400*1e3;function hn(n){return n&&n._delegate?n._delegate:n}var Gn=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Lc="[DEFAULT]";var vC=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new Vc;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(sq(e))try{this.getOrInitializeService({instanceIdentifier:Lc})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Lc){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){let e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Lc){return this.instances.has(e)}getOptions(e=Lc){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[s,o]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);let o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:iq(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Lc){return this.component?this.component.multipleInstances?e:Lc:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function iq(n){return n===Lc?void 0:n}function sq(n){return n.instantiationMode==="EAGER"}var Rv=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new vC(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var oq=[],Be=(function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n})(Be||{}),aq={debug:Be.DEBUG,verbose:Be.VERBOSE,info:Be.INFO,warn:Be.WARN,error:Be.ERROR,silent:Be.SILENT},cq=Be.INFO,lq={[Be.DEBUG]:"log",[Be.VERBOSE]:"log",[Be.INFO]:"info",[Be.WARN]:"warn",[Be.ERROR]:"error"},uq=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=lq[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},ji=class{constructor(e){this.name=e,this._logLevel=cq,this._logHandler=uq,this._userLogHandler=null,oq.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Be))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?aq[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Be.DEBUG,...e),this._logHandler(this,Be.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Be.VERBOSE,...e),this._logHandler(this,Be.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Be.INFO,...e),this._logHandler(this,Be.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Be.WARN,...e),this._logHandler(this,Be.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Be.ERROR,...e),this._logHandler(this,Be.ERROR,...e)}};var dq=(n,e)=>e.some(t=>n instanceof t),TO,SO;function hq(){return TO||(TO=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function fq(){return SO||(SO=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var DO=new WeakMap,wC=new WeakMap,AO=new WeakMap,_C=new WeakMap,EC=new WeakMap;function pq(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(Bi(n.result)),i()},o=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&DO.set(t,n)}).catch(()=>{}),EC.set(e,n),e}function gq(n){if(wC.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),i()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});wC.set(n,e)}var IC={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return wC.get(n);if(e==="objectStoreNames")return n.objectStoreNames||AO.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Bi(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function xO(n){IC=n(IC)}function mq(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(kv(this),e,...t);return AO.set(r,e.sort?e.sort():[e]),Bi(r)}:fq().includes(n)?function(...e){return n.apply(kv(this),e),Bi(DO.get(this))}:function(...e){return Bi(n.apply(kv(this),e))}}function yq(n){return typeof n=="function"?mq(n):(n instanceof IDBTransaction&&gq(n),dq(n,hq())?new Proxy(n,IC):n)}function Bi(n){if(n instanceof IDBRequest)return pq(n);if(_C.has(n))return _C.get(n);let e=yq(n);return e!==n&&(_C.set(n,e),EC.set(e,n)),e}var kv=n=>EC.get(n);function Nv(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){let o=indexedDB.open(n,e),a=Bi(o);return r&&o.addEventListener("upgradeneeded",c=>{r(Bi(o.result),c.oldVersion,c.newVersion,Bi(o.transaction),c)}),t&&o.addEventListener("blocked",c=>t(c.oldVersion,c.newVersion,c)),a.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),a}var vq=["get","getKey","getAll","getAllKeys","count"],_q=["put","add","delete","clear"],bC=new Map;function RO(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(bC.get(e))return bC.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=_q.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||vq.includes(t)))return;let s=async function(o,...a){let c=this.transaction(o,i?"readwrite":"readonly"),d=c.store;return r&&(d=d.index(a.shift())),(await Promise.all([d[t](...a),i&&c.done]))[0]};return bC.set(e,s),s}xO(n=>ie(B({},n),{get:(e,t,r)=>RO(e,t)||n.get(e,t,r),has:(e,t)=>!!RO(e,t)||n.has(e,t)}));var TC=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(wq(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function wq(n){let e=n.getComponent();return e?.type==="VERSION"}var SC="@firebase/app",kO="0.13.2";var Rs=new ji("@firebase/app"),Iq="@firebase/app-compat",Eq="@firebase/analytics-compat",bq="@firebase/analytics",Cq="@firebase/app-check-compat",Tq="@firebase/app-check",Sq="@firebase/auth",Dq="@firebase/auth-compat",Aq="@firebase/database",xq="@firebase/data-connect",Rq="@firebase/database-compat",kq="@firebase/functions",Nq="@firebase/functions-compat",Mq="@firebase/installations",Pq="@firebase/installations-compat",Oq="@firebase/messaging",Fq="@firebase/messaging-compat",Vq="@firebase/performance",Lq="@firebase/performance-compat",Uq="@firebase/remote-config",jq="@firebase/remote-config-compat",Bq="@firebase/storage",$q="@firebase/storage-compat",Hq="@firebase/firestore",qq="@firebase/ai",zq="@firebase/firestore-compat",Gq="firebase",Wq="11.10.0";var DC="[DEFAULT]",Kq={[SC]:"fire-core",[Iq]:"fire-core-compat",[bq]:"fire-analytics",[Eq]:"fire-analytics-compat",[Tq]:"fire-app-check",[Cq]:"fire-app-check-compat",[Sq]:"fire-auth",[Dq]:"fire-auth-compat",[Aq]:"fire-rtdb",[xq]:"fire-data-connect",[Rq]:"fire-rtdb-compat",[kq]:"fire-fn",[Nq]:"fire-fn-compat",[Mq]:"fire-iid",[Pq]:"fire-iid-compat",[Oq]:"fire-fcm",[Fq]:"fire-fcm-compat",[Vq]:"fire-perf",[Lq]:"fire-perf-compat",[Uq]:"fire-rc",[jq]:"fire-rc-compat",[Bq]:"fire-gcs",[$q]:"fire-gcs-compat",[Hq]:"fire-fst",[zq]:"fire-fst-compat",[qq]:"fire-vertex","fire-js":"fire-js",[Gq]:"fire-js-all"};var Zf=new Map,Qq=new Map,AC=new Map;function NO(n,e){try{n.container.addComponent(e)}catch(t){Rs.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function ai(n){let e=n.name;if(AC.has(e))return Rs.debug(`There were multiple attempts to register component ${e}.`),!1;AC.set(e,n);for(let t of Zf.values())NO(t,n);for(let t of Qq.values())NO(t,n);return!0}function zu(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Nr(n){return n==null?!1:n.settings!==void 0}var Yq={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ea=new oi("app","Firebase",Yq);var xC=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Gn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ea.create("app-deleted",{appName:this._name})}};var ta=Wq;function NC(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:DC,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw ea.create("bad-app-name",{appName:String(i)});if(t||(t=mC()),!t)throw ea.create("no-options");let s=Zf.get(i);if(s){if(Ui(t,s.options)&&Ui(r,s.config))return s;throw ea.create("duplicate-app",{appName:i})}let o=new Rv(i);for(let c of AC.values())o.addComponent(c);let a=new xC(t,r,o);return Zf.set(i,a),a}function Uc(n=DC){let e=Zf.get(n);if(!e&&n===DC&&mC())return NC();if(!e)throw ea.create("no-app",{appName:n});return e}function Mv(){return Array.from(Zf.values())}function xt(n,e,t){var r;let i=(r=Kq[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Rs.warn(a.join(" "));return}ai(new Gn(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var Jq="firebase-heartbeat-database",Xq=1,ep="firebase-heartbeat-store",CC=null;function FO(){return CC||(CC=Nv(Jq,Xq,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(ep)}catch(t){console.warn(t)}}}}).catch(n=>{throw ea.create("idb-open",{originalErrorMessage:n.message})})),CC}async function Zq(n){try{let t=(await FO()).transaction(ep),r=await t.objectStore(ep).get(VO(n));return await t.done,r}catch(e){if(e instanceof yr)Rs.warn(e.message);else{let t=ea.create("idb-get",{originalErrorMessage:e?.message});Rs.warn(t.message)}}}async function MO(n,e){try{let r=(await FO()).transaction(ep,"readwrite");await r.objectStore(ep).put(e,VO(n)),await r.done}catch(t){if(t instanceof yr)Rs.warn(t.message);else{let r=ea.create("idb-set",{originalErrorMessage:t?.message});Rs.warn(r.message)}}}function VO(n){return`${n.name}!${n.options.appId}`}var ez=1024,tz=30,RC=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new kC(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=PO();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>tz){let o=rz(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Rs.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=PO(),{heartbeatsToSend:r,unsentEntries:i}=nz(this._heartbeatsCache.heartbeats),s=Yf(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return Rs.warn(t),""}}};function PO(){return new Date().toISOString().substring(0,10)}function nz(n,e=ez){let t=[],r=n.slice();for(let i of n){let s=t.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),OO(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),OO(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var kC=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Jf()?EO().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){let t=await Zq(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){let i=await this.read();return MO(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){let i=await this.read();return MO(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}};function OO(n){return Yf(JSON.stringify({version:2,heartbeats:n})).length}function rz(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function iz(n){ai(new Gn("platform-logger",e=>new TC(e),"PRIVATE")),ai(new Gn("heartbeat",e=>new RC(e),"PRIVATE")),xt(SC,kO,n),xt(SC,kO,"esm2017"),xt("fire-js","")}iz("");var sz="firebase",oz="11.10.0";xt(sz,oz,"app");function LO(n){n===void 0&&(n=j(Mt));let e=n.get(gu);return t=>new Le(r=>{let i=e.add(),s=!1;function o(){s||(i(),s=!0)}let a=t.subscribe({next:c=>{r.next(c),o()},complete:()=>{r.complete(),o()},error:c=>{r.error(c),o()}});return a.add(()=>{r.unsubscribe(),o()}),a})}var na=new oc("ANGULARFIRE2_VERSION");function tp(n,e,t){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===t);if(s.length===1)return s[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var Wu=(n,e)=>{let t=e?[e]:Mv(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},Gu=(function(n){return n[n.SILENT=0]="SILENT",n[n.WARN=1]="WARN",n[n.VERBOSE=2]="VERBOSE",n})(Gu||{}),UO=Sb()&&typeof Zone<"u"?Gu.WARN:Gu.SILENT;var Pv=class{zone;delegate;constructor(e,t=Jw){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,s=function(o){i?i.runGuarded(()=>{e.apply(this,[o])}):e.apply(this,[o])};return this.delegate.schedule(s,t,r)}},ra=(()=>{class n{outsideAngular;insideAngular;constructor(){let t=j(wt);this.outsideAngular=t.runOutsideAngular(()=>new Pv(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=t.run(()=>new Pv(typeof Zone>"u"?void 0:Zone.current,Yw))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=se({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),jO=!1;function az(n,e){!jO&&(UO>Gu.SILENT||Sb())&&(jO=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),UO>=e&&console.warn(`Firebase API called outside injection context: ${n.name}`)}function cz(n){let e=j(wt,{optional:!0});return e?e.runOutsideAngular(()=>n()):n()}function jc(n){let e=j(wt,{optional:!0});return e?e.run(()=>n()):n()}var lz=(n,e,t)=>(...r)=>(e&&setTimeout(e,0),an(t,()=>jc(()=>n.apply(void 0,r)))),An=(n,e,t)=>(t||=e?Gu.WARN:Gu.VERBOSE,function(){let r,i=arguments,s,o,a;try{s=j(ra),o=j(gu),a=j(Lt)}catch{return az(n,t),n.apply(this,i)}for(let d=0;d<arguments.length;d++)typeof i[d]=="function"&&(e&&(r||=jc(()=>o.add())),i[d]=lz(i[d],r,a));let c=cz(()=>n.apply(this,i));return e?c instanceof Le?c.pipe(Mo(s.outsideAngular),No(s.insideAngular),LO(a)):c instanceof Promise?jc(()=>{let d=o.add();return new Promise((h,p)=>{c.then(y=>an(a,()=>jc(()=>h(y))),y=>an(a,()=>jc(()=>p(y)))).finally(d)})}):typeof c=="function"&&r?function(){return setTimeout(r,0),c.apply(this,arguments)}:jc(()=>c):c instanceof Le?c.pipe(Mo(s.outsideAngular),No(s.insideAngular)):jc(()=>c)});var ks=class{constructor(e){return e}},Bc=class{constructor(){return Mv()}};function uz(n){return n&&n.length===1?n[0]:new ks(Uc())}var MC=new ce("angularfire2._apps"),dz={provide:ks,useFactory:uz,deps:[[new fr,MC]]},hz={provide:Bc,deps:[[new fr,MC]]};function fz(n){return(e,t)=>{let r=t.get(Dc);xt("angularfire",na.full,"core"),xt("angularfire",na.full,"app"),xt("angular",mI.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new ks(i)}}function BO(n,...e){return lr([dz,hz,{provide:MC,useFactory:fz(n),multi:!0,deps:[wt,Mt,ra,...e]}])}var $O=An(NC,!0);var pz=new Map,gz={activated:!1,tokenObservers:[]},mz={initialized:!1,enabled:!1};function ci(n){return pz.get(n)||Object.assign({},gz)}function GO(){return mz}var yz="https://content-firebaseappcheck.googleapis.com/v1";var vz="exchangeDebugToken",HO={OFFSET_DURATION:300*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:960*1e3},xve=1440*60*1e3;var FC=class{constructor(e,t,r,i,s){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(e){this.stop();try{this.pending=new Vc,this.pending.promise.catch(t=>{}),await _z(this.getNextRun(e)),this.pending.resolve(),await this.pending.promise,this.pending=new Vc,this.pending.promise.catch(t=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function _z(n){return new Promise(e=>{setTimeout(e,n)})}var wz={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},ia=new oi("appCheck","AppCheck",wz);function WO(n){if(!ci(n).activated)throw ia.create("use-before-activation",{appName:n.name})}async function KO({url:n,body:e},t){let r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){let p=await i.getHeartbeatsHeader();p&&(r["X-Firebase-Client"]=p)}let s={method:"POST",body:JSON.stringify(e),headers:r},o;try{o=await fetch(n,s)}catch(p){throw ia.create("fetch-network-error",{originalErrorMessage:p?.message})}if(o.status!==200)throw ia.create("fetch-status-error",{httpStatus:o.status});let a;try{a=await o.json()}catch(p){throw ia.create("fetch-parse-error",{originalErrorMessage:p?.message})}let c=a.ttl.match(/^([\d.]+)(s)$/);if(!c||!c[2]||isNaN(Number(c[1])))throw ia.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});let d=Number(c[1])*1e3,h=Date.now();return{token:a.token,expireTimeMillis:h+d,issuedAtTimeMillis:h}}function QO(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${yz}/projects/${t}/apps/${r}:${vz}?key=${i}`,body:{debug_token:e}}}var Iz="firebase-app-check-database",Ez=1,VC="firebase-app-check-store";var Ov=null;function bz(){return Ov||(Ov=new Promise((n,e)=>{try{let t=indexedDB.open(Iz,Ez);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(ia.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(VC,{keyPath:"compositeKey"})}}}catch(t){e(ia.create("storage-open",{originalErrorMessage:t?.message}))}}),Ov)}function Cz(n,e){return Tz(Sz(n),e)}async function Tz(n,e){let r=(await bz()).transaction(VC,"readwrite"),s=r.objectStore(VC).put({compositeKey:n,value:e});return new Promise((o,a)=>{s.onsuccess=c=>{o()},r.onerror=c=>{var d;a(ia.create("storage-set",{originalErrorMessage:(d=c.target.error)===null||d===void 0?void 0:d.message}))}})}function Sz(n){return`${n.options.appId}-${n.name}`}var np=new ji("@firebase/app-check");function PC(n,e){return Jf()?Cz(n,e).catch(t=>{np.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function YO(){return GO().enabled}async function JO(){let n=GO();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}var Dz={error:"UNKNOWN_ERROR"};function Az(n){return Tv.encodeString(JSON.stringify(n),!1)}async function LC(n,e=!1,t=!1){let r=n.app;WO(r);let i=ci(r),s=i.token,o;if(s&&!rp(s)&&(i.token=void 0,s=void 0),!s){let d=await i.cachedTokenPromise;d&&(rp(d)?s=d:await PC(r,void 0))}if(!e&&s&&rp(s))return{token:s.token};let a=!1;if(YO())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=KO(QO(r,await JO()),n.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),a=!0);let d=await i.exchangeTokenPromise;return await PC(r,d),i.token=d,{token:d.token}}catch(d){return d.code==="appCheck/throttled"||d.code==="appCheck/initial-throttle"?np.warn(d.message):t&&np.error(d),OC(d)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),a=!0),s=await ci(r).exchangeTokenPromise}catch(d){d.code==="appCheck/throttled"||d.code==="appCheck/initial-throttle"?np.warn(d.message):t&&np.error(d),o=d}let c;return s?o?rp(s)?c={token:s.token,internalError:o}:c=OC(o):(c={token:s.token},i.token=s,await PC(r,s)):c=OC(o),a&&Nz(r,c),c}async function xz(n){let e=n.app;WO(e);let{provider:t}=ci(e);if(YO()){let r=await JO(),{token:i}=await KO(QO(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=await t.getToken();return{token:r}}}function Rz(n,e,t,r){let{app:i}=n,s=ci(i),o={next:t,error:r,type:e};if(s.tokenObservers=[...s.tokenObservers,o],s.token&&rp(s.token)){let a=s.token;Promise.resolve().then(()=>{t({token:a.token}),qO(n)}).catch(()=>{})}s.cachedTokenPromise.then(()=>qO(n))}function XO(n,e){let t=ci(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function qO(n){let{app:e}=n,t=ci(e),r=t.tokenRefresher;r||(r=kz(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function kz(n){let{app:e}=n;return new FC(async()=>{let t=ci(e),r;if(t.token?r=await LC(n,!0):r=await LC(n),r.error)throw r.error;if(r.internalError)throw r.internalError},()=>!0,()=>{let t=ci(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-300*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},HO.RETRIAL_MIN_WAIT,HO.RETRIAL_MAX_WAIT)}function Nz(n,e){let t=ci(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function rp(n){return n.expireTimeMillis-Date.now()>0}function OC(n){return{token:Az(Dz),error:n}}var UC=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=ci(this.app);for(let t of e)XO(this.app,t.next);return Promise.resolve()}};function Mz(n,e){return new UC(n,e)}function Pz(n){return{getToken:e=>LC(n,e),getLimitedUseToken:()=>xz(n),addTokenListener:e=>Rz(n,"INTERNAL",e),removeTokenListener:e=>XO(n.app,e)}}var Oz="@firebase/app-check",Fz="0.10.1";var Vz="app-check",zO="app-check-internal";function Lz(){ai(new Gn(Vz,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return Mz(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(zO).initialize()})),ai(new Gn(zO,n=>{let e=n.getProvider("app-check").getImmediate();return Pz(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),xt(Oz,Fz)}Lz();var Uz="app-check";var Ku=class{constructor(){return Wu(Uz)}};var jz=["localhost","0.0.0.0","127.0.0.1"],Bve=typeof window<"u"&&jz.includes(window.location.hostname);var ZO=()=>{};var n2=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},Bz=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=n[t++],o=n[t++],a=n[t++],c=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let s=n[t++],o=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},r2={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let s=n[i],o=i+1<n.length,a=o?n[i+1]:0,c=i+2<n.length,d=c?n[i+2]:0,h=s>>2,p=(s&3)<<4|a>>4,y=(a&15)<<2|d>>6,E=d&63;c||(E=64,o||(y=64)),r.push(t[h],t[p],t[y],t[E])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(n2(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):Bz(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let s=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let d=i<n.length?t[n.charAt(i)]:64;++i;let p=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||a==null||d==null||p==null)throw new jC;let y=s<<2|a>>4;if(r.push(y),d!==64){let E=a<<4&240|d>>2;if(r.push(E),p!==64){let k=d<<6&192|p;r.push(k)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},jC=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},$z=function(n){let e=n2(n);return r2.encodeByteArray(e,!0)},sp=function(n){return $z(n).replace(/\./g,"")},i2=function(n){try{return r2.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function s2(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var Hz=()=>s2().__FIREBASE_DEFAULTS__,qz=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},zz=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&i2(n[1]);return e&&JSON.parse(e)},BC=()=>{try{return ZO()||Hz()||qz()||zz()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Gz=n=>BC()?.emulatorHosts?.[n],o2=n=>{let e=Gz(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},$C=()=>BC()?.config;var Fv=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function Vv(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function a2(n){return(await fetch(n,{credentials:"include"})).ok}function c2(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=B({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[sp(JSON.stringify(t)),sp(JSON.stringify(o)),""].join(".")}var ip={};function Wz(){let n={prod:[],emulator:[]};for(let e of Object.keys(ip))ip[e]?n.emulator.push(e):n.prod.push(e);return n}function Kz(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}var e2=!1;function l2(n,e){if(typeof window>"u"||typeof document>"u"||!Vv(window.location.host)||ip[n]===e||ip[n]||e2)return;ip[n]=e;function t(y){return`__firebase__banner__${y}`}let r="__firebase__banner",s=Wz().prod.length>0;function o(){let y=document.getElementById(r);y&&y.remove()}function a(y){y.style.display="flex",y.style.background="#7faaf0",y.style.position="fixed",y.style.bottom="5px",y.style.left="5px",y.style.padding=".5em",y.style.borderRadius="5px",y.style.alignItems="center"}function c(y,E){y.setAttribute("width","24"),y.setAttribute("id",E),y.setAttribute("height","24"),y.setAttribute("viewBox","0 0 24 24"),y.setAttribute("fill","none"),y.style.marginLeft="-6px"}function d(){let y=document.createElement("span");return y.style.cursor="pointer",y.style.marginLeft="16px",y.style.fontSize="24px",y.innerHTML=" &times;",y.onclick=()=>{e2=!0,o()},y}function h(y,E){y.setAttribute("id",E),y.innerText="Learn more",y.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",y.setAttribute("target","__blank"),y.style.paddingLeft="5px",y.style.textDecoration="underline"}function p(){let y=Kz(r),E=t("text"),k=document.getElementById(E)||document.createElement("span"),P=t("learnmore"),M=document.getElementById(P)||document.createElement("a"),H=t("preprendIcon"),Y=document.getElementById(H)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(y.created){let ee=y.element;a(ee),h(M,P);let De=d();c(Y,H),ee.append(Y,k,M,De),document.body.appendChild(ee)}s?(k.innerText="Preview backend disconnected.",Y.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Y.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,k.innerText="Preview backend running in this workspace."),k.setAttribute("id",E)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}function u2(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Qz(){let n=BC()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function d2(){return!Qz()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function HC(){try{return typeof indexedDB=="object"}catch{return!1}}function h2(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(t){e(t)}})}var Yz="FirebaseError",Ns=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=Yz,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,op.prototype.create)}},op=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?Jz(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Ns(i,a,r)}};function Jz(n,e){return n.replace(Xz,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var Xz=/\{\$([^}]+)}/g;function Qu(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let s=n[i],o=e[i];if(t2(s)&&t2(o)){if(!Qu(s,o))return!1}else if(s!==o)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function t2(n){return n!==null&&typeof n=="object"}var Gve=14400*1e3;function li(n){return n&&n._delegate?n._delegate:n}var Ms=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var $c="[DEFAULT]";var qC=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new Fv;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){let t=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(eG(e))try{this.getOrInitializeService({instanceIdentifier:$c})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=$c){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){let e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=$c){return this.instances.has(e)}getOptions(e=$c){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[s,o]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,t){let r=this.normalizeInstanceIdentifier(t),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);let s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Zz(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=$c){return this.component?this.component.multipleInstances?e:$c:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function Zz(n){return n===$c?void 0:n}function eG(n){return n.instantiationMode==="EAGER"}var Lv=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new qC(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var tG=[],ze=(function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n})(ze||{}),nG={debug:ze.DEBUG,verbose:ze.VERBOSE,info:ze.INFO,warn:ze.WARN,error:ze.ERROR,silent:ze.SILENT},rG=ze.INFO,iG={[ze.DEBUG]:"log",[ze.VERBOSE]:"log",[ze.INFO]:"info",[ze.WARN]:"warn",[ze.ERROR]:"error"},sG=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=iG[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Yu=class{constructor(e){this.name=e,this._logLevel=rG,this._logHandler=sG,this._userLogHandler=null,tG.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ze))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?nG[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ze.DEBUG,...e),this._logHandler(this,ze.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ze.VERBOSE,...e),this._logHandler(this,ze.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ze.INFO,...e),this._logHandler(this,ze.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ze.WARN,...e),this._logHandler(this,ze.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ze.ERROR,...e),this._logHandler(this,ze.ERROR,...e)}};var GC=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(oG(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function oG(n){return n.getComponent()?.type==="VERSION"}var WC="@firebase/app",f2="0.14.6";var Ps=new Yu("@firebase/app"),aG="@firebase/app-compat",cG="@firebase/analytics-compat",lG="@firebase/analytics",uG="@firebase/app-check-compat",dG="@firebase/app-check",hG="@firebase/auth",fG="@firebase/auth-compat",pG="@firebase/database",gG="@firebase/data-connect",mG="@firebase/database-compat",yG="@firebase/functions",vG="@firebase/functions-compat",_G="@firebase/installations",wG="@firebase/installations-compat",IG="@firebase/messaging",EG="@firebase/messaging-compat",bG="@firebase/performance",CG="@firebase/performance-compat",TG="@firebase/remote-config",SG="@firebase/remote-config-compat",DG="@firebase/storage",AG="@firebase/storage-compat",xG="@firebase/firestore",RG="@firebase/ai",kG="@firebase/firestore-compat",NG="firebase",MG="12.6.0";var KC="[DEFAULT]",PG={[WC]:"fire-core",[aG]:"fire-core-compat",[lG]:"fire-analytics",[cG]:"fire-analytics-compat",[dG]:"fire-app-check",[uG]:"fire-app-check-compat",[hG]:"fire-auth",[fG]:"fire-auth-compat",[pG]:"fire-rtdb",[gG]:"fire-data-connect",[mG]:"fire-rtdb-compat",[yG]:"fire-fn",[vG]:"fire-fn-compat",[_G]:"fire-iid",[wG]:"fire-iid-compat",[IG]:"fire-fcm",[EG]:"fire-fcm-compat",[bG]:"fire-perf",[CG]:"fire-perf-compat",[TG]:"fire-rc",[SG]:"fire-rc-compat",[DG]:"fire-gcs",[AG]:"fire-gcs-compat",[xG]:"fire-fst",[kG]:"fire-fst-compat",[RG]:"fire-vertex","fire-js":"fire-js",[NG]:"fire-js-all"};var Uv=new Map,OG=new Map,QC=new Map;function p2(n,e){try{n.container.addComponent(e)}catch(t){Ps.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function ap(n){let e=n.name;if(QC.has(e))return Ps.debug(`There were multiple attempts to register component ${e}.`),!1;QC.set(e,n);for(let t of Uv.values())p2(t,n);for(let t of OG.values())p2(t,n);return!0}function v2(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function _2(n){return n==null?!1:n.settings!==void 0}var FG={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},sa=new op("app","Firebase",FG);var YC=class{constructor(e,t,r){this._isDeleted=!1,this._options=B({},e),this._config=B({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ms("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw sa.create("app-deleted",{appName:this._name})}};var w2=MG;function lp(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=B({name:KC,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw sa.create("bad-app-name",{appName:String(i)});if(t||(t=$C()),!t)throw sa.create("no-options");let s=Uv.get(i);if(s){if(Qu(t,s.options)&&Qu(r,s.config))return s;throw sa.create("duplicate-app",{appName:i})}let o=new Lv(i);for(let c of QC.values())o.addComponent(c);let a=new YC(t,r,o);return Uv.set(i,a),a}function I2(n=KC){let e=Uv.get(n);if(!e&&n===KC&&$C())return lp();if(!e)throw sa.create("no-app",{appName:n});return e}function oa(n,e,t){let r=PG[n]??n;t&&(r+=`-${t}`);let i=r.match(/\s|\//),s=e.match(/\s|\//);if(i||s){let o=[`Unable to register library "${r}" with version "${e}":`];i&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&s&&o.push("and"),s&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ps.warn(o.join(" "));return}ap(new Ms(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}var VG="firebase-heartbeat-database",LG=1,cp="firebase-heartbeat-store",zC=null;function E2(){return zC||(zC=Nv(VG,LG,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(cp)}catch(t){console.warn(t)}}}}).catch(n=>{throw sa.create("idb-open",{originalErrorMessage:n.message})})),zC}async function UG(n){try{let t=(await E2()).transaction(cp),r=await t.objectStore(cp).get(b2(n));return await t.done,r}catch(e){if(e instanceof Ns)Ps.warn(e.message);else{let t=sa.create("idb-get",{originalErrorMessage:e?.message});Ps.warn(t.message)}}}async function g2(n,e){try{let r=(await E2()).transaction(cp,"readwrite");await r.objectStore(cp).put(e,b2(n)),await r.done}catch(t){if(t instanceof Ns)Ps.warn(t.message);else{let r=sa.create("idb-set",{originalErrorMessage:t?.message});Ps.warn(r.message)}}}function b2(n){return`${n.name}!${n.options.appId}`}var jG=1024,BG=30,JC=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new XC(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{let t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=m2();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>BG){let i=HG(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Ps.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";let e=m2(),{heartbeatsToSend:t,unsentEntries:r}=$G(this._heartbeatsCache.heartbeats),i=sp(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return Ps.warn(e),""}}};function m2(){return new Date().toISOString().substring(0,10)}function $G(n,e=jG){let t=[],r=n.slice();for(let i of n){let s=t.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),y2(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),y2(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var XC=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return HC()?h2().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){let t=await UG(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){let r=await this.read();return g2(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){let r=await this.read();return g2(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}};function y2(n){return sp(JSON.stringify({version:2,heartbeats:n})).length}function HG(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function qG(n){ap(new Ms("platform-logger",e=>new GC(e),"PRIVATE")),ap(new Ms("heartbeat",e=>new JC(e),"PRIVATE")),oa(WC,f2,n),oa(WC,f2,"esm2020"),oa("fire-js","")}qG("");function L2(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var U2=L2,j2=new oi("auth","Firebase",L2());var zv=new ji("@firebase/auth");function zG(n,...e){zv.logLevel<=Be.WARN&&zv.warn(`Auth (${ta}): ${n}`,...e)}function Bv(n,...e){zv.logLevel<=Be.ERROR&&zv.error(`Auth (${ta}): ${n}`,...e)}function la(n,...e){throw vT(n,...e)}function qc(n,...e){return vT(n,...e)}function B2(n,e,t){let r=Object.assign(Object.assign({},U2()),{[e]:t});return new oi("auth","Firebase",r).create(e,{appName:n.name})}function Hc(n){return B2(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function vT(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return j2.create(n,...e)}function be(n,e,...t){if(!n)throw vT(e,...t)}function Os(n){let e="INTERNAL ASSERTION FAILED: "+n;throw Bv(e),new Error(e)}function ua(n,e){n||Os(e)}function nT(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function GG(){return C2()==="http:"||C2()==="https:"}function C2(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function WG(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(GG()||vO()||"connection"in navigator)?navigator.onLine:!0}function KG(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var zc=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,ua(t>e,"Short delay should be less than long delay!"),this.isMobile=mO()||_O()}get(){return WG()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function _T(n,e){ua(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var Gv=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Os("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Os("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Os("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var QG={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var YG=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],JG=new zc(3e4,6e4);function wT(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function Ju(n,e,t,r,i={}){return $2(n,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});let a=Xf(Object.assign({key:n.config.apiKey},o)).slice(1),c=await n._getAdditionalHeaders();c["Content-Type"]="application/json",n.languageCode&&(c["X-Firebase-Locale"]=n.languageCode);let d=Object.assign({method:e,headers:c},s);return yO()||(d.referrerPolicy="no-referrer"),n.emulatorConfig&&Zo(n.emulatorConfig.host)&&(d.credentials="include"),Gv.fetch()(await H2(n,n.config.apiHost,t,a),d)})}async function $2(n,e,t){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},QG),e);try{let i=new rT(n),s=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();let o=await s.json();if("needConfirmation"in o)throw jv(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[c,d]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw jv(n,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw jv(n,"email-already-in-use",o);if(c==="USER_DISABLED")throw jv(n,"user-disabled",o);let h=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw B2(n,h,d);la(n,h)}}catch(i){if(i instanceof yr)throw i;la(n,"network-request-failed",{message:String(i)})}}async function XG(n,e,t,r,i={}){let s=await Ju(n,e,t,r,i);return"mfaPendingCredential"in s&&la(n,"multi-factor-auth-required",{_serverResponse:s}),s}async function H2(n,e,t,r){let i=`${e}${t}?${r}`,s=n,o=s.config.emulator?_T(n.config,i):`${n.config.apiScheme}://${i}`;return YG.includes(t)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o}var rT=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(qc(this.auth,"network-request-failed")),JG.get())})}};function jv(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=qc(n,e,r);return i.customData._tokenResponse=t,i}async function ZG(n,e){return Ju(n,"POST","/v1/accounts:delete",e)}async function Wv(n,e){return Ju(n,"POST","/v1/accounts:lookup",e)}function up(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function IT(n,e=!1){let t=hn(n),r=await t.getIdToken(e),i=ET(r);be(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:up(ZC(i.auth_time)),issuedAtTime:up(ZC(i.iat)),expirationTime:up(ZC(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}}function ZC(n){return Number(n)*1e3}function ET(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Bv("JWT malformed, contained fewer than 3 sections"),null;try{let i=Sv(t);return i?JSON.parse(i):(Bv("Failed to decode base64 JWT payload"),null)}catch(i){return Bv("Caught error parsing JWT payload as JSON",i?.toString()),null}}function T2(n){let e=ET(n);return be(e,"internal-error"),be(typeof e.exp<"u","internal-error"),be(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function hp(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof yr&&e7(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function e7({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var iT=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}};var fp=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=up(this.lastLoginAt),this.creationTime=up(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};async function Kv(n){var e;let t=n.auth,r=await n.getIdToken(),i=await hp(n,Wv(t,{idToken:r}));be(i?.users.length,t,"internal-error");let s=i.users[0];n._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?q2(s.providerUserInfo):[],a=t7(n.providerData,o),c=n.isAnonymous,d=!(n.email&&s.passwordHash)&&!a?.length,h=c?d:!1,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new fp(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(n,p)}async function bT(n){let e=hn(n);await Kv(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function t7(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function q2(n){return n.map(e=>{var{providerId:t}=e,r=Xw(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}async function n7(n,e){let t=await $2(n,{},async()=>{let r=Xf({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,o=await H2(n,i,"/v1/token",`key=${s}`),a=await n._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let c={method:"POST",headers:a,body:r};return n.emulatorConfig&&Zo(n.emulatorConfig.host)&&(c.credentials="include"),Gv.fetch()(o,c)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function r7(n,e){return Ju(n,"POST","/v2/accounts:revokeToken",wT(n,e))}var dp=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){be(e.idToken,"internal-error"),be(typeof e.idToken<"u","internal-error"),be(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):T2(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){be(e.length!==0,"internal-error");let t=T2(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(be(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){let{accessToken:r,refreshToken:i,expiresIn:s}=await n7(e,t);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:s}=t,o=new n;return r&&(be(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(be(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(be(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return Os("not implemented")}};function aa(n,e){be(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var ca=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,s=Xw(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new iT(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new fp(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){let t=await hp(this,this.stsTokenManager.getToken(this.auth,e));return be(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return IT(this,e)}reload(){return bT(this)}_assign(e){this!==e&&(be(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){be(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Kv(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Nr(this.auth.app))return Promise.reject(Hc(this.auth));let e=await this.getIdToken();return await hp(this,ZG(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,s,o,a,c,d,h;let p=(r=t.displayName)!==null&&r!==void 0?r:void 0,y=(i=t.email)!==null&&i!==void 0?i:void 0,E=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,k=(o=t.photoURL)!==null&&o!==void 0?o:void 0,P=(a=t.tenantId)!==null&&a!==void 0?a:void 0,M=(c=t._redirectEventId)!==null&&c!==void 0?c:void 0,H=(d=t.createdAt)!==null&&d!==void 0?d:void 0,Y=(h=t.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:ee,emailVerified:De,isAnonymous:et,providerData:ve,stsTokenManager:T}=t;be(ee&&T,e,"internal-error");let _=dp.fromJSON(this.name,T);be(typeof ee=="string",e,"internal-error"),aa(p,e.name),aa(y,e.name),be(typeof De=="boolean",e,"internal-error"),be(typeof et=="boolean",e,"internal-error"),aa(E,e.name),aa(k,e.name),aa(P,e.name),aa(M,e.name),aa(H,e.name),aa(Y,e.name);let I=new n({uid:ee,auth:e,email:y,emailVerified:De,displayName:p,isAnonymous:et,photoURL:k,phoneNumber:E,tenantId:P,stsTokenManager:_,createdAt:H,lastLoginAt:Y});return ve&&Array.isArray(ve)&&(I.providerData=ve.map(C=>Object.assign({},C))),M&&(I._redirectEventId=M),I}static async _fromIdTokenResponse(e,t,r=!1){let i=new dp;i.updateFromServerResponse(t);let s=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Kv(s),s}static async _fromGetAccountInfoResponse(e,t,r){let i=t.users[0];be(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?q2(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,a=new dp;a.updateFromIdToken(r);let c=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new fp(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(c,d),c}};var S2=new Map;function Fs(n){ua(n instanceof Function,"Expected a class definition");let e=S2.get(n);return e?(ua(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,S2.set(n,e),e)}var i7=(()=>{class n{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,r){this.storage[t]=r}async _get(t){let r=this.storage[t];return r===void 0?null:r}async _remove(t){delete this.storage[t]}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),sT=i7;function $v(n,e,t){return`firebase:${n}:${e}:${t}`}var Qv=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=$v(this.userKey,i.apiKey,s),this.fullPersistenceKey=$v("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){let e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=await Wv(this.auth,{idToken:e}).catch(()=>{});return t?ca._fromGetAccountInfoResponse(this.auth,t,e):null}return ca._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;let t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new n(Fs(sT),e,r);let i=(await Promise.all(t.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d),s=i[0]||Fs(sT),o=$v(r,e.config.apiKey,e.name),a=null;for(let d of t)try{let h=await d._get(o);if(h){let p;if(typeof h=="string"){let y=await Wv(e,{idToken:h}).catch(()=>{});if(!y)break;p=await ca._fromGetAccountInfoResponse(e,y,h)}else p=ca._fromJSON(e,h);d!==s&&(a=p),s=d;break}}catch{}let c=i.filter(d=>d._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new n(s,e,r):(s=c[0],a&&await s._set(o,a.toJSON()),await Promise.all(t.map(async d=>{if(d!==s)try{await d._remove(o)}catch{}})),new n(s,e,r))}};function D2(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(K2(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(z2(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Y2(e))return"Blackberry";if(J2(e))return"Webos";if(G2(e))return"Safari";if((e.includes("chrome/")||W2(e))&&!e.includes("edge/"))return"Chrome";if(Q2(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function z2(n=yn()){return/firefox\//i.test(n)}function G2(n=yn()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function W2(n=yn()){return/crios\//i.test(n)}function K2(n=yn()){return/iemobile/i.test(n)}function Q2(n=yn()){return/android/i.test(n)}function Y2(n=yn()){return/blackberry/i.test(n)}function J2(n=yn()){return/webos/i.test(n)}function CT(n=yn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function s7(n=yn()){var e;return CT(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function o7(){return wO()&&document.documentMode===10}function X2(n=yn()){return CT(n)||Q2(n)||J2(n)||Y2(n)||/windows phone/i.test(n)||K2(n)}function Z2(n,e=[]){let t;switch(n){case"Browser":t=D2(yn());break;case"Worker":t=`${D2(yn())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${ta}/${r}`}var oT=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=s=>new Promise((o,a)=>{try{let c=e(s);o(c)}catch(c){a(c)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}};async function a7(n,e={}){return Ju(n,"GET","/v2/passwordPolicy",wT(n,e))}var c7=6,aT=class{constructor(e){var t,r,i,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=o.minPasswordLength)!==null&&t!==void 0?t:c7,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,s,o,a;let c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(t=c.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(s=c.containsUppercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var cT=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Yv(this),this.idTokenSubscription=new Yv(this),this.beforeStateQueue=new oT(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=j2,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Fs(t)),this._initializationPromise=this.queue(async()=>{var r,i,s;if(!this._deleted&&(this.persistenceManager=await Qv.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;let e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{let t=await Wv(this,{idToken:e}),r=await ca._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Nr(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}let r=await this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();let o=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=i?._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===a)&&c?.user&&(i=c.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return be(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Kv(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=KG()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Nr(this.app))return Promise.reject(Hc(this));let t=e?hn(e):null;return t&&be(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&be(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Nr(this.app)?Promise.reject(Hc(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Nr(this.app)?Promise.reject(Hc(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Fs(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){let e=await a7(this),t=new aT(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new oi("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){let t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await r7(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){let r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){let t=e&&Fs(e)||this._popupRedirectResolver;be(t,this,"argument-error"),this.redirectPersistenceManager=await Qv.create(this,[Fs(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let s=typeof t=="function"?t:t.next.bind(t),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(be(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof t=="function"){let c=e.addObserver(t,r,i);return()=>{o=!0,c()}}else{let c=e.addObserver(t);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return be(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Z2(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);let i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;if(Nr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t?.error&&zG(`Error while retrieving App Check token: ${t.error}`),t?.token}};function TT(n){return hn(n)}var Yv=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=CO(t=>this.observer=t)}get next(){return be(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var ST={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function l7(n){ST=n}function u7(n){return ST.loadJS(n)}function d7(){return ST.gapiScript}function eF(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function DT(n,e){let t=zu(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),s=t.getOptions();if(Ui(s,e??{}))return i;la(i,"already-initialized")}return t.initialize({options:e})}function h7(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Fs);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function AT(n,e,t){let r=TT(n);be(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,s=tF(e),{host:o,port:a}=f7(e),c=a===null?"":`:${a}`,d={url:`${s}//${o}${c}/`},h=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){be(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),be(Ui(d,r.config.emulator)&&Ui(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=d,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,Zo(o)?(Av(`${s}//${o}${c}`),xv("Auth",!0)):i||p7()}function tF(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function f7(n){let e=tF(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let s=i[1];return{host:s,port:A2(r.substr(s.length+1))}}else{let[s,o]=r.split(":");return{host:s,port:A2(o)}}}function A2(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function p7(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var Jv=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Os("not implemented")}_getIdTokenResponse(e){return Os("not implemented")}_linkToIdToken(e,t){return Os("not implemented")}_getReauthenticationResolver(e){return Os("not implemented")}};async function eT(n,e){return XG(n,"POST","/v1/accounts:signInWithIdp",wT(n,e))}var Xv=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var lT=class extends Xv{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var pp=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){let s=await ca._fromIdTokenResponse(e,r,i),o=x2(r);return new n({user:s,providerId:o,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);let i=x2(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})}};function x2(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var uT=class n extends yr{constructor(e,t,r,i){var s;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function nF(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?uT._fromErrorAndOperation(n,s,e,r):s})}async function g7(n,e,t=!1){let r=await hp(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return pp._forOperation(n,"link",r)}async function m7(n,e,t=!1){let{auth:r}=n;if(Nr(r.app))return Promise.reject(Hc(r));let i="reauthenticate";try{let s=await hp(n,nF(r,i,e,n),t);be(s.idToken,r,"internal-error");let o=ET(s.idToken);be(o,r,"internal-error");let{sub:a}=o;return be(n.uid===a,r,"user-mismatch"),pp._forOperation(n,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&la(r,"user-mismatch"),s}}async function y7(n,e,t=!1){if(Nr(n.app))return Promise.reject(Hc(n));let r="signIn",i=await nF(n,r,e),s=await pp._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(s.user),s}function xT(n,e,t,r){return hn(n).onIdTokenChanged(e,t,r)}function RT(n,e,t){return hn(n).beforeAuthStateChanged(e,t)}var Zv="__sak";var e_=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Zv,"1"),this.storage.removeItem(Zv),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var v7=1e3,_7=10,w7=(()=>{class n extends e_{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=X2(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),s=this.localCache[r];i!==s&&t(r,s,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((a,c,d)=>{this.notifyListeners(a,d)});return}let i=t.key;r?this.detachListener():this.stopPolling();let s=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},o=this.storage.getItem(i);o7()&&o!==t.newValue&&t.newValue!==t.oldValue?setTimeout(s,_7):s()}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},v7)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,r){await super._set(t,r),this.localCache[t]=JSON.stringify(r)}async _get(t){let r=await super._get(t);return this.localCache[t]=JSON.stringify(r),r}async _remove(t){await super._remove(t),delete this.localCache[t]}}return n.type="LOCAL",n})(),rF=w7;var I7=(()=>{class n extends e_{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),kT=I7;function E7(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}var b7=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let r=this.receivers.find(s=>s.isListeningto(t));if(r)return r;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}async handleEvent(t){let r=t,{eventId:i,eventType:s,data:o}=r.data,a=this.handlersMap[s];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:s});let c=Array.from(a).map(async h=>h(r.origin,o)),d=await E7(c);r.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:d})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function iF(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var dT=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,c)=>{let d=iF("",20);i.port1.start();let h=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(p){let y=p;if(y.data.eventId===d)switch(y.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(y.data.response);break;default:clearTimeout(h),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:t},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}};function $i(){return window}function C7(n){$i().location.href=n}function sF(){return typeof $i().WorkerGlobalScope<"u"&&typeof $i().importScripts=="function"}async function T7(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function S7(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function D7(){return sF()?self:null}var oF="firebaseLocalStorageDb",A7=1,t_="firebaseLocalStorage",aF="fbase_key",Gc=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function r_(n,e){return n.transaction([t_],e?"readwrite":"readonly").objectStore(t_)}function x7(){let n=indexedDB.deleteDatabase(oF);return new Gc(n).toPromise()}function hT(){let n=indexedDB.open(oF,A7);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(t_,{keyPath:aF})}catch(i){t(i)}}),n.addEventListener("success",async()=>{let r=n.result;r.objectStoreNames.contains(t_)?e(r):(r.close(),await x7(),e(await hT()))})})}async function R2(n,e,t){let r=r_(n,!0).put({[aF]:e,value:t});return new Gc(r).toPromise()}async function R7(n,e){let t=r_(n,!1).get(e),r=await new Gc(t).toPromise();return r===void 0?null:r.value}function k2(n,e){let t=r_(n,!0).delete(e);return new Gc(t).toPromise()}var k7=800,N7=3,M7=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await hT(),this.db)}async _withRetries(t){let r=0;for(;;)try{let i=await this._openDb();return await t(i)}catch(i){if(r++>N7)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return sF()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=b7._getInstance(D7()),this.receiver._subscribe("keyChanged",async(t,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(t,r)=>["keyChanged"])}async initializeSender(){var t,r;if(this.activeServiceWorker=await T7(),!this.activeServiceWorker)return;this.sender=new dT(this.activeServiceWorker);let i=await this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||S7()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;let t=await hT();return await R2(t,Zv,"1"),await k2(t,Zv),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,r){return this._withPendingWrite(async()=>(await this._withRetries(i=>R2(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)))}async _get(t){let r=await this._withRetries(i=>R7(i,t));return this.localCache[t]=r,r}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(r=>k2(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){let t=await this._withRetries(s=>{let o=r_(s,!1).getAll();return new Gc(o).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(t.length!==0)for(let{fbase_key:s,value:o}of t)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),r.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),r.push(s));return r}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let s of Array.from(i))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),k7)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),cF=M7;var m_e=eF("rcb"),y_e=new zc(3e4,6e4);function P7(n,e){return e?Fs(e):(be(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var gp=class extends Jv{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return eT(e,this._buildIdpRequest())}_linkToIdToken(e,t){return eT(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return eT(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function O7(n){return y7(n.auth,new gp(n),n.bypassAuthState)}function F7(n){let{auth:e,user:t}=n;return be(t,e,"internal-error"),m7(t,new gp(n),n.bypassAuthState)}async function V7(n){let{auth:e,user:t}=n;return be(t,e,"internal-error"),g7(t,new gp(n),n.bypassAuthState)}var fT=class{constructor(e,t,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){let{urlResponse:t,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}let c={auth:this.auth,requestUri:t,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(c))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return O7;case"linkViaPopup":case"linkViaRedirect":return V7;case"reauthViaPopup":case"reauthViaRedirect":return F7;default:la(this.auth,"internal-error")}}resolve(e){ua(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ua(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var v_e=new zc(2e3,1e4);var L7="pendingRedirect",Hv=new Map,pT=class extends fT{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Hv.get(this.auth._key());if(!e){try{let r=await U7(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Hv.set(this.auth._key(),e)}return this.bypassAuthState||Hv.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}};async function U7(n,e){let t=$7(e),r=B7(n);if(!await r._isAvailable())return!1;let i=await r._get(t)==="true";return await r._remove(t),i}function j7(n,e){Hv.set(n._key(),e)}function B7(n){return Fs(n._redirectPersistence)}function $7(n){return $v(L7,n.config.apiKey,n.name)}async function H7(n,e,t=!1){if(Nr(n.app))return Promise.reject(Hc(n));let r=TT(n),i=P7(r,e),o=await new pT(r,i,t).execute();return o&&!t&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}var q7=600*1e3,gT=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!z7(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!lF(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(qc(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=q7&&this.cachedEventUids.clear(),this.cachedEventUids.has(N2(e))}saveEventToCache(e){this.cachedEventUids.add(N2(e)),this.lastProcessedEventTime=Date.now()}};function N2(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function lF({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function z7(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return lF(n);default:return!1}}async function G7(n,e={}){return Ju(n,"GET","/v1/projects",e)}var W7=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,K7=/^https?/;async function Q7(n){if(n.config.emulator)return;let{authorizedDomains:e}=await G7(n);for(let t of e)try{if(Y7(t))return}catch{}la(n,"unauthorized-domain")}function Y7(n){let e=nT(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let o=new URL(n);return o.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===r}if(!K7.test(t))return!1;if(W7.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var J7=new zc(3e4,6e4);function M2(){let n=$i().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function X7(n){return new Promise((e,t)=>{var r,i,s;function o(){M2(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{M2(),t(qc(n,"network-request-failed"))},timeout:J7.get()})}if(!((i=(r=$i().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=$i().gapi)===null||s===void 0)&&s.load)o();else{let a=eF("iframefcb");return $i()[a]=()=>{gapi.load?o():t(qc(n,"network-request-failed"))},u7(`${d7()}?onload=${a}`).catch(c=>t(c))}}).catch(e=>{throw qv=null,e})}var qv=null;function Z7(n){return qv=qv||X7(n),qv}var eW=new zc(5e3,15e3),tW="__/auth/iframe",nW="emulator/auth/iframe",rW={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},iW=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function sW(n){let e=n.config;be(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?_T(e,nW):`https://${n.config.authDomain}/${tW}`,r={apiKey:e.apiKey,appName:n.name,v:ta},i=iW.get(n.config.apiHost);i&&(r.eid=i);let s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${t}?${Xf(r).slice(1)}`}async function oW(n){let e=await Z7(n),t=$i().gapi;return be(t,n,"internal-error"),e.open({where:document.body,url:sW(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:rW,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});let o=qc(n,"network-request-failed"),a=$i().setTimeout(()=>{s(o)},eW.get());function c(){$i().clearTimeout(a),i(r)}r.ping(c).then(c,()=>{s(o)})}))}var aW={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},cW=500,lW=600,uW="_blank",dW="http://localhost",n_=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function hW(n,e,t,r=cW,i=lW){let s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",c=Object.assign(Object.assign({},aW),{width:r.toString(),height:i.toString(),top:s,left:o}),d=yn().toLowerCase();t&&(a=W2(d)?uW:t),z2(d)&&(e=e||dW,c.scrollbars="yes");let h=Object.entries(c).reduce((y,[E,k])=>`${y}${E}=${k},`,"");if(s7(d)&&a!=="_self")return fW(e||"",a),new n_(null);let p=window.open(e||"",a,h);be(p,n,"popup-blocked");try{p.focus()}catch{}return new n_(p)}function fW(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var pW="__/auth/handler",gW="emulator/auth/handler",mW=encodeURIComponent("fac");async function P2(n,e,t,r,i,s){be(n.config.authDomain,n,"auth-domain-config-required"),be(n.config.apiKey,n,"invalid-api-key");let o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:ta,eventId:i};if(e instanceof Xv){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",bO(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(let[h,p]of Object.entries(s||{}))o[h]=p}if(e instanceof lT){let h=e.getScopes().filter(p=>p!=="");h.length>0&&(o.scopes=h.join(","))}n.tenantId&&(o.tid=n.tenantId);let a=o;for(let h of Object.keys(a))a[h]===void 0&&delete a[h];let c=await n._getAppCheckToken(),d=c?`#${mW}=${encodeURIComponent(c)}`:"";return`${yW(n)}?${Xf(a).slice(1)}${d}`}function yW({config:n}){return n.emulator?_T(n,gW):`https://${n.authDomain}/${pW}`}var tT="webStorageSupport",mT=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=kT,this._completeRedirectFn=H7,this._overrideRedirectResult=j7}async _openPopup(e,t,r,i){var s;ua((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let o=await P2(e,t,r,nT(),i);return hW(e,o,iF())}async _openRedirect(e,t,r,i){await this._originValidation(e);let s=await P2(e,t,r,nT(),i);return C7(s),new Promise(()=>{})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(ua(s,"If manager is not set, promise should be"),s)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){let t=await oW(e),r=new gT(e);return t.register("authEvent",i=>(be(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(tT,{type:tT},i=>{var s;let o=(s=i?.[0])===null||s===void 0?void 0:s[tT];o!==void 0&&t(!!o),la(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Q7(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return X2()||G2()||CT()}},uF=mT;var O2="@firebase/auth",F2="1.10.8";var yT=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){be(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function vW(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function _W(n){ai(new Gn("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;be(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:o,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Z2(n)},d=new cT(r,i,s,c);return h7(d,t),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),ai(new Gn("auth-internal",e=>{let t=TT(e.getProvider("auth").getImmediate());return(r=>new yT(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),xt(O2,F2,vW(n)),xt(O2,F2,"esm2017")}var wW=300,IW=yC("authIdTokenMaxAge")||wW,V2=null,EW=n=>async e=>{let t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>IW)return;let i=t?.token;V2!==i&&(V2=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function NT(n=Uc()){let e=zu(n,"auth");if(e.isInitialized())return e.getImmediate();let t=DT(n,{popupRedirectResolver:uF,persistence:[cF,rF,kT]}),r=yC("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let s=new URL(r,location.origin);if(location.origin===s.origin){let o=EW(s.toString());RT(t,o,()=>o(t.currentUser)),xT(t,a=>o(a))}}let i=gC("auth");return i&&AT(t,`http://${i}`),t}function bW(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}l7({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let s=qc("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",bW().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});_W("Browser");var dF="auth",mp=class{constructor(e){return e}},yp=class{constructor(){return Wu(dF)}};var MT=new ce("angularfire2.auth-instances");function mK(n,e){let t=tp(dF,n,e);return t&&new mp(t)}function yK(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new mp(r)}}var vK={provide:yp,deps:[[new fr,MT]]},_K={provide:mp,useFactory:mK,deps:[[new fr,MT],ks]};function hF(n,...e){return xt("angularfire",na.full,"auth"),lr([_K,vK,{provide:MT,useFactory:yK(n),multi:!0,deps:[wt,Mt,ra,Bc,[new fr,Ku],...e]}])}var fF=An(NT,!0);var pF=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},gF={};var Vs,PT;(function(){var n;function e(T,_){function I(){}I.prototype=_.prototype,T.F=_.prototype,T.prototype=new I,T.prototype.constructor=T,T.D=function(C,b,A){for(var w=Array(arguments.length-2),_t=2;_t<arguments.length;_t++)w[_t-2]=arguments[_t];return _.prototype[b].apply(C,w)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(T,_,I){I||(I=0);let C=Array(16);if(typeof _=="string")for(var b=0;b<16;++b)C[b]=_.charCodeAt(I++)|_.charCodeAt(I++)<<8|_.charCodeAt(I++)<<16|_.charCodeAt(I++)<<24;else for(b=0;b<16;++b)C[b]=_[I++]|_[I++]<<8|_[I++]<<16|_[I++]<<24;_=T.g[0],I=T.g[1],b=T.g[2];let A=T.g[3],w;w=_+(A^I&(b^A))+C[0]+3614090360&4294967295,_=I+(w<<7&4294967295|w>>>25),w=A+(b^_&(I^b))+C[1]+3905402710&4294967295,A=_+(w<<12&4294967295|w>>>20),w=b+(I^A&(_^I))+C[2]+606105819&4294967295,b=A+(w<<17&4294967295|w>>>15),w=I+(_^b&(A^_))+C[3]+3250441966&4294967295,I=b+(w<<22&4294967295|w>>>10),w=_+(A^I&(b^A))+C[4]+4118548399&4294967295,_=I+(w<<7&4294967295|w>>>25),w=A+(b^_&(I^b))+C[5]+1200080426&4294967295,A=_+(w<<12&4294967295|w>>>20),w=b+(I^A&(_^I))+C[6]+2821735955&4294967295,b=A+(w<<17&4294967295|w>>>15),w=I+(_^b&(A^_))+C[7]+4249261313&4294967295,I=b+(w<<22&4294967295|w>>>10),w=_+(A^I&(b^A))+C[8]+1770035416&4294967295,_=I+(w<<7&4294967295|w>>>25),w=A+(b^_&(I^b))+C[9]+2336552879&4294967295,A=_+(w<<12&4294967295|w>>>20),w=b+(I^A&(_^I))+C[10]+4294925233&4294967295,b=A+(w<<17&4294967295|w>>>15),w=I+(_^b&(A^_))+C[11]+2304563134&4294967295,I=b+(w<<22&4294967295|w>>>10),w=_+(A^I&(b^A))+C[12]+1804603682&4294967295,_=I+(w<<7&4294967295|w>>>25),w=A+(b^_&(I^b))+C[13]+4254626195&4294967295,A=_+(w<<12&4294967295|w>>>20),w=b+(I^A&(_^I))+C[14]+2792965006&4294967295,b=A+(w<<17&4294967295|w>>>15),w=I+(_^b&(A^_))+C[15]+1236535329&4294967295,I=b+(w<<22&4294967295|w>>>10),w=_+(b^A&(I^b))+C[1]+4129170786&4294967295,_=I+(w<<5&4294967295|w>>>27),w=A+(I^b&(_^I))+C[6]+3225465664&4294967295,A=_+(w<<9&4294967295|w>>>23),w=b+(_^I&(A^_))+C[11]+643717713&4294967295,b=A+(w<<14&4294967295|w>>>18),w=I+(A^_&(b^A))+C[0]+3921069994&4294967295,I=b+(w<<20&4294967295|w>>>12),w=_+(b^A&(I^b))+C[5]+3593408605&4294967295,_=I+(w<<5&4294967295|w>>>27),w=A+(I^b&(_^I))+C[10]+38016083&4294967295,A=_+(w<<9&4294967295|w>>>23),w=b+(_^I&(A^_))+C[15]+3634488961&4294967295,b=A+(w<<14&4294967295|w>>>18),w=I+(A^_&(b^A))+C[4]+3889429448&4294967295,I=b+(w<<20&4294967295|w>>>12),w=_+(b^A&(I^b))+C[9]+568446438&4294967295,_=I+(w<<5&4294967295|w>>>27),w=A+(I^b&(_^I))+C[14]+3275163606&4294967295,A=_+(w<<9&4294967295|w>>>23),w=b+(_^I&(A^_))+C[3]+4107603335&4294967295,b=A+(w<<14&4294967295|w>>>18),w=I+(A^_&(b^A))+C[8]+1163531501&4294967295,I=b+(w<<20&4294967295|w>>>12),w=_+(b^A&(I^b))+C[13]+2850285829&4294967295,_=I+(w<<5&4294967295|w>>>27),w=A+(I^b&(_^I))+C[2]+4243563512&4294967295,A=_+(w<<9&4294967295|w>>>23),w=b+(_^I&(A^_))+C[7]+1735328473&4294967295,b=A+(w<<14&4294967295|w>>>18),w=I+(A^_&(b^A))+C[12]+2368359562&4294967295,I=b+(w<<20&4294967295|w>>>12),w=_+(I^b^A)+C[5]+4294588738&4294967295,_=I+(w<<4&4294967295|w>>>28),w=A+(_^I^b)+C[8]+2272392833&4294967295,A=_+(w<<11&4294967295|w>>>21),w=b+(A^_^I)+C[11]+1839030562&4294967295,b=A+(w<<16&4294967295|w>>>16),w=I+(b^A^_)+C[14]+4259657740&4294967295,I=b+(w<<23&4294967295|w>>>9),w=_+(I^b^A)+C[1]+2763975236&4294967295,_=I+(w<<4&4294967295|w>>>28),w=A+(_^I^b)+C[4]+1272893353&4294967295,A=_+(w<<11&4294967295|w>>>21),w=b+(A^_^I)+C[7]+4139469664&4294967295,b=A+(w<<16&4294967295|w>>>16),w=I+(b^A^_)+C[10]+3200236656&4294967295,I=b+(w<<23&4294967295|w>>>9),w=_+(I^b^A)+C[13]+681279174&4294967295,_=I+(w<<4&4294967295|w>>>28),w=A+(_^I^b)+C[0]+3936430074&4294967295,A=_+(w<<11&4294967295|w>>>21),w=b+(A^_^I)+C[3]+3572445317&4294967295,b=A+(w<<16&4294967295|w>>>16),w=I+(b^A^_)+C[6]+76029189&4294967295,I=b+(w<<23&4294967295|w>>>9),w=_+(I^b^A)+C[9]+3654602809&4294967295,_=I+(w<<4&4294967295|w>>>28),w=A+(_^I^b)+C[12]+3873151461&4294967295,A=_+(w<<11&4294967295|w>>>21),w=b+(A^_^I)+C[15]+530742520&4294967295,b=A+(w<<16&4294967295|w>>>16),w=I+(b^A^_)+C[2]+3299628645&4294967295,I=b+(w<<23&4294967295|w>>>9),w=_+(b^(I|~A))+C[0]+4096336452&4294967295,_=I+(w<<6&4294967295|w>>>26),w=A+(I^(_|~b))+C[7]+1126891415&4294967295,A=_+(w<<10&4294967295|w>>>22),w=b+(_^(A|~I))+C[14]+2878612391&4294967295,b=A+(w<<15&4294967295|w>>>17),w=I+(A^(b|~_))+C[5]+4237533241&4294967295,I=b+(w<<21&4294967295|w>>>11),w=_+(b^(I|~A))+C[12]+1700485571&4294967295,_=I+(w<<6&4294967295|w>>>26),w=A+(I^(_|~b))+C[3]+2399980690&4294967295,A=_+(w<<10&4294967295|w>>>22),w=b+(_^(A|~I))+C[10]+4293915773&4294967295,b=A+(w<<15&4294967295|w>>>17),w=I+(A^(b|~_))+C[1]+2240044497&4294967295,I=b+(w<<21&4294967295|w>>>11),w=_+(b^(I|~A))+C[8]+1873313359&4294967295,_=I+(w<<6&4294967295|w>>>26),w=A+(I^(_|~b))+C[15]+4264355552&4294967295,A=_+(w<<10&4294967295|w>>>22),w=b+(_^(A|~I))+C[6]+2734768916&4294967295,b=A+(w<<15&4294967295|w>>>17),w=I+(A^(b|~_))+C[13]+1309151649&4294967295,I=b+(w<<21&4294967295|w>>>11),w=_+(b^(I|~A))+C[4]+4149444226&4294967295,_=I+(w<<6&4294967295|w>>>26),w=A+(I^(_|~b))+C[11]+3174756917&4294967295,A=_+(w<<10&4294967295|w>>>22),w=b+(_^(A|~I))+C[2]+718787259&4294967295,b=A+(w<<15&4294967295|w>>>17),w=I+(A^(b|~_))+C[9]+3951481745&4294967295,T.g[0]=T.g[0]+_&4294967295,T.g[1]=T.g[1]+(b+(w<<21&4294967295|w>>>11))&4294967295,T.g[2]=T.g[2]+b&4294967295,T.g[3]=T.g[3]+A&4294967295}r.prototype.v=function(T,_){_===void 0&&(_=T.length);let I=_-this.blockSize,C=this.C,b=this.h,A=0;for(;A<_;){if(b==0)for(;A<=I;)i(this,T,A),A+=this.blockSize;if(typeof T=="string"){for(;A<_;)if(C[b++]=T.charCodeAt(A++),b==this.blockSize){i(this,C),b=0;break}}else for(;A<_;)if(C[b++]=T[A++],b==this.blockSize){i(this,C),b=0;break}}this.h=b,this.o+=_},r.prototype.A=function(){var T=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);T[0]=128;for(var _=1;_<T.length-8;++_)T[_]=0;_=this.o*8;for(var I=T.length-8;I<T.length;++I)T[I]=_&255,_/=256;for(this.v(T),T=Array(16),_=0,I=0;I<4;++I)for(let C=0;C<32;C+=8)T[_++]=this.g[I]>>>C&255;return T};function s(T,_){var I=a;return Object.prototype.hasOwnProperty.call(I,T)?I[T]:I[T]=_(T)}function o(T,_){this.h=_;let I=[],C=!0;for(let b=T.length-1;b>=0;b--){let A=T[b]|0;C&&A==_||(I[b]=A,C=!1)}this.g=I}var a={};function c(T){return-128<=T&&T<128?s(T,function(_){return new o([_|0],_<0?-1:0)}):new o([T|0],T<0?-1:0)}function d(T){if(isNaN(T)||!isFinite(T))return p;if(T<0)return M(d(-T));let _=[],I=1;for(let C=0;T>=I;C++)_[C]=T/I|0,I*=4294967296;return new o(_,0)}function h(T,_){if(T.length==0)throw Error("number format error: empty string");if(_=_||10,_<2||36<_)throw Error("radix out of range: "+_);if(T.charAt(0)=="-")return M(h(T.substring(1),_));if(T.indexOf("-")>=0)throw Error('number format error: interior "-" character');let I=d(Math.pow(_,8)),C=p;for(let A=0;A<T.length;A+=8){var b=Math.min(8,T.length-A);let w=parseInt(T.substring(A,A+b),_);b<8?(b=d(Math.pow(_,b)),C=C.j(b).add(d(w))):(C=C.j(I),C=C.add(d(w)))}return C}var p=c(0),y=c(1),E=c(16777216);n=o.prototype,n.m=function(){if(P(this))return-M(this).m();let T=0,_=1;for(let I=0;I<this.g.length;I++){let C=this.i(I);T+=(C>=0?C:4294967296+C)*_,_*=4294967296}return T},n.toString=function(T){if(T=T||10,T<2||36<T)throw Error("radix out of range: "+T);if(k(this))return"0";if(P(this))return"-"+M(this).toString(T);let _=d(Math.pow(T,6));var I=this;let C="";for(;;){let b=De(I,_).g;I=H(I,b.j(_));let A=((I.g.length>0?I.g[0]:I.h)>>>0).toString(T);if(I=b,k(I))return A+C;for(;A.length<6;)A="0"+A;C=A+C}},n.i=function(T){return T<0?0:T<this.g.length?this.g[T]:this.h};function k(T){if(T.h!=0)return!1;for(let _=0;_<T.g.length;_++)if(T.g[_]!=0)return!1;return!0}function P(T){return T.h==-1}n.l=function(T){return T=H(this,T),P(T)?-1:k(T)?0:1};function M(T){let _=T.g.length,I=[];for(let C=0;C<_;C++)I[C]=~T.g[C];return new o(I,~T.h).add(y)}n.abs=function(){return P(this)?M(this):this},n.add=function(T){let _=Math.max(this.g.length,T.g.length),I=[],C=0;for(let b=0;b<=_;b++){let A=C+(this.i(b)&65535)+(T.i(b)&65535),w=(A>>>16)+(this.i(b)>>>16)+(T.i(b)>>>16);C=w>>>16,A&=65535,w&=65535,I[b]=w<<16|A}return new o(I,I[I.length-1]&-2147483648?-1:0)};function H(T,_){return T.add(M(_))}n.j=function(T){if(k(this)||k(T))return p;if(P(this))return P(T)?M(this).j(M(T)):M(M(this).j(T));if(P(T))return M(this.j(M(T)));if(this.l(E)<0&&T.l(E)<0)return d(this.m()*T.m());let _=this.g.length+T.g.length,I=[];for(var C=0;C<2*_;C++)I[C]=0;for(C=0;C<this.g.length;C++)for(let b=0;b<T.g.length;b++){let A=this.i(C)>>>16,w=this.i(C)&65535,_t=T.i(b)>>>16,Wn=T.i(b)&65535;I[2*C+2*b]+=w*Wn,Y(I,2*C+2*b),I[2*C+2*b+1]+=A*Wn,Y(I,2*C+2*b+1),I[2*C+2*b+1]+=w*_t,Y(I,2*C+2*b+1),I[2*C+2*b+2]+=A*_t,Y(I,2*C+2*b+2)}for(T=0;T<_;T++)I[T]=I[2*T+1]<<16|I[2*T];for(T=_;T<2*_;T++)I[T]=0;return new o(I,0)};function Y(T,_){for(;(T[_]&65535)!=T[_];)T[_+1]+=T[_]>>>16,T[_]&=65535,_++}function ee(T,_){this.g=T,this.h=_}function De(T,_){if(k(_))throw Error("division by zero");if(k(T))return new ee(p,p);if(P(T))return _=De(M(T),_),new ee(M(_.g),M(_.h));if(P(_))return _=De(T,M(_)),new ee(M(_.g),_.h);if(T.g.length>30){if(P(T)||P(_))throw Error("slowDivide_ only works with positive integers.");for(var I=y,C=_;C.l(T)<=0;)I=et(I),C=et(C);var b=ve(I,1),A=ve(C,1);for(C=ve(C,2),I=ve(I,2);!k(C);){var w=A.add(C);w.l(T)<=0&&(b=b.add(I),A=w),C=ve(C,1),I=ve(I,1)}return _=H(T,b.j(_)),new ee(b,_)}for(b=p;T.l(_)>=0;){for(I=Math.max(1,Math.floor(T.m()/_.m())),C=Math.ceil(Math.log(I)/Math.LN2),C=C<=48?1:Math.pow(2,C-48),A=d(I),w=A.j(_);P(w)||w.l(T)>0;)I-=C,A=d(I),w=A.j(_);k(A)&&(A=y),b=b.add(A),T=H(T,w)}return new ee(b,T)}n.B=function(T){return De(this,T).h},n.and=function(T){let _=Math.max(this.g.length,T.g.length),I=[];for(let C=0;C<_;C++)I[C]=this.i(C)&T.i(C);return new o(I,this.h&T.h)},n.or=function(T){let _=Math.max(this.g.length,T.g.length),I=[];for(let C=0;C<_;C++)I[C]=this.i(C)|T.i(C);return new o(I,this.h|T.h)},n.xor=function(T){let _=Math.max(this.g.length,T.g.length),I=[];for(let C=0;C<_;C++)I[C]=this.i(C)^T.i(C);return new o(I,this.h^T.h)};function et(T){let _=T.g.length+1,I=[];for(let C=0;C<_;C++)I[C]=T.i(C)<<1|T.i(C-1)>>>31;return new o(I,T.h)}function ve(T,_){let I=_>>5;_%=32;let C=T.g.length-I,b=[];for(let A=0;A<C;A++)b[A]=_>0?T.i(A+I)>>>_|T.i(A+I+1)<<32-_:T.i(A+I);return new o(b,T.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,PT=gF.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=h,Vs=gF.Integer=o}).apply(typeof pF<"u"?pF:typeof self<"u"?self:typeof window<"u"?window:{});var i_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ls={};var OT,wK,Xu,FT,vp,s_,VT,LT,UT;(function(){var n,e=Object.defineProperty;function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof i_=="object"&&i_];for(var g=0;g<u.length;++g){var v=u[g];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var r=t(this);function i(u,g){if(g)e:{var v=r;u=u.split(".");for(var D=0;D<u.length-1;D++){var O=u[D];if(!(O in v))break e;v=v[O]}u=u[u.length-1],D=v[u],g=g(D),g!=D&&g!=null&&e(v,u,{configurable:!0,writable:!0,value:g})}}i("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(u){return u||function(g){var v=[],D;for(D in g)Object.prototype.hasOwnProperty.call(g,D)&&v.push([D,g[D]]);return v}});var s=s||{},o=this||self;function a(u){var g=typeof u;return g=="object"&&u!=null||g=="function"}function c(u,g,v){return u.call.apply(u.bind,arguments)}function d(u,g,v){return d=c,d.apply(null,arguments)}function h(u,g){var v=Array.prototype.slice.call(arguments,1);return function(){var D=v.slice();return D.push.apply(D,arguments),u.apply(this,D)}}function p(u,g){function v(){}v.prototype=g.prototype,u.Z=g.prototype,u.prototype=new v,u.prototype.constructor=u,u.Ob=function(D,O,L){for(var J=Array(arguments.length-2),we=2;we<arguments.length;we++)J[we-2]=arguments[we];return g.prototype[O].apply(D,J)}}var y=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function E(u){let g=u.length;if(g>0){let v=Array(g);for(let D=0;D<g;D++)v[D]=u[D];return v}return[]}function k(u,g){for(let D=1;D<arguments.length;D++){let O=arguments[D];var v=typeof O;if(v=v!="object"?v:O?Array.isArray(O)?"array":v:"null",v=="array"||v=="object"&&typeof O.length=="number"){v=u.length||0;let L=O.length||0;u.length=v+L;for(let J=0;J<L;J++)u[v+J]=O[J]}else u.push(O)}}class P{constructor(g,v){this.i=g,this.j=v,this.h=0,this.g=null}get(){let g;return this.h>0?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function M(u){o.setTimeout(()=>{throw u},0)}function H(){var u=T;let g=null;return u.g&&(g=u.g,u.g=u.g.next,u.g||(u.h=null),g.next=null),g}class Y{constructor(){this.h=this.g=null}add(g,v){let D=ee.get();D.set(g,v),this.h?this.h.next=D:this.g=D,this.h=D}}var ee=new P(()=>new De,u=>u.reset());class De{constructor(){this.next=this.g=this.h=null}set(g,v){this.h=g,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let et,ve=!1,T=new Y,_=()=>{let u=Promise.resolve(void 0);et=()=>{u.then(I)}};function I(){for(var u;u=H();){try{u.h.call(u.g)}catch(v){M(v)}var g=ee;g.j(u),g.h<100&&(g.h++,u.next=g.g,g.g=u)}ve=!1}function C(){this.u=this.u,this.C=this.C}C.prototype.u=!1,C.prototype.dispose=function(){this.u||(this.u=!0,this.N())},C.prototype[Symbol.dispose]=function(){this.dispose()},C.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function b(u,g){this.type=u,this.g=this.target=g,this.defaultPrevented=!1}b.prototype.h=function(){this.defaultPrevented=!0};var A=(function(){if(!o.addEventListener||!Object.defineProperty)return!1;var u=!1,g=Object.defineProperty({},"passive",{get:function(){u=!0}});try{let v=()=>{};o.addEventListener("test",v,g),o.removeEventListener("test",v,g)}catch{}return u})();function w(u){return/^[\s\xa0]*$/.test(u)}function _t(u,g){b.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,g)}p(_t,b),_t.prototype.init=function(u,g){let v=this.type=u.type,D=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=g,g=u.relatedTarget,g||(v=="mouseover"?g=u.fromElement:v=="mouseout"&&(g=u.toElement)),this.relatedTarget=g,D?(this.clientX=D.clientX!==void 0?D.clientX:D.pageX,this.clientY=D.clientY!==void 0?D.clientY:D.pageY,this.screenX=D.screenX||0,this.screenY=D.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&_t.Z.h.call(this)},_t.prototype.h=function(){_t.Z.h.call(this);let u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Wn="closure_listenable_"+(Math.random()*1e6|0),Ew=0;function Fa(u,g,v,D,O){this.listener=u,this.proxy=null,this.src=g,this.type=v,this.capture=!!D,this.ha=O,this.key=++Ew,this.da=this.fa=!1}function gi(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function oo(u,g,v){for(let D in u)g.call(v,u[D],D,u)}function vg(u,g){for(let v in u)g.call(void 0,u[v],v,u)}function _g(u){let g={};for(let v in u)g[v]=u[v];return g}let jr="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Zt(u,g){let v,D;for(let O=1;O<arguments.length;O++){D=arguments[O];for(v in D)u[v]=D[v];for(let L=0;L<jr.length;L++)v=jr[L],Object.prototype.hasOwnProperty.call(D,v)&&(u[v]=D[v])}}function Il(u){this.src=u,this.g={},this.h=0}Il.prototype.add=function(u,g,v,D,O){let L=u.toString();u=this.g[L],u||(u=this.g[L]=[],this.h++);let J=oh(u,g,D,O);return J>-1?(g=u[J],v||(g.fa=!1)):(g=new Fa(g,this.src,L,!!D,O),g.fa=v,u.push(g)),g};function is(u,g){let v=g.type;if(v in u.g){var D=u.g[v],O=Array.prototype.indexOf.call(D,g,void 0),L;(L=O>=0)&&Array.prototype.splice.call(D,O,1),L&&(gi(g),u.g[v].length==0&&(delete u.g[v],u.h--))}}function oh(u,g,v,D){for(let O=0;O<u.length;++O){let L=u[O];if(!L.da&&L.listener==g&&L.capture==!!v&&L.ha==D)return O}return-1}var ss="closure_lm_"+(Math.random()*1e6|0),ah={};function wg(u,g,v,D,O){if(D&&D.once)return bl(u,g,v,D,O);if(Array.isArray(g)){for(let L=0;L<g.length;L++)wg(u,g[L],v,D,O);return null}return v=Dl(v),u&&u[Wn]?u.J(g,v,a(D)?!!D.capture:!!D,O):Va(u,g,v,!1,D,O)}function Va(u,g,v,D,O,L){if(!g)throw Error("Invalid event type");let J=a(O)?!!O.capture:!!O,we=Sl(u);if(we||(u[ss]=we=new Il(u)),v=we.add(g,v,D,J,L),v.proxy)return v;if(D=El(),v.proxy=D,D.src=u,D.listener=v,u.addEventListener)A||(O=J),O===void 0&&(O=!1),u.addEventListener(g.toString(),D,O);else if(u.attachEvent)u.attachEvent(Tl(g.toString()),D);else if(u.addListener&&u.removeListener)u.addListener(D);else throw Error("addEventListener and attachEvent are unavailable.");return v}function El(){function u(v){return g.call(u.src,u.listener,v)}let g=Ig;return u}function bl(u,g,v,D,O){if(Array.isArray(g)){for(let L=0;L<g.length;L++)bl(u,g[L],v,D,O);return null}return v=Dl(v),u&&u[Wn]?u.K(g,v,a(D)?!!D.capture:!!D,O):Va(u,g,v,!0,D,O)}function Cl(u,g,v,D,O){if(Array.isArray(g))for(var L=0;L<g.length;L++)Cl(u,g[L],v,D,O);else D=a(D)?!!D.capture:!!D,v=Dl(v),u&&u[Wn]?(u=u.i,L=String(g).toString(),L in u.g&&(g=u.g[L],v=oh(g,v,D,O),v>-1&&(gi(g[v]),Array.prototype.splice.call(g,v,1),g.length==0&&(delete u.g[L],u.h--)))):u&&(u=Sl(u))&&(g=u.g[g.toString()],u=-1,g&&(u=oh(g,v,D,O)),(v=u>-1?g[u]:null)&&La(v))}function La(u){if(typeof u!="number"&&u&&!u.da){var g=u.src;if(g&&g[Wn])is(g.i,u);else{var v=u.type,D=u.proxy;g.removeEventListener?g.removeEventListener(v,D,u.capture):g.detachEvent?g.detachEvent(Tl(v),D):g.addListener&&g.removeListener&&g.removeListener(D),(v=Sl(g))?(is(v,u),v.h==0&&(v.src=null,g[ss]=null)):gi(u)}}}function Tl(u){return u in ah?ah[u]:ah[u]="on"+u}function Ig(u,g){if(u.da)u=!0;else{g=new _t(g,this);let v=u.listener,D=u.ha||u.src;u.fa&&La(u),u=v.call(D,g)}return u}function Sl(u){return u=u[ss],u instanceof Il?u:null}var ch="__closure_events_fn_"+(Math.random()*1e9>>>0);function Dl(u){return typeof u=="function"?u:(u[ch]||(u[ch]=function(g){return u.handleEvent(g)}),u[ch])}function en(){C.call(this),this.i=new Il(this),this.M=this,this.G=null}p(en,C),en.prototype[Wn]=!0,en.prototype.removeEventListener=function(u,g,v,D){Cl(this,u,g,v,D)};function tn(u,g){var v,D=u.G;if(D)for(v=[];D;D=D.G)v.push(D);if(u=u.M,D=g.type||g,typeof g=="string")g=new b(g,u);else if(g instanceof b)g.target=g.target||u;else{var O=g;g=new b(D,u),Zt(g,O)}O=!0;let L,J;if(v)for(J=v.length-1;J>=0;J--)L=g.g=v[J],O=Ua(L,D,!0,g)&&O;if(L=g.g=u,O=Ua(L,D,!0,g)&&O,O=Ua(L,D,!1,g)&&O,v)for(J=0;J<v.length;J++)L=g.g=v[J],O=Ua(L,D,!1,g)&&O}en.prototype.N=function(){if(en.Z.N.call(this),this.i){var u=this.i;for(let g in u.g){let v=u.g[g];for(let D=0;D<v.length;D++)gi(v[D]);delete u.g[g],u.h--}}this.G=null},en.prototype.J=function(u,g,v,D){return this.i.add(String(u),g,!1,v,D)},en.prototype.K=function(u,g,v,D){return this.i.add(String(u),g,!0,v,D)};function Ua(u,g,v,D){if(g=u.i.g[String(g)],!g)return!0;g=g.concat();let O=!0;for(let L=0;L<g.length;++L){let J=g[L];if(J&&!J.da&&J.capture==v){let we=J.listener,l=J.ha||J.src;J.fa&&is(u.i,J),O=we.call(l,D)!==!1&&O}}return O&&!D.defaultPrevented}function bw(u,g){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=d(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(g)>2147483647?-1:o.setTimeout(u,g||0)}function Al(u){u.g=bw(()=>{u.g=null,u.i&&(u.i=!1,Al(u))},u.l);let g=u.h;u.h=null,u.m.apply(null,g)}class lh extends C{constructor(g,v){super(),this.m=g,this.l=v,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:Al(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function os(u){C.call(this),this.h=u,this.g={}}p(os,C);var nn=[];function fn(u){oo(u.g,function(g,v){this.g.hasOwnProperty(v)&&La(g)},u),u.g={}}os.prototype.N=function(){os.Z.N.call(this),fn(this)},os.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ao=o.JSON.stringify,Eg=o.JSON.parse,bg=class{stringify(u){return o.JSON.stringify(u,void 0)}parse(u){return o.JSON.parse(u,void 0)}};function Cg(){}function co(){}var lo={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function xl(){b.call(this,"d")}p(xl,b);function ja(){b.call(this,"c")}p(ja,b);var as={},Tg=null;function uo(){return Tg=Tg||new en}as.Ia="serverreachability";function uh(u){b.call(this,as.Ia,u)}p(uh,b);function ho(u){let g=uo();tn(g,new uh(g))}as.STAT_EVENT="statevent";function fo(u,g){b.call(this,as.STAT_EVENT,u),this.stat=g}p(fo,b);function rn(u){let g=uo();tn(g,new fo(g,u))}as.Ja="timingevent";function Rl(u,g){b.call(this,as.Ja,u),this.size=g}p(Rl,b);function sr(u,g){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){u()},g)}function po(){this.g=!0}po.prototype.ua=function(){this.g=!1};function kl(u,g,v,D,O,L){u.info(function(){if(u.g)if(L){var J="",we=L.split("&");for(let f=0;f<we.length;f++){var l=we[f].split("=");if(l.length>1){let m=l[0];l=l[1];let S=m.split("_");J=S.length>=2&&S[1]=="type"?J+(m+"="+l+"&"):J+(m+"=redacted&")}}}else J=null;else J=L;return"XMLHTTP REQ ("+D+") [attempt "+O+"]: "+g+`
`+v+`
`+J})}function Sg(u,g,v,D,O,L,J){u.info(function(){return"XMLHTTP RESP ("+D+") [ attempt "+O+"]: "+g+`
`+v+`
`+L+" "+J})}function Er(u,g,v,D){u.info(function(){return"XMLHTTP TEXT ("+g+"): "+bn(u,v)+(D?" "+D:"")})}function Dg(u,g){u.info(function(){return"TIMEOUT: "+g})}po.prototype.info=function(){};function bn(u,g){if(!u.g)return g;if(!g)return null;try{let L=JSON.parse(g);if(L){for(u=0;u<L.length;u++)if(Array.isArray(L[u])){var v=L[u];if(!(v.length<2)){var D=v[1];if(Array.isArray(D)&&!(D.length<1)){var O=D[0];if(O!="noop"&&O!="stop"&&O!="close")for(let J=1;J<D.length;J++)D[J]=""}}}}return ao(L)}catch{return g}}var Ba={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},go={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},mo;function dh(){}p(dh,Cg),dh.prototype.g=function(){return new XMLHttpRequest},mo=new dh;function $a(u){return encodeURIComponent(String(u))}function yo(u){var g=1;u=u.split(":");let v=[];for(;g>0&&u.length;)v.push(u.shift()),g--;return u.length&&v.push(u.join(":")),v}function mi(u,g,v,D){this.j=u,this.i=g,this.l=v,this.S=D||1,this.V=new os(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Ag}function Ag(){this.i=null,this.g="",this.h=!1}var Ha={},Nl={};function qa(u,g,v){u.M=1,u.A=Ka(or(g)),u.u=v,u.R=!0,za(u,null)}function za(u,g){u.F=Date.now(),vo(u),u.B=or(u.A);var v=u.B,D=u.S;Array.isArray(D)||(D=[String(D)]),Pg(v.i,"t",D),u.C=0,v=u.j.L,u.h=new Ag,u.g=zl(u.j,v?g:null,!u.u),u.P>0&&(u.O=new lh(d(u.Y,u,u.g),u.P)),g=u.V,v=u.g,D=u.ba;var O="readystatechange";Array.isArray(O)||(O&&(nn[0]=O.toString()),O=nn);for(let L=0;L<O.length;L++){let J=wg(v,O[L],D||g.handleEvent,!1,g.h||g);if(!J)break;g.g[J.key]=J}g=u.J?_g(u.J):{},u.u?(u.v||(u.v="POST"),g["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,g)):(u.v="GET",u.g.ea(u.B,u.v,null,g)),ho(),kl(u.i,u.v,u.B,u.l,u.S,u.u)}mi.prototype.ba=function(u){u=u.target;let g=this.O;g&&Je(u)==3?g.j():this.Y(u)},mi.prototype.Y=function(u){try{if(u==this.g)e:{let we=Je(this.g),l=this.g.ya(),f=this.g.ca();if(!(we<3)&&(we!=3||this.g&&(this.h.h||this.g.la()||Bg(this.g)))){this.K||we!=4||l==7||(l==8||f<=0?ho(3):ho(2)),Pl(this);var g=this.g.ca();this.X=g;var v=yi(this);if(this.o=g==200,Sg(this.i,this.v,this.B,this.l,this.S,we,g),this.o){if(this.U&&!this.L){t:{if(this.g){var D,O=this.g;if((D=O.g?O.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(D)){var L=D;break t}}L=null}if(u=L)Er(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,wo(this,u);else{this.o=!1,this.m=3,rn(12),cs(this),_o(this);break e}}if(this.R){u=!0;let m;for(;!this.K&&this.C<v.length;)if(m=xg(this,v),m==Nl){we==4&&(this.m=4,rn(14),u=!1),Er(this.i,this.l,null,"[Incomplete Response]");break}else if(m==Ha){this.m=4,rn(15),Er(this.i,this.l,v,"[Invalid Chunk]"),u=!1;break}else Er(this.i,this.l,m,null),wo(this,m);if(hh(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),we!=4||v.length!=0||this.h.h||(this.m=1,rn(16),u=!1),this.o=this.o&&u,!u)Er(this.i,this.l,v,"[Invalid Chunked Response]"),cs(this),_o(this);else if(v.length>0&&!this.W){this.W=!0;var J=this.j;J.g==this&&J.aa&&!J.P&&(J.j.info("Great, no buffering proxy detected. Bytes received: "+v.length),$l(J),J.P=!0,rn(11))}}else Er(this.i,this.l,v,null),wo(this,v);we==4&&cs(this),this.o&&!this.K&&(we==4?Th(this.j,this):(this.o=!1,vo(this)))}else Cw(this.g),g==400&&v.indexOf("Unknown SID")>0?(this.m=3,rn(12)):(this.m=0,rn(13)),cs(this),_o(this)}}}catch{}finally{}};function yi(u){if(!hh(u))return u.g.la();let g=Bg(u.g);if(g==="")return"";let v="",D=g.length,O=Je(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return cs(u),_o(u),"";u.h.i=new o.TextDecoder}for(let L=0;L<D;L++)u.h.h=!0,v+=u.h.i.decode(g[L],{stream:!(O&&L==D-1)});return g.length=0,u.h.g+=v,u.C=0,u.h.g}function hh(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function xg(u,g){var v=u.C,D=g.indexOf(`
`,v);return D==-1?Nl:(v=Number(g.substring(v,D)),isNaN(v)?Ha:(D+=1,D+v>g.length?Nl:(g=g.slice(D,D+v),u.C=D+v,g)))}mi.prototype.cancel=function(){this.K=!0,cs(this)};function vo(u){u.T=Date.now()+u.H,Ml(u,u.H)}function Ml(u,g){if(u.D!=null)throw Error("WatchDog timer not null");u.D=sr(d(u.aa,u),g)}function Pl(u){u.D&&(o.clearTimeout(u.D),u.D=null)}mi.prototype.aa=function(){this.D=null;let u=Date.now();u-this.T>=0?(Dg(this.i,this.B),this.M!=2&&(ho(),rn(17)),cs(this),this.m=2,_o(this)):Ml(this,this.T-u)};function _o(u){u.j.I==0||u.K||Th(u.j,u)}function cs(u){Pl(u);var g=u.O;g&&typeof g.dispose=="function"&&g.dispose(),u.O=null,fn(u.V),u.g&&(g=u.g,u.g=null,g.abort(),g.dispose())}function wo(u,g){try{var v=u.j;if(v.I!=0&&(v.g==u||Ga(v.h,u))){if(!u.L&&Ga(v.h,u)&&v.I==3){try{var D=v.Ba.g.parse(g)}catch{D=null}if(Array.isArray(D)&&D.length==3){var O=D;if(O[0]==0){e:if(!v.v){if(v.g)if(v.g.F+3e3<u.F)Hl(v),ls(v);else break e;Ao(v),rn(18)}}else v.xa=O[1],0<v.xa-v.K&&O[2]<37500&&v.F&&v.A==0&&!v.C&&(v.C=sr(d(v.Va,v),6e3));vi(v.h)<=1&&v.ta&&(v.ta=void 0)}else wi(v,11)}else if((u.L||v.g==u)&&Hl(v),!w(g))for(O=v.Ba.g.parse(g),g=0;g<O.length;g++){let f=O[g],m=f[0];if(!(m<=v.K))if(v.K=m,f=f[1],v.I==2)if(f[0]=="c"){v.M=f[1],v.ba=f[2];let S=f[3];S!=null&&(v.ka=S,v.j.info("VER="+v.ka));let V=f[4];V!=null&&(v.za=V,v.j.info("SVER="+v.za));let U=f[5];U!=null&&typeof U=="number"&&U>0&&(D=1.5*U,v.O=D,v.j.info("backChannelRequestTimeoutMs_="+D)),D=v;let K=u.g;if(K){let Qe=K.g?K.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Qe){var L=D.h;L.g||Qe.indexOf("spdy")==-1&&Qe.indexOf("quic")==-1&&Qe.indexOf("h2")==-1||(L.j=L.l,L.g=new Set,L.h&&(fh(L,L.h),L.h=null))}if(D.G){let Nt=K.g?K.g.getResponseHeader("X-HTTP-Session-Id"):null;Nt&&(D.wa=Nt,lt(D.J,D.G,Nt))}}v.I=3,v.l&&v.l.ra(),v.aa&&(v.T=Date.now()-u.F,v.j.info("Handshake RTT: "+v.T+"ms")),D=v;var J=u;if(D.na=ql(D,D.L?D.ba:null,D.W),J.L){ph(D.h,J);var we=J,l=D.O;l&&(we.H=l),we.D&&(Pl(we),vo(we)),D.g=J}else Bl(D);v.i.length>0&&Qn(v)}else f[0]!="stop"&&f[0]!="close"||wi(v,7);else v.I==3&&(f[0]=="stop"||f[0]=="close"?f[0]=="stop"?wi(v,7):jl(v):f[0]!="noop"&&v.l&&v.l.qa(f),v.A=0)}}ho(4)}catch{}}var Rg=class{constructor(u,g){this.g=u,this.map=g}};function Ol(u){this.l=u||10,o.PerformanceNavigationTiming?(u=o.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Io(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function vi(u){return u.h?1:u.g?u.g.size:0}function Ga(u,g){return u.h?u.h==g:u.g?u.g.has(g):!1}function fh(u,g){u.g?u.g.add(g):u.h=g}function ph(u,g){u.h&&u.h==g?u.h=null:u.g&&u.g.has(g)&&u.g.delete(g)}Ol.prototype.cancel=function(){if(this.i=gh(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let u of this.g.values())u.cancel();this.g.clear()}};function gh(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let g=u.i;for(let v of u.g.values())g=g.concat(v.G);return g}return E(u.i)}var mh=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function yh(u,g){if(u){u=u.split("&");for(let v=0;v<u.length;v++){let D=u[v].indexOf("="),O,L=null;D>=0?(O=u[v].substring(0,D),L=u[v].substring(D+1)):O=u[v],g(O,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function br(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let g;u instanceof br?(this.l=u.l,Eo(this,u.j),this.o=u.o,this.g=u.g,Wa(this,u.u),this.h=u.h,vh(this,Og(u.i)),this.m=u.m):u&&(g=String(u).match(mh))?(this.l=!1,Eo(this,g[1]||"",!0),this.o=Qa(g[2]||""),this.g=Qa(g[3]||"",!0),Wa(this,g[4]),this.h=Qa(g[5]||"",!0),vh(this,g[6]||"",!0),this.m=Qa(g[7]||"")):(this.l=!1,this.i=new $r(null,this.l))}br.prototype.toString=function(){let u=[];var g=this.j;g&&u.push(ar(g,Ya,!0),":");var v=this.g;return(v||g=="file")&&(u.push("//"),(g=this.o)&&u.push(ar(g,Ya,!0),"@"),u.push($a(v).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.u,v!=null&&u.push(":",String(v))),(v=this.h)&&(this.g&&v.charAt(0)!="/"&&u.push("/"),u.push(ar(v,v.charAt(0)=="/"?kg:Fl,!0))),(v=this.i.toString())&&u.push("?",v),(v=this.m)&&u.push("#",ar(v,Vl)),u.join("")},br.prototype.resolve=function(u){let g=or(this),v=!!u.j;v?Eo(g,u.j):v=!!u.o,v?g.o=u.o:v=!!u.g,v?g.g=u.g:v=u.u!=null;var D=u.h;if(v)Wa(g,u.u);else if(v=!!u.h){if(D.charAt(0)!="/")if(this.g&&!this.h)D="/"+D;else{var O=g.h.lastIndexOf("/");O!=-1&&(D=g.h.slice(0,O+1)+D)}if(O=D,O==".."||O==".")D="";else if(O.indexOf("./")!=-1||O.indexOf("/.")!=-1){D=O.lastIndexOf("/",0)==0,O=O.split("/");let L=[];for(let J=0;J<O.length;){let we=O[J++];we=="."?D&&J==O.length&&L.push(""):we==".."?((L.length>1||L.length==1&&L[0]!="")&&L.pop(),D&&J==O.length&&L.push("")):(L.push(we),D=!0)}D=L.join("/")}else D=O}return v?g.h=D:v=u.i.toString()!=="",v?vh(g,Og(u.i)):v=!!u.m,v&&(g.m=u.m),g};function or(u){return new br(u)}function Eo(u,g,v){u.j=v?Qa(g,!0):g,u.j&&(u.j=u.j.replace(/:$/,""))}function Wa(u,g){if(g){if(g=Number(g),isNaN(g)||g<0)throw Error("Bad port number "+g);u.u=g}else u.u=null}function vh(u,g,v){g instanceof $r?(u.i=g,Ja(u.i,u.l)):(v||(g=ar(g,ft)),u.i=new $r(g,u.l))}function lt(u,g,v){u.i.set(g,v)}function Ka(u){return lt(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function Qa(u,g){return u?g?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function ar(u,g,v){return typeof u=="string"?(u=encodeURI(u).replace(g,Br),v&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Br(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Ya=/[#\/\?@]/g,Fl=/[#\?:]/g,kg=/[#\?]/g,ft=/[#\?@]/g,Vl=/#/g;function $r(u,g){this.h=this.g=null,this.i=u||null,this.j=!!g}function cr(u){u.g||(u.g=new Map,u.h=0,u.i&&yh(u.i,function(g,v){u.add(decodeURIComponent(g.replace(/\+/g," ")),v)}))}n=$r.prototype,n.add=function(u,g){cr(this),this.i=null,u=bo(this,u);let v=this.g.get(u);return v||this.g.set(u,v=[]),v.push(g),this.h+=1,this};function Ng(u,g){cr(u),g=bo(u,g),u.g.has(g)&&(u.i=null,u.h-=u.g.get(g).length,u.g.delete(g))}function _h(u,g){return cr(u),g=bo(u,g),u.g.has(g)}n.forEach=function(u,g){cr(this),this.g.forEach(function(v,D){v.forEach(function(O){u.call(g,O,D,this)},this)},this)};function Mg(u,g){cr(u);let v=[];if(typeof g=="string")_h(u,g)&&(v=v.concat(u.g.get(bo(u,g))));else for(u=Array.from(u.g.values()),g=0;g<u.length;g++)v=v.concat(u[g]);return v}n.set=function(u,g){return cr(this),this.i=null,u=bo(this,u),_h(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[g]),this.h+=1,this},n.get=function(u,g){return u?(u=Mg(this,u),u.length>0?String(u[0]):g):g};function Pg(u,g,v){Ng(u,g),v.length>0&&(u.i=null,u.g.set(bo(u,g),E(v)),u.h+=v.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let u=[],g=Array.from(this.g.keys());for(let D=0;D<g.length;D++){var v=g[D];let O=$a(v);v=Mg(this,v);for(let L=0;L<v.length;L++){let J=O;v[L]!==""&&(J+="="+$a(v[L])),u.push(J)}}return this.i=u.join("&")};function Og(u){let g=new $r;return g.i=u.i,u.g&&(g.g=new Map(u.g),g.h=u.h),g}function bo(u,g){return g=String(g),u.j&&(g=g.toLowerCase()),g}function Ja(u,g){g&&!u.j&&(cr(u),u.i=null,u.g.forEach(function(v,D){let O=D.toLowerCase();D!=O&&(Ng(this,D),Pg(this,O,v))},u)),u.j=g}function _i(u,g){let v=new po;if(o.Image){let D=new Image;D.onload=h(Hr,v,"TestLoadImage: loaded",!0,g,D),D.onerror=h(Hr,v,"TestLoadImage: error",!1,g,D),D.onabort=h(Hr,v,"TestLoadImage: abort",!1,g,D),D.ontimeout=h(Hr,v,"TestLoadImage: timeout",!1,g,D),o.setTimeout(function(){D.ontimeout&&D.ontimeout()},1e4),D.src=u}else g(!1)}function Fg(u,g){let v=new po,D=new AbortController,O=setTimeout(()=>{D.abort(),Hr(v,"TestPingServer: timeout",!1,g)},1e4);fetch(u,{signal:D.signal}).then(L=>{clearTimeout(O),L.ok?Hr(v,"TestPingServer: ok",!0,g):Hr(v,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(O),Hr(v,"TestPingServer: error",!1,g)})}function Hr(u,g,v,D,O){try{O&&(O.onload=null,O.onerror=null,O.onabort=null,O.ontimeout=null),D(v)}catch{}}function Vg(){this.g=new bg}function qr(u){this.i=u.Sb||null,this.h=u.ab||!1}p(qr,Cg),qr.prototype.g=function(){return new Ll(this.i,this.h)};function Ll(u,g){en.call(this),this.H=u,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}p(Ll,en),n=Ll.prototype,n.open=function(u,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=g,this.readyState=1,Kn(this)},n.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;let g={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(g.body=u),(this.H||o).fetch(new Request(this.D,g)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Xa(this)),this.readyState=0},n.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Kn(this)),this.g&&(this.readyState=3,Kn(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Lg(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function Lg(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}n.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var g=u.value?u.value:new Uint8Array(0);(g=this.B.decode(g,{stream:!u.done}))&&(this.response=this.responseText+=g)}u.done?Xa(this):Kn(this),this.readyState==3&&Lg(this)}},n.Oa=function(u){this.g&&(this.response=this.responseText=u,Xa(this))},n.Na=function(u){this.g&&(this.response=u,Xa(this))},n.ga=function(){this.g&&Xa(this)};function Xa(u){u.readyState=4,u.l=null,u.j=null,u.B=null,Kn(u)}n.setRequestHeader=function(u,g){this.A.append(u,g)},n.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let u=[],g=this.h.entries();for(var v=g.next();!v.done;)v=v.value,u.push(v[0]+": "+v[1]),v=g.next();return u.join(`\r
`)};function Kn(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Ll.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Ug(u){let g="";return oo(u,function(v,D){g+=D,g+=":",g+=v,g+=`\r
`}),g}function wh(u,g,v){e:{for(D in v){var D=!1;break e}D=!0}D||(v=Ug(v),typeof u=="string"?v!=null&&$a(v):lt(u,g,v))}function ut(u){en.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}p(ut,en);var Ul=/^https?$/i,jg=["POST","PUT"];n=ut.prototype,n.Fa=function(u){this.H=u},n.ea=function(u,g,v,D){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);g=g?g.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():mo.g(),this.g.onreadystatechange=y(d(this.Ca,this));try{this.B=!0,this.g.open(g,String(u),!0),this.B=!1}catch(L){Co(this,L);return}if(u=v||"",v=new Map(this.headers),D)if(Object.getPrototypeOf(D)===Object.prototype)for(var O in D)v.set(O,D[O]);else if(typeof D.keys=="function"&&typeof D.get=="function")for(let L of D.keys())v.set(L,D.get(L));else throw Error("Unknown input type for opt_headers: "+String(D));D=Array.from(v.keys()).find(L=>L.toLowerCase()=="content-type"),O=o.FormData&&u instanceof o.FormData,!(Array.prototype.indexOf.call(jg,g,void 0)>=0)||D||O||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[L,J]of v)this.g.setRequestHeader(L,J);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(L){Co(this,L)}};function Co(u,g){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=g,u.o=5,To(u),So(u)}function To(u){u.A||(u.A=!0,tn(u,"complete"),tn(u,"error"))}n.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,tn(this,"complete"),tn(this,"abort"),So(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),So(this,!0)),ut.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Ih(this):this.Xa())},n.Xa=function(){Ih(this)};function Ih(u){if(u.h&&typeof s<"u"){if(u.v&&Je(u)==4)setTimeout(u.Ca.bind(u),0);else if(tn(u,"readystatechange"),Je(u)==4){u.h=!1;try{let L=u.ca();e:switch(L){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var v;if(!(v=g)){var D;if(D=L===0){let J=String(u.D).match(mh)[1]||null;!J&&o.self&&o.self.location&&(J=o.self.location.protocol.slice(0,-1)),D=!Ul.test(J?J.toLowerCase():"")}v=D}if(v)tn(u,"complete"),tn(u,"success");else{u.o=6;try{var O=Je(u)>2?u.g.statusText:""}catch{O=""}u.l=O+" ["+u.ca()+"]",To(u)}}finally{So(u)}}}}function So(u,g){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);let v=u.g;u.g=null,g||tn(u,"ready");try{v.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function Je(u){return u.g?u.g.readyState:0}n.ca=function(){try{return Je(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(u){if(this.g){var g=this.g.responseText;return u&&g.indexOf(u)==0&&(g=g.substring(u.length)),Eg(g)}};function Bg(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Cw(u){let g={};u=(u.g&&Je(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let D=0;D<u.length;D++){if(w(u[D]))continue;var v=yo(u[D]);let O=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();let L=g[O]||[];g[O]=L,L.push(v)}vg(g,function(D){return D.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Do(u,g,v){return v&&v.internalChannelParams&&v.internalChannelParams[u]||g}function Eh(u){this.za=0,this.i=[],this.j=new po,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Do("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Do("baseRetryDelayMs",5e3,u),this.Za=Do("retryDelaySeedMs",1e4,u),this.Ta=Do("forwardChannelMaxRetries",2,u),this.va=Do("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new Ol(u&&u.concurrentRequestLimit),this.Ba=new Vg,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Eh.prototype,n.ka=8,n.I=1,n.connect=function(u,g,v,D){rn(0),this.W=u,this.H=g||{},v&&D!==void 0&&(this.H.OSID=v,this.H.OAID=D),this.F=this.X,this.J=ql(this,null,this.W),Qn(this)};function jl(u){if(bh(u),u.I==3){var g=u.V++,v=or(u.J);if(lt(v,"SID",u.M),lt(v,"RID",g),lt(v,"TYPE","terminate"),zr(u,v),g=new mi(u,u.j,g),g.M=2,g.A=Ka(or(v)),v=!1,o.navigator&&o.navigator.sendBeacon)try{v=o.navigator.sendBeacon(g.A.toString(),"")}catch{}!v&&o.Image&&(new Image().src=g.A,v=!0),v||(g.g=zl(g.j,null),g.g.ea(g.A)),g.F=Date.now(),vo(g)}Sh(u)}function ls(u){u.g&&($l(u),u.g.cancel(),u.g=null)}function bh(u){ls(u),u.v&&(o.clearTimeout(u.v),u.v=null),Hl(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&o.clearTimeout(u.m),u.m=null)}function Qn(u){if(!Io(u.h)&&!u.m){u.m=!0;var g=u.Ea;et||_(),ve||(et(),ve=!0),T.add(g,u),u.D=0}}function $g(u,g){return vi(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=g.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=sr(d(u.Ea,u,g),xo(u,u.D)),u.D++,!0)}n.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;let O=new mi(this,this.j,u),L=this.o;if(this.U&&(L?(L=_g(L),Zt(L,this.U)):L=this.U),this.u!==null||this.R||(O.J=L,L=null),this.S)e:{for(var g=0,v=0;v<this.i.length;v++){t:{var D=this.i[v];if("__data__"in D.map&&(D=D.map.__data__,typeof D=="string")){D=D.length;break t}D=void 0}if(D===void 0)break;if(g+=D,g>4096){g=v;break e}if(g===4096||v===this.i.length-1){g=v+1;break e}}g=1e3}else g=1e3;g=Ch(this,O,g),v=or(this.J),lt(v,"RID",u),lt(v,"CVER",22),this.G&&lt(v,"X-HTTP-Session-Id",this.G),zr(this,v),L&&(this.R?g="headers="+$a(Ug(L))+"&"+g:this.u&&wh(v,this.u,L)),fh(this.h,O),this.Ra&&lt(v,"TYPE","init"),this.S?(lt(v,"$req",g),lt(v,"SID","null"),O.U=!0,qa(O,v,null)):qa(O,v,g),this.I=2}}else this.I==3&&(u?Hg(this,u):this.i.length==0||Io(this.h)||Hg(this))};function Hg(u,g){var v;g?v=g.l:v=u.V++;let D=or(u.J);lt(D,"SID",u.M),lt(D,"RID",v),lt(D,"AID",u.K),zr(u,D),u.u&&u.o&&wh(D,u.u,u.o),v=new mi(u,u.j,v,u.D+1),u.u===null&&(v.J=u.o),g&&(u.i=g.G.concat(u.i)),g=Ch(u,v,1e3),v.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),fh(u.h,v),qa(v,D,g)}function zr(u,g){u.H&&oo(u.H,function(v,D){lt(g,D,v)}),u.l&&oo({},function(v,D){lt(g,D,v)})}function Ch(u,g,v){v=Math.min(u.i.length,v);let D=u.l?d(u.l.Ka,u.l,u):null;e:{var O=u.i;let we=-1;for(;;){let l=["count="+v];we==-1?v>0?(we=O[0].g,l.push("ofs="+we)):we=0:l.push("ofs="+we);let f=!0;for(let m=0;m<v;m++){var L=O[m].g;let S=O[m].map;if(L-=we,L<0)we=Math.max(0,O[m].g-100),f=!1;else try{L="req"+L+"_"||"";try{var J=S instanceof Map?S:Object.entries(S);for(let[V,U]of J){let K=U;a(U)&&(K=ao(U)),l.push(L+V+"="+encodeURIComponent(K))}}catch(V){throw l.push(L+"type="+encodeURIComponent("_badmap")),V}}catch{D&&D(S)}}if(f){J=l.join("&");break e}}J=void 0}return u=u.i.splice(0,v),g.G=u,J}function Bl(u){if(!u.g&&!u.v){u.Y=1;var g=u.Da;et||_(),ve||(et(),ve=!0),T.add(g,u),u.A=0}}function Ao(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=sr(d(u.Da,u),xo(u,u.A)),u.A++,!0)}n.Da=function(){if(this.v=null,Za(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=sr(d(this.Wa,this),u)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,rn(10),ls(this),Za(this))};function $l(u){u.B!=null&&(o.clearTimeout(u.B),u.B=null)}function Za(u){u.g=new mi(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var g=or(u.na);lt(g,"RID","rpc"),lt(g,"SID",u.M),lt(g,"AID",u.K),lt(g,"CI",u.F?"0":"1"),!u.F&&u.ia&&lt(g,"TO",u.ia),lt(g,"TYPE","xmlhttp"),zr(u,g),u.u&&u.o&&wh(g,u.u,u.o),u.O&&(u.g.H=u.O);var v=u.g;u=u.ba,v.M=1,v.A=Ka(or(g)),v.u=null,v.R=!0,za(v,u)}n.Va=function(){this.C!=null&&(this.C=null,ls(this),Ao(this),rn(19))};function Hl(u){u.C!=null&&(o.clearTimeout(u.C),u.C=null)}function Th(u,g){var v=null;if(u.g==g){Hl(u),$l(u),u.g=null;var D=2}else if(Ga(u.h,g))v=g.G,ph(u.h,g),D=1;else return;if(u.I!=0){if(g.o)if(D==1){v=g.u?g.u.length:0,g=Date.now()-g.F;var O=u.D;D=uo(),tn(D,new Rl(D,v)),Qn(u)}else Bl(u);else if(O=g.m,O==3||O==0&&g.X>0||!(D==1&&$g(u,g)||D==2&&Ao(u)))switch(v&&v.length>0&&(g=u.h,g.i=g.i.concat(v)),O){case 1:wi(u,5);break;case 4:wi(u,10);break;case 3:wi(u,6);break;default:wi(u,2)}}}function xo(u,g){let v=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(v*=2),v*g}function wi(u,g){if(u.j.info("Error code "+g),g==2){var v=d(u.bb,u),D=u.Ua;let O=!D;D=new br(D||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||Eo(D,"https"),Ka(D),O?_i(D.toString(),v):Fg(D.toString(),v)}else rn(2);u.I=0,u.l&&u.l.pa(g),Sh(u),bh(u)}n.bb=function(u){u?(this.j.info("Successfully pinged google.com"),rn(2)):(this.j.info("Failed to ping google.com"),rn(1))};function Sh(u){if(u.I=0,u.ja=[],u.l){let g=gh(u.h);(g.length!=0||u.i.length!=0)&&(k(u.ja,g),k(u.ja,u.i),u.h.i.length=0,E(u.i),u.i.length=0),u.l.oa()}}function ql(u,g,v){var D=v instanceof br?or(v):new br(v);if(D.g!="")g&&(D.g=g+"."+D.g),Wa(D,D.u);else{var O=o.location;D=O.protocol,g=g?g+"."+O.hostname:O.hostname,O=+O.port;let L=new br(null);D&&Eo(L,D),g&&(L.g=g),O&&Wa(L,O),v&&(L.h=v),D=L}return v=u.G,g=u.wa,v&&g&&lt(D,v,g),lt(D,"VER",u.ka),zr(u,D),D}function zl(u,g,v){if(g&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return g=u.Aa&&!u.ma?new ut(new qr({ab:v})):new ut(u.ma),g.Fa(u.L),g}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Dh(){}n=Dh.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function us(){}us.prototype.g=function(u,g){return new Rn(u,g)};function Rn(u,g){en.call(this),this.g=new Eh(g),this.l=u,this.h=g&&g.messageUrlParams||null,u=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(u?u["X-WebChannel-Content-Type"]=g.messageContentType:u={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.sa&&(u?u["X-WebChannel-Client-Profile"]=g.sa:u={"X-WebChannel-Client-Profile":g.sa}),this.g.U=u,(u=g&&g.Qb)&&!w(u)&&(this.g.u=u),this.A=g&&g.supportsCrossDomainXhr||!1,this.v=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!w(g)&&(this.g.G=g,u=this.h,u!==null&&g in u&&(u=this.h,g in u&&delete u[g])),this.j=new ds(this)}p(Rn,en),Rn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Rn.prototype.close=function(){jl(this.g)},Rn.prototype.o=function(u){var g=this.g;if(typeof u=="string"){var v={};v.__data__=u,u=v}else this.v&&(v={},v.__data__=ao(u),u=v);g.i.push(new Rg(g.Ya++,u)),g.I==3&&Qn(g)},Rn.prototype.N=function(){this.g.l=null,delete this.j,jl(this.g),delete this.g,Rn.Z.N.call(this)};function Ah(u){xl.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var g=u.__sm__;if(g){e:{for(let v in g){u=v;break e}u=void 0}(this.i=u)&&(u=this.i,g=g!==null&&u in g?g[u]:void 0),this.data=g}else this.data=u}p(Ah,xl);function Ii(){ja.call(this),this.status=1}p(Ii,ja);function ds(u){this.g=u}p(ds,Dh),ds.prototype.ra=function(){tn(this.g,"a")},ds.prototype.qa=function(u){tn(this.g,new Ah(u))},ds.prototype.pa=function(u){tn(this.g,new Ii)},ds.prototype.oa=function(){tn(this.g,"b")},us.prototype.createWebChannel=us.prototype.g,Rn.prototype.send=Rn.prototype.o,Rn.prototype.open=Rn.prototype.m,Rn.prototype.close=Rn.prototype.close,UT=Ls.createWebChannelTransport=function(){return new us},LT=Ls.getStatEventTarget=function(){return uo()},VT=Ls.Event=as,s_=Ls.Stat={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ba.NO_ERROR=0,Ba.TIMEOUT=8,Ba.HTTP_ERROR=6,vp=Ls.ErrorCode=Ba,go.COMPLETE="complete",FT=Ls.EventType=go,co.EventType=lo,lo.OPEN="a",lo.CLOSE="b",lo.ERROR="c",lo.MESSAGE="d",en.prototype.listen=en.prototype.J,Xu=Ls.WebChannel=co,wK=Ls.FetchXmlHttpFactory=qr,ut.prototype.listenOnce=ut.prototype.K,ut.prototype.getLastError=ut.prototype.Ha,ut.prototype.getLastErrorCode=ut.prototype.ya,ut.prototype.getStatus=ut.prototype.ca,ut.prototype.getResponseJson=ut.prototype.La,ut.prototype.getResponseText=ut.prototype.la,ut.prototype.send=ut.prototype.ea,ut.prototype.setWithCredentials=ut.prototype.Fa,OT=Ls.XhrIo=ut}).apply(typeof i_<"u"?i_:typeof self<"u"?self:typeof window<"u"?window:{});var mF="@firebase/firestore",yF="4.9.2";var vn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};vn.UNAUTHENTICATED=new vn(null),vn.GOOGLE_CREDENTIALS=new vn("google-credentials-uid"),vn.FIRST_PARTY=new vn("first-party-uid"),vn.MOCK_USER=new vn("mock-user");var Ed="12.3.0";var Jc=new Yu("@firebase/firestore");function Zu(){return Jc.logLevel}function oe(n,...e){if(Jc.logLevel<=ze.DEBUG){let t=e.map(RD);Jc.debug(`Firestore (${Ed}): ${n}`,...t)}}function $s(n,...e){if(Jc.logLevel<=ze.ERROR){let t=e.map(RD);Jc.error(`Firestore (${Ed}): ${n}`,...t)}}function ad(n,...e){if(Jc.logLevel<=ze.WARN){let t=e.map(RD);Jc.warn(`Firestore (${Ed}): ${n}`,...t)}}function RD(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function me(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,cV(n,r,t)}function cV(n,e,t){let r=`FIRESTORE (${Ed}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw $s(r),new Error(r)}function at(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||cV(e,i,r)}function Te(n,e){return n}var z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},ne=class extends Ns{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Us=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var h_=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},zT=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(vn.UNAUTHENTICATED))}shutdown(){}},GT=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},WT=class{constructor(e){this.t=e,this.currentUser=vn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){at(this.o===void 0,42304);let r=this.i,i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve(),s=new Us;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Us,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let c=s;e.enqueueRetryable(async()=>{await c.promise,await i(this.currentUser)})},a=c=>{oe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(oe("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Us)}},0),o()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(oe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(at(typeof r.accessToken=="string",31837,{l:r}),new h_(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return at(e===null||typeof e=="string",2055,{h:e}),new vn(e)}},KT=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=vn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},QT=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new KT(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(vn.FIRST_PARTY))}shutdown(){}invalidateToken(){}},f_=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},YT=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,_2(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){at(this.o===void 0,3512);let r=s=>{s.error!=null&&oe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.m;return this.m=s.token,oe("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{oe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.V.getImmediate({optional:!0});s?i(s):oe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new f_(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(at(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new f_(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function IK(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var Cp=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=IK(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%62))}return r}};function $e(n,e){return n<e?-1:n>e?1:0}function JT(n,e){let t=Math.min(n.length,e.length);for(let r=0;r<t;r++){let i=n.charAt(r),s=e.charAt(r);if(i!==s)return jT(i)===jT(s)?$e(i,s):jT(i)?1:-1}return $e(n.length,e.length)}var EK=55296,bK=57343;function jT(n){let e=n.charCodeAt(0);return e>=EK&&e<=bK}function cd(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var vF="__name__",p_=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&me(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&me(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let s=n.compareSegments(e.get(i),t.get(i));if(s!==0)return s}return $e(e.length,t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):JT(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Vs.fromString(e.substring(4,e.length-2))}},Et=class n extends p_{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new ne(z.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},CK=/^[_a-zA-Z][_a-zA-Z0-9]*$/,_r=class n extends p_{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return CK.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===vF}static keyField(){return new n([vF])}static fromServerFormat(e){let t=[],r="",i=0,s=()=>{if(r.length===0)throw new ne(z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},o=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new ne(z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new ne(z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new ne(z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var he=class n{constructor(e){this.path=e}static fromPath(e){return new n(Et.fromString(e))}static fromName(e){return new n(Et.fromString(e).popFirst(5))}static empty(){return new n(Et.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Et.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Et.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new Et(e.slice()))}};function lV(n,e,t){if(!t)throw new ne(z.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function TK(n,e,t,r){if(e===!0&&r===!0)throw new ne(z.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function _F(n){if(!he.isDocumentKey(n))throw new ne(z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function wF(n){if(he.isDocumentKey(n))throw new ne(z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function uV(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function z_(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":me(12329,{type:typeof n})}function js(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ne(z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=z_(n);throw new ne(z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function zt(n,e){let t={typeString:n};return e&&(t.value=e),t}function Fp(n,e){if(!uV(n))throw new ne(z.INVALID_ARGUMENT,"JSON must be an object");let t;for(let r in e)if(e[r]){let i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}let o=n[r];if(i&&typeof o!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&o!==s.value){t=`Expected '${r}' field to equal '${s.value}'`;break}}if(t)throw new ne(z.INVALID_ARGUMENT,t);return!0}var IF=-62135596800,EF=1e6,Gt=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*EF);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ne(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ne(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<IF)throw new ne(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ne(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/EF}_compareTo(e){return this.seconds===e.seconds?$e(this.nanoseconds,e.nanoseconds):$e(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:n._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Fp(e,n._jsonSchema))return new n(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-IF;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};Gt._jsonSchemaVersion="firestore/timestamp/1.0",Gt._jsonSchema={type:zt("string",Gt._jsonSchemaVersion),seconds:zt("number"),nanoseconds:zt("number")};var Re=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new Gt(0,0))}static max(){return new n(new Gt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Tp=-1,XT=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};XT.UNKNOWN_ID=-1;function SK(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Re.fromTimestamp(r===1e9?new Gt(t+1,0):new Gt(t,r));return new Xc(i,he.empty(),e)}function DK(n){return new Xc(n.readTime,n.key,Tp)}var Xc=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(Re.min(),he.empty(),Tp)}static max(){return new n(Re.max(),he.empty(),Tp)}};function AK(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=he.comparator(n.documentKey,e.documentKey),t!==0?t:$e(n.largestBatchId,e.largestBatchId))}var xK="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",ZT=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};async function bd(n){if(n.code!==z.FAILED_PRECONDITION||n.message!==xK)throw n;oe("LocalStore","Unexpectedly lost primary lease")}var G=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&me(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&t()},c=>r(c))}),o=!0,s===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let s=e.length,o=new Array(s),a=0;for(let c=0;c<s;c++){let d=c;t(e[d]).next(h=>{o[d]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,t){return new n((r,i)=>{let s=()=>{e()===!0?t().next(()=>{s()},i):r()};s()})}};function RK(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Cd(n){return n.name==="IndexedDbTransactionError"}var kD=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>r.writeSequenceNumber(i))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.ue&&this.ue(t),t}}n.ce=-1;return n})(),ND=-1;function G_(n){return n==null}function Sp(n){return n===0&&1/n==-1/0}function kK(n){return typeof n=="number"&&Number.isInteger(n)&&!Sp(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var dV="";function NK(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=bF(e)),e=MK(n.get(t),e);return bF(e)}function MK(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let s=n.charAt(i);switch(s){case"\0":t+="";break;case dV:t+="";break;default:t+=s}}return t}function bF(n){return n+dV+""}var PK="remoteDocuments",hV="owner";var fV="mutationQueues";var pV="mutations";var gV="documentMutations",OK="remoteDocumentsV14";var mV="remoteDocumentGlobal";var yV="targets";var vV="targetDocuments";var _V="targetGlobal",wV="collectionParents";var IV="clientMetadata";var EV="bundles";var bV="namedQueries";var FK="indexConfiguration";var VK="indexState";var LK="indexEntries";var CV="documentOverlays";var UK="globals";var jK=[fV,pV,gV,PK,yV,hV,_V,vV,IV,mV,wV,EV,bV],w0e=[...jK,CV],BK=[fV,pV,gV,OK,yV,hV,_V,vV,IV,mV,wV,EV,bV,CV],$K=BK,HK=[...$K,FK,VK,LK];var I0e=[...HK,UK];function CF(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function _a(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function TV(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Rt=class n{constructor(e,t){this.comparator=e,this.root=t||Hi.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Hi.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Hi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new rd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new rd(this.root,e,this.comparator,!1)}getReverseIterator(){return new rd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new rd(this.root,e,this.comparator,!0)}},rd=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Hi=class n{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=s??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new n(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw me(43730,{key:this.key,value:this.value});if(this.right.isRed())throw me(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw me(27949);return e+(this.isRed()?0:1)}};Hi.EMPTY=null,Hi.RED=!0,Hi.BLACK=!1;Hi.EMPTY=new class{constructor(){this.size=0}get key(){throw me(57766)}get value(){throw me(16141)}get color(){throw me(16727)}get left(){throw me(29726)}get right(){throw me(36894)}copy(e,t,r,i,s){return this}insert(e,t,r){return new Hi(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var _n=class n{constructor(e){this.comparator=e,this.data=new Rt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new g_(this.data.getIterator())}getIteratorFrom(e){return new g_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},g_=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Pr=class n{constructor(e){this.fields=e,e.sort(_r.comparator)}static empty(){return new n([])}unionWith(e){let t=new _n(_r.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return cd(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var m_=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Ln=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=(function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new m_("Invalid base64 string: "+s):s}})(e);return new n(t)}static fromUint8Array(e){let t=(function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s})(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return $e(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Ln.EMPTY_BYTE_STRING=new Ln("");var qK=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Hs(n){if(at(!!n,39018),typeof n=="string"){let e=0,t=qK.exec(n);if(at(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:It(n.seconds),nanos:It(n.nanos)}}function It(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function qs(n){return typeof n=="string"?Ln.fromBase64String(n):Ln.fromUint8Array(n)}var SV="server_timestamp",DV="__type__",AV="__previous_value__",xV="__local_write_time__";function MD(n){return(n?.mapValue?.fields||{})[DV]?.stringValue===SV}function W_(n){let e=n.mapValue.fields[AV];return MD(e)?W_(e):e}function Dp(n){let e=Hs(n.mapValue.fields[xV].timestampValue);return new Gt(e.seconds,e.nanos)}var eS=class{constructor(e,t,r,i,s,o,a,c,d,h){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=d,this.isUsingEmulator=h}},y_="(default)",v_=class n{constructor(e,t){this.projectId=e,this.database=t||y_}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===y_}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var PD="__type__",RV="__max__",o_={mapValue:{fields:{__type__:{stringValue:RV}}}},OD="__vector__",ld="value";function ga(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?MD(n)?4:NV(n)?9007199254740991:kV(n)?10:11:me(28295,{value:n})}function Gi(n,e){if(n===e)return!0;let t=ga(n);if(t!==ga(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Dp(n).isEqual(Dp(e));case 3:return(function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=Hs(i.timestampValue),a=Hs(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(i,s){return qs(i.bytesValue).isEqual(qs(s.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(i,s){return It(i.geoPointValue.latitude)===It(s.geoPointValue.latitude)&&It(i.geoPointValue.longitude)===It(s.geoPointValue.longitude)})(n,e);case 2:return(function(i,s){if("integerValue"in i&&"integerValue"in s)return It(i.integerValue)===It(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=It(i.doubleValue),a=It(s.doubleValue);return o===a?Sp(o)===Sp(a):isNaN(o)&&isNaN(a)}return!1})(n,e);case 9:return cd(n.arrayValue.values||[],e.arrayValue.values||[],Gi);case 10:case 11:return(function(i,s){let o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(CF(o)!==CF(a))return!1;for(let c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!Gi(o[c],a[c])))return!1;return!0})(n,e);default:return me(52216,{left:n})}}function Ap(n,e){return(n.values||[]).find(t=>Gi(t,e))!==void 0}function ud(n,e){if(n===e)return 0;let t=ga(n),r=ga(e);if(t!==r)return $e(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return $e(n.booleanValue,e.booleanValue);case 2:return(function(s,o){let a=It(s.integerValue||s.doubleValue),c=It(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1})(n,e);case 3:return TF(n.timestampValue,e.timestampValue);case 4:return TF(Dp(n),Dp(e));case 5:return JT(n.stringValue,e.stringValue);case 6:return(function(s,o){let a=qs(s),c=qs(o);return a.compareTo(c)})(n.bytesValue,e.bytesValue);case 7:return(function(s,o){let a=s.split("/"),c=o.split("/");for(let d=0;d<a.length&&d<c.length;d++){let h=$e(a[d],c[d]);if(h!==0)return h}return $e(a.length,c.length)})(n.referenceValue,e.referenceValue);case 8:return(function(s,o){let a=$e(It(s.latitude),It(o.latitude));return a!==0?a:$e(It(s.longitude),It(o.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return SF(n.arrayValue,e.arrayValue);case 10:return(function(s,o){let a=s.fields||{},c=o.fields||{},d=a[ld]?.arrayValue,h=c[ld]?.arrayValue,p=$e(d?.values?.length||0,h?.values?.length||0);return p!==0?p:SF(d,h)})(n.mapValue,e.mapValue);case 11:return(function(s,o){if(s===o_.mapValue&&o===o_.mapValue)return 0;if(s===o_.mapValue)return 1;if(o===o_.mapValue)return-1;let a=s.fields||{},c=Object.keys(a),d=o.fields||{},h=Object.keys(d);c.sort(),h.sort();for(let p=0;p<c.length&&p<h.length;++p){let y=JT(c[p],h[p]);if(y!==0)return y;let E=ud(a[c[p]],d[h[p]]);if(E!==0)return E}return $e(c.length,h.length)})(n.mapValue,e.mapValue);default:throw me(23264,{he:t})}}function TF(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return $e(n,e);let t=Hs(n),r=Hs(e),i=$e(t.seconds,r.seconds);return i!==0?i:$e(t.nanos,r.nanos)}function SF(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let s=ud(t[i],r[i]);if(s)return s}return $e(t.length,r.length)}function dd(n){return tS(n)}function tS(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){let r=Hs(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return qs(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return he.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",i=!0;for(let s of t.values||[])i?i=!1:r+=",",r+=tS(s);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){let r=Object.keys(t.fields||{}).sort(),i="{",s=!0;for(let o of r)s?s=!1:i+=",",i+=`${o}:${tS(t.fields[o])}`;return i+"}"})(n.mapValue):me(61005,{value:n})}function l_(n){switch(ga(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=W_(n);return e?16+l_(e):16;case 5:return 2*n.stringValue.length;case 6:return qs(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce((i,s)=>i+l_(s),0)})(n.arrayValue);case 10:case 11:return(function(r){let i=0;return _a(r.fields,(s,o)=>{i+=s.length+l_(o)}),i})(n.mapValue);default:throw me(13486,{value:n})}}function DF(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function nS(n){return!!n&&"integerValue"in n}function FD(n){return!!n&&"arrayValue"in n}function AF(n){return!!n&&"nullValue"in n}function xF(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function u_(n){return!!n&&"mapValue"in n}function kV(n){return(n?.mapValue?.fields||{})[PD]?.stringValue===OD}function wp(n){if(n.geoPointValue)return{geoPointValue:B({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:B({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return _a(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=wp(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=wp(n.arrayValue.values[t]);return e}return B({},n)}function NV(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===RV}var b0e={mapValue:{fields:{[PD]:{stringValue:OD},[ld]:{arrayValue:{}}}}};var vr=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!u_(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=wp(t)}setAll(e){let t=_r.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){let c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=a.popLast()}o?r[a.lastSegment()]=wp(o):i.push(a.lastSegment())});let s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){let t=this.field(e.popLast());u_(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Gi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];u_(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){_a(t,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new n(wp(this.value))}};function MV(n){let e=[];return _a(n.fields,(t,r)=>{let i=new _r([t]);if(u_(r)){let s=MV(r.mapValue).fields;if(s.length===0)e.push(i);else for(let o of s)e.push(i.child(o))}else e.push(i)}),new Pr(e)}var ui=class n{constructor(e,t,r,i,s,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new n(e,0,Re.min(),Re.min(),Re.min(),vr.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,Re.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,Re.min(),Re.min(),vr.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,Re.min(),Re.min(),vr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Re.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=vr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=vr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Re.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var hd=class{constructor(e,t){this.position=e,this.inclusive=t}};function RF(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let s=e[i],o=n.position[i];if(s.field.isKeyField()?r=he.comparator(he.fromName(o.referenceValue),t.key):r=ud(o,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function kF(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Gi(n.position[t],e.position[t]))return!1;return!0}var fd=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function zK(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var __=class{},qt=class n extends __{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new iS(e,t,r):t==="array-contains"?new aS(e,r):t==="in"?new cS(e,r):t==="not-in"?new lS(e,r):t==="array-contains-any"?new uS(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new sS(e,r):new oS(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(ud(t,this.value)):t!==null&&ga(this.value)===ga(t)&&this.matchesComparison(ud(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return me(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},di=class n extends __{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new n(e,t)}matches(e){return PV(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}};function PV(n){return n.op==="and"}function OV(n){return GK(n)&&PV(n)}function GK(n){for(let e of n.filters)if(e instanceof di)return!1;return!0}function rS(n){if(n instanceof qt)return n.field.canonicalString()+n.op.toString()+dd(n.value);if(OV(n))return n.filters.map(e=>rS(e)).join(",");{let e=n.filters.map(t=>rS(t)).join(",");return`${n.op}(${e})`}}function FV(n,e){return n instanceof qt?(function(r,i){return i instanceof qt&&r.op===i.op&&r.field.isEqual(i.field)&&Gi(r.value,i.value)})(n,e):n instanceof di?(function(r,i){return i instanceof di&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&FV(o,i.filters[a]),!0):!1})(n,e):void me(19439)}function VV(n){return n instanceof qt?(function(t){return`${t.field.canonicalString()} ${t.op} ${dd(t.value)}`})(n):n instanceof di?(function(t){return t.op.toString()+" {"+t.getFilters().map(VV).join(" ,")+"}"})(n):"Filter"}var iS=class extends qt{constructor(e,t,r){super(e,t,r),this.key=he.fromName(r.referenceValue)}matches(e){let t=he.comparator(e.key,this.key);return this.matchesComparison(t)}},sS=class extends qt{constructor(e,t){super(e,"in",t),this.keys=LV("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},oS=class extends qt{constructor(e,t){super(e,"not-in",t),this.keys=LV("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function LV(n,e){return(e.arrayValue?.values||[]).map(t=>he.fromName(t.referenceValue))}var aS=class extends qt{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return FD(t)&&Ap(t.arrayValue,this.value)}},cS=class extends qt{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&Ap(this.value.arrayValue,t)}},lS=class extends qt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ap(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Ap(this.value.arrayValue,t)}},uS=class extends qt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!FD(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Ap(this.value.arrayValue,r))}};var dS=class{constructor(e,t=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.Te=null}};function NF(n,e=null,t=[],r=[],i=null,s=null,o=null){return new dS(n,e,t,r,i,s,o)}function VD(n){let e=Te(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>rS(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>(function(s){return s.field.canonicalString()+s.dir})(r)).join(","),G_(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>dd(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>dd(r)).join(",")),e.Te=t}return e.Te}function LD(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!zK(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!FV(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!kF(n.startAt,e.startAt)&&kF(n.endAt,e.endAt)}function hS(n){return he.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var Zc=class{constructor(e,t=null,r=[],i=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}};function WK(n,e,t,r,i,s,o,a){return new Zc(n,e,t,r,i,s,o,a)}function UD(n){return new Zc(n)}function MF(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function UV(n){return n.collectionGroup!==null}function Ip(n){let e=Te(n);if(e.Ie===null){e.Ie=[];let t=new Set;for(let s of e.explicitOrderBy)e.Ie.push(s),t.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new _n(_r.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(d=>{d.isInequality()&&(a=a.add(d.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.Ie.push(new fd(s,r))}),t.has(_r.keyField().canonicalString())||e.Ie.push(new fd(_r.keyField(),r))}return e.Ie}function qi(n){let e=Te(n);return e.Ee||(e.Ee=KK(e,Ip(n))),e.Ee}function KK(n,e){if(n.limitType==="F")return NF(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new fd(i.field,s)});let t=n.endAt?new hd(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new hd(n.startAt.position,n.startAt.inclusive):null;return NF(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function fS(n,e){let t=n.filters.concat([e]);return new Zc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function pS(n,e,t){return new Zc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function K_(n,e){return LD(qi(n),qi(e))&&n.limitType===e.limitType}function jV(n){return`${VD(qi(n))}|lt:${n.limitType}`}function ed(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>VV(i)).join(", ")}]`),G_(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>(function(o){return`${o.field.canonicalString()} (${o.dir})`})(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>dd(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>dd(i)).join(",")),`Target(${r})`})(qi(n))}; limitType=${n.limitType})`}function Q_(n,e){return e.isFoundDocument()&&(function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):he.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)})(n,e)&&(function(r,i){for(let s of Ip(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0})(n,e)&&(function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0})(n,e)&&(function(r,i){return!(r.startAt&&!(function(o,a,c){let d=RF(o,a,c);return o.inclusive?d<=0:d<0})(r.startAt,Ip(r),i)||r.endAt&&!(function(o,a,c){let d=RF(o,a,c);return o.inclusive?d>=0:d>0})(r.endAt,Ip(r),i))})(n,e)}function QK(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function BV(n){return(e,t)=>{let r=!1;for(let i of Ip(n)){let s=YK(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function YK(n,e,t){let r=n.field.isKeyField()?he.comparator(e.key,t.key):(function(s,o,a){let c=o.data.field(s),d=a.data.field(s);return c!==null&&d!==null?ud(c,d):me(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return me(19790,{direction:n.dir})}}var zs=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){_a(this.inner,(t,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return TV(this.inner)}size(){return this.innerSize}};var JK=new Rt(he.comparator);function Gs(){return JK}var $V=new Rt(he.comparator);function _p(...n){let e=$V;for(let t of n)e=e.insert(t.key,t);return e}function HV(n){let e=$V;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Wc(){return Ep()}function qV(){return Ep()}function Ep(){return new zs(n=>n.toString(),(n,e)=>n.isEqual(e))}var XK=new Rt(he.comparator),ZK=new _n(he.comparator);function He(...n){let e=ZK;for(let t of n)e=e.add(t);return e}var eQ=new _n($e);function tQ(){return eQ}function jD(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Sp(e)?"-0":e}}function zV(n){return{integerValue:""+n}}function nQ(n,e){return kK(e)?zV(e):jD(n,e)}var pd=class{constructor(){this._=void 0}};function rQ(n,e,t){return n instanceof gd?(function(i,s){let o={fields:{[DV]:{stringValue:SV},[xV]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&MD(s)&&(s=W_(s)),s&&(o.fields[AV]=s),{mapValue:o}})(t,e):n instanceof el?WV(n,e):n instanceof tl?KV(n,e):(function(i,s){let o=GV(i,s),a=PF(o)+PF(i.Ae);return nS(o)&&nS(i.Ae)?zV(a):jD(i.serializer,a)})(n,e)}function iQ(n,e,t){return n instanceof el?WV(n,e):n instanceof tl?KV(n,e):t}function GV(n,e){return n instanceof md?(function(r){return nS(r)||(function(s){return!!s&&"doubleValue"in s})(r)})(e)?e:{integerValue:0}:null}var gd=class extends pd{},el=class extends pd{constructor(e){super(),this.elements=e}};function WV(n,e){let t=QV(e);for(let r of n.elements)t.some(i=>Gi(i,r))||t.push(r);return{arrayValue:{values:t}}}var tl=class extends pd{constructor(e){super(),this.elements=e}};function KV(n,e){let t=QV(e);for(let r of n.elements)t=t.filter(i=>!Gi(i,r));return{arrayValue:{values:t}}}var md=class extends pd{constructor(e,t){super(),this.serializer=e,this.Ae=t}};function PF(n){return It(n.integerValue||n.doubleValue)}function QV(n){return FD(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function sQ(n,e){return n.field.isEqual(e.field)&&(function(r,i){return r instanceof el&&i instanceof el||r instanceof tl&&i instanceof tl?cd(r.elements,i.elements,Gi):r instanceof md&&i instanceof md?Gi(r.Ae,i.Ae):r instanceof gd&&i instanceof gd})(n.transform,e.transform)}var gS=class{constructor(e,t){this.version=e,this.transformResults=t}},Bs=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function d_(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var yd=class{};function YV(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new xp(n.key,Bs.none()):new nl(n.key,n.data,Bs.none());{let t=n.data,r=vr.empty(),i=new _n(_r.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Wi(n.key,r,new Pr(i.toArray()),Bs.none())}}function oQ(n,e,t){n instanceof nl?(function(i,s,o){let a=i.value.clone(),c=FF(i.fieldTransforms,s,o.transformResults);a.setAll(c),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()})(n,e,t):n instanceof Wi?(function(i,s,o){if(!d_(i.precondition,s))return void s.convertToUnknownDocument(o.version);let a=FF(i.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(JV(i)),c.setAll(a),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()})(n,e,t):(function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()})(0,e,t)}function bp(n,e,t,r){return n instanceof nl?(function(s,o,a,c){if(!d_(s.precondition,o))return a;let d=s.value.clone(),h=VF(s.fieldTransforms,c,o);return d.setAll(h),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null})(n,e,t,r):n instanceof Wi?(function(s,o,a,c){if(!d_(s.precondition,o))return a;let d=VF(s.fieldTransforms,c,o),h=o.data;return h.setAll(JV(s)),h.setAll(d),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(p=>p.field))})(n,e,t,r):(function(s,o,a){return d_(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a})(n,e,t)}function aQ(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),s=GV(r.transform,i||null);s!=null&&(t===null&&(t=vr.empty()),t.set(r.field,s))}return t||null}function OF(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&cd(r,i,(s,o)=>sQ(s,o))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var nl=class extends yd{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Wi=class extends yd{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function JV(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function FF(n,e,t){let r=new Map;at(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let i=0;i<t.length;i++){let s=n[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,iQ(o,a,t[i]))}return r}function VF(n,e,t){let r=new Map;for(let i of n){let s=i.transform,o=t.data.field(i.field);r.set(i.field,rQ(s,o,e))}return r}var xp=class extends yd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},mS=class extends yd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var yS=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&oQ(s,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=bp(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=bp(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=qV();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=t.has(i.key)?null:a;let c=YV(o,a);c!==null&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(Re.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),He())}isEqual(e){return this.batchId===e.batchId&&cd(this.mutations,e.mutations,(t,r)=>OF(t,r))&&cd(this.baseMutations,e.baseMutations,(t,r)=>OF(t,r))}},vS=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){at(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=(function(){return XK})(),s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new n(e,t,r,i)}};var _S=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var wS=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var $t,Ge;function cQ(n){switch(n){case z.OK:return me(64938);case z.CANCELLED:case z.UNKNOWN:case z.DEADLINE_EXCEEDED:case z.RESOURCE_EXHAUSTED:case z.INTERNAL:case z.UNAVAILABLE:case z.UNAUTHENTICATED:return!1;case z.INVALID_ARGUMENT:case z.NOT_FOUND:case z.ALREADY_EXISTS:case z.PERMISSION_DENIED:case z.FAILED_PRECONDITION:case z.ABORTED:case z.OUT_OF_RANGE:case z.UNIMPLEMENTED:case z.DATA_LOSS:return!0;default:return me(15467,{code:n})}}function XV(n){if(n===void 0)return $s("GRPC error has no .code"),z.UNKNOWN;switch(n){case $t.OK:return z.OK;case $t.CANCELLED:return z.CANCELLED;case $t.UNKNOWN:return z.UNKNOWN;case $t.DEADLINE_EXCEEDED:return z.DEADLINE_EXCEEDED;case $t.RESOURCE_EXHAUSTED:return z.RESOURCE_EXHAUSTED;case $t.INTERNAL:return z.INTERNAL;case $t.UNAVAILABLE:return z.UNAVAILABLE;case $t.UNAUTHENTICATED:return z.UNAUTHENTICATED;case $t.INVALID_ARGUMENT:return z.INVALID_ARGUMENT;case $t.NOT_FOUND:return z.NOT_FOUND;case $t.ALREADY_EXISTS:return z.ALREADY_EXISTS;case $t.PERMISSION_DENIED:return z.PERMISSION_DENIED;case $t.FAILED_PRECONDITION:return z.FAILED_PRECONDITION;case $t.ABORTED:return z.ABORTED;case $t.OUT_OF_RANGE:return z.OUT_OF_RANGE;case $t.UNIMPLEMENTED:return z.UNIMPLEMENTED;case $t.DATA_LOSS:return z.DATA_LOSS;default:return me(39323,{code:n})}}(Ge=$t||($t={}))[Ge.OK=0]="OK",Ge[Ge.CANCELLED=1]="CANCELLED",Ge[Ge.UNKNOWN=2]="UNKNOWN",Ge[Ge.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ge[Ge.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ge[Ge.NOT_FOUND=5]="NOT_FOUND",Ge[Ge.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ge[Ge.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ge[Ge.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ge[Ge.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ge[Ge.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ge[Ge.ABORTED=10]="ABORTED",Ge[Ge.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ge[Ge.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ge[Ge.INTERNAL=13]="INTERNAL",Ge[Ge.UNAVAILABLE=14]="UNAVAILABLE",Ge[Ge.DATA_LOSS=15]="DATA_LOSS";var lQ=null;function uQ(){return new TextEncoder}var dQ=new Vs([4294967295,4294967295],0);function LF(n){let e=uQ().encode(n),t=new PT;return t.update(e),new Uint8Array(t.digest())}function UF(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Vs([t,r],0),new Vs([i,s],0)]}var IS=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Kc(`Invalid padding: ${t}`);if(r<0)throw new Kc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Kc(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Kc(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Vs.fromNumber(this.ge)}ye(e,t,r){let i=e.add(t.multiply(Vs.fromNumber(r)));return i.compare(dQ)===1&&(i=new Vs([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;let t=LF(e),[r,i]=UF(t);for(let s=0;s<this.hashCount;s++){let o=this.ye(r,i,s);if(!this.we(o))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new n(s,i,t);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.ge===0)return;let t=LF(e),[r,i]=UF(t);for(let s=0;s<this.hashCount;s++){let o=this.ye(r,i,s);this.Se(o)}}Se(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},Kc=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var w_=class n{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,Rp.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(Re.min(),i,new Rt($e),Gs(),He())}},Rp=class n{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,He(),He(),He())}};var id=class{constructor(e,t,r,i){this.be=e,this.removedTargetIds=t,this.key=r,this.De=i}},I_=class{constructor(e,t){this.targetId=e,this.Ce=t}},E_=class{constructor(e,t,r=Ln.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},b_=class{constructor(){this.ve=0,this.Fe=jF(),this.Me=Ln.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=He(),t=He(),r=He();return this.Fe.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:me(38017,{changeType:s})}}),new Rp(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=jF()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,at(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}},ES=class{constructor(e){this.Ge=e,this.ze=new Map,this.je=Gs(),this.Je=a_(),this.He=a_(),this.Ye=new Rt($e)}Ze(e){for(let t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(let t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,t=>{let r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:me(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach((r,i)=>{this.rt(i)&&t(i)})}st(e){let t=e.targetId,r=e.Ce.count,i=this.ot(t);if(i){let s=i.target;if(hS(s))if(r===0){let o=new he(s.path);this.et(t,o,ui.newNoDocument(o,Re.min()))}else at(r===1,20013,{expectedCount:r});else{let o=this._t(t);if(o!==r){let a=this.ut(e),c=a?this.ct(a,e,o):1;if(c!==0){this.it(t);let d=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,d)}lQ?.lt((function(h,p,y,E,k){let P={localCacheCount:h,existenceFilterCount:p.count,databaseId:y.database,projectId:y.projectId},M=p.unchangedNames;return M&&(P.bloomFilter={applied:k===0,hashCount:M?.hashCount??0,bitmapLength:M?.bits?.bitmap?.length??0,padding:M?.bits?.padding??0,mightContain:H=>E?.mightContain(H)??!1}),P})(o,e.Ce,this.Ge.ht(),a,c))}}}}ut(e){let t=e.Ce.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t,o,a;try{o=qs(r).toUint8Array()}catch(c){if(c instanceof m_)return ad("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new IS(o,i,s)}catch(c){return ad(c instanceof Kc?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.ge===0?null:a}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){let r=this.Ge.getRemoteKeysForTarget(t),i=0;return r.forEach(s=>{let o=this.Ge.ht(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.et(t,s,null),i++)}),i}Tt(e){let t=new Map;this.ze.forEach((s,o)=>{let a=this.ot(o);if(a){if(s.current&&hS(a.target)){let c=new he(a.target.path);this.It(c).has(o)||this.Et(o,c)||this.et(o,c,ui.newNoDocument(c,e))}s.Be&&(t.set(o,s.ke()),s.qe())}});let r=He();this.He.forEach((s,o)=>{let a=!0;o.forEachWhile(c=>{let d=this.ot(c);return!d||d.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.je.forEach((s,o)=>o.setReadTime(e));let i=new w_(e,t,this.Ye,this.je,r);return this.je=Gs(),this.Je=a_(),this.He=a_(),this.Ye=new Rt($e),i}Xe(e,t){if(!this.rt(e))return;let r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;let i=this.nt(e);this.Et(e,t)?i.Qe(t,1):i.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){let t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new b_,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new _n($e),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new _n($e),this.Je=this.Je.insert(e,t)),t}rt(e){let t=this.ot(e)!==null;return t||oe("WatchChangeAggregator","Detected inactive target",e),t}ot(e){let t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new b_),this.Ge.getRemoteKeysForTarget(e).forEach(t=>{this.et(e,t,null)})}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}};function a_(){return new Rt(he.comparator)}function jF(){return new Rt(he.comparator)}var hQ={asc:"ASCENDING",desc:"DESCENDING"},fQ={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},pQ={and:"AND",or:"OR"},bS=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function CS(n,e){return n.useProto3Json||G_(e)?e:{value:e}}function C_(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function ZV(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function gQ(n,e){return C_(n,e.toTimestamp())}function zi(n){return at(!!n,49232),Re.fromTimestamp((function(t){let r=Hs(t);return new Gt(r.seconds,r.nanos)})(n))}function BD(n,e){return TS(n,e).canonicalString()}function TS(n,e){let t=(function(i){return new Et(["projects",i.projectId,"databases",i.database])})(n).child("documents");return e===void 0?t:t.child(e)}function eL(n){let e=Et.fromString(n);return at(sL(e),10190,{key:e.toString()}),e}function SS(n,e){return BD(n.databaseId,e.path)}function BT(n,e){let t=eL(e);if(t.get(1)!==n.databaseId.projectId)throw new ne(z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ne(z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new he(nL(t))}function tL(n,e){return BD(n.databaseId,e)}function mQ(n){let e=eL(n);return e.length===4?Et.emptyPath():nL(e)}function DS(n){return new Et(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function nL(n){return at(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function BF(n,e,t){return{name:SS(n,e),fields:t.value.mapValue.fields}}function yQ(n,e){let t;if("targetChange"in e){e.targetChange;let r=(function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:me(39313,{state:d})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=(function(d,h){return d.useProto3Json?(at(h===void 0||typeof h=="string",58123),Ln.fromBase64String(h||"")):(at(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),Ln.fromUint8Array(h||new Uint8Array))})(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&(function(d){let h=d.code===void 0?z.UNKNOWN:XV(d.code);return new ne(h,d.message||"")})(o);t=new E_(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=BT(n,r.document.name),s=zi(r.document.updateTime),o=r.document.createTime?zi(r.document.createTime):Re.min(),a=new vr({mapValue:{fields:r.document.fields}}),c=ui.newFoundDocument(i,s,o,a),d=r.targetIds||[],h=r.removedTargetIds||[];t=new id(d,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=BT(n,r.document),s=r.readTime?zi(r.readTime):Re.min(),o=ui.newNoDocument(i,s),a=r.removedTargetIds||[];t=new id([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=BT(n,r.document),s=r.removedTargetIds||[];t=new id([],s,i,null)}else{if(!("filter"in e))return me(11601,{Rt:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,o=new wS(i,s),a=r.targetId;t=new I_(a,o)}}return t}function vQ(n,e){let t;if(e instanceof nl)t={update:BF(n,e.key,e.value)};else if(e instanceof xp)t={delete:SS(n,e.key)};else if(e instanceof Wi)t={update:BF(n,e.key,e.data),updateMask:DQ(e.fieldMask)};else{if(!(e instanceof mS))return me(16599,{Vt:e.type});t={verify:SS(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>(function(s,o){let a=o.transform;if(a instanceof gd)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof el)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof tl)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof md)return{fieldPath:o.field.canonicalString(),increment:a.Ae};throw me(20930,{transform:o.transform})})(0,r))),e.precondition.isNone||(t.currentDocument=(function(i,s){return s.updateTime!==void 0?{updateTime:gQ(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:me(27497)})(n,e.precondition)),t}function _Q(n,e){return n&&n.length>0?(at(e!==void 0,14353),n.map(t=>(function(i,s){let o=i.updateTime?zi(i.updateTime):zi(s);return o.isEqual(Re.min())&&(o=zi(s)),new gS(o,i.transformResults||[])})(t,e))):[]}function wQ(n,e){return{documents:[tL(n,e.path)]}}function IQ(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=tL(n,i);let s=(function(d){if(d.length!==0)return iL(di.create(d,"and"))})(e.filters);s&&(t.structuredQuery.where=s);let o=(function(d){if(d.length!==0)return d.map(h=>(function(y){return{field:td(y.field),direction:CQ(y.dir)}})(h))})(e.orderBy);o&&(t.structuredQuery.orderBy=o);let a=CS(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=(function(d){return{before:d.inclusive,values:d.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(d){return{before:!d.inclusive,values:d.position}})(e.endAt)),{ft:t,parent:i}}function EQ(n){let e=mQ(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){at(r===1,65062);let h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];t.where&&(s=(function(p){let y=rL(p);return y instanceof di&&OV(y)?y.getFilters():[y]})(t.where));let o=[];t.orderBy&&(o=(function(p){return p.map(y=>(function(k){return new fd(nd(k.field),(function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(k.direction))})(y))})(t.orderBy));let a=null;t.limit&&(a=(function(p){let y;return y=typeof p=="object"?p.value:p,G_(y)?null:y})(t.limit));let c=null;t.startAt&&(c=(function(p){let y=!!p.before,E=p.values||[];return new hd(E,y)})(t.startAt));let d=null;return t.endAt&&(d=(function(p){let y=!p.before,E=p.values||[];return new hd(E,y)})(t.endAt)),WK(e,i,o,s,a,"F",c,d)}function bQ(n,e){let t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return me(28987,{purpose:i})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function rL(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=nd(t.unaryFilter.field);return qt.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=nd(t.unaryFilter.field);return qt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=nd(t.unaryFilter.field);return qt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=nd(t.unaryFilter.field);return qt.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return me(61313);default:return me(60726)}})(n):n.fieldFilter!==void 0?(function(t){return qt.create(nd(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return me(58110);default:return me(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return di.create(t.compositeFilter.filters.map(r=>rL(r)),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return me(1026)}})(t.compositeFilter.op))})(n):me(30097,{filter:n})}function CQ(n){return hQ[n]}function TQ(n){return fQ[n]}function SQ(n){return pQ[n]}function td(n){return{fieldPath:n.canonicalString()}}function nd(n){return _r.fromServerFormat(n.fieldPath)}function iL(n){return n instanceof qt?(function(t){if(t.op==="=="){if(xF(t.value))return{unaryFilter:{field:td(t.field),op:"IS_NAN"}};if(AF(t.value))return{unaryFilter:{field:td(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(xF(t.value))return{unaryFilter:{field:td(t.field),op:"IS_NOT_NAN"}};if(AF(t.value))return{unaryFilter:{field:td(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:td(t.field),op:TQ(t.op),value:t.value}}})(n):n instanceof di?(function(t){let r=t.getFilters().map(i=>iL(i));return r.length===1?r[0]:{compositeFilter:{op:SQ(t.op),filters:r}}})(n):me(54877,{filter:n})}function DQ(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function sL(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var kp=class n{constructor(e,t,r,i,s=Re.min(),o=Re.min(),a=Ln.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var AS=class{constructor(e){this.yt=e}};function AQ(n){let e=EQ({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?pS(e,e.limit,"L"):e}var T_=class{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(It(e.integerValue));else if("doubleValue"in e){let r=It(e.doubleValue);isNaN(r)?this.Ft(t,13):(this.Ft(t,15),Sp(r)?t.Mt(0):t.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(t,20),typeof r=="string"&&(r=Hs(r)),t.xt(`${r.seconds||""}`),t.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(qs(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ft(t,45),t.Mt(r.latitude||0),t.Mt(r.longitude||0)}else"mapValue"in e?NV(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):kV(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):me(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){let r=e.fields||{};this.Ft(t,55);for(let i of Object.keys(r))this.Ot(i,t),this.Ct(r[i],t)}kt(e,t){let r=e.fields||{};this.Ft(t,53);let i=ld,s=r[i].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(It(s)),this.Ot(i,t),this.Ct(r[i],t)}Qt(e,t){let r=e.values||[];this.Ft(t,50);for(let i of r)this.Ct(i,t)}Lt(e,t){this.Ft(t,37),he.fromName(e).path.forEach(r=>{this.Ft(t,60),this.Ut(r,t)})}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}};T_.Kt=new T_;var xS=class{constructor(){this.Cn=new RS}addToCollectionParentIndex(e,t){return this.Cn.add(t),G.resolve()}getCollectionParents(e,t){return G.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return G.resolve()}deleteFieldIndex(e,t){return G.resolve()}deleteAllFieldIndexes(e){return G.resolve()}createTargetIndexes(e,t){return G.resolve()}getDocumentsMatchingTarget(e,t){return G.resolve(null)}getIndexType(e,t){return G.resolve(0)}getFieldIndexes(e,t){return G.resolve([])}getNextCollectionGroupToUpdate(e){return G.resolve(null)}getMinOffset(e,t){return G.resolve(Xc.min())}getMinOffsetFromCollectionGroup(e,t){return G.resolve(Xc.min())}updateCollectionGroup(e,t,r){return G.resolve()}updateIndexEntries(e,t){return G.resolve()}},RS=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new _n(Et.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new _n(Et.comparator)).toArray()}};var C0e=new Uint8Array(0);var $F={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},oL=41943040,Mr=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};Mr.DEFAULT_COLLECTION_PERCENTILE=10,Mr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Mr.DEFAULT=new Mr(oL,Mr.DEFAULT_COLLECTION_PERCENTILE,Mr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Mr.DISABLED=new Mr(-1,0,0);var Np=class n{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new n(0)}static cr(){return new n(-1)}};var HF="LruGarbageCollector",xQ=1048576;function qF([n,e],[t,r]){let i=$e(n,t);return i===0?$e(e,r):i}var kS=class{constructor(e){this.Ir=e,this.buffer=new _n(qF),this.Er=0}dr(){return++this.Er}Ar(e){let t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();qF(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},NS=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){oe(HF,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Cd(t)?oe(HF,"Ignoring IndexedDB error during garbage collection: ",t):await bd(t)}await this.Vr(3e5)})}},MS=class{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return G.resolve(kD.ce);let r=new kS(t);return this.mr.forEachTarget(e,i=>r.Ar(i.sequenceNumber)).next(()=>this.mr.pr(e,i=>r.Ar(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(oe("LruGarbageCollector","Garbage collection skipped; disabled"),G.resolve($F)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(oe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),$F):this.yr(e,t))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,i,s,o,a,c,d,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(oe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,o=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,a=Date.now(),this.removeTargets(e,r,t))).next(p=>(s=p,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(d=Date.now(),Zu()<=ze.DEBUG&&oe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(c-a)+`ms
	Removed ${p} documents in `+(d-c)+`ms
Total Duration: ${d-h}ms`),G.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:p})))}};function RQ(n,e){return new MS(n,e)}var PS=class{constructor(){this.changes=new zs(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ui.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?G.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var OS=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var FS=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&bp(r.mutation,i,Pr.empty(),Gt.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,He()).next(()=>r))}getLocalViewOfDocuments(e,t,r=He()){let i=Wc();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=_p();return s.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){let r=Wc();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,He()))}populateOverlays(e,t,r){let i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,r,i){let s=Gs(),o=Ep(),a=(function(){return Ep()})();return t.forEach((c,d)=>{let h=r.get(d.key);i.has(d.key)&&(h===void 0||h.mutation instanceof Wi)?s=s.insert(d.key,d):h!==void 0?(o.set(d.key,h.mutation.getFieldMask()),bp(h.mutation,d,h.mutation.getFieldMask(),Gt.now())):o.set(d.key,Pr.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((d,h)=>o.set(d,h)),t.forEach((d,h)=>a.set(d,new OS(h,o.get(d)??null))),a))}recalculateAndSaveOverlays(e,t){let r=Ep(),i=new Rt((o,a)=>o-a),s=He();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(let a of o)a.keys().forEach(c=>{let d=t.get(c);if(d===null)return;let h=r.get(c)||Pr.empty();h=a.applyToLocalView(d,h),r.set(c,h);let p=(i.get(a.batchId)||He()).add(c);i=i.insert(a.batchId,p)})}).next(()=>{let o=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),d=c.key,h=c.value,p=qV();h.forEach(y=>{if(!s.has(y)){let E=YV(t.get(y),r.get(y));E!==null&&p.set(y,E),s=s.add(y)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,p))}return G.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return(function(o){return he.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):UV(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):G.resolve(Wc()),a=Tp,c=s;return o.next(d=>G.forEach(d,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),s.get(h)?G.resolve():this.remoteDocumentCache.getEntry(e,h).next(y=>{c=c.insert(h,y)}))).next(()=>this.populateOverlays(e,d,s)).next(()=>this.computeViews(e,c,d,He())).next(h=>({batchId:a,changes:HV(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new he(t)).next(r=>{let i=_p();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let s=t.collectionGroup,o=_p();return this.indexManager.getCollectionParents(e,s).next(a=>G.forEach(a,c=>{let d=(function(p,y){return new Zc(y,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)})(t,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,d,r,i).next(h=>{h.forEach((p,y)=>{o=o.insert(p,y)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((c,d)=>{let h=d.getKey();o.get(h)===null&&(o=o.insert(h,ui.newInvalidDocument(h)))});let a=_p();return o.forEach((c,d)=>{let h=s.get(c);h!==void 0&&bp(h.mutation,d,Pr.empty(),Gt.now()),Q_(t,d)&&(a=a.insert(c,d))}),a})}};var VS=class{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return G.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:zi(i.createTime)}})(t)),G.resolve()}getNamedQuery(e,t){return G.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(i){return{name:i.name,query:AQ(i.bundledQuery),readTime:zi(i.readTime)}})(t)),G.resolve()}};var LS=class{constructor(){this.overlays=new Rt(he.comparator),this.qr=new Map}getOverlay(e,t){return G.resolve(this.overlays.get(t))}getOverlays(e,t){let r=Wc();return G.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.St(e,t,s)}),G.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.qr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.qr.delete(r)),G.resolve()}getOverlaysForCollection(e,t,r){let i=Wc(),s=t.length+1,o=new he(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let c=a.getNext().value,d=c.getKey();if(!t.isPrefixOf(d.path))break;d.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return G.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new Rt((d,h)=>d-h),o=this.overlays.getIterator();for(;o.hasNext();){let d=o.getNext().value;if(d.getKey().getCollectionGroup()===t&&d.largestBatchId>r){let h=s.get(d.largestBatchId);h===null&&(h=Wc(),s=s.insert(d.largestBatchId,h)),h.set(d.getKey(),d)}}let a=Wc(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((d,h)=>a.set(d,h)),!(a.size()>=i)););return G.resolve(a)}St(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new _S(t,r));let s=this.qr.get(t);s===void 0&&(s=He(),this.qr.set(t,s)),this.qr.set(t,s.add(r.key))}};var US=class{constructor(){this.sessionToken=Ln.EMPTY_BYTE_STRING}getSessionToken(e){return G.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,G.resolve()}};var Mp=class{constructor(){this.Qr=new _n(Ht.$r),this.Ur=new _n(Ht.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){let r=new Ht(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Gr(new Ht(e,t))}zr(e,t){e.forEach(r=>this.removeReference(r,t))}jr(e){let t=new he(new Et([])),r=new Ht(t,e),i=new Ht(t,e+1),s=[];return this.Ur.forEachInRange([r,i],o=>{this.Gr(o),s.push(o.key)}),s}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){let t=new he(new Et([])),r=new Ht(t,e),i=new Ht(t,e+1),s=He();return this.Ur.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let t=new Ht(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},Ht=class{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return he.comparator(e.key,t.key)||$e(e.Yr,t.Yr)}static Kr(e,t){return $e(e.Yr,t.Yr)||he.comparator(e.key,t.key)}};var jS=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new _n(Ht.$r)}checkEmpty(e){return G.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new yS(s,t,r,i);this.mutationQueue.push(o);for(let a of i)this.Zr=this.Zr.add(new Ht(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return G.resolve(o)}lookupMutationBatch(e,t){return G.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.ei(r),s=i<0?0:i;return G.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return G.resolve(this.mutationQueue.length===0?ND:this.tr-1)}getAllMutationBatches(e){return G.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new Ht(t,0),i=new Ht(t,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([r,i],o=>{let a=this.Xr(o.Yr);s.push(a)}),G.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new _n($e);return t.forEach(i=>{let s=new Ht(i,0),o=new Ht(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,o],a=>{r=r.add(a.Yr)})}),G.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,s=r;he.isDocumentKey(s)||(s=s.child(""));let o=new Ht(new he(s),0),a=new _n($e);return this.Zr.forEachWhile(c=>{let d=c.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(a=a.add(c.Yr)),!0)},o),G.resolve(this.ti(a))}ti(e){let t=[];return e.forEach(r=>{let i=this.Xr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){at(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return G.forEach(t.mutations,i=>{let s=new Ht(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,t){let r=new Ht(t,0),i=this.Zr.firstAfterOrEqual(r);return G.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,G.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){let t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var BS=class{constructor(e){this.ri=e,this.docs=(function(){return new Rt(he.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return G.resolve(r?r.document.mutableCopy():ui.newInvalidDocument(t))}getEntries(e,t){let r=Gs();return t.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():ui.newInvalidDocument(i))}),G.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=Gs(),o=t.path,a=new he(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:d,value:{document:h}}=c.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||AK(DK(h),r)<=0||(i.has(h.key)||Q_(t,h))&&(s=s.insert(h.key,h.mutableCopy()))}return G.resolve(s)}getAllFromCollectionGroup(e,t,r,i){me(9500)}ii(e,t){return G.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new $S(this)}getSize(e){return G.resolve(this.size)}},$S=class extends PS{constructor(e){super(),this.Nr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)}),G.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}};var HS=class{constructor(e){this.persistence=e,this.si=new zs(t=>VD(t),LD),this.lastRemoteSnapshotVersion=Re.min(),this.highestTargetId=0,this.oi=0,this._i=new Mp,this.targetCount=0,this.ai=Np.ur()}forEachTarget(e,t){return this.si.forEach((r,i)=>t(i)),G.resolve()}getLastRemoteSnapshotVersion(e){return G.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return G.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),G.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),G.resolve()}Pr(e){this.si.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.ai=new Np(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,G.resolve()}updateTargetData(e,t){return this.Pr(t),G.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,G.resolve()}removeTargets(e,t,r){let i=0,s=[];return this.si.forEach((o,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.si.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),G.waitFor(s).next(()=>i)}getTargetCount(e){return G.resolve(this.targetCount)}getTargetData(e,t){let r=this.si.get(t)||null;return G.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),G.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);let i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),G.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),G.resolve()}getMatchingKeysForTargetId(e,t){let r=this._i.Hr(t);return G.resolve(r)}containsKey(e,t){return G.resolve(this._i.containsKey(t))}};var S_=class{constructor(e,t){this.ui={},this.overlays={},this.ci=new kD(0),this.li=!1,this.li=!0,this.hi=new US,this.referenceDelegate=e(this),this.Pi=new HS(this),this.indexManager=new xS,this.remoteDocumentCache=(function(i){return new BS(i)})(r=>this.referenceDelegate.Ti(r)),this.serializer=new AS(t),this.Ii=new VS(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new LS,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new jS(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){oe("MemoryPersistence","Starting transaction:",e);let i=new qS(this.ci.next());return this.referenceDelegate.Ei(),r(i).next(s=>this.referenceDelegate.di(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ai(e,t){return G.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,t)))}},qS=class extends ZT{constructor(e){super(),this.currentSequenceNumber=e}},zS=class n{constructor(e){this.persistence=e,this.Ri=new Mp,this.Vi=null}static mi(e){return new n(e)}get fi(){if(this.Vi)return this.Vi;throw me(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),G.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),G.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),G.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach(i=>this.fi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.fi.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}Ei(){this.Vi=new Set}di(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return G.forEach(this.fi,r=>{let i=he.fromPath(r);return this.gi(e,i).next(s=>{s||t.removeEntry(i,Re.min())})}).next(()=>(this.Vi=null,t.apply(e)))}updateLimboDocument(e,t){return this.gi(e,t).next(r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())})}Ti(e){return 0}gi(e,t){return G.or([()=>G.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}},D_=class n{constructor(e,t){this.persistence=e,this.pi=new zs(r=>NK(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=RQ(this,t)}static mi(e,t){return new n(e,t)}Ei(){}di(e){return G.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){let t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}wr(e){let t=0;return this.pr(e,r=>{t++}).next(()=>t)}pr(e,t){return G.forEach(this.pi,(r,i)=>this.br(e,r,i).next(s=>s?G.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ii(e,o=>this.br(e,o,t).next(a=>{a||(r++,s.removeEntry(o,Re.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),G.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),G.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),G.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),G.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=l_(e.data.value)),t}br(e,t,r){return G.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let i=this.pi.get(t);return G.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var GS=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=i}static As(e,t){let r=He(),i=He();for(let s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new n(e,t.fromCache,r,i)}};var WS=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var KS=class{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return d2()?8:RK(u2())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,i){let s={result:null};return this.ys(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ws(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new WS;return this.Ss(e,t,o).next(a=>{if(s.result=a,this.Vs)return this.bs(e,t,o,a.size)})}).next(()=>s.result)}bs(e,t,r,i){return r.documentReadCount<this.fs?(Zu()<=ze.DEBUG&&oe("QueryEngine","SDK will not create cache indexes for query:",ed(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),G.resolve()):(Zu()<=ze.DEBUG&&oe("QueryEngine","Query:",ed(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(Zu()<=ze.DEBUG&&oe("QueryEngine","The SDK decides to create cache indexes for query:",ed(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,qi(t))):G.resolve())}ys(e,t){if(MF(t))return G.resolve(null);let r=qi(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=pS(t,null,"F"),r=qi(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=He(...s);return this.ps.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let d=this.Ds(t,a);return this.Cs(t,d,o,c.readTime)?this.ys(e,pS(t,null,"F")):this.vs(e,d,t,c)}))})))}ws(e,t,r,i){return MF(t)||i.isEqual(Re.min())?G.resolve(null):this.ps.getDocuments(e,r).next(s=>{let o=this.Ds(t,s);return this.Cs(t,o,r,i)?G.resolve(null):(Zu()<=ze.DEBUG&&oe("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ed(t)),this.vs(e,o,t,SK(i,Tp)).next(a=>a))})}Ds(e,t){let r=new _n(BV(e));return t.forEach((i,s)=>{Q_(e,s)&&(r=r.add(s))}),r}Cs(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ss(e,t,r){return Zu()<=ze.DEBUG&&oe("QueryEngine","Using full collection scan to execute query:",ed(t)),this.ps.getDocumentsMatchingQuery(e,t,Xc.min(),r)}vs(e,t,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}};var $D="LocalStore",kQ=3e8,QS=class{constructor(e,t,r,i){this.persistence=e,this.Fs=t,this.serializer=i,this.Ms=new Rt($e),this.xs=new zs(s=>VD(s),LD),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new FS(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}};function NQ(n,e,t,r){return new QS(n,e,t,r)}async function aL(n,e){let t=Te(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.Bs(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{let o=[],a=[],c=He();for(let d of i){o.push(d.batchId);for(let h of d.mutations)c=c.add(h.key)}for(let d of s){a.push(d.batchId);for(let h of d.mutations)c=c.add(h.key)}return t.localDocuments.getDocuments(r,c).next(d=>({Ls:d,removedBatchIds:o,addedBatchIds:a}))})})}function MQ(n,e){let t=Te(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),s=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(a,c,d,h){let p=d.batch,y=p.keys(),E=G.resolve();return y.forEach(k=>{E=E.next(()=>h.getEntry(c,k)).next(P=>{let M=d.docVersions.get(k);at(M!==null,48541),P.version.compareTo(M)<0&&(p.applyToRemoteDocument(P,d),P.isValidDocument()&&(P.setReadTime(d.commitVersion),h.addEntry(P)))})}),E.next(()=>a.mutationQueue.removeMutationBatch(c,p))})(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(a){let c=He();for(let d=0;d<a.mutationResults.length;++d)a.mutationResults[d].transformResults.length>0&&(c=c.add(a.batch.mutations[d].key));return c})(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function cL(n){let e=Te(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Pi.getLastRemoteSnapshotVersion(t))}function PQ(n,e){let t=Te(n),r=e.snapshotVersion,i=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=t.Ns.newChangeBuffer({trackRemovals:!0});i=t.Ms;let a=[];e.targetChanges.forEach((h,p)=>{let y=i.get(p);if(!y)return;a.push(t.Pi.removeMatchingKeys(s,h.removedDocuments,p).next(()=>t.Pi.addMatchingKeys(s,h.addedDocuments,p)));let E=y.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(p)!==null?E=E.withResumeToken(Ln.EMPTY_BYTE_STRING,Re.min()).withLastLimboFreeSnapshotVersion(Re.min()):h.resumeToken.approximateByteSize()>0&&(E=E.withResumeToken(h.resumeToken,r)),i=i.insert(p,E),(function(P,M,H){return P.resumeToken.approximateByteSize()===0||M.snapshotVersion.toMicroseconds()-P.snapshotVersion.toMicroseconds()>=kQ?!0:H.addedDocuments.size+H.modifiedDocuments.size+H.removedDocuments.size>0})(y,E,h)&&a.push(t.Pi.updateTargetData(s,E))});let c=Gs(),d=He();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(OQ(s,o,e.documentUpdates).next(h=>{c=h.ks,d=h.qs})),!r.isEqual(Re.min())){let h=t.Pi.getLastRemoteSnapshotVersion(s).next(p=>t.Pi.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(h)}return G.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,c,d)).next(()=>c)}).then(s=>(t.Ms=i,s))}function OQ(n,e,t){let r=He(),i=He();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=Gs();return t.forEach((a,c)=>{let d=s.get(a);c.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(Re.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!d.isValidDocument()||c.version.compareTo(d.version)>0||c.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):oe($D,"Ignoring outdated watch update for ",a,". Current version:",d.version," Watch version:",c.version)}),{ks:o,qs:i}})}function FQ(n,e){let t=Te(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=ND),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function VQ(n,e){let t=Te(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Pi.getTargetData(r,e).next(s=>s?(i=s,G.resolve(i)):t.Pi.allocateTargetId(r).next(o=>(i=new kp(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Pi.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.xs.set(e,r.targetId)),r})}async function YS(n,e,t){let r=Te(n),i=r.Ms.get(e),s=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Cd(o))throw o;oe($D,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function zF(n,e,t){let r=Te(n),i=Re.min(),s=He();return r.persistence.runTransaction("Execute query","readwrite",o=>(function(c,d,h){let p=Te(c),y=p.xs.get(h);return y!==void 0?G.resolve(p.Ms.get(y)):p.Pi.getTargetData(d,h)})(r,o,qi(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,a.targetId).next(c=>{s=c})}).next(()=>r.Fs.getDocumentsMatchingQuery(o,e,t?i:Re.min(),t?s:He())).next(a=>(LQ(r,QK(e),a),{documents:a,Qs:s})))}function LQ(n,e,t){let r=n.Os.get(e)||Re.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.Os.set(e,r)}var A_=class{constructor(){this.activeTargetIds=tQ()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var JS=class{constructor(){this.Mo=new A_,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new A_,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var XS=class{Oo(e){}shutdown(){}};var GF="ConnectivityMonitor",x_=class{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){oe(GF,"Network connectivity changed: AVAILABLE");for(let e of this.qo)e(0)}ko(){oe(GF,"Network connectivity changed: UNAVAILABLE");for(let e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var c_=null;function ZS(){return c_===null?c_=(function(){return 268435456+Math.round(2147483648*Math.random())})():c_++,"0x"+c_.toString(16)}var $T="RestConnection",UQ={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},eD=class{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===y_?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,t,r,i,s){let o=ZS(),a=this.zo(e,t.toUriEncodedString());oe($T,`Sending RPC '${e}' ${o}:`,a,r);let c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,i,s);let{host:d}=new URL(a),h=Vv(d);return this.Jo(e,a,c,r,h).then(p=>(oe($T,`Received RPC '${e}' ${o}: `,p),p),p=>{throw ad($T,`RPC '${e}' ${o} failed with error: `,p,"url: ",a,"request:",r),p})}Ho(e,t,r,i,s,o){return this.Go(e,t,r,i,s)}jo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Ed})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}zo(e,t){let r=UQ[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}};var tD=class{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}};var Vn="WebChannelConnection",nD=class extends eD{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,i,s){let o=ZS();return new Promise((a,c)=>{let d=new OT;d.setWithCredentials(!0),d.listenOnce(FT.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case vp.NO_ERROR:let p=d.getResponseJson();oe(Vn,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(p)),a(p);break;case vp.TIMEOUT:oe(Vn,`RPC '${e}' ${o} timed out`),c(new ne(z.DEADLINE_EXCEEDED,"Request time out"));break;case vp.HTTP_ERROR:let y=d.getStatus();if(oe(Vn,`RPC '${e}' ${o} failed with status:`,y,"response text:",d.getResponseText()),y>0){let E=d.getResponseJson();Array.isArray(E)&&(E=E[0]);let k=E?.error;if(k&&k.status&&k.message){let P=(function(H){let Y=H.toLowerCase().replace(/_/g,"-");return Object.values(z).indexOf(Y)>=0?Y:z.UNKNOWN})(k.status);c(new ne(P,k.message))}else c(new ne(z.UNKNOWN,"Server responded with status "+d.getStatus()))}else c(new ne(z.UNAVAILABLE,"Connection failed."));break;default:me(9055,{l_:e,streamId:o,h_:d.getLastErrorCode(),P_:d.getLastError()})}}finally{oe(Vn,`RPC '${e}' ${o} completed.`)}});let h=JSON.stringify(i);oe(Vn,`RPC '${e}' ${o} sending request:`,i),d.send(t,"POST",h,r,15)})}T_(e,t,r){let i=ZS(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=UT(),a=LT(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(c.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;let h=s.join("");oe(Vn,`Creating RPC '${e}' stream ${i}: ${h}`,c);let p=o.createWebChannel(h,c);this.I_(p);let y=!1,E=!1,k=new tD({Yo:M=>{E?oe(Vn,`Not sending because RPC '${e}' stream ${i} is closed:`,M):(y||(oe(Vn,`Opening RPC '${e}' stream ${i} transport.`),p.open(),y=!0),oe(Vn,`RPC '${e}' stream ${i} sending:`,M),p.send(M))},Zo:()=>p.close()}),P=(M,H,Y)=>{M.listen(H,ee=>{try{Y(ee)}catch(De){setTimeout(()=>{throw De},0)}})};return P(p,Xu.EventType.OPEN,()=>{E||(oe(Vn,`RPC '${e}' stream ${i} transport opened.`),k.o_())}),P(p,Xu.EventType.CLOSE,()=>{E||(E=!0,oe(Vn,`RPC '${e}' stream ${i} transport closed`),k.a_(),this.E_(p))}),P(p,Xu.EventType.ERROR,M=>{E||(E=!0,ad(Vn,`RPC '${e}' stream ${i} transport errored. Name:`,M.name,"Message:",M.message),k.a_(new ne(z.UNAVAILABLE,"The operation could not be completed")))}),P(p,Xu.EventType.MESSAGE,M=>{if(!E){let H=M.data[0];at(!!H,16349);let Y=H,ee=Y?.error||Y[0]?.error;if(ee){oe(Vn,`RPC '${e}' stream ${i} received error:`,ee);let De=ee.status,et=(function(_){let I=$t[_];if(I!==void 0)return XV(I)})(De),ve=ee.message;et===void 0&&(et=z.INTERNAL,ve="Unknown error status: "+De+" with message "+ee.message),E=!0,k.a_(new ne(et,ve)),p.close()}else oe(Vn,`RPC '${e}' stream ${i} received:`,H),k.u_(H)}}),P(a,VT.STAT_EVENT,M=>{M.stat===s_.PROXY?oe(Vn,`RPC '${e}' stream ${i} detected buffering proxy`):M.stat===s_.NOPROXY&&oe(Vn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{k.__()},0),k}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(t=>t===e)}};function HT(){return typeof document<"u"?document:null}function Y_(n){return new bS(n,!0)}var R_=class{constructor(e,t,r=1e3,i=1.5,s=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=i,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();let t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,t-r);i>0&&oe("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}};var WF="PersistentStream",k_=class{constructor(e,t,r,i,s,o,a,c){this.Mi=e,this.S_=r,this.b_=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new R_(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===z.RESOURCE_EXHAUSTED?($s(t.toString()),$s("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;let e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===t&&this.G_(r,i)},r=>{e(()=>{let i=new ne(z.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(e,t){let r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.J_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return oe(WF,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget(()=>this.D_===e?t():(oe(WF,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},rD=class extends k_{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();let t=yQ(this.serializer,e),r=(function(s){if(!("targetChange"in s))return Re.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?Re.min():o.readTime?zi(o.readTime):Re.min()})(e);return this.listener.H_(t,r)}Y_(e){let t={};t.database=DS(this.serializer),t.addTarget=(function(s,o){let a,c=o.target;if(a=hS(c)?{documents:wQ(s,c)}:{query:IQ(s,c).ft},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=ZV(s,o.resumeToken);let d=CS(s,o.expectedCount);d!==null&&(a.expectedCount=d)}else if(o.snapshotVersion.compareTo(Re.min())>0){a.readTime=C_(s,o.snapshotVersion.toTimestamp());let d=CS(s,o.expectedCount);d!==null&&(a.expectedCount=d)}return a})(this.serializer,e);let r=bQ(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){let t={};t.database=DS(this.serializer),t.removeTarget=e,this.q_(t)}},iD=class extends k_{constructor(e,t,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return at(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,at(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){at(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();let t=_Q(e.writeResults,e.commitTime),r=zi(e.commitTime);return this.listener.na(r,t)}ra(){let e={};e.database=DS(this.serializer),this.q_(e)}ea(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>vQ(this.serializer,r))};this.q_(t)}};var sD=class{},oD=class extends sD{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new ne(z.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Go(e,TS(t,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new ne(z.UNKNOWN,s.toString())})}Ho(e,t,r,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Ho(e,TS(t,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ne(z.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}},aD=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?($s(t),this.aa=!1):oe("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}};var rl="RemoteStore",cD=class{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo(o=>{r.enqueueAndForget(async()=>{il(this)&&(oe(rl,"Restarting streams for network reachability change."),await(async function(c){let d=Te(c);d.Ea.add(4),await Vp(d),d.Ra.set("Unknown"),d.Ea.delete(4),await J_(d)})(this))})}),this.Ra=new aD(r,i)}};async function J_(n){if(il(n))for(let e of n.da)await e(!0)}async function Vp(n){for(let e of n.da)await e(!1)}function lL(n,e){let t=Te(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),GD(t)?zD(t):Td(t).O_()&&qD(t,e))}function HD(n,e){let t=Te(n),r=Td(t);t.Ia.delete(e),r.O_()&&uL(t,e),t.Ia.size===0&&(r.O_()?r.L_():il(t)&&t.Ra.set("Unknown"))}function qD(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Re.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Td(n).Y_(e)}function uL(n,e){n.Va.Ue(e),Td(n).Z_(e)}function zD(n){n.Va=new ES({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),Td(n).start(),n.Ra.ua()}function GD(n){return il(n)&&!Td(n).x_()&&n.Ia.size>0}function il(n){return Te(n).Ea.size===0}function dL(n){n.Va=void 0}async function jQ(n){n.Ra.set("Online")}async function BQ(n){n.Ia.forEach((e,t)=>{qD(n,e)})}async function $Q(n,e){dL(n),GD(n)?(n.Ra.ha(e),zD(n)):n.Ra.set("Unknown")}async function HQ(n,e,t){if(n.Ra.set("Online"),e instanceof E_&&e.state===2&&e.cause)try{await(async function(i,s){let o=s.cause;for(let a of s.targetIds)i.Ia.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.Ia.delete(a),i.Va.removeTarget(a))})(n,e)}catch(r){oe(rl,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await N_(n,r)}else if(e instanceof id?n.Va.Ze(e):e instanceof I_?n.Va.st(e):n.Va.tt(e),!t.isEqual(Re.min()))try{let r=await cL(n.localStore);t.compareTo(r)>=0&&await(function(s,o){let a=s.Va.Tt(o);return a.targetChanges.forEach((c,d)=>{if(c.resumeToken.approximateByteSize()>0){let h=s.Ia.get(d);h&&s.Ia.set(d,h.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,d)=>{let h=s.Ia.get(c);if(!h)return;s.Ia.set(c,h.withResumeToken(Ln.EMPTY_BYTE_STRING,h.snapshotVersion)),uL(s,c);let p=new kp(h.target,c,d,h.sequenceNumber);qD(s,p)}),s.remoteSyncer.applyRemoteEvent(a)})(n,t)}catch(r){oe(rl,"Failed to raise snapshot:",r),await N_(n,r)}}async function N_(n,e,t){if(!Cd(e))throw e;n.Ea.add(1),await Vp(n),n.Ra.set("Offline"),t||(t=()=>cL(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{oe(rl,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await J_(n)})}function hL(n,e){return e().catch(t=>N_(n,t,e))}async function X_(n){let e=Te(n),t=ma(e),r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:ND;for(;qQ(e);)try{let i=await FQ(e.localStore,r);if(i===null){e.Ta.length===0&&t.L_();break}r=i.batchId,zQ(e,i)}catch(i){await N_(e,i)}fL(e)&&pL(e)}function qQ(n){return il(n)&&n.Ta.length<10}function zQ(n,e){n.Ta.push(e);let t=ma(n);t.O_()&&t.X_&&t.ea(e.mutations)}function fL(n){return il(n)&&!ma(n).x_()&&n.Ta.length>0}function pL(n){ma(n).start()}async function GQ(n){ma(n).ra()}async function WQ(n){let e=ma(n);for(let t of n.Ta)e.ea(t.mutations)}async function KQ(n,e,t){let r=n.Ta.shift(),i=vS.from(r,e,t);await hL(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),await X_(n)}async function QQ(n,e){e&&ma(n).X_&&await(async function(r,i){if((function(o){return cQ(o)&&o!==z.ABORTED})(i.code)){let s=r.Ta.shift();ma(r).B_(),await hL(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await X_(r)}})(n,e),fL(n)&&pL(n)}async function KF(n,e){let t=Te(n);t.asyncQueue.verifyOperationInProgress(),oe(rl,"RemoteStore received new credentials");let r=il(t);t.Ea.add(3),await Vp(t),r&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await J_(t)}async function YQ(n,e){let t=Te(n);e?(t.Ea.delete(2),await J_(t)):e||(t.Ea.add(2),await Vp(t),t.Ra.set("Unknown"))}function Td(n){return n.ma||(n.ma=(function(t,r,i){let s=Te(t);return s.sa(),new rD(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(n.datastore,n.asyncQueue,{Xo:jQ.bind(null,n),t_:BQ.bind(null,n),r_:$Q.bind(null,n),H_:HQ.bind(null,n)}),n.da.push(async e=>{e?(n.ma.B_(),GD(n)?zD(n):n.Ra.set("Unknown")):(await n.ma.stop(),dL(n))})),n.ma}function ma(n){return n.fa||(n.fa=(function(t,r,i){let s=Te(t);return s.sa(),new iD(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:GQ.bind(null,n),r_:QQ.bind(null,n),ta:WQ.bind(null,n),na:KQ.bind(null,n)}),n.da.push(async e=>{e?(n.fa.B_(),await X_(n)):(await n.fa.stop(),n.Ta.length>0&&(oe(rl,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))})),n.fa}var lD=class n{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Us,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){let o=Date.now()+r,a=new n(e,t,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ne(z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function WD(n,e){if($s("AsyncQueue",`${e}: ${n}`),Cd(n))return new ne(z.UNAVAILABLE,`${e}: ${n}`);throw n}var M_=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||he.comparator(t.key,r.key):(t,r)=>he.comparator(t.key,r.key),this.keyedMap=_p(),this.sortedSet=new Rt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var P_=class{constructor(){this.ga=new Rt(he.comparator)}track(e){let t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):me(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){let e=[];return this.ga.inorderTraversal((t,r)=>{e.push(r)}),e}},vd=class n{constructor(e,t,r,i,s,o,a,c,d){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=d}static fromInitialDocuments(e,t,r,i,s){let o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new n(e,t,M_.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&K_(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var uD=class{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}},dD=class{constructor(){this.queries=QF(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){let i=Te(t),s=i.queries;i.queries=QF(),s.forEach((o,a)=>{for(let c of a.Sa)c.onError(r)})})(this,new ne(z.ABORTED,"Firestore shutting down"))}};function QF(){return new zs(n=>jV(n),K_)}async function JQ(n,e){let t=Te(n),r=3,i=e.query,s=t.queries.get(i);s?!s.ba()&&e.Da()&&(r=2):(s=new uD,r=e.Da()?0:1);try{switch(r){case 0:s.wa=await t.onListen(i,!0);break;case 1:s.wa=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(o){let a=WD(o,`Initialization of query '${ed(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,s),s.Sa.push(e),e.va(t.onlineState),s.wa&&e.Fa(s.wa)&&KD(t)}async function XQ(n,e){let t=Te(n),r=e.query,i=3,s=t.queries.get(r);if(s){let o=s.Sa.indexOf(e);o>=0&&(s.Sa.splice(o,1),s.Sa.length===0?i=e.Da()?0:1:!s.ba()&&e.Da()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function ZQ(n,e){let t=Te(n),r=!1;for(let i of e){let s=i.query,o=t.queries.get(s);if(o){for(let a of o.Sa)a.Fa(i)&&(r=!0);o.wa=i}}r&&KD(t)}function eY(n,e,t){let r=Te(n),i=r.queries.get(e);if(i)for(let s of i.Sa)s.onError(t);r.queries.delete(e)}function KD(n){n.Ca.forEach(e=>{e.next()})}var hD,YF;(YF=hD||(hD={})).Ma="default",YF.Cache="cache";var fD=class{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new vd(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;let r=t!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;let t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=vd.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==hD.Cache}};var O_=class{constructor(e){this.key=e}},F_=class{constructor(e){this.key=e}},pD=class{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=He(),this.mutatedKeys=He(),this.eu=BV(e),this.tu=new M_(this.eu)}get nu(){return this.Ya}ru(e,t){let r=t?t.iu:new P_,i=t?t.tu:this.tu,s=t?t.mutatedKeys:this.mutatedKeys,o=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,d=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let y=i.get(h),E=Q_(this.query,p)?p:null,k=!!y&&this.mutatedKeys.has(y.key),P=!!E&&(E.hasLocalMutations||this.mutatedKeys.has(E.key)&&E.hasCommittedMutations),M=!1;y&&E?y.data.isEqual(E.data)?k!==P&&(r.track({type:3,doc:E}),M=!0):this.su(y,E)||(r.track({type:2,doc:E}),M=!0,(c&&this.eu(E,c)>0||d&&this.eu(E,d)<0)&&(a=!0)):!y&&E?(r.track({type:0,doc:E}),M=!0):y&&!E&&(r.track({type:1,doc:y}),M=!0,(c||d)&&(a=!0)),M&&(E?(o=o.add(E),s=P?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{tu:o,iu:r,Cs:a,mutatedKeys:s}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;let o=e.iu.ya();o.sort((h,p)=>(function(E,k){let P=M=>{switch(M){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return me(20277,{Rt:M})}};return P(E)-P(k)})(h.type,p.type)||this.eu(h.doc,p.doc)),this.ou(r),i=i??!1;let a=t&&!i?this._u():[],c=this.Xa.size===0&&this.current&&!i?1:0,d=c!==this.Za;return this.Za=c,o.length!==0||d?{snapshot:new vd(this.query,e.tu,s,o,e.mutatedKeys,c===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new P_,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(t=>this.Ya=this.Ya.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ya=this.Ya.delete(t)),this.current=e.current)}_u(){if(!this.current)return[];let e=this.Xa;this.Xa=He(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});let t=[];return e.forEach(r=>{this.Xa.has(r)||t.push(new F_(r))}),this.Xa.forEach(r=>{e.has(r)||t.push(new O_(r))}),t}cu(e){this.Ya=e.Qs,this.Xa=He();let t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return vd.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}},QD="SyncEngine",gD=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},mD=class{constructor(e){this.key=e,this.hu=!1}},yD=class{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new zs(a=>jV(a),K_),this.Iu=new Map,this.Eu=new Set,this.du=new Rt(he.comparator),this.Au=new Map,this.Ru=new Mp,this.Vu={},this.mu=new Map,this.fu=Np.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}};async function tY(n,e,t=!0){let r=wL(n),i,s=r.Tu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=await gL(r,e,t,!0),i}async function nY(n,e){let t=wL(n);await gL(t,e,!0,!1)}async function gL(n,e,t,r){let i=await VQ(n.localStore,qi(e)),s=i.targetId,o=n.sharedClientState.addLocalQueryTarget(s,t),a;return r&&(a=await rY(n,e,s,o==="current",i.resumeToken)),n.isPrimaryClient&&t&&lL(n.remoteStore,i),a}async function rY(n,e,t,r,i){n.pu=(p,y,E)=>(async function(P,M,H,Y){let ee=M.view.ru(H);ee.Cs&&(ee=await zF(P.localStore,M.query,!1).then(({documents:T})=>M.view.ru(T,ee)));let De=Y&&Y.targetChanges.get(M.targetId),et=Y&&Y.targetMismatches.get(M.targetId)!=null,ve=M.view.applyChanges(ee,P.isPrimaryClient,De,et);return XF(P,M.targetId,ve.au),ve.snapshot})(n,p,y,E);let s=await zF(n.localStore,e,!0),o=new pD(e,s.Qs),a=o.ru(s.documents),c=Rp.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),d=o.applyChanges(a,n.isPrimaryClient,c);XF(n,t,d.au);let h=new gD(e,t,o);return n.Tu.set(e,h),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),d.snapshot}async function iY(n,e,t){let r=Te(n),i=r.Tu.get(e),s=r.Iu.get(i.targetId);if(s.length>1)return r.Iu.set(i.targetId,s.filter(o=>!K_(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await YS(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&HD(r.remoteStore,i.targetId),vD(r,i.targetId)}).catch(bd)):(vD(r,i.targetId),await YS(r.localStore,i.targetId,!0))}async function sY(n,e){let t=Te(n),r=t.Tu.get(e),i=t.Iu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),HD(t.remoteStore,r.targetId))}async function oY(n,e,t){let r=fY(n);try{let i=await(function(o,a){let c=Te(o),d=Gt.now(),h=a.reduce((E,k)=>E.add(k.key),He()),p,y;return c.persistence.runTransaction("Locally write mutations","readwrite",E=>{let k=Gs(),P=He();return c.Ns.getEntries(E,h).next(M=>{k=M,k.forEach((H,Y)=>{Y.isValidDocument()||(P=P.add(H))})}).next(()=>c.localDocuments.getOverlayedDocuments(E,k)).next(M=>{p=M;let H=[];for(let Y of a){let ee=aQ(Y,p.get(Y.key).overlayedDocument);ee!=null&&H.push(new Wi(Y.key,ee,MV(ee.value.mapValue),Bs.exists(!0)))}return c.mutationQueue.addMutationBatch(E,d,H,a)}).next(M=>{y=M;let H=M.applyToLocalDocumentSet(p,P);return c.documentOverlayCache.saveOverlays(E,M.batchId,H)})}).then(()=>({batchId:y.batchId,changes:HV(p)}))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(o,a,c){let d=o.Vu[o.currentUser.toKey()];d||(d=new Rt($e)),d=d.insert(a,c),o.Vu[o.currentUser.toKey()]=d})(r,i.batchId,t),await Lp(r,i.changes),await X_(r.remoteStore)}catch(i){let s=WD(i,"Failed to persist write");t.reject(s)}}async function mL(n,e){let t=Te(n);try{let r=await PQ(t.localStore,e);e.targetChanges.forEach((i,s)=>{let o=t.Au.get(s);o&&(at(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.hu=!0:i.modifiedDocuments.size>0?at(o.hu,14607):i.removedDocuments.size>0&&(at(o.hu,42227),o.hu=!1))}),await Lp(t,r,e)}catch(r){await bd(r)}}function JF(n,e,t){let r=Te(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Tu.forEach((s,o)=>{let a=o.view.va(e);a.snapshot&&i.push(a.snapshot)}),(function(o,a){let c=Te(o);c.onlineState=a;let d=!1;c.queries.forEach((h,p)=>{for(let y of p.Sa)y.va(a)&&(d=!0)}),d&&KD(c)})(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function aY(n,e,t){let r=Te(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Au.get(e),s=i&&i.key;if(s){let o=new Rt(he.comparator);o=o.insert(s,ui.newNoDocument(s,Re.min()));let a=He().add(s),c=new w_(Re.min(),new Map,new Rt($e),o,a);await mL(r,c),r.du=r.du.remove(s),r.Au.delete(e),YD(r)}else await YS(r.localStore,e,!1).then(()=>vD(r,e,t)).catch(bd)}async function cY(n,e){let t=Te(n),r=e.batch.batchId;try{let i=await MQ(t.localStore,e);vL(t,r,null),yL(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await Lp(t,i)}catch(i){await bd(i)}}async function lY(n,e,t){let r=Te(n);try{let i=await(function(o,a){let c=Te(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let h;return c.mutationQueue.lookupMutationBatch(d,a).next(p=>(at(p!==null,37113),h=p.keys(),c.mutationQueue.removeMutationBatch(d,p))).next(()=>c.mutationQueue.performConsistencyCheck(d)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(d,h,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,h)).next(()=>c.localDocuments.getDocuments(d,h))})})(r.localStore,e);vL(r,e,t),yL(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await Lp(r,i)}catch(i){await bd(i)}}function yL(n,e){(n.mu.get(e)||[]).forEach(t=>{t.resolve()}),n.mu.delete(e)}function vL(n,e,t){let r=Te(n),i=r.Vu[r.currentUser.toKey()];if(i){let s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function vD(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach(r=>{n.Ru.containsKey(r)||_L(n,r)})}function _L(n,e){n.Eu.delete(e.path.canonicalString());let t=n.du.get(e);t!==null&&(HD(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),YD(n))}function XF(n,e,t){for(let r of t)r instanceof O_?(n.Ru.addReference(r.key,e),uY(n,r)):r instanceof F_?(oe(QD,"Document no longer in limbo: "+r.key),n.Ru.removeReference(r.key,e),n.Ru.containsKey(r.key)||_L(n,r.key)):me(19791,{wu:r})}function uY(n,e){let t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Eu.has(r)||(oe(QD,"New document in limbo: "+t),n.Eu.add(r),YD(n))}function YD(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){let e=n.Eu.values().next().value;n.Eu.delete(e);let t=new he(Et.fromString(e)),r=n.fu.next();n.Au.set(r,new mD(t)),n.du=n.du.insert(t,r),lL(n.remoteStore,new kp(qi(UD(t.path)),r,"TargetPurposeLimboResolution",kD.ce))}}async function Lp(n,e,t){let r=Te(n),i=[],s=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((a,c)=>{o.push(r.pu(c,e,t).then(d=>{if((d||t)&&r.isPrimaryClient){let h=d?!d.fromCache:t?.targetChanges.get(c.targetId)?.current;r.sharedClientState.updateQueryState(c.targetId,h?"current":"not-current")}if(d){i.push(d);let h=GS.As(c.targetId,d);s.push(h)}}))}),await Promise.all(o),r.Pu.H_(i),await(async function(c,d){let h=Te(c);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>G.forEach(d,y=>G.forEach(y.Es,E=>h.persistence.referenceDelegate.addReference(p,y.targetId,E)).next(()=>G.forEach(y.ds,E=>h.persistence.referenceDelegate.removeReference(p,y.targetId,E)))))}catch(p){if(!Cd(p))throw p;oe($D,"Failed to update sequence numbers: "+p)}for(let p of d){let y=p.targetId;if(!p.fromCache){let E=h.Ms.get(y),k=E.snapshotVersion,P=E.withLastLimboFreeSnapshotVersion(k);h.Ms=h.Ms.insert(y,P)}}})(r.localStore,s))}async function dY(n,e){let t=Te(n);if(!t.currentUser.isEqual(e)){oe(QD,"User change. New user:",e.toKey());let r=await aL(t.localStore,e);t.currentUser=e,(function(s,o){s.mu.forEach(a=>{a.forEach(c=>{c.reject(new ne(z.CANCELLED,o))})}),s.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Lp(t,r.Ls)}}function hY(n,e){let t=Te(n),r=t.Au.get(e);if(r&&r.hu)return He().add(r.key);{let i=He(),s=t.Iu.get(e);if(!s)return i;for(let o of s){let a=t.Tu.get(o);i=i.unionWith(a.view.nu)}return i}}function wL(n){let e=Te(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=mL.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=hY.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=aY.bind(null,e),e.Pu.H_=ZQ.bind(null,e.eventManager),e.Pu.yu=eY.bind(null,e.eventManager),e}function fY(n){let e=Te(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=cY.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=lY.bind(null,e),e}var IL=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Y_(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,r){return null}Mu(t,r){return null}vu(t){return NQ(this.persistence,new KS,t.initialUser,this.serializer)}Cu(t){return new S_(zS.mi,this.serializer)}Du(t){return new JS}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}return n.provider={build:()=>new n},n})(),_D=class extends IL{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){at(this.persistence.referenceDelegate instanceof D_,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new NS(r,e.asyncQueue,t)}Cu(e){let t=this.cacheSizeBytes!==void 0?Mr.withCacheSize(this.cacheSizeBytes):Mr.DEFAULT;return new S_(r=>D_.mi(r,t),this.serializer)}};var pY=(()=>{class n{async initialize(t,r){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>JF(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=dY.bind(null,this.syncEngine),await YQ(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new dD})()}createDatastore(t){let r=Y_(t.databaseInfo.databaseId),i=(function(o){return new nD(o)})(t.databaseInfo);return(function(o,a,c,d){return new oD(o,a,c,d)})(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return(function(i,s,o,a,c){return new cD(i,s,o,a,c)})(this.localStore,this.datastore,t.asyncQueue,r=>JF(this.syncEngine,r,0),(function(){return x_.v()?new x_:new XS})())}createSyncEngine(t,r){return(function(s,o,a,c,d,h,p){let y=new yD(s,o,a,c,d,h);return p&&(y.gu=!0),y})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}async terminate(){await(async function(r){let i=Te(r);oe(rl,"RemoteStore shutting down."),i.Ea.add(5),await Vp(i),i.Aa.shutdown(),i.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}return n.provider={build:()=>new n},n})();var wD=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):$s("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var ya="FirestoreClient",ID=class{constructor(e,t,r,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=vn.UNAUTHENTICATED,this.clientId=Cp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{oe(ya,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(oe(ya,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Us;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=WD(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}};async function qT(n,e){n.asyncQueue.verifyOperationInProgress(),oe(ya,"Initializing OfflineComponentProvider");let t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async i=>{r.isEqual(i)||(await aL(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function ZF(n,e){n.asyncQueue.verifyOperationInProgress();let t=await gY(n);oe(ya,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>KF(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>KF(e.remoteStore,i)),n._onlineComponents=e}async function gY(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){oe(ya,"Using user provided OfflineComponentProvider");try{await qT(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===z.FAILED_PRECONDITION||i.code===z.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;ad("Error using user provided cache. Falling back to memory cache: "+t),await qT(n,new IL)}}else oe(ya,"Using default OfflineComponentProvider"),await qT(n,new _D(void 0));return n._offlineComponents}async function EL(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(oe(ya,"Using user provided OnlineComponentProvider"),await ZF(n,n._uninitializedComponentsProvider._online)):(oe(ya,"Using default OnlineComponentProvider"),await ZF(n,new pY))),n._onlineComponents}function mY(n){return EL(n).then(e=>e.syncEngine)}async function eV(n){let e=await EL(n),t=e.eventManager;return t.onListen=tY.bind(null,e.syncEngine),t.onUnlisten=iY.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=nY.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=sY.bind(null,e.syncEngine),t}function bL(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var tV=new Map;var CL="firestore.googleapis.com",nV=!0,V_=class{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ne(z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=CL,this.ssl=nV}else this.host=e.host,this.ssl=e.ssl??nV;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=oL;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<xQ)throw new ne(z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}TK("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=bL(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new ne(z.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new ne(z.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new ne(z.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},_d=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new V_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ne(z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ne(z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new V_(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new zT;switch(r.type){case"firstParty":return new QT(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ne(z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){let r=tV.get(t);r&&(oe("ComponentProvider","Removing Datastore"),tV.delete(t),r.terminate())})(this),Promise.resolve()}};function yY(n,e,t,r={}){n=js(n,_d);let i=Vv(e),s=n._getSettings(),o=ie(B({},s),{emulatorOptions:n._getEmulatorOptions()}),a=`${e}:${t}`;i&&(a2(`https://${a}`),l2("Firestore",!0)),s.host!==CL&&s.host!==a&&ad("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let c=ie(B({},s),{host:a,ssl:i,emulatorOptions:r});if(!Qu(c,o)&&(n._setSettings(c),r.mockUserToken)){let d,h;if(typeof r.mockUserToken=="string")d=r.mockUserToken,h=vn.MOCK_USER;else{d=c2(r.mockUserToken,n._app?.options.projectId);let p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new ne(z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new vn(p)}n._authCredentials=new GT(new h_(d,h))}}var wd=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},wn=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new da(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}toJSON(){return{type:n._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(Fp(t,n._jsonSchema))return new n(e,r||null,new he(Et.fromString(t.referencePath)))}};wn._jsonSchemaVersion="firestore/documentReference/1.0",wn._jsonSchema={type:zt("string",wn._jsonSchemaVersion),referencePath:zt("string")};var da=class n extends wd{constructor(e,t,r){super(e,t,UD(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new wn(this.firestore,null,new he(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function Up(n,e,...t){if(n=li(n),lV("collection","path",e),n instanceof _d){let r=Et.fromString(e,...t);return wF(r),new da(n,null,r)}{if(!(n instanceof wn||n instanceof da))throw new ne(z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Et.fromString(e,...t));return wF(r),new da(n.firestore,null,r)}}function Wt(n,e,...t){if(n=li(n),arguments.length===1&&(e=Cp.newId()),lV("doc","path",e),n instanceof _d){let r=Et.fromString(e,...t);return _F(r),new wn(n,null,new he(r))}{if(!(n instanceof wn||n instanceof da))throw new ne(z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Et.fromString(e,...t));return _F(r),new wn(n.firestore,n instanceof da?n.converter:null,new he(r))}}var rV="AsyncQueue",L_=class{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new R_(this,"async_queue_retry"),this._c=()=>{let r=HT();r&&oe(rV,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;let t=HT();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;let t=HT();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});let t=new Us;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Cd(e))throw e;oe(rV,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){let t=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,$s("INTERNAL UNHANDLED ERROR: ",iV(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);let i=lD.createAndSchedule(this,e,t,r,s=>this.hc(s));return this.tc.push(i),i}uc(){this.nc&&me(47125,{Pc:iV(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(let t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){let t=this.tc.indexOf(e);this.tc.splice(t,1)}};function iV(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}function sV(n){return(function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let s of r)if(s in i&&typeof i[s]=="function")return!0;return!1})(n,["next","error","complete"])}var va=class extends _d{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new L_,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new L_(e),this._firestoreClient=void 0,await e}}};function Z_(n,e){let t=typeof n=="object"?n:I2(),r=typeof n=="string"?n:e||y_,i=v2(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let s=o2("firestore");s&&yY(i,...s)}return i}function TL(n){if(n._terminated)throw new ne(z.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||vY(n),n._firestoreClient}function vY(n){let e=n._freezeSettings(),t=(function(i,s,o,a){return new eS(i,s,o,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,bL(a.experimentalLongPollingOptions),a.useFetchStreams,a.isUsingEmulator)})(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new ID(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(i){let s=i?._online.build();return{_offline:i?._offline.build(s),_online:s}})(n._componentsProvider))}var ha=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(Ln.fromBase64String(e))}catch(t){throw new ne(z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(Ln.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Fp(e,n._jsonSchema))return n.fromBase64String(e.bytes)}};ha._jsonSchemaVersion="firestore/bytes/1.0",ha._jsonSchema={type:zt("string",ha._jsonSchemaVersion),bytes:zt("string")};var Id=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ne(z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new _r(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Pp=class{constructor(e){this._methodName=e}};var fa=class n{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ne(z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ne(z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return $e(this._lat,e._lat)||$e(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:n._jsonSchemaVersion}}static fromJSON(e){if(Fp(e,n._jsonSchema))return new n(e.latitude,e.longitude)}};fa._jsonSchemaVersion="firestore/geoPoint/1.0",fa._jsonSchema={type:zt("string",fa._jsonSchemaVersion),latitude:zt("number"),longitude:zt("number")};var pa=class n{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0})(this._values,e._values)}toJSON(){return{type:n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Fp(e,n._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new n(e.vectorValues);throw new ne(z.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};pa._jsonSchemaVersion="firestore/vectorValue/1.0",pa._jsonSchema={type:zt("string",pa._jsonSchemaVersion),vectorValues:zt("object")};var _Y=/^__.*__$/,ED=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Wi(e,this.data,this.fieldMask,t,this.fieldTransforms):new nl(e,this.data,t,this.fieldTransforms)}},U_=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Wi(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function SL(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw me(40011,{Ac:n})}}var bD=class n{constructor(e,t,r,i,s,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new n(B(B({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){let t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.gc(e),r}yc(e){let t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return B_(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(SL(this.Ac)&&_Y.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}},CD=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Y_(e)}Cc(e,t,r,i=!1){return new bD({Ac:e,methodName:t,Dc:r,path:_r.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function JD(n){let e=n._freezeSettings(),t=Y_(n._databaseId);return new CD(n._databaseId,!!e.ignoreUndefinedProperties,t)}function wY(n,e,t,r,i,s={}){let o=n.Cc(s.merge||s.mergeFields?2:0,e,t,i);XD("Data must be an object, but it was:",o,r);let a=DL(r,o),c,d;if(s.merge)c=new Pr(o.fieldMask),d=o.fieldTransforms;else if(s.mergeFields){let h=[];for(let p of s.mergeFields){let y=TD(e,p,t);if(!o.contains(y))throw new ne(z.INVALID_ARGUMENT,`Field '${y}' is specified in your field mask but missing from your input data.`);xL(h,y)||h.push(y)}c=new Pr(h),d=o.fieldTransforms.filter(p=>c.covers(p.field))}else c=null,d=o.fieldTransforms;return new ED(new vr(a),c,d)}var j_=class n extends Pp{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function IY(n,e,t,r){let i=n.Cc(1,e,t);XD("Data must be an object, but it was:",i,r);let s=[],o=vr.empty();_a(r,(c,d)=>{let h=ZD(e,c,t);d=li(d);let p=i.yc(h);if(d instanceof j_)s.push(h);else{let y=jp(d,p);y!=null&&(s.push(h),o.set(h,y))}});let a=new Pr(s);return new U_(o,a,i.fieldTransforms)}function EY(n,e,t,r,i,s){let o=n.Cc(1,e,t),a=[TD(e,r,t)],c=[i];if(s.length%2!=0)throw new ne(z.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let y=0;y<s.length;y+=2)a.push(TD(e,s[y])),c.push(s[y+1]);let d=[],h=vr.empty();for(let y=a.length-1;y>=0;--y)if(!xL(d,a[y])){let E=a[y],k=c[y];k=li(k);let P=o.yc(E);if(k instanceof j_)d.push(E);else{let M=jp(k,P);M!=null&&(d.push(E),h.set(E,M))}}let p=new Pr(d);return new U_(h,p,o.fieldTransforms)}function bY(n,e,t,r=!1){return jp(t,n.Cc(r?4:3,e))}function jp(n,e){if(AL(n=li(n)))return XD("Unsupported field value:",e,n),DL(n,e);if(n instanceof Pp)return(function(r,i){if(!SL(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);let s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,i){let s=[],o=0;for(let a of r){let c=jp(a,i.wc(o));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}})(n,e)}return(function(r,i){if((r=li(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return nQ(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let s=Gt.fromDate(r);return{timestampValue:C_(i.serializer,s)}}if(r instanceof Gt){let s=new Gt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:C_(i.serializer,s)}}if(r instanceof fa)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ha)return{bytesValue:ZV(i.serializer,r._byteString)};if(r instanceof wn){let s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:BD(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof pa)return(function(o,a){return{mapValue:{fields:{[PD]:{stringValue:OD},[ld]:{arrayValue:{values:o.toArray().map(d=>{if(typeof d!="number")throw a.Sc("VectorValues must only contain numeric values.");return jD(a.serializer,d)})}}}}}})(r,i);throw i.Sc(`Unsupported field value: ${z_(r)}`)})(n,e)}function DL(n,e){let t={};return TV(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):_a(n,(r,i)=>{let s=jp(i,e.mc(r));s!=null&&(t[r]=s)}),{mapValue:{fields:t}}}function AL(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Gt||n instanceof fa||n instanceof ha||n instanceof wn||n instanceof Pp||n instanceof pa)}function XD(n,e,t){if(!AL(t)||!uV(t)){let r=z_(t);throw r==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+r)}}function TD(n,e,t){if((e=li(e))instanceof Id)return e._internalPath;if(typeof e=="string")return ZD(n,e);throw B_("Field path arguments must be of type string or ",n,!1,void 0,t)}var CY=new RegExp("[~\\*/\\[\\]]");function ZD(n,e,t){if(e.search(CY)>=0)throw B_(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Id(...e.split("."))._internalPath}catch{throw B_(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function B_(n,e,t,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new ne(z.INVALID_ARGUMENT,a+n+c)}function xL(n,e){return n.some(t=>t.isEqual(e))}var $_=class{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new wn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new SD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(eA("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},SD=class extends $_{data(){return super.data()}};function eA(n,e){return typeof e=="string"?ZD(n,e):e instanceof Id?e._internalPath:e._delegate._internalPath}function TY(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ne(z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Op=class{},DD=class extends Op{};function Bp(n,e,...t){let r=[];e instanceof Op&&r.push(e),r=r.concat(t),(function(s){let o=s.filter(c=>c instanceof AD).length,a=s.filter(c=>c instanceof H_).length;if(o>1||o>0&&a>0)throw new ne(z.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(let i of r)n=i._apply(n);return n}var H_=class n extends DD{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return RL(e._query,t),new wd(e.firestore,e.converter,fS(e._query,t))}_parse(e){let t=JD(e.firestore);return(function(s,o,a,c,d,h,p){let y;if(d.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new ne(z.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){aV(p,h);let k=[];for(let P of p)k.push(oV(c,s,P));y={arrayValue:{values:k}}}else y=oV(c,s,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||aV(p,h),y=bY(a,o,p,h==="in"||h==="not-in");return qt.create(d,h,y)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function $p(n,e,t){let r=e,i=eA("where",n);return H_._create(i,r,t)}var AD=class n extends Op{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:di.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:((function(i,s){let o=i,a=s.getFlattenedFilters();for(let c of a)RL(o,c),o=fS(o,c)})(e._query,t),new wd(e.firestore,e.converter,fS(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};function oV(n,e,t){if(typeof(t=li(t))=="string"){if(t==="")throw new ne(z.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!UV(e)&&t.indexOf("/")!==-1)throw new ne(z.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(Et.fromString(t));if(!he.isDocumentKey(r))throw new ne(z.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return DF(n,new he(r))}if(t instanceof wn)return DF(n,t._key);throw new ne(z.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${z_(t)}.`)}function aV(n,e){if(!Array.isArray(n)||n.length===0)throw new ne(z.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function RL(n,e){let t=(function(i,s){for(let o of i)for(let a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null})(n.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new ne(z.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ne(z.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var xD=class{convertValue(e,t="none"){switch(ga(e)){case 0:return null;case 1:return e.booleanValue;case 2:return It(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(qs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw me(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return _a(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertVectorValue(e){let t=e.fields?.[ld].arrayValue?.values?.map(r=>It(r.doubleValue));return new pa(t)}convertGeoPoint(e){return new fa(It(e.latitude),It(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=W_(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Dp(e));default:return null}}convertTimestamp(e){let t=Hs(e);return new Gt(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=Et.fromString(e);at(sL(r),9688,{name:e});let i=new v_(r.get(1),r.get(3)),s=new he(r.popFirst(5));return i.isEqual(t)||$s(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}};function SY(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var Qc=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Yc=class n extends $_{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new sd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(eA("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ne(z.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,t={};return t.type=n._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};Yc._jsonSchemaVersion="firestore/documentSnapshot/1.0",Yc._jsonSchema={type:zt("string",Yc._jsonSchemaVersion),bundleSource:zt("string","DocumentSnapshot"),bundleName:zt("string"),bundle:zt("string")};var sd=class extends Yc{data(e={}){return super.data(e)}},od=class n{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Qc(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new sd(this._firestore,this._userDataWriter,r.key,r,new Qc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ne(z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{let c=new sd(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Qc(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{let c=new sd(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Qc(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),d=-1,h=-1;return a.type!==0&&(d=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:DY(a.type),doc:c,oldIndex:d,newIndex:h}})}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ne(z.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=n._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Cp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let t=[],r=[],i=[];return this.docs.forEach(s=>{s._document!==null&&(t.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function DY(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return me(61501,{type:n})}}od._jsonSchemaVersion="firestore/querySnapshot/1.0",od._jsonSchema={type:zt("string",od._jsonSchemaVersion),bundleSource:zt("string","QuerySnapshot"),bundleName:zt("string"),bundle:zt("string")};var q_=class extends xD{constructor(e){super(),this.firestore=e}convertBytes(e){return new ha(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new wn(this.firestore,null,t)}};function Ws(n,e,t){n=js(n,wn);let r=js(n.firestore,va),i=SY(n.converter,e,t);return tA(r,[wY(JD(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,Bs.none())])}function wa(n,e,t,...r){n=js(n,wn);let i=js(n.firestore,va),s=JD(i),o;return o=typeof(e=li(e))=="string"||e instanceof Id?EY(s,"updateDoc",n._key,e,t,r):IY(s,"updateDoc",n._key,e),tA(i,[o.toMutation(n._key,Bs.exists(!0))])}function sl(n){return tA(js(n.firestore,va),[new xp(n._key,Bs.none())])}function Hp(n,...e){n=li(n);let t={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||sV(e[r])||(t=e[r++]);let i={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(sV(e[r])){let c=e[r];e[r]=c.next?.bind(c),e[r+1]=c.error?.bind(c),e[r+2]=c.complete?.bind(c)}let s,o,a;if(n instanceof wn)o=js(n.firestore,va),a=UD(n._key.path),s={next:c=>{e[r]&&e[r](AY(o,n,c))},error:e[r+1],complete:e[r+2]};else{let c=js(n,wd);o=js(c.firestore,va),a=c._query;let d=new q_(o);s={next:h=>{e[r]&&e[r](new od(o,d,c,h))},error:e[r+1],complete:e[r+2]},TY(n._query)}return(function(d,h,p,y){let E=new wD(y),k=new fD(h,E,p);return d.asyncQueue.enqueueAndForget(async()=>JQ(await eV(d),k)),()=>{E.Nu(),d.asyncQueue.enqueueAndForget(async()=>XQ(await eV(d),k))}})(TL(o),a,i,s)}function tA(n,e){return(function(r,i){let s=new Us;return r.asyncQueue.enqueueAndForget(async()=>oY(await mY(r),i,s)),s.promise})(TL(n),e)}function AY(n,e,t){let r=t.docs.get(e._key),i=new q_(n);return new Yc(n,i,e._key,r,new Qc(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(i){Ed=i})(w2),ap(new Ms("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),a=new va(new WT(r.getProvider("auth-internal")),new YT(o,r.getProvider("app-check-internal")),(function(d,h){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new ne(z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new v_(d.options.projectId,h)})(o,i),o);return s=B({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),oa(mF,yF,e),oa(mF,yF,"esm2020")})();var kL=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},NL={};var Ks,nA;(function(){var n;function e(T,_){function I(){}I.prototype=_.prototype,T.D=_.prototype,T.prototype=new I,T.prototype.constructor=T,T.C=function(C,b,A){for(var w=Array(arguments.length-2),_t=2;_t<arguments.length;_t++)w[_t-2]=arguments[_t];return _.prototype[b].apply(C,w)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(T,_,I){I||(I=0);var C=Array(16);if(typeof _=="string")for(var b=0;16>b;++b)C[b]=_.charCodeAt(I++)|_.charCodeAt(I++)<<8|_.charCodeAt(I++)<<16|_.charCodeAt(I++)<<24;else for(b=0;16>b;++b)C[b]=_[I++]|_[I++]<<8|_[I++]<<16|_[I++]<<24;_=T.g[0],I=T.g[1],b=T.g[2];var A=T.g[3],w=_+(A^I&(b^A))+C[0]+3614090360&4294967295;_=I+(w<<7&4294967295|w>>>25),w=A+(b^_&(I^b))+C[1]+3905402710&4294967295,A=_+(w<<12&4294967295|w>>>20),w=b+(I^A&(_^I))+C[2]+606105819&4294967295,b=A+(w<<17&4294967295|w>>>15),w=I+(_^b&(A^_))+C[3]+3250441966&4294967295,I=b+(w<<22&4294967295|w>>>10),w=_+(A^I&(b^A))+C[4]+4118548399&4294967295,_=I+(w<<7&4294967295|w>>>25),w=A+(b^_&(I^b))+C[5]+1200080426&4294967295,A=_+(w<<12&4294967295|w>>>20),w=b+(I^A&(_^I))+C[6]+2821735955&4294967295,b=A+(w<<17&4294967295|w>>>15),w=I+(_^b&(A^_))+C[7]+4249261313&4294967295,I=b+(w<<22&4294967295|w>>>10),w=_+(A^I&(b^A))+C[8]+1770035416&4294967295,_=I+(w<<7&4294967295|w>>>25),w=A+(b^_&(I^b))+C[9]+2336552879&4294967295,A=_+(w<<12&4294967295|w>>>20),w=b+(I^A&(_^I))+C[10]+4294925233&4294967295,b=A+(w<<17&4294967295|w>>>15),w=I+(_^b&(A^_))+C[11]+2304563134&4294967295,I=b+(w<<22&4294967295|w>>>10),w=_+(A^I&(b^A))+C[12]+1804603682&4294967295,_=I+(w<<7&4294967295|w>>>25),w=A+(b^_&(I^b))+C[13]+4254626195&4294967295,A=_+(w<<12&4294967295|w>>>20),w=b+(I^A&(_^I))+C[14]+2792965006&4294967295,b=A+(w<<17&4294967295|w>>>15),w=I+(_^b&(A^_))+C[15]+1236535329&4294967295,I=b+(w<<22&4294967295|w>>>10),w=_+(b^A&(I^b))+C[1]+4129170786&4294967295,_=I+(w<<5&4294967295|w>>>27),w=A+(I^b&(_^I))+C[6]+3225465664&4294967295,A=_+(w<<9&4294967295|w>>>23),w=b+(_^I&(A^_))+C[11]+643717713&4294967295,b=A+(w<<14&4294967295|w>>>18),w=I+(A^_&(b^A))+C[0]+3921069994&4294967295,I=b+(w<<20&4294967295|w>>>12),w=_+(b^A&(I^b))+C[5]+3593408605&4294967295,_=I+(w<<5&4294967295|w>>>27),w=A+(I^b&(_^I))+C[10]+38016083&4294967295,A=_+(w<<9&4294967295|w>>>23),w=b+(_^I&(A^_))+C[15]+3634488961&4294967295,b=A+(w<<14&4294967295|w>>>18),w=I+(A^_&(b^A))+C[4]+3889429448&4294967295,I=b+(w<<20&4294967295|w>>>12),w=_+(b^A&(I^b))+C[9]+568446438&4294967295,_=I+(w<<5&4294967295|w>>>27),w=A+(I^b&(_^I))+C[14]+3275163606&4294967295,A=_+(w<<9&4294967295|w>>>23),w=b+(_^I&(A^_))+C[3]+4107603335&4294967295,b=A+(w<<14&4294967295|w>>>18),w=I+(A^_&(b^A))+C[8]+1163531501&4294967295,I=b+(w<<20&4294967295|w>>>12),w=_+(b^A&(I^b))+C[13]+2850285829&4294967295,_=I+(w<<5&4294967295|w>>>27),w=A+(I^b&(_^I))+C[2]+4243563512&4294967295,A=_+(w<<9&4294967295|w>>>23),w=b+(_^I&(A^_))+C[7]+1735328473&4294967295,b=A+(w<<14&4294967295|w>>>18),w=I+(A^_&(b^A))+C[12]+2368359562&4294967295,I=b+(w<<20&4294967295|w>>>12),w=_+(I^b^A)+C[5]+4294588738&4294967295,_=I+(w<<4&4294967295|w>>>28),w=A+(_^I^b)+C[8]+2272392833&4294967295,A=_+(w<<11&4294967295|w>>>21),w=b+(A^_^I)+C[11]+1839030562&4294967295,b=A+(w<<16&4294967295|w>>>16),w=I+(b^A^_)+C[14]+4259657740&4294967295,I=b+(w<<23&4294967295|w>>>9),w=_+(I^b^A)+C[1]+2763975236&4294967295,_=I+(w<<4&4294967295|w>>>28),w=A+(_^I^b)+C[4]+1272893353&4294967295,A=_+(w<<11&4294967295|w>>>21),w=b+(A^_^I)+C[7]+4139469664&4294967295,b=A+(w<<16&4294967295|w>>>16),w=I+(b^A^_)+C[10]+3200236656&4294967295,I=b+(w<<23&4294967295|w>>>9),w=_+(I^b^A)+C[13]+681279174&4294967295,_=I+(w<<4&4294967295|w>>>28),w=A+(_^I^b)+C[0]+3936430074&4294967295,A=_+(w<<11&4294967295|w>>>21),w=b+(A^_^I)+C[3]+3572445317&4294967295,b=A+(w<<16&4294967295|w>>>16),w=I+(b^A^_)+C[6]+76029189&4294967295,I=b+(w<<23&4294967295|w>>>9),w=_+(I^b^A)+C[9]+3654602809&4294967295,_=I+(w<<4&4294967295|w>>>28),w=A+(_^I^b)+C[12]+3873151461&4294967295,A=_+(w<<11&4294967295|w>>>21),w=b+(A^_^I)+C[15]+530742520&4294967295,b=A+(w<<16&4294967295|w>>>16),w=I+(b^A^_)+C[2]+3299628645&4294967295,I=b+(w<<23&4294967295|w>>>9),w=_+(b^(I|~A))+C[0]+4096336452&4294967295,_=I+(w<<6&4294967295|w>>>26),w=A+(I^(_|~b))+C[7]+1126891415&4294967295,A=_+(w<<10&4294967295|w>>>22),w=b+(_^(A|~I))+C[14]+2878612391&4294967295,b=A+(w<<15&4294967295|w>>>17),w=I+(A^(b|~_))+C[5]+4237533241&4294967295,I=b+(w<<21&4294967295|w>>>11),w=_+(b^(I|~A))+C[12]+1700485571&4294967295,_=I+(w<<6&4294967295|w>>>26),w=A+(I^(_|~b))+C[3]+2399980690&4294967295,A=_+(w<<10&4294967295|w>>>22),w=b+(_^(A|~I))+C[10]+4293915773&4294967295,b=A+(w<<15&4294967295|w>>>17),w=I+(A^(b|~_))+C[1]+2240044497&4294967295,I=b+(w<<21&4294967295|w>>>11),w=_+(b^(I|~A))+C[8]+1873313359&4294967295,_=I+(w<<6&4294967295|w>>>26),w=A+(I^(_|~b))+C[15]+4264355552&4294967295,A=_+(w<<10&4294967295|w>>>22),w=b+(_^(A|~I))+C[6]+2734768916&4294967295,b=A+(w<<15&4294967295|w>>>17),w=I+(A^(b|~_))+C[13]+1309151649&4294967295,I=b+(w<<21&4294967295|w>>>11),w=_+(b^(I|~A))+C[4]+4149444226&4294967295,_=I+(w<<6&4294967295|w>>>26),w=A+(I^(_|~b))+C[11]+3174756917&4294967295,A=_+(w<<10&4294967295|w>>>22),w=b+(_^(A|~I))+C[2]+718787259&4294967295,b=A+(w<<15&4294967295|w>>>17),w=I+(A^(b|~_))+C[9]+3951481745&4294967295,T.g[0]=T.g[0]+_&4294967295,T.g[1]=T.g[1]+(b+(w<<21&4294967295|w>>>11))&4294967295,T.g[2]=T.g[2]+b&4294967295,T.g[3]=T.g[3]+A&4294967295}r.prototype.u=function(T,_){_===void 0&&(_=T.length);for(var I=_-this.blockSize,C=this.B,b=this.h,A=0;A<_;){if(b==0)for(;A<=I;)i(this,T,A),A+=this.blockSize;if(typeof T=="string"){for(;A<_;)if(C[b++]=T.charCodeAt(A++),b==this.blockSize){i(this,C),b=0;break}}else for(;A<_;)if(C[b++]=T[A++],b==this.blockSize){i(this,C),b=0;break}}this.h=b,this.o+=_},r.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var _=1;_<T.length-8;++_)T[_]=0;var I=8*this.o;for(_=T.length-8;_<T.length;++_)T[_]=I&255,I/=256;for(this.u(T),T=Array(16),_=I=0;4>_;++_)for(var C=0;32>C;C+=8)T[I++]=this.g[_]>>>C&255;return T};function s(T,_){var I=a;return Object.prototype.hasOwnProperty.call(I,T)?I[T]:I[T]=_(T)}function o(T,_){this.h=_;for(var I=[],C=!0,b=T.length-1;0<=b;b--){var A=T[b]|0;C&&A==_||(I[b]=A,C=!1)}this.g=I}var a={};function c(T){return-128<=T&&128>T?s(T,function(_){return new o([_|0],0>_?-1:0)}):new o([T|0],0>T?-1:0)}function d(T){if(isNaN(T)||!isFinite(T))return p;if(0>T)return M(d(-T));for(var _=[],I=1,C=0;T>=I;C++)_[C]=T/I|0,I*=4294967296;return new o(_,0)}function h(T,_){if(T.length==0)throw Error("number format error: empty string");if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(T.charAt(0)=="-")return M(h(T.substring(1),_));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=d(Math.pow(_,8)),C=p,b=0;b<T.length;b+=8){var A=Math.min(8,T.length-b),w=parseInt(T.substring(b,b+A),_);8>A?(A=d(Math.pow(_,A)),C=C.j(A).add(d(w))):(C=C.j(I),C=C.add(d(w)))}return C}var p=c(0),y=c(1),E=c(16777216);n=o.prototype,n.m=function(){if(P(this))return-M(this).m();for(var T=0,_=1,I=0;I<this.g.length;I++){var C=this.i(I);T+=(0<=C?C:4294967296+C)*_,_*=4294967296}return T},n.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(k(this))return"0";if(P(this))return"-"+M(this).toString(T);for(var _=d(Math.pow(T,6)),I=this,C="";;){var b=De(I,_).g;I=H(I,b.j(_));var A=((0<I.g.length?I.g[0]:I.h)>>>0).toString(T);if(I=b,k(I))return A+C;for(;6>A.length;)A="0"+A;C=A+C}},n.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function k(T){if(T.h!=0)return!1;for(var _=0;_<T.g.length;_++)if(T.g[_]!=0)return!1;return!0}function P(T){return T.h==-1}n.l=function(T){return T=H(this,T),P(T)?-1:k(T)?0:1};function M(T){for(var _=T.g.length,I=[],C=0;C<_;C++)I[C]=~T.g[C];return new o(I,~T.h).add(y)}n.abs=function(){return P(this)?M(this):this},n.add=function(T){for(var _=Math.max(this.g.length,T.g.length),I=[],C=0,b=0;b<=_;b++){var A=C+(this.i(b)&65535)+(T.i(b)&65535),w=(A>>>16)+(this.i(b)>>>16)+(T.i(b)>>>16);C=w>>>16,A&=65535,w&=65535,I[b]=w<<16|A}return new o(I,I[I.length-1]&-2147483648?-1:0)};function H(T,_){return T.add(M(_))}n.j=function(T){if(k(this)||k(T))return p;if(P(this))return P(T)?M(this).j(M(T)):M(M(this).j(T));if(P(T))return M(this.j(M(T)));if(0>this.l(E)&&0>T.l(E))return d(this.m()*T.m());for(var _=this.g.length+T.g.length,I=[],C=0;C<2*_;C++)I[C]=0;for(C=0;C<this.g.length;C++)for(var b=0;b<T.g.length;b++){var A=this.i(C)>>>16,w=this.i(C)&65535,_t=T.i(b)>>>16,Wn=T.i(b)&65535;I[2*C+2*b]+=w*Wn,Y(I,2*C+2*b),I[2*C+2*b+1]+=A*Wn,Y(I,2*C+2*b+1),I[2*C+2*b+1]+=w*_t,Y(I,2*C+2*b+1),I[2*C+2*b+2]+=A*_t,Y(I,2*C+2*b+2)}for(C=0;C<_;C++)I[C]=I[2*C+1]<<16|I[2*C];for(C=_;C<2*_;C++)I[C]=0;return new o(I,0)};function Y(T,_){for(;(T[_]&65535)!=T[_];)T[_+1]+=T[_]>>>16,T[_]&=65535,_++}function ee(T,_){this.g=T,this.h=_}function De(T,_){if(k(_))throw Error("division by zero");if(k(T))return new ee(p,p);if(P(T))return _=De(M(T),_),new ee(M(_.g),M(_.h));if(P(_))return _=De(T,M(_)),new ee(M(_.g),_.h);if(30<T.g.length){if(P(T)||P(_))throw Error("slowDivide_ only works with positive integers.");for(var I=y,C=_;0>=C.l(T);)I=et(I),C=et(C);var b=ve(I,1),A=ve(C,1);for(C=ve(C,2),I=ve(I,2);!k(C);){var w=A.add(C);0>=w.l(T)&&(b=b.add(I),A=w),C=ve(C,1),I=ve(I,1)}return _=H(T,b.j(_)),new ee(b,_)}for(b=p;0<=T.l(_);){for(I=Math.max(1,Math.floor(T.m()/_.m())),C=Math.ceil(Math.log(I)/Math.LN2),C=48>=C?1:Math.pow(2,C-48),A=d(I),w=A.j(_);P(w)||0<w.l(T);)I-=C,A=d(I),w=A.j(_);k(A)&&(A=y),b=b.add(A),T=H(T,w)}return new ee(b,T)}n.A=function(T){return De(this,T).h},n.and=function(T){for(var _=Math.max(this.g.length,T.g.length),I=[],C=0;C<_;C++)I[C]=this.i(C)&T.i(C);return new o(I,this.h&T.h)},n.or=function(T){for(var _=Math.max(this.g.length,T.g.length),I=[],C=0;C<_;C++)I[C]=this.i(C)|T.i(C);return new o(I,this.h|T.h)},n.xor=function(T){for(var _=Math.max(this.g.length,T.g.length),I=[],C=0;C<_;C++)I[C]=this.i(C)^T.i(C);return new o(I,this.h^T.h)};function et(T){for(var _=T.g.length+1,I=[],C=0;C<_;C++)I[C]=T.i(C)<<1|T.i(C-1)>>>31;return new o(I,T.h)}function ve(T,_){var I=_>>5;_%=32;for(var C=T.g.length-I,b=[],A=0;A<C;A++)b[A]=0<_?T.i(A+I)>>>_|T.i(A+I+1)<<32-_:T.i(A+I);return new o(b,T.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,nA=NL.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=h,Ks=NL.Integer=o}).apply(typeof kL<"u"?kL:typeof self<"u"?self:typeof window<"u"?window:{});var e0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Qs={};var rA,xY,Sd,iA,qp,t0,sA,oA,aA;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,f,m){return l==Array.prototype||l==Object.prototype||(l[f]=m.value),l};function t(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof e0=="object"&&e0];for(var f=0;f<l.length;++f){var m=l[f];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}var r=t(this);function i(l,f){if(f)e:{var m=r;l=l.split(".");for(var S=0;S<l.length-1;S++){var V=l[S];if(!(V in m))break e;m=m[V]}l=l[l.length-1],S=m[l],f=f(S),f!=S&&f!=null&&e(m,l,{configurable:!0,writable:!0,value:f})}}function s(l,f){l instanceof String&&(l+="");var m=0,S=!1,V={next:function(){if(!S&&m<l.length){var U=m++;return{value:f(U,l[U]),done:!1}}return S=!0,{done:!0,value:void 0}}};return V[Symbol.iterator]=function(){return V},V}i("Array.prototype.values",function(l){return l||function(){return s(this,function(f,m){return m})}});var o=o||{},a=this||self;function c(l){var f=typeof l;return f=f!="object"?f:l?Array.isArray(l)?"array":f:"null",f=="array"||f=="object"&&typeof l.length=="number"}function d(l){var f=typeof l;return f=="object"&&l!=null||f=="function"}function h(l,f,m){return l.call.apply(l.bind,arguments)}function p(l,f,m){if(!l)throw Error();if(2<arguments.length){var S=Array.prototype.slice.call(arguments,2);return function(){var V=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(V,S),l.apply(f,V)}}return function(){return l.apply(f,arguments)}}function y(l,f,m){return y=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,y.apply(null,arguments)}function E(l,f){var m=Array.prototype.slice.call(arguments,1);return function(){var S=m.slice();return S.push.apply(S,arguments),l.apply(this,S)}}function k(l,f){function m(){}m.prototype=f.prototype,l.aa=f.prototype,l.prototype=new m,l.prototype.constructor=l,l.Qb=function(S,V,U){for(var K=Array(arguments.length-2),Qe=2;Qe<arguments.length;Qe++)K[Qe-2]=arguments[Qe];return f.prototype[V].apply(S,K)}}function P(l){let f=l.length;if(0<f){let m=Array(f);for(let S=0;S<f;S++)m[S]=l[S];return m}return[]}function M(l,f){for(let m=1;m<arguments.length;m++){let S=arguments[m];if(c(S)){let V=l.length||0,U=S.length||0;l.length=V+U;for(let K=0;K<U;K++)l[V+K]=S[K]}else l.push(S)}}class H{constructor(f,m){this.i=f,this.j=m,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function Y(l){return/^[\s\xa0]*$/.test(l)}function ee(){var l=a.navigator;return l&&(l=l.userAgent)?l:""}function De(l){return De[" "](l),l}De[" "]=function(){};var et=ee().indexOf("Gecko")!=-1&&!(ee().toLowerCase().indexOf("webkit")!=-1&&ee().indexOf("Edge")==-1)&&!(ee().indexOf("Trident")!=-1||ee().indexOf("MSIE")!=-1)&&ee().indexOf("Edge")==-1;function ve(l,f,m){for(let S in l)f.call(m,l[S],S,l)}function T(l,f){for(let m in l)f.call(void 0,l[m],m,l)}function _(l){let f={};for(let m in l)f[m]=l[m];return f}let I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function C(l,f){let m,S;for(let V=1;V<arguments.length;V++){S=arguments[V];for(m in S)l[m]=S[m];for(let U=0;U<I.length;U++)m=I[U],Object.prototype.hasOwnProperty.call(S,m)&&(l[m]=S[m])}}function b(l){var f=1;l=l.split(":");let m=[];for(;0<f&&l.length;)m.push(l.shift()),f--;return l.length&&m.push(l.join(":")),m}function A(l){a.setTimeout(()=>{throw l},0)}function w(){var l=oo;let f=null;return l.g&&(f=l.g,l.g=l.g.next,l.g||(l.h=null),f.next=null),f}class _t{constructor(){this.h=this.g=null}add(f,m){let S=Wn.get();S.set(f,m),this.h?this.h.next=S:this.g=S,this.h=S}}var Wn=new H(()=>new Ew,l=>l.reset());class Ew{constructor(){this.next=this.g=this.h=null}set(f,m){this.h=f,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let Fa,gi=!1,oo=new _t,vg=()=>{let l=a.Promise.resolve(void 0);Fa=()=>{l.then(_g)}};var _g=()=>{for(var l;l=w();){try{l.h.call(l.g)}catch(m){A(m)}var f=Wn;f.j(l),100>f.h&&(f.h++,l.next=f.g,f.g=l)}gi=!1};function jr(){this.s=this.s,this.C=this.C}jr.prototype.s=!1,jr.prototype.ma=function(){this.s||(this.s=!0,this.N())},jr.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Zt(l,f){this.type=l,this.g=this.target=f,this.defaultPrevented=!1}Zt.prototype.h=function(){this.defaultPrevented=!0};var Il=(function(){if(!a.addEventListener||!Object.defineProperty)return!1;var l=!1,f=Object.defineProperty({},"passive",{get:function(){l=!0}});try{let m=()=>{};a.addEventListener("test",m,f),a.removeEventListener("test",m,f)}catch{}return l})();function is(l,f){if(Zt.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var m=this.type=l.type,S=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=f,f=l.relatedTarget){if(et){e:{try{De(f.nodeName);var V=!0;break e}catch{}V=!1}V||(f=null)}}else m=="mouseover"?f=l.fromElement:m=="mouseout"&&(f=l.toElement);this.relatedTarget=f,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:oh[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&is.aa.h.call(this)}}k(is,Zt);var oh={2:"touch",3:"pen",4:"mouse"};is.prototype.h=function(){is.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var ss="closure_listenable_"+(1e6*Math.random()|0),ah=0;function wg(l,f,m,S,V){this.listener=l,this.proxy=null,this.src=f,this.type=m,this.capture=!!S,this.ha=V,this.key=++ah,this.da=this.fa=!1}function Va(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function El(l){this.src=l,this.g={},this.h=0}El.prototype.add=function(l,f,m,S,V){var U=l.toString();l=this.g[U],l||(l=this.g[U]=[],this.h++);var K=Cl(l,f,S,V);return-1<K?(f=l[K],m||(f.fa=!1)):(f=new wg(f,this.src,U,!!S,V),f.fa=m,l.push(f)),f};function bl(l,f){var m=f.type;if(m in l.g){var S=l.g[m],V=Array.prototype.indexOf.call(S,f,void 0),U;(U=0<=V)&&Array.prototype.splice.call(S,V,1),U&&(Va(f),l.g[m].length==0&&(delete l.g[m],l.h--))}}function Cl(l,f,m,S){for(var V=0;V<l.length;++V){var U=l[V];if(!U.da&&U.listener==f&&U.capture==!!m&&U.ha==S)return V}return-1}var La="closure_lm_"+(1e6*Math.random()|0),Tl={};function Ig(l,f,m,S,V){if(S&&S.once)return Dl(l,f,m,S,V);if(Array.isArray(f)){for(var U=0;U<f.length;U++)Ig(l,f[U],m,S,V);return null}return m=os(m),l&&l[ss]?l.K(f,m,d(S)?!!S.capture:!!S,V):Sl(l,f,m,!1,S,V)}function Sl(l,f,m,S,V,U){if(!f)throw Error("Invalid event type");var K=d(V)?!!V.capture:!!V,Qe=Al(l);if(Qe||(l[La]=Qe=new El(l)),m=Qe.add(f,m,S,K,U),m.proxy)return m;if(S=ch(),m.proxy=S,S.src=l,S.listener=m,l.addEventListener)Il||(V=K),V===void 0&&(V=!1),l.addEventListener(f.toString(),S,V);else if(l.attachEvent)l.attachEvent(Ua(f.toString()),S);else if(l.addListener&&l.removeListener)l.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return m}function ch(){function l(m){return f.call(l.src,l.listener,m)}let f=bw;return l}function Dl(l,f,m,S,V){if(Array.isArray(f)){for(var U=0;U<f.length;U++)Dl(l,f[U],m,S,V);return null}return m=os(m),l&&l[ss]?l.L(f,m,d(S)?!!S.capture:!!S,V):Sl(l,f,m,!0,S,V)}function en(l,f,m,S,V){if(Array.isArray(f))for(var U=0;U<f.length;U++)en(l,f[U],m,S,V);else S=d(S)?!!S.capture:!!S,m=os(m),l&&l[ss]?(l=l.i,f=String(f).toString(),f in l.g&&(U=l.g[f],m=Cl(U,m,S,V),-1<m&&(Va(U[m]),Array.prototype.splice.call(U,m,1),U.length==0&&(delete l.g[f],l.h--)))):l&&(l=Al(l))&&(f=l.g[f.toString()],l=-1,f&&(l=Cl(f,m,S,V)),(m=-1<l?f[l]:null)&&tn(m))}function tn(l){if(typeof l!="number"&&l&&!l.da){var f=l.src;if(f&&f[ss])bl(f.i,l);else{var m=l.type,S=l.proxy;f.removeEventListener?f.removeEventListener(m,S,l.capture):f.detachEvent?f.detachEvent(Ua(m),S):f.addListener&&f.removeListener&&f.removeListener(S),(m=Al(f))?(bl(m,l),m.h==0&&(m.src=null,f[La]=null)):Va(l)}}}function Ua(l){return l in Tl?Tl[l]:Tl[l]="on"+l}function bw(l,f){if(l.da)l=!0;else{f=new is(f,this);var m=l.listener,S=l.ha||l.src;l.fa&&tn(l),l=m.call(S,f)}return l}function Al(l){return l=l[La],l instanceof El?l:null}var lh="__closure_events_fn_"+(1e9*Math.random()>>>0);function os(l){return typeof l=="function"?l:(l[lh]||(l[lh]=function(f){return l.handleEvent(f)}),l[lh])}function nn(){jr.call(this),this.i=new El(this),this.M=this,this.F=null}k(nn,jr),nn.prototype[ss]=!0,nn.prototype.removeEventListener=function(l,f,m,S){en(this,l,f,m,S)};function fn(l,f){var m,S=l.F;if(S)for(m=[];S;S=S.F)m.push(S);if(l=l.M,S=f.type||f,typeof f=="string")f=new Zt(f,l);else if(f instanceof Zt)f.target=f.target||l;else{var V=f;f=new Zt(S,l),C(f,V)}if(V=!0,m)for(var U=m.length-1;0<=U;U--){var K=f.g=m[U];V=ao(K,S,!0,f)&&V}if(K=f.g=l,V=ao(K,S,!0,f)&&V,V=ao(K,S,!1,f)&&V,m)for(U=0;U<m.length;U++)K=f.g=m[U],V=ao(K,S,!1,f)&&V}nn.prototype.N=function(){if(nn.aa.N.call(this),this.i){var l=this.i,f;for(f in l.g){for(var m=l.g[f],S=0;S<m.length;S++)Va(m[S]);delete l.g[f],l.h--}}this.F=null},nn.prototype.K=function(l,f,m,S){return this.i.add(String(l),f,!1,m,S)},nn.prototype.L=function(l,f,m,S){return this.i.add(String(l),f,!0,m,S)};function ao(l,f,m,S){if(f=l.i.g[String(f)],!f)return!0;f=f.concat();for(var V=!0,U=0;U<f.length;++U){var K=f[U];if(K&&!K.da&&K.capture==m){var Qe=K.listener,Nt=K.ha||K.src;K.fa&&bl(l.i,K),V=Qe.call(Nt,S)!==!1&&V}}return V&&!S.defaultPrevented}function Eg(l,f,m){if(typeof l=="function")m&&(l=y(l,m));else if(l&&typeof l.handleEvent=="function")l=y(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:a.setTimeout(l,f||0)}function bg(l){l.g=Eg(()=>{l.g=null,l.i&&(l.i=!1,bg(l))},l.l);let f=l.h;l.h=null,l.m.apply(null,f)}class Cg extends jr{constructor(f,m){super(),this.m=f,this.l=m,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:bg(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function co(l){jr.call(this),this.h=l,this.g={}}k(co,jr);var lo=[];function xl(l){ve(l.g,function(f,m){this.g.hasOwnProperty(m)&&tn(f)},l),l.g={}}co.prototype.N=function(){co.aa.N.call(this),xl(this)},co.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ja=a.JSON.stringify,as=a.JSON.parse,Tg=class{stringify(l){return a.JSON.stringify(l,void 0)}parse(l){return a.JSON.parse(l,void 0)}};function uo(){}uo.prototype.h=null;function uh(l){return l.h||(l.h=l.i())}function ho(){}var fo={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function rn(){Zt.call(this,"d")}k(rn,Zt);function Rl(){Zt.call(this,"c")}k(Rl,Zt);var sr={},po=null;function kl(){return po=po||new nn}sr.La="serverreachability";function Sg(l){Zt.call(this,sr.La,l)}k(Sg,Zt);function Er(l){let f=kl();fn(f,new Sg(f))}sr.STAT_EVENT="statevent";function Dg(l,f){Zt.call(this,sr.STAT_EVENT,l),this.stat=f}k(Dg,Zt);function bn(l){let f=kl();fn(f,new Dg(f,l))}sr.Ma="timingevent";function Ba(l,f){Zt.call(this,sr.Ma,l),this.size=f}k(Ba,Zt);function go(l,f){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){l()},f)}function mo(){this.g=!0}mo.prototype.xa=function(){this.g=!1};function dh(l,f,m,S,V,U){l.info(function(){if(l.g)if(U)for(var K="",Qe=U.split("&"),Nt=0;Nt<Qe.length;Nt++){var Ye=Qe[Nt].split("=");if(1<Ye.length){var kn=Ye[0];Ye=Ye[1];var Nn=kn.split("_");K=2<=Nn.length&&Nn[1]=="type"?K+(kn+"="+Ye+"&"):K+(kn+"=redacted&")}}else K=null;else K=U;return"XMLHTTP REQ ("+S+") [attempt "+V+"]: "+f+`
`+m+`
`+K})}function $a(l,f,m,S,V,U,K){l.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+V+"]: "+f+`
`+m+`
`+U+" "+K})}function yo(l,f,m,S){l.info(function(){return"XMLHTTP TEXT ("+f+"): "+Ag(l,m)+(S?" "+S:"")})}function mi(l,f){l.info(function(){return"TIMEOUT: "+f})}mo.prototype.info=function(){};function Ag(l,f){if(!l.g)return f;if(!f)return null;try{var m=JSON.parse(f);if(m){for(l=0;l<m.length;l++)if(Array.isArray(m[l])){var S=m[l];if(!(2>S.length)){var V=S[1];if(Array.isArray(V)&&!(1>V.length)){var U=V[0];if(U!="noop"&&U!="stop"&&U!="close")for(var K=1;K<V.length;K++)V[K]=""}}}}return ja(m)}catch{return f}}var Ha={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Nl={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},qa;function za(){}k(za,uo),za.prototype.g=function(){return new XMLHttpRequest},za.prototype.i=function(){return{}},qa=new za;function yi(l,f,m,S){this.j=l,this.i=f,this.l=m,this.R=S||1,this.U=new co(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new hh}function hh(){this.i=null,this.g="",this.h=!1}var xg={},vo={};function Ml(l,f,m){l.L=1,l.v=Vl(Br(f)),l.m=m,l.P=!0,Pl(l,null)}function Pl(l,f){l.F=Date.now(),wo(l),l.A=Br(l.v);var m=l.A,S=l.R;Array.isArray(S)||(S=[String(S)]),Vg(m.i,"t",S),l.C=0,m=l.j.J,l.h=new hh,l.g=g(l.j,m?f:null,!l.m),0<l.O&&(l.M=new Cg(y(l.Y,l,l.g),l.O)),f=l.U,m=l.g,S=l.ca;var V="readystatechange";Array.isArray(V)||(V&&(lo[0]=V.toString()),V=lo);for(var U=0;U<V.length;U++){var K=Ig(m,V[U],S||f.handleEvent,!1,f.h||f);if(!K)break;f.g[K.key]=K}f=l.H?_(l.H):{},l.m?(l.u||(l.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,f)):(l.u="GET",l.g.ea(l.A,l.u,null,f)),Er(),dh(l.i,l.u,l.A,l.l,l.R,l.m)}yi.prototype.ca=function(l){l=l.target;let f=this.M;f&&Qn(l)==3?f.j():this.Y(l)},yi.prototype.Y=function(l){try{if(l==this.g)e:{let Nn=Qn(this.g);var f=this.g.Ba();let Gl=this.g.Z();if(!(3>Nn)&&(Nn!=3||this.g&&(this.h.h||this.g.oa()||$g(this.g)))){this.J||Nn!=4||f==7||(f==8||0>=Gl?Er(3):Er(2)),Ol(this);var m=this.g.Z();this.X=m;t:if(_o(this)){var S=$g(this.g);l="";var V=S.length,U=Qn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){vi(this),Io(this);var K="";break t}this.h.i=new a.TextDecoder}for(f=0;f<V;f++)this.h.h=!0,l+=this.h.i.decode(S[f],{stream:!(U&&f==V-1)});S.length=0,this.h.g+=l,this.C=0,K=this.h.g}else K=this.g.oa();if(this.o=m==200,$a(this.i,this.u,this.A,this.l,this.R,Nn,m),this.o){if(this.T&&!this.K){t:{if(this.g){var Qe,Nt=this.g;if((Qe=Nt.g?Nt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Y(Qe)){var Ye=Qe;break t}}Ye=null}if(m=Ye)yo(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ga(this,m);else{this.o=!1,this.s=3,bn(12),vi(this),Io(this);break e}}if(this.P){m=!0;let Gr;for(;!this.J&&this.C<K.length;)if(Gr=cs(this,K),Gr==vo){Nn==4&&(this.s=4,bn(14),m=!1),yo(this.i,this.l,null,"[Incomplete Response]");break}else if(Gr==xg){this.s=4,bn(15),yo(this.i,this.l,K,"[Invalid Chunk]"),m=!1;break}else yo(this.i,this.l,Gr,null),Ga(this,Gr);if(_o(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Nn!=4||K.length!=0||this.h.h||(this.s=1,bn(16),m=!1),this.o=this.o&&m,!m)yo(this.i,this.l,K,"[Invalid Chunked Response]"),vi(this),Io(this);else if(0<K.length&&!this.W){this.W=!0;var kn=this.j;kn.g==this&&kn.ba&&!kn.M&&(kn.j.info("Great, no buffering proxy detected. Bytes received: "+K.length),zl(kn),kn.M=!0,bn(11))}}else yo(this.i,this.l,K,null),Ga(this,K);Nn==4&&vi(this),this.o&&!this.J&&(Nn==4?Rn(this.j,this):(this.o=!1,wo(this)))}else Hg(this.g),m==400&&0<K.indexOf("Unknown SID")?(this.s=3,bn(12)):(this.s=0,bn(13)),vi(this),Io(this)}}}catch{}finally{}};function _o(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function cs(l,f){var m=l.C,S=f.indexOf(`
`,m);return S==-1?vo:(m=Number(f.substring(m,S)),isNaN(m)?xg:(S+=1,S+m>f.length?vo:(f=f.slice(S,S+m),l.C=S+m,f)))}yi.prototype.cancel=function(){this.J=!0,vi(this)};function wo(l){l.S=Date.now()+l.I,Rg(l,l.I)}function Rg(l,f){if(l.B!=null)throw Error("WatchDog timer not null");l.B=go(y(l.ba,l),f)}function Ol(l){l.B&&(a.clearTimeout(l.B),l.B=null)}yi.prototype.ba=function(){this.B=null;let l=Date.now();0<=l-this.S?(mi(this.i,this.A),this.L!=2&&(Er(),bn(17)),vi(this),this.s=2,Io(this)):Rg(this,this.S-l)};function Io(l){l.j.G==0||l.J||Rn(l.j,l)}function vi(l){Ol(l);var f=l.M;f&&typeof f.ma=="function"&&f.ma(),l.M=null,xl(l.U),l.g&&(f=l.g,l.g=null,f.abort(),f.ma())}function Ga(l,f){try{var m=l.j;if(m.G!=0&&(m.g==l||yh(m.h,l))){if(!l.K&&yh(m.h,l)&&m.G==3){try{var S=m.Da.g.parse(f)}catch{S=null}if(Array.isArray(S)&&S.length==3){var V=S;if(V[0]==0){e:if(!m.u){if(m.g)if(m.g.F+3e3<l.F)us(m),Ao(m);else break e;ql(m),bn(18)}}else m.za=V[1],0<m.za-m.T&&37500>V[2]&&m.F&&m.v==0&&!m.C&&(m.C=go(y(m.Za,m),6e3));if(1>=mh(m.h)&&m.ca){try{m.ca()}catch{}m.ca=void 0}}else Ii(m,11)}else if((l.K||m.g==l)&&us(m),!Y(f))for(V=m.Da.g.parse(f),f=0;f<V.length;f++){let Ye=V[f];if(m.T=Ye[0],Ye=Ye[1],m.G==2)if(Ye[0]=="c"){m.K=Ye[1],m.ia=Ye[2];let kn=Ye[3];kn!=null&&(m.la=kn,m.j.info("VER="+m.la));let Nn=Ye[4];Nn!=null&&(m.Aa=Nn,m.j.info("SVER="+m.Aa));let Gl=Ye[5];Gl!=null&&typeof Gl=="number"&&0<Gl&&(S=1.5*Gl,m.L=S,m.j.info("backChannelRequestTimeoutMs_="+S)),S=m;let Gr=l.g;if(Gr){let qg=Gr.g?Gr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(qg){var U=S.h;U.g||qg.indexOf("spdy")==-1&&qg.indexOf("quic")==-1&&qg.indexOf("h2")==-1||(U.j=U.l,U.g=new Set,U.h&&(br(U,U.h),U.h=null))}if(S.D){let Tw=Gr.g?Gr.g.getResponseHeader("X-HTTP-Session-Id"):null;Tw&&(S.ya=Tw,ft(S.I,S.D,Tw))}}m.G=3,m.l&&m.l.ua(),m.ba&&(m.R=Date.now()-l.F,m.j.info("Handshake RTT: "+m.R+"ms")),S=m;var K=l;if(S.qa=u(S,S.J?S.ia:null,S.W),K.K){or(S.h,K);var Qe=K,Nt=S.L;Nt&&(Qe.I=Nt),Qe.B&&(Ol(Qe),wo(Qe)),S.g=K}else Sh(S);0<m.i.length&&Za(m)}else Ye[0]!="stop"&&Ye[0]!="close"||Ii(m,7);else m.G==3&&(Ye[0]=="stop"||Ye[0]=="close"?Ye[0]=="stop"?Ii(m,7):Bl(m):Ye[0]!="noop"&&m.l&&m.l.ta(Ye),m.v=0)}}Er(4)}catch{}}var fh=class{constructor(l,f){this.g=l,this.map=f}};function ph(l){this.l=l||10,a.PerformanceNavigationTiming?(l=a.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function gh(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function mh(l){return l.h?1:l.g?l.g.size:0}function yh(l,f){return l.h?l.h==f:l.g?l.g.has(f):!1}function br(l,f){l.g?l.g.add(f):l.h=f}function or(l,f){l.h&&l.h==f?l.h=null:l.g&&l.g.has(f)&&l.g.delete(f)}ph.prototype.cancel=function(){if(this.i=Eo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let l of this.g.values())l.cancel();this.g.clear()}};function Eo(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let f=l.i;for(let m of l.g.values())f=f.concat(m.D);return f}return P(l.i)}function Wa(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(c(l)){for(var f=[],m=l.length,S=0;S<m;S++)f.push(l[S]);return f}f=[],m=0;for(S in l)f[m++]=l[S];return f}function vh(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(c(l)||typeof l=="string"){var f=[];l=l.length;for(var m=0;m<l;m++)f.push(m);return f}f=[],m=0;for(let S in l)f[m++]=S;return f}}}function lt(l,f){if(l.forEach&&typeof l.forEach=="function")l.forEach(f,void 0);else if(c(l)||typeof l=="string")Array.prototype.forEach.call(l,f,void 0);else for(var m=vh(l),S=Wa(l),V=S.length,U=0;U<V;U++)f.call(void 0,S[U],m&&m[U],l)}var Ka=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Qa(l,f){if(l){l=l.split("&");for(var m=0;m<l.length;m++){var S=l[m].indexOf("="),V=null;if(0<=S){var U=l[m].substring(0,S);V=l[m].substring(S+1)}else U=l[m];f(U,V?decodeURIComponent(V.replace(/\+/g," ")):"")}}}function ar(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof ar){this.h=l.h,Ya(this,l.j),this.o=l.o,this.g=l.g,Fl(this,l.s),this.l=l.l;var f=l.i,m=new Ja;m.i=f.i,f.g&&(m.g=new Map(f.g),m.h=f.h),kg(this,m),this.m=l.m}else l&&(f=String(l).match(Ka))?(this.h=!1,Ya(this,f[1]||"",!0),this.o=$r(f[2]||""),this.g=$r(f[3]||"",!0),Fl(this,f[4]),this.l=$r(f[5]||"",!0),kg(this,f[6]||"",!0),this.m=$r(f[7]||"")):(this.h=!1,this.i=new Ja(null,this.h))}ar.prototype.toString=function(){var l=[],f=this.j;f&&l.push(cr(f,_h,!0),":");var m=this.g;return(m||f=="file")&&(l.push("//"),(f=this.o)&&l.push(cr(f,_h,!0),"@"),l.push(encodeURIComponent(String(m)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m=this.s,m!=null&&l.push(":",String(m))),(m=this.l)&&(this.g&&m.charAt(0)!="/"&&l.push("/"),l.push(cr(m,m.charAt(0)=="/"?Pg:Mg,!0))),(m=this.i.toString())&&l.push("?",m),(m=this.m)&&l.push("#",cr(m,bo)),l.join("")};function Br(l){return new ar(l)}function Ya(l,f,m){l.j=m?$r(f,!0):f,l.j&&(l.j=l.j.replace(/:$/,""))}function Fl(l,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);l.s=f}else l.s=null}function kg(l,f,m){f instanceof Ja?(l.i=f,Ll(l.i,l.h)):(m||(f=cr(f,Og)),l.i=new Ja(f,l.h))}function ft(l,f,m){l.i.set(f,m)}function Vl(l){return ft(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function $r(l,f){return l?f?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function cr(l,f,m){return typeof l=="string"?(l=encodeURI(l).replace(f,Ng),m&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function Ng(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var _h=/[#\/\?@]/g,Mg=/[#\?:]/g,Pg=/[#\?]/g,Og=/[#\?@]/g,bo=/#/g;function Ja(l,f){this.h=this.g=null,this.i=l||null,this.j=!!f}function _i(l){l.g||(l.g=new Map,l.h=0,l.i&&Qa(l.i,function(f,m){l.add(decodeURIComponent(f.replace(/\+/g," ")),m)}))}n=Ja.prototype,n.add=function(l,f){_i(this),this.i=null,l=qr(this,l);var m=this.g.get(l);return m||this.g.set(l,m=[]),m.push(f),this.h+=1,this};function Fg(l,f){_i(l),f=qr(l,f),l.g.has(f)&&(l.i=null,l.h-=l.g.get(f).length,l.g.delete(f))}function Hr(l,f){return _i(l),f=qr(l,f),l.g.has(f)}n.forEach=function(l,f){_i(this),this.g.forEach(function(m,S){m.forEach(function(V){l.call(f,V,S,this)},this)},this)},n.na=function(){_i(this);let l=Array.from(this.g.values()),f=Array.from(this.g.keys()),m=[];for(let S=0;S<f.length;S++){let V=l[S];for(let U=0;U<V.length;U++)m.push(f[S])}return m},n.V=function(l){_i(this);let f=[];if(typeof l=="string")Hr(this,l)&&(f=f.concat(this.g.get(qr(this,l))));else{l=Array.from(this.g.values());for(let m=0;m<l.length;m++)f=f.concat(l[m])}return f},n.set=function(l,f){return _i(this),this.i=null,l=qr(this,l),Hr(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[f]),this.h+=1,this},n.get=function(l,f){return l?(l=this.V(l),0<l.length?String(l[0]):f):f};function Vg(l,f,m){Fg(l,f),0<m.length&&(l.i=null,l.g.set(qr(l,f),P(m)),l.h+=m.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let l=[],f=Array.from(this.g.keys());for(var m=0;m<f.length;m++){var S=f[m];let U=encodeURIComponent(String(S)),K=this.V(S);for(S=0;S<K.length;S++){var V=U;K[S]!==""&&(V+="="+encodeURIComponent(String(K[S]))),l.push(V)}}return this.i=l.join("&")};function qr(l,f){return f=String(f),l.j&&(f=f.toLowerCase()),f}function Ll(l,f){f&&!l.j&&(_i(l),l.i=null,l.g.forEach(function(m,S){var V=S.toLowerCase();S!=V&&(Fg(this,S),Vg(this,V,m))},l)),l.j=f}function Lg(l,f){let m=new mo;if(a.Image){let S=new Image;S.onload=E(Kn,m,"TestLoadImage: loaded",!0,f,S),S.onerror=E(Kn,m,"TestLoadImage: error",!1,f,S),S.onabort=E(Kn,m,"TestLoadImage: abort",!1,f,S),S.ontimeout=E(Kn,m,"TestLoadImage: timeout",!1,f,S),a.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=l}else f(!1)}function Xa(l,f){let m=new mo,S=new AbortController,V=setTimeout(()=>{S.abort(),Kn(m,"TestPingServer: timeout",!1,f)},1e4);fetch(l,{signal:S.signal}).then(U=>{clearTimeout(V),U.ok?Kn(m,"TestPingServer: ok",!0,f):Kn(m,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(V),Kn(m,"TestPingServer: error",!1,f)})}function Kn(l,f,m,S,V){try{V&&(V.onload=null,V.onerror=null,V.onabort=null,V.ontimeout=null),S(m)}catch{}}function Ug(){this.g=new Tg}function wh(l,f,m){let S=m||"";try{lt(l,function(V,U){let K=V;d(V)&&(K=ja(V)),f.push(S+U+"="+encodeURIComponent(K))})}catch(V){throw f.push(S+"type="+encodeURIComponent("_badmap")),V}}function ut(l){this.l=l.Ub||null,this.j=l.eb||!1}k(ut,uo),ut.prototype.g=function(){return new Ul(this.l,this.j)},ut.prototype.i=(function(l){return function(){return l}})({});function Ul(l,f){nn.call(this),this.D=l,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}k(Ul,nn),n=Ul.prototype,n.open=function(l,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=f,this.readyState=1,To(this)},n.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(f.body=l),(this.D||a).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Co(this)),this.readyState=0},n.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,To(this)),this.g&&(this.readyState=3,To(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;jg(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function jg(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}n.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var f=l.value?l.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!l.done}))&&(this.response=this.responseText+=f)}l.done?Co(this):To(this),this.readyState==3&&jg(this)}},n.Ra=function(l){this.g&&(this.response=this.responseText=l,Co(this))},n.Qa=function(l){this.g&&(this.response=l,Co(this))},n.ga=function(){this.g&&Co(this)};function Co(l){l.readyState=4,l.l=null,l.j=null,l.v=null,To(l)}n.setRequestHeader=function(l,f){this.u.append(l,f)},n.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let l=[],f=this.h.entries();for(var m=f.next();!m.done;)m=m.value,l.push(m[0]+": "+m[1]),m=f.next();return l.join(`\r
`)};function To(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(Ul.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function Ih(l){let f="";return ve(l,function(m,S){f+=S,f+=":",f+=m,f+=`\r
`}),f}function So(l,f,m){e:{for(S in m){var S=!1;break e}S=!0}S||(m=Ih(m),typeof l=="string"?m!=null&&encodeURIComponent(String(m)):ft(l,f,m))}function Je(l){nn.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}k(Je,nn);var Bg=/^https?$/i,Cw=["POST","PUT"];n=Je.prototype,n.Ha=function(l){this.J=l},n.ea=function(l,f,m,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);f=f?f.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():qa.g(),this.v=this.o?uh(this.o):uh(qa),this.g.onreadystatechange=y(this.Ea,this);try{this.B=!0,this.g.open(f,String(l),!0),this.B=!1}catch(U){Do(this,U);return}if(l=m||"",m=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var V in S)m.set(V,S[V]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(let U of S.keys())m.set(U,S.get(U));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(m.keys()).find(U=>U.toLowerCase()=="content-type"),V=a.FormData&&l instanceof a.FormData,!(0<=Array.prototype.indexOf.call(Cw,f,void 0))||S||V||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[U,K]of m)this.g.setRequestHeader(U,K);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{bh(this),this.u=!0,this.g.send(l),this.u=!1}catch(U){Do(this,U)}};function Do(l,f){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=f,l.m=5,Eh(l),ls(l)}function Eh(l){l.A||(l.A=!0,fn(l,"complete"),fn(l,"error"))}n.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,fn(this,"complete"),fn(this,"abort"),ls(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ls(this,!0)),Je.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?jl(this):this.bb())},n.bb=function(){jl(this)};function jl(l){if(l.h&&typeof o<"u"&&(!l.v[1]||Qn(l)!=4||l.Z()!=2)){if(l.u&&Qn(l)==4)Eg(l.Ea,0,l);else if(fn(l,"readystatechange"),Qn(l)==4){l.h=!1;try{let K=l.Z();e:switch(K){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var m;if(!(m=f)){var S;if(S=K===0){var V=String(l.D).match(Ka)[1]||null;!V&&a.self&&a.self.location&&(V=a.self.location.protocol.slice(0,-1)),S=!Bg.test(V?V.toLowerCase():"")}m=S}if(m)fn(l,"complete"),fn(l,"success");else{l.m=6;try{var U=2<Qn(l)?l.g.statusText:""}catch{U=""}l.l=U+" ["+l.Z()+"]",Eh(l)}}finally{ls(l)}}}}function ls(l,f){if(l.g){bh(l);let m=l.g,S=l.v[0]?()=>{}:null;l.g=null,l.v=null,f||fn(l,"ready");try{m.onreadystatechange=S}catch{}}}function bh(l){l.I&&(a.clearTimeout(l.I),l.I=null)}n.isActive=function(){return!!this.g};function Qn(l){return l.g?l.g.readyState:0}n.Z=function(){try{return 2<Qn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(l){if(this.g){var f=this.g.responseText;return l&&f.indexOf(l)==0&&(f=f.substring(l.length)),as(f)}};function $g(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function Hg(l){let f={};l=(l.g&&2<=Qn(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<l.length;S++){if(Y(l[S]))continue;var m=b(l[S]);let V=m[0];if(m=m[1],typeof m!="string")continue;m=m.trim();let U=f[V]||[];f[V]=U,U.push(m)}T(f,function(S){return S.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function zr(l,f,m){return m&&m.internalChannelParams&&m.internalChannelParams[l]||f}function Ch(l){this.Aa=0,this.i=[],this.j=new mo,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=zr("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=zr("baseRetryDelayMs",5e3,l),this.cb=zr("retryDelaySeedMs",1e4,l),this.Wa=zr("forwardChannelMaxRetries",2,l),this.wa=zr("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new ph(l&&l.concurrentRequestLimit),this.Da=new Ug,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Ch.prototype,n.la=8,n.G=1,n.connect=function(l,f,m,S){bn(0),this.W=l,this.H=f||{},m&&S!==void 0&&(this.H.OSID=m,this.H.OAID=S),this.F=this.X,this.I=u(this,null,this.W),Za(this)};function Bl(l){if($l(l),l.G==3){var f=l.U++,m=Br(l.I);if(ft(m,"SID",l.K),ft(m,"RID",f),ft(m,"TYPE","terminate"),xo(l,m),f=new yi(l,l.j,f),f.L=2,f.v=Vl(Br(m)),m=!1,a.navigator&&a.navigator.sendBeacon)try{m=a.navigator.sendBeacon(f.v.toString(),"")}catch{}!m&&a.Image&&(new Image().src=f.v,m=!0),m||(f.g=g(f.j,null),f.g.ea(f.v)),f.F=Date.now(),wo(f)}ds(l)}function Ao(l){l.g&&(zl(l),l.g.cancel(),l.g=null)}function $l(l){Ao(l),l.u&&(a.clearTimeout(l.u),l.u=null),us(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&a.clearTimeout(l.s),l.s=null)}function Za(l){if(!gh(l.h)&&!l.s){l.s=!0;var f=l.Ga;Fa||vg(),gi||(Fa(),gi=!0),oo.add(f,l),l.B=0}}function Hl(l,f){return mh(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=f.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=go(y(l.Ga,l,f),Ah(l,l.B)),l.B++,!0)}n.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;let V=new yi(this,this.j,l),U=this.o;if(this.S&&(U?(U=_(U),C(U,this.S)):U=this.S),this.m!==null||this.O||(V.H=U,U=null),this.P)e:{for(var f=0,m=0;m<this.i.length;m++){t:{var S=this.i[m];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(f+=S,4096<f){f=m;break e}if(f===4096||m===this.i.length-1){f=m+1;break e}}f=1e3}else f=1e3;f=wi(this,V,f),m=Br(this.I),ft(m,"RID",l),ft(m,"CVER",22),this.D&&ft(m,"X-HTTP-Session-Id",this.D),xo(this,m),U&&(this.O?f="headers="+encodeURIComponent(String(Ih(U)))+"&"+f:this.m&&So(m,this.m,U)),br(this.h,V),this.Ua&&ft(m,"TYPE","init"),this.P?(ft(m,"$req",f),ft(m,"SID","null"),V.T=!0,Ml(V,m,null)):Ml(V,m,f),this.G=2}}else this.G==3&&(l?Th(this,l):this.i.length==0||gh(this.h)||Th(this))};function Th(l,f){var m;f?m=f.l:m=l.U++;let S=Br(l.I);ft(S,"SID",l.K),ft(S,"RID",m),ft(S,"AID",l.T),xo(l,S),l.m&&l.o&&So(S,l.m,l.o),m=new yi(l,l.j,m,l.B+1),l.m===null&&(m.H=l.o),f&&(l.i=f.D.concat(l.i)),f=wi(l,m,1e3),m.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),br(l.h,m),Ml(m,S,f)}function xo(l,f){l.H&&ve(l.H,function(m,S){ft(f,S,m)}),l.l&&lt({},function(m,S){ft(f,S,m)})}function wi(l,f,m){m=Math.min(l.i.length,m);var S=l.l?y(l.l.Na,l.l,l):null;e:{var V=l.i;let U=-1;for(;;){let K=["count="+m];U==-1?0<m?(U=V[0].g,K.push("ofs="+U)):U=0:K.push("ofs="+U);let Qe=!0;for(let Nt=0;Nt<m;Nt++){let Ye=V[Nt].g,kn=V[Nt].map;if(Ye-=U,0>Ye)U=Math.max(0,V[Nt].g-100),Qe=!1;else try{wh(kn,K,"req"+Ye+"_")}catch{S&&S(kn)}}if(Qe){S=K.join("&");break e}}}return l=l.i.splice(0,m),f.D=l,S}function Sh(l){if(!l.g&&!l.u){l.Y=1;var f=l.Fa;Fa||vg(),gi||(Fa(),gi=!0),oo.add(f,l),l.v=0}}function ql(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=go(y(l.Fa,l),Ah(l,l.v)),l.v++,!0)}n.Fa=function(){if(this.u=null,Dh(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=go(y(this.ab,this),l)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,bn(10),Ao(this),Dh(this))};function zl(l){l.A!=null&&(a.clearTimeout(l.A),l.A=null)}function Dh(l){l.g=new yi(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var f=Br(l.qa);ft(f,"RID","rpc"),ft(f,"SID",l.K),ft(f,"AID",l.T),ft(f,"CI",l.F?"0":"1"),!l.F&&l.ja&&ft(f,"TO",l.ja),ft(f,"TYPE","xmlhttp"),xo(l,f),l.m&&l.o&&So(f,l.m,l.o),l.L&&(l.g.I=l.L);var m=l.g;l=l.ia,m.L=1,m.v=Vl(Br(f)),m.m=null,m.P=!0,Pl(m,l)}n.Za=function(){this.C!=null&&(this.C=null,Ao(this),ql(this),bn(19))};function us(l){l.C!=null&&(a.clearTimeout(l.C),l.C=null)}function Rn(l,f){var m=null;if(l.g==f){us(l),zl(l),l.g=null;var S=2}else if(yh(l.h,f))m=f.D,or(l.h,f),S=1;else return;if(l.G!=0){if(f.o)if(S==1){m=f.m?f.m.length:0,f=Date.now()-f.F;var V=l.B;S=kl(),fn(S,new Ba(S,m)),Za(l)}else Sh(l);else if(V=f.s,V==3||V==0&&0<f.X||!(S==1&&Hl(l,f)||S==2&&ql(l)))switch(m&&0<m.length&&(f=l.h,f.i=f.i.concat(m)),V){case 1:Ii(l,5);break;case 4:Ii(l,10);break;case 3:Ii(l,6);break;default:Ii(l,2)}}}function Ah(l,f){let m=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(m*=2),m*f}function Ii(l,f){if(l.j.info("Error code "+f),f==2){var m=y(l.fb,l),S=l.Xa;let V=!S;S=new ar(S||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Ya(S,"https"),Vl(S),V?Lg(S.toString(),m):Xa(S.toString(),m)}else bn(2);l.G=0,l.l&&l.l.sa(f),ds(l),$l(l)}n.fb=function(l){l?(this.j.info("Successfully pinged google.com"),bn(2)):(this.j.info("Failed to ping google.com"),bn(1))};function ds(l){if(l.G=0,l.ka=[],l.l){let f=Eo(l.h);(f.length!=0||l.i.length!=0)&&(M(l.ka,f),M(l.ka,l.i),l.h.i.length=0,P(l.i),l.i.length=0),l.l.ra()}}function u(l,f,m){var S=m instanceof ar?Br(m):new ar(m);if(S.g!="")f&&(S.g=f+"."+S.g),Fl(S,S.s);else{var V=a.location;S=V.protocol,f=f?f+"."+V.hostname:V.hostname,V=+V.port;var U=new ar(null);S&&Ya(U,S),f&&(U.g=f),V&&Fl(U,V),m&&(U.l=m),S=U}return m=l.D,f=l.ya,m&&f&&ft(S,m,f),ft(S,"VER",l.la),xo(l,S),S}function g(l,f,m){if(f&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=l.Ca&&!l.pa?new Je(new ut({eb:m})):new Je(l.pa),f.Ha(l.J),f}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function v(){}n=v.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function D(){}D.prototype.g=function(l,f){return new O(l,f)};function O(l,f){nn.call(this),this.g=new Ch(f),this.l=l,this.h=f&&f.messageUrlParams||null,l=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(l?l["X-WebChannel-Content-Type"]=f.messageContentType:l={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(l?l["X-WebChannel-Client-Profile"]=f.va:l={"X-WebChannel-Client-Profile":f.va}),this.g.S=l,(l=f&&f.Sb)&&!Y(l)&&(this.g.m=l),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!Y(f)&&(this.g.D=f,l=this.h,l!==null&&f in l&&(l=this.h,f in l&&delete l[f])),this.j=new we(this)}k(O,nn),O.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},O.prototype.close=function(){Bl(this.g)},O.prototype.o=function(l){var f=this.g;if(typeof l=="string"){var m={};m.__data__=l,l=m}else this.u&&(m={},m.__data__=ja(l),l=m);f.i.push(new fh(f.Ya++,l)),f.G==3&&Za(f)},O.prototype.N=function(){this.g.l=null,delete this.j,Bl(this.g),delete this.g,O.aa.N.call(this)};function L(l){rn.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var f=l.__sm__;if(f){e:{for(let m in f){l=m;break e}l=void 0}(this.i=l)&&(l=this.i,f=f!==null&&l in f?f[l]:void 0),this.data=f}else this.data=l}k(L,rn);function J(){Rl.call(this),this.status=1}k(J,Rl);function we(l){this.g=l}k(we,v),we.prototype.ua=function(){fn(this.g,"a")},we.prototype.ta=function(l){fn(this.g,new L(l))},we.prototype.sa=function(l){fn(this.g,new J)},we.prototype.ra=function(){fn(this.g,"b")},D.prototype.createWebChannel=D.prototype.g,O.prototype.send=O.prototype.o,O.prototype.open=O.prototype.m,O.prototype.close=O.prototype.close,aA=Qs.createWebChannelTransport=function(){return new D},oA=Qs.getStatEventTarget=function(){return kl()},sA=Qs.Event=sr,t0=Qs.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ha.NO_ERROR=0,Ha.TIMEOUT=8,Ha.HTTP_ERROR=6,qp=Qs.ErrorCode=Ha,Nl.COMPLETE="complete",iA=Qs.EventType=Nl,ho.EventType=fo,fo.OPEN="a",fo.CLOSE="b",fo.ERROR="c",fo.MESSAGE="d",nn.prototype.listen=nn.prototype.K,Sd=Qs.WebChannel=ho,xY=Qs.FetchXmlHttpFactory=ut,Je.prototype.listenOnce=Je.prototype.L,Je.prototype.getLastError=Je.prototype.Ka,Je.prototype.getLastErrorCode=Je.prototype.Ba,Je.prototype.getStatus=Je.prototype.Z,Je.prototype.getResponseJson=Je.prototype.Oa,Je.prototype.getResponseText=Je.prototype.oa,Je.prototype.send=Je.prototype.ea,Je.prototype.setWithCredentials=Je.prototype.Ha,rA=Qs.XhrIo=Je}).apply(typeof e0<"u"?e0:typeof self<"u"?self:typeof window<"u"?window:{});var ML="@firebase/firestore",PL="4.8.0";var In=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};In.UNAUTHENTICATED=new In(null),In.GOOGLE_CREDENTIALS=new In("google-credentials-uid"),In.FIRST_PARTY=new In("first-party-uid"),In.MOCK_USER=new In("mock-user");var Gd="11.10.0";var dl=new ji("@firebase/firestore");function Dd(){return dl.logLevel}function re(n,...e){if(dl.logLevel<=Be.DEBUG){let t=e.map(Xx);dl.debug(`Firestore (${Gd}): ${n}`,...t)}}function Js(n,...e){if(dl.logLevel<=Be.ERROR){let t=e.map(Xx);dl.error(`Firestore (${Gd}): ${n}`,...t)}}function Ta(n,...e){if(dl.logLevel<=Be.WARN){let t=e.map(Xx);dl.warn(`Firestore (${Gd}): ${n}`,...t)}}function Xx(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function ye(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,SU(n,r,t)}function SU(n,e,t){let r=`FIRESTORE (${Gd}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Js(r),new Error(r)}function ct(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||SU(e,i,r)}function Se(n,e){return n}var q={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},te=class extends yr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Ki=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var c0=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},hA=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(In.UNAUTHENTICATED))}shutdown(){}},fA=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},pA=class{constructor(e){this.t=e,this.currentUser=In.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ct(this.o===void 0,42304);let r=this.i,i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve(),s=new Ki;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Ki,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let c=s;e.enqueueRetryable(async()=>{await c.promise,await i(this.currentUser)})},a=c=>{re("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(re("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Ki)}},0),o()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(re("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ct(typeof r.accessToken=="string",31837,{l:r}),new c0(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return ct(e===null||typeof e=="string",2055,{h:e}),new In(e)}},gA=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=In.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},mA=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new gA(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(In.FIRST_PARTY))}shutdown(){}invalidateToken(){}},l0=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},yA=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Nr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){ct(this.o===void 0,3512);let r=s=>{s.error!=null&&re("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.m;return this.m=s.token,re("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{re("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.V.getImmediate({optional:!0});s?i(s):re("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new l0(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(ct(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new l0(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function RY(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}function DU(){return new TextEncoder}var Yp=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=RY(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%62))}return r}};function Ve(n,e){return n<e?-1:n>e?1:0}function vA(n,e){let t=0;for(;t<n.length&&t<e.length;){let r=n.codePointAt(t),i=e.codePointAt(t);if(r!==i){if(r<128&&i<128)return Ve(r,i);{let s=DU(),o=kY(s.encode(OL(n,t)),s.encode(OL(e,t)));return o!==0?o:Ve(r,i)}}t+=r>65535?2:1}return Ve(n.length,e.length)}function OL(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function kY(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return Ve(n[t],e[t]);return Ve(n.length,e.length)}function Pd(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var FL="__name__",u0=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&ye(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&ye(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let s=n.compareSegments(e.get(i),t.get(i));if(s!==0)return s}return Ve(e.length,t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):vA(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ks.fromString(e.substring(4,e.length-2))}},Ct=class n extends u0{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new te(q.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},NY=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Ir=class n extends u0{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return NY.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===FL}static keyField(){return new n([FL])}static fromServerFormat(e){let t=[],r="",i=0,s=()=>{if(r.length===0)throw new te(q.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},o=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new te(q.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new te(q.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new te(q.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var fe=class n{constructor(e){this.path=e}static fromPath(e){return new n(Ct.fromString(e))}static fromName(e){return new n(Ct.fromString(e).popFirst(5))}static empty(){return new n(Ct.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ct.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ct.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new Ct(e.slice()))}};function AU(n,e,t){if(!t)throw new te(q.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function MY(n,e,t,r){if(e===!0&&r===!0)throw new te(q.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function VL(n){if(!fe.isDocumentKey(n))throw new te(q.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function LL(n){if(fe.isDocumentKey(n))throw new te(q.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function xU(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function H0(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":ye(12329,{type:typeof n})}function Qi(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new te(q.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=H0(n);throw new te(q.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Jt(n,e){let t={typeString:n};return e&&(t.value=e),t}function cg(n,e){if(!xU(n))throw new te(q.INVALID_ARGUMENT,"JSON must be an object");let t;for(let r in e)if(e[r]){let i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}let o=n[r];if(i&&typeof o!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&o!==s.value){t=`Expected '${r}' field to equal '${s.value}'`;break}}if(t)throw new te(q.INVALID_ARGUMENT,t);return!0}var UL=-62135596800,jL=1e6,Xt=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*jL);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new te(q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new te(q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<UL)throw new te(q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new te(q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/jL}_compareTo(e){return this.seconds===e.seconds?Ve(this.nanoseconds,e.nanoseconds):Ve(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:n._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(cg(e,n._jsonSchema))return new n(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-UL;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};Xt._jsonSchemaVersion="firestore/timestamp/1.0",Xt._jsonSchema={type:Jt("string",Xt._jsonSchemaVersion),seconds:Jt("number"),nanoseconds:Jt("number")};var ke=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new Xt(0,0))}static max(){return new n(new Xt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Jp=-1,_A=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};_A.UNKNOWN_ID=-1;function PY(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=ke.fromTimestamp(r===1e9?new Xt(t+1,0):new Xt(t,r));return new hl(i,fe.empty(),e)}function OY(n){return new hl(n.readTime,n.key,Jp)}var hl=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(ke.min(),fe.empty(),Jp)}static max(){return new n(ke.max(),fe.empty(),Jp)}};function FY(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=fe.comparator(n.documentKey,e.documentKey),t!==0?t:Ve(n.largestBatchId,e.largestBatchId))}var VY="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",wA=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};async function Wd(n){if(n.code!==q.FAILED_PRECONDITION||n.message!==VY)throw n;re("LocalStore","Unexpectedly lost primary lease")}var W=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ye(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&t()},c=>r(c))}),o=!0,s===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let s=e.length,o=new Array(s),a=0;for(let c=0;c<s;c++){let d=c;t(e[d]).next(h=>{o[d]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,t){return new n((r,i)=>{let s=()=>{e()===!0?t().next(()=>{s()},i):r()};s()})}};function LY(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Kd(n){return n.name==="IndexedDbTransactionError"}var Zx=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this._e(i),this.ae=i=>r.writeSequenceNumber(i))}_e(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.ae&&this.ae(t),t}}n.ue=-1;return n})(),e1=-1;function q0(n){return n==null}function Xp(n){return n===0&&1/n==-1/0}function UY(n){return typeof n=="number"&&Number.isInteger(n)&&!Xp(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var RU="";function jY(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=BL(e)),e=BY(n.get(t),e);return BL(e)}function BY(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let s=n.charAt(i);switch(s){case"\0":t+="";break;case RU:t+="";break;default:t+=s}}return t}function BL(n){return n+RU+""}var $Y="remoteDocuments",kU="owner";var NU="mutationQueues";var MU="mutations";var PU="documentMutations",HY="remoteDocumentsV14";var OU="remoteDocumentGlobal";var FU="targets";var VU="targetDocuments";var LU="targetGlobal",UU="collectionParents";var jU="clientMetadata";var BU="bundles";var $U="namedQueries";var qY="indexConfiguration";var zY="indexState";var GY="indexEntries";var HU="documentOverlays";var WY="globals";var KY=[NU,MU,PU,$Y,FU,kU,LU,VU,jU,OU,UU,BU,$U],B0e=[...KY,HU],QY=[NU,MU,PU,HY,FU,kU,LU,VU,jU,OU,UU,BU,$U,HU],YY=QY,JY=[...YY,qY,zY,GY];var $0e=[...JY,WY];function $L(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function ka(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function qU(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var kt=class n{constructor(e,t){this.comparator=e,this.root=t||Yi.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Yi.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Yi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new kd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new kd(this.root,e,this.comparator,!1)}getReverseIterator(){return new kd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new kd(this.root,e,this.comparator,!0)}},kd=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Yi=class n{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=s??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new n(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ye(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ye(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw ye(27949);return e+(this.isRed()?0:1)}};Yi.EMPTY=null,Yi.RED=!0,Yi.BLACK=!1;Yi.EMPTY=new class{constructor(){this.size=0}get key(){throw ye(57766)}get value(){throw ye(16141)}get color(){throw ye(16727)}get left(){throw ye(29726)}get right(){throw ye(36894)}copy(e,t,r,i,s){return this}insert(e,t,r){return new Yi(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var En=class n{constructor(e){this.comparator=e,this.data=new kt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new d0(this.data.getIterator())}getIteratorFrom(e){return new d0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},d0=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Fr=class n{constructor(e){this.fields=e,e.sort(Ir.comparator)}static empty(){return new n([])}unionWith(e){let t=new En(Ir.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Pd(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var h0=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var jn=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=(function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new h0("Invalid base64 string: "+s):s}})(e);return new n(t)}static fromUint8Array(e){let t=(function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s})(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ve(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};jn.EMPTY_BYTE_STRING=new jn("");var XY=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Xs(n){if(ct(!!n,39018),typeof n=="string"){let e=0,t=XY.exec(n);if(ct(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:bt(n.seconds),nanos:bt(n.nanos)}}function bt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Zs(n){return typeof n=="string"?jn.fromBase64String(n):jn.fromUint8Array(n)}var zU="server_timestamp",GU="__type__",WU="__previous_value__",KU="__local_write_time__";function t1(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[GU])===null||t===void 0?void 0:t.stringValue)===zU}function z0(n){let e=n.mapValue.fields[WU];return t1(e)?z0(e):e}function Zp(n){let e=Xs(n.mapValue.fields[KU].timestampValue);return new Xt(e.seconds,e.nanos)}var IA=class{constructor(e,t,r,i,s,o,a,c,d,h){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=d,this.isUsingEmulator=h}},f0="(default)",p0=class n{constructor(e,t){this.projectId=e,this.database=t||f0}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===f0}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var n1="__type__",QU="__max__",n0={mapValue:{fields:{__type__:{stringValue:QU}}}},r1="__vector__",Od="value";function Sa(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?t1(n)?4:JU(n)?9007199254740991:YU(n)?10:11:ye(28295,{value:n})}function Zi(n,e){if(n===e)return!0;let t=Sa(n);if(t!==Sa(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Zp(n).isEqual(Zp(e));case 3:return(function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=Xs(i.timestampValue),a=Xs(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(i,s){return Zs(i.bytesValue).isEqual(Zs(s.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(i,s){return bt(i.geoPointValue.latitude)===bt(s.geoPointValue.latitude)&&bt(i.geoPointValue.longitude)===bt(s.geoPointValue.longitude)})(n,e);case 2:return(function(i,s){if("integerValue"in i&&"integerValue"in s)return bt(i.integerValue)===bt(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=bt(i.doubleValue),a=bt(s.doubleValue);return o===a?Xp(o)===Xp(a):isNaN(o)&&isNaN(a)}return!1})(n,e);case 9:return Pd(n.arrayValue.values||[],e.arrayValue.values||[],Zi);case 10:case 11:return(function(i,s){let o=i.mapValue.fields||{},a=s.mapValue.fields||{};if($L(o)!==$L(a))return!1;for(let c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!Zi(o[c],a[c])))return!1;return!0})(n,e);default:return ye(52216,{left:n})}}function eg(n,e){return(n.values||[]).find(t=>Zi(t,e))!==void 0}function Fd(n,e){if(n===e)return 0;let t=Sa(n),r=Sa(e);if(t!==r)return Ve(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ve(n.booleanValue,e.booleanValue);case 2:return(function(s,o){let a=bt(s.integerValue||s.doubleValue),c=bt(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1})(n,e);case 3:return HL(n.timestampValue,e.timestampValue);case 4:return HL(Zp(n),Zp(e));case 5:return vA(n.stringValue,e.stringValue);case 6:return(function(s,o){let a=Zs(s),c=Zs(o);return a.compareTo(c)})(n.bytesValue,e.bytesValue);case 7:return(function(s,o){let a=s.split("/"),c=o.split("/");for(let d=0;d<a.length&&d<c.length;d++){let h=Ve(a[d],c[d]);if(h!==0)return h}return Ve(a.length,c.length)})(n.referenceValue,e.referenceValue);case 8:return(function(s,o){let a=Ve(bt(s.latitude),bt(o.latitude));return a!==0?a:Ve(bt(s.longitude),bt(o.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return qL(n.arrayValue,e.arrayValue);case 10:return(function(s,o){var a,c,d,h;let p=s.fields||{},y=o.fields||{},E=(a=p[Od])===null||a===void 0?void 0:a.arrayValue,k=(c=y[Od])===null||c===void 0?void 0:c.arrayValue,P=Ve(((d=E?.values)===null||d===void 0?void 0:d.length)||0,((h=k?.values)===null||h===void 0?void 0:h.length)||0);return P!==0?P:qL(E,k)})(n.mapValue,e.mapValue);case 11:return(function(s,o){if(s===n0.mapValue&&o===n0.mapValue)return 0;if(s===n0.mapValue)return 1;if(o===n0.mapValue)return-1;let a=s.fields||{},c=Object.keys(a),d=o.fields||{},h=Object.keys(d);c.sort(),h.sort();for(let p=0;p<c.length&&p<h.length;++p){let y=vA(c[p],h[p]);if(y!==0)return y;let E=Fd(a[c[p]],d[h[p]]);if(E!==0)return E}return Ve(c.length,h.length)})(n.mapValue,e.mapValue);default:throw ye(23264,{le:t})}}function HL(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Ve(n,e);let t=Xs(n),r=Xs(e),i=Ve(t.seconds,r.seconds);return i!==0?i:Ve(t.nanos,r.nanos)}function qL(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let s=Fd(t[i],r[i]);if(s)return s}return Ve(t.length,r.length)}function Vd(n){return EA(n)}function EA(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){let r=Xs(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Zs(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return fe.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",i=!0;for(let s of t.values||[])i?i=!1:r+=",",r+=EA(s);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){let r=Object.keys(t.fields||{}).sort(),i="{",s=!0;for(let o of r)s?s=!1:i+=",",i+=`${o}:${EA(t.fields[o])}`;return i+"}"})(n.mapValue):ye(61005,{value:n})}function s0(n){switch(Sa(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=z0(n);return e?16+s0(e):16;case 5:return 2*n.stringValue.length;case 6:return Zs(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce((i,s)=>i+s0(s),0)})(n.arrayValue);case 10:case 11:return(function(r){let i=0;return ka(r.fields,(s,o)=>{i+=s.length+s0(o)}),i})(n.mapValue);default:throw ye(13486,{value:n})}}function zL(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function bA(n){return!!n&&"integerValue"in n}function i1(n){return!!n&&"arrayValue"in n}function GL(n){return!!n&&"nullValue"in n}function WL(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function o0(n){return!!n&&"mapValue"in n}function YU(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[n1])===null||t===void 0?void 0:t.stringValue)===r1}function Gp(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return ka(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Gp(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Gp(n.arrayValue.values[t]);return e}return Object.assign({},n)}function JU(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===QU}var q0e={mapValue:{fields:{[n1]:{stringValue:r1},[Od]:{arrayValue:{}}}}};var wr=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!o0(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Gp(t)}setAll(e){let t=Ir.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){let c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=a.popLast()}o?r[a.lastSegment()]=Gp(o):i.push(a.lastSegment())});let s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){let t=this.field(e.popLast());o0(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Zi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];o0(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){ka(t,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new n(Gp(this.value))}};function XU(n){let e=[];return ka(n.fields,(t,r)=>{let i=new Ir([t]);if(o0(r)){let s=XU(r.mapValue).fields;if(s.length===0)e.push(i);else for(let o of s)e.push(i.child(o))}else e.push(i)}),new Fr(e)}var hi=class n{constructor(e,t,r,i,s,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new n(e,0,ke.min(),ke.min(),ke.min(),wr.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,ke.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,ke.min(),ke.min(),wr.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,ke.min(),ke.min(),wr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ke.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=wr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=wr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ke.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Ld=class{constructor(e,t){this.position=e,this.inclusive=t}};function KL(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let s=e[i],o=n.position[i];if(s.field.isKeyField()?r=fe.comparator(fe.fromName(o.referenceValue),t.key):r=Fd(o,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function QL(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Zi(n.position[t],e.position[t]))return!1;return!0}var fl=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function ZY(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var g0=class{},Yt=class n extends g0{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new TA(e,t,r):t==="array-contains"?new AA(e,r):t==="in"?new xA(e,r):t==="not-in"?new RA(e,r):t==="array-contains-any"?new kA(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new SA(e,r):new DA(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Fd(t,this.value)):t!==null&&Sa(this.value)===Sa(t)&&this.matchesComparison(Fd(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ye(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},fi=class n extends g0{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new n(e,t)}matches(e){return ZU(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}};function ZU(n){return n.op==="and"}function ej(n){return eJ(n)&&ZU(n)}function eJ(n){for(let e of n.filters)if(e instanceof fi)return!1;return!0}function CA(n){if(n instanceof Yt)return n.field.canonicalString()+n.op.toString()+Vd(n.value);if(ej(n))return n.filters.map(e=>CA(e)).join(",");{let e=n.filters.map(t=>CA(t)).join(",");return`${n.op}(${e})`}}function tj(n,e){return n instanceof Yt?(function(r,i){return i instanceof Yt&&r.op===i.op&&r.field.isEqual(i.field)&&Zi(r.value,i.value)})(n,e):n instanceof fi?(function(r,i){return i instanceof fi&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&tj(o,i.filters[a]),!0):!1})(n,e):void ye(19439)}function nj(n){return n instanceof Yt?(function(t){return`${t.field.canonicalString()} ${t.op} ${Vd(t.value)}`})(n):n instanceof fi?(function(t){return t.op.toString()+" {"+t.getFilters().map(nj).join(" ,")+"}"})(n):"Filter"}var TA=class extends Yt{constructor(e,t,r){super(e,t,r),this.key=fe.fromName(r.referenceValue)}matches(e){let t=fe.comparator(e.key,this.key);return this.matchesComparison(t)}},SA=class extends Yt{constructor(e,t){super(e,"in",t),this.keys=rj("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},DA=class extends Yt{constructor(e,t){super(e,"not-in",t),this.keys=rj("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function rj(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>fe.fromName(r.referenceValue))}var AA=class extends Yt{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return i1(t)&&eg(t.arrayValue,this.value)}},xA=class extends Yt{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&eg(this.value.arrayValue,t)}},RA=class extends Yt{constructor(e,t){super(e,"not-in",t)}matches(e){if(eg(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!eg(this.value.arrayValue,t)}},kA=class extends Yt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!i1(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>eg(this.value.arrayValue,r))}};var NA=class{constructor(e,t=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.Pe=null}};function YL(n,e=null,t=[],r=[],i=null,s=null,o=null){return new NA(n,e,t,r,i,s,o)}function s1(n){let e=Se(n);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>CA(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>(function(s){return s.field.canonicalString()+s.dir})(r)).join(","),q0(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Vd(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Vd(r)).join(",")),e.Pe=t}return e.Pe}function o1(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!ZY(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!tj(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!QL(n.startAt,e.startAt)&&QL(n.endAt,e.endAt)}function MA(n){return fe.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var Da=class{constructor(e,t=null,r=[],i=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}};function tJ(n,e,t,r,i,s,o,a){return new Da(n,e,t,r,i,s,o,a)}function a1(n){return new Da(n)}function JL(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function ij(n){return n.collectionGroup!==null}function Wp(n){let e=Se(n);if(e.Te===null){e.Te=[];let t=new Set;for(let s of e.explicitOrderBy)e.Te.push(s),t.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new En(Ir.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(d=>{d.isInequality()&&(a=a.add(d.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.Te.push(new fl(s,r))}),t.has(Ir.keyField().canonicalString())||e.Te.push(new fl(Ir.keyField(),r))}return e.Te}function Ji(n){let e=Se(n);return e.Ie||(e.Ie=nJ(e,Wp(n))),e.Ie}function nJ(n,e){if(n.limitType==="F")return YL(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new fl(i.field,s)});let t=n.endAt?new Ld(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Ld(n.startAt.position,n.startAt.inclusive):null;return YL(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function PA(n,e){let t=n.filters.concat([e]);return new Da(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function OA(n,e,t){return new Da(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function G0(n,e){return o1(Ji(n),Ji(e))&&n.limitType===e.limitType}function sj(n){return`${s1(Ji(n))}|lt:${n.limitType}`}function Ad(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>nj(i)).join(", ")}]`),q0(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>(function(o){return`${o.field.canonicalString()} (${o.dir})`})(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Vd(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Vd(i)).join(",")),`Target(${r})`})(Ji(n))}; limitType=${n.limitType})`}function W0(n,e){return e.isFoundDocument()&&(function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):fe.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)})(n,e)&&(function(r,i){for(let s of Wp(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0})(n,e)&&(function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0})(n,e)&&(function(r,i){return!(r.startAt&&!(function(o,a,c){let d=KL(o,a,c);return o.inclusive?d<=0:d<0})(r.startAt,Wp(r),i)||r.endAt&&!(function(o,a,c){let d=KL(o,a,c);return o.inclusive?d>=0:d>0})(r.endAt,Wp(r),i))})(n,e)}function rJ(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function oj(n){return(e,t)=>{let r=!1;for(let i of Wp(n)){let s=iJ(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function iJ(n,e,t){let r=n.field.isKeyField()?fe.comparator(e.key,t.key):(function(s,o,a){let c=o.data.field(s),d=a.data.field(s);return c!==null&&d!==null?Fd(c,d):ye(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ye(19790,{direction:n.dir})}}var eo=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ka(this.inner,(t,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return qU(this.inner)}size(){return this.innerSize}};var sJ=new kt(fe.comparator);function to(){return sJ}var aj=new kt(fe.comparator);function zp(...n){let e=aj;for(let t of n)e=e.insert(t.key,t);return e}function cj(n){let e=aj;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function ol(){return Kp()}function lj(){return Kp()}function Kp(){return new eo(n=>n.toString(),(n,e)=>n.isEqual(e))}var oJ=new kt(fe.comparator),aJ=new En(fe.comparator);function qe(...n){let e=aJ;for(let t of n)e=e.add(t);return e}var cJ=new En(Ve);function lJ(){return cJ}function c1(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Xp(e)?"-0":e}}function uj(n){return{integerValue:""+n}}function uJ(n,e){return UY(e)?uj(e):c1(n,e)}var Ud=class{constructor(){this._=void 0}};function dJ(n,e,t){return n instanceof pl?(function(i,s){let o={fields:{[GU]:{stringValue:zU},[KU]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&t1(s)&&(s=z0(s)),s&&(o.fields[WU]=s),{mapValue:o}})(t,e):n instanceof gl?hj(n,e):n instanceof ml?fj(n,e):(function(i,s){let o=dj(i,s),a=XL(o)+XL(i.Ee);return bA(o)&&bA(i.Ee)?uj(a):c1(i.serializer,a)})(n,e)}function hJ(n,e,t){return n instanceof gl?hj(n,e):n instanceof ml?fj(n,e):t}function dj(n,e){return n instanceof jd?(function(r){return bA(r)||(function(s){return!!s&&"doubleValue"in s})(r)})(e)?e:{integerValue:0}:null}var pl=class extends Ud{},gl=class extends Ud{constructor(e){super(),this.elements=e}};function hj(n,e){let t=pj(e);for(let r of n.elements)t.some(i=>Zi(i,r))||t.push(r);return{arrayValue:{values:t}}}var ml=class extends Ud{constructor(e){super(),this.elements=e}};function fj(n,e){let t=pj(e);for(let r of n.elements)t=t.filter(i=>!Zi(i,r));return{arrayValue:{values:t}}}var jd=class extends Ud{constructor(e,t){super(),this.serializer=e,this.Ee=t}};function XL(n){return bt(n.integerValue||n.doubleValue)}function pj(n){return i1(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}var FA=class{constructor(e,t){this.field=e,this.transform=t}};function fJ(n,e){return n.field.isEqual(e.field)&&(function(r,i){return r instanceof gl&&i instanceof gl||r instanceof ml&&i instanceof ml?Pd(r.elements,i.elements,Zi):r instanceof jd&&i instanceof jd?Zi(r.Ee,i.Ee):r instanceof pl&&i instanceof pl})(n.transform,e.transform)}var VA=class{constructor(e,t){this.version=e,this.transformResults=t}},Ys=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function a0(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var Bd=class{};function gj(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new tg(n.key,Ys.none()):new yl(n.key,n.data,Ys.none());{let t=n.data,r=wr.empty(),i=new En(Ir.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new es(n.key,r,new Fr(i.toArray()),Ys.none())}}function pJ(n,e,t){n instanceof yl?(function(i,s,o){let a=i.value.clone(),c=eU(i.fieldTransforms,s,o.transformResults);a.setAll(c),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()})(n,e,t):n instanceof es?(function(i,s,o){if(!a0(i.precondition,s))return void s.convertToUnknownDocument(o.version);let a=eU(i.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(mj(i)),c.setAll(a),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()})(n,e,t):(function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()})(0,e,t)}function Qp(n,e,t,r){return n instanceof yl?(function(s,o,a,c){if(!a0(s.precondition,o))return a;let d=s.value.clone(),h=tU(s.fieldTransforms,c,o);return d.setAll(h),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null})(n,e,t,r):n instanceof es?(function(s,o,a,c){if(!a0(s.precondition,o))return a;let d=tU(s.fieldTransforms,c,o),h=o.data;return h.setAll(mj(s)),h.setAll(d),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(p=>p.field))})(n,e,t,r):(function(s,o,a){return a0(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a})(n,e,t)}function gJ(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),s=dj(r.transform,i||null);s!=null&&(t===null&&(t=wr.empty()),t.set(r.field,s))}return t||null}function ZL(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Pd(r,i,(s,o)=>fJ(s,o))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var yl=class extends Bd{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},es=class extends Bd{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function mj(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function eU(n,e,t){let r=new Map;ct(n.length===t.length,32656,{Ae:t.length,Re:n.length});for(let i=0;i<t.length;i++){let s=n[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,hJ(o,a,t[i]))}return r}function tU(n,e,t){let r=new Map;for(let i of n){let s=i.transform,o=t.data.field(i.field);r.set(i.field,dJ(s,o,e))}return r}var tg=class extends Bd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},LA=class extends Bd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var UA=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&pJ(s,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=Qp(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=Qp(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=lj();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=t.has(i.key)?null:a;let c=gj(o,a);c!==null&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(ke.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),qe())}isEqual(e){return this.batchId===e.batchId&&Pd(this.mutations,e.mutations,(t,r)=>ZL(t,r))&&Pd(this.baseMutations,e.baseMutations,(t,r)=>ZL(t,r))}},jA=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){ct(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let i=(function(){return oJ})(),s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new n(e,t,r,i)}};var BA=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var $A=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var Kt,We;function mJ(n){switch(n){case q.OK:return ye(64938);case q.CANCELLED:case q.UNKNOWN:case q.DEADLINE_EXCEEDED:case q.RESOURCE_EXHAUSTED:case q.INTERNAL:case q.UNAVAILABLE:case q.UNAUTHENTICATED:return!1;case q.INVALID_ARGUMENT:case q.NOT_FOUND:case q.ALREADY_EXISTS:case q.PERMISSION_DENIED:case q.FAILED_PRECONDITION:case q.ABORTED:case q.OUT_OF_RANGE:case q.UNIMPLEMENTED:case q.DATA_LOSS:return!0;default:return ye(15467,{code:n})}}function yj(n){if(n===void 0)return Js("GRPC error has no .code"),q.UNKNOWN;switch(n){case Kt.OK:return q.OK;case Kt.CANCELLED:return q.CANCELLED;case Kt.UNKNOWN:return q.UNKNOWN;case Kt.DEADLINE_EXCEEDED:return q.DEADLINE_EXCEEDED;case Kt.RESOURCE_EXHAUSTED:return q.RESOURCE_EXHAUSTED;case Kt.INTERNAL:return q.INTERNAL;case Kt.UNAVAILABLE:return q.UNAVAILABLE;case Kt.UNAUTHENTICATED:return q.UNAUTHENTICATED;case Kt.INVALID_ARGUMENT:return q.INVALID_ARGUMENT;case Kt.NOT_FOUND:return q.NOT_FOUND;case Kt.ALREADY_EXISTS:return q.ALREADY_EXISTS;case Kt.PERMISSION_DENIED:return q.PERMISSION_DENIED;case Kt.FAILED_PRECONDITION:return q.FAILED_PRECONDITION;case Kt.ABORTED:return q.ABORTED;case Kt.OUT_OF_RANGE:return q.OUT_OF_RANGE;case Kt.UNIMPLEMENTED:return q.UNIMPLEMENTED;case Kt.DATA_LOSS:return q.DATA_LOSS;default:return ye(39323,{code:n})}}(We=Kt||(Kt={}))[We.OK=0]="OK",We[We.CANCELLED=1]="CANCELLED",We[We.UNKNOWN=2]="UNKNOWN",We[We.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",We[We.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",We[We.NOT_FOUND=5]="NOT_FOUND",We[We.ALREADY_EXISTS=6]="ALREADY_EXISTS",We[We.PERMISSION_DENIED=7]="PERMISSION_DENIED",We[We.UNAUTHENTICATED=16]="UNAUTHENTICATED",We[We.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",We[We.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",We[We.ABORTED=10]="ABORTED",We[We.OUT_OF_RANGE=11]="OUT_OF_RANGE",We[We.UNIMPLEMENTED=12]="UNIMPLEMENTED",We[We.INTERNAL=13]="INTERNAL",We[We.UNAVAILABLE=14]="UNAVAILABLE",We[We.DATA_LOSS=15]="DATA_LOSS";var nU=null;var yJ=new Ks([4294967295,4294967295],0);function rU(n){let e=DU().encode(n),t=new nA;return t.update(e),new Uint8Array(t.digest())}function iU(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Ks([t,r],0),new Ks([i,s],0)]}var HA=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new al(`Invalid padding: ${t}`);if(r<0)throw new al(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new al(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new al(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=Ks.fromNumber(this.fe)}pe(e,t,r){let i=e.add(t.multiply(Ks.fromNumber(r)));return i.compare(yJ)===1&&(i=new Ks([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;let t=rU(e),[r,i]=iU(t);for(let s=0;s<this.hashCount;s++){let o=this.pe(r,i,s);if(!this.ye(o))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new n(s,i,t);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.fe===0)return;let t=rU(e),[r,i]=iU(t);for(let s=0;s<this.hashCount;s++){let o=this.pe(r,i,s);this.we(o)}}we(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},al=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var m0=class n{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,ng.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(ke.min(),i,new kt(Ve),to(),qe())}},ng=class n{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,qe(),qe(),qe())}};var Nd=class{constructor(e,t,r,i){this.Se=e,this.removedTargetIds=t,this.key=r,this.be=i}},y0=class{constructor(e,t){this.targetId=e,this.De=t}},v0=class{constructor(e,t,r=jn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},_0=class{constructor(){this.ve=0,this.Ce=sU(),this.Fe=jn.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=qe(),t=qe(),r=qe();return this.Ce.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:ye(38017,{changeType:s})}}),new ng(this.Fe,this.Me,e,t,r)}ke(){this.xe=!1,this.Ce=sU()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,ct(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}},qA=class{constructor(e){this.We=e,this.Ge=new Map,this.ze=to(),this.je=r0(),this.Je=r0(),this.He=new kt(Ve)}Ye(e){for(let t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(let t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,t=>{let r=this.tt(t);switch(e.state){case 0:this.nt(t)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),r.Be(e.resumeToken));break;default:ye(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach((r,i)=>{this.nt(i)&&t(i)})}it(e){let t=e.targetId,r=e.De.count,i=this.st(t);if(i){let s=i.target;if(MA(s))if(r===0){let o=new fe(s.path);this.Xe(t,o,hi.newNoDocument(o,ke.min()))}else ct(r===1,20013,{expectedCount:r});else{let o=this.ot(t);if(o!==r){let a=this._t(e),c=a?this.ut(a,e,o):1;if(c!==0){this.rt(t);let d=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,d)}nU?.ct((function(h,p,y,E,k){var P,M,H,Y,ee,De;let et={localCacheCount:h,existenceFilterCount:p.count,databaseId:y.database,projectId:y.projectId},ve=p.unchangedNames;return ve&&(et.bloomFilter={applied:k===0,hashCount:(P=ve?.hashCount)!==null&&P!==void 0?P:0,bitmapLength:(Y=(H=(M=ve?.bits)===null||M===void 0?void 0:M.bitmap)===null||H===void 0?void 0:H.length)!==null&&Y!==void 0?Y:0,padding:(De=(ee=ve?.bits)===null||ee===void 0?void 0:ee.padding)!==null&&De!==void 0?De:0,mightContain:T=>{var _;return(_=E?.mightContain(T))!==null&&_!==void 0&&_}}),et})(o,e.De,this.We.lt(),a,c))}}}}_t(e){let t=e.De.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t,o,a;try{o=Zs(r).toUint8Array()}catch(c){if(c instanceof h0)return Ta("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new HA(o,i,s)}catch(c){return Ta(c instanceof al?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.fe===0?null:a}ut(e,t,r){return t.De.count===r-this.ht(e,t.targetId)?0:2}ht(e,t){let r=this.We.getRemoteKeysForTarget(t),i=0;return r.forEach(s=>{let o=this.We.lt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Xe(t,s,null),i++)}),i}Pt(e){let t=new Map;this.Ge.forEach((s,o)=>{let a=this.st(o);if(a){if(s.current&&MA(a.target)){let c=new fe(a.target.path);this.Tt(c).has(o)||this.It(o,c)||this.Xe(o,c,hi.newNoDocument(c,e))}s.Ne&&(t.set(o,s.Le()),s.ke())}});let r=qe();this.Je.forEach((s,o)=>{let a=!0;o.forEachWhile(c=>{let d=this.st(c);return!d||d.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ze.forEach((s,o)=>o.setReadTime(e));let i=new m0(e,t,this.He,this.ze,r);return this.ze=to(),this.je=r0(),this.Je=r0(),this.He=new kt(Ve),i}Ze(e,t){if(!this.nt(e))return;let r=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,r),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,r){if(!this.nt(e))return;let i=this.tt(e);this.It(e,t)?i.qe(t,1):i.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),r&&(this.ze=this.ze.insert(t,r))}removeTarget(e){this.Ge.delete(e)}ot(e){let t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new _0,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new En(Ve),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new En(Ve),this.je=this.je.insert(e,t)),t}nt(e){let t=this.st(e)!==null;return t||re("WatchChangeAggregator","Detected inactive target",e),t}st(e){let t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new _0),this.We.getRemoteKeysForTarget(e).forEach(t=>{this.Xe(e,t,null)})}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}};function r0(){return new kt(fe.comparator)}function sU(){return new kt(fe.comparator)}var vJ={asc:"ASCENDING",desc:"DESCENDING"},_J={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},wJ={and:"AND",or:"OR"},zA=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function GA(n,e){return n.useProto3Json||q0(e)?e:{value:e}}function w0(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function vj(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function IJ(n,e){return w0(n,e.toTimestamp())}function Xi(n){return ct(!!n,49232),ke.fromTimestamp((function(t){let r=Xs(t);return new Xt(r.seconds,r.nanos)})(n))}function l1(n,e){return WA(n,e).canonicalString()}function WA(n,e){let t=(function(i){return new Ct(["projects",i.projectId,"databases",i.database])})(n).child("documents");return e===void 0?t:t.child(e)}function _j(n){let e=Ct.fromString(n);return ct(Cj(e),10190,{key:e.toString()}),e}function KA(n,e){return l1(n.databaseId,e.path)}function cA(n,e){let t=_j(e);if(t.get(1)!==n.databaseId.projectId)throw new te(q.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new te(q.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new fe(Ij(t))}function wj(n,e){return l1(n.databaseId,e)}function EJ(n){let e=_j(n);return e.length===4?Ct.emptyPath():Ij(e)}function QA(n){return new Ct(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Ij(n){return ct(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function oU(n,e,t){return{name:KA(n,e),fields:t.value.mapValue.fields}}function bJ(n,e){let t;if("targetChange"in e){e.targetChange;let r=(function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:ye(39313,{state:d})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=(function(d,h){return d.useProto3Json?(ct(h===void 0||typeof h=="string",58123),jn.fromBase64String(h||"")):(ct(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),jn.fromUint8Array(h||new Uint8Array))})(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&(function(d){let h=d.code===void 0?q.UNKNOWN:yj(d.code);return new te(h,d.message||"")})(o);t=new v0(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=cA(n,r.document.name),s=Xi(r.document.updateTime),o=r.document.createTime?Xi(r.document.createTime):ke.min(),a=new wr({mapValue:{fields:r.document.fields}}),c=hi.newFoundDocument(i,s,o,a),d=r.targetIds||[],h=r.removedTargetIds||[];t=new Nd(d,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=cA(n,r.document),s=r.readTime?Xi(r.readTime):ke.min(),o=hi.newNoDocument(i,s),a=r.removedTargetIds||[];t=new Nd([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=cA(n,r.document),s=r.removedTargetIds||[];t=new Nd([],s,i,null)}else{if(!("filter"in e))return ye(11601,{At:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,o=new $A(i,s),a=r.targetId;t=new y0(a,o)}}return t}function CJ(n,e){let t;if(e instanceof yl)t={update:oU(n,e.key,e.value)};else if(e instanceof tg)t={delete:KA(n,e.key)};else if(e instanceof es)t={update:oU(n,e.key,e.data),updateMask:MJ(e.fieldMask)};else{if(!(e instanceof LA))return ye(16599,{Rt:e.type});t={verify:KA(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>(function(s,o){let a=o.transform;if(a instanceof pl)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof gl)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof ml)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof jd)return{fieldPath:o.field.canonicalString(),increment:a.Ee};throw ye(20930,{transform:o.transform})})(0,r))),e.precondition.isNone||(t.currentDocument=(function(i,s){return s.updateTime!==void 0?{updateTime:IJ(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:ye(27497)})(n,e.precondition)),t}function TJ(n,e){return n&&n.length>0?(ct(e!==void 0,14353),n.map(t=>(function(i,s){let o=i.updateTime?Xi(i.updateTime):Xi(s);return o.isEqual(ke.min())&&(o=Xi(s)),new VA(o,i.transformResults||[])})(t,e))):[]}function SJ(n,e){return{documents:[wj(n,e.path)]}}function DJ(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=wj(n,i);let s=(function(d){if(d.length!==0)return bj(fi.create(d,"and"))})(e.filters);s&&(t.structuredQuery.where=s);let o=(function(d){if(d.length!==0)return d.map(h=>(function(y){return{field:xd(y.field),direction:RJ(y.dir)}})(h))})(e.orderBy);o&&(t.structuredQuery.orderBy=o);let a=GA(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=(function(d){return{before:d.inclusive,values:d.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(d){return{before:!d.inclusive,values:d.position}})(e.endAt)),{Vt:t,parent:i}}function AJ(n){let e=EJ(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){ct(r===1,65062);let h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];t.where&&(s=(function(p){let y=Ej(p);return y instanceof fi&&ej(y)?y.getFilters():[y]})(t.where));let o=[];t.orderBy&&(o=(function(p){return p.map(y=>(function(k){return new fl(Rd(k.field),(function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(k.direction))})(y))})(t.orderBy));let a=null;t.limit&&(a=(function(p){let y;return y=typeof p=="object"?p.value:p,q0(y)?null:y})(t.limit));let c=null;t.startAt&&(c=(function(p){let y=!!p.before,E=p.values||[];return new Ld(E,y)})(t.startAt));let d=null;return t.endAt&&(d=(function(p){let y=!p.before,E=p.values||[];return new Ld(E,y)})(t.endAt)),tJ(e,i,o,s,a,"F",c,d)}function xJ(n,e){let t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ye(28987,{purpose:i})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Ej(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=Rd(t.unaryFilter.field);return Yt.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Rd(t.unaryFilter.field);return Yt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=Rd(t.unaryFilter.field);return Yt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=Rd(t.unaryFilter.field);return Yt.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ye(61313);default:return ye(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Yt.create(Rd(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ye(58110);default:return ye(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return fi.create(t.compositeFilter.filters.map(r=>Ej(r)),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ye(1026)}})(t.compositeFilter.op))})(n):ye(30097,{filter:n})}function RJ(n){return vJ[n]}function kJ(n){return _J[n]}function NJ(n){return wJ[n]}function xd(n){return{fieldPath:n.canonicalString()}}function Rd(n){return Ir.fromServerFormat(n.fieldPath)}function bj(n){return n instanceof Yt?(function(t){if(t.op==="=="){if(WL(t.value))return{unaryFilter:{field:xd(t.field),op:"IS_NAN"}};if(GL(t.value))return{unaryFilter:{field:xd(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(WL(t.value))return{unaryFilter:{field:xd(t.field),op:"IS_NOT_NAN"}};if(GL(t.value))return{unaryFilter:{field:xd(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:xd(t.field),op:kJ(t.op),value:t.value}}})(n):n instanceof fi?(function(t){let r=t.getFilters().map(i=>bj(i));return r.length===1?r[0]:{compositeFilter:{op:NJ(t.op),filters:r}}})(n):ye(54877,{filter:n})}function MJ(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Cj(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var rg=class n{constructor(e,t,r,i,s=ke.min(),o=ke.min(),a=jn.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var YA=class{constructor(e){this.gt=e}};function PJ(n){let e=AJ({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?OA(e,e.limit,"L"):e}var I0=class{constructor(){}bt(e,t){this.Dt(e,t),t.vt()}Dt(e,t){if("nullValue"in e)this.Ct(t,5);else if("booleanValue"in e)this.Ct(t,10),t.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(t,15),t.Ft(bt(e.integerValue));else if("doubleValue"in e){let r=bt(e.doubleValue);isNaN(r)?this.Ct(t,13):(this.Ct(t,15),Xp(r)?t.Ft(0):t.Ft(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ct(t,20),typeof r=="string"&&(r=Xs(r)),t.Mt(`${r.seconds||""}`),t.Ft(r.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,t),this.Ot(t);else if("bytesValue"in e)this.Ct(t,30),t.Nt(Zs(e.bytesValue)),this.Ot(t);else if("referenceValue"in e)this.Bt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ct(t,45),t.Ft(r.latitude||0),t.Ft(r.longitude||0)}else"mapValue"in e?JU(e)?this.Ct(t,Number.MAX_SAFE_INTEGER):YU(e)?this.Lt(e.mapValue,t):(this.kt(e.mapValue,t),this.Ot(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Ot(t)):ye(19022,{Qt:e})}xt(e,t){this.Ct(t,25),this.$t(e,t)}$t(e,t){t.Mt(e)}kt(e,t){let r=e.fields||{};this.Ct(t,55);for(let i of Object.keys(r))this.xt(i,t),this.Dt(r[i],t)}Lt(e,t){var r,i;let s=e.fields||{};this.Ct(t,53);let o=Od,a=((i=(r=s[o].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.Ct(t,15),t.Ft(bt(a)),this.xt(o,t),this.Dt(s[o],t)}qt(e,t){let r=e.values||[];this.Ct(t,50);for(let i of r)this.Dt(i,t)}Bt(e,t){this.Ct(t,37),fe.fromName(e).path.forEach(r=>{this.Ct(t,60),this.$t(r,t)})}Ct(e,t){e.Ft(t)}Ot(e){e.Ft(2)}};I0.Ut=new I0;var JA=class{constructor(){this.Dn=new XA}addToCollectionParentIndex(e,t){return this.Dn.add(t),W.resolve()}getCollectionParents(e,t){return W.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return W.resolve()}deleteFieldIndex(e,t){return W.resolve()}deleteAllFieldIndexes(e){return W.resolve()}createTargetIndexes(e,t){return W.resolve()}getDocumentsMatchingTarget(e,t){return W.resolve(null)}getIndexType(e,t){return W.resolve(0)}getFieldIndexes(e,t){return W.resolve([])}getNextCollectionGroupToUpdate(e){return W.resolve(null)}getMinOffset(e,t){return W.resolve(hl.min())}getMinOffsetFromCollectionGroup(e,t){return W.resolve(hl.min())}updateCollectionGroup(e,t,r){return W.resolve()}updateIndexEntries(e,t){return W.resolve()}},XA=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new En(Ct.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new En(Ct.comparator)).toArray()}};var z0e=new Uint8Array(0);var aU={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Tj=41943040,Or=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};Or.DEFAULT_COLLECTION_PERCENTILE=10,Or.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Or.DEFAULT=new Or(Tj,Or.DEFAULT_COLLECTION_PERCENTILE,Or.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Or.DISABLED=new Or(-1,0,0);var ig=class n{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new n(0)}static ur(){return new n(-1)}};var cU="LruGarbageCollector",OJ=1048576;function lU([n,e],[t,r]){let i=Ve(n,t);return i===0?Ve(e,r):i}var ZA=class{constructor(e){this.Tr=e,this.buffer=new En(lU),this.Ir=0}dr(){return++this.Ir}Er(e){let t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();lU(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},ex=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){re(cU,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Kd(t)?re(cU,"Ignoring IndexedDB error during garbage collection: ",t):await Wd(t)}await this.Rr(3e5)})}},tx=class{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return W.resolve(Zx.ue);let r=new ZA(t);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(re("LruGarbageCollector","Garbage collection skipped; disabled"),W.resolve(aU)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(re("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),aU):this.pr(e,t))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let r,i,s,o,a,c,d,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(re("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,o=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,a=Date.now(),this.removeTargets(e,r,t))).next(p=>(s=p,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(d=Date.now(),Dd()<=Be.DEBUG&&re("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(c-a)+`ms
	Removed ${p} documents in `+(d-c)+`ms
Total Duration: ${d-h}ms`),W.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:p})))}};function FJ(n,e){return new tx(n,e)}var nx=class{constructor(){this.changes=new eo(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,hi.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?W.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var rx=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var ix=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&Qp(r.mutation,i,Fr.empty(),Xt.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,qe()).next(()=>r))}getLocalViewOfDocuments(e,t,r=qe()){let i=ol();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=zp();return s.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){let r=ol();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,qe()))}populateOverlays(e,t,r){let i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,r,i){let s=to(),o=Kp(),a=(function(){return Kp()})();return t.forEach((c,d)=>{let h=r.get(d.key);i.has(d.key)&&(h===void 0||h.mutation instanceof es)?s=s.insert(d.key,d):h!==void 0?(o.set(d.key,h.mutation.getFieldMask()),Qp(h.mutation,d,h.mutation.getFieldMask(),Xt.now())):o.set(d.key,Fr.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((d,h)=>o.set(d,h)),t.forEach((d,h)=>{var p;return a.set(d,new rx(h,(p=o.get(d))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,t){let r=Kp(),i=new kt((o,a)=>o-a),s=qe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(let a of o)a.keys().forEach(c=>{let d=t.get(c);if(d===null)return;let h=r.get(c)||Fr.empty();h=a.applyToLocalView(d,h),r.set(c,h);let p=(i.get(a.batchId)||qe()).add(c);i=i.insert(a.batchId,p)})}).next(()=>{let o=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),d=c.key,h=c.value,p=lj();h.forEach(y=>{if(!s.has(y)){let E=gj(t.get(y),r.get(y));E!==null&&p.set(y,E),s=s.add(y)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,p))}return W.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return(function(o){return fe.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):ij(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):W.resolve(ol()),a=Jp,c=s;return o.next(d=>W.forEach(d,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),s.get(h)?W.resolve():this.remoteDocumentCache.getEntry(e,h).next(y=>{c=c.insert(h,y)}))).next(()=>this.populateOverlays(e,d,s)).next(()=>this.computeViews(e,c,d,qe())).next(h=>({batchId:a,changes:cj(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new fe(t)).next(r=>{let i=zp();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let s=t.collectionGroup,o=zp();return this.indexManager.getCollectionParents(e,s).next(a=>W.forEach(a,c=>{let d=(function(p,y){return new Da(y,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)})(t,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,d,r,i).next(h=>{h.forEach((p,y)=>{o=o.insert(p,y)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((c,d)=>{let h=d.getKey();o.get(h)===null&&(o=o.insert(h,hi.newInvalidDocument(h)))});let a=zp();return o.forEach((c,d)=>{let h=s.get(c);h!==void 0&&Qp(h.mutation,d,Fr.empty(),Xt.now()),W0(t,d)&&(a=a.insert(c,d))}),a})}};var sx=class{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return W.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:Xi(i.createTime)}})(t)),W.resolve()}getNamedQuery(e,t){return W.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,(function(i){return{name:i.name,query:PJ(i.bundledQuery),readTime:Xi(i.readTime)}})(t)),W.resolve()}};var ox=class{constructor(){this.overlays=new kt(fe.comparator),this.kr=new Map}getOverlay(e,t){return W.resolve(this.overlays.get(t))}getOverlays(e,t){let r=ol();return W.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.wt(e,t,s)}),W.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.kr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.kr.delete(r)),W.resolve()}getOverlaysForCollection(e,t,r){let i=ol(),s=t.length+1,o=new fe(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let c=a.getNext().value,d=c.getKey();if(!t.isPrefixOf(d.path))break;d.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return W.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new kt((d,h)=>d-h),o=this.overlays.getIterator();for(;o.hasNext();){let d=o.getNext().value;if(d.getKey().getCollectionGroup()===t&&d.largestBatchId>r){let h=s.get(d.largestBatchId);h===null&&(h=ol(),s=s.insert(d.largestBatchId,h)),h.set(d.getKey(),d)}}let a=ol(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((d,h)=>a.set(d,h)),!(a.size()>=i)););return W.resolve(a)}wt(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new BA(t,r));let s=this.kr.get(t);s===void 0&&(s=qe(),this.kr.set(t,s)),this.kr.set(t,s.add(r.key))}};var ax=class{constructor(){this.sessionToken=jn.EMPTY_BYTE_STRING}getSessionToken(e){return W.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,W.resolve()}};var sg=class{constructor(){this.qr=new En(Qt.Qr),this.$r=new En(Qt.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){let r=new Qt(e,t);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Wr(new Qt(e,t))}Gr(e,t){e.forEach(r=>this.removeReference(r,t))}zr(e){let t=new fe(new Ct([])),r=new Qt(t,e),i=new Qt(t,e+1),s=[];return this.$r.forEachInRange([r,i],o=>{this.Wr(o),s.push(o.key)}),s}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){let t=new fe(new Ct([])),r=new Qt(t,e),i=new Qt(t,e+1),s=qe();return this.$r.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let t=new Qt(e,0),r=this.qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},Qt=class{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return fe.comparator(e.key,t.key)||Ve(e.Hr,t.Hr)}static Ur(e,t){return Ve(e.Hr,t.Hr)||fe.comparator(e.key,t.key)}};var cx=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new En(Qt.Qr)}checkEmpty(e){return W.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let s=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new UA(s,t,r,i);this.mutationQueue.push(o);for(let a of i)this.Yr=this.Yr.add(new Qt(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return W.resolve(o)}lookupMutationBatch(e,t){return W.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.Xr(r),s=i<0?0:i;return W.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return W.resolve(this.mutationQueue.length===0?e1:this.er-1)}getAllMutationBatches(e){return W.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new Qt(t,0),i=new Qt(t,Number.POSITIVE_INFINITY),s=[];return this.Yr.forEachInRange([r,i],o=>{let a=this.Zr(o.Hr);s.push(a)}),W.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new En(Ve);return t.forEach(i=>{let s=new Qt(i,0),o=new Qt(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([s,o],a=>{r=r.add(a.Hr)})}),W.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,s=r;fe.isDocumentKey(s)||(s=s.child(""));let o=new Qt(new fe(s),0),a=new En(Ve);return this.Yr.forEachWhile(c=>{let d=c.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(a=a.add(c.Hr)),!0)},o),W.resolve(this.ei(a))}ei(e){let t=[];return e.forEach(r=>{let i=this.Zr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){ct(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return W.forEach(t.mutations,i=>{let s=new Qt(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,t){let r=new Qt(t,0),i=this.Yr.firstAfterOrEqual(r);return W.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,W.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){let t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var lx=class{constructor(e){this.ni=e,this.docs=(function(){return new kt(fe.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.ni(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return W.resolve(r?r.document.mutableCopy():hi.newInvalidDocument(t))}getEntries(e,t){let r=to();return t.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():hi.newInvalidDocument(i))}),W.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=to(),o=t.path,a=new fe(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:d,value:{document:h}}=c.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||FY(OY(h),r)<=0||(i.has(h.key)||W0(t,h))&&(s=s.insert(h.key,h.mutableCopy()))}return W.resolve(s)}getAllFromCollectionGroup(e,t,r,i){ye(9500)}ri(e,t){return W.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new ux(this)}getSize(e){return W.resolve(this.size)}},ux=class extends nx{constructor(e){super(),this.Or=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Or.addEntry(e,i)):this.Or.removeEntry(r)}),W.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}};var dx=class{constructor(e){this.persistence=e,this.ii=new eo(t=>s1(t),o1),this.lastRemoteSnapshotVersion=ke.min(),this.highestTargetId=0,this.si=0,this.oi=new sg,this.targetCount=0,this._i=ig.ar()}forEachTarget(e,t){return this.ii.forEach((r,i)=>t(i)),W.resolve()}getLastRemoteSnapshotVersion(e){return W.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return W.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),W.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.si&&(this.si=t),W.resolve()}hr(e){this.ii.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this._i=new ig(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,W.resolve()}updateTargetData(e,t){return this.hr(t),W.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,W.resolve()}removeTargets(e,t,r){let i=0,s=[];return this.ii.forEach((o,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.ii.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),W.waitFor(s).next(()=>i)}getTargetCount(e){return W.resolve(this.targetCount)}getTargetData(e,t){let r=this.ii.get(t)||null;return W.resolve(r)}addMatchingKeys(e,t,r){return this.oi.Kr(t,r),W.resolve()}removeMatchingKeys(e,t,r){this.oi.Gr(t,r);let i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),W.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),W.resolve()}getMatchingKeysForTargetId(e,t){let r=this.oi.Jr(t);return W.resolve(r)}containsKey(e,t){return W.resolve(this.oi.containsKey(t))}};var E0=class{constructor(e,t){this.ai={},this.overlays={},this.ui=new Zx(0),this.ci=!1,this.ci=!0,this.li=new ax,this.referenceDelegate=e(this),this.hi=new dx(this),this.indexManager=new JA,this.remoteDocumentCache=(function(i){return new lx(i)})(r=>this.referenceDelegate.Pi(r)),this.serializer=new YA(t),this.Ti=new sx(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new ox,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ai[e.toKey()];return r||(r=new cx(t,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,r){re("MemoryPersistence","Starting transaction:",e);let i=new hx(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(s=>this.referenceDelegate.di(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ei(e,t){return W.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,t)))}},hx=class extends wA{constructor(e){super(),this.currentSequenceNumber=e}},fx=class n{constructor(e){this.persistence=e,this.Ai=new sg,this.Ri=null}static Vi(e){return new n(e)}get mi(){if(this.Ri)return this.Ri;throw ye(60996)}addReference(e,t,r){return this.Ai.addReference(r,t),this.mi.delete(r.toString()),W.resolve()}removeReference(e,t,r){return this.Ai.removeReference(r,t),this.mi.add(r.toString()),W.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),W.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach(i=>this.mi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.mi.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}Ii(){this.Ri=new Set}di(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return W.forEach(this.mi,r=>{let i=fe.fromPath(r);return this.fi(e,i).next(s=>{s||t.removeEntry(i,ke.min())})}).next(()=>(this.Ri=null,t.apply(e)))}updateLimboDocument(e,t){return this.fi(e,t).next(r=>{r?this.mi.delete(t.toString()):this.mi.add(t.toString())})}Pi(e){return 0}fi(e,t){return W.or([()=>W.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}},b0=class n{constructor(e,t){this.persistence=e,this.gi=new eo(r=>jY(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=FJ(this,t)}static Vi(e,t){return new n(e,t)}Ii(){}di(e){return W.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){let t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}yr(e){let t=0;return this.gr(e,r=>{t++}).next(()=>t)}gr(e,t){return W.forEach(this.gi,(r,i)=>this.Sr(e,r,i).next(s=>s?W.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ri(e,o=>this.Sr(e,o,t).next(a=>{a||(r++,s.removeEntry(o,ke.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),W.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),W.resolve()}removeReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),W.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),W.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=s0(e.data.value)),t}Sr(e,t,r){return W.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let i=this.gi.get(t);return W.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var px=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Is=r,this.ds=i}static Es(e,t){let r=qe(),i=qe();for(let s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new n(e,t.fromCache,r,i)}};var gx=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var mx=class{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return IO()?8:LY(yn())>0?6:4})()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,r,i){let s={result:null};return this.ps(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ys(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new gx;return this.ws(e,t,o).next(a=>{if(s.result=a,this.Rs)return this.Ss(e,t,o,a.size)})}).next(()=>s.result)}Ss(e,t,r,i){return r.documentReadCount<this.Vs?(Dd()<=Be.DEBUG&&re("QueryEngine","SDK will not create cache indexes for query:",Ad(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),W.resolve()):(Dd()<=Be.DEBUG&&re("QueryEngine","Query:",Ad(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?(Dd()<=Be.DEBUG&&re("QueryEngine","The SDK decides to create cache indexes for query:",Ad(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ji(t))):W.resolve())}ps(e,t){if(JL(t))return W.resolve(null);let r=Ji(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=OA(t,null,"F"),r=Ji(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=qe(...s);return this.gs.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let d=this.bs(t,a);return this.Ds(t,d,o,c.readTime)?this.ps(e,OA(t,null,"F")):this.vs(e,d,t,c)}))})))}ys(e,t,r,i){return JL(t)||i.isEqual(ke.min())?W.resolve(null):this.gs.getDocuments(e,r).next(s=>{let o=this.bs(t,s);return this.Ds(t,o,r,i)?W.resolve(null):(Dd()<=Be.DEBUG&&re("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ad(t)),this.vs(e,o,t,PY(i,Jp)).next(a=>a))})}bs(e,t){let r=new En(oj(e));return t.forEach((i,s)=>{W0(e,s)&&(r=r.add(s))}),r}Ds(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}ws(e,t,r){return Dd()<=Be.DEBUG&&re("QueryEngine","Using full collection scan to execute query:",Ad(t)),this.gs.getDocumentsMatchingQuery(e,t,hl.min(),r)}vs(e,t,r,i){return this.gs.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}};var u1="LocalStore",VJ=3e8,yx=class{constructor(e,t,r,i){this.persistence=e,this.Cs=t,this.serializer=i,this.Fs=new kt(Ve),this.Ms=new eo(s=>s1(s),o1),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ix(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Fs))}};function LJ(n,e,t,r){return new yx(n,e,t,r)}async function Sj(n,e){let t=Se(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.Ns(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{let o=[],a=[],c=qe();for(let d of i){o.push(d.batchId);for(let h of d.mutations)c=c.add(h.key)}for(let d of s){a.push(d.batchId);for(let h of d.mutations)c=c.add(h.key)}return t.localDocuments.getDocuments(r,c).next(d=>({Bs:d,removedBatchIds:o,addedBatchIds:a}))})})}function UJ(n,e){let t=Se(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),s=t.Os.newChangeBuffer({trackRemovals:!0});return(function(a,c,d,h){let p=d.batch,y=p.keys(),E=W.resolve();return y.forEach(k=>{E=E.next(()=>h.getEntry(c,k)).next(P=>{let M=d.docVersions.get(k);ct(M!==null,48541),P.version.compareTo(M)<0&&(p.applyToRemoteDocument(P,d),P.isValidDocument()&&(P.setReadTime(d.commitVersion),h.addEntry(P)))})}),E.next(()=>a.mutationQueue.removeMutationBatch(c,p))})(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(a){let c=qe();for(let d=0;d<a.mutationResults.length;++d)a.mutationResults[d].transformResults.length>0&&(c=c.add(a.batch.mutations[d].key));return c})(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function Dj(n){let e=Se(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.hi.getLastRemoteSnapshotVersion(t))}function jJ(n,e){let t=Se(n),r=e.snapshotVersion,i=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=t.Os.newChangeBuffer({trackRemovals:!0});i=t.Fs;let a=[];e.targetChanges.forEach((h,p)=>{let y=i.get(p);if(!y)return;a.push(t.hi.removeMatchingKeys(s,h.removedDocuments,p).next(()=>t.hi.addMatchingKeys(s,h.addedDocuments,p)));let E=y.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(p)!==null?E=E.withResumeToken(jn.EMPTY_BYTE_STRING,ke.min()).withLastLimboFreeSnapshotVersion(ke.min()):h.resumeToken.approximateByteSize()>0&&(E=E.withResumeToken(h.resumeToken,r)),i=i.insert(p,E),(function(P,M,H){return P.resumeToken.approximateByteSize()===0||M.snapshotVersion.toMicroseconds()-P.snapshotVersion.toMicroseconds()>=VJ?!0:H.addedDocuments.size+H.modifiedDocuments.size+H.removedDocuments.size>0})(y,E,h)&&a.push(t.hi.updateTargetData(s,E))});let c=to(),d=qe();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(BJ(s,o,e.documentUpdates).next(h=>{c=h.Ls,d=h.ks})),!r.isEqual(ke.min())){let h=t.hi.getLastRemoteSnapshotVersion(s).next(p=>t.hi.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(h)}return W.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,c,d)).next(()=>c)}).then(s=>(t.Fs=i,s))}function BJ(n,e,t){let r=qe(),i=qe();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=to();return t.forEach((a,c)=>{let d=s.get(a);c.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(ke.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!d.isValidDocument()||c.version.compareTo(d.version)>0||c.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):re(u1,"Ignoring outdated watch update for ",a,". Current version:",d.version," Watch version:",c.version)}),{Ls:o,ks:i}})}function $J(n,e){let t=Se(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=e1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function HJ(n,e){let t=Se(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.hi.getTargetData(r,e).next(s=>s?(i=s,W.resolve(i)):t.hi.allocateTargetId(r).next(o=>(i=new rg(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.hi.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.Fs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(r.targetId,r),t.Ms.set(e,r.targetId)),r})}async function vx(n,e,t){let r=Se(n),i=r.Fs.get(e),s=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Kd(o))throw o;re(u1,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(i.target)}function uU(n,e,t){let r=Se(n),i=ke.min(),s=qe();return r.persistence.runTransaction("Execute query","readwrite",o=>(function(c,d,h){let p=Se(c),y=p.Ms.get(h);return y!==void 0?W.resolve(p.Fs.get(y)):p.hi.getTargetData(d,h)})(r,o,Ji(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(o,a.targetId).next(c=>{s=c})}).next(()=>r.Cs.getDocumentsMatchingQuery(o,e,t?i:ke.min(),t?s:qe())).next(a=>(qJ(r,rJ(e),a),{documents:a,qs:s})))}function qJ(n,e,t){let r=n.xs.get(e)||ke.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.xs.set(e,r)}var C0=class{constructor(){this.activeTargetIds=lJ()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var _x=class{constructor(){this.Fo=new C0,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,r){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new C0,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var wx=class{xo(e){}shutdown(){}};var dU="ConnectivityMonitor",T0=class{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){re(dU,"Network connectivity changed: AVAILABLE");for(let e of this.ko)e(0)}Lo(){re(dU,"Network connectivity changed: UNAVAILABLE");for(let e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var i0=null;function Ix(){return i0===null?i0=(function(){return 268435456+Math.round(2147483648*Math.random())})():i0++,"0x"+i0.toString(16)}var lA="RestConnection",zJ={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},Ex=class{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===f0?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,t,r,i,s){let o=Ix(),a=this.Go(e,t.toUriEncodedString());re(lA,`Sending RPC '${e}' ${o}:`,a,r);let c={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(c,i,s);let{host:d}=new URL(a),h=Zo(d);return this.jo(e,a,c,r,h).then(p=>(re(lA,`Received RPC '${e}' ${o}: `,p),p),p=>{throw Ta(lA,`RPC '${e}' ${o} failed with error: `,p,"url: ",a,"request:",r),p})}Jo(e,t,r,i,s,o){return this.Wo(e,t,r,i,s)}zo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Gd})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}Go(e,t){let r=zJ[e];return`${this.$o}/v1/${t}:${r}`}terminate(){}};var bx=class{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}};var Un="WebChannelConnection",Cx=class extends Ex{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,r,i,s){let o=Ix();return new Promise((a,c)=>{let d=new rA;d.setWithCredentials(!0),d.listenOnce(iA.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case qp.NO_ERROR:let p=d.getResponseJson();re(Un,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(p)),a(p);break;case qp.TIMEOUT:re(Un,`RPC '${e}' ${o} timed out`),c(new te(q.DEADLINE_EXCEEDED,"Request time out"));break;case qp.HTTP_ERROR:let y=d.getStatus();if(re(Un,`RPC '${e}' ${o} failed with status:`,y,"response text:",d.getResponseText()),y>0){let E=d.getResponseJson();Array.isArray(E)&&(E=E[0]);let k=E?.error;if(k&&k.status&&k.message){let P=(function(H){let Y=H.toLowerCase().replace(/_/g,"-");return Object.values(q).indexOf(Y)>=0?Y:q.UNKNOWN})(k.status);c(new te(P,k.message))}else c(new te(q.UNKNOWN,"Server responded with status "+d.getStatus()))}else c(new te(q.UNAVAILABLE,"Connection failed."));break;default:ye(9055,{c_:e,streamId:o,l_:d.getLastErrorCode(),h_:d.getLastError()})}}finally{re(Un,`RPC '${e}' ${o} completed.`)}});let h=JSON.stringify(i);re(Un,`RPC '${e}' ${o} sending request:`,i),d.send(t,"POST",h,r,15)})}P_(e,t,r){let i=Ix(),s=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=aA(),a=oA(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(c.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(c.useFetchStreams=!0),this.zo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;let h=s.join("");re(Un,`Creating RPC '${e}' stream ${i}: ${h}`,c);let p=o.createWebChannel(h,c);this.T_(p);let y=!1,E=!1,k=new bx({Ho:M=>{E?re(Un,`Not sending because RPC '${e}' stream ${i} is closed:`,M):(y||(re(Un,`Opening RPC '${e}' stream ${i} transport.`),p.open(),y=!0),re(Un,`RPC '${e}' stream ${i} sending:`,M),p.send(M))},Yo:()=>p.close()}),P=(M,H,Y)=>{M.listen(H,ee=>{try{Y(ee)}catch(De){setTimeout(()=>{throw De},0)}})};return P(p,Sd.EventType.OPEN,()=>{E||(re(Un,`RPC '${e}' stream ${i} transport opened.`),k.s_())}),P(p,Sd.EventType.CLOSE,()=>{E||(E=!0,re(Un,`RPC '${e}' stream ${i} transport closed`),k.__(),this.I_(p))}),P(p,Sd.EventType.ERROR,M=>{E||(E=!0,Ta(Un,`RPC '${e}' stream ${i} transport errored. Name:`,M.name,"Message:",M.message),k.__(new te(q.UNAVAILABLE,"The operation could not be completed")))}),P(p,Sd.EventType.MESSAGE,M=>{var H;if(!E){let Y=M.data[0];ct(!!Y,16349);let ee=Y,De=ee?.error||((H=ee[0])===null||H===void 0?void 0:H.error);if(De){re(Un,`RPC '${e}' stream ${i} received error:`,De);let et=De.status,ve=(function(I){let C=Kt[I];if(C!==void 0)return yj(C)})(et),T=De.message;ve===void 0&&(ve=q.INTERNAL,T="Unknown error status: "+et+" with message "+De.message),E=!0,k.__(new te(ve,T)),p.close()}else re(Un,`RPC '${e}' stream ${i} received:`,Y),k.a_(Y)}}),P(a,sA.STAT_EVENT,M=>{M.stat===t0.PROXY?re(Un,`RPC '${e}' stream ${i} detected buffering proxy`):M.stat===t0.NOPROXY&&re(Un,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{k.o_()},0),k}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(t=>t===e)}};function uA(){return typeof document<"u"?document:null}function K0(n){return new zA(n,!0)}var S0=class{constructor(e,t,r=1e3,i=1.5,s=6e4){this.Fi=e,this.timerId=t,this.d_=r,this.E_=i,this.A_=s,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();let t=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,t-r);i>0&&re("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}};var hU="PersistentStream",D0=class{constructor(e,t,r,i,s,o,a,c){this.Fi=e,this.w_=r,this.S_=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new S0(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===q.RESOURCE_EXHAUSTED?(Js(t.toString()),Js("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===q.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(t)}U_(){}auth(){this.state=1;let e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===t&&this.W_(r,i)},r=>{e(()=>{let i=new te(q.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(e,t){let r=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>++this.C_==1?this.j_(i):this.onNext(i))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return re(hU,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget(()=>this.b_===e?t():(re(hU,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},Tx=class extends D0{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();let t=bJ(this.serializer,e),r=(function(s){if(!("targetChange"in s))return ke.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?ke.min():o.readTime?Xi(o.readTime):ke.min()})(e);return this.listener.J_(t,r)}H_(e){let t={};t.database=QA(this.serializer),t.addTarget=(function(s,o){let a,c=o.target;if(a=MA(c)?{documents:SJ(s,c)}:{query:DJ(s,c).Vt},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=vj(s,o.resumeToken);let d=GA(s,o.expectedCount);d!==null&&(a.expectedCount=d)}else if(o.snapshotVersion.compareTo(ke.min())>0){a.readTime=w0(s,o.snapshotVersion.toTimestamp());let d=GA(s,o.expectedCount);d!==null&&(a.expectedCount=d)}return a})(this.serializer,e);let r=xJ(this.serializer,e);r&&(t.labels=r),this.k_(t)}Y_(e){let t={};t.database=QA(this.serializer),t.removeTarget=e,this.k_(t)}},Sx=class extends D0{constructor(e,t,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return ct(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ct(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){ct(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();let t=TJ(e.writeResults,e.commitTime),r=Xi(e.commitTime);return this.listener.ta(r,t)}na(){let e={};e.database=QA(this.serializer),this.k_(e)}X_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>CJ(this.serializer,r))};this.k_(t)}};var Dx=class{},Ax=class extends Dx{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new te(q.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Wo(e,WA(t,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new te(q.UNKNOWN,s.toString())})}Jo(e,t,r,i,s){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Jo(e,WA(t,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new te(q.UNKNOWN,o.toString())})}terminate(){this.ra=!0,this.connection.terminate()}},xx=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Js(t),this._a=!1):re("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}};var vl="RemoteStore",Rx=class{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=s,this.Ea.xo(o=>{r.enqueueAndForget(async()=>{_l(this)&&(re(vl,"Restarting streams for network reachability change."),await(async function(c){let d=Se(c);d.Ia.add(4),await lg(d),d.Aa.set("Unknown"),d.Ia.delete(4),await Q0(d)})(this))})}),this.Aa=new xx(r,i)}};async function Q0(n){if(_l(n))for(let e of n.da)await e(!0)}async function lg(n){for(let e of n.da)await e(!1)}function Aj(n,e){let t=Se(n);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),p1(t)?f1(t):Qd(t).x_()&&h1(t,e))}function d1(n,e){let t=Se(n),r=Qd(t);t.Ta.delete(e),r.x_()&&xj(t,e),t.Ta.size===0&&(r.x_()?r.B_():_l(t)&&t.Aa.set("Unknown"))}function h1(n,e){if(n.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ke.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Qd(n).H_(e)}function xj(n,e){n.Ra.$e(e),Qd(n).Y_(e)}function f1(n){n.Ra=new qA({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Ta.get(e)||null,lt:()=>n.datastore.serializer.databaseId}),Qd(n).start(),n.Aa.aa()}function p1(n){return _l(n)&&!Qd(n).M_()&&n.Ta.size>0}function _l(n){return Se(n).Ia.size===0}function Rj(n){n.Ra=void 0}async function GJ(n){n.Aa.set("Online")}async function WJ(n){n.Ta.forEach((e,t)=>{h1(n,e)})}async function KJ(n,e){Rj(n),p1(n)?(n.Aa.la(e),f1(n)):n.Aa.set("Unknown")}async function QJ(n,e,t){if(n.Aa.set("Online"),e instanceof v0&&e.state===2&&e.cause)try{await(async function(i,s){let o=s.cause;for(let a of s.targetIds)i.Ta.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.Ta.delete(a),i.Ra.removeTarget(a))})(n,e)}catch(r){re(vl,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await A0(n,r)}else if(e instanceof Nd?n.Ra.Ye(e):e instanceof y0?n.Ra.it(e):n.Ra.et(e),!t.isEqual(ke.min()))try{let r=await Dj(n.localStore);t.compareTo(r)>=0&&await(function(s,o){let a=s.Ra.Pt(o);return a.targetChanges.forEach((c,d)=>{if(c.resumeToken.approximateByteSize()>0){let h=s.Ta.get(d);h&&s.Ta.set(d,h.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,d)=>{let h=s.Ta.get(c);if(!h)return;s.Ta.set(c,h.withResumeToken(jn.EMPTY_BYTE_STRING,h.snapshotVersion)),xj(s,c);let p=new rg(h.target,c,d,h.sequenceNumber);h1(s,p)}),s.remoteSyncer.applyRemoteEvent(a)})(n,t)}catch(r){re(vl,"Failed to raise snapshot:",r),await A0(n,r)}}async function A0(n,e,t){if(!Kd(e))throw e;n.Ia.add(1),await lg(n),n.Aa.set("Offline"),t||(t=()=>Dj(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{re(vl,"Retrying IndexedDB access"),await t(),n.Ia.delete(1),await Q0(n)})}function kj(n,e){return e().catch(t=>A0(n,t,e))}async function Y0(n){let e=Se(n),t=Aa(e),r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:e1;for(;YJ(e);)try{let i=await $J(e.localStore,r);if(i===null){e.Pa.length===0&&t.B_();break}r=i.batchId,JJ(e,i)}catch(i){await A0(e,i)}Nj(e)&&Mj(e)}function YJ(n){return _l(n)&&n.Pa.length<10}function JJ(n,e){n.Pa.push(e);let t=Aa(n);t.x_()&&t.Z_&&t.X_(e.mutations)}function Nj(n){return _l(n)&&!Aa(n).M_()&&n.Pa.length>0}function Mj(n){Aa(n).start()}async function XJ(n){Aa(n).na()}async function ZJ(n){let e=Aa(n);for(let t of n.Pa)e.X_(t.mutations)}async function eX(n,e,t){let r=n.Pa.shift(),i=jA.from(r,e,t);await kj(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),await Y0(n)}async function tX(n,e){e&&Aa(n).Z_&&await(async function(r,i){if((function(o){return mJ(o)&&o!==q.ABORTED})(i.code)){let s=r.Pa.shift();Aa(r).N_(),await kj(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await Y0(r)}})(n,e),Nj(n)&&Mj(n)}async function fU(n,e){let t=Se(n);t.asyncQueue.verifyOperationInProgress(),re(vl,"RemoteStore received new credentials");let r=_l(t);t.Ia.add(3),await lg(t),r&&t.Aa.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),await Q0(t)}async function nX(n,e){let t=Se(n);e?(t.Ia.delete(2),await Q0(t)):e||(t.Ia.add(2),await lg(t),t.Aa.set("Unknown"))}function Qd(n){return n.Va||(n.Va=(function(t,r,i){let s=Se(t);return s.ia(),new Tx(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(n.datastore,n.asyncQueue,{Zo:GJ.bind(null,n),e_:WJ.bind(null,n),n_:KJ.bind(null,n),J_:QJ.bind(null,n)}),n.da.push(async e=>{e?(n.Va.N_(),p1(n)?f1(n):n.Aa.set("Unknown")):(await n.Va.stop(),Rj(n))})),n.Va}function Aa(n){return n.ma||(n.ma=(function(t,r,i){let s=Se(t);return s.ia(),new Sx(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:XJ.bind(null,n),n_:tX.bind(null,n),ea:ZJ.bind(null,n),ta:eX.bind(null,n)}),n.da.push(async e=>{e?(n.ma.N_(),await Y0(n)):(await n.ma.stop(),n.Pa.length>0&&(re(vl,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))})),n.ma}var kx=class n{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Ki,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){let o=Date.now()+r,a=new n(e,t,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new te(q.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function g1(n,e){if(Js("AsyncQueue",`${e}: ${n}`),Kd(n))return new te(q.UNAVAILABLE,`${e}: ${n}`);throw n}var x0=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||fe.comparator(t.key,r.key):(t,r)=>fe.comparator(t.key,r.key),this.keyedMap=zp(),this.sortedSet=new kt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var R0=class{constructor(){this.fa=new kt(fe.comparator)}track(e){let t=e.doc.key,r=this.fa.get(t);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(t,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(t):e.type===1&&r.type===2?this.fa=this.fa.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):ye(63341,{At:e,ga:r}):this.fa=this.fa.insert(t,e)}pa(){let e=[];return this.fa.inorderTraversal((t,r)=>{e.push(r)}),e}},$d=class n{constructor(e,t,r,i,s,o,a,c,d){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=d}static fromInitialDocuments(e,t,r,i,s){let o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new n(e,t,x0.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&G0(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var Nx=class{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}},Mx=class{constructor(){this.queries=pU(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,r){let i=Se(t),s=i.queries;i.queries=pU(),s.forEach((o,a)=>{for(let c of a.wa)c.onError(r)})})(this,new te(q.ABORTED,"Firestore shutting down"))}};function pU(){return new eo(n=>sj(n),G0)}async function Pj(n,e){let t=Se(n),r=3,i=e.query,s=t.queries.get(i);s?!s.Sa()&&e.ba()&&(r=2):(s=new Nx,r=e.ba()?0:1);try{switch(r){case 0:s.ya=await t.onListen(i,!0);break;case 1:s.ya=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(o){let a=g1(o,`Initialization of query '${Ad(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,s),s.wa.push(e),e.va(t.onlineState),s.ya&&e.Ca(s.ya)&&m1(t)}async function Oj(n,e){let t=Se(n),r=e.query,i=3,s=t.queries.get(r);if(s){let o=s.wa.indexOf(e);o>=0&&(s.wa.splice(o,1),s.wa.length===0?i=e.ba()?0:1:!s.Sa()&&e.ba()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function rX(n,e){let t=Se(n),r=!1;for(let i of e){let s=i.query,o=t.queries.get(s);if(o){for(let a of o.wa)a.Ca(i)&&(r=!0);o.ya=i}}r&&m1(t)}function iX(n,e,t){let r=Se(n),i=r.queries.get(e);if(i)for(let s of i.wa)s.onError(t);r.queries.delete(e)}function m1(n){n.Da.forEach(e=>{e.next()})}var Px,gU;(gU=Px||(Px={})).Fa="default",gU.Cache="cache";var k0=class{constructor(e,t,r){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new $d(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;let r=t!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;let t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=$d.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==Px.Cache}};var N0=class{constructor(e){this.key=e}},M0=class{constructor(e){this.key=e}},Ox=class{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=qe(),this.mutatedKeys=qe(),this.Xa=oj(e),this.eu=new x0(this.Xa)}get tu(){return this.Ha}nu(e,t){let r=t?t.ru:new R0,i=t?t.eu:this.eu,s=t?t.mutatedKeys:this.mutatedKeys,o=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,d=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let y=i.get(h),E=W0(this.query,p)?p:null,k=!!y&&this.mutatedKeys.has(y.key),P=!!E&&(E.hasLocalMutations||this.mutatedKeys.has(E.key)&&E.hasCommittedMutations),M=!1;y&&E?y.data.isEqual(E.data)?k!==P&&(r.track({type:3,doc:E}),M=!0):this.iu(y,E)||(r.track({type:2,doc:E}),M=!0,(c&&this.Xa(E,c)>0||d&&this.Xa(E,d)<0)&&(a=!0)):!y&&E?(r.track({type:0,doc:E}),M=!0):y&&!E&&(r.track({type:1,doc:y}),M=!0,(c||d)&&(a=!0)),M&&(E?(o=o.add(E),s=P?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{eu:o,ru:r,Ds:a,mutatedKeys:s}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let s=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;let o=e.ru.pa();o.sort((h,p)=>(function(E,k){let P=M=>{switch(M){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ye(20277,{At:M})}};return P(E)-P(k)})(h.type,p.type)||this.Xa(h.doc,p.doc)),this.su(r),i=i!=null&&i;let a=t&&!i?this.ou():[],c=this.Za.size===0&&this.current&&!i?1:0,d=c!==this.Ya;return this.Ya=c,o.length!==0||d?{snapshot:new $d(this.query,e.eu,s,o,e.mutatedKeys,c===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:a}:{_u:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new R0,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(t=>this.Ha=this.Ha.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ha=this.Ha.delete(t)),this.current=e.current)}ou(){if(!this.current)return[];let e=this.Za;this.Za=qe(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});let t=[];return e.forEach(r=>{this.Za.has(r)||t.push(new M0(r))}),this.Za.forEach(r=>{e.has(r)||t.push(new N0(r))}),t}uu(e){this.Ha=e.qs,this.Za=qe();let t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return $d.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}},y1="SyncEngine",Fx=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},Vx=class{constructor(e){this.key=e,this.lu=!1}},Lx=class{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.hu={},this.Pu=new eo(a=>sj(a),G0),this.Tu=new Map,this.Iu=new Set,this.du=new kt(fe.comparator),this.Eu=new Map,this.Au=new sg,this.Ru={},this.Vu=new Map,this.mu=ig.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}};async function sX(n,e,t=!0){let r=Bj(n),i,s=r.Pu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.cu()):i=await Fj(r,e,t,!0),i}async function oX(n,e){let t=Bj(n);await Fj(t,e,!0,!1)}async function Fj(n,e,t,r){let i=await HJ(n.localStore,Ji(e)),s=i.targetId,o=n.sharedClientState.addLocalQueryTarget(s,t),a;return r&&(a=await aX(n,e,s,o==="current",i.resumeToken)),n.isPrimaryClient&&t&&Aj(n.remoteStore,i),a}async function aX(n,e,t,r,i){n.gu=(p,y,E)=>(async function(P,M,H,Y){let ee=M.view.nu(H);ee.Ds&&(ee=await uU(P.localStore,M.query,!1).then(({documents:T})=>M.view.nu(T,ee)));let De=Y&&Y.targetChanges.get(M.targetId),et=Y&&Y.targetMismatches.get(M.targetId)!=null,ve=M.view.applyChanges(ee,P.isPrimaryClient,De,et);return yU(P,M.targetId,ve._u),ve.snapshot})(n,p,y,E);let s=await uU(n.localStore,e,!0),o=new Ox(e,s.qs),a=o.nu(s.documents),c=ng.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),d=o.applyChanges(a,n.isPrimaryClient,c);yU(n,t,d._u);let h=new Fx(e,t,o);return n.Pu.set(e,h),n.Tu.has(t)?n.Tu.get(t).push(e):n.Tu.set(t,[e]),d.snapshot}async function cX(n,e,t){let r=Se(n),i=r.Pu.get(e),s=r.Tu.get(i.targetId);if(s.length>1)return r.Tu.set(i.targetId,s.filter(o=>!G0(o,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await vx(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&d1(r.remoteStore,i.targetId),Ux(r,i.targetId)}).catch(Wd)):(Ux(r,i.targetId),await vx(r.localStore,i.targetId,!0))}async function lX(n,e){let t=Se(n),r=t.Pu.get(e),i=t.Tu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),d1(t.remoteStore,r.targetId))}async function uX(n,e,t){let r=yX(n);try{let i=await(function(o,a){let c=Se(o),d=Xt.now(),h=a.reduce((E,k)=>E.add(k.key),qe()),p,y;return c.persistence.runTransaction("Locally write mutations","readwrite",E=>{let k=to(),P=qe();return c.Os.getEntries(E,h).next(M=>{k=M,k.forEach((H,Y)=>{Y.isValidDocument()||(P=P.add(H))})}).next(()=>c.localDocuments.getOverlayedDocuments(E,k)).next(M=>{p=M;let H=[];for(let Y of a){let ee=gJ(Y,p.get(Y.key).overlayedDocument);ee!=null&&H.push(new es(Y.key,ee,XU(ee.value.mapValue),Ys.exists(!0)))}return c.mutationQueue.addMutationBatch(E,d,H,a)}).next(M=>{y=M;let H=M.applyToLocalDocumentSet(p,P);return c.documentOverlayCache.saveOverlays(E,M.batchId,H)})}).then(()=>({batchId:y.batchId,changes:cj(p)}))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(o,a,c){let d=o.Ru[o.currentUser.toKey()];d||(d=new kt(Ve)),d=d.insert(a,c),o.Ru[o.currentUser.toKey()]=d})(r,i.batchId,t),await ug(r,i.changes),await Y0(r.remoteStore)}catch(i){let s=g1(i,"Failed to persist write");t.reject(s)}}async function Vj(n,e){let t=Se(n);try{let r=await jJ(t.localStore,e);e.targetChanges.forEach((i,s)=>{let o=t.Eu.get(s);o&&(ct(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.lu=!0:i.modifiedDocuments.size>0?ct(o.lu,14607):i.removedDocuments.size>0&&(ct(o.lu,42227),o.lu=!1))}),await ug(t,r,e)}catch(r){await Wd(r)}}function mU(n,e,t){let r=Se(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Pu.forEach((s,o)=>{let a=o.view.va(e);a.snapshot&&i.push(a.snapshot)}),(function(o,a){let c=Se(o);c.onlineState=a;let d=!1;c.queries.forEach((h,p)=>{for(let y of p.wa)y.va(a)&&(d=!0)}),d&&m1(c)})(r.eventManager,e),i.length&&r.hu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function dX(n,e,t){let r=Se(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Eu.get(e),s=i&&i.key;if(s){let o=new kt(fe.comparator);o=o.insert(s,hi.newNoDocument(s,ke.min()));let a=qe().add(s),c=new m0(ke.min(),new Map,new kt(Ve),o,a);await Vj(r,c),r.du=r.du.remove(s),r.Eu.delete(e),v1(r)}else await vx(r.localStore,e,!1).then(()=>Ux(r,e,t)).catch(Wd)}async function hX(n,e){let t=Se(n),r=e.batch.batchId;try{let i=await UJ(t.localStore,e);Uj(t,r,null),Lj(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await ug(t,i)}catch(i){await Wd(i)}}async function fX(n,e,t){let r=Se(n);try{let i=await(function(o,a){let c=Se(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let h;return c.mutationQueue.lookupMutationBatch(d,a).next(p=>(ct(p!==null,37113),h=p.keys(),c.mutationQueue.removeMutationBatch(d,p))).next(()=>c.mutationQueue.performConsistencyCheck(d)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(d,h,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,h)).next(()=>c.localDocuments.getDocuments(d,h))})})(r.localStore,e);Uj(r,e,t),Lj(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await ug(r,i)}catch(i){await Wd(i)}}function Lj(n,e){(n.Vu.get(e)||[]).forEach(t=>{t.resolve()}),n.Vu.delete(e)}function Uj(n,e,t){let r=Se(n),i=r.Ru[r.currentUser.toKey()];if(i){let s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Ru[r.currentUser.toKey()]=i}}function Ux(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Tu.get(e))n.Pu.delete(r),t&&n.hu.pu(r,t);n.Tu.delete(e),n.isPrimaryClient&&n.Au.zr(e).forEach(r=>{n.Au.containsKey(r)||jj(n,r)})}function jj(n,e){n.Iu.delete(e.path.canonicalString());let t=n.du.get(e);t!==null&&(d1(n.remoteStore,t),n.du=n.du.remove(e),n.Eu.delete(t),v1(n))}function yU(n,e,t){for(let r of t)r instanceof N0?(n.Au.addReference(r.key,e),pX(n,r)):r instanceof M0?(re(y1,"Document no longer in limbo: "+r.key),n.Au.removeReference(r.key,e),n.Au.containsKey(r.key)||jj(n,r.key)):ye(19791,{yu:r})}function pX(n,e){let t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Iu.has(r)||(re(y1,"New document in limbo: "+t),n.Iu.add(r),v1(n))}function v1(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){let e=n.Iu.values().next().value;n.Iu.delete(e);let t=new fe(Ct.fromString(e)),r=n.mu.next();n.Eu.set(r,new Vx(t)),n.du=n.du.insert(t,r),Aj(n.remoteStore,new rg(Ji(a1(t.path)),r,"TargetPurposeLimboResolution",Zx.ue))}}async function ug(n,e,t){let r=Se(n),i=[],s=[],o=[];r.Pu.isEmpty()||(r.Pu.forEach((a,c)=>{o.push(r.gu(c,e,t).then(d=>{var h;if((d||t)&&r.isPrimaryClient){let p=d?!d.fromCache:(h=t?.targetChanges.get(c.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(c.targetId,p?"current":"not-current")}if(d){i.push(d);let p=px.Es(c.targetId,d);s.push(p)}}))}),await Promise.all(o),r.hu.J_(i),await(async function(c,d){let h=Se(c);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>W.forEach(d,y=>W.forEach(y.Is,E=>h.persistence.referenceDelegate.addReference(p,y.targetId,E)).next(()=>W.forEach(y.ds,E=>h.persistence.referenceDelegate.removeReference(p,y.targetId,E)))))}catch(p){if(!Kd(p))throw p;re(u1,"Failed to update sequence numbers: "+p)}for(let p of d){let y=p.targetId;if(!p.fromCache){let E=h.Fs.get(y),k=E.snapshotVersion,P=E.withLastLimboFreeSnapshotVersion(k);h.Fs=h.Fs.insert(y,P)}}})(r.localStore,s))}async function gX(n,e){let t=Se(n);if(!t.currentUser.isEqual(e)){re(y1,"User change. New user:",e.toKey());let r=await Sj(t.localStore,e);t.currentUser=e,(function(s,o){s.Vu.forEach(a=>{a.forEach(c=>{c.reject(new te(q.CANCELLED,o))})}),s.Vu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await ug(t,r.Bs)}}function mX(n,e){let t=Se(n),r=t.Eu.get(e);if(r&&r.lu)return qe().add(r.key);{let i=qe(),s=t.Tu.get(e);if(!s)return i;for(let o of s){let a=t.Pu.get(o);i=i.unionWith(a.view.tu)}return i}}function Bj(n){let e=Se(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Vj.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=mX.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=dX.bind(null,e),e.hu.J_=rX.bind(null,e.eventManager),e.hu.pu=iX.bind(null,e.eventManager),e}function yX(n){let e=Se(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=hX.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=fX.bind(null,e),e}var $j=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=K0(t.databaseInfo.databaseId),this.sharedClientState=this.bu(t),this.persistence=this.Du(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Cu(t,this.localStore),this.indexBackfillerScheduler=this.Fu(t,this.localStore)}Cu(t,r){return null}Fu(t,r){return null}vu(t){return LJ(this.persistence,new mx,t.initialUser,this.serializer)}Du(t){return new E0(fx.Vi,this.serializer)}bu(t){return new _x}async terminate(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}return n.provider={build:()=>new n},n})(),jx=class extends $j{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){ct(this.persistence.referenceDelegate instanceof b0,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new ex(r,e.asyncQueue,t)}Du(e){let t=this.cacheSizeBytes!==void 0?Or.withCacheSize(this.cacheSizeBytes):Or.DEFAULT;return new E0(r=>b0.Vi(r,t),this.serializer)}};var vX=(()=>{class n{async initialize(t,r){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>mU(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=gX.bind(null,this.syncEngine),await nX(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new Mx})()}createDatastore(t){let r=K0(t.databaseInfo.databaseId),i=(function(o){return new Cx(o)})(t.databaseInfo);return(function(o,a,c,d){return new Ax(o,a,c,d)})(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return(function(i,s,o,a,c){return new Rx(i,s,o,a,c)})(this.localStore,this.datastore,t.asyncQueue,r=>mU(this.syncEngine,r,0),(function(){return T0.C()?new T0:new wx})())}createSyncEngine(t,r){return(function(s,o,a,c,d,h,p){let y=new Lx(s,o,a,c,d,h);return p&&(y.fu=!0),y})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}async terminate(){var t,r;await(async function(s){let o=Se(s);re(vl,"RemoteStore shutting down."),o.Ia.add(5),await lg(o),o.Ea.shutdown(),o.Aa.set("Unknown")})(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()}}return n.provider={build:()=>new n},n})();var P0=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Js("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var xa="FirestoreClient",Bx=class{constructor(e,t,r,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=In.UNAUTHENTICATED,this.clientId=Yp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{re(xa,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(re(xa,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Ki;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=g1(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}};async function dA(n,e){n.asyncQueue.verifyOperationInProgress(),re(xa,"Initializing OfflineComponentProvider");let t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async i=>{r.isEqual(i)||(await Sj(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>{Ta("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then(()=>{re("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{Ta("Terminating Firestore due to IndexedDb database deletion failed",i)})}),n._offlineComponents=e}async function vU(n,e){n.asyncQueue.verifyOperationInProgress();let t=await _X(n);re(xa,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>fU(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>fU(e.remoteStore,i)),n._onlineComponents=e}async function _X(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){re(xa,"Using user provided OfflineComponentProvider");try{await dA(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===q.FAILED_PRECONDITION||i.code===q.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;Ta("Error using user provided cache. Falling back to memory cache: "+t),await dA(n,new $j)}}else re(xa,"Using default OfflineComponentProvider"),await dA(n,new jx(void 0));return n._offlineComponents}async function Hj(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(re(xa,"Using user provided OnlineComponentProvider"),await vU(n,n._uninitializedComponentsProvider._online)):(re(xa,"Using default OnlineComponentProvider"),await vU(n,new vX))),n._onlineComponents}function wX(n){return Hj(n).then(e=>e.syncEngine)}async function $x(n){let e=await Hj(n),t=e.eventManager;return t.onListen=sX.bind(null,e.syncEngine),t.onUnlisten=cX.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=oX.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=lX.bind(null,e.syncEngine),t}function IX(n,e,t={}){let r=new Ki;return n.asyncQueue.enqueueAndForget(async()=>(function(s,o,a,c,d){let h=new P0({next:y=>{h.Ou(),o.enqueueAndForget(()=>Oj(s,p)),y.fromCache&&c.source==="server"?d.reject(new te(q.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(y)},error:y=>d.reject(y)}),p=new k0(a,h,{includeMetadataChanges:!0,ka:!0});return Pj(s,p)})(await $x(n),n.asyncQueue,e,t,r)),r.promise}function qj(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var _U=new Map;var zj="firestore.googleapis.com",wU=!0,O0=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new te(q.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=zj,this.ssl=wU}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:wU;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Tj;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<OJ)throw new te(q.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}MY("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=qj((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new te(q.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new te(q.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new te(q.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Hd=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new O0({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new te(q.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new te(q.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new O0(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new hA;switch(r.type){case"firstParty":return new mA(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new te(q.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){let r=_U.get(t);r&&(re("ComponentProvider","Removing Datastore"),_U.delete(t),r.terminate())})(this),Promise.resolve()}};function Gj(n,e,t,r={}){var i;n=Qi(n,Hd);let s=Zo(e),o=n._getSettings(),a=Object.assign(Object.assign({},o),{emulatorOptions:n._getEmulatorOptions()}),c=`${e}:${t}`;s&&(Av(`https://${c}`),xv("Firestore",!0)),o.host!==zj&&o.host!==c&&Ta("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let d=Object.assign(Object.assign({},o),{host:c,ssl:s,emulatorOptions:r});if(!Ui(d,a)&&(n._setSettings(d),r.mockUserToken)){let h,p;if(typeof r.mockUserToken=="string")h=r.mockUserToken,p=In.MOCK_USER;else{h=gO(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let y=r.mockUserToken.sub||r.mockUserToken.user_id;if(!y)throw new te(q.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new In(y)}n._authCredentials=new fA(new c0(h,p))}}var Ra=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},xn=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ia(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}toJSON(){return{type:n._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(cg(t,n._jsonSchema))return new n(e,r||null,new fe(Ct.fromString(t.referencePath)))}};xn._jsonSchemaVersion="firestore/documentReference/1.0",xn._jsonSchema={type:Jt("string",xn._jsonSchemaVersion),referencePath:Jt("string")};var Ia=class n extends Ra{constructor(e,t,r){super(e,t,a1(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new xn(this.firestore,null,new fe(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function Wj(n,e,...t){if(n=hn(n),AU("collection","path",e),n instanceof Hd){let r=Ct.fromString(e,...t);return LL(r),new Ia(n,null,r)}{if(!(n instanceof xn||n instanceof Ia))throw new te(q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Ct.fromString(e,...t));return LL(r),new Ia(n.firestore,null,r)}}function _1(n,e,...t){if(n=hn(n),arguments.length===1&&(e=Yp.newId()),AU("doc","path",e),n instanceof Hd){let r=Ct.fromString(e,...t);return VL(r),new xn(n,null,new fe(r))}{if(!(n instanceof xn||n instanceof Ia))throw new te(q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Ct.fromString(e,...t));return VL(r),new xn(n.firestore,n instanceof Ia?n.converter:null,new fe(r))}}var IU="AsyncQueue",F0=class{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new S0(this,"async_queue_retry"),this.oc=()=>{let r=uA();r&&re(IU,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;let t=uA();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;let t=uA();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});let t=new Ki;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Kd(e))throw e;re(IU,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){let t=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,Js("INTERNAL UNHANDLED ERROR: ",EU(r)),r}).then(r=>(this.nc=!1,r))));return this._c=t,t}enqueueAfterDelay(e,t,r){this.ac(),this.sc.indexOf(e)>-1&&(t=0);let i=kx.createAndSchedule(this,e,t,r,s=>this.lc(s));return this.ec.push(i),i}ac(){this.tc&&ye(47125,{hc:EU(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(let t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){let t=this.ec.indexOf(e);this.ec.splice(t,1)}};function EU(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}function bU(n){return(function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let s of r)if(s in i&&typeof i[s]=="function")return!0;return!1})(n,["next","error","complete"])}var no=class extends Hd{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new F0,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new F0(e),this._firestoreClient=void 0,await e}}};function Kj(n,e){let t=typeof n=="object"?n:Uc(),r=typeof n=="string"?n:e||f0,i=zu(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let s=pO("firestore");s&&Gj(i,...s)}return i}function w1(n){if(n._terminated)throw new te(q.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||EX(n),n._firestoreClient}function EX(n){var e,t,r;let i=n._freezeSettings(),s=(function(a,c,d,h){return new IA(a,c,d,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,qj(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)})(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new Bx(n._authCredentials,n._appCheckCredentials,n._queue,s,n._componentsProvider&&(function(a){let c=a?._online.build();return{_offline:a?._offline.build(c),_online:c}})(n._componentsProvider))}var Ea=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(jn.fromBase64String(e))}catch(t){throw new te(q.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(jn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(cg(e,n._jsonSchema))return n.fromBase64String(e.bytes)}};Ea._jsonSchemaVersion="firestore/bytes/1.0",Ea._jsonSchema={type:Jt("string",Ea._jsonSchemaVersion),bytes:Jt("string")};var qd=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new te(q.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ir(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var zd=class{constructor(e){this._methodName=e}};var ba=class n{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new te(q.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new te(q.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ve(this._lat,e._lat)||Ve(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:n._jsonSchemaVersion}}static fromJSON(e){if(cg(e,n._jsonSchema))return new n(e.latitude,e.longitude)}};ba._jsonSchemaVersion="firestore/geoPoint/1.0",ba._jsonSchema={type:Jt("string",ba._jsonSchemaVersion),latitude:Jt("number"),longitude:Jt("number")};var Ca=class n{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0})(this._values,e._values)}toJSON(){return{type:n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(cg(e,n._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new n(e.vectorValues);throw new te(q.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};Ca._jsonSchemaVersion="firestore/vectorValue/1.0",Ca._jsonSchema={type:Jt("string",Ca._jsonSchemaVersion),vectorValues:Jt("object")};var bX=/^__.*__$/,Hx=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new es(e,this.data,this.fieldMask,t,this.fieldTransforms):new yl(e,this.data,t,this.fieldTransforms)}},V0=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new es(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function Qj(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ye(40011,{Ec:n})}}var qx=class n{constructor(e,t,r,i,s,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Ac(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.fc(e),i}gc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return U0(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(Qj(this.Ec)&&bX.test(e))throw this.wc('Document fields cannot begin and end with "__"')}},zx=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||K0(e)}Dc(e,t,r,i=!1){return new qx({Ec:e,methodName:t,bc:r,path:Ir.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function I1(n){let e=n._freezeSettings(),t=K0(n._databaseId);return new zx(n._databaseId,!!e.ignoreUndefinedProperties,t)}function CX(n,e,t,r,i,s={}){let o=n.Dc(s.merge||s.mergeFields?2:0,e,t,i);E1("Data must be an object, but it was:",o,r);let a=Yj(r,o),c,d;if(s.merge)c=new Fr(o.fieldMask),d=o.fieldTransforms;else if(s.mergeFields){let h=[];for(let p of s.mergeFields){let y=Wx(e,p,t);if(!o.contains(y))throw new te(q.INVALID_ARGUMENT,`Field '${y}' is specified in your field mask but missing from your input data.`);Xj(h,y)||h.push(y)}c=new Fr(h),d=o.fieldTransforms.filter(p=>c.covers(p.field))}else c=null,d=o.fieldTransforms;return new Hx(new wr(a),c,d)}var L0=class n extends zd{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};var Gx=class n extends zd{_toFieldTransform(e){return new FA(e.path,new pl)}isEqual(e){return e instanceof n}};function TX(n,e,t,r){let i=n.Dc(1,e,t);E1("Data must be an object, but it was:",i,r);let s=[],o=wr.empty();ka(r,(c,d)=>{let h=b1(e,c,t);d=hn(d);let p=i.gc(h);if(d instanceof L0)s.push(h);else{let y=dg(d,p);y!=null&&(s.push(h),o.set(h,y))}});let a=new Fr(s);return new V0(o,a,i.fieldTransforms)}function SX(n,e,t,r,i,s){let o=n.Dc(1,e,t),a=[Wx(e,r,t)],c=[i];if(s.length%2!=0)throw new te(q.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let y=0;y<s.length;y+=2)a.push(Wx(e,s[y])),c.push(s[y+1]);let d=[],h=wr.empty();for(let y=a.length-1;y>=0;--y)if(!Xj(d,a[y])){let E=a[y],k=c[y];k=hn(k);let P=o.gc(E);if(k instanceof L0)d.push(E);else{let M=dg(k,P);M!=null&&(d.push(E),h.set(E,M))}}let p=new Fr(d);return new V0(h,p,o.fieldTransforms)}function DX(n,e,t,r=!1){return dg(t,n.Dc(r?4:3,e))}function dg(n,e){if(Jj(n=hn(n)))return E1("Unsupported field value:",e,n),Yj(n,e);if(n instanceof zd)return(function(r,i){if(!Qj(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);let s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(r,i){let s=[],o=0;for(let a of r){let c=dg(a,i.yc(o));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}})(n,e)}return(function(r,i){if((r=hn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return uJ(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let s=Xt.fromDate(r);return{timestampValue:w0(i.serializer,s)}}if(r instanceof Xt){let s=new Xt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:w0(i.serializer,s)}}if(r instanceof ba)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ea)return{bytesValue:vj(i.serializer,r._byteString)};if(r instanceof xn){let s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.wc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:l1(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Ca)return(function(o,a){return{mapValue:{fields:{[n1]:{stringValue:r1},[Od]:{arrayValue:{values:o.toArray().map(d=>{if(typeof d!="number")throw a.wc("VectorValues must only contain numeric values.");return c1(a.serializer,d)})}}}}}})(r,i);throw i.wc(`Unsupported field value: ${H0(r)}`)})(n,e)}function Yj(n,e){let t={};return qU(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ka(n,(r,i)=>{let s=dg(i,e.Vc(r));s!=null&&(t[r]=s)}),{mapValue:{fields:t}}}function Jj(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Xt||n instanceof ba||n instanceof Ea||n instanceof xn||n instanceof zd||n instanceof Ca)}function E1(n,e,t){if(!Jj(t)||!xU(t)){let r=H0(t);throw r==="an object"?e.wc(n+" a custom object"):e.wc(n+" "+r)}}function Wx(n,e,t){if((e=hn(e))instanceof qd)return e._internalPath;if(typeof e=="string")return b1(n,e);throw U0("Field path arguments must be of type string or ",n,!1,void 0,t)}var AX=new RegExp("[~\\*/\\[\\]]");function b1(n,e,t){if(e.search(AX)>=0)throw U0(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new qd(...e.split("."))._internalPath}catch{throw U0(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function U0(n,e,t,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new te(q.INVALID_ARGUMENT,a+n+c)}function Xj(n,e){return n.some(t=>t.isEqual(e))}var j0=class{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new xn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new Kx(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(J0("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},Kx=class extends j0{data(){return super.data()}};function J0(n,e){return typeof e=="string"?b1(n,e):e instanceof qd?e._internalPath:e._delegate._internalPath}function Zj(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new te(q.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var og=class{},B0=class extends og{};function e4(n,e,...t){let r=[];e instanceof og&&r.push(e),r=r.concat(t),(function(s){let o=s.filter(c=>c instanceof Qx).length,a=s.filter(c=>c instanceof $0).length;if(o>1||o>0&&a>0)throw new te(q.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(let i of r)n=i._apply(n);return n}var $0=class n extends B0{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return r4(e._query,t),new Ra(e.firestore,e.converter,PA(e._query,t))}_parse(e){let t=I1(e.firestore);return(function(s,o,a,c,d,h,p){let y;if(d.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new te(q.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){TU(p,h);let k=[];for(let P of p)k.push(CU(c,s,P));y={arrayValue:{values:k}}}else y=CU(c,s,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||TU(p,h),y=DX(a,o,p,h==="in"||h==="not-in");return Yt.create(d,h,y)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function t4(n,e,t){let r=e,i=J0("where",n);return $0._create(i,r,t)}var Qx=class n extends og{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:fi.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:((function(i,s){let o=i,a=s.getFlattenedFilters();for(let c of a)r4(o,c),o=PA(o,c)})(e._query,t),new Ra(e.firestore,e.converter,PA(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var Yx=class n extends B0{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=(function(i,s,o){if(i.startAt!==null)throw new te(q.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new te(q.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new fl(s,o)})(e._query,this._field,this._direction);return new Ra(e.firestore,e.converter,(function(i,s){let o=i.explicitOrderBy.concat([s]);return new Da(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)})(e._query,t))}};function n4(n,e="asc"){let t=e,r=J0("orderBy",n);return Yx._create(r,t)}function CU(n,e,t){if(typeof(t=hn(t))=="string"){if(t==="")throw new te(q.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ij(e)&&t.indexOf("/")!==-1)throw new te(q.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(Ct.fromString(t));if(!fe.isDocumentKey(r))throw new te(q.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return zL(n,new fe(r))}if(t instanceof xn)return zL(n,t._key);throw new te(q.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${H0(t)}.`)}function TU(n,e){if(!Array.isArray(n)||n.length===0)throw new te(q.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function r4(n,e){let t=(function(i,s){for(let o of i)for(let a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null})(n.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new te(q.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new te(q.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var Jx=class{convertValue(e,t="none"){switch(Sa(e)){case 0:return null;case 1:return e.booleanValue;case 2:return bt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Zs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ye(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return ka(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertVectorValue(e){var t,r,i;let s=(i=(r=(t=e.fields)===null||t===void 0?void 0:t[Od].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>bt(o.doubleValue));return new Ca(s)}convertGeoPoint(e){return new ba(bt(e.latitude),bt(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=z0(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Zp(e));default:return null}}convertTimestamp(e){let t=Xs(e);return new Xt(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=Ct.fromString(e);ct(Cj(r),9688,{name:e});let i=new p0(r.get(1),r.get(3)),s=new fe(r.popFirst(5));return i.isEqual(t)||Js(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}};function xX(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var cl=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},ll=class n extends j0{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new Md(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(J0("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new te(q.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,t={};return t.type=n._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};ll._jsonSchemaVersion="firestore/documentSnapshot/1.0",ll._jsonSchema={type:Jt("string",ll._jsonSchemaVersion),bundleSource:Jt("string","DocumentSnapshot"),bundleName:Jt("string"),bundle:Jt("string")};var Md=class extends ll{data(e={}){return super.data(e)}},ul=class n{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new cl(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Md(this._firestore,this._userDataWriter,r.key,r,new cl(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new te(q.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{let c=new Md(i._firestore,i._userDataWriter,a.doc.key,a.doc,new cl(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{let c=new Md(i._firestore,i._userDataWriter,a.doc.key,a.doc,new cl(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),d=-1,h=-1;return a.type!==0&&(d=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:RX(a.type),doc:c,oldIndex:d,newIndex:h}})}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new te(q.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=n._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Yp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let t=[],r=[],i=[];return this.docs.forEach(s=>{s._document!==null&&(t.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function RX(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ye(61501,{type:n})}}ul._jsonSchemaVersion="firestore/querySnapshot/1.0",ul._jsonSchema={type:Jt("string",ul._jsonSchemaVersion),bundleSource:Jt("string","QuerySnapshot"),bundleName:Jt("string"),bundle:Jt("string")};var ag=class extends Jx{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ea(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new xn(this.firestore,null,t)}};function i4(n){n=Qi(n,Ra);let e=Qi(n.firestore,no),t=w1(e),r=new ag(e);return Zj(n._query),IX(t,n._query).then(i=>new ul(e,r,n,i))}function s4(n,e,t,...r){n=Qi(n,xn);let i=Qi(n.firestore,no),s=I1(i),o;return o=typeof(e=hn(e))=="string"||e instanceof qd?SX(s,"updateDoc",n._key,e,t,r):TX(s,"updateDoc",n._key,e),C1(i,[o.toMutation(n._key,Ys.exists(!0))])}function o4(n){return C1(Qi(n.firestore,no),[new tg(n._key,Ys.none())])}function a4(n,e){let t=Qi(n.firestore,no),r=_1(n),i=xX(n.converter,e);return C1(t,[CX(I1(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,Ys.exists(!1))]).then(()=>r)}function c4(n,...e){var t,r,i;n=hn(n);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||bU(e[o])||(s=e[o++]);let a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(bU(e[o])){let p=e[o];e[o]=(t=p.next)===null||t===void 0?void 0:t.bind(p),e[o+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[o+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let c,d,h;if(n instanceof xn)d=Qi(n.firestore,no),h=a1(n._key.path),c={next:p=>{e[o]&&e[o](kX(d,n,p))},error:e[o+1],complete:e[o+2]};else{let p=Qi(n,Ra);d=Qi(p.firestore,no),h=p._query;let y=new ag(d);c={next:E=>{e[o]&&e[o](new ul(d,y,p,E))},error:e[o+1],complete:e[o+2]},Zj(n._query)}return(function(y,E,k,P){let M=new P0(P),H=new k0(E,M,k);return y.asyncQueue.enqueueAndForget(async()=>Pj(await $x(y),H)),()=>{M.Ou(),y.asyncQueue.enqueueAndForget(async()=>Oj(await $x(y),H))}})(w1(d),h,a,c)}function C1(n,e){return(function(r,i){let s=new Ki;return r.asyncQueue.enqueueAndForget(async()=>uX(await wX(r),i,s)),s.promise})(w1(n),e)}function kX(n,e,t){let r=t.docs.get(e._key),i=new ag(n);return new ll(n,i,e._key,r,new cl(t.hasPendingWrites,t.fromCache),e.converter)}function ts(){return new Gx("serverTimestamp")}(function(e,t=!0){(function(i){Gd=i})(ta),ai(new Gn("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),a=new no(new pA(r.getProvider("auth-internal")),new yA(o,r.getProvider("app-check-internal")),(function(d,h){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new te(q.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new p0(d.options.projectId,h)})(o,i),o);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),xt(ML,PL,e),xt(ML,PL,"esm2017")})();var pi=class{constructor(e){return e}},l4="firestore",T1=class{constructor(){return Wu(l4)}};var S1=new ce("angularfire2.firestore-instances");function NX(n,e){let t=tp(l4,n,e);return t&&new pi(t)}function MX(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new pi(r)}}var PX={provide:T1,deps:[[new fr,S1]]},OX={provide:pi,useFactory:NX,deps:[[new fr,S1],ks]};function u4(n,...e){return xt("angularfire",na.full,"fst"),lr([OX,PX,{provide:S1,useFactory:MX(n),multi:!0,deps:[wt,Mt,ra,Bc,[new fr,yp],[new fr,Ku],...e]}])}var Yd=An(a4,!0,2);var ro=An(Wj,!0,2);var Jd=An(o4,!0,2);var Vr=An(_1,!0,2);var D1=An(i4,!0);var d4=An(Kj,!0);var X0=An(c4,!0);var h4=An(n4,!0,2),Z0=An(e4,!0,2);var Na=An(s4,!0,2);var f4=An(t4,!0,2);var Xd={production:!0,firebase:{apiKey:"AIzaSyA3FfYeMQ9WiWHlNKU1wsaMt8v3TOuNn_I",authDomain:"homeneeds-21223.firebaseapp.com",projectId:"homeneeds-21223",storageBucket:"homeneeds-21223.firebasestorage.app",messagingSenderId:"278167644572",appId:"1:278167644572:web:c5ca2a5c3e4da71fda4059",measurementId:"G-HXX054VJJ6"},apiUrl:"https://home-needs-psi.vercel.app"};var E4=(()=>{class n{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,r){this._renderer=t,this._elementRef=r}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(r){return new(r||n)(Ue(Fi),Ue(Zn))};static \u0275dir=Sn({type:n})}return n})(),M1=(()=>{class n extends E4{static \u0275fac=(()=>{let t;return function(i){return(t||(t=bs(n)))(i||n)}})();static \u0275dir=Sn({type:n,features:[Ts]})}return n})(),iw=new ce("");var FX={provide:iw,useExisting:_s(()=>ns),multi:!0};function VX(){let n=Rr()?Rr().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var LX=new ce(""),ns=(()=>{class n extends E4{_compositionMode;_composing=!1;constructor(t,r,i){super(t,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!VX())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(r){return new(r||n)(Ue(Fi),Ue(Zn),Ue(LX,8))};static \u0275dir=Sn({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&Q("input",function(o){return i._handleInput(o.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(o){return i._compositionEnd(o.target.value)})},standalone:!1,features:[Au([FX]),Ts]})}return n})();var UX=new ce(""),jX=new ce("");function b4(n){return n!=null}function C4(n){return Go(n)?Ne(n):n}function T4(n){let e={};return n.forEach(t=>{e=t!=null?B(B({},e),t):e}),Object.keys(e).length===0?null:e}function S4(n,e){return e.map(t=>t(n))}function BX(n){return!n.validate}function D4(n){return n.map(e=>BX(e)?e:t=>e.validate(t))}function $X(n){if(!n)return null;let e=n.filter(b4);return e.length==0?null:function(t){return T4(S4(t,e))}}function A4(n){return n!=null?$X(D4(n)):null}function HX(n){if(!n)return null;let e=n.filter(b4);return e.length==0?null:function(t){let r=S4(t,e).map(C4);return Po(r).pipe(_e(T4))}}function x4(n){return n!=null?HX(D4(n)):null}function p4(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function qX(n){return n._rawValidators}function zX(n){return n._rawAsyncValidators}function A1(n){return n?Array.isArray(n)?n:[n]:[]}function tw(n,e){return Array.isArray(n)?n.includes(e):n===e}function g4(n,e){let t=A1(e);return A1(n).forEach(i=>{tw(t,i)||t.push(i)}),t}function m4(n,e){return A1(e).filter(t=>!tw(n,t))}var nw=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=A4(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=x4(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},x1=class extends nw{name;get formDirective(){return null}get path(){return null}},mg=class extends nw{_parent=null;name=null;valueAccessor=null},R1=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}};var Ma=(()=>{class n extends R1{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(Ue(mg,2))};static \u0275dir=Sn({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&On("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[Ts]})}return n})();var hg="VALID",ew="INVALID",Zd="PENDING",fg="DISABLED",wl=class{},rw=class extends wl{value;source;constructor(e,t){super(),this.value=e,this.source=t}},pg=class extends wl{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}},gg=class extends wl{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}},eh=class extends wl{status;source;constructor(e,t){super(),this.status=e,this.source=t}};var k1=class extends wl{source;constructor(e){super(),this.source=e}};function GX(n){return(sw(n)?n.validators:n)||null}function WX(n){return Array.isArray(n)?A4(n):n||null}function KX(n,e){return(sw(e)?e.asyncValidators:n)||null}function QX(n){return Array.isArray(n)?x4(n):n||null}function sw(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}var N1=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return ln(this.statusReactive)}set status(e){ln(()=>this.statusReactive.set(e))}_status=ot(()=>this.statusReactive());statusReactive=Ee(void 0);get valid(){return this.status===hg}get invalid(){return this.status===ew}get pending(){return this.status==Zd}get disabled(){return this.status===fg}get enabled(){return this.status!==fg}errors;get pristine(){return ln(this.pristineReactive)}set pristine(e){ln(()=>this.pristineReactive.set(e))}_pristine=ot(()=>this.pristineReactive());pristineReactive=Ee(!0);get dirty(){return!this.pristine}get touched(){return ln(this.touchedReactive)}set touched(e){ln(()=>this.touchedReactive.set(e))}_touched=ot(()=>this.touchedReactive());touchedReactive=Ee(!1);get untouched(){return!this.touched}_events=new gt;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(g4(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(g4(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(m4(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(m4(e,this._rawAsyncValidators))}hasValidator(e){return tw(this._rawValidators,e)}hasAsyncValidator(e){return tw(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(ie(B({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new gg(!0,r))}markAllAsDirty(e={}){this.markAsDirty({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsDirty(e))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new gg(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(ie(B({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new pg(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new pg(!0,r))}markAsPending(e={}){this.status=Zd;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new eh(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(ie(B({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=fg,this.errors=null,this._forEachChild(i=>{i.disable(ie(B({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new rw(this.value,r)),this._events.next(new eh(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(ie(B({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=hg,this._forEachChild(r=>{r.enable(ie(B({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(ie(B({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===hg||this.status===Zd)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new rw(this.value,t)),this._events.next(new eh(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(ie(B({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?fg:hg}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=Zd,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1,shouldHaveEmitted:e!==!1};let r=C4(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new eh(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new Dt,this.statusChanges=new Dt}_calculateStatus(){return this._allControlsDisabled()?fg:this.errors?ew:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Zd)?Zd:this._anyControlsHaveStatus(ew)?ew:hg}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new pg(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new gg(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){sw(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=WX(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=QX(this._rawAsyncValidators)}};var R4=new ce("",{factory:()=>P1}),P1="always";function YX(n,e){return[...e.path,n]}function JX(n,e,t=P1){ZX(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),eZ(n,e),nZ(n,e),tZ(n,e),XX(n,e)}function y4(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function XX(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function ZX(n,e){let t=qX(n);e.validator!==null?n.setValidators(p4(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=zX(n);e.asyncValidator!==null?n.setAsyncValidators(p4(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();y4(e._rawValidators,i),y4(e._rawAsyncValidators,i)}function eZ(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&k4(n,e)})}function tZ(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&k4(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function k4(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function nZ(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function rZ(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function iZ(n){return Object.getPrototypeOf(n.constructor)===M1}function sZ(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(s=>{s.constructor===ns?t=s:iZ(s)?r=s:i=s}),i||r||t||null}function v4(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function _4(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var oZ=class extends N1{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,r){super(GX(t),KX(r,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),sw(t)&&(t.nonNullable||t.initialValueIsDefault)&&(_4(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),t.overwriteDefaultValue&&(this.defaultValue=this.value),this._pendingChange=!1,t?.emitEvent!==!1&&this._events.next(new k1(this))}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){v4(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){v4(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){_4(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var aZ={provide:mg,useExisting:_s(()=>io)},w4=Promise.resolve(),io=(()=>{class n extends mg{_changeDetectorRef;callSetDisabledState;control=new oZ;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new Dt;constructor(t,r,i,s,o,a){super(),this._changeDetectorRef=o,this.callSetDisabledState=a,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=sZ(this,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),rZ(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){JX(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){w4.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&xu(r);w4.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?YX(t,this._parent):[t]}static \u0275fac=function(r){return new(r||n)(Ue(x1,9),Ue(UX,10),Ue(jX,10),Ue(iw,10),Ue(Ko,8),Ue(R4,8))};static \u0275dir=Sn({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[Au([aZ]),Ts,Es]})}return n})();var cZ={provide:iw,useExisting:_s(()=>Pa),multi:!0};function N4(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function lZ(n){return n.split(":")[0]}var Pa=(()=>{class n extends M1{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;appRefInjector=j(Wo).injector;destroyRef=j(xr);cdr=j(Ko);_queuedWrite=!1;_writeValueAfterRender(){this._queuedWrite||this.appRefInjector.destroyed||(this._queuedWrite=!0,Dy({write:()=>{this.destroyRef.destroyed||(this._queuedWrite=!1,this.writeValue(this.value))}},{injector:this.appRefInjector}))}writeValue(t){this.cdr.markForCheck(),this.value=t;let r=this._getOptionId(t),i=N4(r,t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){let r=lZ(t);return this._optionMap.has(r)?this._optionMap.get(r):t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=bs(n)))(i||n)}})();static \u0275dir=Sn({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&Q("change",function(o){return i.onChange(o.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[Au([cZ]),Ts]})}return n})(),th=(()=>{class n{_element;_renderer;_select;id;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(N4(this.id,t)),this._select._writeValueAfterRender())}set value(t){this._setElementValue(t),this._select&&this._select._writeValueAfterRender()}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select._writeValueAfterRender())}static \u0275fac=function(r){return new(r||n)(Ue(Zn),Ue(Fi),Ue(Pa,9))};static \u0275dir=Sn({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})(),uZ={provide:iw,useExisting:_s(()=>M4),multi:!0};function I4(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function dZ(n){return n.split(":")[0]}var M4=(()=>{class n extends M1{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){this.value=t;let r;if(Array.isArray(t)){let i=t.map(s=>this._getOptionId(s));r=(s,o)=>{s._setSelected(i.indexOf(o.toString())>-1)}}else r=(i,s)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{let i=[],s=r.selectedOptions;if(s!==void 0){let o=s;for(let a=0;a<o.length;a++){let c=o[a],d=this._getOptionValue(c.value);i.push(d)}}else{let o=r.options;for(let a=0;a<o.length;a++){let c=o[a];if(c.selected){let d=this._getOptionValue(c.value);i.push(d)}}}this.value=i,t(i)}}_registerOption(t){let r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){let r=dZ(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=bs(n)))(i||n)}})();static \u0275dir=Sn({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&Q("change",function(o){return i.onChange(o.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[Au([uZ]),Ts]})}return n})(),nh=(()=>{class n{_element;_renderer;_select;id;_value;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(I4(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(I4(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||n)(Ue(Zn),Ue(Fi),Ue(M4,9))};static \u0275dir=Sn({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})();var hZ=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Cs({type:n});static \u0275inj=Ti({})}return n})();var Oa=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:R4,useValue:t.callSetDisabledState??P1}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Cs({type:n});static \u0275inj=Ti({imports:[hZ]})}return n})();var fZ="firebase",pZ="12.6.0";oa(fZ,pZ,"app");var Lr=class n{firestore=j(pi);usersCollection=ro(this.firestore,"users");users=Ee([]);currentUser=Ee(null);loading=Ee(!0);error=Ee(null);usersSubject=new dt([]);users$=this.usersSubject.asObservable();migrationInProgress=Ee(!1);constructor(){this.subscribeToUsers(),this.restoreSession()}subscribeToUsers(){let e=Z0(this.usersCollection,h4("name"));X0(e,t=>{let r=t.docs.map(i=>{let s=i.data();return ie(B({id:i.id},s),{userId:s.userId||null,lastActive:s.lastActive?.toDate?s.lastActive.toDate():s.lastActive,createdAt:s.createdAt?.toDate?s.createdAt.toDate():s.createdAt})});this.users.set(r),this.usersSubject.next(r),this.updateCurrentUserReference(r),this.loading.set(!1),this.migrateUsersWithoutUserId(r).subscribe()},t=>{console.error("Error fetching users",t),this.error.set(t.message),this.loading.set(!1)})}migrateUsersWithoutUserId(e){if(this.migrationInProgress())return de(void 0);let t=e.filter(i=>!i.userId);if(t.length===0)return de(void 0);this.migrationInProgress.set(!0),console.log(`\u{1F504} Migrating ${t.length} user(s) without userId...`);let r=t.map(i=>{let s=this.generateUserId();return console.log(`  \u2192 Migrating user "${i.name}" (${i.id}) \u2192 userId: ${s}`),this.updateUser$(i.id,{userId:s}).pipe(_e(()=>({name:i.name,userId:s})))});return Ne(Promise.all(r.map(i=>i.toPromise()))).pipe(mt(i=>{console.log(`\u2705 Successfully migrated ${i.length} user(s):`,i)}),fs(i=>(console.error("\u274C Error during user migration:",i),de(void 0))),mt(()=>{this.migrationInProgress.set(!1)}),_e(()=>{}))}restoreSession(){localStorage.getItem("currentUserId")&&this.users().length>0&&this.updateCurrentUserReference(this.users())}updateCurrentUserReference(e){let t=localStorage.getItem("currentUserId");if(t){let r=e.find(i=>i.id===t);r&&(this.currentUser.set(r),r.status!=="active"&&this.updateUser$(r.id,{status:"active",lastActive:ts()}).subscribe())}}login$(e){return(e.userId?de(void 0):this.updateUser$(e.id,{userId:this.generateUserId()}).pipe(mt(()=>e=ie(B({},e),{userId:this.generateUserId()})))).pipe(Cr(()=>(localStorage.setItem("currentUserId",e.id),this.currentUser.set(e),this.updateUser$(e.id,{status:"active",lastActive:ts()}))))}async login(e){if(!e.userId){let t=this.generateUserId();await this.updateUser(e.id,{userId:t}),e=ie(B({},e),{userId:t})}localStorage.setItem("currentUserId",e.id),this.currentUser.set(e),await this.updateUser(e.id,{status:"active",lastActive:ts()})}logout$(){let e=this.currentUser();return e?this.updateUser$(e.id,{status:"offline",lastActive:ts()}).pipe(mt(()=>{localStorage.removeItem("currentUserId"),this.currentUser.set(null)})):(localStorage.removeItem("currentUserId"),this.currentUser.set(null),de(void 0))}async logout(){let e=this.currentUser();e&&await this.updateUser(e.id,{status:"offline",lastActive:ts()}),localStorage.removeItem("currentUserId"),this.currentUser.set(null)}createUser$(e){let t=this.generateUserId();return Ne(Yd(this.usersCollection,ie(B({},e),{userId:t,status:e.status||"pending",lastActive:ts(),createdAt:ts()}))).pipe(_e(()=>{}))}async createUser(e){let t=this.generateUserId();await Yd(this.usersCollection,ie(B({},e),{userId:t,status:e.status||"pending",lastActive:ts(),createdAt:ts()}))}generateUserId(){let e=Date.now().toString(36),t=Math.random().toString(36).substring(2,8);return`user_${e}_${t}`}updateUser$(e,t){return Ne(Na(Vr(this.firestore,"users",e),t))}async updateUser(e,t){await Na(Vr(this.firestore,"users",e),t)}deleteUser$(e){return Ne(Jd(Vr(this.firestore,"users",e)))}async deleteUser(e){await Jd(Vr(this.firestore,"users",e))}manualMigrateAllUsers$(){let t=this.users().filter(o=>!o.userId);if(t.length===0)return console.log("\u2705 All users already have userId assigned."),de({migrated:0,errors:0});let r=0,i=0,s=t.map(o=>{let a=this.generateUserId();return this.updateUser$(o.id,{userId:a}).pipe(mt(()=>{console.log(`\u2705 Migrated user "${o.name}" \u2192 ${a}`),r++}),fs(c=>(console.error(`\u274C Failed to migrate user "${o.name}":`,c),i++,de(void 0))))});return Ne(Promise.all(s.map(o=>o.toPromise()))).pipe(_e(()=>({migrated:r,errors:i})))}async manualMigrateAllUsers(){let t=this.users().filter(s=>!s.userId);if(t.length===0)return console.log("\u2705 All users already have userId assigned."),{migrated:0,errors:0};let r=0,i=0;for(let s of t)try{let o=this.generateUserId();await this.updateUser(s.id,{userId:o}),console.log(`\u2705 Migrated user "${s.name}" \u2192 ${o}`),r++}catch(o){console.error(`\u274C Failed to migrate user "${s.name}":`,o),i++}return{migrated:r,errors:i}}getUsersNeedingMigration(){return this.users().filter(e=>!e.userId)}static \u0275fac=function(t){return new(t||n)};static \u0275prov=se({token:n,factory:n.\u0275fac,providedIn:"root"})};var rs=class n{userService=j(Lr);firestore;TASKS_COLLECTION="overview_tasks";tasksSignal=Ee([]);tasks=ot(()=>this.tasksSignal());tasksSubject=new dt([]);tasks$=this.tasksSubject.asObservable();unsubTasks=null;constructor(){let e=lp(Xd.firebase);this.firestore=Z_(e),Ni(()=>{let t=this.userService.currentUser();this.cleanupSubscription(),t&&t.userId?(console.log("\u{1F4CB} Loading tasks for user:",t.userId),this.initRealtimeData(t.userId)):(console.log("\u{1F512} No user logged in - clearing task data"),this.tasksSignal.set([]),this.tasksSubject.next([]))})}getCurrentUserId(){return this.userService.currentUser()?.userId||""}cleanupSubscription(){this.unsubTasks&&(this.unsubTasks(),this.unsubTasks=null)}initRealtimeData(e){if(!e)return;let t=Bp(Up(this.firestore,this.TASKS_COLLECTION),$p("userId","==",e));this.unsubTasks=Hp(t,r=>{let i=r.docs.map(s=>{let o=s.data(),a=o.dueDate&&typeof o.dueDate.toDate=="function"?o.dueDate.toDate():o.dueDate?new Date(o.dueDate):null,c=o.createdAt&&typeof o.createdAt.toDate=="function"?o.createdAt.toDate():new Date;return ie(B({},o),{dueDate:a,createdAt:c})});i.sort((s,o)=>new Date(o.createdAt).getTime()-new Date(s.createdAt).getTime()),this.tasksSignal.set(i),this.tasksSubject.next(i)})}createTask$(e){let t=this.getCurrentUserId();if(!t)return Ei(()=>new Error("User must be logged in to create tasks"));let r=`task_${Date.now()}_${Math.random().toString(36).substr(2,5)}`;return Ne(Ws(Wt(this.firestore,this.TASKS_COLLECTION,r),ie(B({},e),{id:r,userId:t,createdAt:new Date}))).pipe(_e(()=>r))}async createTask(e){let t=this.getCurrentUserId();if(!t)throw new Error("User must be logged in to create tasks");let r=`task_${Date.now()}_${Math.random().toString(36).substr(2,5)}`;await Ws(Wt(this.firestore,this.TASKS_COLLECTION,r),ie(B({},e),{id:r,userId:t,createdAt:new Date}))}updateTask$(e,t){return Ne(wa(Wt(this.firestore,this.TASKS_COLLECTION,e),t))}async updateTask(e,t){await wa(Wt(this.firestore,this.TASKS_COLLECTION,e),t)}deleteTask$(e){return Ne(sl(Wt(this.firestore,this.TASKS_COLLECTION,e)))}async deleteTask(e){await sl(Wt(this.firestore,this.TASKS_COLLECTION,e))}ngOnDestroy(){this.cleanupSubscription()}static \u0275fac=function(t){return new(t||n)};static \u0275prov=se({token:n,factory:n.\u0275fac,providedIn:"root"})};var yg=["bg-red-500","bg-orange-500","bg-amber-500","bg-green-500","bg-emerald-500","bg-teal-500","bg-cyan-500","bg-blue-500","bg-indigo-500","bg-violet-500","bg-purple-500","bg-fuchsia-500","bg-pink-500","bg-rose-500","bg-slate-500"],P4=[{id:"groceries",label:"Groceries",color:"bg-amber-400",textColor:"text-amber-400"},{id:"chores",label:"Chores",color:"bg-blue-400",textColor:"text-blue-400"},{id:"repairs",label:"Repairs",color:"bg-purple-500",textColor:"text-purple-400"},{id:"other",label:"Other",color:"bg-slate-400",textColor:"text-slate-400"}];var Ur=class n{dialog=Ee(null);confirm$(e,t="Confirm"){let r=new gt;return this.dialog.set({message:e,title:t,type:"confirm",confirmText:"Confirm",cancelText:"Cancel",result$:r}),r.pipe(Xn(1))}confirm(e,t="Confirm"){return mm(this.confirm$(e,t))}alert$(e,t="Alert"){let r=new gt;return this.dialog.set({message:e,title:t,type:"info",confirmText:"OK",result$:r}),r.pipe(Xn(1))}alert(e,t="Alert"){return mm(this.alert$(e,t))}success$(e,t="Success"){let r=new gt;return this.dialog.set({message:e,title:t,type:"success",confirmText:"OK",result$:r}),r.pipe(Xn(1))}error$(e,t="Error"){let r=new gt;return this.dialog.set({message:e,title:t,type:"error",confirmText:"OK",result$:r}),r.pipe(Xn(1))}close(e){let t=this.dialog();t&&(t.result$.next(e),t.result$.complete(),this.dialog.set(null))}static \u0275fac=function(t){return new(t||n)};static \u0275prov=se({token:n,factory:n.\u0275fac,providedIn:"root"})};var rh=class n{firestore=j(pi);userService=j(Lr);COLLECTION="assignees";assigneesSignal=Ee([]);assignees=ot(()=>this.assigneesSignal());assigneesSubject=new dt([]);assignees$=this.assigneesSubject.asObservable();unsubAssignees=null;constructor(){Ni(()=>{let e=this.userService.currentUser();this.cleanupSubscription(),e&&e.userId?(console.log("\u{1F465} Loading assignees for user:",e.userId),this.subscribeToAssignees(e.userId)):(console.log("\u{1F512} No user logged in - clearing assignee data"),this.assigneesSignal.set([]),this.assigneesSubject.next([]))})}getCurrentUserId(){return this.userService.currentUser()?.userId||""}cleanupSubscription(){this.unsubAssignees&&(this.unsubAssignees(),this.unsubAssignees=null)}subscribeToAssignees(e){if(!e)return;let t=Z0(ro(this.firestore,this.COLLECTION),f4("userId","==",e));this.unsubAssignees=X0(t,r=>{let i=r.docs.map(s=>B({id:s.id},s.data()));i.sort((s,o)=>s.name.localeCompare(o.name)),this.assigneesSignal.set(i),this.assigneesSubject.next(i)},r=>{console.error("Error fetching assignees:",r)})}createAssignee$(e,t){let r=this.getCurrentUserId();if(!r)return Ei(()=>new Error("User must be logged in to create assignees"));let i=e.charAt(0).toUpperCase();return Ne(Yd(ro(this.firestore,this.COLLECTION),{name:e,color:t,initial:i,userId:r})).pipe(_e(s=>s.id))}async createAssignee(e,t){let r=this.getCurrentUserId();if(!r)throw new Error("User must be logged in to create assignees");let i=e.charAt(0).toUpperCase();await Yd(ro(this.firestore,this.COLLECTION),{name:e,color:t,initial:i,userId:r})}updateAssignee$(e,t){let r=B({},t);return t.name&&(r.initial=t.name.charAt(0).toUpperCase()),Ne(Na(Vr(this.firestore,this.COLLECTION,e),r))}async updateAssignee(e,t){t.name&&(t.initial=t.name.charAt(0).toUpperCase()),await Na(Vr(this.firestore,this.COLLECTION,e),t)}deleteAssignee$(e){return Ne(Jd(Vr(this.firestore,this.COLLECTION,e)))}async deleteAssignee(e){await Jd(Vr(this.firestore,this.COLLECTION,e))}getAssignee(e){return this.assigneesSignal().find(t=>t.id===e)}ngOnDestroy(){this.cleanupSubscription()}static \u0275fac=function(t){return new(t||n)};static \u0275prov=se({token:n,factory:n.\u0275fac,providedIn:"root"})};var ir=class n{loadingSignal=Ee({isLoading:!1});loadingSubject=new dt({isLoading:!1});loading$=this.loadingSubject.asObservable();activeRequests=0;loading=this.loadingSignal.asReadonly();get isLoading(){return this.loadingSignal().isLoading}show(e){this.activeRequests++;let t={isLoading:!0,message:e};this.loadingSignal.set(t),this.loadingSubject.next(t)}hide(){if(this.activeRequests=Math.max(0,this.activeRequests-1),this.activeRequests===0){let e={isLoading:!1};this.loadingSignal.set(e),this.loadingSubject.next(e)}}forceHide(){this.activeRequests=0;let e={isLoading:!1};this.loadingSignal.set(e),this.loadingSubject.next(e)}setMessage(e){let t=this.loadingSignal();if(t.isLoading){let r=ie(B({},t),{message:e});this.loadingSignal.set(r),this.loadingSubject.next(r)}}setProgress(e){let t=this.loadingSignal();if(t.isLoading){let r=ie(B({},t),{progress:Math.min(100,Math.max(0,e))});this.loadingSignal.set(r),this.loadingSubject.next(r)}}withLoading(e){return t=>(this.show(e),t.pipe(su(()=>this.hide())))}async wrapPromise(e,t){this.show(t);try{return await e}finally{this.hide()}}static \u0275fac=function(t){return new(t||n)};static \u0275prov=se({token:n,factory:n.\u0275fac,providedIn:"root"})};function gZ(n,e){if(n&1&&(Dn(0,"p",5),N(1),qn()),n&2){let t=$(2);F(),xe(t.loadingService.loading().message)}}function mZ(n,e){if(n&1&&(Dn(0,"div",6),gf(1,"div",7),qn(),Dn(2,"p",8),N(3),qn()),n&2){let t=$(2);F(),Du("width",t.loadingService.loading().progress,"%"),F(2),Xe("",t.loadingService.loading().progress,"%")}}function yZ(n,e){if(n&1&&(Dn(0,"div",0)(1,"div",1)(2,"div",2),gf(3,"div",3)(4,"div",3)(5,"div",3),Dn(6,"span",4),N(7,"home"),qn()(),le(8,gZ,2,1,"p",5),le(9,mZ,4,3),qn()()),n&2){let t=$();Fe("@fadeInOut",void 0),F(8),ue(t.loadingService.loading().message?8:-1),F(),ue(t.loadingService.loading().progress!==void 0?9:-1)}}var aw=class n{loadingService=j(ir);static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Tn({type:n,selectors:[["app-loading"]],decls:1,vars:1,consts:[[1,"loading-overlay"],[1,"loading-container"],[1,"spinner"],[1,"spinner-ring"],[1,"material-symbols-outlined","spinner-icon"],[1,"loading-message"],[1,"progress-container"],[1,"progress-bar"],[1,"progress-text"]],template:function(t,r){t&1&&le(0,yZ,10,3,"div",0),t&2&&ue(r.loadingService.loading().isLoading?0:-1)},dependencies:[rr],styles:[".loading-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;z-index:9999;display:flex;align-items:center;justify-content:center;background:#111317d9;-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px);animation:_ngcontent-%COMP%_fadeIn .2s ease}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}.loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:1.5rem}.spinner[_ngcontent-%COMP%]{position:relative;width:80px;height:80px}.spinner-ring[_ngcontent-%COMP%]{position:absolute;inset:0;border-radius:50%;border:3px solid transparent;animation:_ngcontent-%COMP%_spin 1.5s linear infinite}.spinner-ring[_ngcontent-%COMP%]:nth-child(1){border-top-color:#9fe870;animation-delay:0s}.spinner-ring[_ngcontent-%COMP%]:nth-child(2){inset:8px;border-right-color:#9fe870;animation-delay:.15s;animation-direction:reverse}.spinner-ring[_ngcontent-%COMP%]:nth-child(3){inset:16px;border-bottom-color:#9fe870;animation-delay:.3s}.spinner-icon[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);font-size:28px;color:#9fe870;animation:_ngcontent-%COMP%_pulse 1.5s ease-in-out infinite}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}@keyframes _ngcontent-%COMP%_pulse{0%,to{opacity:1;transform:translate(-50%,-50%) scale(1)}50%{opacity:.6;transform:translate(-50%,-50%) scale(.9)}}.loading-message[_ngcontent-%COMP%]{color:#fff;font-size:1rem;font-weight:500;text-align:center;max-width:280px;animation:_ngcontent-%COMP%_fadeIn .3s ease .1s both}.progress-container[_ngcontent-%COMP%]{width:200px;height:4px;background:#ffffff1a;border-radius:9999px;overflow:hidden}.progress-bar[_ngcontent-%COMP%]{height:100%;background:linear-gradient(90deg,#9fe870,#7dd956);border-radius:9999px;transition:width .3s ease}.progress-text[_ngcontent-%COMP%]{color:#9ea7b7;font-size:.75rem;font-weight:600}"]})};var vZ=(n,e)=>e.id;function _Z(n,e){if(n&1){let t=je();x(0,"button",17),Q("click",function(){let i=X(t).$implicit,s=$();return Z(s.assigneeColor=i)}),R()}if(n&2){let t=e.$implicit,r=$();st(t),On("ring-slate-400",r.assigneeColor===t)("ring-transparent",r.assigneeColor!==t)}}function wZ(n,e){if(n&1){let t=je();x(0,"button",18),Q("click",function(){X(t);let i=$();return Z(i.resetForm())}),N(1," Cancel "),R()}}function IZ(n,e){if(n&1){let t=je();x(0,"div",15)(1,"div",19)(2,"div",20),N(3),R(),x(4,"span",21),N(5),R()(),x(6,"div",22)(7,"button",23),Q("click",function(){let i=X(t).$implicit,s=$();return Z(s.editAssignee(i))}),x(8,"span",24),N(9,"edit"),R()(),x(10,"button",25),Q("click",function(){let i=X(t).$implicit,s=$();return Z(s.deleteAssignee(i.id))}),x(11,"span",24),N(12,"delete"),R()()()()}if(n&2){let t=e.$implicit;F(2),st(t.color),F(),Xe(" ",t.initial," "),F(2),xe(t.name)}}function EZ(n,e){n&1&&(x(0,"div",16),N(1,"No assignees yet"),R())}var cw=class n{close=new Dt;assigneeService=j(rh);overviewService=j(rs);dialogService=j(Ur);loadingService=j(ir);assignees=this.assigneeService.assignees;assigneeColors=yg;editingAssignee=null;assigneeName="";assigneeColor=yg[0];onClose(){this.close.emit()}resetForm(){this.editingAssignee=null,this.assigneeName="",this.assigneeColor=this.assigneeColors[0]}editAssignee(e){this.editingAssignee=e,this.assigneeName=e.name,this.assigneeColor=e.color}saveAssignee(){this.assigneeName.trim()&&(this.loadingService.show("Saving..."),this.editingAssignee?this.assigneeService.updateAssignee$(this.editingAssignee.id,{name:this.assigneeName,color:this.assigneeColor}).subscribe({next:()=>{this.loadingService.hide(),this.resetForm()},error:()=>this.loadingService.hide()}):this.assigneeService.createAssignee$(this.assigneeName,this.assigneeColor).subscribe({next:()=>{this.loadingService.hide(),this.resetForm()},error:()=>this.loadingService.hide()}))}deleteAssignee(e){if(this.overviewService.tasks().filter(r=>r.assigneeId===e).length>0){this.dialogService.alert$("Cannot delete assignee with active tasks.").subscribe();return}this.dialogService.confirm$("Delete this assignee?","Confirm").subscribe(r=>{r&&(this.loadingService.show("Deleting..."),this.assigneeService.deleteAssignee$(e).subscribe({next:()=>this.loadingService.hide(),error:()=>this.loadingService.hide()}))})}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Tn({type:n,selectors:[["app-assignee-management"]],outputs:{close:"close"},decls:22,vars:5,consts:[[1,"fixed","inset-0","z-[60]","flex","items-center","justify-center","p-4","bg-black/50","backdrop-blur-sm","animate-in","fade-in","duration-200"],[1,"bg-white","dark:bg-surface-dark","w-full","max-w-sm","rounded-2xl","shadow-xl","overflow-hidden","animate-in","zoom-in-95","duration-200","border","border-slate-200","dark:border-border-dark","flex","flex-col","max-h-[80vh]"],[1,"p-4","border-b","border-slate-100","dark:border-border-dark","flex","justify-between","items-center","bg-slate-50/50","dark:bg-black/20"],[1,"font-bold","text-lg","text-slate-900","dark:text-white"],[1,"p-1","rounded-full","hover:bg-slate-200","dark:hover:bg-border-dark","transition-colors",3,"click"],[1,"material-symbols-outlined"],[1,"flex-1","overflow-y-auto","p-4","space-y-3"],[1,"bg-slate-50","dark:bg-black/20","p-3","rounded-xl","space-y-3"],["type","text","placeholder","Name (e.g. Alex)",1,"w-full","h-10","px-3","rounded-lg","bg-white","dark:bg-surface-dark","border","border-slate-200","dark:border-border-dark","text-sm","focus:border-primary","focus:ring-1","focus:ring-primary","outline-none","text-slate-900","dark:text-white",3,"ngModelChange","ngModel"],[1,"flex","flex-wrap","gap-2"],[1,"size-6","rounded-full","transition-transform","hover:scale-110","ring-2","ring-offset-1","dark:ring-offset-surface-dark",3,"class","ring-slate-400","ring-transparent"],[1,"flex","justify-end","gap-2"],[1,"text-xs","text-slate-500","font-bold","hover:text-slate-700","dark:hover:text-slate-300","px-2"],[1,"h-8","px-4","bg-primary","text-slate-900","rounded-lg","text-xs","font-bold","hover:bg-primary-hover","disabled:opacity-50","disabled:cursor-not-allowed","transition-colors",3,"click","disabled"],[1,"space-y-2"],[1,"flex","items-center","justify-between","p-2","rounded-lg","hover:bg-slate-50","dark:hover:bg-white/5","group","border","border-transparent","hover:border-slate-100","dark:hover:border-border-dark","transition-all"],[1,"text-center","py-6","text-slate-400","text-sm"],[1,"size-6","rounded-full","transition-transform","hover:scale-110","ring-2","ring-offset-1","dark:ring-offset-surface-dark",3,"click"],[1,"text-xs","text-slate-500","font-bold","hover:text-slate-700","dark:hover:text-slate-300","px-2",3,"click"],[1,"flex","items-center","gap-3"],[1,"size-8","rounded-full","flex","items-center","justify-center","text-xs","font-bold","text-white","shadow-sm"],[1,"text-sm","font-bold","text-slate-900","dark:text-white"],[1,"flex","gap-1","opacity-0","group-hover:opacity-100","transition-opacity"],[1,"size-7","rounded","bg-white","dark:bg-black/20","border","border-slate-200","dark:border-border-dark","flex","items-center","justify-center","text-slate-500","hover:text-primary","transition-colors",3,"click"],[1,"material-symbols-outlined","text-[14px]"],[1,"size-7","rounded","bg-white","dark:bg-black/20","border","border-slate-200","dark:border-border-dark","flex","items-center","justify-center","text-slate-500","hover:text-red-500","transition-colors",3,"click"]],template:function(t,r){t&1&&(x(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),N(4,"Manage Assignees"),R(),x(5,"button",4),Q("click",function(){return r.onClose()}),x(6,"span",5),N(7,"close"),R()()(),x(8,"div",6)(9,"div",7)(10,"input",8),dn("ngModelChange",function(s){return gn(r.assigneeName,s)||(r.assigneeName=s),s}),R(),x(11,"div",9),Tt(12,_Z,1,6,"button",10,Tu),R(),x(14,"div",11),le(15,wZ,2,0,"button",12),x(16,"button",13),Q("click",function(){return r.saveAssignee()}),N(17),R()()(),x(18,"div",14),Tt(19,IZ,13,4,"div",15,vZ,!1,EZ,2,0,"div",16),R()()()()),t&2&&(F(10),un("ngModel",r.assigneeName),F(2),St(r.assigneeColors),F(3),ue(r.editingAssignee?15:-1),F(),Fe("disabled",!r.assigneeName.trim()),F(),Xe(" ",r.editingAssignee?"Update":"Add"," "),F(2),St(r.assignees()))},dependencies:[rr,Oa,ns,Ma,io],encapsulation:2})};var so=[{id:"produce",userId:"system",name:"Produce",icon:"nutrition",color:"text-green-500",isDefault:!0,createdAt:new Date},{id:"dairy",userId:"system",name:"Dairy & Eggs",icon:"water_drop",color:"text-blue-400",isDefault:!0,createdAt:new Date},{id:"pantry",userId:"system",name:"Pantry",icon:"soup_kitchen",color:"text-orange-400",isDefault:!0,createdAt:new Date},{id:"baby",userId:"system",name:"Baby Needs",icon:"child_care",color:"text-pink-500",isDefault:!0,createdAt:new Date},{id:"cleaning",userId:"system",name:"Cleaning Items",icon:"cleaning_services",color:"text-cyan-500",isDefault:!0,createdAt:new Date},{id:"other",userId:"system",name:"Other",icon:"category",color:"text-slate-400",isDefault:!0,createdAt:new Date}],O4=["nutrition","water_drop","soup_kitchen","category","local_dining","bakery_dining","icecream","liquor","coffee","lunch_dining","restaurant","fastfood","ramen_dining","set_meal","egg","cake","cookie","local_pizza","kebab_dining","rice_bowl","cleaning_services","child_care"],F4=["text-green-500","text-blue-400","text-orange-400","text-slate-400","text-red-500","text-purple-500","text-pink-500","text-yellow-500","text-teal-500","text-indigo-500","text-cyan-500","text-lime-500"];var lw=[{name:"Red Apples",category:"produce",imageUrl:"https://images.pexels.com/photos/102104/pexels-photo-102104.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Bananas",category:"produce",imageUrl:"https://images.pexels.com/photos/2872755/pexels-photo-2872755.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Oranges",category:"produce",imageUrl:"https://images.pexels.com/photos/327098/pexels-photo-327098.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Strawberries",category:"produce",imageUrl:"https://images.pexels.com/photos/46174/strawberries-berries-fruit-freshness-46174.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Blueberries",category:"produce",imageUrl:"https://images.pexels.com/photos/1153655/pexels-photo-1153655.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Grapes",category:"produce",imageUrl:"https://images.pexels.com/photos/60021/grapes-wine-fruit-vines-60021.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Lemons",category:"produce",imageUrl:"https://images.pexels.com/photos/1414110/pexels-photo-1414110.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Limes",category:"produce",imageUrl:"https://images.pexels.com/photos/1435736/pexels-photo-1435736.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Watermelon",category:"produce",imageUrl:"https://images.pexels.com/photos/1313267/pexels-photo-1313267.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Pineapple",category:"produce",imageUrl:"https://images.pexels.com/photos/947879/pexels-photo-947879.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Mangoes",category:"produce",imageUrl:"https://images.pexels.com/photos/918643/pexels-photo-918643.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Avocados",category:"produce",imageUrl:"https://images.pexels.com/photos/557659/pexels-photo-557659.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Peaches",category:"produce",imageUrl:"https://images.pexels.com/photos/1028599/pexels-photo-1028599.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Pears",category:"produce",imageUrl:"https://images.pexels.com/photos/568471/pexels-photo-568471.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Cherries",category:"produce",imageUrl:"https://images.pexels.com/photos/175727/pexels-photo-175727.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Kiwi",category:"produce",imageUrl:"https://images.pexels.com/photos/51312/kiwi-fruit-vitamins-healthy-eating-51312.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Raspberries",category:"produce",imageUrl:"https://images.pexels.com/photos/892808/pexels-photo-892808.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Pomegranate",category:"produce",imageUrl:"https://images.pexels.com/photos/65256/pomegranate-open-cores-fruit-65256.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Grapefruit",category:"produce",imageUrl:"https://images.pexels.com/photos/1171170/pexels-photo-1171170.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Coconut",category:"produce",imageUrl:"https://images.pexels.com/photos/1030973/pexels-photo-1030973.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Broccoli",category:"produce",imageUrl:"https://images.pexels.com/photos/47347/broccoli-vegetable-food-healthy-47347.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Carrots",category:"produce",imageUrl:"https://images.pexels.com/photos/143133/pexels-photo-143133.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Spinach",category:"produce",imageUrl:"https://images.pexels.com/photos/2325843/pexels-photo-2325843.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Tomatoes",category:"produce",imageUrl:"https://images.pexels.com/photos/1367242/pexels-photo-1367242.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Cucumbers",category:"produce",imageUrl:"https://images.pexels.com/photos/37528/cucumber-salad-food-healthy-37528.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Bell Peppers",category:"produce",imageUrl:"https://images.pexels.com/photos/128536/pexels-photo-128536.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Onions",category:"produce",imageUrl:"https://images.pexels.com/photos/144206/pexels-photo-144206.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Garlic",category:"produce",imageUrl:"https://images.pexels.com/photos/1392585/pexels-photo-1392585.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Potatoes",category:"produce",imageUrl:"https://images.pexels.com/photos/144248/potatoes-vegetables-erdfrucht-bio-144248.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Sweet Potatoes",category:"produce",imageUrl:"https://images.pexels.com/photos/2284166/pexels-photo-2284166.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Lettuce",category:"produce",imageUrl:"https://images.pexels.com/photos/1199562/pexels-photo-1199562.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Cabbage",category:"produce",imageUrl:"https://images.pexels.com/photos/2518893/pexels-photo-2518893.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Cauliflower",category:"produce",imageUrl:"https://images.pexels.com/photos/6316515/pexels-photo-6316515.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Zucchini",category:"produce",imageUrl:"https://images.pexels.com/photos/128420/pexels-photo-128420.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Eggplant",category:"produce",imageUrl:"https://images.pexels.com/photos/321551/pexels-photo-321551.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Green Beans",category:"produce",imageUrl:"https://images.pexels.com/photos/63286/peas-green-beans-vegetables-63286.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Asparagus",category:"produce",imageUrl:"https://images.pexels.com/photos/351679/pexels-photo-351679.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Celery",category:"produce",imageUrl:"https://images.pexels.com/photos/2893635/pexels-photo-2893635.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Mushrooms",category:"produce",imageUrl:"https://images.pexels.com/photos/36438/mushrooms-brown-mushrooms-cook-eat.jpg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Corn",category:"produce",imageUrl:"https://images.pexels.com/photos/547263/pexels-photo-547263.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Ginger",category:"produce",imageUrl:"https://images.pexels.com/photos/161556/ginger-plant-asia-rhizome-161556.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Fresh Basil",category:"produce",imageUrl:"https://images.pexels.com/photos/1171182/pexels-photo-1171182.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Green Onions",category:"produce",imageUrl:"https://images.pexels.com/photos/4197447/pexels-photo-4197447.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Red Cabbage",category:"produce",imageUrl:"https://images.pexels.com/photos/6316517/pexels-photo-6316517.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Radishes",category:"produce",imageUrl:"https://images.pexels.com/photos/244393/pexels-photo-244393.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1}];var uw=[{name:"Whole Milk",category:"dairy",imageUrl:"https://images.pexels.com/photos/248412/pexels-photo-248412.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"2% Reduced Fat Milk",category:"dairy",imageUrl:"https://images.pexels.com/photos/2198626/pexels-photo-2198626.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Skim Milk",category:"dairy",imageUrl:"https://images.pexels.com/photos/725998/pexels-photo-725998.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Heavy Cream",category:"dairy",imageUrl:"https://images.pexels.com/photos/357573/pexels-photo-357573.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Half & Half",category:"dairy",imageUrl:"https://images.pexels.com/photos/416528/pexels-photo-416528.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Almond Milk",category:"dairy",imageUrl:"https://images.pexels.com/photos/3735180/pexels-photo-3735180.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Oat Milk",category:"dairy",imageUrl:"https://images.pexels.com/photos/5946627/pexels-photo-5946627.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Coconut Milk",category:"dairy",imageUrl:"https://images.pexels.com/photos/4202490/pexels-photo-4202490.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Large Eggs",category:"dairy",imageUrl:"https://images.pexels.com/photos/162712/egg-white-food-protein-162712.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Organic Free Range Eggs",category:"dairy",imageUrl:"https://images.pexels.com/photos/6941041/pexels-photo-6941041.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Egg Whites",category:"dairy",imageUrl:"https://images.pexels.com/photos/4110008/pexels-photo-4110008.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Brown Eggs",category:"dairy",imageUrl:"https://images.pexels.com/photos/4045570/pexels-photo-4045570.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Cheddar Cheese",category:"dairy",imageUrl:"https://images.pexels.com/photos/821365/pexels-photo-821365.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Mozzarella",category:"dairy",imageUrl:"https://images.pexels.com/photos/4109943/pexels-photo-4109943.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Parmesan",category:"dairy",imageUrl:"https://images.pexels.com/photos/4187779/pexels-photo-4187779.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Swiss Cheese",category:"dairy",imageUrl:"https://images.pexels.com/photos/773253/pexels-photo-773253.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Cream Cheese",category:"dairy",imageUrl:"https://images.pexels.com/photos/4397919/pexels-photo-4397919.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Feta Cheese",category:"dairy",imageUrl:"https://images.pexels.com/photos/4197908/pexels-photo-4197908.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Blue Cheese",category:"dairy",imageUrl:"https://images.pexels.com/photos/4198018/pexels-photo-4198018.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Goat Cheese",category:"dairy",imageUrl:"https://images.pexels.com/photos/4198041/pexels-photo-4198041.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Brie",category:"dairy",imageUrl:"https://images.pexels.com/photos/6287530/pexels-photo-6287530.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Cottage Cheese",category:"dairy",imageUrl:"https://images.pexels.com/photos/5946609/pexels-photo-5946609.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Ricotta",category:"dairy",imageUrl:"https://images.pexels.com/photos/6287535/pexels-photo-6287535.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Shredded Cheese",category:"dairy",imageUrl:"https://images.pexels.com/photos/4198024/pexels-photo-4198024.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"String Cheese",category:"dairy",imageUrl:"https://images.pexels.com/photos/4198020/pexels-photo-4198020.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Butter",category:"dairy",imageUrl:"https://images.pexels.com/photos/531334/pexels-photo-531334.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Unsalted Butter",category:"dairy",imageUrl:"https://images.pexels.com/photos/4110003/pexels-photo-4110003.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Margarine",category:"dairy",imageUrl:"https://images.pexels.com/photos/4397916/pexels-photo-4397916.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Greek Yogurt",category:"dairy",imageUrl:"https://images.pexels.com/photos/1435706/pexels-photo-1435706.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Plain Yogurt",category:"dairy",imageUrl:"https://images.pexels.com/photos/3669638/pexels-photo-3669638.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Flavored Yogurt",category:"dairy",imageUrl:"https://images.pexels.com/photos/4051580/pexels-photo-4051580.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Yogurt Drinks",category:"dairy",imageUrl:"https://images.pexels.com/photos/3625372/pexels-photo-3625372.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Sour Cream",category:"dairy",imageUrl:"https://images.pexels.com/photos/4397923/pexels-photo-4397923.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Whipped Cream",category:"dairy",imageUrl:"https://images.pexels.com/photos/3026806/pexels-photo-3026806.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1}];var dw=[{name:"Spaghetti",category:"pantry",imageUrl:"https://images.pexels.com/photos/4518844/pexels-photo-4518844.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Penne Pasta",category:"pantry",imageUrl:"https://images.pexels.com/photos/1437267/pexels-photo-1437267.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Macaroni",category:"pantry",imageUrl:"https://images.pexels.com/photos/4518710/pexels-photo-4518710.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Jasmine Rice",category:"pantry",imageUrl:"https://images.pexels.com/photos/4110251/pexels-photo-4110251.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Brown Rice",category:"pantry",imageUrl:"https://images.pexels.com/photos/4110377/pexels-photo-4110377.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Quinoa",category:"pantry",imageUrl:"https://images.pexels.com/photos/6740535/pexels-photo-6740535.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Oatmeal",category:"pantry",imageUrl:"https://images.pexels.com/photos/216951/pexels-photo-216951.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Bread Crumbs",category:"pantry",imageUrl:"https://images.pexels.com/photos/4110476/pexels-photo-4110476.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Canned Tomatoes",category:"pantry",imageUrl:"https://images.pexels.com/photos/5945755/pexels-photo-5945755.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Tomato Sauce",category:"pantry",imageUrl:"https://images.pexels.com/photos/4198012/pexels-photo-4198012.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Tomato Paste",category:"pantry",imageUrl:"https://images.pexels.com/photos/5945757/pexels-photo-5945757.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Black Beans",category:"pantry",imageUrl:"https://images.pexels.com/photos/4198019/pexels-photo-4198019.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Kidney Beans",category:"pantry",imageUrl:"https://images.pexels.com/photos/4198015/pexels-photo-4198015.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Chickpeas",category:"pantry",imageUrl:"https://images.pexels.com/photos/4198017/pexels-photo-4198017.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Canned Corn",category:"pantry",imageUrl:"https://images.pexels.com/photos/7469406/pexels-photo-7469406.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Canned Tuna",category:"pantry",imageUrl:"https://images.pexels.com/photos/5718026/pexels-photo-5718026.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Chicken Broth",category:"pantry",imageUrl:"https://images.pexels.com/photos/5938358/pexels-photo-5938358.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Vegetable Broth",category:"pantry",imageUrl:"https://images.pexels.com/photos/5938356/pexels-photo-5938356.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Coconut Milk (Canned)",category:"pantry",imageUrl:"https://images.pexels.com/photos/4202490/pexels-photo-4202490.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Olive Oil",category:"pantry",imageUrl:"https://images.pexels.com/photos/1022385/pexels-photo-1022385.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Vegetable Oil",category:"pantry",imageUrl:"https://images.pexels.com/photos/4202482/pexels-photo-4202482.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Coconut Oil",category:"pantry",imageUrl:"https://images.pexels.com/photos/4202486/pexels-photo-4202486.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Balsamic Vinegar",category:"pantry",imageUrl:"https://images.pexels.com/photos/4198037/pexels-photo-4198037.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Apple Cider Vinegar",category:"pantry",imageUrl:"https://images.pexels.com/photos/6957100/pexels-photo-6957100.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Soy Sauce",category:"pantry",imageUrl:"https://images.pexels.com/photos/4518578/pexels-photo-4518578.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"All-Purpose Flour",category:"pantry",imageUrl:"https://images.pexels.com/photos/5765/flour-powder-wheat-jar.jpg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Whole Wheat Flour",category:"pantry",imageUrl:"https://images.pexels.com/photos/4110256/pexels-photo-4110256.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Sugar",category:"pantry",imageUrl:"https://images.pexels.com/photos/2523650/pexels-photo-2523650.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Brown Sugar",category:"pantry",imageUrl:"https://images.pexels.com/photos/4110521/pexels-photo-4110521.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Powdered Sugar",category:"pantry",imageUrl:"https://images.pexels.com/photos/5946613/pexels-photo-5946613.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Baking Soda",category:"pantry",imageUrl:"https://images.pexels.com/photos/5946608/pexels-photo-5946608.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Baking Powder",category:"pantry",imageUrl:"https://images.pexels.com/photos/5946610/pexels-photo-5946610.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Vanilla Extract",category:"pantry",imageUrl:"https://images.pexels.com/photos/5946611/pexels-photo-5946611.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Cocoa Powder",category:"pantry",imageUrl:"https://images.pexels.com/photos/65882/chocolate-dark-coffee-confiserie-65882.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Chocolate Chips",category:"pantry",imageUrl:"https://images.pexels.com/photos/918327/pexels-photo-918327.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Yeast",category:"pantry",imageUrl:"https://images.pexels.com/photos/5946612/pexels-photo-5946612.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Honey",category:"pantry",imageUrl:"https://images.pexels.com/photos/302163/pexels-photo-302163.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Maple Syrup",category:"pantry",imageUrl:"https://images.pexels.com/photos/7474239/pexels-photo-7474239.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Peanut Butter",category:"pantry",imageUrl:"https://images.pexels.com/photos/5469076/pexels-photo-5469076.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Almond Butter",category:"pantry",imageUrl:"https://images.pexels.com/photos/5469079/pexels-photo-5469079.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Jam/Jelly",category:"pantry",imageUrl:"https://images.pexels.com/photos/1638927/pexels-photo-1638927.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Nutella",category:"pantry",imageUrl:"https://images.pexels.com/photos/4110533/pexels-photo-4110533.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Salt",category:"pantry",imageUrl:"https://images.pexels.com/photos/3296398/pexels-photo-3296398.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Black Pepper",category:"pantry",imageUrl:"https://images.pexels.com/photos/4198056/pexels-photo-4198056.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Garlic Powder",category:"pantry",imageUrl:"https://images.pexels.com/photos/4198051/pexels-photo-4198051.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Onion Powder",category:"pantry",imageUrl:"https://images.pexels.com/photos/4198053/pexels-photo-4198053.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Paprika",category:"pantry",imageUrl:"https://images.pexels.com/photos/4198054/pexels-photo-4198054.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Cumin",category:"pantry",imageUrl:"https://images.pexels.com/photos/4198060/pexels-photo-4198060.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Cinnamon",category:"pantry",imageUrl:"https://images.pexels.com/photos/4198055/pexels-photo-4198055.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Italian Seasoning",category:"pantry",imageUrl:"https://images.pexels.com/photos/4198057/pexels-photo-4198057.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Chili Powder",category:"pantry",imageUrl:"https://images.pexels.com/photos/4198059/pexels-photo-4198059.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Oregano",category:"pantry",imageUrl:"https://images.pexels.com/photos/4198062/pexels-photo-4198062.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Bay Leaves",category:"pantry",imageUrl:"https://images.pexels.com/photos/4198064/pexels-photo-4198064.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Ketchup",category:"pantry",imageUrl:"https://images.pexels.com/photos/5945565/pexels-photo-5945565.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Mustard",category:"pantry",imageUrl:"https://images.pexels.com/photos/5945566/pexels-photo-5945566.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Mayonnaise",category:"pantry",imageUrl:"https://images.pexels.com/photos/4397921/pexels-photo-4397921.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Hot Sauce",category:"pantry",imageUrl:"https://images.pexels.com/photos/4198048/pexels-photo-4198048.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"BBQ Sauce",category:"pantry",imageUrl:"https://images.pexels.com/photos/4198047/pexels-photo-4198047.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Worcestershire Sauce",category:"pantry",imageUrl:"https://images.pexels.com/photos/4198044/pexels-photo-4198044.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Almonds",category:"pantry",imageUrl:"https://images.pexels.com/photos/1013420/pexels-photo-1013420.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Walnuts",category:"pantry",imageUrl:"https://images.pexels.com/photos/4202493/pexels-photo-4202493.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Cashews",category:"pantry",imageUrl:"https://images.pexels.com/photos/4202491/pexels-photo-4202491.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Raisins",category:"pantry",imageUrl:"https://images.pexels.com/photos/4198033/pexels-photo-4198033.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Dried Cranberries",category:"pantry",imageUrl:"https://images.pexels.com/photos/4198031/pexels-photo-4198031.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Cereal",category:"pantry",imageUrl:"https://images.pexels.com/photos/135525/pexels-photo-135525.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Granola",category:"pantry",imageUrl:"https://images.pexels.com/photos/3872433/pexels-photo-3872433.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Crackers",category:"pantry",imageUrl:"https://images.pexels.com/photos/4110452/pexels-photo-4110452.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Tortilla Chips",category:"pantry",imageUrl:"https://images.pexels.com/photos/5737254/pexels-photo-5737254.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Popcorn",category:"pantry",imageUrl:"https://images.pexels.com/photos/33129/popcorn-movie-party-entertainment.jpg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Coffee",category:"pantry",imageUrl:"https://images.pexels.com/photos/585753/pexels-photo-585753.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Tea",category:"pantry",imageUrl:"https://images.pexels.com/photos/227908/pexels-photo-227908.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Hot Chocolate Mix",category:"pantry",imageUrl:"https://images.pexels.com/photos/5946618/pexels-photo-5946618.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1}];var hw=[{name:"Diapers (Newborn)",category:"baby",imageUrl:"https://placehold.co/200x200/E6E6FA/555555?text=Newborn+Diapers",isInCart:!1,isChecked:!1},{name:"Diapers (Size 1)",category:"baby",imageUrl:"https://placehold.co/200x200/E6E6FA/555555?text=Size+1+Diapers",isInCart:!1,isChecked:!1},{name:"Diapers (Size 2)",category:"baby",imageUrl:"https://placehold.co/200x200/E6E6FA/555555?text=Size+2+Diapers",isInCart:!1,isChecked:!1},{name:"Diapers (Size 3)",category:"baby",imageUrl:"https://placehold.co/200x200/E6E6FA/555555?text=Size+3+Diapers",isInCart:!1,isChecked:!1},{name:"Baby Wipes",category:"baby",imageUrl:"https://placehold.co/200x200/F0FFFF/555555?text=Baby+Wipes",isInCart:!1,isChecked:!1},{name:"Diaper Rash Cream",category:"baby",imageUrl:"https://images.pexels.com/photos/6941883/pexels-photo-6941883.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Diaper Disposal Bags",category:"baby",imageUrl:"https://images.pexels.com/photos/4239013/pexels-photo-4239013.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Baby Formula",category:"baby",imageUrl:"https://images.pexels.com/photos/6941096/pexels-photo-6941096.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Baby Cereal",category:"baby",imageUrl:"https://images.pexels.com/photos/6941098/pexels-photo-6941098.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Baby Food Pouches",category:"baby",imageUrl:"https://images.pexels.com/photos/6941099/pexels-photo-6941099.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Baby Food Jars",category:"baby",imageUrl:"https://images.pexels.com/photos/6941100/pexels-photo-6941100.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Baby Snacks",category:"baby",imageUrl:"https://images.pexels.com/photos/6941101/pexels-photo-6941101.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Baby Puffs",category:"baby",imageUrl:"https://images.pexels.com/photos/6941102/pexels-photo-6941102.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Teething Biscuits",category:"baby",imageUrl:"https://images.pexels.com/photos/6941103/pexels-photo-6941103.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Baby Water",category:"baby",imageUrl:"https://images.pexels.com/photos/1000084/pexels-photo-1000084.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Baby Bottles",category:"baby",imageUrl:"https://placehold.co/200x200/FFFACD/555555?text=Baby+Bottles",isInCart:!1,isChecked:!1},{name:"Bottle Nipples",category:"baby",imageUrl:"https://placehold.co/200x200/FFFACD/555555?text=Bottle+Nipples",isInCart:!1,isChecked:!1},{name:"Sippy Cups",category:"baby",imageUrl:"https://images.pexels.com/photos/3663068/pexels-photo-3663068.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Baby Spoons",category:"baby",imageUrl:"https://images.pexels.com/photos/6941885/pexels-photo-6941885.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Baby Bowls",category:"baby",imageUrl:"https://images.pexels.com/photos/6941886/pexels-photo-6941886.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Baby Bibs",category:"baby",imageUrl:"https://placehold.co/200x200/FFE4E1/555555?text=Baby+Bibs",isInCart:!1,isChecked:!1},{name:"Bottle Brush",category:"baby",imageUrl:"https://images.pexels.com/photos/6941887/pexels-photo-6941887.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Bottle Sterilizer",category:"baby",imageUrl:"https://images.pexels.com/photos/6941888/pexels-photo-6941888.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Baby Shampoo",category:"baby",imageUrl:"https://images.pexels.com/photos/3993398/pexels-photo-3993398.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Baby Body Wash",category:"baby",imageUrl:"https://images.pexels.com/photos/3993399/pexels-photo-3993399.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Baby Lotion",category:"baby",imageUrl:"https://images.pexels.com/photos/6941889/pexels-photo-6941889.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Baby Oil",category:"baby",imageUrl:"https://images.pexels.com/photos/6941890/pexels-photo-6941890.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Baby Powder",category:"baby",imageUrl:"https://images.pexels.com/photos/6941891/pexels-photo-6941891.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Baby Sunscreen",category:"baby",imageUrl:"https://images.pexels.com/photos/6941892/pexels-photo-6941892.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Baby Nail Clippers",category:"baby",imageUrl:"https://images.pexels.com/photos/6941893/pexels-photo-6941893.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Baby Thermometer",category:"baby",imageUrl:"https://images.pexels.com/photos/6941894/pexels-photo-6941894.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Nasal Aspirator",category:"baby",imageUrl:"https://images.pexels.com/photos/6941895/pexels-photo-6941895.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Baby Cotton Balls",category:"baby",imageUrl:"https://images.pexels.com/photos/4465124/pexels-photo-4465124.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Baby Q-Tips",category:"baby",imageUrl:"https://images.pexels.com/photos/4465125/pexels-photo-4465125.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Baby Tylenol",category:"baby",imageUrl:"https://images.pexels.com/photos/6941900/pexels-photo-6941900.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Baby Ibuprofen",category:"baby",imageUrl:"https://images.pexels.com/photos/6941901/pexels-photo-6941901.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Gripe Water",category:"baby",imageUrl:"https://images.pexels.com/photos/6941902/pexels-photo-6941902.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Gas Drops",category:"baby",imageUrl:"https://images.pexels.com/photos/6941903/pexels-photo-6941903.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Teething Gel",category:"baby",imageUrl:"https://images.pexels.com/photos/6941904/pexels-photo-6941904.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Saline Drops",category:"baby",imageUrl:"https://images.pexels.com/photos/6941905/pexels-photo-6941905.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Vitamin D Drops",category:"baby",imageUrl:"https://images.pexels.com/photos/6941906/pexels-photo-6941906.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Pacifiers",category:"baby",imageUrl:"https://placehold.co/200x200/FFB6C1/555555?text=Pacifiers",isInCart:!1,isChecked:!1},{name:"Teething Toys",category:"baby",imageUrl:"https://placehold.co/200x200/FFB6C1/555555?text=Teething+Toys",isInCart:!1,isChecked:!1},{name:"Baby Blanket",category:"baby",imageUrl:"https://placehold.co/200x200/FFE4E1/555555?text=Baby+Blanket",isInCart:!1,isChecked:!1},{name:"Swaddle Wrap",category:"baby",imageUrl:"https://placehold.co/200x200/FFE4E1/555555?text=Swaddle+Wrap",isInCart:!1,isChecked:!1},{name:"Burp Cloths",category:"baby",imageUrl:"https://placehold.co/200x200/FFE4E1/555555?text=Burp+Cloths",isInCart:!1,isChecked:!1},{name:"Baby Detergent",category:"baby",imageUrl:"https://images.pexels.com/photos/4239091/pexels-photo-4239091.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Stain Remover",category:"baby",imageUrl:"https://images.pexels.com/photos/4239092/pexels-photo-4239092.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Fabric Softener",category:"baby",imageUrl:"https://images.pexels.com/photos/4239093/pexels-photo-4239093.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1}];var fw=[{name:"All-Purpose Cleaner",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4239035/pexels-photo-4239035.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Glass Cleaner",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4239036/pexels-photo-4239036.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Disinfectant Spray",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4239091/pexels-photo-4239091.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Bleach",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4239013/pexels-photo-4239013.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Floor Cleaner",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4108715/pexels-photo-4108715.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Bathroom Cleaner",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4239037/pexels-photo-4239037.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Toilet Bowl Cleaner",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4239038/pexels-photo-4239038.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Tile & Grout Cleaner",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4108714/pexels-photo-4108714.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Oven Cleaner",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4239039/pexels-photo-4239039.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Stainless Steel Cleaner",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4239040/pexels-photo-4239040.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Laundry Detergent",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4239091/pexels-photo-4239091.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Fabric Softener",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4239092/pexels-photo-4239092.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Stain Remover",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4239093/pexels-photo-4239093.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Dryer Sheets",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4239094/pexels-photo-4239094.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Bleach Alternative",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4239095/pexels-photo-4239095.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Dish Soap",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4239031/pexels-photo-4239031.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Dishwasher Detergent",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4239032/pexels-photo-4239032.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Dishwasher Rinse Aid",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4239033/pexels-photo-4239033.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Dish Sponges",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4239015/pexels-photo-4239015.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Steel Wool Pads",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4239016/pexels-photo-4239016.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Broom",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4108716/pexels-photo-4108716.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Dustpan",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4108717/pexels-photo-4108717.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Mop",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4108718/pexels-photo-4108718.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Mop Bucket",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4108719/pexels-photo-4108719.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Duster",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4108720/pexels-photo-4108720.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Microfiber Cloths",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4239017/pexels-photo-4239017.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Cleaning Rags",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4239018/pexels-photo-4239018.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Scrub Brush",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4239019/pexels-photo-4239019.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Toilet Brush",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4239020/pexels-photo-4239020.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Rubber Gloves",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4239021/pexels-photo-4239021.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Trash Bags (Small)",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4239022/pexels-photo-4239022.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Trash Bags (Large)",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4239023/pexels-photo-4239023.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Recycling Bags",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4239024/pexels-photo-4239024.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Paper Towels",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4239025/pexels-photo-4239025.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Toilet Paper",category:"cleaning",imageUrl:"https://images.pexels.com/photos/3958210/pexels-photo-3958210.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Facial Tissues",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4239026/pexels-photo-4239026.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Napkins",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4239027/pexels-photo-4239027.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Air Freshener Spray",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4239028/pexels-photo-4239028.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Plug-in Air Freshener",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4239029/pexels-photo-4239029.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Scented Candles",category:"cleaning",imageUrl:"https://images.pexels.com/photos/3270223/pexels-photo-3270223.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Carpet Cleaner",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4108713/pexels-photo-4108713.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Furniture Polish",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4239041/pexels-photo-4239041.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Wood Cleaner",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4239042/pexels-photo-4239042.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Drain Cleaner",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4239043/pexels-photo-4239043.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Hand Sanitizer",category:"cleaning",imageUrl:"https://images.pexels.com/photos/3987142/pexels-photo-3987142.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Disinfecting Wipes",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4239010/pexels-photo-4239010.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1}];var ih=class n{userService=j(Lr);firestore;GROCERIES_COLLECTION="groceries";CATEGORIES_COLLECTION="categories";HISTORY_COLLECTION="shopping_history";unsubGroceries=null;unsubCategories=null;groceriesSignal=Ee([]);categoriesSignal=Ee([...so]);searchQuerySignal=Ee("");selectedCategorySignal=Ee("all");sortBySignal=Ee("name");isLoadingSignal=Ee(!0);errorSignal=Ee(null);isSeededSignal=Ee(!1);hasMigratedThisSession=!1;groceriesSubject=new dt([]);categoriesSubject=new dt([...so]);groceries$=this.groceriesSubject.asObservable();categories$=this.categoriesSubject.asObservable();categories=ot(()=>this.categoriesSignal());categoryIds=ot(()=>this.categoriesSignal().map(e=>e.id));isLoading=ot(()=>this.isLoadingSignal());groceries=ot(()=>{let e=this.groceriesSignal(),t=this.searchQuerySignal().toLowerCase(),r=this.selectedCategorySignal(),i=this.sortBySignal();return t&&(e=e.filter(s=>s.name.toLowerCase().includes(t))),r==="cart"?e=e.filter(s=>s.isInCart):r!=="all"&&(e=e.filter(s=>s.category===r)),e=[...e].sort((s,o)=>{switch(i){case"name":return s.name.localeCompare(o.name);case"category":return s.category.localeCompare(o.category);case"date":return new Date(o.createdAt).getTime()-new Date(s.createdAt).getTime();default:return 0}}),e});cartItems=ot(()=>this.groceriesSignal().filter(e=>e.isInCart));checkedItems=ot(()=>this.cartItems().filter(e=>e.isChecked));uncheckedItems=ot(()=>this.cartItems().filter(e=>!e.isChecked));searchQuery=ot(()=>this.searchQuerySignal());selectedCategory=ot(()=>this.selectedCategorySignal());sortBy=ot(()=>this.sortBySignal());error=ot(()=>this.errorSignal());groceriesByCategory=ot(()=>{let e=this.groceries(),t=this.categoriesSignal(),r={};return t.forEach(i=>{r[i.id]=[]}),e.forEach(i=>{r[i.category]?r[i.category].push(i):r.other&&r.other.push(i)}),r});constructor(){let e=lp(Xd.firebase);this.firestore=Z_(e),Ni(()=>{let t=this.userService.currentUser();this.cleanupSubscriptions(),this.hasMigratedThisSession=!1,t&&t.userId?(console.log("\u{1F4E6} Loading groceries for user:",t.userId),this.initializeFirestoreListeners(t.userId)):(console.log("\u{1F512} No user logged in - clearing grocery data"),this.groceriesSignal.set([]),this.groceriesSubject.next([]),this.categoriesSignal.set([...so]),this.categoriesSubject.next([...so]),this.isLoadingSignal.set(!1))})}getCurrentUserId(){return this.userService.currentUser()?.userId||""}cleanupSubscriptions(){this.unsubGroceries&&(this.unsubGroceries(),this.unsubGroceries=null),this.unsubCategories&&(this.unsubCategories(),this.unsubCategories=null)}initializeFirestoreListeners(e){if(!e)return;this.isLoadingSignal.set(!0);let t=Bp(Up(this.firestore,this.GROCERIES_COLLECTION),$p("userId","==",e));this.unsubGroceries=Hp(t,i=>{let s=i.docs.map(o=>{let a=o.data();return ie(B({id:o.id},a),{createdAt:a.createdAt?.toDate?a.createdAt.toDate():new Date(a.createdAt),updatedAt:a.updatedAt?.toDate?a.updatedAt.toDate():new Date(a.updatedAt)})});this.groceriesSignal.set(s),this.groceriesSubject.next(s),this.isLoadingSignal.set(!1),s.length===0&&!this.isSeededSignal()?this.seedInitialData$(e).subscribe():this.checkAndMigrateData(e,s)},i=>{console.error("Error loading groceries:",i),this.errorSignal.set(i.message),this.isLoadingSignal.set(!1)});let r=Bp(Up(this.firestore,this.CATEGORIES_COLLECTION),$p("userId","in",[e,"system"]));this.unsubCategories=Hp(r,i=>{if(i.docs.length>0){let s=i.docs.map(a=>ie(B({id:a.id},a.data()),{createdAt:a.data().createdAt?.toDate?a.data().createdAt.toDate():new Date}));s.sort((a,c)=>a.name.localeCompare(c.name));let o=so.filter(a=>!s.some(c=>c.id===a.id));if(o.length>0){o.forEach(c=>this.saveCategoryToFirestore$(c).subscribe());let a=[...s,...o];this.categoriesSignal.set(a),this.categoriesSubject.next(a)}else this.categoriesSignal.set(s),this.categoriesSubject.next(s)}else so.forEach(s=>this.saveCategoryToFirestore$(s).subscribe()),this.categoriesSignal.set([...so]),this.categoriesSubject.next([...so])},i=>{console.error("Error loading categories:",i)})}seedInitialData$(e){if(this.isSeededSignal())return de(void 0);this.isSeededSignal.set(!0),console.log("Seeding initial grocery data for user:",e);let t=[...lw,...uw,...dw,...hw,...fw],r=t.map(i=>this.create$(i));return Po(r).pipe(mt(()=>console.log(`Seeded ${t.length} grocery items for user ${e}`)),_e(()=>{}))}saveCategoryToFirestore$(e){let t=Wt(this.firestore,this.CATEGORIES_COLLECTION,e.id);return Ne(Ws(t,ie(B({},e),{createdAt:e.createdAt})))}createCategory$(e){let t=this.getCurrentUserId();if(!t)return Ei(()=>new Error("User must be logged in to create categories"));let r=ie(B({},e),{id:this.generateCategoryId(e.name),userId:t,isDefault:!1,createdAt:new Date});return this.saveCategoryToFirestore$(r).pipe(_e(()=>r))}async createCategory(e){let t=this.getCurrentUserId();if(!t)throw new Error("User must be logged in to create categories");let r=ie(B({},e),{id:this.generateCategoryId(e.name),userId:t,isDefault:!1,createdAt:new Date});return await this.saveCategoryToFirestore$(r).toPromise(),r}getCategory(e){return this.categoriesSignal().find(t=>t.id===e)}updateCategory$(e,t){let r=this.getCategory(e);if(!r||r.isDefault)return de(void 0);let i=Wt(this.firestore,this.CATEGORIES_COLLECTION,e);return Ne(wa(i,t)).pipe(_e(()=>B(B({},r),t)))}async updateCategory(e,t){let r=this.getCategory(e);if(!r||r.isDefault)return;let i=Wt(this.firestore,this.CATEGORIES_COLLECTION,e);return await wa(i,t),B(B({},r),t)}deleteCategory(e){let t=this.getCategory(e);if(!t)return{success:!1,error:"Category not found"};if(t.isDefault)return{success:!1,error:"Cannot delete default categories"};let r=this.groceriesSignal().filter(s=>s.category===e);if(r.length>0)return{success:!1,error:`Cannot delete category "${t.name}" because it has ${r.length} item(s). Please move or delete the items first.`};let i=Wt(this.firestore,this.CATEGORIES_COLLECTION,e);return sl(i),{success:!0}}getItemCountInCategory(e){return this.groceriesSignal().filter(t=>t.category===e).length}getCategoryLabel(e){return this.getCategory(e)?.name||e}getCategoryIcon(e){return this.getCategory(e)?.icon||"category"}getCategoryColor(e){return this.getCategory(e)?.color||"text-slate-400"}setSearchQuery(e){this.searchQuerySignal.set(e)}setCategory(e){this.selectedCategorySignal.set(e)}setSortBy(e){this.sortBySignal.set(e)}create$(e){let t=this.getCurrentUserId();if(!t)return Ei(()=>new Error("User must be logged in to create items"));let r=ie(B({},e),{id:this.generateId(),userId:t,createdAt:new Date,updatedAt:new Date}),i=Wt(this.firestore,this.GROCERIES_COLLECTION,r.id);return Ne(Ws(i,r)).pipe(_e(()=>r))}async create(e){let t=this.getCurrentUserId();if(!t)throw new Error("User must be logged in to create items");let r=ie(B({},e),{id:this.generateId(),userId:t,createdAt:new Date,updatedAt:new Date}),i=Wt(this.firestore,this.GROCERIES_COLLECTION,r.id);return await Ws(i,r),r}update$(e,t){let r=this.groceriesSignal().find(s=>s.id===e);if(!r)return de(void 0);let i=Wt(this.firestore,this.GROCERIES_COLLECTION,e);return Ne(wa(i,ie(B({},t),{updatedAt:new Date}))).pipe(_e(()=>ie(B(B({},r),t),{updatedAt:new Date})))}async update(e,t){let r=this.groceriesSignal().find(s=>s.id===e);if(!r)return;let i=Wt(this.firestore,this.GROCERIES_COLLECTION,e);return await wa(i,ie(B({},t),{updatedAt:new Date})),ie(B(B({},r),t),{updatedAt:new Date})}delete$(e){let t=Wt(this.firestore,this.GROCERIES_COLLECTION,e);return Ne(sl(t)).pipe(_e(()=>!0))}async delete(e){let t=Wt(this.firestore,this.GROCERIES_COLLECTION,e);return await sl(t),!0}getById(e){return this.groceriesSignal().find(t=>t.id===e)}addToCart$(e){return this.update$(e,{isInCart:!0}).pipe(_e(()=>{}))}async addToCart(e){await this.update(e,{isInCart:!0})}removeFromCart$(e){return this.update$(e,{isInCart:!1,isChecked:!1}).pipe(_e(()=>{}))}async removeFromCart(e){await this.update(e,{isInCart:!1,isChecked:!1})}toggleChecked$(e){let t=this.getById(e);return t?this.update$(e,{isChecked:!t.isChecked}).pipe(_e(()=>{})):de(void 0)}async toggleChecked(e){let t=this.getById(e);t&&await this.update(e,{isChecked:!t.isChecked})}clearCart$(){let e=this.cartItems();if(e.length===0)return de(void 0);let t=e.map(r=>this.update$(r.id,{isInCart:!1,isChecked:!1}));return Po(t).pipe(_e(()=>{}))}async clearCart(){let t=this.cartItems().map(r=>this.update(r.id,{isInCart:!1,isChecked:!1}));await Promise.all(t)}resetToSeedData$(){let t=this.groceriesSignal().map(r=>this.delete$(r.id));return Po(t).pipe(mt(()=>this.isSeededSignal.set(!1)),_e(()=>{}))}async resetToSeedData(){let t=this.groceriesSignal().map(r=>this.delete(r.id));await Promise.all(t),this.isSeededSignal.set(!1)}saveToHistory$(){let e=this.getCurrentUserId();if(!e)return de(void 0);let t=this.cartItems();if(t.length===0)return de(void 0);let r=`history_${Date.now()}`,i=Wt(this.firestore,this.HISTORY_COLLECTION,r),s={id:r,userId:e,date:new Date,itemCount:t.length,items:t.map(o=>({id:o.id,name:o.name,category:o.category,checked:o.isChecked})),completed:!0};return Ne(Ws(i,s))}async saveToHistory(){let e=this.getCurrentUserId();if(!e)return;let t=this.cartItems();if(t.length===0)return;let r=`history_${Date.now()}`,i=Wt(this.firestore,this.HISTORY_COLLECTION,r),s={id:r,userId:e,date:new Date,itemCount:t.length,items:t.map(o=>({id:o.id,name:o.name,category:o.category,checked:o.isChecked})),completed:!0};await Ws(i,s)}generateId(){return`grocery_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}generateCategoryId(e){return`cat_${e.toLowerCase().replace(/\s+/g,"_")}_${Date.now()}`}checkAndMigrateData(e,t){if(this.hasMigratedThisSession)return;let r="v15";localStorage.getItem(`homeneeds_seed_version_${e}`)!==r&&(console.log(`Migrating data to ${r} for user ${e}...`),this.hasMigratedThisSession=!0,this.migrateMissingSeedData$(t).subscribe(()=>{localStorage.setItem(`homeneeds_seed_version_${e}`,r)}))}migrateMissingSeedData$(e){console.log("Checking for missing seed items...");let t=e??this.groceriesSignal();console.log(`Current items count: ${t.length}`);let r=[...lw,...uw,...dw,...hw,...fw];console.log(`Total seed data count: ${r.length}`);let i=r.filter(s=>!t.some(o=>o.name===s.name));if(i.length>0){console.log(`Adding ${i.length} missing items...`),console.log("Missing items:",i.map(o=>o.name).join(", "));let s=i.map(o=>this.create$(o));return Po(s).pipe(mt(()=>console.log(`\u2705 Successfully added ${i.length} items`)),_e(()=>{}))}else return console.log("All seed items are present."),de(void 0)}async migrateMissingSeedData(e){console.log("Checking for missing seed items...");let t=e??this.groceriesSignal();console.log(`Current items count: ${t.length}`);let r=[...lw,...uw,...dw,...hw,...fw];console.log(`Total seed data count: ${r.length}`);let i=r.filter(s=>!t.some(o=>o.name===s.name));i.length>0?(console.log(`Adding ${i.length} missing items...`),console.log("Missing items:",i.map(s=>s.name).join(", ")),await Promise.all(i.map(s=>this.create(s))),console.log(`\u2705 Successfully added ${i.length} items`)):console.log("All seed items are present.")}ngOnDestroy(){this.cleanupSubscriptions()}static \u0275fac=function(t){return new(t||n)};static \u0275prov=se({token:n,factory:n.\u0275fac,providedIn:"root"})};var gw=(n,e)=>e.id;function bZ(n,e){if(n&1&&Ot(0,"img",38),n&2){let t=$().$implicit;Fe("src",t.imageUrl,er)}}function CZ(n,e){if(n&1&&(x(0,"span",40)(1,"span",46),N(2,"alarm"),R(),N(3),yf(4,"date"),R()),n&2){let t=$().$implicit;F(3),Xe(" ",vf(4,1,t.dueDate,"MMM d, h:mm a")," ")}}function TZ(n,e){if(n&1&&(x(0,"div",48),N(1),R()),n&2){let t=e;st(t.color),Fe("title","Assigned to "+t.name),F(),Xe(" ",t.initial," ")}}function SZ(n,e){if(n&1&&le(0,TZ,2,4,"div",47),n&2){let t,r=$(4);ue((t=r.getAssigneeById(e))?0:-1,t)}}function DZ(n,e){if(n&1&&(x(0,"span",41),N(1),R()),n&2){let t=$().$implicit;F(),xe(t.description)}}function AZ(n,e){if(n&1){let t=je();x(0,"div",31)(1,"span",32),N(2,"drag_indicator"),R(),x(3,"label",33)(4,"input",34),Q("change",function(){let i=X(t).$implicit,s=$(3);return Z(s.toggleComplete(i))}),R(),x(5,"span",35),N(6,"check"),R()(),x(7,"div",36),Q("click",function(){let i=X(t).$implicit,s=$(3);return Z(s.edit(i))}),x(8,"div",37),le(9,bZ,1,1,"img",38),x(10,"span",39),N(11),R(),le(12,CZ,5,4,"span",40),le(13,SZ,1,1),R(),le(14,DZ,2,1,"span",41),R(),x(15,"div",42)(16,"button",43),Q("click",function(){let i=X(t).$implicit,s=$(3);return Z(s.edit(i))}),x(17,"span",44),N(18,"edit"),R()(),x(19,"button",45),Q("click",function(){let i=X(t).$implicit,s=$(3);return Z(s.delete(i.id))}),x(20,"span",44),N(21,"delete"),R()()()()}if(n&2){let t,r=e.$implicit;On("opacity-50",r.isCompleted),F(4),Fe("checked",r.isCompleted),F(5),ue(r.imageUrl?9:-1),F(),On("line-through",r.isCompleted)("text-slate-500",r.isCompleted),F(),Xe(" ",r.title," "),F(),ue(r.dueDate?12:-1),F(),ue((t=r.assigneeId)?13:-1,t),F(),ue(r.description?14:-1)}}function xZ(n,e){if(n&1&&(x(0,"section",24)(1,"div",25)(2,"h3",26),Ot(3,"span",27),N(4),R(),x(5,"span",28),N(6),R()(),x(7,"div",29),Tt(8,AZ,22,12,"div",30,gw),R()()),n&2){let t=$().$implicit,r=$();Fe("id","section-"+t.id),F(3),st(t.color),F(),Xe(" ",t.label," "),F(),st(t.color+" "+t.textColor+" bg-opacity-10"),F(),Xe(" ",r.groupedTasks()[t.id].length," Items "),F(2),St(r.groupedTasks()[t.id])}}function RZ(n,e){if(n&1&&le(0,xZ,10,7,"section",24),n&2){let t=e.$implicit,r=$();ue(r.groupedTasks()[t.id]&&r.groupedTasks()[t.id].length>0?0:-1)}}function kZ(n,e){n&1&&(x(0,"div",20)(1,"span",49),N(2,"task_alt"),R(),x(3,"h3",50),N(4,"All caught up!"),R(),x(5,"p",51),N(6,"Create a task to get started."),R()())}function NZ(n,e){n&1&&(x(0,"span",77),N(1,"check"),R())}function MZ(n,e){if(n&1){let t=je();x(0,"button",75),Q("click",function(){let i=X(t).$implicit,s=$(3);return Z(s.selectCategory(i.id))}),Ot(1,"span",76),N(2),le(3,NZ,2,0,"span",77),R()}if(n&2){let t=e.$implicit,r=$(3);F(),st(t.color),F(),Xe(" ",t.label," "),F(),ue(r.taskCategory===t.id?3:-1)}}function PZ(n,e){if(n&1&&(x(0,"div",63),Tt(1,MZ,4,4,"button",74,gw),R()),n&2){let t=$(2);F(),St(t.categories)}}function OZ(n,e){if(n&1&&(x(0,"option",69),N(1),R()),n&2){let t=e.$implicit;Fe("value",t.id),F(),xe(t.name)}}function FZ(n,e){if(n&1){let t=je();x(0,"div",23)(1,"div",52)(2,"div",53)(3,"h3",54),N(4),R(),x(5,"button",55),Q("click",function(){X(t);let i=$();return Z(i.toggleAddModal(!1))}),x(6,"span",56),N(7,"close"),R()()(),x(8,"div",57)(9,"div")(10,"label",58),N(11,"Task Title"),R(),x(12,"input",59),dn("ngModelChange",function(i){X(t);let s=$();return gn(s.taskTitle,i)||(s.taskTitle=i),Z(i)}),R()(),x(13,"div")(14,"label",58),N(15,"Category"),R(),x(16,"div",60)(17,"button",61),Q("click",function(){X(t);let i=$();return Z(i.toggleCategoryDropdown())}),x(18,"span"),N(19),R(),x(20,"span",62),N(21,"expand_more"),R()(),le(22,PZ,3,0,"div",63),R()(),x(23,"div")(24,"div",64)(25,"label",65),N(26,"Assignee"),R(),x(27,"button",66),Q("click",function(){X(t);let i=$();return Z(i.openManageAssignees())}),N(28,"Manage"),R()(),x(29,"select",67),dn("ngModelChange",function(i){X(t);let s=$();return gn(s.taskAssigneeId,i)||(s.taskAssigneeId=i),Z(i)}),x(30,"option",68),N(31,"Unassigned"),R(),Tt(32,OZ,2,2,"option",69,gw),R()(),x(34,"div")(35,"label",58),N(36,"Due Date"),R(),x(37,"input",70),dn("ngModelChange",function(i){X(t);let s=$();return gn(s.taskDueDate,i)||(s.taskDueDate=i),Z(i)}),R()()(),x(38,"div",71)(39,"button",72),Q("click",function(){X(t);let i=$();return Z(i.toggleAddModal(!1))}),N(40,"Cancel"),R(),x(41,"button",73),Q("click",function(){X(t);let i=$();return Z(i.saveTask())}),N(42,"Save Task"),R()()()()}if(n&2){let t=$();F(4),xe(t.editingTask?"Edit Task":"New Task"),F(8),un("ngModel",t.taskTitle),F(7),xe(t.getSelectedCategoryLabel()),F(3),ue(t.showCategoryDropdown?22:-1),F(7),un("ngModel",t.taskAssigneeId),F(3),St(t.assignees()),F(5),un("ngModel",t.taskDueDate)}}function VZ(n,e){if(n&1){let t=je();x(0,"app-assignee-management",78),Q("close",function(){X(t);let i=$();return Z(i.closeAssigneeModal())}),R()}}var pw=class n{overviewService=j(rs);dialogService=j(Ur);assigneeService=j(rh);groceryService=j(ih);loadingService=j(ir);tasks=this.overviewService.tasks;assignees=this.assigneeService.assignees;categories=P4;assigneeColors=yg;groupedTasks=ot(()=>{let e=this.tasks(),t={};return this.categories.forEach(r=>t[r.id]=[]),t.other=[],e.forEach(r=>{let i=r.category;t[i]?t[i].push(r):t.other.push(r)}),t});totalPending=ot(()=>this.tasks().filter(e=>!e.isCompleted).length);activeCategoriesCount=ot(()=>{let e=this.groupedTasks();return Object.values(e).filter(t=>t.length>0).length});showAddModal=!1;editingTask=null;taskTitle="";taskCategory="groceries";taskDueDate="";taskAssigneeId="";showCategoryDropdown=!1;showAssigneeModal=!1;constructor(){}toggleAddModal(e){this.showAddModal=e,e||this.resetForm()}resetForm(){this.editingTask=null,this.taskTitle="",this.taskCategory="groceries",this.taskDueDate="",this.taskAssigneeId="",this.showCategoryDropdown=!1}toggleCategoryDropdown(){this.showCategoryDropdown=!this.showCategoryDropdown}selectCategory(e){this.taskCategory=e,this.showCategoryDropdown=!1}getSelectedCategoryLabel(){return this.categories.find(e=>e.id===this.taskCategory)?.label||"Select Category"}saveTask(){if(!this.taskTitle.trim())return;this.loadingService.show("Saving task...");let e={title:this.taskTitle,category:this.taskCategory,assigneeId:this.taskAssigneeId||void 0,isCompleted:!1,dueDate:this.taskDueDate?new Date(this.taskDueDate):null};this.editingTask?this.overviewService.updateTask$(this.editingTask.id,{title:this.taskTitle,category:this.taskCategory,assigneeId:this.taskAssigneeId||void 0,dueDate:this.taskDueDate?new Date(this.taskDueDate):null}).subscribe({next:()=>{this.loadingService.hide(),this.toggleAddModal(!1)},error:()=>this.loadingService.hide()}):this.overviewService.createTask$(e).subscribe({next:()=>{this.loadingService.hide(),this.toggleAddModal(!1)},error:()=>this.loadingService.hide()})}toggleComplete(e){let t=!e.isCompleted;this.overviewService.updateTask$(e.id,{isCompleted:t}).subscribe({next:()=>{if(t&&e.category==="groceries"){let r=this.groceryService.groceries().find(i=>i.name===e.title);r&&r.isInCart&&this.groceryService.update$(r.id,{isInCart:!1,isChecked:!1}).subscribe()}}})}delete(e){this.dialogService.confirm$("Delete this task?","Delete Task").subscribe(t=>{if(t){let r=this.tasks().find(i=>i.id===e);this.loadingService.show("Deleting..."),this.overviewService.deleteTask$(e).subscribe({next:()=>{if(r&&r.category==="groceries"){let i=this.groceryService.groceries().find(s=>s.name===r.title);i&&i.isInCart&&this.groceryService.update$(i.id,{isInCart:!1,isChecked:!1}).subscribe()}this.loadingService.hide()},error:()=>this.loadingService.hide()})}})}edit(e){this.editingTask=e,this.taskTitle=e.title,this.taskCategory=e.category,this.taskAssigneeId=e.assigneeId||"",this.taskDueDate=e.dueDate?new Date(e.dueDate.getTime()-e.dueDate.getTimezoneOffset()*6e4).toISOString().slice(0,16):"",this.showAddModal=!0}openManageAssignees(){this.showAssigneeModal=!0}closeAssigneeModal(){this.showAssigneeModal=!1}getAssigneeById(e){if(e)return this.assignees().find(t=>t.id===e)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Tn({type:n,selectors:[["app-overview"]],hostAttrs:[1,"flex-1","h-screen","flex","flex-col","overflow-hidden"],decls:39,vars:5,consts:[["id","overview-page",1,"flex-1","flex","flex-col","h-screen","overflow-y-auto","relative","bg-slate-50","dark:bg-background-dark"],[1,"px-8","pt-8","pb-4","w-full","z-10","flex","flex-col","gap-4","sticky","top-0","bg-slate-50/90","dark:bg-background-dark/90","backdrop-blur-sm"],[1,"flex","flex-col","w-full","group"],[1,"flex","w-full","items-center","rounded-full","h-14","bg-white","dark:bg-surface-dark","shadow-sm","border","border-slate-200","dark:border-border-dark","focus-within:border-primary","focus-within:ring-1","focus-within:ring-primary","transition-all","duration-300","px-6"],[1,"material-symbols-outlined","text-slate-400","dark:text-text-muted","group-focus-within:text-primary","transition-colors"],["id","overview-search-input","placeholder","Search for items to buy, fix, or clean...",1,"w-full","bg-transparent","border-none","focus:ring-0","text-base","font-medium","text-slate-900","dark:text-white","placeholder:text-slate-400","dark:placeholder:text-text-muted-darker","ml-3"],[1,"bg-primary","hover:bg-primary-hover","text-slate-900","p-2","rounded-full","transition-colors","flex","items-center","justify-center",3,"click"],[1,"material-symbols-outlined","text-[20px]","font-bold"],[1,"flex","items-center","gap-3","px-2"],[1,"text-xs","uppercase","font-bold","text-slate-500","dark:text-text-muted","tracking-wider"],["id","filter-chips",1,"flex","gap-2","text-slate-600","dark:text-slate-400","text-sm"],[1,"px-3","py-1","bg-white","dark:bg-surface-dark","rounded-full","border","border-slate-200","dark:border-border-dark","cursor-pointer","hover:border-primary"],[1,"flex-1","overflow-y-auto","px-8","pb-20","scroll-smooth"],[1,"w-full","flex","flex-col","gap-10"],[1,"flex","flex-wrap","justify-between","items-end","gap-4","mt-4","border-b","border-border-dark","pb-6"],[1,"text-4xl","font-black","text-slate-900","dark:text-white","tracking-tight","mb-2"],[1,"text-slate-500","dark:text-text-muted"],[1,"flex","gap-3"],[1,"flex","items-center","gap-2","px-5","py-2.5","rounded-full","bg-primary","text-slate-900","font-bold","text-sm","hover:bg-primary-hover","transition-colors","shadow-lg","shadow-primary/20",3,"click"],[1,"material-symbols-outlined","text-sm"],[1,"text-center","py-20","animate-in","fade-in","zoom-in-50","duration-500"],[1,"absolute","bottom-10","right-10","w-16","h-16","bg-primary","hover:bg-primary-hover","rounded-full","shadow-2xl","shadow-primary/20","text-slate-900","flex","items-center","justify-center","transition-transform","hover:scale-105","active:scale-95","z-40",3,"click"],[1,"material-symbols-outlined",2,"font-size","32px"],[1,"fixed","inset-0","z-50","flex","items-center","justify-center","p-4","bg-black/50","backdrop-blur-sm","animate-in","fade-in","duration-200"],[3,"id"],[1,"flex","items-center","justify-between","mb-5"],[1,"text-2xl","font-bold","text-slate-900","dark:text-white","flex","items-center","gap-3"],[1,"w-2","h-8","rounded-full","block"],[1,"text-xs","font-bold","px-3","py-1","rounded-full","bg-opacity-10"],[1,"grid","grid-cols-1","gap-3"],[1,"group","flex","items-center","gap-3","p-4","rounded-xl","bg-white","dark:bg-surface-dark","border","border-transparent","dark:border-border-dark","hover:border-primary/30","transition-all","duration-200","shadow-sm","hover:shadow-md","dark:shadow-none","relative","overflow-hidden","active:scale-[0.99]","active:shadow-inner",3,"opacity-50"],[1,"group","flex","items-center","gap-3","p-4","rounded-xl","bg-white","dark:bg-surface-dark","border","border-transparent","dark:border-border-dark","hover:border-primary/30","transition-all","duration-200","shadow-sm","hover:shadow-md","dark:shadow-none","relative","overflow-hidden","active:scale-[0.99]","active:shadow-inner"],[1,"material-symbols-outlined","text-slate-300","dark:text-border-dark","group-hover:text-slate-400","dark:group-hover:text-slate-500","cursor-grab","select-none","transition-colors"],[1,"relative","flex","items-center","p-2","rounded-full","cursor-pointer"],["type","checkbox",1,"peer","h-6","w-6","cursor-pointer","appearance-none","rounded-full","border-2","border-slate-400","dark:border-slate-500","transition-all","checked:border-primary","checked:bg-primary",3,"change","checked"],[1,"material-symbols-outlined","absolute","inset-0","flex","items-center","justify-center","text-white","text-[18px]","opacity-0","peer-checked:opacity-100","pointer-events-none","transition-opacity"],[1,"flex","flex-col","flex-1","min-w-0","cursor-pointer",3,"click"],[1,"flex","items-center","gap-3"],["alt","",1,"size-8","rounded-lg","object-cover","bg-slate-100","dark:bg-black/20","border","border-slate-200","dark:border-border-dark","shrink-0",3,"src"],[1,"text-base","font-bold","text-slate-900","dark:text-white","group-hover:text-primary","transition-colors","truncate"],[1,"hidden","sm:inline-flex","items-center","gap-1","px-2","py-0.5","rounded-md","text-[10px]","font-bold","uppercase","tracking-wider","bg-slate-100","text-slate-500","dark:bg-slate-800","dark:text-slate-400"],[1,"text-sm","text-slate-500","dark:text-text-muted-darker","truncate"],[1,"flex","items-center","gap-1","sm:gap-2","opacity-100","sm:opacity-0","group-hover:opacity-100","transition-opacity","z-20"],["title","Edit",1,"p-2","text-slate-400","hover:text-white","hover:bg-border-dark","rounded-full","transition-colors",3,"click"],[1,"material-symbols-outlined","text-[20px]"],["title","Delete",1,"p-2","text-slate-400","hover:text-rose-400","hover:bg-border-dark","rounded-full","transition-colors",3,"click"],[1,"material-symbols-outlined","text-[12px]"],[1,"size-6","rounded-full","flex","items-center","justify-center","text-[10px]","font-bold","text-white","ring-2","ring-white","dark:ring-surface-dark","ml-1",3,"title","class"],[1,"size-6","rounded-full","flex","items-center","justify-center","text-[10px]","font-bold","text-white","ring-2","ring-white","dark:ring-surface-dark","ml-1",3,"title"],[1,"material-symbols-outlined","text-6xl","text-slate-300","dark:text-slate-600"],[1,"mt-4","text-xl","font-bold","text-slate-500","dark:text-slate-400"],[1,"text-slate-400","dark:text-slate-500"],[1,"bg-white","dark:bg-surface-dark","w-full","max-w-md","rounded-2xl","shadow-xl","overflow-hidden","animate-in","zoom-in-95","duration-200","border","border-slate-200","dark:border-border-dark"],[1,"p-4","border-b","border-slate-100","dark:border-border-dark","flex","justify-between","items-center"],[1,"font-bold","text-lg","text-slate-900","dark:text-white"],[1,"p-1","rounded-full","hover:bg-slate-100","dark:hover:bg-border-dark","transition-colors",3,"click"],[1,"material-symbols-outlined"],[1,"p-6","space-y-4"],[1,"block","text-sm","font-medium","text-slate-700","dark:text-slate-300","mb-1"],["type","text","placeholder","e.g. Buy Milk",1,"w-full","px-4","py-2","rounded-lg","bg-slate-50","dark:bg-black/20","border","border-slate-200","dark:border-border-dark","focus:border-primary","focus:ring-1","focus:ring-primary","outline-none","text-slate-900","dark:text-white",3,"ngModelChange","ngModel"],[1,"relative"],[1,"w-full","px-4","py-2","rounded-lg","bg-slate-50","dark:bg-black/20","border","border-slate-200","dark:border-border-dark","focus:border-primary","focus:ring-1","focus:ring-primary","outline-none","text-slate-900","dark:text-white","text-left","flex","justify-between","items-center",3,"click"],[1,"material-symbols-outlined","text-slate-500"],[1,"absolute","top-full","left-0","right-0","mt-1","bg-white","dark:bg-surface-dark","border","border-slate-200","dark:border-border-dark","rounded-lg","shadow-xl","z-50","overflow-hidden","animate-in","fade-in","zoom-in-95","duration-100","max-h-48","overflow-y-auto"],[1,"flex","justify-between","items-center","mb-1"],[1,"block","text-sm","font-medium","text-slate-700","dark:text-slate-300"],[1,"text-xs","text-primary","font-bold","hover:underline",3,"click"],[1,"w-full","px-4","py-2","rounded-lg","bg-slate-50","dark:bg-black/20","border","border-slate-200","dark:border-border-dark","focus:border-primary","focus:ring-1","focus:ring-primary","outline-none","text-slate-900","dark:text-white",3,"ngModelChange","ngModel"],["value",""],[3,"value"],["type","datetime-local",1,"w-full","px-4","py-2","rounded-lg","bg-slate-50","dark:bg-black/20","border","border-slate-200","dark:border-border-dark","focus:border-primary","focus:ring-1","focus:ring-primary","outline-none","text-slate-900","dark:text-white",3,"ngModelChange","ngModel"],[1,"p-4","bg-slate-50","dark:bg-black/20","flex","justify-end","gap-3"],[1,"px-4","py-2","rounded-lg","text-slate-600","dark:text-slate-400","font-medium","hover:bg-slate-200","dark:hover:bg-border-dark","transition-colors",3,"click"],[1,"px-4","py-2","rounded-lg","bg-primary","text-slate-900","font-bold","hover:bg-primary-hover","transition-colors","shadow-lg","shadow-primary/20",3,"click"],[1,"w-full","px-4","py-3","text-left","text-slate-700","dark:text-white","hover:bg-slate-50","dark:hover:bg-border-dark","transition-colors","flex","items-center","gap-2"],[1,"w-full","px-4","py-3","text-left","text-slate-700","dark:text-white","hover:bg-slate-50","dark:hover:bg-border-dark","transition-colors","flex","items-center","gap-2",3,"click"],[1,"w-3","h-3","rounded-full"],[1,"material-symbols-outlined","ml-auto","text-primary","text-sm"],[3,"close"]],template:function(t,r){t&1&&(x(0,"main",0)(1,"div",1)(2,"label",2)(3,"div",3)(4,"span",4),N(5,"search"),R(),Ot(6,"input",5),x(7,"button",6),Q("click",function(){return r.toggleAddModal(!0)}),x(8,"span",7),N(9,"add"),R()()()(),x(10,"div",8)(11,"span",9),N(12,"Filter by Due Date:"),R(),x(13,"div",10)(14,"span",11),N(15,"All"),R(),x(16,"span",11),N(17,"Today"),R()()()(),x(18,"div",12)(19,"div",13)(20,"div",14)(21,"div")(22,"h2",15),N(23,"My Lists"),R(),x(24,"p",16),N(25),R()(),x(26,"div",17)(27,"button",18),Q("click",function(){return r.toggleAddModal(!0)}),x(28,"span",19),N(29,"add_task"),R(),N(30," New Task "),R()()(),Tt(31,RZ,1,1,null,null,gw),le(33,kZ,7,0,"div",20),R()(),x(34,"button",21),Q("click",function(){return r.toggleAddModal(!0)}),x(35,"span",22),N(36,"add"),R()(),le(37,FZ,43,6,"div",23),le(38,VZ,1,0,"app-assignee-management"),R()),t&2&&(F(25),Vy("You have ",r.totalPending()," pending items across ",r.activeCategoriesCount()," categories."),F(6),St(r.categories),F(2),ue(r.activeCategoriesCount()===0&&(!r.groupedTasks().other||r.groupedTasks().other.length===0)?33:-1),F(4),ue(r.showAddModal?37:-1),F(),ue(r.showAssigneeModal?38:-1))},dependencies:[rr,Oa,th,nh,ns,Pa,Ma,io,cw,Sf],encapsulation:2})};var sh=class n{MAX_WIDTH=400;MAX_HEIGHT=400;QUALITY=.7;async compressImage(e){return new Promise((t,r)=>{let i=new FileReader;i.onload=s=>{let o=new Image;o.onload=()=>{try{let a=document.createElement("canvas"),{width:c,height:d}=o;c>d?c>this.MAX_WIDTH&&(d=Math.round(d*this.MAX_WIDTH/c),c=this.MAX_WIDTH):d>this.MAX_HEIGHT&&(c=Math.round(c*this.MAX_HEIGHT/d),d=this.MAX_HEIGHT),a.width=c,a.height=d;let h=a.getContext("2d");if(!h){r(new Error("Could not get canvas context"));return}h.drawImage(o,0,0,c,d);let p=a.toDataURL("image/jpeg",this.QUALITY);t(p)}catch(a){r(a)}},o.onerror=()=>{r(new Error("Failed to load image"))},o.src=s.target?.result},i.onerror=()=>{r(new Error("Failed to read file"))},i.readAsDataURL(e)})}isValidImageFile(e){return["image/jpeg","image/png","image/gif","image/webp"].includes(e.type)}formatFileSize(e){return e<1024?e+" B":e<1024*1024?(e/1024).toFixed(1)+" KB":(e/(1024*1024)).toFixed(1)+" MB"}static \u0275fac=function(t){return new(t||n)};static \u0275prov=se({token:n,factory:n.\u0275fac,providedIn:"root"})};var mw=(n,e)=>e.id,LZ=(n,e)=>e.value;function UZ(n,e){if(n&1){let t=je();x(0,"button",39),Q("click",function(){let i=X(t).$implicit,s=$(2);return Z(s.onSortChange(i.value))}),N(1),R()}if(n&2){let t=e.$implicit,r=$(2);On("bg-primary-10",r.sortBy()===t.value)("text-primary",r.sortBy()===t.value)("text-slate-700",r.sortBy()!==t.value)("dark:text-slate-300",r.sortBy()!==t.value),F(),Xe(" ",t.label," ")}}function jZ(n,e){if(n&1&&(x(0,"div",10),Tt(1,UZ,2,9,"button",38,LZ),R()),n&2){let t=$();F(),St(t.sortOptions)}}function BZ(n,e){if(n&1&&(x(0,"div",15)(1,"div",40)(2,"div",41)(3,"span",42),N(4,"error"),R()(),x(5,"div",43)(6,"h3",44),N(7,"Connection Error"),R(),x(8,"div",45)(9,"p"),N(10),R(),x(11,"p",46),N(12,"Please check your Firestore Security Rules or Auth configuration."),R()()()()()),n&2){let t=$();F(10),xe(t.error())}}function $Z(n,e){if(n&1){let t=je();x(0,"div",48)(1,"button",49),Q("click",function(i){X(t);let s=$().$implicit;return $().startEditCategory(s),Z(i.stopPropagation())}),x(2,"span",50),N(3,"edit"),R()(),x(4,"button",51),Q("click",function(i){X(t);let s=$().$implicit;return $().deleteCategory(s.id),Z(i.stopPropagation())}),x(5,"span",50),N(6,"close"),R()()()}}function HZ(n,e){if(n&1){let t=je();x(0,"div",29)(1,"button",28),Q("click",function(){let i=X(t).$implicit,s=$();return Z(s.onCategoryChange(i.id))}),x(2,"span",47),N(3),R(),x(4,"p"),N(5),R(),le(6,$Z,7,0,"div",48),R()()}if(n&2){let t=e.$implicit,r=$();F(),st(r.selectedCategory()===t.id?"flex h-9 shrink-0 items-center justify-center gap-x-2 rounded-lg bg-slate-900 dark:bg-white px-4 pr-2 hover:opacity-90 transition-opacity":"flex h-9 shrink-0 items-center justify-center gap-x-2 rounded-lg bg-white dark:bg-surface-dark border border-slate-200 dark:border-border-dark px-4 pr-2 hover:bg-slate-50 dark:hover:bg-border-dark transition-colors"),F(),st(t.color),F(),xe(t.icon),F(),st(r.selectedCategory()===t.id?"text-white dark:text-slate-900 text-sm font-bold":"text-slate-600 dark:text-slate-300 text-sm font-medium"),F(),Xe(" ",t.name," "),F(),ue(t.isDefault?-1:6)}}function qZ(n,e){if(n&1){let t=je();x(0,"img",66),Q("error",function(i){X(t);let s=$(4);return Z(s.handleImageError(i))}),R()}if(n&2){let t=$().$implicit;Fe("alt",t.name)("src",t.imageUrl,er)}}function zZ(n,e){n&1&&(x(0,"div",60)(1,"span",67),N(2,"grocery"),R()())}function GZ(n,e){if(n&1){let t=je();x(0,"span",68),N(1,"In Cart"),R(),x(2,"button",69),Q("click",function(){X(t);let i=$().$implicit,s=$(3);return Z(s.removeFromCart(i.id))}),x(3,"span",31),N(4,"remove_shopping_cart"),R()()}}function WZ(n,e){if(n&1){let t=je();x(0,"button",70),Q("click",function(){X(t);let i=$().$implicit,s=$(3);return Z(s.addToCart(i.id))}),x(1,"span",4),N(2,"add_shopping_cart"),R()()}}function KZ(n,e){if(n&1){let t=je();x(0,"div",57)(1,"div",2)(2,"div",58),le(3,qZ,1,2,"img",59)(4,zZ,3,0,"div",60),R(),x(5,"div")(6,"h4",61),N(7),R()()(),x(8,"div",62),le(9,GZ,5,0)(10,WZ,3,0,"button",63),x(11,"button",64),Q("click",function(){let i=X(t).$implicit,s=$(3);return Z(s.startEdit(i))}),x(12,"span",31),N(13,"edit"),R()(),x(14,"button",65),Q("click",function(){let i=X(t).$implicit,s=$(3);return Z(s.deleteItem(i.id))}),x(15,"span",31),N(16,"delete"),R()()()()}if(n&2){let t=e.$implicit;F(3),ue(t.imageUrl?3:4),F(4),xe(t.name),F(2),ue(t.isInCart?9:10)}}function QZ(n,e){if(n&1&&(x(0,"section",52)(1,"div",53)(2,"h3",54)(3,"span",19),N(4),R(),N(5),R(),x(6,"span",55),N(7),R()(),x(8,"div",56),Tt(9,KZ,17,3,"div",57,mw),R()()),n&2){let t=$().$implicit,r=$();Fe("id","section-"+t.id),F(3),st(t.color),F(),xe(t.icon),F(),Xe(" ",t.name," "),F(2),Xe("",r.getItemCount(t.id)," items"),F(2),St(r.groceriesByCategory()[t.id])}}function YZ(n,e){if(n&1&&le(0,QZ,11,6,"section",52),n&2){let t=e.$implicit,r=$();ue(r.groceriesByCategory()[t.id]&&r.groceriesByCategory()[t.id].length>0?0:-1)}}function JZ(n,e){if(n&1){let t=je();x(0,"button",76),Q("click",function(){X(t);let i=$(2);return Z(i.onCategoryChange("all"))}),N(1," Browse all items "),R()}}function XZ(n,e){if(n&1&&(x(0,"div",33)(1,"div",71)(2,"span",72),N(3,"search_off"),R()(),x(4,"h3",73),N(5,"No items found"),R(),x(6,"p",74),N(7," We couldn't find any items matching your current filters. "),R(),le(8,JZ,2,0,"button",75),R()),n&2){let t=$();F(8),ue(t.selectedCategory()!=="all"?8:-1)}}function ZZ(n,e){if(n&1&&(x(0,"span",36),N(1),R()),n&2){let t=$();F(),xe(t.getTotalCartItems())}}function eee(n,e){n&1&&(x(0,"div",83)(1,"span",98),N(2,"progress_activity"),R(),x(3,"span",99),N(4,"Compressing..."),R()())}function tee(n,e){if(n&1){let t=je();x(0,"img",100),Q("error",function(i){X(t);let s=$(2);return Z(s.handleImageError(i))}),R()}if(n&2){let t=$(2);Fe("src",t.editItemImageUrl,er)}}function nee(n,e){n&1&&(x(0,"span",85),N(1,"image"),R())}function ree(n,e){if(n&1){let t=je();x(0,"button",101),Q("click",function(){X(t);let i=$(2);return Z(i.removeImage())}),x(1,"span",50),N(2,"close"),R()()}}function iee(n,e){if(n&1&&(x(0,"option",94),N(1),R()),n&2){let t=e.$implicit;Fe("value",t.id),F(),xe(t.name)}}function see(n,e){if(n&1){let t=je();x(0,"div",77),Q("click",function(){X(t);let i=$();return Z(i.cancelEdit())}),x(1,"div",78),Q("click",function(i){return X(t),Z(i.stopPropagation())}),x(2,"h3",79),N(3),R(),x(4,"div",80)(5,"div",81)(6,"div",8)(7,"div",82),le(8,eee,5,0,"div",83)(9,tee,1,1,"img",84)(10,nee,2,0,"span",85),R(),le(11,ree,3,0,"button",86),R(),x(12,"label",87)(13,"input",88),Q("change",function(i){X(t);let s=$();return Z(s.onImageFileSelected(i))}),R(),x(14,"span",89)(15,"span",31),N(16,"upload"),R(),N(17),R()(),x(18,"p",90),N(19,"Images are compressed automatically"),R()(),x(20,"div")(21,"label",91),N(22,"Item Name"),R(),x(23,"input",92),dn("ngModelChange",function(i){X(t);let s=$();return gn(s.editItemName,i)||(s.editItemName=i),Z(i)}),R()(),x(24,"div")(25,"label",91),N(26,"Category"),R(),x(27,"select",93),dn("ngModelChange",function(i){X(t);let s=$();return gn(s.editItemCategory,i)||(s.editItemCategory=i),Z(i)}),Tt(28,iee,2,2,"option",94,mw),R()()(),x(30,"div",95)(31,"button",96),Q("click",function(){X(t);let i=$();return Z(i.cancelEdit())}),N(32,"Cancel"),R(),x(33,"button",97),Q("click",function(){X(t);let i=$();return Z(i.saveEdit())}),N(34,"Save"),R()()()()}if(n&2){let t=$();F(3),xe(t.editingItem?"Edit Item":"Add Item"),F(5),ue(t.isUploadingImage?8:t.editItemImageUrl?9:10),F(3),ue(t.editItemImageUrl&&!t.isUploadingImage?11:-1),F(2),Fe("disabled",t.isUploadingImage),F(4),Xe(" ",t.editItemImageUrl?"Change Image":"Upload Image"," "),F(6),un("ngModel",t.editItemName),F(4),un("ngModel",t.editItemCategory),F(),St(t.categories()),F(5),Fe("disabled",t.isUploadingImage)}}function oee(n,e){if(n&1){let t=je();x(0,"button",28),Q("click",function(){let i=X(t).$implicit,s=$(2);return Z(s.editCategoryIcon=i)}),x(1,"span",19),N(2),R()()}if(n&2){let t=e.$implicit,r=$(2);st(r.editCategoryIcon===t?"size-10 rounded-lg bg-primary text-white flex items-center justify-center":"size-10 rounded-lg bg-white dark:bg-surface-dark border border-slate-200 dark:border-border-dark flex items-center justify-center hover:border-primary transition-colors"),F(2),xe(t)}}function aee(n,e){if(n&1){let t=je();x(0,"button",28),Q("click",function(){let i=X(t).$implicit,s=$(2);return Z(s.editCategoryColor=i)}),x(1,"span",19),N(2,"circle"),R()()}if(n&2){let t=e.$implicit,r=$(2);st(r.editCategoryColor===t?"size-10 rounded-lg bg-white dark:bg-surface-dark border-2 border-primary flex items-center justify-center":"size-10 rounded-lg bg-white dark:bg-surface-dark border border-slate-200 dark:border-border-dark flex items-center justify-center hover:border-primary transition-colors"),F(),st(t)}}function cee(n,e){if(n&1){let t=je();x(0,"div",77),Q("click",function(){X(t);let i=$();return Z(i.closeCategoryModal())}),x(1,"div",78),Q("click",function(i){return X(t),Z(i.stopPropagation())}),x(2,"h3",79),N(3),R(),x(4,"div",80)(5,"div",102)(6,"div",103)(7,"span",104),N(8),R(),x(9,"span",105),N(10),R()()(),x(11,"div")(12,"label",91),N(13,"Category Name"),R(),x(14,"input",106),dn("ngModelChange",function(i){X(t);let s=$();return gn(s.editCategoryName,i)||(s.editCategoryName=i),Z(i)}),R()(),x(15,"div")(16,"label",107),N(17,"Icon"),R(),x(18,"div",108),Tt(19,oee,3,3,"button",109,Tu),R()(),x(21,"div")(22,"label",107),N(23,"Color"),R(),x(24,"div",110),Tt(25,aee,3,4,"button",109,Tu),R()()(),x(27,"div",95)(28,"button",96),Q("click",function(){X(t);let i=$();return Z(i.closeCategoryModal())}),N(29,"Cancel"),R(),x(30,"button",111),Q("click",function(){X(t);let i=$();return Z(i.saveCategory())}),N(31,"Save"),R()()()()}if(n&2){let t=$();F(3),xe(t.editingCategory?"Edit Category":"Add Category"),F(4),st(t.editCategoryColor),F(),xe(t.editCategoryIcon),F(2),xe(t.editCategoryName||"Category Name"),F(4),un("ngModel",t.editCategoryName),F(5),St(t.availableIcons),F(6),St(t.availableColors)}}var yw=class n{groceryService=j(ih);imageService=j(sh);dialogService=j(Ur);overviewService=j(rs);loadingService=j(ir);groceries=this.groceryService.groceries;groceriesByCategory=this.groceryService.groceriesByCategory;cartItems=this.groceryService.cartItems;checkedItems=this.groceryService.checkedItems;uncheckedItems=this.groceryService.uncheckedItems;searchQuery=this.groceryService.searchQuery;selectedCategory=this.groceryService.selectedCategory;sortBy=this.groceryService.sortBy;categories=this.groceryService.categories;categoryIds=this.groceryService.categoryIds;error=this.groceryService.error;isLoading=this.groceryService.isLoading;availableIcons=O4;availableColors=F4;newItemName="";showAddModal=!1;isAddingFromSidebar=!1;editingItem=null;editItemName="";editItemCategory="other";editItemImageUrl="";isUploadingImage=!1;showMobileCart=!1;toggleMobileCart(){this.showMobileCart=!this.showMobileCart}showCategoryModal=!1;editingCategory=null;editCategoryName="";editCategoryIcon="category";editCategoryColor="text-slate-400";sortOptions=[{value:"name",label:"Name"},{value:"category",label:"Category"},{value:"date",label:"Date Added"}];showSortDropdown=!1;openAddCategoryModal(){this.editingCategory=null,this.editCategoryName="",this.editCategoryIcon="category",this.editCategoryColor="text-slate-400",this.showCategoryModal=!0}startEditCategory(e){e.isDefault||(this.editingCategory=e,this.editCategoryName=e.name,this.editCategoryIcon=e.icon,this.editCategoryColor=e.color,this.showCategoryModal=!0)}saveCategory(){this.editCategoryName.trim()&&(this.loadingService.show("Saving category..."),this.editingCategory?this.groceryService.updateCategory$(this.editingCategory.id,{name:this.editCategoryName.trim(),icon:this.editCategoryIcon,color:this.editCategoryColor}).subscribe({next:()=>{this.loadingService.hide(),this.closeCategoryModal()},error:()=>this.loadingService.hide()}):this.groceryService.createCategory$({name:this.editCategoryName.trim(),icon:this.editCategoryIcon,color:this.editCategoryColor}).subscribe({next:()=>{this.loadingService.hide(),this.closeCategoryModal()},error:()=>this.loadingService.hide()}))}deleteCategory(e){let t=this.groceryService.getCategory(e);if(!t||t.isDefault)return;let r=this.groceryService.getItemCountInCategory(e);if(r>0){this.dialogService.alert$(`Cannot delete category "${t.name}" because it has ${r} item(s). Please move or delete the items first.`).subscribe();return}this.dialogService.confirm$(`Delete category "${t.name}"?`,"Delete Category").subscribe(i=>{if(i){let s=this.groceryService.deleteCategory(e);!s.success&&s.error&&this.dialogService.alert$(s.error).subscribe()}})}closeCategoryModal(){this.editingCategory=null,this.editCategoryName="",this.editCategoryIcon="category",this.editCategoryColor="text-slate-400",this.showCategoryModal=!1}onImageFileSelected(e){let t=e.target,r=t.files?.[0];if(r){if(!this.imageService.isValidImageFile(r)){this.dialogService.alert$("Please select a valid image file (JPEG, PNG, GIF, or WebP)").subscribe();return}this.isUploadingImage=!0,this.loadingService.show("Processing image..."),this.imageService.compressImage(r).then(i=>{this.editItemImageUrl=i}).catch(i=>{console.error("Error compressing image:",i),this.dialogService.alert$("Failed to process image. Please try again.").subscribe()}).finally(()=>{this.isUploadingImage=!1,this.loadingService.hide(),t.value=""})}}removeImage(){this.editItemImageUrl=""}onSearch(e){let t=e.target;this.groceryService.setSearchQuery(t.value)}onCategoryChange(e){this.groceryService.setCategory(e)}onSortChange(e){this.groceryService.setSortBy(e),this.showSortDropdown=!1}toggleSortDropdown(){this.showSortDropdown=!this.showSortDropdown}addItem(){this.newItemName.trim()&&this.groceryService.create$({name:this.newItemName.trim(),category:"other",isInCart:!1,isChecked:!1}).subscribe(()=>{this.newItemName=""})}addItemWithCategory(e,t){e.trim()&&this.groceryService.create$({name:e.trim(),category:t,isInCart:!1,isChecked:!1}).subscribe()}deleteItem(e){this.groceryService.delete$(e).subscribe()}startEdit(e){this.editingItem=e,this.editItemName=e.name,this.editItemCategory=e.category,this.editItemImageUrl=e.imageUrl||"",this.showAddModal=!0}openAddModal(e=!1){this.isAddingFromSidebar=e,this.editingItem=null,this.editItemName="",this.editItemCategory="other",this.editItemImageUrl="",this.showAddModal=!0}saveEdit(){this.editItemName.trim()&&(this.loadingService.show("Saving..."),this.editingItem?this.groceryService.update$(this.editingItem.id,{name:this.editItemName.trim(),category:this.editItemCategory,imageUrl:this.editItemImageUrl.trim()||void 0}).subscribe({next:()=>{this.loadingService.hide(),this.cancelEdit()},error:()=>this.loadingService.hide()}):this.groceryService.create$({name:this.editItemName.trim(),category:this.editItemCategory,imageUrl:this.editItemImageUrl.trim()||void 0,isInCart:this.isAddingFromSidebar,isChecked:!1}).subscribe({next:()=>{this.isAddingFromSidebar&&this.createOverviewTask(this.editItemName.trim(),this.editItemImageUrl.trim()||void 0),this.loadingService.hide(),this.cancelEdit()},error:()=>this.loadingService.hide()}))}cancelEdit(){this.editingItem=null,this.editItemName="",this.editItemCategory="other",this.editItemImageUrl="",this.showAddModal=!1}addToCart(e){this.groceryService.addToCart$(e).subscribe(()=>{let t=this.groceries().find(r=>r.id===e);t&&this.createOverviewTask(t.name,t.imageUrl)})}removeFromCart(e){let t=this.groceries().find(r=>r.id===e);this.groceryService.removeFromCart$(e).subscribe(()=>{t&&this.removeOverviewTask(t.name)})}toggleChecked(e){this.groceryService.toggleChecked$(e).subscribe()}clearCart(){let e=this.cartItems();this.loadingService.show("Clearing cart..."),this.groceryService.clearCart$().subscribe({next:()=>{for(let t of e)this.removeOverviewTask(t.name);this.loadingService.hide()},error:()=>this.loadingService.hide()})}checkout(){this.cartItems().length!==0&&this.dialogService.confirm$("Complete shopping trip and save to history?","Checkout").subscribe(e=>{e&&(this.loadingService.show("Saving to history..."),this.groceryService.saveToHistory$().subscribe({next:()=>{this.groceryService.clearCart$().subscribe({next:()=>this.loadingService.hide(),error:()=>this.loadingService.hide()})},error:t=>{console.error("Checkout failed",t),this.loadingService.hide(),this.dialogService.alert$("Failed to save history. Please check your connection.").subscribe()}}))})}getCategoryLabel(e){return this.groceryService.getCategoryLabel(e)}getCategoryIcon(e){return this.groceryService.getCategoryIcon(e)}getCategoryColor(e){return this.groceryService.getCategoryColor(e)}getItemCount(e){return this.groceriesByCategory()[e]?.length||0}getTotalCartItems(){return this.cartItems().length}getProgress(){let e=this.cartItems().length;return e===0?0:this.checkedItems().length/e*100}isDefaultCategory(e){return this.groceryService.getCategory(e)?.isDefault??!1}handleImageError(e){let t=e.target;t.src="https://placehold.co/200x200/cccccc/ffffff?text=No+Image"}resetData(){this.dialogService.confirm$("This will reset all grocery data to the default seed data. Continue?","Reset Data").subscribe(e=>{e&&(this.loadingService.show("Resetting data..."),this.groceryService.resetToSeedData$().subscribe({next:()=>this.loadingService.hide(),error:()=>this.loadingService.hide()}))})}createOverviewTask(e,t){let r=new Date;r.setDate(r.getDate()+3),this.overviewService.createTask$({title:e,category:"groceries",isCompleted:!1,dueDate:r,imageUrl:t}).subscribe()}removeOverviewTask(e){let r=this.overviewService.tasks().find(i=>i.title===e&&i.category==="groceries");r&&this.overviewService.deleteTask$(r.id).subscribe()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Tn({type:n,selectors:[["app-groceries"]],hostAttrs:[1,"flex-1","h-screen","flex","flex-col","overflow-hidden"],decls:60,vars:12,consts:[["id","groceries-page",1,"flex","flex-col","h-screen","w-full","overflow-hidden"],["id","groceries-header",1,"flex","items-center","justify-between","whitespace-nowrap","border-b","border-solid","border-[#e5e7eb]","dark:border-border-dark","bg-white","dark:bg-background-dark","px-6","py-3","shrink-0","z-20"],[1,"flex","items-center","gap-4"],[1,"size-8","bg-primary","rounded-lg","flex","items-center","justify-center","text-white"],[1,"material-symbols-outlined","text-[20px]"],[1,"text-slate-900","dark:text-white","text-xl","font-bold","leading-tight","tracking-[-0.015em]"],[1,"flex","flex-1","justify-end","gap-6","items-center"],[1,"flex","gap-2"],[1,"relative"],["id","btn-sort",1,"flex","size-10","cursor-pointer","items-center","justify-center","overflow-hidden","rounded-lg","bg-slate-100","dark:bg-border-dark","text-slate-900","dark:text-white","hover:bg-slate-200","dark:hover:bg-[#3b4754]","transition-colors",3,"click"],[1,"absolute","right-0","top-12","w-40","bg-white","dark:bg-surface-dark","border","border-slate-200","dark:border-border-dark","rounded-lg","shadow-xl","z-50","overflow-hidden"],["id","btn-reset","title","Reset to seed data",1,"flex","size-10","cursor-pointer","items-center","justify-center","overflow-hidden","rounded-lg","bg-slate-100","dark:bg-border-dark","text-slate-900","dark:text-white","hover:bg-red-500","hover:text-white","transition-colors",3,"click"],[1,"flex","flex-1","min-h-0"],["id","groceries-main-content",1,"flex-1","min-w-0","overflow-y-auto","bg-background-light","dark:bg-background-dark","relative"],[1,"w-full","mx-auto","px-6","py-8","flex","flex-col","gap-6"],[1,"bg-red-50","dark:bg-red-900/20","border-l-4","border-red-500","p-4","rounded-r-lg"],[1,"flex","flex-col","md:flex-row","gap-4"],[1,"flex-1","relative","group"],[1,"absolute","left-4","top-1/2","-translate-y-1/2","text-slate-400"],[1,"material-symbols-outlined"],["id","groceries-search-input","placeholder","Search for items (e.g. Avocado, Milk)...","type","text",1,"w-full","h-12","pl-12","pr-4","bg-white","dark:bg-surface-dark","border","border-slate-200","dark:border-border-dark","rounded-xl","text-slate-900","dark:text-white","placeholder:text-slate-400","focus:outline-none","focus:ring-2","focus:ring-primary","focus:border-transparent","transition-all","shadow-sm",3,"input","value"],[1,"md:w-[350px]","relative","flex","gap-2"],[1,"flex-1","relative"],["id","groceries-quick-add-input","placeholder","Quick add item...","type","text",1,"w-full","h-12","pl-4","pr-12","bg-white","dark:bg-surface-dark","border","border-slate-200","dark:border-border-dark","rounded-xl","text-slate-900","dark:text-white","placeholder:text-slate-400","focus:outline-none","focus:ring-2","focus:ring-primary","focus:border-transparent","transition-all","shadow-sm",3,"ngModelChange","keyup.enter","ngModel"],["id","btn-quick-add",1,"absolute","right-2","top-2","size-8","bg-primary/10","hover:bg-primary/20","text-primary","rounded-lg","flex","items-center","justify-center","transition-colors",3,"click"],["id","btn-add-custom",1,"h-12","px-4","bg-primary","text-white","rounded-xl","flex","items-center","justify-center","gap-2","hover:bg-blue-600","transition-colors","shadow-lg","shadow-blue-500/20","whitespace-nowrap",3,"click"],[1,"hidden","sm:inline","font-semibold","text-sm"],["id","groceries-filter-chips",1,"flex","gap-3","overflow-x-auto","pb-2","scrollbar-hide","items-center"],[3,"click"],[1,"relative","group","shrink-0"],[1,"flex","h-9","shrink-0","items-center","justify-center","gap-x-2","rounded-lg","border-2","border-dashed","border-slate-300","dark:border-slate-600","px-4","hover:border-primary","hover:text-primary","transition-colors","text-slate-400",3,"click"],[1,"material-symbols-outlined","text-[18px]"],[1,"text-sm","font-medium"],[1,"flex","flex-col","items-center","justify-center","py-20","text-center","animate-in","fade-in","duration-300"],[1,"h-12"],["id","btn-mobile-cart",1,"xl:hidden","fixed","bottom-6","right-6","size-14","bg-primary","text-white","rounded-full","shadow-xl","shadow-blue-500/40","flex","items-center","justify-center","z-50",3,"click"],[1,"absolute","top-0","right-0","size-5","bg-red-500","rounded-full","border-2","border-background-light","dark:border-background-dark","text-[10px]","font-bold","flex","items-center","justify-center"],[1,"fixed","inset-0","bg-black/50","flex","items-center","justify-center","z-50"],[1,"w-full","px-4","py-2","text-left","text-sm","hover:bg-slate-100","dark:hover:bg-border-dark","transition-colors",3,"bg-primary-10","text-primary","text-slate-700","dark:text-slate-300"],[1,"w-full","px-4","py-2","text-left","text-sm","hover:bg-slate-100","dark:hover:bg-border-dark","transition-colors",3,"click"],[1,"flex"],[1,"flex-shrink-0"],[1,"material-symbols-outlined","text-red-500"],[1,"ml-3"],[1,"text-sm","font-medium","text-red-800","dark:text-red-200"],[1,"mt-2","text-sm","text-red-700","dark:text-red-300"],[1,"mt-1","font-semibold"],[1,"material-symbols-outlined","text-[16px]"],[1,"flex","items-center","gap-1","ml-1"],[1,"size-5","flex","items-center","justify-center","rounded","hover:bg-black/10","dark:hover:bg-white/10",3,"click"],[1,"material-symbols-outlined","text-[14px]"],[1,"size-5","flex","items-center","justify-center","rounded","hover:bg-red-500/20","text-red-500",3,"click"],[3,"id"],[1,"flex","items-center","justify-between","mb-4"],[1,"text-lg","font-bold","text-slate-900","dark:text-white","flex","items-center","gap-2"],[1,"text-xs","font-medium","text-slate-500","bg-slate-100","dark:bg-border-dark","px-2","py-1","rounded"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],[1,"group","bg-white","dark:bg-surface-dark","p-4","rounded-xl","border","border-slate-200","dark:border-border-dark","hover:border-primary/50","dark:hover:border-primary/50","transition-colors","shadow-sm","flex","items-center","justify-between"],[1,"size-12","rounded-lg","bg-slate-50","dark:bg-black/20","overflow-hidden","flex-shrink-0"],[1,"w-full","h-full","object-cover",3,"alt","src"],[1,"w-full","h-full","flex","items-center","justify-center"],[1,"font-semibold","text-slate-900","dark:text-white"],[1,"flex","items-center","gap-2"],["title","Add to cart",1,"size-9","bg-primary","text-white","rounded-lg","flex","items-center","justify-center","hover:bg-blue-600","transition-colors","shadow-lg","shadow-blue-500/20"],["title","Edit",1,"p-2","text-slate-400","hover:text-primary","rounded-full","hover:bg-slate-100","dark:hover:bg-border-dark","transition-colors",3,"click"],["title","Delete",1,"p-2","text-slate-400","hover:text-red-500","rounded-full","hover:bg-slate-100","dark:hover:bg-border-dark","transition-colors",3,"click"],[1,"w-full","h-full","object-cover",3,"error","alt","src"],[1,"material-symbols-outlined","text-slate-400"],[1,"text-xs","text-green-500","font-medium"],["title","Remove from cart",1,"p-2","text-slate-400","hover:text-red-500","rounded-full","hover:bg-slate-100","dark:hover:bg-border-dark","transition-colors",3,"click"],["title","Add to cart",1,"size-9","bg-primary","text-white","rounded-lg","flex","items-center","justify-center","hover:bg-blue-600","transition-colors","shadow-lg","shadow-blue-500/20",3,"click"],[1,"size-24","rounded-full","bg-slate-100","dark:bg-black/20","flex","items-center","justify-center","mb-4"],[1,"material-symbols-outlined","text-4xl","text-slate-300"],[1,"text-lg","font-bold","text-slate-900","dark:text-white"],[1,"text-slate-500","dark:text-slate-400","mt-2","max-w-xs","mx-auto"],[1,"mt-6","text-primary","font-medium","hover:underline"],[1,"mt-6","text-primary","font-medium","hover:underline",3,"click"],[1,"fixed","inset-0","bg-black/50","flex","items-center","justify-center","z-50",3,"click"],[1,"bg-white","dark:bg-surface-dark","rounded-2xl","p-6","w-full","max-w-md","shadow-2xl",3,"click"],[1,"text-lg","font-bold","text-slate-900","dark:text-white","mb-4"],[1,"space-y-4"],[1,"flex","flex-col","items-center","gap-3"],[1,"size-24","rounded-xl","bg-slate-100","dark:bg-black/20","overflow-hidden","flex","items-center","justify-center"],[1,"flex","flex-col","items-center"],["alt","Preview",1,"w-full","h-full","object-cover",3,"src"],[1,"material-symbols-outlined","text-4xl","text-slate-400"],[1,"absolute","-top-2","-right-2","size-6","bg-red-500","text-white","rounded-full","flex","items-center","justify-center","hover:bg-red-600","transition-colors","shadow-lg"],[1,"cursor-pointer"],["type","file","accept","image/jpeg,image/png,image/gif,image/webp",1,"hidden",3,"change","disabled"],[1,"flex","items-center","gap-2","px-4","py-2","bg-slate-100","dark:bg-border-dark","text-slate-600","dark:text-slate-300","rounded-lg","hover:bg-slate-200","dark:hover:bg-slate-600","transition-colors","text-sm","font-medium"],[1,"text-xs","text-slate-400"],[1,"block","text-sm","font-medium","text-slate-700","dark:text-slate-300","mb-1"],["type","text","placeholder","Enter item name...",1,"w-full","h-12","px-4","bg-white","dark:bg-background-dark","border","border-slate-200","dark:border-border-dark","rounded-xl","text-slate-900","dark:text-white","focus:outline-none","focus:ring-2","focus:ring-primary",3,"ngModelChange","ngModel"],[1,"w-full","h-12","px-4","bg-white","dark:bg-background-dark","border","border-slate-200","dark:border-border-dark","rounded-xl","text-slate-900","dark:text-white","focus:outline-none","focus:ring-2","focus:ring-primary",3,"ngModelChange","ngModel"],[3,"value"],[1,"flex","gap-3","mt-6"],[1,"flex-1","h-10","rounded-lg","border","border-slate-200","dark:border-border-dark","text-slate-600","dark:text-slate-300","font-semibold","text-sm","hover:bg-slate-50","dark:hover:bg-border-dark","transition-colors",3,"click"],[1,"flex-1","h-10","rounded-lg","bg-primary","text-white","font-semibold","text-sm","hover:bg-blue-600","shadow-lg","shadow-blue-500/20","transition-colors","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],[1,"material-symbols-outlined","text-2xl","text-primary","animate-spin"],[1,"text-xs","text-slate-400","mt-1"],["alt","Preview",1,"w-full","h-full","object-cover",3,"error","src"],[1,"absolute","-top-2","-right-2","size-6","bg-red-500","text-white","rounded-full","flex","items-center","justify-center","hover:bg-red-600","transition-colors","shadow-lg",3,"click"],[1,"flex","justify-center"],[1,"flex","items-center","gap-3","px-6","py-3","rounded-xl","bg-slate-100","dark:bg-black/20"],[1,"material-symbols-outlined","text-2xl"],[1,"font-bold","text-slate-900","dark:text-white"],["type","text","placeholder","e.g., Frozen Foods, Beverages...",1,"w-full","h-12","px-4","bg-white","dark:bg-background-dark","border","border-slate-200","dark:border-border-dark","rounded-xl","text-slate-900","dark:text-white","focus:outline-none","focus:ring-2","focus:ring-primary",3,"ngModelChange","ngModel"],[1,"block","text-sm","font-medium","text-slate-700","dark:text-slate-300","mb-2"],[1,"flex","flex-wrap","gap-2","max-h-24","overflow-y-auto","p-2","bg-slate-50","dark:bg-black/20","rounded-xl"],[3,"class"],[1,"flex","flex-wrap","gap-2","p-2","bg-slate-50","dark:bg-black/20","rounded-xl"],[1,"flex-1","h-10","rounded-lg","bg-primary","text-white","font-semibold","text-sm","hover:bg-blue-600","shadow-lg","shadow-blue-500/20","transition-colors",3,"click"]],template:function(t,r){t&1&&(x(0,"div",0)(1,"header",1)(2,"div",2)(3,"div",3)(4,"span",4),N(5,"shopping_basket"),R()(),x(6,"h2",5),N(7,"Groceries"),R()(),x(8,"div",6)(9,"div",7)(10,"div",8)(11,"button",9),Q("click",function(){return r.toggleSortDropdown()}),x(12,"span",4),N(13,"sort"),R()(),le(14,jZ,3,0,"div",10),R(),x(15,"button",11),Q("click",function(){return r.resetData()}),x(16,"span",4),N(17,"restart_alt"),R()()()()(),x(18,"div",12)(19,"main",13)(20,"div",14),le(21,BZ,13,1,"div",15),x(22,"div",16)(23,"div",17)(24,"div",18)(25,"span",19),N(26,"search"),R()(),x(27,"input",20),Q("input",function(s){return r.onSearch(s)}),R()(),x(28,"div",21)(29,"div",22)(30,"input",23),dn("ngModelChange",function(s){return gn(r.newItemName,s)||(r.newItemName=s),s}),Q("keyup.enter",function(){return r.addItem()}),R(),x(31,"button",24),Q("click",function(){return r.addItem()}),x(32,"span",4),N(33,"add"),R()()(),x(34,"button",25),Q("click",function(){return r.openAddModal()}),x(35,"span",4),N(36,"add_circle"),R(),x(37,"span",26),N(38,"New"),R()()()(),x(39,"div",27)(40,"button",28),Q("click",function(){return r.onCategoryChange("all")}),x(41,"p"),N(42," All Items "),R()(),Tt(43,HZ,7,9,"div",29,mw),x(45,"button",30),Q("click",function(){return r.openAddCategoryModal()}),x(46,"span",31),N(47,"add"),R(),x(48,"span",32),N(49,"Add Category"),R()()(),Tt(50,YZ,1,1,null,null,mw),le(52,XZ,9,1,"div",33),Ot(53,"div",34),R()(),x(54,"button",35),Q("click",function(){return r.toggleMobileCart()}),x(55,"span",19),N(56,"shopping_cart"),R(),le(57,ZZ,2,1,"span",36),R()(),le(58,see,35,8,"div",37),le(59,cee,32,6,"div",37),R()),t&2&&(F(14),ue(r.showSortDropdown?14:-1),F(7),ue(r.error()?21:-1),F(6),Fe("value",r.searchQuery()),F(3),un("ngModel",r.newItemName),F(10),st(r.selectedCategory()==="all"?"flex h-9 shrink-0 items-center justify-center gap-x-2 rounded-lg bg-slate-900 dark:bg-white px-4 hover:opacity-90 transition-opacity":"flex h-9 shrink-0 items-center justify-center gap-x-2 rounded-lg bg-white dark:bg-surface-dark border border-slate-200 dark:border-border-dark px-4 hover:bg-slate-50 dark:hover:bg-border-dark transition-colors"),F(),st(r.selectedCategory()==="all"?"text-white dark:text-slate-900 text-sm font-bold":"text-slate-600 dark:text-slate-300 text-sm font-medium"),F(2),St(r.categories()),F(7),St(r.categories()),F(2),ue(r.groceries().length===0&&!r.isLoading()?52:-1),F(5),ue(r.getTotalCartItems()>0?57:-1),F(),ue(r.showAddModal?58:-1),F(),ue(r.showCategoryModal?59:-1))},dependencies:[rr,Oa,th,nh,ns,Pa,Ma,io],styles:["#groceries-page[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex:1;height:100%;overflow:hidden}#groceries-main-content[_ngcontent-%COMP%]{flex:1;overflow-y:auto;overflow-x:hidden}#groceries-main-content[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}#groceries-main-content[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:transparent}#groceries-main-content[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:#9ca3af66;border-radius:4px}#groceries-main-content[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background-color:#9ca3af99}#shopping-list-sidebar[_ngcontent-%COMP%]{max-height:100%;height:100%}#cart-items-container[_ngcontent-%COMP%]{flex:1 1 0%;min-height:0;max-height:calc(100vh - 280px);overflow-y:auto}#cart-items-container[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}#cart-items-container[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:transparent}#cart-items-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:#9ca3af80;border-radius:3px}#cart-items-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background-color:#9ca3afb3}"]})};var V4=[{value:"admin",label:"Admin",colorClass:"bg-primary/10 text-primary border-primary/20"},{value:"member",label:"Member",colorClass:"bg-surface-dark text-slate-300 border-border-dark"},{value:"guest",label:"Guest",colorClass:"bg-surface-dark text-text-muted border-border-dark"}];var L4=(n,e)=>e.value,lee=(n,e)=>e.id;function uee(n,e){if(n&1&&(x(0,"option",22),N(1),R()),n&2){let t=e.$implicit;Fe("value",t.value),F(),xe(t.label)}}function dee(n,e){if(n&1&&(x(0,"div",43),N(1),R()),n&2){let t=$().$implicit;F(),xe(t.name.charAt(0).toUpperCase())}}function hee(n,e){if(n&1){let t=je();x(0,"tr",36)(1,"td",41)(2,"div",5)(3,"div",42),le(4,dee,2,1,"div",43),R(),x(5,"div",44)(6,"span",45),N(7),R()()()(),x(8,"td",41)(9,"span",46),N(10),R()(),x(11,"td",41)(12,"div",47),Ot(13,"div",48),x(14,"span",49),N(15),R()()(),x(16,"td",41)(17,"span",50),N(18),yf(19,"date"),R()(),x(20,"td",51)(21,"div",52)(22,"button",53),Q("click",function(){let i=X(t).$implicit,s=$();return Z(s.openLoginModal(i))}),x(23,"span",9),N(24,"login"),R()(),x(25,"button",54),Q("click",function(){let i=X(t).$implicit,s=$();return Z(s.openEditModal(i))}),x(26,"span",9),N(27,"edit"),R()(),x(28,"button",55),Q("click",function(){let i=X(t).$implicit,s=$();return Z(s.deleteUser(i))}),x(29,"span",9),N(30,"delete"),R()()()()()}if(n&2){let t,r,i,s=e.$implicit,o=$();F(3),Du("background-image",s.avatarUrl?"url("+s.avatarUrl+")":""),F(),ue(s.avatarUrl?-1:4),F(3),xe(s.name),F(2),st(o.getRoleClass(s.role)),F(),Xe(" ",o.getRoleLabel(s.role)," "),F(3),st(o.getStatusColor(s.status)),F(),On("text-primary",s.status==="pending")("text-white",s.status!=="pending"),F(),Xe(" ",o.getStatusLabel(s.status)," "),F(3),Xe(" ",s.lastActive?vf(19,19,s.lastActive,"short"):"Never"," "),F(4),Fe("title",((t=o.currentUser())==null?null:t.id)===s.id?"Currently Logged In":"Switch to User")("disabled",((r=o.currentUser())==null?null:r.id)===s.id),F(),On("text-primary",((i=o.currentUser())==null?null:i.id)===s.id)}}function fee(n,e){n&1&&(x(0,"tr")(1,"td",56)(2,"span",57),N(3,"person_off"),R(),x(4,"p"),N(5,"No users found matching your criteria."),R()()())}function pee(n,e){if(n&1&&Ot(0,"img",65),n&2){let t=$(2);Fe("src",t.formAvatarUrl,er)}}function gee(n,e){n&1&&(x(0,"span",66),N(1,"person"),R())}function mee(n,e){if(n&1){let t=je();x(0,"button",80),Q("click",function(i){X(t);let s=$(2);return Z(s.removeAvatar(i))}),x(1,"span",81),N(2,"close"),R()()}}function yee(n,e){if(n&1&&(x(0,"option",22),N(1),R()),n&2){let t=e.$implicit;Fe("value",t.value),F(),xe(t.label)}}function vee(n,e){if(n&1){let t=je();x(0,"div")(1,"label",73),N(2,"Status"),R(),x(3,"select",76),dn("ngModelChange",function(i){X(t);let s=$(2);return gn(s.formStatus,i)||(s.formStatus=i),Z(i)}),x(4,"option",24),N(5,"Active"),R(),x(6,"option",26),N(7,"Inactive"),R(),x(8,"option",25),N(9,"Pending"),R(),x(10,"option",28),N(11,"Away"),R(),x(12,"option",27),N(13,"Offline"),R()()()}if(n&2){let t=$(2);F(3),un("ngModel",t.formStatus)}}function _ee(n,e){if(n&1){let t=je();x(0,"div",40)(1,"div",58)(2,"div",59)(3,"h3",60),N(4),R(),x(5,"button",61),Q("click",function(){X(t);let i=$();return Z(i.closeModal())}),x(6,"span",7),N(7,"close"),R()()(),x(8,"div",62)(9,"div",63)(10,"div",64),Q("click",function(){X(t);let i=bb(23);return Z(i.click())}),le(11,pee,1,1,"img",65)(12,gee,2,0,"span",66),x(13,"div",67)(14,"span",68),N(15,"upload"),R()(),le(16,mee,3,0,"button",69),R(),x(17,"div",44)(18,"span",70),N(19,"Profile Photo"),R(),x(20,"span",71),N(21,"Click to upload"),R()(),x(22,"input",72,0),Q("change",function(i){X(t);let s=$();return Z(s.onAvatarSelected(i))}),R()(),x(24,"div")(25,"label",73),N(26,"Full Name"),R(),x(27,"input",74),dn("ngModelChange",function(i){X(t);let s=$();return gn(s.formName,i)||(s.formName=i),Z(i)}),R()(),x(28,"div")(29,"label",73),N(30),R(),x(31,"input",75),dn("ngModelChange",function(i){X(t);let s=$();return gn(s.formPassword,i)||(s.formPassword=i),Z(i)}),R()(),x(32,"div")(33,"label",73),N(34,"Role"),R(),x(35,"select",76),dn("ngModelChange",function(i){X(t);let s=$();return gn(s.formRole,i)||(s.formRole=i),Z(i)}),Tt(36,yee,2,2,"option",22,L4),R()(),le(38,vee,14,1,"div"),R(),x(39,"div",77)(40,"button",78),Q("click",function(){X(t);let i=$();return Z(i.closeModal())}),N(41,"Cancel"),R(),x(42,"button",79),Q("click",function(){X(t);let i=$();return Z(i.saveUser())}),N(43,"Save User"),R()()()()}if(n&2){let t=$();F(4),xe(t.editingUser?"Edit User":"New User"),F(7),ue(t.formAvatarUrl?11:12),F(5),ue(t.formAvatarUrl?16:-1),F(11),un("ngModel",t.formName),F(3),xe(t.editingUser?"New Password (Optional)":"Password"),F(),un("ngModel",t.formPassword),Fe("placeholder",t.editingUser?"Leave blank to keep current":"Enter password"),F(4),un("ngModel",t.formRole),F(),St(t.userRoles),F(2),ue(t.editingUser?38:-1)}}function wee(n,e){if(n&1&&(x(0,"p",86),N(1),R()),n&2){let t=$(2);F(),xe(t.loginError)}}function Iee(n,e){if(n&1){let t=je();x(0,"div",40)(1,"div",82)(2,"div",59)(3,"h3",60),N(4),R(),x(5,"button",61),Q("click",function(){X(t);let i=$();return Z(i.closeLoginModal())}),x(6,"span",7),N(7,"close"),R()()(),x(8,"div",62)(9,"div",83)(10,"div",84),Ot(11,"img",65),R()(),x(12,"div")(13,"label",73),N(14,"Password"),R(),x(15,"input",85),dn("ngModelChange",function(i){X(t);let s=$();return gn(s.loginPasswordInput,i)||(s.loginPasswordInput=i),Z(i)}),Q("keyup.enter",function(){X(t);let i=$();return Z(i.attemptLogin())}),R(),le(16,wee,2,1,"p",86),R()(),x(17,"div",77)(18,"button",78),Q("click",function(){X(t);let i=$();return Z(i.closeLoginModal())}),N(19,"Cancel"),R(),x(20,"button",79),Q("click",function(){X(t);let i=$();return Z(i.attemptLogin())}),N(21,"Login"),R()()()()}if(n&2){let t=$();F(4),Xe("Login as ",t.loginTargetUser==null?null:t.loginTargetUser.name),F(7),Fe("src",(t.loginTargetUser==null?null:t.loginTargetUser.avatarUrl)||"https://ui-avatars.com/api/?name="+(t.loginTargetUser==null?null:t.loginTargetUser.name)+"&background=random",er),F(4),un("ngModel",t.loginPasswordInput),F(),ue(t.loginError?16:-1)}}var vw=class n{userService=j(Lr);dialogService=j(Ur);imageService=j(sh);loadingService=j(ir);users=this.userService.users;currentUser=this.userService.currentUser;userRoles=V4;showLoginModal=!1;loginTargetUser=null;loginPasswordInput="";loginError="";openLoginModal(e){this.loginTargetUser=e,this.loginPasswordInput="",this.loginError="",this.showLoginModal=!0}closeLoginModal(){this.showLoginModal=!1}attemptLogin(){if(!this.loginTargetUser)return;if((this.loginTargetUser.password||"")!==this.loginPasswordInput){this.loginError="Incorrect password";return}this.loadingService.show("Logging in..."),this.userService.login$(this.loginTargetUser).subscribe({next:()=>{this.loadingService.hide(),this.closeLoginModal()},error:()=>{this.loadingService.hide(),this.closeLoginModal()}})}searchQuery=Ee("");roleFilter=Ee("All");statusFilter=Ee("All");filteredUsers=ot(()=>{let e=this.users(),t=this.searchQuery().toLowerCase(),r=this.roleFilter(),i=this.statusFilter();return t&&(e=e.filter(s=>s.name.toLowerCase().includes(t))),r!=="All"&&(e=e.filter(s=>s.role===r)),i!=="All"&&(e=e.filter(s=>s.status===i)),e});showModal=!1;editingUser=null;formName="";formPassword="";formRole="member";formStatus="active";formAvatarUrl="";openAddModal(){this.editingUser=null,this.resetForm(),this.showModal=!0}openEditModal(e){this.editingUser=e,this.formName=e.name,this.formRole=e.role,this.formStatus=e.status,this.formAvatarUrl=e.avatarUrl||"",this.showModal=!0}closeModal(){this.showModal=!1}resetForm(){this.formName="",this.formPassword="",this.formRole="member",this.formStatus="active",this.formAvatarUrl=""}removeAvatar(e){e.stopPropagation(),this.formAvatarUrl=""}saveUser(){if(this.formName.trim())if(this.loadingService.show("Saving user..."),this.editingUser){let e={name:this.formName,role:this.formRole,status:this.formStatus,avatarUrl:this.formAvatarUrl};this.formPassword&&(e.password=this.formPassword),this.userService.updateUser$(this.editingUser.id,e).subscribe({next:()=>{this.loadingService.hide(),this.closeModal()},error:()=>this.loadingService.hide()})}else this.userService.createUser$({name:this.formName,password:this.formPassword,role:this.formRole,status:"pending",avatarUrl:this.formAvatarUrl||`https://ui-avatars.com/api/?name=${this.formName}&background=random`}).subscribe({next:()=>{this.loadingService.hide(),this.closeModal()},error:()=>this.loadingService.hide()})}deleteUser(e){this.dialogService.confirm$(`Delete user ${e.name}?`,"Delete User").subscribe(t=>{t&&(this.loadingService.show("Deleting user..."),this.userService.deleteUser$(e.id).subscribe({next:()=>this.loadingService.hide(),error:()=>this.loadingService.hide()}))})}getRoleLabel(e){return this.userRoles.find(t=>t.value===e)?.label||e}getRoleClass(e){return this.userRoles.find(t=>t.value===e)?.colorClass||"bg-gray-100 text-gray-800"}getStatusColor(e){switch(e){case"active":return"bg-emerald-500 shadow-[0_0_8px_rgba(16,185,129,0.5)]";case"away":return"bg-amber-500 shadow-[0_0_8px_rgba(245,158,11,0.5)]";case"offline":return"bg-gray-500";case"pending":return"border-2 border-primary/50 border-t-transparent animate-spin";default:return"bg-gray-400"}}getStatusLabel(e){return e==="pending"?"Invited":e.charAt(0).toUpperCase()+e.slice(1)}onAvatarSelected(e){let t=e.target.files?.[0];t&&(this.loadingService.show("Processing image..."),this.imageService.compressImage(t).then(r=>{this.formAvatarUrl=r}).finally(()=>this.loadingService.hide()))}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Tn({type:n,selectors:[["app-users"]],decls:78,vars:7,consts:[["fileInput",""],[1,"flex-1","flex","flex-col","h-full","overflow-hidden","bg-background-light","dark:bg-background-dark","relative"],[1,"flex","items-center","justify-between","px-8","py-5","border-b","border-border-dark","bg-background-dark","sticky","top-0","z-10"],[1,"flex","flex-col","gap-1"],[1,"text-white","text-2xl","font-bold","leading-tight","tracking-tight"],[1,"flex","items-center","gap-4"],[1,"size-10","rounded-full","bg-surface-dark","hover:bg-border-dark","flex","items-center","justify-center","text-text-muted","hover:text-white","transition-colors"],[1,"material-symbols-outlined"],[1,"bg-primary","hover:bg-primary-hover","text-white","h-10","px-5","rounded-lg","text-sm","font-bold","flex","items-center","gap-2","transition-all","shadow-lg","shadow-primary/20",3,"click"],[1,"material-symbols-outlined","text-[20px]"],[1,"flex-1","overflow-y-auto","p-8"],[1,"max-w-[1200px]","mx-auto","flex","flex-col","gap-6"],[1,"text-text-muted","text-base","max-w-2xl"],[1,"flex","flex-col","sm:flex-row","gap-4","justify-between","items-start","sm:items-center","bg-surface-dark","p-4","rounded-xl","border","border-border-dark"],[1,"relative","w-full","sm:max-w-md","group"],[1,"absolute","inset-y-0","left-0","pl-3","flex","items-center","pointer-events-none"],[1,"material-symbols-outlined","text-text-muted","group-focus-within:text-primary","transition-colors"],["placeholder","Search users by name...","type","text",1,"block","w-full","pl-10","pr-3","py-2.5","border","border-border-dark","rounded-lg","leading-5","bg-background-dark","text-white","placeholder-text-muted","focus:outline-none","focus:ring-1","focus:ring-primary","focus:border-primary","sm:text-sm","transition-all",3,"ngModelChange","ngModel"],[1,"flex","gap-3","w-full","sm:w-auto"],[1,"relative"],[1,"appearance-none","bg-background-dark","border","border-border-dark","text-white","text-sm","rounded-lg","focus:ring-primary","focus:border-primary","block","w-full","pl-3","pr-10","py-2.5","cursor-pointer","hover:border-slate-600","transition-colors",3,"ngModelChange","ngModel"],["value","All"],[3,"value"],[1,"pointer-events-none","absolute","inset-y-0","right-0","flex","items-center","px-2","text-text-muted"],["value","active"],["value","pending"],["value","inactive"],["value","offline"],["value","away"],[1,"bg-surface-dark","rounded-xl","border","border-border-dark","overflow-hidden","shadow-sm"],[1,"overflow-x-auto"],[1,"w-full","text-left","border-collapse"],[1,"border-b","border-border-dark","bg-surface-dark"],[1,"py-4","px-6","text-xs","font-semibold","uppercase","tracking-wider","text-text-muted"],[1,"py-4","px-6","text-xs","font-semibold","uppercase","tracking-wider","text-text-muted","text-right"],[1,"divide-y","divide-border-dark"],[1,"hover:bg-slate-800","transition-colors","group"],[1,"px-6","py-4","border-t","border-border-dark","bg-surface-dark","flex","items-center","justify-between"],[1,"text-sm","text-text-muted"],[1,"font-medium","text-white"],[1,"fixed","inset-0","z-50","flex","items-center","justify-center","p-4","bg-black/50","backdrop-blur-sm","animate-in","fade-in","duration-200"],[1,"py-4","px-6","whitespace-nowrap"],[1,"bg-center","bg-no-repeat","bg-cover","rounded-full","size-10","border","border-border-dark","bg-surface-dark","relative","overflow-hidden"],[1,"absolute","inset-0","flex","items-center","justify-center","text-xs","font-bold","text-text-muted","bg-border-dark"],[1,"flex","flex-col"],[1,"text-white","text-sm","font-semibold"],[1,"inline-flex","items-center","px-2.5","py-0.5","rounded-full","text-xs","font-medium","border"],[1,"flex","items-center","gap-2"],[1,"h-2","w-2","rounded-full"],[1,"text-sm"],[1,"text-text-muted","text-sm"],[1,"py-4","px-6","whitespace-nowrap","text-right"],[1,"flex","items-center","justify-end","gap-2","opacity-0","group-hover:opacity-100","transition-opacity"],[1,"p-2","text-text-muted","hover:text-white","hover:bg-border-dark","rounded-lg","transition-colors",3,"click","title","disabled"],["title","Edit User",1,"p-2","text-text-muted","hover:text-white","hover:bg-border-dark","rounded-lg","transition-colors",3,"click"],["title","Delete User",1,"p-2","text-text-muted","hover:text-red-400","hover:bg-border-dark","rounded-lg","transition-colors",3,"click"],["colspan","5",1,"py-12","text-center","text-text-muted"],[1,"material-symbols-outlined","text-4xl","mb-2","opacity-50"],[1,"bg-surface-dark","border","border-border-dark","w-full","max-w-md","rounded-xl","shadow-2xl","overflow-hidden","animate-in","zoom-in-95","duration-200"],[1,"p-6","border-b","border-border-dark","flex","justify-between","items-center","bg-background-dark"],[1,"font-bold","text-lg","text-white"],[1,"p-1","rounded-full","hover:bg-border-dark","text-text-muted","hover:text-white","transition-colors",3,"click"],[1,"p-6","space-y-4"],[1,"flex","items-center","gap-4","pb-2","border-b","border-border-dark"],[1,"relative","size-14","rounded-full","bg-background-dark","border","border-border-dark","overflow-hidden","flex","items-center","justify-center","group","cursor-pointer",3,"click"],[1,"w-full","h-full","object-cover",3,"src"],[1,"material-symbols-outlined","text-text-muted","text-2xl"],[1,"absolute","inset-0","bg-black/50","flex","items-center","justify-center","opacity-0","group-hover:opacity-100","transition-opacity"],[1,"material-symbols-outlined","text-white","text-sm"],["title","Remove Photo",1,"absolute","top-0","right-0","bg-red-500","rounded-full","p-0.5","text-white","z-20","hover:bg-red-600","transition-colors","shadow-sm","flex","items-center","justify-center","transform","translate-x-1/4","-translate-y-1/4"],[1,"text-xs","font-semibold","uppercase","text-text-muted"],[1,"text-xs","text-text-muted"],["type","file","accept","image/*",1,"hidden",3,"change"],[1,"block","text-xs","font-semibold","uppercase","text-text-muted","mb-1.5"],["type","text","placeholder","e.g. Alex Johnson",1,"w-full","bg-background-dark","border","border-border-dark","rounded-lg","px-4","py-2.5","text-white","focus:outline-none","focus:border-primary","focus:ring-1","focus:ring-primary","transition-all",3,"ngModelChange","ngModel"],["type","password",1,"w-full","bg-background-dark","border","border-border-dark","rounded-lg","px-4","py-2.5","text-white","focus:outline-none","focus:border-primary","focus:ring-1","focus:ring-primary","transition-all",3,"ngModelChange","ngModel","placeholder"],[1,"w-full","bg-background-dark","border","border-border-dark","rounded-lg","px-4","py-2.5","text-white","focus:outline-none","focus:border-primary","focus:ring-1","focus:ring-primary","transition-all","appearance-none",3,"ngModelChange","ngModel"],[1,"p-4","bg-background-dark","border-t","border-border-dark","flex","justify-end","gap-3"],[1,"px-5","py-2.5","rounded-lg","border","border-border-dark","text-text-muted","font-bold","text-sm","hover:text-white","hover:border-white","transition-colors",3,"click"],[1,"px-5","py-2.5","rounded-lg","bg-primary","text-white","font-bold","text-sm","hover:bg-primary-hover","transition-colors","shadow-lg","shadow-primary/20",3,"click"],["title","Remove Photo",1,"absolute","top-0","right-0","bg-red-500","rounded-full","p-0.5","text-white","z-20","hover:bg-red-600","transition-colors","shadow-sm","flex","items-center","justify-center","transform","translate-x-1/4","-translate-y-1/4",3,"click"],[1,"material-symbols-outlined","text-[10px]","font-bold"],[1,"bg-surface-dark","border","border-border-dark","w-full","max-w-sm","rounded-xl","shadow-2xl","overflow-hidden","animate-in","zoom-in-95","duration-200"],[1,"flex","justify-center","mb-4"],[1,"relative","size-20","rounded-full","border-2","border-border-dark","overflow-hidden"],["type","password","placeholder","Enter password","autofocus","",1,"w-full","bg-background-dark","border","border-border-dark","rounded-lg","px-4","py-2.5","text-white","focus:outline-none","focus:border-primary","focus:ring-1","focus:ring-primary","transition-all",3,"ngModelChange","keyup.enter","ngModel"],[1,"text-red-400","text-xs","mt-1"]],template:function(t,r){t&1&&(x(0,"div",1)(1,"header",2)(2,"div",3)(3,"h2",4),N(4,"User Management"),R()(),x(5,"div",5)(6,"button",6)(7,"span",7),N(8,"notifications"),R()(),x(9,"button",8),Q("click",function(){return r.openAddModal()}),x(10,"span",9),N(11,"add"),R(),x(12,"span"),N(13,"Add New User"),R()()()(),x(14,"div",10)(15,"div",11)(16,"p",12),N(17," Manage access and roles for your household members. You can invite new family members, assign tasks, and control permissions. "),R(),x(18,"div",13)(19,"div",14)(20,"div",15)(21,"span",16),N(22,"search"),R()(),x(23,"input",17),Q("ngModelChange",function(s){return r.searchQuery.set(s)}),R()(),x(24,"div",18)(25,"div",19)(26,"select",20),Q("ngModelChange",function(s){return r.roleFilter.set(s)}),x(27,"option",21),N(28,"All Roles"),R(),Tt(29,uee,2,2,"option",22,L4),R(),x(31,"div",23)(32,"span",9),N(33,"expand_more"),R()()(),x(34,"div",19)(35,"select",20),Q("ngModelChange",function(s){return r.statusFilter.set(s)}),x(36,"option",21),N(37,"All Status"),R(),x(38,"option",24),N(39,"Active"),R(),x(40,"option",25),N(41,"Pending"),R(),x(42,"option",26),N(43,"Inactive"),R(),x(44,"option",27),N(45,"Offline"),R(),x(46,"option",28),N(47,"Away"),R()(),x(48,"div",23)(49,"span",9),N(50,"expand_more"),R()()()()(),x(51,"div",29)(52,"div",30)(53,"table",31)(54,"thead")(55,"tr",32)(56,"th",33),N(57,"User"),R(),x(58,"th",33),N(59,"Role"),R(),x(60,"th",33),N(61,"Status"),R(),x(62,"th",33),N(63,"Last Active"),R(),x(64,"th",34),N(65,"Actions"),R()()(),x(66,"tbody",35),Tt(67,hee,31,22,"tr",36,lee,!1,fee,6,0,"tr"),R()()(),x(70,"div",37)(71,"p",38),N(72,"Showing "),x(73,"span",39),N(74),R(),N(75," users"),R()()()()(),le(76,_ee,44,9,"div",40),le(77,Iee,22,4,"div",40),R()),t&2&&(F(23),Fe("ngModel",r.searchQuery()),F(3),Fe("ngModel",r.roleFilter()),F(3),St(r.userRoles),F(6),Fe("ngModel",r.statusFilter()),F(32),St(r.filteredUsers()),F(7),xe(r.filteredUsers().length),F(2),ue(r.showModal?76:-1),F(),ue(r.showLoginModal?77:-1))},dependencies:[rr,Oa,th,nh,ns,Pa,Ma,io,Sf],encapsulation:2})};var U4=[{path:"",redirectTo:"overview",pathMatch:"full"},{path:"overview",component:pw},{path:"groceries",component:yw},{path:"users",component:vw}];var j4={providers:[oE(),uC(U4),BO(()=>$O(Xd.firebase)),u4(()=>d4()),hF(()=>fF())]};function Eee(n,e){if(n&1&&(Dn(0,"h3",4),N(1),qn()),n&2){let t=$();F(),xe(t.title)}}function bee(n,e){if(n&1){let t=je();Dn(0,"button",9),Su("click",function(){X(t);let i=$(2);return Z(i.cancel())}),N(1),qn()}if(n&2){let t=$();F(),Xe(" ",t.cancelText||"Cancel"," ")}}function Cee(n,e){if(n&1){let t=je();Dn(0,"div",0)(1,"div",1),Su("click",function(){let i=X(t),s=$();return Z(i.type==="confirm"?s.cancel():s.confirm())}),qn(),Dn(2,"div",2)(3,"div",3),le(4,Eee,2,1,"h3",4),Dn(5,"p",5),N(6),qn()(),Dn(7,"div",6),le(8,bee,2,1,"button",7),Dn(9,"button",8),Su("click",function(){X(t);let i=$();return Z(i.confirm())}),N(10),qn()()()()}if(n&2){let t=e;F(4),ue(t.title?4:-1),F(2),xe(t.message),F(2),ue(t.type==="confirm"?8:-1),F(),On("bg-rose-500",t.type==="error")("bg-primary",t.type!=="error"),F(),Xe(" ",t.confirmText||"OK"," ")}}var _w=class n{dialogService=j(Ur);confirm(){this.dialogService.close(!0)}cancel(){this.dialogService.close(!1)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Tn({type:n,selectors:[["app-dialog"]],decls:1,vars:1,consts:[[1,"fixed","inset-0","z-[100]","flex","items-center","justify-center","p-4","bg-black/50","backdrop-blur-sm","animate-in","fade-in","duration-200"],[1,"absolute","inset-0",3,"click"],[1,"relative","bg-white","dark:bg-surface-dark","w-full","max-w-sm","rounded-2xl","shadow-xl","overflow-hidden","animate-in","zoom-in-95","duration-200","border","border-slate-200","dark:border-border-dark"],[1,"p-6"],[1,"text-xl","font-bold","text-slate-900","dark:text-white","mb-2"],[1,"text-slate-600","dark:text-slate-300","leading-relaxed"],[1,"p-4","bg-slate-50","dark:bg-black/20","flex","justify-end","gap-3"],[1,"px-4","py-2","rounded-lg","text-slate-600","dark:text-slate-400","font-bold","hover:bg-slate-200","dark:hover:bg-border-dark","transition-colors"],[1,"px-5","py-2","rounded-lg","text-slate-900","font-bold","hover:brightness-110","transition-all","shadow-lg","active:scale-95",3,"click"],[1,"px-4","py-2","rounded-lg","text-slate-600","dark:text-slate-400","font-bold","hover:bg-slate-200","dark:hover:bg-border-dark","transition-colors",3,"click"]],template:function(t,r){if(t&1&&le(0,Cee,11,8,"div",0),t&2){let i;ue((i=r.dialogService.dialog())?0:-1,i)}},dependencies:[rr],encapsulation:2})};var ww=class n{firestore=j(pi);COLLECTIONS=["groceries","categories","overview_tasks","assignees","shopping_history"];async migrateAllDataToUser(e){if(!e)return console.error("\u274C userId is required"),[];console.log(`\u{1F504} Starting data migration to userId: ${e}`);let t=[];for(let r of this.COLLECTIONS){let i=await this.migrateCollection(r,e);t.push(i)}return console.log("\u2705 Migration complete!",t),t}async migrateCollection(e,t){console.log(`  \u{1F4C1} Migrating collection: ${e}`);let r=0,i=0;try{let s=ro(this.firestore,e),a=(await D1(s)).docs.map(async c=>{let d=c.data();if(d.userId===t){console.log(`    \u23ED\uFE0F Skipping ${c.id} (already has userId)`);return}if(d.userId==="system"&&e==="categories"){console.log(`    \u23ED\uFE0F Skipping ${c.id} (system category)`);return}try{await Na(Vr(this.firestore,e,c.id),{userId:t}),console.log(`    \u2705 Updated ${c.id}`),r++}catch(h){console.error(`    \u274C Error updating ${c.id}:`,h),i++}});await Promise.all(a)}catch(s){console.error(`  \u274C Error reading collection ${e}:`,s),i++}return console.log(`  \u{1F4CA} ${e}: ${r} updated, ${i} errors`),{collection:e,updated:r,errors:i}}async previewMigration(){console.log("\u{1F4CB} Preview of data to migrate:");for(let e of this.COLLECTIONS)try{let t=ro(this.firestore,e),r=await D1(t),i=r.docs.filter(s=>{let o=s.data();return!o.userId||o.userId!=="system"&&e!=="categories"});console.log(`  \u{1F4C1} ${e}: ${i.length}/${r.docs.length} documents need migration`)}catch(t){console.error(`  \u274C Error reading ${e}:`,t)}}static \u0275fac=function(t){return new(t||n)};static \u0275prov=se({token:n,factory:n.\u0275fac,providedIn:"root"})};var Tee=(n,e)=>e.id;function See(n,e){n&1&&(x(0,"h1",6),N(1,"HomeNeeds"),R())}function Dee(n,e){n&1&&(x(0,"p",7),N(1,"Manage your home effortlessly"),R())}function Aee(n,e){n&1&&(x(0,"span",11),N(1,"Overview"),R())}function xee(n,e){n&1&&(x(0,"span",14),N(1,"Groceries"),R())}function Ree(n,e){n&1&&(x(0,"span",14),N(1,"Users"),R())}function kee(n,e){n&1&&(x(0,"span",18),N(1,"Log Out"),R())}function Nee(n,e){if(n&1&&(x(0,"div",20)(1,"div",26)(2,"span",27),N(3,"pending_actions"),R(),x(4,"span",28),N(5,"Today"),R()(),x(6,"p",29),N(7),R(),x(8,"p",30),N(9,"Items Pending"),R()()),n&2){let t=$();F(7),xe(t.pendingItemsCount())}}function Mee(n,e){if(n&1&&(x(0,"div",21)(1,"span",31),N(2,"pending_actions"),R(),x(3,"span",32),N(4),R()()),n&2){let t=$();F(4),xe(t.pendingItemsCount())}}function Pee(n,e){if(n&1&&(x(0,"div",33)(1,"span",34),N(2),R(),x(3,"span",35),N(4),R()(),x(5,"span",36),N(6,"expand_more"),R()),n&2){let t,r,i=$();F(2),xe(((t=i.currentUser())==null?null:t.name)||"Guest"),F(2),xe(((r=i.currentUser())==null?null:r.role)||"Visitor")}}function Oee(n,e){n&1&&(x(0,"div",47)(1,"span",49),N(2,"lock"),R()())}function Fee(n,e){if(n&1){let t=je();x(0,"button",44),Q("click",function(){let i=X(t).$implicit,s=$(3);return Z(s.selectUser(i))}),x(1,"div",45),Ot(2,"img",46),le(3,Oee,3,0,"div",47),R(),x(4,"span",48),N(5),R()()}if(n&2){let t=e.$implicit;F(2),Fe("src",t.avatarUrl||"https://ui-avatars.com/api/?name="+t.name+"&background=random",er),F(),ue(t.password?3:-1),F(2),xe(t.name)}}function Vee(n,e){if(n&1&&(x(0,"div",41),Tt(1,Fee,6,3,"button",43,Tee),R()),n&2){let t=$(2);F(),St(t.users())}}function Lee(n,e){if(n&1&&(x(0,"p",55),N(1),R()),n&2){let t=$(3);F(),xe(t.loginError())}}function Uee(n,e){if(n&1){let t=je();x(0,"div",42)(1,"div",50)(2,"div",51),Ot(3,"img",46),R(),x(4,"h3",52),N(5),R()(),x(6,"div",53)(7,"div")(8,"input",54),Q("input",function(i){X(t);let s=$(2);return Z(s.passwordInput.set(i.target.value))})("keyup.enter",function(){X(t);let i=$(2);return Z(i.verifyLogin())}),R(),le(9,Lee,2,1,"p",55),R(),x(10,"button",56),Q("click",function(){X(t);let i=$(2);return Z(i.verifyLogin())}),N(11,"Login"),R(),x(12,"button",57),Q("click",function(){X(t);let i=$(2);return Z(i.cancelPassword())}),N(13,"Back"),R()()()}if(n&2){let t,r,i=$(2);F(3),Fe("src",((t=i.selectedUser())==null?null:t.avatarUrl)||"https://ui-avatars.com/api/?name="+((t=i.selectedUser())==null?null:t.name)+"&background=random",er),F(2),xe((r=i.selectedUser())==null?null:r.name),F(3),Fe("value",i.passwordInput()),F(),ue(i.loginError()?9:-1)}}function jee(n,e){if(n&1&&(x(0,"div",25)(1,"div",37)(2,"div",38)(3,"h1",39),N(4,"Welcome Back"),R(),x(5,"p",40),N(6,"Who is using HomeNeeds?"),R()(),le(7,Vee,3,0,"div",41)(8,Uee,14,4,"div",42),R()()),n&2){let t=$();F(7),ue(t.loginStep()==="select"?7:8)}}var Iw=class n{title=Ee("frontend");overviewService=j(rs);userService=j(Lr);migrationService=j(ww);loadingService=j(ir);users=this.userService.users;currentUser=this.userService.currentUser;loading=this.userService.loading;sidebarCollapsed=Ee(this.getSavedSidebarState());loginStep=Ee("select");selectedUser=Ee(null);passwordInput=Ee("");loginError=Ee("");pendingItemsCount=ot(()=>this.overviewService.tasks().filter(e=>!e.isCompleted).length);constructor(){window.userService=this.userService,window.migrationService=this.migrationService,window.loadingService=this.loadingService,console.log("\u{1F527} Dev Console Tools Available:"),console.log("   \u2192 window.userService.manualMigrateAllUsers()"),console.log('   \u2192 window.migrationService.migrateAllDataToUser("user_xxx")'),console.log("   \u2192 window.migrationService.previewMigration()"),console.log('   \u2192 window.loadingService.show("Loading...")'),console.log("   \u2192 window.loadingService.hide()"),Ni(()=>{let e=this.sidebarCollapsed();localStorage.setItem("sidebar-collapsed",JSON.stringify(e))})}getSavedSidebarState(){let e=localStorage.getItem("sidebar-collapsed");return e?JSON.parse(e):!1}toggleSidebar(){this.sidebarCollapsed.update(e=>!e)}selectUser(e){e.password?(this.selectedUser.set(e),this.loginStep.set("password"),this.passwordInput.set(""),this.loginError.set("")):this.userService.login(e)}cancelPassword(){this.loginStep.set("select"),this.selectedUser.set(null)}async verifyLogin(){let e=this.selectedUser();e&&(e.password===this.passwordInput()?(await this.userService.login(e),this.loginStep.set("select"),this.selectedUser.set(null)):this.loginError.set("Incorrect password"))}logout(){this.userService.logout()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Tn({type:n,selectors:[["app-root"]],hostAttrs:[1,"w-full","h-screen","flex","overflow-hidden"],decls:39,vars:29,consts:[["id","app-sidebar"],["id","sidebar-toggle",1,"absolute","-right-3","top-6","z-10","w-6","h-6","bg-primary","rounded-full","flex","items-center","justify-center","shadow-lg","hover:bg-primary-hover","transition-all",3,"click","title"],[1,"material-symbols-outlined","text-white","text-sm",2,"font-size","16px"],[1,"flex","flex-col","mb-8"],[1,"flex","items-center","gap-2","mb-1"],[1,"material-symbols-outlined","text-primary",2,"font-size","32px"],[1,"text-2xl","font-extrabold","tracking-tight","whitespace-nowrap"],[1,"text-sm","text-slate-500","dark:text-text-muted"],["id","main-nav",1,"flex","flex-col","gap-2"],["id","nav-overview","routerLink","/overview","routerLinkActive","bg-primary/10 text-primary-hover dark:text-primary",3,"title"],[1,"material-symbols-outlined","filled"],[1,"font-bold","text-sm"],["id","nav-groceries","routerLink","/groceries","routerLinkActive","bg-primary/10 text-primary-hover dark:text-primary",3,"title"],[1,"material-symbols-outlined","group-hover:text-slate-900","dark:group-hover:text-white","transition-colors"],[1,"font-medium","text-sm","group-hover:text-slate-900","dark:group-hover:text-white","transition-colors"],["id","nav-users","routerLink","/users","routerLinkActive","bg-primary/10 text-primary-hover dark:text-primary",3,"title"],["id","nav-logout",3,"click","title"],[1,"material-symbols-outlined","group-hover:text-red-500","dark:group-hover:text-red-400","transition-colors"],[1,"font-medium","text-sm","group-hover:text-red-500","dark:group-hover:text-red-400","transition-colors"],[1,"flex","flex-col","gap-4","mt-8"],["id","stats-card",1,"p-5","rounded-2xl","bg-surface-dark/40","border","border-border-dark","backdrop-blur-sm"],["title","Items Pending",1,"flex","flex-col","items-center","p-2","rounded-xl","bg-surface-dark/40","border","border-border-dark"],["id","user-profile"],["alt","User avatar",1,"w-8","h-8","rounded-full","object-cover",3,"src","title"],[1,"flex-1","h-screen","flex","flex-col","overflow-hidden"],[1,"fixed","inset-0","z-[100]","bg-[#111317]","flex","items-center","justify-center","p-4"],[1,"flex","justify-between","items-start","mb-2"],[1,"material-symbols-outlined","text-text-muted"],[1,"text-xs","font-bold","text-primary","bg-primary/10","px-2","py-1","rounded-full"],[1,"text-3xl","font-black","text-white","leading-tight","mb-1"],[1,"text-xs","text-text-muted","font-medium"],[1,"material-symbols-outlined","text-text-muted","text-sm"],[1,"text-lg","font-bold","text-white"],[1,"flex","flex-col"],[1,"text-sm","font-bold","text-white","leading-none"],[1,"text-[10px]","text-text-muted","capitalize"],[1,"material-symbols-outlined","text-text-muted","ml-auto","text-sm"],[1,"max-w-4xl","w-full","flex","flex-col","items-center","gap-12","animate-in","fade-in","zoom-in","duration-300"],[1,"text-center","space-y-2"],[1,"text-4xl","font-bold","text-white","tracking-tight"],[1,"text-[#9ea7b7]","text-lg"],[1,"flex","flex-wrap","justify-center","gap-8"],[1,"bg-[#1a202e]","border","border-[#292e38]","rounded-2xl","p-8","w-full","max-w-sm","shadow-2xl","animate-in","zoom-in-95","duration-200"],[1,"group","flex","flex-col","items-center","gap-4","transition-transform","hover:scale-105","outline-none","focus:scale-105"],[1,"group","flex","flex-col","items-center","gap-4","transition-transform","hover:scale-105","outline-none","focus:scale-105",3,"click"],[1,"size-24","rounded-full","border-2","border-[#292e38]","group-hover:border-[#2060df]","overflow-hidden","transition-colors","relative"],[1,"w-full","h-full","object-cover",3,"src"],[1,"absolute","inset-0","bg-black/40","flex","items-center","justify-center","opacity-0","group-hover:opacity-100","transition-opacity"],[1,"text-lg","font-medium","text-[#9ea7b7]","group-hover:text-white","transition-colors"],[1,"material-symbols-outlined","text-white"],[1,"flex","flex-col","items-center","gap-4","mb-6"],[1,"size-16","rounded-full","border","border-[#292e38]","overflow-hidden"],[1,"text-white","font-bold","text-xl"],[1,"space-y-4"],["type","password","placeholder","Enter Password","autofocus","",1,"w-full","bg-[#111317]","border","border-[#292e38]","rounded-lg","px-4","py-3","text-white","focus:outline-none","focus:border-[#2060df]","focus:ring-1","focus:ring-[#2060df]","transition-all","text-center","placeholder-[#586173]",3,"input","keyup.enter","value"],[1,"text-red-400","text-xs","mt-2","text-center"],[1,"w-full","py-3","rounded-lg","bg-[#2060df]","text-white","font-bold","hover:bg-[#2060df]/90","transition-colors",3,"click"],[1,"w-full","py-3","rounded-lg","border","border-[#3b4250]","text-[#9ea7b7]","font-bold","hover:text-white","hover:border-white","transition-colors",3,"click"]],template:function(t,r){if(t&1&&(x(0,"aside",0)(1,"button",1),Q("click",function(){return r.toggleSidebar()}),x(2,"span",2),N(3),R()(),x(4,"div")(5,"div",3)(6,"div",4)(7,"span",5),N(8,"checklist"),R(),le(9,See,2,0,"h1",6),R(),le(10,Dee,2,0,"p",7),R(),x(11,"nav",8)(12,"a",9)(13,"span",10),N(14,"dashboard"),R(),le(15,Aee,2,0,"span",11),R(),x(16,"a",12)(17,"span",13),N(18,"shopping_cart"),R(),le(19,xee,2,0,"span",14),R(),x(20,"a",15)(21,"span",13),N(22,"group"),R(),le(23,Ree,2,0,"span",14),R(),x(24,"button",16),Q("click",function(){return r.logout()}),x(25,"span",17),N(26,"logout"),R(),le(27,kee,2,0,"span",18),R()()(),x(28,"div",19),le(29,Nee,10,1,"div",20)(30,Mee,5,1,"div",21),x(31,"div",22),Ot(32,"img",23),le(33,Pee,7,2),R()()(),x(34,"div",24),Ot(35,"router-outlet"),R(),Ot(36,"app-dialog")(37,"app-loading"),le(38,jee,9,1,"div",25)),t&2){let i,s;st(r.sidebarCollapsed()?"sidebar sidebar-collapsed":"sidebar sidebar-expanded"),F(),Fe("title",r.sidebarCollapsed()?"Expand sidebar":"Collapse sidebar"),F(2),Xe(" ",r.sidebarCollapsed()?"chevron_right":"chevron_left"," "),F(6),ue(r.sidebarCollapsed()?-1:9),F(),ue(r.sidebarCollapsed()?-1:10),F(2),st(r.sidebarCollapsed()?"nav-item nav-item-collapsed":"nav-item"),Fe("title",r.sidebarCollapsed()?"Overview":""),F(3),ue(r.sidebarCollapsed()?-1:15),F(),st(r.sidebarCollapsed()?"nav-item nav-item-collapsed":"nav-item"),Fe("title",r.sidebarCollapsed()?"Groceries":""),F(3),ue(r.sidebarCollapsed()?-1:19),F(),st(r.sidebarCollapsed()?"nav-item nav-item-collapsed":"nav-item"),Fe("title",r.sidebarCollapsed()?"Users":""),F(3),ue(r.sidebarCollapsed()?-1:23),F(),st(r.sidebarCollapsed()?"nav-item nav-item-collapsed text-left mt-auto":"nav-item text-left mt-auto"),Fe("title",r.sidebarCollapsed()?"Log Out":""),F(3),ue(r.sidebarCollapsed()?-1:27),F(2),ue(r.sidebarCollapsed()?30:29),F(2),st(r.sidebarCollapsed()?"flex items-center justify-center p-2 rounded-full bg-surface-dark cursor-pointer hover:bg-border-dark transition-colors":"flex items-center gap-3 p-4 rounded-full bg-surface-dark cursor-pointer hover:bg-border-dark transition-colors"),F(),Fe("src",((i=r.currentUser())==null?null:i.avatarUrl)||"https://ui-avatars.com/api/?name=Guest&background=random",er)("title",((s=r.currentUser())==null?null:s.name)||"Guest"),F(),ue(r.sidebarCollapsed()?-1:33),F(5),ue(!r.currentUser()&&!r.loading()?38:-1)}},dependencies:[Gf,qu,lC,_w,aw],styles:['.sidebar[_ngcontent-%COMP%]{height:100vh;flex-shrink:0;border-right-width:1px;border-right-style:solid;border-color:#e2e8f0;background-color:#fff;display:flex;flex-direction:column;justify-content:space-between;padding:1.5rem;position:relative;transition:width .3s cubic-bezier(.4,0,.2,1),padding .3s cubic-bezier(.4,0,.2,1)}.dark[_nghost-%COMP%]   .sidebar[_ngcontent-%COMP%], .dark   [_nghost-%COMP%]   .sidebar[_ngcontent-%COMP%]{border-color:#292e38;background-color:#111317}.sidebar-expanded[_ngcontent-%COMP%]{width:20rem}.sidebar-collapsed[_ngcontent-%COMP%]{width:5rem;padding-left:1rem;padding-right:1rem}.nav-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;padding:.75rem 1rem;border-radius:9999px;color:#64748b;transition:all .2s ease;width:100%}.nav-item[_ngcontent-%COMP%]:hover{background-color:#f1f5f9}.dark[_nghost-%COMP%]   .nav-item[_ngcontent-%COMP%], .dark   [_nghost-%COMP%]   .nav-item[_ngcontent-%COMP%]{color:#9ea7b7}.dark[_nghost-%COMP%]   .nav-item[_ngcontent-%COMP%]:hover, .dark   [_nghost-%COMP%]   .nav-item[_ngcontent-%COMP%]:hover{background-color:#1e2433}.nav-item-collapsed[_ngcontent-%COMP%]{justify-content:center;padding-left:.5rem;padding-right:.5rem}.nav-item[_ngcontent-%COMP%]   .material-symbols-outlined[_ngcontent-%COMP%]{transition:transform .2s ease}.sidebar-collapsed[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]:hover   .material-symbols-outlined[_ngcontent-%COMP%]{transform:scale(1.1)}#sidebar-toggle[_ngcontent-%COMP%]{transition:transform .3s ease,box-shadow .2s ease;z-index:100}#sidebar-toggle[_ngcontent-%COMP%]:hover{transform:scale(1.1);box-shadow:0 4px 12px #2060df66}#stats-card[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .2s ease}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}#user-profile[_ngcontent-%COMP%]{transition:all .3s cubic-bezier(.4,0,.2,1)}.sidebar-collapsed[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]{position:relative}.sidebar-collapsed[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]:after{content:attr(title);position:absolute;left:100%;top:50%;transform:translateY(-50%);margin-left:.75rem;padding:.5rem .75rem;background:#1a202e;color:#fff;font-size:.75rem;font-weight:500;border-radius:.5rem;white-space:nowrap;opacity:0;pointer-events:none;transition:opacity .2s ease,transform .2s ease;z-index:100;box-shadow:0 4px 12px #0000004d}.sidebar-collapsed[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]:hover:after{opacity:1;transform:translateY(-50%) translate(4px)}.sidebar-collapsed[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]:not([title]):after, .sidebar-collapsed[_ngcontent-%COMP%]   .nav-item[title=""][_ngcontent-%COMP%]:after{display:none}']})};jb(Iw,j4).catch(n=>console.error(n));
