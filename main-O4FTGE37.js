var L4=Object.defineProperty,U4=Object.defineProperties;var j4=Object.getOwnPropertyDescriptors;var N1=Object.getOwnPropertySymbols;var B4=Object.prototype.hasOwnProperty,$4=Object.prototype.propertyIsEnumerable;var M1=(n,e,t)=>e in n?L4(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,B=(n,e)=>{for(var t in e||={})B4.call(e,t)&&M1(n,t,e[t]);if(N1)for(var t of N1(e))$4.call(e,t)&&M1(n,t,e[t]);return n},oe=(n,e)=>U4(n,j4(e));var kn=null,Bg=!1,Tw=1,H4=null,Un=Symbol("SIGNAL");function pe(n){let e=kn;return kn=n,e}function Hg(){return kn}var zl={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Sh(n){if(Bg)throw new Error("");if(kn===null)return;kn.consumerOnSignalRead(n);let e=kn.producersTail;if(e!==void 0&&e.producer===n)return;let t,r=kn.recomputing;if(r&&(t=e!==void 0?e.nextProducer:kn.producers,t!==void 0&&t.producer===n)){kn.producersTail=t,t.lastReadVersion=n.version;return}let i=n.consumersTail;if(i!==void 0&&i.consumer===kn&&(!r||z4(i,kn)))return;let s=Wl(kn),o={producer:n,consumer:kn,nextProducer:t,prevConsumer:i,lastReadVersion:n.version,nextConsumer:void 0};kn.producersTail=o,e!==void 0?e.nextProducer=o:kn.producers=o,s&&V1(n,o)}function P1(){Tw++}function Sw(n){if(!(Wl(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===Tw)){if(!n.producerMustRecompute(n)&&!Ah(n)){Cw(n);return}n.producerRecomputeValue(n),Cw(n)}}function Dw(n){if(n.consumers===void 0)return;let e=Bg;Bg=!0;try{for(let t=n.consumers;t!==void 0;t=t.nextConsumer){let r=t.consumer;r.dirty||q4(r)}}finally{Bg=e}}function Aw(){return kn?.consumerAllowSignalWrites!==!1}function q4(n){n.dirty=!0,Dw(n),n.consumerMarkedDirty?.(n)}function Cw(n){n.dirty=!1,n.lastCleanEpoch=Tw}function Gl(n){return n&&O1(n),pe(n)}function O1(n){n.producersTail=void 0,n.recomputing=!0}function Dh(n,e){pe(e),n&&F1(n)}function F1(n){n.recomputing=!1;let e=n.producersTail,t=e!==void 0?e.nextProducer:n.producers;if(t!==void 0){if(Wl(n))do t=xw(t);while(t!==void 0);e!==void 0?e.nextProducer=void 0:n.producers=void 0}}function Ah(n){for(let e=n.producers;e!==void 0;e=e.nextProducer){let t=e.producer,r=e.lastReadVersion;if(r!==t.version||(Sw(t),r!==t.version))return!0}return!1}function Za(n){if(Wl(n)){let e=n.producers;for(;e!==void 0;)e=xw(e)}n.producers=void 0,n.producersTail=void 0,n.consumers=void 0,n.consumersTail=void 0}function V1(n,e){let t=n.consumersTail,r=Wl(n);if(t!==void 0?(e.nextConsumer=t.nextConsumer,t.nextConsumer=e):(e.nextConsumer=void 0,n.consumers=e),e.prevConsumer=t,n.consumersTail=e,!r)for(let i=n.producers;i!==void 0;i=i.nextProducer)V1(i.producer,i)}function xw(n){let e=n.producer,t=n.nextProducer,r=n.nextConsumer,i=n.prevConsumer;if(n.nextConsumer=void 0,n.prevConsumer=void 0,r!==void 0?r.prevConsumer=i:e.consumersTail=i,i!==void 0)i.nextConsumer=r;else if(e.consumers=r,!Wl(e)){let s=e.producers;for(;s!==void 0;)s=xw(s)}return t}function Wl(n){return n.consumerIsAlwaysLive||n.consumers!==void 0}function Rw(n){H4?.(n)}function z4(n,e){let t=e.producersTail;if(t!==void 0){let r=e.producers;do{if(r===n)return!0;if(r===t)break;r=r.nextProducer}while(r!==void 0)}return!1}function kw(n,e){return Object.is(n,e)}function qg(n,e){let t=Object.create(G4);t.computation=n,e!==void 0&&(t.equal=e);let r=()=>{if(Sw(t),Sh(t),t.value===$g)throw t.error;return t.value};return r[Un]=t,Rw(t),r}var Ew=Symbol("UNSET"),bw=Symbol("COMPUTING"),$g=Symbol("ERRORED"),G4=oe(B({},zl),{value:Ew,dirty:!0,error:null,equal:kw,kind:"computed",producerMustRecompute(n){return n.value===Ew||n.value===bw},producerRecomputeValue(n){if(n.value===bw)throw new Error("");let e=n.value;n.value=bw;let t=Gl(n),r,i=!1;try{r=n.computation(),pe(null),i=e!==Ew&&e!==$g&&r!==$g&&n.equal(e,r)}catch(s){r=$g,n.error=s}finally{Dh(n,t)}if(i){n.value=e;return}n.value=r,n.version++}});function W4(){throw new Error}var L1=W4;function U1(n){L1(n)}function Nw(n){L1=n}var K4=null;function Mw(n,e){let t=Object.create(zg);t.value=n,e!==void 0&&(t.equal=e);let r=()=>j1(t);return r[Un]=t,Rw(t),[r,o=>xh(t,o),o=>B1(t,o)]}function j1(n){return Sh(n),n.value}function xh(n,e){Aw()||U1(n),n.equal(n.value,e)||(n.value=e,Q4(n))}function B1(n,e){Aw()||U1(n),xh(n,e(n.value))}var zg=oe(B({},zl),{equal:kw,value:void 0,kind:"signal"});function Q4(n){n.version++,P1(),Dw(n),K4?.(n)}function Pw(n){let e=pe(null);try{return n()}finally{pe(e)}}var Ow=oe(B({},zl),{consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!0,dirty:!0,kind:"effect"});function Fw(n){if(n.dirty=!1,n.version>0&&!Ah(n))return;n.version++;let e=Gl(n);try{n.cleanup(),n.fn()}finally{Dh(n,e)}}function Ae(n){return typeof n=="function"}function Kl(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var Gg=Kl(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function ec(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var sn=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let s of t)s.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(Ae(r))try{r()}catch(s){e=s instanceof Gg?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{$1(s)}catch(o){e=e??[],o instanceof Gg?e=[...e,...o.errors]:e.push(o)}}if(e)throw new Gg(e)}}add(e){var t;if(e&&e!==this)if(this.closed)$1(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&ec(t,e)}remove(e){let{_finalizers:t}=this;t&&ec(t,e),e instanceof n&&e._removeParent(this)}};sn.EMPTY=(()=>{let n=new sn;return n.closed=!0,n})();var Vw=sn.EMPTY;function Wg(n){return n instanceof sn||n&&"closed"in n&&Ae(n.remove)&&Ae(n.add)&&Ae(n.unsubscribe)}function $1(n){Ae(n)?n():n.unsubscribe()}var qr={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Ql={setTimeout(n,e,...t){let{delegate:r}=Ql;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=Ql;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Kg(n){Ql.setTimeout(()=>{let{onUnhandledError:e}=qr;if(e)e(n);else throw n})}function Rh(){}var H1=Lw("C",void 0,void 0);function q1(n){return Lw("E",void 0,n)}function z1(n){return Lw("N",n,void 0)}function Lw(n,e,t){return{kind:n,value:e,error:t}}var tc=null;function Yl(n){if(qr.useDeprecatedSynchronousErrorHandling){let e=!tc;if(e&&(tc={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=tc;if(tc=null,t)throw r}}else n()}function G1(n){qr.useDeprecatedSynchronousErrorHandling&&tc&&(tc.errorThrown=!0,tc.error=n)}var nc=class extends sn{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Wg(e)&&e.add(this)):this.destination=X4}static create(e,t,r){return new Ao(e,t,r)}next(e){this.isStopped?jw(z1(e),this):this._next(e)}error(e){this.isStopped?jw(q1(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?jw(H1,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},Y4=Function.prototype.bind;function Uw(n,e){return Y4.call(n,e)}var Bw=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){Qg(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){Qg(r)}else Qg(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Qg(t)}}},Ao=class extends nc{constructor(e,t,r){super();let i;if(Ae(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let s;this&&qr.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Uw(e.next,s),error:e.error&&Uw(e.error,s),complete:e.complete&&Uw(e.complete,s)}):i=e}this.destination=new Bw(i)}};function Qg(n){qr.useDeprecatedSynchronousErrorHandling?G1(n):Kg(n)}function J4(n){throw n}function jw(n,e){let{onStoppedNotification:t}=qr;t&&Ql.setTimeout(()=>t(n,e))}var X4={closed:!0,next:Rh,error:J4,complete:Rh};var Jl=typeof Symbol=="function"&&Symbol.observable||"@@observable";function zr(n){return n}function $w(...n){return Hw(n)}function Hw(n){return n.length===0?zr:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var Ve=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let s=eB(t)?t:new Ao(t,r,i);return Yl(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=W1(r),new r((i,s)=>{let o=new Ao({next:a=>{try{t(a)}catch(c){s(c),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[Jl](){return this}pipe(...t){return Hw(t)(this)}toPromise(t){return t=W1(t),new t((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return n.create=e=>new n(e),n})();function W1(n){var e;return(e=n??qr.Promise)!==null&&e!==void 0?e:Promise}function Z4(n){return n&&Ae(n.next)&&Ae(n.error)&&Ae(n.complete)}function eB(n){return n&&n instanceof nc||Z4(n)&&Wg(n)}function tB(n){return Ae(n?.lift)}function et(n){return e=>{if(tB(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function tt(n,e,t,r,i){return new qw(n,e,t,r,i)}var qw=class extends nc{constructor(e,t,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};var K1=Kl(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var gt=(()=>{class n extends Ve{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new Yg(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new K1}next(t){Yl(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){Yl(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Yl(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:s}=this;return r||i?Vw:(this.currentObservers=null,s.push(t),new sn(()=>{this.currentObservers=null,ec(s,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:s}=this;r?t.error(i):s&&t.complete()}asObservable(){let t=new Ve;return t.source=this,t}}return n.create=(e,t)=>new Yg(e,t),n})(),Yg=class extends gt{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:Vw}};var ft=class extends gt{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var zw={now(){return(zw.delegate||Date).now()},delegate:void 0};var Jg=class extends sn{constructor(e,t){super()}schedule(e,t=0){return this}};var kh={setInterval(n,e,...t){let{delegate:r}=kh;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=kh;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var Xl=class extends Jg{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,s=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(s,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,r=0){return kh.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&kh.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,ec(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var Zl=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};Zl.now=zw.now;var eu=class extends Zl{constructor(e,t=Zl.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var Gw=new eu(Xl);var Xg=class extends Xl{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var Zg=class extends eu{};var Ww=new Zg(Xg);var Kn=new Ve(n=>n.complete());function Q1(n){return n&&Ae(n.schedule)}function Y1(n){return n[n.length-1]}function em(n){return Ae(Y1(n))?n.pop():void 0}function xo(n){return Q1(Y1(n))?n.pop():void 0}function Kw(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function X1(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{d(r.next(h))}catch(p){o(p)}}function c(h){try{d(r.throw(h))}catch(p){o(p)}}function d(h){h.done?s(h.value):i(h.value).then(a,c)}d((r=r.apply(n,e||[])).next())})}function J1(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function rc(n){return this instanceof rc?(this.v=n,this):new rc(n)}function Z1(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(E){return function(k){return Promise.resolve(k).then(E,p)}}function a(E,k){r[E]&&(i[E]=function(P){return new Promise(function(M,H){s.push([E,P,M,H])>1||c(E,P)})},k&&(i[E]=k(i[E])))}function c(E,k){try{d(r[E](k))}catch(P){y(s[0][3],P)}}function d(E){E.value instanceof rc?Promise.resolve(E.value.v).then(h,p):y(s[0][2],E)}function h(E){c("next",E)}function p(E){c("throw",E)}function y(E,k){E(k),s.shift(),s.length&&c(s[0][0],s[0][1])}}function eR(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof J1=="function"?J1(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(s){t[s]=n[s]&&function(o){return new Promise(function(a,c){o=n[s](o),i(a,c,o.done,o.value)})}}function i(s,o,a,c){Promise.resolve(c).then(function(d){s({value:d,done:a})},o)}}var tm=n=>n&&typeof n.length=="number"&&typeof n!="function";function nm(n){return Ae(n?.then)}function rm(n){return Ae(n[Jl])}function im(n){return Symbol.asyncIterator&&Ae(n?.[Symbol.asyncIterator])}function sm(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function nB(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var om=nB();function am(n){return Ae(n?.[om])}function cm(n){return Z1(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield rc(t.read());if(i)return yield rc(void 0);yield yield rc(r)}}finally{t.releaseLock()}})}function lm(n){return Ae(n?.getReader)}function Vt(n){if(n instanceof Ve)return n;if(n!=null){if(rm(n))return rB(n);if(tm(n))return iB(n);if(nm(n))return sB(n);if(im(n))return tR(n);if(am(n))return oB(n);if(lm(n))return aB(n)}throw sm(n)}function rB(n){return new Ve(e=>{let t=n[Jl]();if(Ae(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function iB(n){return new Ve(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function sB(n){return new Ve(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Kg)})}function oB(n){return new Ve(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function tR(n){return new Ve(e=>{cB(n,e).catch(t=>e.error(t))})}function aB(n){return tR(cm(n))}function cB(n,e){var t,r,i,s;return X1(this,void 0,void 0,function*(){try{for(t=eR(n);r=yield t.next(),!r.done;){let o=r.value;if(e.next(o),e.closed)return}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=t.return)&&(yield s.call(t))}finally{if(i)throw i.error}}e.complete()})}function Qn(n,e,t,r=0,i=!1){let s=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(s),!i)return s}function Ro(n,e=0){return et((t,r)=>{t.subscribe(tt(r,i=>Qn(r,n,()=>r.next(i),e),()=>Qn(r,n,()=>r.complete(),e),i=>Qn(r,n,()=>r.error(i),e)))})}function ko(n,e=0){return et((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function nR(n,e){return Vt(n).pipe(ko(e),Ro(e))}function rR(n,e){return Vt(n).pipe(ko(e),Ro(e))}function iR(n,e){return new Ve(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function sR(n,e){return new Ve(t=>{let r;return Qn(t,e,()=>{r=n[om](),Qn(t,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){t.error(o);return}s?t.complete():t.next(i)},0,!0)}),()=>Ae(r?.return)&&r.return()})}function um(n,e){if(!n)throw new Error("Iterable cannot be null");return new Ve(t=>{Qn(t,e,()=>{let r=n[Symbol.asyncIterator]();Qn(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function oR(n,e){return um(cm(n),e)}function aR(n,e){if(n!=null){if(rm(n))return nR(n,e);if(tm(n))return iR(n,e);if(nm(n))return rR(n,e);if(im(n))return um(n,e);if(am(n))return sR(n,e);if(lm(n))return oR(n,e)}throw sm(n)}function ke(n,e){return e?aR(n,e):Vt(n)}function le(...n){let e=xo(n);return ke(n,e)}function _i(n,e){let t=Ae(n)?n:()=>n,r=i=>i.error(t());return new Ve(e?i=>e.schedule(r,0,i):r)}function dm(n){return!!n&&(n instanceof Ve||Ae(n.lift)&&Ae(n.subscribe))}var us=Kl(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function hm(n,e){let t=typeof e=="object";return new Promise((r,i)=>{let s=new Ao({next:o=>{r(o),s.unsubscribe()},error:i,complete:()=>{t?r(e.defaultValue):i(new us)}});n.subscribe(s)})}function _e(n,e){return et((t,r)=>{let i=0;t.subscribe(tt(r,s=>{r.next(n.call(e,s,i++))}))})}var{isArray:lB}=Array;function uB(n,e){return lB(e)?n(...e):n(e)}function fm(n){return _e(e=>uB(n,e))}var{isArray:dB}=Array,{getPrototypeOf:hB,prototype:fB,keys:pB}=Object;function pm(n){if(n.length===1){let e=n[0];if(dB(e))return{args:e,keys:null};if(gB(e)){let t=pB(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function gB(n){return n&&typeof n=="object"&&hB(n)===fB}function gm(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function Qw(...n){let e=xo(n),t=em(n),{args:r,keys:i}=pm(n);if(r.length===0)return ke([],e);let s=new Ve(mB(r,e,i?o=>gm(i,o):zr));return t?s.pipe(fm(t)):s}function mB(n,e,t=zr){return r=>{cR(e,()=>{let{length:i}=n,s=new Array(i),o=i,a=i;for(let c=0;c<i;c++)cR(e,()=>{let d=ke(n[c],e),h=!1;d.subscribe(tt(r,p=>{s[c]=p,h||(h=!0,a--),a||r.next(t(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}function cR(n,e,t){n?Qn(t,n,e):e()}function lR(n,e,t,r,i,s,o,a){let c=[],d=0,h=0,p=!1,y=()=>{p&&!c.length&&!d&&e.complete()},E=P=>d<r?k(P):c.push(P),k=P=>{s&&e.next(P),d++;let M=!1;Vt(t(P,h++)).subscribe(tt(e,H=>{i?.(H),s?E(H):e.next(H)},()=>{M=!0},void 0,()=>{if(M)try{for(d--;c.length&&d<r;){let H=c.shift();o?Qn(e,o,()=>k(H)):k(H)}y()}catch(H){e.error(H)}}))};return n.subscribe(tt(e,E,()=>{p=!0,y()})),()=>{a?.()}}function Nn(n,e,t=1/0){return Ae(e)?Nn((r,i)=>_e((s,o)=>e(r,s,i,o))(Vt(n(r,i))),t):(typeof e=="number"&&(t=e),et((r,i)=>lR(r,i,n,t)))}function tu(n=1/0){return Nn(zr,n)}function uR(){return tu(1)}function nu(...n){return uR()(ke(n,xo(n)))}function Nh(n){return new Ve(e=>{Vt(n()).subscribe(e)})}function No(...n){let e=em(n),{args:t,keys:r}=pm(n),i=new Ve(s=>{let{length:o}=t;if(!o){s.complete();return}let a=new Array(o),c=o,d=o;for(let h=0;h<o;h++){let p=!1;Vt(t[h]).subscribe(tt(s,y=>{p||(p=!0,d--),a[h]=y},()=>c--,void 0,()=>{(!c||!p)&&(d||s.next(r?gm(r,a):a),s.complete())}))}});return e?i.pipe(fm(e)):i}function Gr(n,e){return et((t,r)=>{let i=0;t.subscribe(tt(r,s=>n.call(e,s,i++)&&r.next(s)))})}function ds(n){return et((e,t)=>{let r=null,i=!1,s;r=e.subscribe(tt(t,void 0,void 0,o=>{s=Vt(n(o,ds(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}function Mh(n,e){return Ae(e)?Nn(n,e,1):Nn(n,1)}function Yw(n){return et((e,t)=>{let r=!1;e.subscribe(tt(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Yn(n){return n<=0?()=>Kn:et((e,t)=>{let r=0;e.subscribe(tt(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function dR(n=yB){return et((e,t)=>{let r=!1;e.subscribe(tt(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function yB(){return new us}function Jw(n){return et((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function hs(n,e){let t=arguments.length>=2;return r=>r.pipe(n?Gr((i,s)=>n(i,s,r)):zr,Yn(1),t?Yw(e):dR(()=>new us))}function mm(n){return n<=0?()=>Kn:et((e,t)=>{let r=[];e.subscribe(tt(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function Xw(...n){let e=xo(n);return et((t,r)=>{(e?nu(n,t,e):nu(n,t)).subscribe(r)})}function wr(n,e){return et((t,r)=>{let i=null,s=0,o=!1,a=()=>o&&!i&&r.complete();t.subscribe(tt(r,c=>{i?.unsubscribe();let d=0,h=s++;Vt(n(c,h)).subscribe(i=tt(r,p=>r.next(e?e(c,p,h,d++):p),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function Ph(n){return et((e,t)=>{Vt(n).subscribe(tt(t,()=>t.complete(),Rh)),!t.closed&&e.subscribe(t)})}function mt(n,e,t){let r=Ae(n)||e||t?{next:n,error:e,complete:t}:n;return r?et((i,s)=>{var o;(o=r.subscribe)===null||o===void 0||o.call(r);let a=!0;i.subscribe(tt(s,c=>{var d;(d=r.next)===null||d===void 0||d.call(r,c),s.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),s.complete()},c=>{var d;a=!1,(d=r.error)===null||d===void 0||d.call(r,c),s.error(c)},()=>{var c,d;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(d=r.finalize)===null||d===void 0||d.call(r)}))}):zr}var Zw;function ym(){return Zw}function wi(n){let e=Zw;return Zw=n,e}var hR=Symbol("NotFound");function ru(n){return n===hR||n?.name==="\u0275NotFound"}var sc=class{full;major;minor;patch;constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},fI=new sc("21.0.5");var Cm="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",ae=class extends Error{code;constructor(e,t){super(su(e,t)),this.code=e}};function vB(n){return`NG0${Math.abs(n)}`}function su(n,e){return`${vB(n)}${e?": "+e:""}`}var ms=globalThis;function nt(n){for(let e in n)if(n[e]===nt)return e;throw Error("")}function yR(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function ps(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(ps).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let r=t.indexOf(`
`);return r>=0?t.slice(0,r):t}function Tm(n,e){return n?e?`${n} ${e}`:n:e||""}var _B=nt({__forward_ref__:nt});function ys(n){return n.__forward_ref__=ys,n.toString=function(){return ps(this())},n}function Cn(n){return pI(n)?n():n}function pI(n){return typeof n=="function"&&n.hasOwnProperty(_B)&&n.__forward_ref__===ys}function se(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Ei(n){return{providers:n.providers||[],imports:n.imports||[]}}function Bh(n){return wB(n,Sm)}function gI(n){return Bh(n)!==null}function wB(n,e){return n.hasOwnProperty(e)&&n[e]||null}function IB(n){let e=n?.[Sm]??null;return e||null}function tI(n){return n&&n.hasOwnProperty(_m)?n[_m]:null}var Sm=nt({\u0275prov:nt}),_m=nt({\u0275inj:nt}),ce=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=se({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function mI(n){return n&&!!n.\u0275providers}var yI=nt({\u0275cmp:nt}),vI=nt({\u0275dir:nt}),_I=nt({\u0275pipe:nt}),wI=nt({\u0275mod:nt}),Fh=nt({\u0275fac:nt}),lc=nt({__NG_ELEMENT_ID__:nt}),fR=nt({__NG_ENV_ID__:nt});function II(n){return n[wI]||null}function Fo(n){return n[yI]||null}function EI(n){return n[vI]||null}function vR(n){return n[_I]||null}function uc(n){return typeof n=="string"?n:n==null?"":String(n)}function _R(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():uc(n)}var wR=nt({ngErrorCode:nt}),EB=nt({ngErrorMessage:nt}),bB=nt({ngTokenPath:nt});function bI(n,e){return IR("",-200,e)}function Dm(n,e){throw new ae(-201,!1)}function IR(n,e,t){let r=new ae(e,n);return r[wR]=e,r[EB]=n,t&&(r[bB]=t),r}function CB(n){return n[wR]}var nI;function ER(){return nI}function jn(n){let e=nI;return nI=n,e}function CI(n,e,t){let r=Bh(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&8)return null;if(e!==void 0)return e;Dm(n,"Injector")}var TB={},ic=TB,rI="__NG_DI_FLAG__",iI=class{injector;constructor(e){this.injector=e}retrieve(e,t){let r=oc(t)||0;try{return this.injector.get(e,r&8?null:ic,r)}catch(i){if(ru(i))return i;throw i}}};function SB(n,e=0){let t=ym();if(t===void 0)throw new ae(-203,!1);if(t===null)return CI(n,void 0,e);{let r=DB(e),i=t.retrieve(n,r);if(ru(i)){if(r.optional)return null;throw i}return i}}function Ne(n,e=0){return(ER()||SB)(Cn(n),e)}function j(n,e){return Ne(n,oc(e))}function oc(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function DB(n){return{optional:!!(n&8),host:!!(n&1),self:!!(n&2),skipSelf:!!(n&4)}}function sI(n){let e=[];for(let t=0;t<n.length;t++){let r=Cn(n[t]);if(Array.isArray(r)){if(r.length===0)throw new ae(900,!1);let i,s=0;for(let o=0;o<r.length;o++){let a=r[o],c=AB(a);typeof c=="number"?c===-1?i=a.token:s|=c:i=a}e.push(Ne(i,s))}else e.push(Ne(r))}return e}function bR(n,e){return n[rI]=e,n.prototype[rI]=e,n}function AB(n){return n[rI]}function Mo(n,e){let t=n.hasOwnProperty(Fh);return t?n[Fh]:null}function CR(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],s=e[r];if(t&&(i=t(i),s=t(s)),s!==i)return!1}return!0}function TR(n){return n.flat(Number.POSITIVE_INFINITY)}function Am(n,e){n.forEach(t=>Array.isArray(t)?Am(t,e):e(t))}function TI(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function $h(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function SR(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let s=i-2;n[i]=n[s],i--}n[e]=t,n[e+1]=r}}function xm(n,e,t){let r=ou(n,e);return r>=0?n[r|1]=t:(r=~r,SR(n,r,e,t)),r}function Rm(n,e){let t=ou(n,e);if(t>=0)return n[t|1]}function ou(n,e){return xB(n,e,1)}function xB(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let s=r+(i-r>>1),o=n[s<<t];if(e===o)return s<<t;o>e?i=s:r=s+1}return~(i<<t)}var Vo={},Bn=[],dc=new ce(""),SI=new ce("",-1),DI=new ce(""),Vh=class{get(e,t=ic){if(t===ic){let i=IR("",-201);throw i.name="\u0275NotFound",i}return t}};function sr(n){return{\u0275providers:n}}function DR(n){return sr([{provide:dc,multi:!0,useValue:n}])}function AR(...n){return{\u0275providers:AI(!0,n),\u0275fromNgModule:!0}}function AI(n,...e){let t=[],r=new Set,i,s=o=>{t.push(o)};return Am(e,o=>{let a=o;wm(a,s,[],r)&&(i||=[],i.push(a))}),i!==void 0&&xR(i,s),t}function xR(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];xI(i,s=>{e(s,r)})}}function wm(n,e,t,r){if(n=Cn(n),!n)return!1;let i=null,s=tI(n),o=!s&&Fo(n);if(!s&&!o){let c=n.ngModule;if(s=tI(c),s)i=c;else return!1}else{if(o&&!o.standalone)return!1;i=n}let a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){let c=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let d of c)wm(d,e,t,r)}}else if(s){if(s.imports!=null&&!a){r.add(i);let d;try{Am(s.imports,h=>{wm(h,e,t,r)&&(d||=[],d.push(h))})}finally{}d!==void 0&&xR(d,e)}if(!a){let d=Mo(i)||(()=>new i);e({provide:i,useFactory:d,deps:Bn},i),e({provide:DI,useValue:i,multi:!0},i),e({provide:dc,useValue:()=>Ne(i),multi:!0},i)}let c=s.providers;if(c!=null&&!a){let d=n;xI(c,h=>{e(h,d)})}}else return!1;return i!==n&&n.providers!==void 0}function xI(n,e){for(let t of n)mI(t)&&(t=t.\u0275providers),Array.isArray(t)?xI(t,e):e(t)}var RB=nt({provide:String,useValue:nt});function RR(n){return n!==null&&typeof n=="object"&&RB in n}function kB(n){return!!(n&&n.useExisting)}function NB(n){return!!(n&&n.useFactory)}function ac(n){return typeof n=="function"}function kR(n){return!!n.useClass}var Hh=new ce(""),vm={},pR={},eI;function qh(){return eI===void 0&&(eI=new Vh),eI}var Lt=class{},cc=class extends Lt{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,aI(e,o=>this.processProvider(o)),this.records.set(SI,iu(void 0,this)),i.has("environment")&&this.records.set(Lt,iu(void 0,this));let s=this.records.get(Hh);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(DI,Bn,{self:!0}))}retrieve(e,t){let r=oc(t)||0;try{return this.get(e,ic,r)}catch(i){if(ru(i))return i;throw i}}destroy(){Oh(this),this._destroyed=!0;let e=pe(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),pe(e)}}onDestroy(e){return Oh(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){Oh(this);let t=wi(this),r=jn(void 0),i;try{return e()}finally{wi(t),jn(r)}}get(e,t=ic,r){if(Oh(this),e.hasOwnProperty(fR))return e[fR](this);let i=oc(r),s,o=wi(this),a=jn(void 0);try{if(!(i&4)){let d=this.records.get(e);if(d===void 0){let h=VB(e)&&Bh(e);h&&this.injectableDefInScope(h)?d=iu(oI(e),vm):d=null,this.records.set(e,d)}if(d!=null)return this.hydrate(e,d,i)}let c=i&2?qh():this.parent;return t=i&8&&t===ic?null:t,c.get(e,t)}catch(c){let d=CB(c);throw d===-200||d===-201?new ae(d,null):c}finally{jn(a),wi(o)}}resolveInjectorInitializers(){let e=pe(null),t=wi(this),r=jn(void 0),i;try{let s=this.get(dc,Bn,{self:!0});for(let o of s)o()}finally{wi(t),jn(r),pe(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(ps(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=Cn(e);let t=ac(e)?e:Cn(e&&e.provide),r=PB(e);if(!ac(e)&&e.multi===!0){let i=this.records.get(t);i||(i=iu(void 0,vm,!0),i.factory=()=>sI(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t,r){let i=pe(null);try{if(t.value===pR)throw bI(ps(e));return t.value===vm&&(t.value=pR,t.value=t.factory(void 0,r)),typeof t.value=="object"&&t.value&&FB(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{pe(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=Cn(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function oI(n){let e=Bh(n),t=e!==null?e.factory:Mo(n);if(t!==null)return t;if(n instanceof ce)throw new ae(204,!1);if(n instanceof Function)return MB(n);throw new ae(204,!1)}function MB(n){if(n.length>0)throw new ae(204,!1);let t=IB(n);return t!==null?()=>t.factory(n):()=>new n}function PB(n){if(RR(n))return iu(void 0,n.useValue);{let e=RI(n);return iu(e,vm)}}function RI(n,e,t){let r;if(ac(n)){let i=Cn(n);return Mo(i)||oI(i)}else if(RR(n))r=()=>Cn(n.useValue);else if(NB(n))r=()=>n.useFactory(...sI(n.deps||[]));else if(kB(n))r=(i,s)=>Ne(Cn(n.useExisting),s!==void 0&&s&8?8:void 0);else{let i=Cn(n&&(n.useClass||n.provide));if(OB(n))r=()=>new i(...sI(n.deps));else return Mo(i)||oI(i)}return r}function Oh(n){if(n.destroyed)throw new ae(205,!1)}function iu(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function OB(n){return!!n.deps}function FB(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function VB(n){return typeof n=="function"||typeof n=="object"&&n.ngMetadataName==="InjectionToken"}function aI(n,e){for(let t of n)Array.isArray(t)?aI(t,e):t&&mI(t)?aI(t.\u0275providers,e):e(t)}function an(n,e){let t;n instanceof cc?(Oh(n),t=n):t=new iI(n);let r,i=wi(t),s=jn(void 0);try{return e()}finally{wi(i),jn(s)}}function NR(){return ER()!==void 0||ym()!=null}var Wr=0,ge=1,Ie=2,on=3,Ir=4,Er=5,au=6,cu=7,Pt=8,vs=9,bi=10,yt=11,lu=12,kI=13,hc=14,or=15,Lo=16,fc=17,Ci=18,zh=19,NI=20,fs=21,km=22,Po=23,ar=24,pc=25,gc=26,Ut=27,MR=1,MI=6,Uo=7,Gh=8,mc=9,At=10;function Ti(n){return Array.isArray(n)&&typeof n[MR]=="object"}function Kr(n){return Array.isArray(n)&&n[MR]===!0}function PI(n){return(n.flags&4)!==0}function jo(n){return n.componentOffset>-1}function Nm(n){return(n.flags&1)===1}function Si(n){return!!n.template}function uu(n){return(n[Ie]&512)!==0}function yc(n){return(n[Ie]&256)===256}var PR="svg",OR="math";function br(n){for(;Array.isArray(n);)n=n[Wr];return n}function OI(n,e){return br(e[n])}function Qr(n,e){return br(e[n.index])}function Wh(n,e){return n.data[e]}function FI(n,e){return n[e]}function VI(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function Cr(n,e){let t=e[n];return Ti(t)?t:t[Wr]}function FR(n){return(n[Ie]&4)===4}function Mm(n){return(n[Ie]&128)===128}function VR(n){return Kr(n[on])}function Di(n,e){return e==null?null:n[e]}function LI(n){n[fc]=0}function UI(n){n[Ie]&1024||(n[Ie]|=1024,Mm(n)&&vc(n))}function LR(n,e){for(;n>0;)e=e[hc],n--;return e}function Kh(n){return!!(n[Ie]&9216||n[ar]?.dirty)}function Pm(n){n[bi].changeDetectionScheduler?.notify(8),n[Ie]&64&&(n[Ie]|=1024),Kh(n)&&vc(n)}function vc(n){n[bi].changeDetectionScheduler?.notify(0);let e=Oo(n);for(;e!==null&&!(e[Ie]&8192||(e[Ie]|=8192,!Mm(e)));)e=Oo(e)}function jI(n,e){if(yc(n))throw new ae(911,!1);n[fs]===null&&(n[fs]=[]),n[fs].push(e)}function UR(n,e){if(n[fs]===null)return;let t=n[fs].indexOf(e);t!==-1&&n[fs].splice(t,1)}function Oo(n){let e=n[on];return Kr(e)?e[on]:e}function BI(n){return n[cu]??=[]}function $I(n){return n.cleanup??=[]}function jR(n,e,t,r){let i=BI(e);i.push(t),n.firstCreatePass&&$I(n).push(r,i.length-1)}var Oe={lFrame:nk(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var cI=!1;function BR(){return Oe.lFrame.elementDepthCount}function $R(){Oe.lFrame.elementDepthCount++}function HI(){Oe.lFrame.elementDepthCount--}function HR(){return Oe.bindingsEnabled}function qR(){return Oe.skipHydrationRootTNode!==null}function qI(n){return Oe.skipHydrationRootTNode===n}function zI(){Oe.skipHydrationRootTNode=null}function Me(){return Oe.lFrame.lView}function jt(){return Oe.lFrame.tView}function X(n){return Oe.lFrame.contextLView=n,n[Pt]}function Z(n){return Oe.lFrame.contextLView=null,n}function pn(){let n=GI();for(;n!==null&&n.type===64;)n=n.parent;return n}function GI(){return Oe.lFrame.currentTNode}function zR(){let n=Oe.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function du(n,e){let t=Oe.lFrame;t.currentTNode=n,t.isParent=e}function WI(){return Oe.lFrame.isParent}function GR(){Oe.lFrame.isParent=!1}function WR(){return Oe.lFrame.contextLView}function KI(){return cI}function Lh(n){let e=cI;return cI=n,e}function KR(){let n=Oe.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function QR(){return Oe.lFrame.bindingIndex}function YR(n){return Oe.lFrame.bindingIndex=n}function _c(){return Oe.lFrame.bindingIndex++}function Om(n){let e=Oe.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function JR(){return Oe.lFrame.inI18n}function XR(n,e){let t=Oe.lFrame;t.bindingIndex=t.bindingRootIndex=n,Fm(e)}function ZR(){return Oe.lFrame.currentDirectiveIndex}function Fm(n){Oe.lFrame.currentDirectiveIndex=n}function ek(n){let e=Oe.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function QI(){return Oe.lFrame.currentQueryIndex}function Vm(n){Oe.lFrame.currentQueryIndex=n}function LB(n){let e=n[ge];return e.type===2?e.declTNode:e.type===1?n[Er]:null}function YI(n,e,t){if(t&4){let i=e,s=n;for(;i=i.parent,i===null&&!(t&1);)if(i=LB(s),i===null||(s=s[hc],i.type&10))break;if(i===null)return!1;e=i,n=s}let r=Oe.lFrame=tk();return r.currentTNode=e,r.lView=n,!0}function Lm(n){let e=tk(),t=n[ge];Oe.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function tk(){let n=Oe.lFrame,e=n===null?null:n.child;return e===null?nk(n):e}function nk(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function rk(){let n=Oe.lFrame;return Oe.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var JI=rk;function Um(){let n=rk();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function ik(n){return(Oe.lFrame.contextLView=LR(n,Oe.lFrame.contextLView))[Pt]}function Ai(){return Oe.lFrame.selectedIndex}function Bo(n){Oe.lFrame.selectedIndex=n}function jm(){let n=Oe.lFrame;return Wh(n.tView,n.selectedIndex)}function sk(){return Oe.lFrame.currentNamespace}var ok=!0;function Bm(){return ok}function $m(n){ok=n}function lI(n,e=null,t=null,r){let i=XI(n,e,t,r);return i.resolveInjectorInitializers(),i}function XI(n,e=null,t=null,r,i=new Set){let s=[t||Bn,AR(n)];return r=r||(typeof n=="object"?void 0:ps(n)),new cc(s,e||qh(),r||null,i)}var Mt=class n{static THROW_IF_NOT_FOUND=ic;static NULL=new Vh;static create(e,t){if(Array.isArray(e))return lI({name:""},t,e,"");{let r=e.name??"";return lI({name:r},e.parent,e.providers,r)}}static \u0275prov=se({token:n,providedIn:"any",factory:()=>Ne(SI)});static __NG_ELEMENT_ID__=-1},cn=new ce(""),Tr=(()=>{class n{static __NG_ELEMENT_ID__=UB;static __NG_ENV_ID__=t=>t}return n})(),Im=class extends Tr{_lView;constructor(e){super(),this._lView=e}get destroyed(){return yc(this._lView)}onDestroy(e){let t=this._lView;return jI(t,e),()=>UR(t,e)}};function UB(){return new Im(Me())}var ak=!1,_s=(()=>{class n{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new ft(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new Ve(t=>{t.next(!1),t.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=se({token:n,providedIn:"root",factory:()=>new n})}return n})(),uI=class extends gt{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,NR()&&(this.destroyRef=j(Tr,{optional:!0})??void 0,this.pendingTasks=j(_s,{optional:!0})??void 0)}emit(e){let t=pe(null);try{super.next(e)}finally{pe(t)}}subscribe(e,t,r){let i=e,s=t||(()=>null),o=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),s=c.error?.bind(c),o=c.complete?.bind(c)}this.__isAsync&&(s=this.wrapInTimeout(s),i&&(i=this.wrapInTimeout(i)),o&&(o=this.wrapInTimeout(o)));let a=super.subscribe({next:i,error:s,complete:o});return e instanceof sn&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(t)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},Dt=uI;function Em(...n){}function ZI(n){let e,t;function r(){n=Em;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function eE(n){return queueMicrotask(()=>n()),()=>{n=Em}}var tE="isAngularZone",Uh=tE+"_ID",jB=0,_t=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new Dt(!1);onMicrotaskEmpty=new Dt(!1);onStable=new Dt(!1);onError=new Dt(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:s=ak}=e;if(typeof Zone>"u")throw new ae(908,!1);Zone.assertZonePatched();let o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!i&&r,o.shouldCoalesceRunChangeDetection=i,o.callbackScheduled=!1,o.scheduleInRootZone=s,HB(o)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(tE)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new ae(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new ae(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,BB,Em,Em);try{return s.runTask(o,t,r)}finally{s.cancelTask(o)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},BB={};function nE(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function $B(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){ZI(()=>{n.callbackScheduled=!1,dI(n),n.isCheckStableRunning=!0,nE(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),dI(n)}function HB(n){let e=()=>{$B(n)},t=jB++;n._inner=n._inner.fork({name:"angular",properties:{[tE]:!0,[Uh]:t,[Uh+t]:!0},onInvokeTask:(r,i,s,o,a,c)=>{if(qB(c))return r.invokeTask(s,o,a,c);try{return gR(n),r.invokeTask(s,o,a,c)}finally{(n.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),mR(n)}},onInvoke:(r,i,s,o,a,c,d)=>{try{return gR(n),r.invoke(s,o,a,c,d)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!zB(c)&&e(),mR(n)}},onHasTask:(r,i,s,o)=>{r.hasTask(s,o),i===s&&(o.change=="microTask"?(n._hasPendingMicrotasks=o.microTask,dI(n),nE(n)):o.change=="macroTask"&&(n.hasPendingMacrotasks=o.macroTask))},onHandleError:(r,i,s,o)=>(r.handleError(s,o),n.runOutsideAngular(()=>n.onError.emit(o)),!1)})}function dI(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function gR(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function mR(n){n._nesting--,nE(n)}var jh=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new Dt;onMicrotaskEmpty=new Dt;onStable=new Dt;onError=new Dt;run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function qB(n){return ck(n,"__ignore_ng_zone__")}function zB(n){return ck(n,"__scheduler_tick__")}function ck(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var Ii=class{_console=console;handleError(e){this._console.error("ERROR",e)}},cr=new ce("",{factory:()=>{let n=j(_t),e=j(Lt),t;return r=>{n.runOutsideAngular(()=>{e.destroyed&&!t?setTimeout(()=>{throw r}):(t??=e.get(Ii),t.handleError(r))})}}}),lk={provide:dc,useValue:()=>{let n=j(Ii,{optional:!0})},multi:!0},GB=new ce("",{factory:()=>{let n=j(cn).defaultView;if(!n)return;let e=j(cr),t=s=>{e(s.reason),s.preventDefault()},r=s=>{s.error?e(s.error):e(new Error(s.message,{cause:s})),s.preventDefault()},i=()=>{n.addEventListener("unhandledrejection",t),n.addEventListener("error",r)};typeof Zone<"u"?Zone.root.run(i):i(),j(Tr).onDestroy(()=>{n.removeEventListener("error",r),n.removeEventListener("unhandledrejection",t)})}});function rE(){return sr([DR(()=>void j(GB))])}function be(n,e){let[t,r,i]=Mw(n,e?.equal),s=t,o=s[Un];return s.set=r,s.update=i,s.asReadonly=uk.bind(s),s}function uk(){let n=this[Un];if(n.readonlyFn===void 0){let e=()=>this();e[Un]=n,n.readonlyFn=e}return n.readonlyFn}var Qh=(()=>{class n{view;node;constructor(t,r){this.view=t,this.node=r}static __NG_ELEMENT_ID__=WB}return n})();function WB(){return new Qh(Me(),pn())}var gs=class{},Yh=new ce("",{factory:()=>!0});var iE=new ce(""),hu=(()=>{class n{internalPendingTasks=j(_s);scheduler=j(gs);errorHandler=j(cr);add(){let t=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(t)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(t))}}run(t){let r=this.add();t().catch(this.errorHandler).finally(r)}static \u0275prov=se({token:n,providedIn:"root",factory:()=>new n})}return n})(),Hm=(()=>{class n{static \u0275prov=se({token:n,providedIn:"root",factory:()=>new hI})}return n})(),hI=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let t=e.zone,r=this.queues.get(t);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let r=this.queues.get(t);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[t,r]of this.queues)t===null?e||=this.flushQueue(r):e||=t.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let t=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,t=!0,r.run());return t}},bm=class{[Un];constructor(e){this[Un]=e}destroy(){this[Un].destroy()}};function xi(n,e){let t=e?.injector??j(Mt),r=e?.manualCleanup!==!0?t.get(Tr):null,i,s=t.get(Qh,null,{optional:!0}),o=t.get(gs);return s!==null?(i=YB(s.view,o,n),r instanceof Im&&r._lView===s.view&&(r=null)):i=JB(n,t.get(Hm),o),i.injector=t,r!==null&&(i.onDestroyFns=[r.onDestroy(()=>i.destroy())]),new bm(i)}var dk=oe(B({},Ow),{cleanupFns:void 0,zone:null,onDestroyFns:null,run(){let n=Lh(!1);try{Fw(this)}finally{Lh(n)}},cleanup(){if(!this.cleanupFns?.length)return;let n=pe(null);try{for(;this.cleanupFns.length;)this.cleanupFns.pop()()}finally{this.cleanupFns=[],pe(n)}}}),KB=oe(B({},dk),{consumerMarkedDirty(){this.scheduler.schedule(this),this.notifier.notify(12)},destroy(){if(Za(this),this.onDestroyFns!==null)for(let n of this.onDestroyFns)n();this.cleanup(),this.scheduler.remove(this)}}),QB=oe(B({},dk),{consumerMarkedDirty(){this.view[Ie]|=8192,vc(this.view),this.notifier.notify(13)},destroy(){if(Za(this),this.onDestroyFns!==null)for(let n of this.onDestroyFns)n();this.cleanup(),this.view[Po]?.delete(this)}});function YB(n,e,t){let r=Object.create(QB);return r.view=n,r.zone=typeof Zone<"u"?Zone.current:null,r.notifier=e,r.fn=hk(r,t),n[Po]??=new Set,n[Po].add(r),r.consumerMarkedDirty(r),r}function JB(n,e,t){let r=Object.create(KB);return r.fn=hk(r,n),r.scheduler=e,r.notifier=t,r.zone=typeof Zone<"u"?Zone.current:null,r.scheduler.add(r),r.notifier.notify(12),r}function hk(n,e){return()=>{e(t=>(n.cleanupFns??=[]).push(t))}}function ln(n){return Pw(n)}function wu(n){return{toString:n}.toString()}var qm="__parameters__";function s3(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function o3(n,e,t){return wu(()=>{let r=s3(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;let o=new i(...s);return a.annotation=o,a;function a(c,d,h){let p=c.hasOwnProperty(qm)?c[qm]:Object.defineProperty(c,qm,{value:[]})[qm];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(o),c}}return i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var lr=bR(o3("Optional"),8);function a3(n){return typeof n=="function"}function Bk(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}var Xm=class{previousValue;currentValue;firstChange;constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}},ws=(()=>{let n=()=>$k;return n.ngInherit=!0,n})();function $k(n){return n.type.prototype.ngOnChanges&&(n.setInput=l3),c3}function c3(){let n=qk(this),e=n?.current;if(e){let t=n.previous;if(t===Vo)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function l3(n,e,t,r,i){let s=this.declaredInputs[r],o=qk(n)||u3(n,{previous:Vo,current:null}),a=o.current||(o.current={}),c=o.previous,d=c[s];a[s]=new Xm(d&&d.currentValue,t,c===Vo),Bk(n,e,i,t)}var Hk="__ngSimpleChanges__";function qk(n){return n[Hk]||null}function u3(n,e){return n[Hk]=e}var fk=[];var rt=function(n,e=null,t){for(let r=0;r<fk.length;r++){let i=fk[r];i(n,e,t)}},Ke=(function(n){return n[n.TemplateCreateStart=0]="TemplateCreateStart",n[n.TemplateCreateEnd=1]="TemplateCreateEnd",n[n.TemplateUpdateStart=2]="TemplateUpdateStart",n[n.TemplateUpdateEnd=3]="TemplateUpdateEnd",n[n.LifecycleHookStart=4]="LifecycleHookStart",n[n.LifecycleHookEnd=5]="LifecycleHookEnd",n[n.OutputStart=6]="OutputStart",n[n.OutputEnd=7]="OutputEnd",n[n.BootstrapApplicationStart=8]="BootstrapApplicationStart",n[n.BootstrapApplicationEnd=9]="BootstrapApplicationEnd",n[n.BootstrapComponentStart=10]="BootstrapComponentStart",n[n.BootstrapComponentEnd=11]="BootstrapComponentEnd",n[n.ChangeDetectionStart=12]="ChangeDetectionStart",n[n.ChangeDetectionEnd=13]="ChangeDetectionEnd",n[n.ChangeDetectionSyncStart=14]="ChangeDetectionSyncStart",n[n.ChangeDetectionSyncEnd=15]="ChangeDetectionSyncEnd",n[n.AfterRenderHooksStart=16]="AfterRenderHooksStart",n[n.AfterRenderHooksEnd=17]="AfterRenderHooksEnd",n[n.ComponentStart=18]="ComponentStart",n[n.ComponentEnd=19]="ComponentEnd",n[n.DeferBlockStateStart=20]="DeferBlockStateStart",n[n.DeferBlockStateEnd=21]="DeferBlockStateEnd",n[n.DynamicComponentStart=22]="DynamicComponentStart",n[n.DynamicComponentEnd=23]="DynamicComponentEnd",n[n.HostBindingsUpdateStart=24]="HostBindingsUpdateStart",n[n.HostBindingsUpdateEnd=25]="HostBindingsUpdateEnd",n})(Ke||{});function d3(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){let o=$k(e);(t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o)}i&&(t.preOrderHooks??=[]).push(0-n,i),s&&((t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s))}function h3(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:d,ngOnDestroy:h}=s;o&&(n.contentHooks??=[]).push(-t,o),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),d&&((n.viewHooks??=[]).push(t,d),(n.viewCheckHooks??=[]).push(t,d)),h!=null&&(n.destroyHooks??=[]).push(t,h)}}function Wm(n,e,t){zk(n,e,3,t)}function Km(n,e,t,r){(n[Ie]&3)===t&&zk(n,e,t,r)}function sE(n,e){let t=n[Ie];(t&3)===e&&(t&=16383,t+=1,n[Ie]=t)}function zk(n,e,t,r){let i=r!==void 0?n[fc]&65535:0,s=r??-1,o=e.length-1,a=0;for(let c=i;c<o;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(n[fc]+=65536),(a<s||s==-1)&&(f3(n,t,e,c),n[fc]=(n[fc]&4294901760)+c+2),c++}function pk(n,e){rt(Ke.LifecycleHookStart,n,e);let t=pe(null);try{e.call(n)}finally{pe(t),rt(Ke.LifecycleHookEnd,n,e)}}function f3(n,e,t,r){let i=t[r]<0,s=t[r+1],o=i?-t[r]:t[r],a=n[o];i?n[Ie]>>14<n[fc]>>16&&(n[Ie]&3)===e&&(n[Ie]+=16384,pk(a,s)):pk(a,s)}var pu=-1,Ic=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,r,i){this.factory=e,this.name=i,this.canSeeViewProviders=t,this.injectImpl=r}};function p3(n){return(n.flags&8)!==0}function g3(n){return(n.flags&16)!==0}function m3(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let s=t[r++],o=t[r++],a=t[r++];n.setAttribute(e,o,a,s)}else{let s=i,o=t[++r];y3(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),r++}}return r}function Gk(n){return n===3||n===4||n===6}function y3(n){return n.charCodeAt(0)===64}function gu(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?gk(n,t,i,null,e[++r]):gk(n,t,i,null,null))}}return n}function gk(n,e,t,r,i){let s=0,o=n.length;if(e===-1)o=-1;else for(;s<n.length;){let a=n[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<n.length;){let a=n[s];if(typeof a=="number")break;if(a===t){i!==null&&(n[s+1]=i);return}s++,i!==null&&s++}o!==-1&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),i!==null&&n.splice(s++,0,i)}function Wk(n){return n!==pu}function Zm(n){return n&32767}function v3(n){return n>>16}function ey(n,e){let t=v3(n),r=e;for(;t>0;)r=r[hc],t--;return r}var mE=!0;function ty(n){let e=mE;return mE=n,e}var _3=256,Kk=_3-1,Qk=5,w3=0,Ri={};function I3(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(lc)&&(r=t[lc]),r==null&&(r=t[lc]=w3++);let i=r&Kk,s=1<<i;e.data[n+(i>>Qk)]|=s}function ny(n,e){let t=Yk(n,e);if(t!==-1)return t;let r=e[ge];r.firstCreatePass&&(n.injectorIndex=e.length,oE(r.data,n),oE(e,null),oE(r.blueprint,null));let i=qE(n,e),s=n.injectorIndex;if(Wk(i)){let o=Zm(i),a=ey(i,e),c=a[ge].data;for(let d=0;d<8;d++)e[s+d]=a[o+d]|c[o+d]}return e[s+8]=i,s}function oE(n,e){n.push(0,0,0,0,0,0,0,0,e)}function Yk(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function qE(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=tN(i),r===null)return pu;if(t++,i=i[hc],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return pu}function yE(n,e,t){I3(n,e,t)}function E3(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let r=t.length,i=0;for(;i<r;){let s=t[i];if(Gk(s))break;if(s===0)i=i+2;else if(typeof s=="number")for(i++;i<r&&typeof t[i]=="string";)i++;else{if(s===e)return t[i+1];i=i+2}}}return null}function Jk(n,e,t){if(t&8||n!==void 0)return n;Dm(e,"NodeInjector")}function Xk(n,e,t,r){if(t&8&&r===void 0&&(r=null),(t&3)===0){let i=n[vs],s=jn(void 0);try{return i?i.get(e,r,t&8):CI(e,r,t&8)}finally{jn(s)}}return Jk(r,e,t)}function Zk(n,e,t,r=0,i){if(n!==null){if(e[Ie]&2048&&!(r&2)){let o=S3(n,e,t,r,Ri);if(o!==Ri)return o}let s=eN(n,e,t,r,Ri);if(s!==Ri)return s}return Xk(e,t,r,i)}function eN(n,e,t,r,i){let s=C3(t);if(typeof s=="function"){if(!YI(e,n,r))return r&1?Jk(i,t,r):Xk(e,t,r,i);try{let o;if(o=s(r),o==null&&!(r&8))Dm(t);else return o}finally{JI()}}else if(typeof s=="number"){let o=null,a=Yk(n,e),c=pu,d=r&1?e[or][Er]:null;for((a===-1||r&4)&&(c=a===-1?qE(n,e):e[a+8],c===pu||!yk(r,!1)?a=-1:(o=e[ge],a=Zm(c),e=ey(c,e)));a!==-1;){let h=e[ge];if(mk(s,a,h.data)){let p=b3(a,e,t,o,r,d);if(p!==Ri)return p}c=e[a+8],c!==pu&&yk(r,e[ge].data[a+8]===d)&&mk(s,a,e)?(o=h,a=Zm(c),e=ey(c,e)):a=-1}}return i}function b3(n,e,t,r,i,s){let o=e[ge],a=o.data[n+8],c=r==null?jo(a)&&mE:r!=o&&(a.type&3)!==0,d=i&1&&s===a,h=Qm(a,o,t,c,d);return h!==null?ef(e,o,h,a,i):Ri}function Qm(n,e,t,r,i){let s=n.providerIndexes,o=e.data,a=s&1048575,c=n.directiveStart,d=n.directiveEnd,h=s>>20,p=r?a:a+h,y=i?a+h:d;for(let E=p;E<y;E++){let k=o[E];if(E<c&&t===k||E>=c&&k.type===t)return E}if(i){let E=o[c];if(E&&Si(E)&&E.type===t)return c}return null}function ef(n,e,t,r,i){let s=n[t],o=e.data;if(s instanceof Ic){let a=s;if(a.resolving){let E=_R(o[t]);throw bI(E)}let c=ty(a.canSeeViewProviders);a.resolving=!0;let d=o[t].type||o[t],h,p=a.injectImpl?jn(a.injectImpl):null,y=YI(n,r,0);try{s=n[t]=a.factory(void 0,i,o,n,r),e.firstCreatePass&&t>=r.directiveStart&&d3(t,o[t],e)}finally{p!==null&&jn(p),ty(c),a.resolving=!1,JI()}}return s}function C3(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(lc)?n[lc]:void 0;return typeof e=="number"?e>=0?e&Kk:T3:e}function mk(n,e,t){let r=1<<n;return!!(t[e+(n>>Qk)]&r)}function yk(n,e){return!(n&2)&&!(n&1&&e)}var wc=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return Zk(this._tNode,this._lView,e,oc(r),t)}};function T3(){return new wc(pn(),Me())}function Is(n){return wu(()=>{let e=n.prototype.constructor,t=e[Fh]||vE(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let s=i[Fh]||vE(i);if(s&&s!==t)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function vE(n){return pI(n)?()=>{let e=vE(Cn(n));return e&&e()}:Mo(n)}function S3(n,e,t,r,i){let s=n,o=e;for(;s!==null&&o!==null&&o[Ie]&2048&&!uu(o);){let a=eN(s,o,t,r|2,Ri);if(a!==Ri)return a;let c=s.parent;if(!c){let d=o[NI];if(d){let h=d.get(t,Ri,r);if(h!==Ri)return h}c=tN(o),o=o[hc]}s=c}return i}function tN(n){let e=n[ge],t=e.type;return t===2?e.declTNode:t===1?n[Er]:null}function af(n){return E3(pn(),n)}function D3(){return Iu(pn(),Me())}function Iu(n,e){return new Jn(Qr(n,e))}var Jn=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=D3}return n})();function A3(n){return n instanceof Jn?n.nativeElement:n}function x3(){return this._results[Symbol.iterator]()}var ry=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new gt}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;let r=TR(e);(this._changesDetected=!CR(this._results,r,t))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=x3};function nN(n){return(n.flags&128)===128}var zE=(function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n})(zE||{}),rN=new Map,R3=0;function k3(){return R3++}function N3(n){rN.set(n[zh],n)}function _E(n){rN.delete(n[zh])}var vk="__ngContext__";function mu(n,e){Ti(e)?(n[vk]=e[zh],N3(e)):n[vk]=e}function iN(n){return oN(n[lu])}function sN(n){return oN(n[Ir])}function oN(n){for(;n!==null&&!Kr(n);)n=n[Ir];return n}var M3;function GE(n){M3=n}var yy=new ce("",{factory:()=>P3}),P3="ng";var vy=new ce(""),Sc=new ce("",{providedIn:"platform",factory:()=>"unknown"});var _y=new ce("",{factory:()=>j(cn).body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var aN="r";var cN="di";var lN=!1,uN=new ce("",{factory:()=>lN});var O3=(n,e,t,r)=>{};function F3(n,e,t,r){O3(n,e,t,r)}function WE(n){return(n.flags&32)===32}var V3=()=>null;function dN(n,e,t=!1){return V3(n,e,t)}function hN(n,e){let t=n.contentQueries;if(t!==null){let r=pe(null);try{for(let i=0;i<t.length;i+=2){let s=t[i],o=t[i+1];if(o!==-1){let a=n.data[o];Vm(s),a.contentQueries(2,e[o],o)}}}finally{pe(r)}}}function wE(n,e,t){Vm(0);let r=pe(null);try{e(n,t)}finally{pe(r)}}function fN(n,e,t){if(PI(e)){let r=pe(null);try{let i=e.directiveStart,s=e.directiveEnd;for(let o=i;o<s;o++){let a=n.data[o];if(a.contentQueries){let c=t[o];a.contentQueries(1,c,o)}}}finally{pe(r)}}}var Xr=(function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n[n.ExperimentalIsolatedShadowDom=4]="ExperimentalIsolatedShadowDom",n})(Xr||{});var zm;function L3(){if(zm===void 0&&(zm=null,ms.trustedTypes))try{zm=ms.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return zm}function _k(n){return L3()?.createScriptURL(n)||n}var iy=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Cm})`}};function cf(n){return n instanceof iy?n.changingThisBreaksApplicationSecurity:n}function KE(n,e){let t=pN(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${Cm})`)}return t===e}function pN(n){return n instanceof iy&&n.getTypeName()||null}var U3=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function gN(n){return n=String(n),n.match(U3)?n:"unsafe:"+n}function j3(n,e){return n.createText(e)}function B3(n,e,t){n.setValue(e,t)}function mN(n,e,t){return n.createElement(e,t)}function sy(n,e,t,r,i){n.insertBefore(e,t,r,i)}function yN(n,e,t){n.appendChild(e,t)}function wk(n,e,t,r,i){r!==null?sy(n,e,t,r,i):yN(n,e,t)}function vN(n,e,t,r){n.removeChild(null,e,t,r)}function $3(n,e,t){n.setAttribute(e,"style",t)}function H3(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function _N(n,e,t){let{mergedAttrs:r,classes:i,styles:s}=t;r!==null&&m3(n,e,r),i!==null&&H3(n,e,i),s!==null&&$3(n,e,s)}var wy=(function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n})(wy||{});function Xn(n){let e=IN();return e?e.sanitize(wy.URL,n)||"":KE(n,"URL")?cf(n):gN(uc(n))}function wN(n){let e=IN();if(e)return _k(e.sanitize(wy.RESOURCE_URL,n)||"");if(KE(n,"ResourceURL"))return _k(cf(n));throw new ae(904,!1)}function q3(n,e){return e==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||e==="href"&&(n==="base"||n==="link")?wN:Xn}function QE(n,e,t){return q3(e,t)(n)}function IN(){let n=Me();return n&&n[bi].sanitizer}function EN(n){return n instanceof Function?n():n}function z3(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let s=e.length;if(i+s===r||n.charCodeAt(i+s)<=32)return i}t=i+1}}var bN="ng-template";function G3(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&z3(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(YE(n))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&typeof(s=e[i])=="string";)if(s.toLowerCase()===t)return!0}return!1}function YE(n){return n.type===4&&n.value!==bN}function W3(n,e,t){let r=n.type===4&&!t?bN:n.value;return e===r}function K3(n,e,t){let r=4,i=n.attrs,s=i!==null?J3(i):0,o=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!o&&!Yr(r)&&!Yr(c))return!1;if(o&&Yr(c))continue;o=!1,r=c|r&1;continue}if(!o)if(r&4){if(r=2|r&1,c!==""&&!W3(n,c,t)||c===""&&e.length===1){if(Yr(r))return!1;o=!0}}else if(r&8){if(i===null||!G3(n,i,c,t)){if(Yr(r))return!1;o=!0}}else{let d=e[++a],h=Q3(c,i,YE(n),t);if(h===-1){if(Yr(r))return!1;o=!0;continue}if(d!==""){let p;if(h>s?p="":p=i[h+1].toLowerCase(),r&2&&d!==p){if(Yr(r))return!1;o=!0}}}}return Yr(r)||o}function Yr(n){return(n&1)===0}function Q3(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let s=!1;for(;i<e.length;){let o=e[i];if(o===n)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return X3(e,n)}function Y3(n,e,t=!1){for(let r=0;r<e.length;r++)if(K3(n,e[r],t))return!0;return!1}function J3(n){for(let e=0;e<n.length;e++){let t=n[e];if(Gk(t))return e}return n.length}function X3(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function Ik(n,e){return n?":not("+e.trim()+")":e}function Z3(n){let e=n[0],t=1,r=2,i="",s=!1;for(;t<n.length;){let o=n[t];if(typeof o=="string")if(r&2){let a=n[++t];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+o:r&4&&(i+=" "+o);else i!==""&&!Yr(o)&&(e+=Ik(s,i),i=""),r=o,s=s||!Yr(r);t++}return i!==""&&(e+=Ik(s,i)),e}function e9(n){return n.map(Z3).join(",")}function t9(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let s=n[r];if(typeof s=="string")i===2?s!==""&&e.push(s,n[++r]):i===8&&t.push(s);else{if(!Yr(i))break;i=s}r++}return t.length&&e.push(1,...t),e}var Zn={};function JE(n,e,t,r,i,s,o,a,c,d,h){let p=Ut+r,y=p+i,E=n9(p,y),k=typeof d=="function"?d():d;return E[ge]={type:n,blueprint:E,template:t,queries:null,viewQuery:a,declTNode:e,data:E.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:y,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:c,consts:k,incompleteFirstPass:!1,ssrId:h}}function n9(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:Zn);return t}function r9(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=JE(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function XE(n,e,t,r,i,s,o,a,c,d,h){let p=e.blueprint.slice();return p[Wr]=i,p[Ie]=r|4|128|8|64|1024,(d!==null||n&&n[Ie]&2048)&&(p[Ie]|=2048),LI(p),p[on]=p[hc]=n,p[Pt]=t,p[bi]=o||n&&n[bi],p[yt]=a||n&&n[yt],p[vs]=c||n&&n[vs]||null,p[Er]=s,p[zh]=k3(),p[au]=h,p[NI]=d,p[or]=e.type==2?n[or]:p,p}function i9(n,e,t){let r=Qr(e,n),i=r9(t),s=n[bi].rendererFactory,o=ZE(n,XE(n,i,null,CN(t),r,e,null,s.createRenderer(r,t),null,null,null));return n[e.index]=o}function CN(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function TN(n,e,t,r){if(t===0)return-1;let i=e.length;for(let s=0;s<t;s++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function ZE(n,e){return n[lu]?n[kI][Ir]=e:n[lu]=e,n[kI]=e,e}function V(n=1){SN(jt(),Me(),Ai()+n,!1)}function SN(n,e,t,r){if(!r)if((e[Ie]&3)===3){let s=n.preOrderCheckHooks;s!==null&&Wm(e,s,t)}else{let s=n.preOrderHooks;s!==null&&Km(e,s,0,t)}Bo(t)}var Iy=(function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n})(Iy||{});function IE(n,e,t,r){let i=pe(null);try{let[s,o,a]=n.inputs[t],c=null;(o&Iy.SignalBased)!==0&&(c=e[s][Un]),c!==null&&c.transformFn!==void 0?r=c.transformFn(r):a!==null&&(r=a.call(e,r)),n.setInput!==null?n.setInput(e,c,r,t,s):Bk(e,c,s,r)}finally{pe(i)}}var ki=(function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n})(ki||{}),s9;function eb(n,e){return s9(n,e)}var Ec=new Set,Ey=(function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n})(Ey||{}),Dc=new ce(""),Ek=new Set;function Ho(n){Ek.has(n)||(Ek.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var tb=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=se({token:n,providedIn:"root",factory:()=>new n})}return n})(),DN=[0,1,2,3],AN=(()=>{class n{ngZone=j(_t);scheduler=j(gs);errorHandler=j(Ii,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){j(Dc,{optional:!0})}execute(){let t=this.sequences.size>0;t&&rt(Ke.AfterRenderHooksStart),this.executing=!0;for(let r of DN)for(let i of this.sequences)if(!(i.erroredOrDestroyed||!i.hooks[r]))try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let s=i.hooks[r];return s(i.pipelinedValue)},i.snapshot))}catch(s){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(s)}this.executing=!1;for(let r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(let r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),t&&rt(Ke.AfterRenderHooksEnd)}register(t){let{view:r}=t;r!==void 0?((r[pc]??=[]).push(t),vc(r),r[Ie]|=8192):this.executing?this.deferredRegistrations.add(t):this.addSequence(t)}addSequence(t){this.sequences.add(t),this.scheduler.notify(7)}unregister(t){this.executing&&this.sequences.has(t)?(t.erroredOrDestroyed=!0,t.pipelinedValue=void 0,t.once=!0):(this.sequences.delete(t),this.deferredRegistrations.delete(t))}maybeTrace(t,r){return r?r.run(Ey.AFTER_NEXT_RENDER,t):t()}static \u0275prov=se({token:n,providedIn:"root",factory:()=>new n})}return n})(),oy=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,t,r,i,s,o=null){this.impl=e,this.hooks=t,this.view=r,this.once=i,this.snapshot=o,this.unregisterOnDestroy=s?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let e=this.view?.[pc];e&&(this.view[pc]=e.filter(t=>t!==this))}};function by(n,e){let t=e?.injector??j(Mt);return Ho("NgAfterNextRender"),a9(n,t,e,!0)}function o9(n){return n instanceof Function?[void 0,void 0,n,void 0]:[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function a9(n,e,t,r){let i=e.get(tb);i.impl??=e.get(AN);let s=e.get(Dc,null,{optional:!0}),o=t?.manualCleanup!==!0?e.get(Tr):null,a=e.get(Qh,null,{optional:!0}),c=new oy(i.impl,o9(n),a?.view,r,o,s?.snapshot(null));return i.impl.register(c),c}var xN=new ce("",{factory:()=>({queue:new Set,isScheduled:!1,scheduler:null,injector:j(Lt)})});function RN(n,e,t){let r=n.get(xN);if(Array.isArray(e))for(let i of e)r.queue.add(i),t?.detachedLeaveAnimationFns?.push(i);else r.queue.add(e),t?.detachedLeaveAnimationFns?.push(e);r.scheduler&&r.scheduler(n)}function c9(n,e){let t=n.get(xN);if(e.detachedLeaveAnimationFns){for(let r of e.detachedLeaveAnimationFns)t.queue.delete(r);e.detachedLeaveAnimationFns=void 0}}function l9(n,e){for(let[t,r]of e)RN(n,r.animateFns)}function bk(n,e,t,r){let i=n?.[gc]?.enter;e!==null&&i&&i.has(t.index)&&l9(r,i)}function fu(n,e,t,r,i,s,o,a){if(i!=null){let c,d=!1;Kr(i)?c=i:Ti(i)&&(d=!0,i=i[Wr]);let h=br(i);n===0&&r!==null?(bk(a,r,s,t),o==null?yN(e,r,h):sy(e,r,h,o||null,!0)):n===1&&r!==null?(bk(a,r,s,t),sy(e,r,h,o||null,!0)):n===2?Ck(a,s,t,p=>{vN(e,h,d,p)}):n===3&&Ck(a,s,t,()=>{e.destroyNode(h)}),c!=null&&E9(e,n,t,c,s,r,o)}}function u9(n,e){kN(n,e),e[Wr]=null,e[Er]=null}function d9(n,e,t,r,i,s){r[Wr]=i,r[Er]=e,Ty(n,r,t,1,i,s)}function kN(n,e){e[bi].changeDetectionScheduler?.notify(9),Ty(n,e,e[yt],2,null,null)}function h9(n){let e=n[lu];if(!e)return aE(n[ge],n);for(;e;){let t=null;if(Ti(e))t=e[lu];else{let r=e[At];r&&(t=r)}if(!t){for(;e&&!e[Ir]&&e!==n;)Ti(e)&&aE(e[ge],e),e=e[on];e===null&&(e=n),Ti(e)&&aE(e[ge],e),t=e&&e[Ir]}e=t}}function nb(n,e){let t=n[mc],r=t.indexOf(e);t.splice(r,1)}function Cy(n,e){if(yc(e))return;let t=e[yt];t.destroyNode&&Ty(n,e,t,3,null,null),h9(e)}function aE(n,e){if(yc(e))return;let t=pe(null);try{e[Ie]&=-129,e[Ie]|=256,e[ar]&&Za(e[ar]),g9(n,e),p9(n,e),e[ge].type===1&&e[yt].destroy();let r=e[Lo];if(r!==null&&Kr(e[on])){r!==e[on]&&nb(r,e);let i=e[Ci];i!==null&&i.detachView(n)}_E(e)}finally{pe(t)}}function Ck(n,e,t,r){let i=n?.[gc];if(i==null||i.leave==null||!i.leave.has(e.index))return r(!1);n&&Ec.add(n),RN(t,()=>{if(i.leave&&i.leave.has(e.index)){let o=i.leave.get(e.index),a=[];if(o){for(let c=0;c<o.animateFns.length;c++){let d=o.animateFns[c],{promise:h}=d();a.push(h)}i.detachedLeaveAnimationFns=void 0}i.running=Promise.allSettled(a),f9(n,r)}else n&&Ec.delete(n),r(!1)},i)}function f9(n,e){let t=n[gc]?.running;if(t){t.then(()=>{n[gc].running=void 0,Ec.delete(n),e(!0)});return}e(!1)}function p9(n,e){let t=n.cleanup,r=e[cu];if(t!==null)for(let o=0;o<t.length-1;o+=2)if(typeof t[o]=="string"){let a=t[o+3];a>=0?r[a]():r[-a].unsubscribe(),o+=2}else{let a=r[t[o+1]];t[o].call(a)}r!==null&&(e[cu]=null);let i=e[fs];if(i!==null){e[fs]=null;for(let o=0;o<i.length;o++){let a=i[o];a()}}let s=e[Po];if(s!==null){e[Po]=null;for(let o of s)o.destroy()}}function g9(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof Ic)){let s=t[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=i[s[o]],c=s[o+1];rt(Ke.LifecycleHookStart,a,c);try{c.call(a)}finally{rt(Ke.LifecycleHookEnd,a,c)}}else{rt(Ke.LifecycleHookStart,i,s);try{s.call(i)}finally{rt(Ke.LifecycleHookEnd,i,s)}}}}}function m9(n,e,t){return y9(n,e.parent,t)}function y9(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[Wr];if(jo(r)){let{encapsulation:i}=n.data[r.directiveStart+r.componentOffset];if(i===Xr.None||i===Xr.Emulated)return null}return Qr(r,t)}function v9(n,e,t){return w9(n,e,t)}function _9(n,e,t){return n.type&40?Qr(n,t):null}var w9=_9,Tk;function rb(n,e,t,r){let i=m9(n,r,e),s=e[yt],o=r.parent||e[Er],a=v9(o,r,e);if(i!=null)if(Array.isArray(t))for(let c=0;c<t.length;c++)wk(s,i,t[c],a,!1);else wk(s,i,t,a,!1);Tk!==void 0&&Tk(s,r,e,t,i)}function Xh(n,e){if(e!==null){let t=e.type;if(t&3)return Qr(e,n);if(t&4)return EE(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return Xh(n,r);{let i=n[e.index];return Kr(i)?EE(-1,i):br(i)}}else{if(t&128)return Xh(n,e.next);if(t&32)return eb(e,n)()||br(n[e.index]);{let r=NN(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Oo(n[or]);return Xh(i,r)}else return Xh(n,e.next)}}}return null}function NN(n,e){if(e!==null){let r=n[or][Er],i=e.projection;return r.projection[i]}return null}function EE(n,e){let t=At+n+1;if(t<e.length){let r=e[t],i=r[ge].firstChild;if(i!==null)return Xh(r,i)}return e[Uo]}function ib(n,e,t,r,i,s,o){for(;t!=null;){let a=r[vs];if(t.type===128){t=t.next;continue}let c=r[t.index],d=t.type;if(o&&e===0&&(c&&mu(br(c),r),t.flags|=2),!WE(t))if(d&8)ib(n,e,t.child,r,i,s,!1),fu(e,n,a,i,c,t,s,r);else if(d&32){let h=eb(t,r),p;for(;p=h();)fu(e,n,a,i,p,t,s,r);fu(e,n,a,i,c,t,s,r)}else d&16?I9(n,e,r,t,i,s):fu(e,n,a,i,c,t,s,r);t=o?t.projectionNext:t.next}}function Ty(n,e,t,r,i,s){ib(t,r,n.firstChild,e,i,s,!1)}function I9(n,e,t,r,i,s){let o=t[or],c=o[Er].projection[r.projection];if(Array.isArray(c))for(let d=0;d<c.length;d++){let h=c[d];fu(e,n,t[vs],i,h,r,s,t)}else{let d=c,h=o[on];nN(r)&&(d.flags|=128),ib(n,e,d,h,i,s,!0)}}function E9(n,e,t,r,i,s,o){let a=r[Uo],c=br(r);a!==c&&fu(e,n,t,s,a,i,o);for(let d=At;d<r.length;d++){let h=r[d];Ty(h[ge],h,n,e,s,a)}}function b9(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let s=r.indexOf("-")===-1?void 0:ki.DashCase;i==null?n.removeStyle(t,r,s):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=ki.Important),n.setStyle(t,r,i,s))}}function MN(n,e,t,r,i){let s=Ai(),o=r&2;try{Bo(-1),o&&e.length>Ut&&SN(n,e,Ut,!1);let a=o?Ke.TemplateUpdateStart:Ke.TemplateCreateStart;rt(a,i,t),t(r,i)}finally{Bo(s);let a=o?Ke.TemplateUpdateEnd:Ke.TemplateCreateEnd;rt(a,i,t)}}function PN(n,e,t){R9(n,e,t),(t.flags&64)===64&&k9(n,e,t)}function sb(n,e,t=Qr){let r=e.localNames;if(r!==null){let i=e.index+1;for(let s=0;s<r.length;s+=2){let o=r[s+1],a=o===-1?t(e,n):n[o];n[i++]=a}}}function C9(n,e,t,r){let s=r.get(uN,lN)||t===Xr.ShadowDom||t===Xr.ExperimentalIsolatedShadowDom,o=n.selectRootElement(e,s);return T9(o),o}function T9(n){S9(n)}var S9=()=>null;function D9(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function ON(n,e,t,r,i,s){let o=e[ge];if(ob(n,o,e,t,r)){jo(n)&&x9(e,n.index);return}n.type&3&&(t=D9(t)),A9(n,e,t,r,i,s)}function A9(n,e,t,r,i,s){if(n.type&3){let o=Qr(n,e);r=s!=null?s(r,n.value||"",t):r,i.setProperty(o,t,r)}else n.type&12}function x9(n,e){let t=Cr(e,n);t[Ie]&16||(t[Ie]|=64)}function R9(n,e,t){let r=t.directiveStart,i=t.directiveEnd;jo(t)&&i9(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||ny(t,e);let s=t.initialInputs;for(let o=r;o<i;o++){let a=n.data[o],c=ef(e,n,o,t);if(mu(c,e),s!==null&&F9(e,o-r,c,a,t,s),Si(a)){let d=Cr(t.index,e);d[Pt]=ef(e,n,o,t)}}}function k9(n,e,t){let r=t.directiveStart,i=t.directiveEnd,s=t.index,o=ZR();try{Bo(s);for(let a=r;a<i;a++){let c=n.data[a],d=e[a];Fm(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&N9(c,d)}}finally{Bo(-1),Fm(o)}}function N9(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function M9(n,e){let t=n.directiveRegistry,r=null;if(t)for(let i=0;i<t.length;i++){let s=t[i];Y3(e,s.selectors,!1)&&(r??=[],Si(s)?r.unshift(s):r.push(s))}return r}function P9(n,e,t,r,i,s){let o=Qr(n,e);O9(e[yt],o,s,n.value,t,r,i)}function O9(n,e,t,r,i,s,o){if(s==null)n.removeAttribute(e,i,t);else{let a=o==null?uc(s):o(s,r||"",i);n.setAttribute(e,i,a,t)}}function F9(n,e,t,r,i,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;a+=2){let c=o[a],d=o[a+1];IE(r,t,c,d)}}function FN(n,e,t,r,i){let s=Ut+t,o=e[ge],a=i(o,e,n,r,t);e[s]=a,du(n,!0);let c=n.type===2;return c?(_N(e[yt],a,n),(BR()===0||Nm(n))&&mu(a,e),$R()):mu(a,e),Bm()&&(!c||!WE(n))&&rb(o,e,a,n),n}function VN(n){let e=n;return WI()?GR():(e=e.parent,du(e,!1)),e}function V9(n,e){let t=n[vs];if(!t)return;let r;try{r=t.get(cr,null)}catch{r=null}r?.(e)}function ob(n,e,t,r,i){let s=n.inputs?.[r],o=n.hostDirectiveInputs?.[r],a=!1;if(o)for(let c=0;c<o.length;c+=2){let d=o[c],h=o[c+1],p=e.data[d];IE(p,t[d],h,i),a=!0}if(s)for(let c of s){let d=t[c],h=e.data[c];IE(h,d,r,i),a=!0}return a}function L9(n,e){let t=Cr(e,n),r=t[ge];U9(r,t);let i=t[Wr];i!==null&&t[au]===null&&(t[au]=dN(i,t[vs])),rt(Ke.ComponentStart);try{ab(r,t,t[Pt])}finally{rt(Ke.ComponentEnd,t[Pt])}}function U9(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function ab(n,e,t){Lm(e);try{let r=n.viewQuery;r!==null&&wE(1,r,t);let i=n.template;i!==null&&MN(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[Ci]?.finishViewCreation(n),n.staticContentQueries&&hN(n,e),n.staticViewQueries&&wE(2,n.viewQuery,t);let s=n.components;s!==null&&j9(e,s)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[Ie]&=-5,Um()}}function j9(n,e){for(let t=0;t<e.length;t++)L9(n,e[t])}function Sy(n,e,t,r){let i=pe(null);try{let s=e.tView,a=n[Ie]&4096?4096:16,c=XE(n,s,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),d=n[e.index];c[Lo]=d;let h=n[Ci];return h!==null&&(c[Ci]=h.createEmbeddedView(s)),ab(s,c,t),c}finally{pe(i)}}function tf(n,e){return!e||e.firstChild===null||nN(n)}function nf(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let s=e[t.index];s!==null&&r.push(br(s)),Kr(s)&&LN(s,r);let o=t.type;if(o&8)nf(n,e,t.child,r);else if(o&32){let a=eb(t,e),c;for(;c=a();)r.push(c)}else if(o&16){let a=NN(e,t);if(Array.isArray(a))r.push(...a);else{let c=Oo(e[or]);nf(c[ge],c,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function LN(n,e){for(let t=At;t<n.length;t++){let r=n[t],i=r[ge].firstChild;i!==null&&nf(r[ge],r,i,e)}n[Uo]!==n[Wr]&&e.push(n[Uo])}function UN(n){if(n[pc]!==null){for(let e of n[pc])e.impl.addSequence(e);n[pc].length=0}}var jN=[];function B9(n){return n[ar]??$9(n)}function $9(n){let e=jN.pop()??Object.create(q9);return e.lView=n,e}function H9(n){n.lView[ar]!==n&&(n.lView=null,jN.push(n))}var q9=oe(B({},zl),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{vc(n.lView)},consumerOnSignalRead(){this.lView[ar]=this}});function z9(n){let e=n[ar]??Object.create(G9);return e.lView=n,e}var G9=oe(B({},zl),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=Oo(n.lView);for(;e&&!BN(e[ge]);)e=Oo(e);e&&UI(e)},consumerOnSignalRead(){this.lView[ar]=this}});function BN(n){return n.type!==2}function $N(n){if(n[Po]===null)return;let e=!0;for(;e;){let t=!1;for(let r of n[Po])r.dirty&&(t=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=t&&!!(n[Ie]&8192)}}var W9=100;function HN(n,e=0){let r=n[bi].rendererFactory,i=!1;i||r.begin?.();try{K9(n,e)}finally{i||r.end?.()}}function K9(n,e){let t=KI();try{Lh(!0),bE(n,e);let r=0;for(;Kh(n);){if(r===W9)throw new ae(103,!1);r++,bE(n,1)}}finally{Lh(t)}}function Q9(n,e,t,r){if(yc(e))return;let i=e[Ie],s=!1,o=!1;Lm(e);let a=!0,c=null,d=null;s||(BN(n)?(d=B9(e),c=Gl(d)):Hg()===null?(a=!1,d=z9(e),c=Gl(d)):e[ar]&&(Za(e[ar]),e[ar]=null));try{LI(e),YR(n.bindingStartIndex),t!==null&&MN(n,e,t,2,r);let h=(i&3)===3;if(!s)if(h){let E=n.preOrderCheckHooks;E!==null&&Wm(e,E,null)}else{let E=n.preOrderHooks;E!==null&&Km(e,E,0,null),sE(e,0)}if(o||Y9(e),$N(e),qN(e,0),n.contentQueries!==null&&hN(n,e),!s)if(h){let E=n.contentCheckHooks;E!==null&&Wm(e,E)}else{let E=n.contentHooks;E!==null&&Km(e,E,1),sE(e,1)}X9(n,e);let p=n.components;p!==null&&GN(e,p,0);let y=n.viewQuery;if(y!==null&&wE(2,y,r),!s)if(h){let E=n.viewCheckHooks;E!==null&&Wm(e,E)}else{let E=n.viewHooks;E!==null&&Km(e,E,2),sE(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[km]){for(let E of e[km])E();e[km]=null}s||(UN(e),e[Ie]&=-73)}catch(h){throw s||vc(e),h}finally{d!==null&&(Dh(d,c),a&&H9(d)),Um()}}function qN(n,e){for(let t=iN(n);t!==null;t=sN(t))for(let r=At;r<t.length;r++){let i=t[r];zN(i,e)}}function Y9(n){for(let e=iN(n);e!==null;e=sN(e)){if(!(e[Ie]&2))continue;let t=e[mc];for(let r=0;r<t.length;r++){let i=t[r];UI(i)}}}function J9(n,e,t){rt(Ke.ComponentStart);let r=Cr(e,n);try{zN(r,t)}finally{rt(Ke.ComponentEnd,r[Pt])}}function zN(n,e){Mm(n)&&bE(n,e)}function bE(n,e){let r=n[ge],i=n[Ie],s=n[ar],o=!!(e===0&&i&16);if(o||=!!(i&64&&e===0),o||=!!(i&1024),o||=!!(s?.dirty&&Ah(s)),o||=!1,s&&(s.dirty=!1),n[Ie]&=-9217,o)Q9(r,n,r.template,n[Pt]);else if(i&8192){let a=pe(null);try{$N(n),qN(n,1);let c=r.components;c!==null&&GN(n,c,1),UN(n)}finally{pe(a)}}}function GN(n,e,t){for(let r=0;r<e.length;r++)J9(n,e[r],t)}function X9(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)Bo(~i);else{let s=i,o=t[++r],a=t[++r];XR(o,s);let c=e[s];rt(Ke.HostBindingsUpdateStart,c);try{a(2,c)}finally{rt(Ke.HostBindingsUpdateEnd,c)}}}}finally{Bo(-1)}}function cb(n,e){let t=KI()?64:1088;for(n[bi].changeDetectionScheduler?.notify(e);n;){n[Ie]|=t;let r=Oo(n);if(uu(n)&&!r)return n;n=r}return null}function WN(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function KN(n,e){let t=At+e;if(t<n.length)return n[t]}function Dy(n,e,t,r=!0){let i=e[ge];if(Z9(i,e,n,t),r){let o=EE(t,n),a=e[yt],c=a.parentNode(n[Uo]);c!==null&&d9(i,n[Er],a,e,c,o)}let s=e[au];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function QN(n,e){let t=rf(n,e);return t!==void 0&&Cy(t[ge],t),t}function rf(n,e){if(n.length<=At)return;let t=At+e,r=n[t];if(r){let i=r[Lo];i!==null&&i!==n&&nb(i,r),e>0&&(n[t-1][Ir]=r[Ir]);let s=$h(n,At+e);u9(r[ge],r);let o=s[Ci];o!==null&&o.detachView(s[ge]),r[on]=null,r[Ir]=null,r[Ie]&=-129}return r}function Z9(n,e,t,r){let i=At+r,s=t.length;r>0&&(t[i-1][Ir]=e),r<s-At?(e[Ir]=t[i],TI(t,At+r,e)):(t.push(e),e[Ir]=null),e[on]=t;let o=e[Lo];o!==null&&t!==o&&YN(o,e);let a=e[Ci];a!==null&&a.insertView(n),Pm(e),e[Ie]|=128}function YN(n,e){let t=n[mc],r=e[on];if(Ti(r))n[Ie]|=2;else{let i=r[on][or];e[or]!==i&&(n[Ie]|=2)}t===null?n[mc]=[e]:t.push(e)}var $o=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,t=e[ge];return nf(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t}get context(){return this._lView[Pt]}set context(e){this._lView[Pt]=e}get destroyed(){return yc(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[on];if(Kr(e)){let t=e[Gh],r=t?t.indexOf(this):-1;r>-1&&(rf(e,r),$h(t,r))}this._attachedToViewContainer=!1}Cy(this._lView[ge],this._lView)}onDestroy(e){jI(this._lView,e)}markForCheck(){cb(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[Ie]&=-129}reattach(){Pm(this._lView),this._lView[Ie]|=128}detectChanges(){this._lView[Ie]|=1024,HN(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ae(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=uu(this._lView),t=this._lView[Lo];t!==null&&!e&&nb(t,this._lView),kN(this._lView[ge],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new ae(902,!1);this._appRef=e;let t=uu(this._lView),r=this._lView[Lo];r!==null&&!t&&YN(r,this._lView),Pm(this._lView)}};var yu=(()=>{class n{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=e6;constructor(t,r,i){this._declarationLView=t,this._declarationTContainer=r,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,r){return this.createEmbeddedViewImpl(t,r)}createEmbeddedViewImpl(t,r,i){let s=Sy(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:r,dehydratedView:i});return new $o(s)}}return n})();function e6(){return lb(pn(),Me())}function lb(n,e){return n.type&4?new yu(e,n,Iu(n,e)):null}function Ay(n,e,t,r,i){let s=n.data[e];if(s===null)s=t6(n,e,t,r,i),JR()&&(s.flags|=32);else if(s.type&64){s.type=t,s.value=r,s.attrs=i;let o=zR();s.injectorIndex=o===null?-1:o.injectorIndex}return du(s,!0),s}function t6(n,e,t,r,i){let s=GI(),o=WI(),a=o?s:s&&s.parent,c=n.data[e]=r6(n,a,t,e,r,i);return n6(n,c,s,o),c}function n6(n,e,t,r){n.firstChild===null&&(n.firstChild=e),t!==null&&(r?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function r6(n,e,t,r,i,s){let o=e?e.injectorIndex:-1,a=0;return qR()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,fieldIndex:-1,customControlIndex:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function i6(n){let e=n[MI]??[],r=n[on][yt],i=[];for(let s of e)s.data[cN]!==void 0?i.push(s):s6(s,r);n[MI]=i}function s6(n,e){let t=0,r=n.firstChild;if(r){let i=n.data[aN];for(;t<i;){let s=r.nextSibling;vN(e,r,!1),r=s,t++}}}var o6=()=>null,a6=()=>null;function CE(n,e){return o6(n,e)}function JN(n,e,t){return a6(n,e,t)}var XN=class{},xy=class{},TE=class{resolveComponentFactory(e){throw new ae(917,!1)}},lf=class{static NULL=new TE},bc=class{},Mi=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>c6()}return n})();function c6(){let n=Me(),e=pn(),t=Cr(e.index,n);return(Ti(t)?t:n)[yt]}var ZN=(()=>{class n{static \u0275prov=se({token:n,providedIn:"root",factory:()=>null})}return n})();var Ym={},SE=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){let i=this.injector.get(e,Ym,r);return i!==Ym||t===Ym?i:this.parentInjector.get(e,t,r)}};function ay(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)i=Tm(i,a);else if(s==2){let c=a,d=e[++o];r=Tm(r,c+": "+d+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function Le(n,e=0){let t=Me();if(t===null)return Ne(n,e);let r=pn();return Zk(r,t,Cn(n),e)}function l6(n,e,t,r,i){let s=r===null?null:{"":-1},o=i(n,t);if(o!==null){let a=o,c=null,d=null;for(let h of o)if(h.resolveHostDirectives!==null){[a,c,d]=h.resolveHostDirectives(o);break}h6(n,e,t,a,s,c,d)}s!==null&&r!==null&&u6(t,r,s)}function u6(n,e,t){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let s=t[e[i+1]];if(s==null)throw new ae(-301,!1);r.push(e[i],s)}}function d6(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function h6(n,e,t,r,i,s,o){let a=r.length,c=null;for(let y=0;y<a;y++){let E=r[y];c===null&&Si(E)&&(c=E,d6(n,t,y)),yE(ny(t,e),n,E.type)}v6(t,n.data.length,a),c?.viewProvidersResolver&&c.viewProvidersResolver(c);for(let y=0;y<a;y++){let E=r[y];E.providersResolver&&E.providersResolver(E)}let d=!1,h=!1,p=TN(n,e,a,null);a>0&&(t.directiveToIndex=new Map);for(let y=0;y<a;y++){let E=r[y];if(t.mergedAttrs=gu(t.mergedAttrs,E.hostAttrs),p6(n,t,e,p,E),y6(p,E,i),o!==null&&o.has(E)){let[P,M]=o.get(E);t.directiveToIndex.set(E.type,[p,P+t.directiveStart,M+t.directiveStart])}else(s===null||!s.has(E))&&t.directiveToIndex.set(E.type,p);E.contentQueries!==null&&(t.flags|=4),(E.hostBindings!==null||E.hostAttrs!==null||E.hostVars!==0)&&(t.flags|=64);let k=E.type.prototype;!d&&(k.ngOnChanges||k.ngOnInit||k.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),d=!0),!h&&(k.ngOnChanges||k.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),h=!0),p++}f6(n,t,s)}function f6(n,e,t){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=n.data[r];if(t===null||!t.has(i))Sk(0,e,i,r),Sk(1,e,i,r),Ak(e,r,!1);else{let s=t.get(i);Dk(0,e,s,r),Dk(1,e,s,r),Ak(e,r,!0)}}}function Sk(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let s in i)if(i.hasOwnProperty(s)){let o;n===0?o=e.inputs??={}:o=e.outputs??={},o[s]??=[],o[s].push(r),eM(e,s)}}function Dk(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let s in i)if(i.hasOwnProperty(s)){let o=i[s],a;n===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[o]??=[],a[o].push(r,s),eM(e,o)}}function eM(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function Ak(n,e,t){let{attrs:r,inputs:i,hostDirectiveInputs:s}=n;if(r===null||!t&&i===null||t&&s===null||YE(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let o=null,a=0;for(;a<r.length;){let c=r[a];if(c===0){a+=4;continue}else if(c===5){a+=2;continue}else if(typeof c=="number")break;if(!t&&i.hasOwnProperty(c)){let d=i[c];for(let h of d)if(h===e){o??=[],o.push(c,r[a+1]);break}}else if(t&&s.hasOwnProperty(c)){let d=s[c];for(let h=0;h<d.length;h+=2)if(d[h]===e){o??=[],o.push(d[h+1],r[a+1]);break}}a+=2}n.initialInputs??=[],n.initialInputs.push(o)}function p6(n,e,t,r,i){n.data[r]=i;let s=i.factory||(i.factory=Mo(i.type,!0)),o=new Ic(s,Si(i),Le,null);n.blueprint[r]=o,t[r]=o,g6(n,e,r,TN(n,t,i.hostVars,Zn),i)}function g6(n,e,t,r,i){let s=i.hostBindings;if(s){let o=n.hostBindingOpCodes;o===null&&(o=n.hostBindingOpCodes=[]);let a=~e.index;m6(o)!=a&&o.push(a),o.push(t,r,s)}}function m6(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function y6(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Si(e)&&(t[""]=n)}}function v6(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function tM(n,e,t,r,i,s,o,a){let c=e[ge],d=c.consts,h=Di(d,o),p=Ay(c,n,t,r,h);return s&&l6(c,e,p,Di(d,a),i),p.mergedAttrs=gu(p.mergedAttrs,p.attrs),p.attrs!==null&&ay(p,p.attrs,!1),p.mergedAttrs!==null&&ay(p,p.mergedAttrs,!0),c.queries!==null&&c.queries.elementStart(c,p),p}function nM(n,e){h3(n,e),PI(e)&&n.queries.elementEnd(e)}function _6(n,e,t,r,i,s){let o=e.consts,a=Di(o,i),c=Ay(e,n,t,r,a);if(c.mergedAttrs=gu(c.mergedAttrs,c.attrs),s!=null){let d=Di(o,s);c.localNames=[];for(let h=0;h<d.length;h+=2)c.localNames.push(d[h],-1)}return c.attrs!==null&&ay(c,c.attrs,!1),c.mergedAttrs!==null&&ay(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function w6(n,e,t){return n[e]=t}function Ni(n,e,t){if(t===Zn)return!1;let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function rM(n,e,t,r){let i=Ni(n,e,t);return Ni(n,e+1,r)||i}function Jm(n,e,t){return function r(i){let s=jo(n)?Cr(n.index,e):e;cb(s,5);let o=e[Pt],a=xk(e,o,t,i),c=r.__ngNextListenerFn__;for(;c;)a=xk(e,o,c,i)&&a,c=c.__ngNextListenerFn__;return a}}function xk(n,e,t,r){let i=pe(null);try{return rt(Ke.OutputStart,e,t),t(r)!==!1}catch(s){return V9(n,s),!1}finally{rt(Ke.OutputEnd,e,t),pe(i)}}function iM(n,e,t,r,i,s,o,a){let c=Nm(n),d=!1,h=null;if(!r&&c&&(h=E6(e,t,s,n.index)),h!==null){let p=h.__ngLastListenerFn__||h;p.__ngNextListenerFn__=o,h.__ngLastListenerFn__=o,d=!0}else{let p=Qr(n,t),y=r?r(p):p;F3(t,y,s,a);let E=i.listen(y,s,a);if(!I6(s)){let k=r?P=>r(br(P[n.index])):n.index;sM(k,e,t,s,a,E,!1)}}return d}function I6(n){return n.startsWith("animation")||n.startsWith("transition")}function E6(n,e,t,r){let i=n.cleanup;if(i!=null)for(let s=0;s<i.length-1;s+=2){let o=i[s];if(o===t&&i[s+1]===r){let a=e[cu],c=i[s+2];return a&&a.length>c?a[c]:null}typeof o=="string"&&(s+=2)}return null}function sM(n,e,t,r,i,s,o){let a=e.firstCreatePass?$I(e):null,c=BI(t),d=c.length;c.push(i,s),a&&a.push(r,n,d,(d+1)*(o?-1:1))}function Rk(n,e,t,r,i,s){let o=e[t],a=e[ge],d=a.data[t].outputs[r],p=o[d].subscribe(s);sM(n.index,a,e,i,s,p,!0)}var DE=Symbol("BINDING");var cy=class extends lf{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=Fo(e);return new vu(t,this.ngModule)}};function b6(n){return Object.keys(n).map(e=>{let[t,r,i]=n[e],s={propName:t,templateName:e,isSignal:(r&Iy.SignalBased)!==0};return i&&(s.transform=i),s})}function C6(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function T6(n,e,t){let r=e instanceof Lt?e:e?.injector;return r&&n.getStandaloneInjector!==null&&(r=n.getStandaloneInjector(r)||r),r?new SE(t,r):t}function S6(n){let e=n.get(bc,null);if(e===null)throw new ae(407,!1);let t=n.get(ZN,null),r=n.get(gs,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:r,ngReflect:!1}}function D6(n,e){let t=oM(n);return mN(e,t,t==="svg"?PR:t==="math"?OR:null)}function oM(n){return(n.selectors[0][0]||"div").toLowerCase()}var vu=class extends xy{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=b6(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=C6(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=e9(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,r,i,s,o){rt(Ke.DynamicComponentStart);let a=pe(null);try{let c=this.componentDef,d=A6(r,c,o,s),h=T6(c,i||this.ngModule,e),p=S6(h),y=p.rendererFactory.createRenderer(null,c),E=r?C9(y,r,c.encapsulation,h):D6(c,y),k=o?.some(kk)||s?.some(H=>typeof H!="function"&&H.bindings.some(kk)),P=XE(null,d,null,512|CN(c),null,null,p,y,h,null,dN(E,h,!0));P[Ut]=E,Lm(P);let M=null;try{let H=tM(Ut,P,2,"#host",()=>d.directiveRegistry,!0,0);_N(y,E,H),mu(E,P),PN(d,P,H),fN(d,H,P),nM(d,H),t!==void 0&&R6(H,this.ngContentSelectors,t),M=Cr(H.index,P),P[Pt]=M[Pt],ab(d,P,null)}catch(H){throw M!==null&&_E(M),_E(P),H}finally{rt(Ke.DynamicComponentEnd),Um()}return new ly(this.componentType,P,!!k)}finally{pe(a)}}};function A6(n,e,t,r){let i=n?["ng-version","21.0.5"]:t9(e.selectors[0]),s=null,o=null,a=0;if(t)for(let h of t)a+=h[DE].requiredVars,h.create&&(h.targetIdx=0,(s??=[]).push(h)),h.update&&(h.targetIdx=0,(o??=[]).push(h));if(r)for(let h=0;h<r.length;h++){let p=r[h];if(typeof p!="function")for(let y of p.bindings){a+=y[DE].requiredVars;let E=h+1;y.create&&(y.targetIdx=E,(s??=[]).push(y)),y.update&&(y.targetIdx=E,(o??=[]).push(y))}}let c=[e];if(r)for(let h of r){let p=typeof h=="function"?h:h.type,y=EI(p);c.push(y)}return JE(0,null,x6(s,o),1,a,c,null,null,null,[i],null)}function x6(n,e){return!n&&!e?null:t=>{if(t&1&&n)for(let r of n)r.create();if(t&2&&e)for(let r of e)r.update()}}function kk(n){let e=n[DE].kind;return e==="input"||e==="twoWay"}var ly=class extends XN{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t,r){super(),this._rootLView=t,this._hasInputBindings=r,this._tNode=Wh(t[ge],Ut),this.location=Iu(this._tNode,t),this.instance=Cr(this._tNode.index,t)[Pt],this.hostView=this.changeDetectorRef=new $o(t,void 0),this.componentType=e}setInput(e,t){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let i=this._rootLView,s=ob(r,i[ge],i,e,t);this.previousInputValues.set(e,t);let o=Cr(r.index,i);cb(o,1)}get injector(){return new wc(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function R6(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let s=t[i];r.push(s!=null&&s.length?Array.from(s):null)}}var Ac=(()=>{class n{static __NG_ELEMENT_ID__=k6}return n})();function k6(){let n=pn();return cM(n,Me())}var N6=Ac,aM=class extends N6{_lContainer;_hostTNode;_hostLView;constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Iu(this._hostTNode,this._hostLView)}get injector(){return new wc(this._hostTNode,this._hostLView)}get parentInjector(){let e=qE(this._hostTNode,this._hostLView);if(Wk(e)){let t=ey(e,this._hostLView),r=Zm(e),i=t[ge].data[r+8];return new wc(i,t)}else return new wc(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=Nk(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-At}createEmbeddedView(e,t,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let o=CE(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},s,o);return this.insertImpl(a,i,tf(this._hostTNode,o)),a}createComponent(e,t,r,i,s,o,a){let c=e&&!a3(e),d;if(c)d=t;else{let M=t||{};d=M.index,r=M.injector,i=M.projectableNodes,s=M.environmentInjector||M.ngModuleRef,o=M.directives,a=M.bindings}let h=c?e:new vu(Fo(e)),p=r||this.parentInjector;if(!s&&h.ngModule==null){let H=(c?p:this.parentInjector).get(Lt,null);H&&(s=H)}let y=Fo(h.componentType??{}),E=CE(this._lContainer,y?.id??null),k=E?.firstChild??null,P=h.create(p,i,k,s,o,a);return this.insertImpl(P.hostView,d,tf(this._hostTNode,E)),P}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(VR(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[on],d=new aM(c,c[Er],c[on]);d.detach(d.indexOf(e))}}let s=this._adjustIndex(t),o=this._lContainer;return Dy(o,i,s,r),e.attachToViewContainerRef(),TI(cE(o),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=Nk(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=rf(this._lContainer,t);r&&($h(cE(this._lContainer),t),Cy(r[ge],r))}detach(e){let t=this._adjustIndex(e,-1),r=rf(this._lContainer,t);return r&&$h(cE(this._lContainer),t)!=null?new $o(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function Nk(n){return n[Gh]}function cE(n){return n[Gh]||(n[Gh]=[])}function cM(n,e){let t,r=e[n.index];return Kr(r)?t=r:(t=WN(r,e,null,n),e[n.index]=t,ZE(e,t)),P6(t,e,n,r),new aM(t,n,e)}function M6(n,e){let t=n[yt],r=t.createComment(""),i=Qr(e,n),s=t.parentNode(i);return sy(t,s,r,t.nextSibling(i),!1),r}var P6=V6,O6=()=>!1;function F6(n,e,t){return O6(n,e,t)}function V6(n,e,t,r){if(n[Uo])return;let i;t.type&8?i=br(r):i=M6(e,t),n[Uo]=i}var AE=class n{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},xE=class n{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){let t=e.queries;if(t!==null){let r=e.contentQueries!==null?e.contentQueries[0]:t.length,i=[];for(let s=0;s<r;s++){let o=t.getByIndex(s),a=this.queries[o.indexInDeclarationView];i.push(a.clone())}return new n(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)ub(e,t).matches!==null&&this.queries[t].setDirty()}},RE=class{flags;read;predicate;constructor(e,t,r=null){this.flags=t,this.read=r,typeof e=="string"?this.predicate=z6(e):this.predicate=e}},kE=class n{queries;constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){let i=t!==null?t.length:0,s=this.getByIndex(r).embeddedTView(e,i);s&&(s.indexInDeclarationView=r,t!==null?t.push(s):t=[s])}return t!==null?new n(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},NE=class n{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,t=-1){this.metadata=e,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new n(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==t;)r=r.parent;return t===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let s=r[i];this.matchTNodeWithReadOption(e,t,L6(t,s)),this.matchTNodeWithReadOption(e,t,Qm(t,e,s,!1,!1))}else r===yu?t.type&4&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,Qm(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===Jn||i===Ac||i===yu&&t.type&4)this.addMatch(t.index,-2);else{let s=Qm(t,e,i,!1,!1);s!==null&&this.addMatch(t.index,s)}else this.addMatch(t.index,r)}}addMatch(e,t){this.matches===null?this.matches=[e,t]:this.matches.push(e,t)}};function L6(n,e){let t=n.localNames;if(t!==null){for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1]}return null}function U6(n,e){return n.type&11?Iu(n,e):n.type&4?lb(n,e):null}function j6(n,e,t,r){return t===-1?U6(e,n):t===-2?B6(n,e,r):ef(n,n[ge],t,e)}function B6(n,e,t){if(t===Jn)return Iu(e,n);if(t===yu)return lb(e,n);if(t===Ac)return cM(e,n)}function lM(n,e,t,r){let i=e[Ci].queries[r];if(i.matches===null){let s=n.data,o=t.matches,a=[];for(let c=0;o!==null&&c<o.length;c+=2){let d=o[c];if(d<0)a.push(null);else{let h=s[d];a.push(j6(e,h,o[c+1],t.metadata.read))}}i.matches=a}return i.matches}function ME(n,e,t,r){let i=n.queries.getByIndex(t),s=i.matches;if(s!==null){let o=lM(n,e,i,t);for(let a=0;a<s.length;a+=2){let c=s[a];if(c>0)r.push(o[a/2]);else{let d=s[a+1],h=e[-c];for(let p=At;p<h.length;p++){let y=h[p];y[Lo]===y[on]&&ME(y[ge],y,d,r)}if(h[mc]!==null){let p=h[mc];for(let y=0;y<p.length;y++){let E=p[y];ME(E[ge],E,d,r)}}}}}return r}function $6(n,e){return n[Ci].queries[e].queryList}function H6(n,e,t){let r=new ry((t&4)===4);return jR(n,e,r,r.destroy),(e[Ci]??=new xE).queries.push(new AE(r))-1}function q6(n,e,t,r){let i=jt();if(i.firstCreatePass){let s=pn();G6(i,new RE(e,t,r),s.index),W6(i,n),(t&2)===2&&(i.staticContentQueries=!0)}return H6(i,Me(),t)}function z6(n){return n.split(",").map(e=>e.trim())}function G6(n,e,t){n.queries===null&&(n.queries=new kE),n.queries.track(new NE(e,t))}function W6(n,e){let t=n.contentQueries||(n.contentQueries=[]),r=t.length?t[t.length-1]:-1;e!==r&&t.push(n.queries.length-1,e)}function ub(n,e){return n.queries.getByIndex(e)}function K6(n,e){let t=n[ge],r=ub(t,e);return r.crossesNgTemplate?ME(t,n,e,[]):lM(t,n,r,e)}var Cc=class{},Ry=class{};var uy=class extends Cc{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new cy(this);constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t;let s=II(e);this._bootstrapComponents=EN(s.bootstrap),this._r3Injector=XI(e,t,[{provide:Cc,useValue:this},{provide:lf,useValue:this.componentFactoryResolver},...r],ps(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},dy=class extends Ry{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new uy(this.moduleType,e,[])}};var sf=class extends Cc{injector;componentFactoryResolver=new cy(this);instance=null;constructor(e){super();let t=new cc([...e.providers,{provide:Cc,useValue:this},{provide:lf,useValue:this.componentFactoryResolver}],e.parent||qh(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function uf(n,e,t=null){return new sf({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var Q6=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=AI(!1,t.type),i=r.length>0?uf([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=se({token:n,providedIn:"environment",factory:()=>new n(Ne(Lt))})}return n})();function $n(n){return wu(()=>{let e=uM(n),t=oe(B({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===zE.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(Q6).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Xr.Emulated,styles:n.styles||Bn,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&Ho("NgStandalone"),dM(t);let r=n.dependencies;return t.directiveDefs=Mk(r,Y6),t.pipeDefs=Mk(r,vR),t.id=Z6(t),t})}function Y6(n){return Fo(n)||EI(n)}function Es(n){return wu(()=>({type:n.type,bootstrap:n.bootstrap||Bn,declarations:n.declarations||Bn,imports:n.imports||Bn,exports:n.exports||Bn,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function J6(n,e){if(n==null)return Vo;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],s,o,a,c;Array.isArray(i)?(a=i[0],s=i[1],o=i[2]??s,c=i[3]||null):(s=i,o=i,a=Iy.None,c=null),t[s]=[r,a,c],e[s]=o}return t}function X6(n){if(n==null)return Vo;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function Tn(n){return wu(()=>{let e=uM(n);return dM(e),e})}function db(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone??!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function uM(n){let e={};return{type:n.type,providersResolver:null,viewProvidersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||Vo,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||Bn,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:J6(n.inputs,e),outputs:X6(n.outputs),debugInfo:null}}function dM(n){n.features?.forEach(e=>e(n))}function Mk(n,e){return n?()=>{let t=typeof n=="function"?n():n,r=[];for(let i of t){let s=e(i);s!==null&&r.push(s)}return r}:null}function Z6(n){let e=0,t=typeof n.consts=="function"?"":n.consts,r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let s of r.join("|"))e=Math.imul(31,e)+s.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function e5(n){return Object.getPrototypeOf(n.prototype).constructor}function bs(n){let e=e5(n.type),t=!0,r=[n];for(;e;){let i;if(Si(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new ae(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let o=n;o.inputs=lE(n.inputs),o.declaredInputs=lE(n.declaredInputs),o.outputs=lE(n.outputs);let a=i.hostBindings;a&&s5(n,a);let c=i.viewQuery,d=i.contentQueries;if(c&&r5(n,c),d&&i5(n,d),t5(n,i),yR(n.outputs,i.outputs),Si(i)&&i.data.animation){let h=n.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let s=i.features;if(s)for(let o=0;o<s.length;o++){let a=s[o];a&&a.ngInherit&&a(n),a===bs&&(t=!1)}}e=Object.getPrototypeOf(e)}n5(r)}function t5(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t])}}function n5(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=gu(i.hostAttrs,t=gu(t,i.hostAttrs))}}function lE(n){return n===Vo?{}:n===Bn?[]:n}function r5(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function i5(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,s)=>{e(r,i,s),t(r,i,s)}:n.contentQueries=e}function s5(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function o5(n,e,t,r,i,s,o,a){if(t.firstCreatePass){n.mergedAttrs=gu(n.mergedAttrs,n.attrs);let h=n.tView=JE(2,n,i,s,o,t.directiveRegistry,t.pipeRegistry,null,t.schemas,t.consts,null);t.queries!==null&&(t.queries.template(t,n),h.queries=t.queries.embeddedTView(n))}a&&(n.flags|=a),du(n,!1);let c=a5(t,e,n,r);Bm()&&rb(t,e,c,n),mu(c,e);let d=WN(c,e,c,n);e[r+Ut]=d,ZE(e,d),F6(d,n,e)}function hy(n,e,t,r,i,s,o,a,c,d,h){let p=t+Ut,y;if(e.firstCreatePass){if(y=Ay(e,p,4,o||null,a||null),d!=null){let E=Di(e.consts,d);y.localNames=[];for(let k=0;k<E.length;k+=2)y.localNames.push(E[k],-1)}}else y=e.data[p];return o5(y,n,e,t,r,i,s,c),d!=null&&sb(n,y,h),y}var a5=c5;function c5(n,e,t,r){return $m(!0),e[yt].createComment("")}var hb=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=se({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();function hM(n){return typeof n=="function"&&n[Un]!==void 0}function fb(n){return hM(n)&&typeof n.set=="function"}var pb=new ce("");function qo(n){return!!n&&typeof n.then=="function"}function gb(n){return!!n&&typeof n.subscribe=="function"}var fM=new ce("");var mb=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r});appInits=j(fM,{optional:!0})??[];injector=j(Mt);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let s=an(this.injector,i);if(qo(s))t.push(s);else if(gb(s)){let o=new Promise((a,c)=>{s.subscribe({complete:a,error:c})});t.push(o)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=se({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),ky=new ce("");function pM(){Nw(()=>{let n="";throw new ae(600,n)})}function gM(n){return n.isBoundToModule}var l5=10;var zo=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=j(cr);afterRenderManager=j(tb);zonelessEnabled=j(Yh);rootEffectScheduler=j(Hm);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new gt;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=j(_s);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(_e(t=>!t))}constructor(){j(Dc,{optional:!0})}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}_injector=j(Lt);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,r){return this.bootstrapImpl(t,r)}bootstrapImpl(t,r,i=Mt.NULL){return this._injector.get(_t).run(()=>{rt(Ke.BootstrapComponentStart);let o=t instanceof xy;if(!this._injector.get(mb).done){let k="";throw new ae(405,k)}let c;o?c=t:c=this._injector.get(lf).resolveComponentFactory(t),this.componentTypes.push(c.componentType);let d=gM(c)?void 0:this._injector.get(Cc),h=r||c.selector,p=c.create(i,[],h,d),y=p.location.nativeElement,E=p.injector.get(pb,null);return E?.registerApplication(y),p.onDestroy(()=>{this.detachView(p.hostView),Zh(this.components,p),E?.unregisterApplication(y)}),this._loadComponent(p),rt(Ke.BootstrapComponentEnd,p),p})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){rt(Ke.ChangeDetectionStart),this.tracingSnapshot!==null?this.tracingSnapshot.run(Ey.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw rt(Ke.ChangeDetectionEnd),new ae(101,!1);let t=pe(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,pe(t),this.afterTick.next(),rt(Ke.ChangeDetectionEnd)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(bc,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<l5;){rt(Ke.ChangeDetectionSyncStart);try{this.synchronizeOnce()}finally{rt(Ke.ChangeDetectionSyncEnd)}}}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let t=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!Kh(i))continue;let s=r&&!this.zonelessEnabled?0:1;HN(i,s),t=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}t||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>Kh(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;Zh(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(t),this._injector.get(ky,[]).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Zh(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new ae(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||n)};static \u0275prov=se({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Zh(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function df(n,e,t,r){let i=Me(),s=_c();if(Ni(i,s,e)){let o=jt(),a=jm();P9(a,i,n,e,t,r)}return df}var ace=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";var PE=class{destroy(e){}updateValue(e,t){}swap(e,t){let r=Math.min(e,t),i=Math.max(e,t),s=this.detach(i);if(i-r>1){let o=this.detach(r);this.attach(r,s),this.attach(i,o)}else this.attach(r,s)}move(e,t){this.attach(t,this.detach(e))}};function uE(n,e,t,r,i){return n===t&&Object.is(e,r)?1:Object.is(i(n,e),i(t,r))?-1:0}function u5(n,e,t,r){let i,s,o=0,a=n.length-1,c=void 0;if(Array.isArray(e)){pe(r);let d=e.length-1;for(pe(null);o<=a&&o<=d;){let h=n.at(o),p=e[o],y=uE(o,h,o,p,t);if(y!==0){y<0&&n.updateValue(o,p),o++;continue}let E=n.at(a),k=e[d],P=uE(a,E,d,k,t);if(P!==0){P<0&&n.updateValue(a,k),a--,d--;continue}let M=t(o,h),H=t(a,E),Y=t(o,p);if(Object.is(Y,H)){let ee=t(d,k);Object.is(ee,M)?(n.swap(o,a),n.updateValue(a,k),d--,a--):n.move(a,o),n.updateValue(o,p),o++;continue}if(i??=new fy,s??=Ok(n,o,a,t),OE(n,i,o,Y))n.updateValue(o,p),o++,a++;else if(s.has(Y))i.set(M,n.detach(o)),a--;else{let ee=n.create(o,e[o]);n.attach(o,ee),o++,a++}}for(;o<=d;)Pk(n,i,t,o,e[o]),o++}else if(e!=null){pe(r);let d=e[Symbol.iterator]();pe(null);let h=d.next();for(;!h.done&&o<=a;){let p=n.at(o),y=h.value,E=uE(o,p,o,y,t);if(E!==0)E<0&&n.updateValue(o,y),o++,h=d.next();else{i??=new fy,s??=Ok(n,o,a,t);let k=t(o,y);if(OE(n,i,o,k))n.updateValue(o,y),o++,a++,h=d.next();else if(!s.has(k))n.attach(o,n.create(o,y)),o++,a++,h=d.next();else{let P=t(o,p);i.set(P,n.detach(o)),a--}}}for(;!h.done;)Pk(n,i,t,n.length,h.value),h=d.next()}for(;o<=a;)n.destroy(n.detach(a--));i?.forEach(d=>{n.destroy(d)})}function OE(n,e,t,r){return e!==void 0&&e.has(r)?(n.attach(t,e.get(r)),e.delete(r),!0):!1}function Pk(n,e,t,r,i){if(OE(n,e,r,t(r,i)))n.updateValue(r,i);else{let s=n.create(r,i);n.attach(r,s)}}function Ok(n,e,t,r){let i=new Set;for(let s=e;s<=t;s++)i.add(r(s,n.at(s)));return i}var fy=class{kvMap=new Map;_vMap=void 0;has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let t=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(t)?(this.kvMap.set(e,this._vMap.get(t)),this._vMap.delete(t)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,t){if(this.kvMap.has(e)){let r=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,t)}else this.kvMap.set(e,t)}forEach(e){for(let[t,r]of this.kvMap)if(e(r,t),this._vMap!==void 0){let i=this._vMap;for(;i.has(r);)r=i.get(r),e(r,t)}}};function ue(n,e,t,r,i,s,o,a){Ho("NgControlFlow");let c=Me(),d=jt(),h=Di(d.consts,s);return hy(c,d,n,e,t,r,i,h,256,o,a),yb}function yb(n,e,t,r,i,s,o,a){Ho("NgControlFlow");let c=Me(),d=jt(),h=Di(d.consts,s);return hy(c,d,n,e,t,r,i,h,512,o,a),yb}function de(n,e){Ho("NgControlFlow");let t=Me(),r=_c(),i=t[r]!==Zn?t[r]:-1,s=i!==-1?py(t,Ut+i):void 0,o=0;if(Ni(t,r,n)){let a=pe(null);try{if(s!==void 0&&QN(s,o),n!==-1){let c=Ut+n,d=py(t,c),h=UE(t[ge],c),p=JN(d,h,t),y=Sy(t,h,e,{dehydratedView:p});Dy(d,y,o,tf(h,p))}}finally{pe(a)}}else if(s!==void 0){let a=KN(s,o);a!==void 0&&(a[Pt]=e)}}var FE=class{lContainer;$implicit;$index;constructor(e,t,r){this.lContainer=e,this.$implicit=t,this.$index=r}get $count(){return this.lContainer.length-At}};function Eu(n,e){return e}var VE=class{hasEmptyBlock;trackByFn;liveCollection;constructor(e,t,r){this.hasEmptyBlock=e,this.trackByFn=t,this.liveCollection=r}};function Ct(n,e,t,r,i,s,o,a,c,d,h,p,y){Ho("NgControlFlow");let E=Me(),k=jt(),P=c!==void 0,M=Me(),H=a?o.bind(M[or][Pt]):o,Y=new VE(P,H);M[Ut+n]=Y,hy(E,k,n+1,e,t,r,i,Di(k.consts,s),256),P&&hy(E,k,n+2,c,d,h,p,Di(k.consts,y),512)}var LE=class extends PE{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(e,t,r){super(),this.lContainer=e,this.hostLView=t,this.templateTNode=r}get length(){return this.lContainer.length-At}at(e){return this.getLView(e)[Pt].$implicit}attach(e,t){let r=t[au];this.needsIndexUpdate||=e!==this.length,Dy(this.lContainer,t,e,tf(this.templateTNode,r)),d5(this.lContainer,e)}detach(e){return this.needsIndexUpdate||=e!==this.length-1,h5(this.lContainer,e),f5(this.lContainer,e)}create(e,t){let r=CE(this.lContainer,this.templateTNode.tView.ssrId);return Sy(this.hostLView,this.templateTNode,new FE(this.lContainer,t,e),{dehydratedView:r})}destroy(e){Cy(e[ge],e)}updateValue(e,t){this.getLView(e)[Pt].$implicit=t}reset(){this.needsIndexUpdate=!1}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[Pt].$index=e}getLView(e){return p5(this.lContainer,e)}};function Tt(n){let e=pe(null),t=Ai();try{let r=Me(),i=r[ge],s=r[t],o=t+1,a=py(r,o);if(s.liveCollection===void 0){let d=UE(i,o);s.liveCollection=new LE(a,r,d)}else s.liveCollection.reset();let c=s.liveCollection;if(u5(c,n,s.trackByFn,e),c.updateIndexes(),s.hasEmptyBlock){let d=_c(),h=c.length===0;if(Ni(r,d,h)){let p=t+2,y=py(r,p);if(h){let E=UE(i,p),k=JN(y,E,r),P=Sy(r,E,void 0,{dehydratedView:k});Dy(y,P,0,tf(E,k))}else i.firstUpdatePass&&i6(y),QN(y,0)}}}finally{pe(e)}}function py(n,e){return n[e]}function d5(n,e){if(n.length<=At)return;let t=At+e,r=n[t],i=r?r[gc]:void 0;if(r&&i&&i.detachedLeaveAnimationFns&&i.detachedLeaveAnimationFns.length>0){let s=r[vs];c9(s,i),Ec.delete(r),i.detachedLeaveAnimationFns=void 0}}function h5(n,e){if(n.length<=At)return;let t=At+e,r=n[t],i=r?r[gc]:void 0;i&&i.leave&&i.leave.size>0&&(i.detachedLeaveAnimationFns=[])}function f5(n,e){return rf(n,e)}function p5(n,e){return KN(n,e)}function UE(n,e){return Wh(n,e)}function Ue(n,e,t){let r=Me(),i=_c();if(Ni(r,i,e)){let s=jt(),o=jm();ON(o,r,n,e,r[yt],t)}return Ue}function jE(n,e,t,r,i){ob(e,n,t,i?"class":"style",r)}function x(n,e,t,r){let i=Me(),s=i[ge],o=n+Ut,a=s.firstCreatePass?tM(o,i,2,e,M9,HR(),t,r):s.data[o];if(FN(a,i,n,e,mM),Nm(a)){let c=i[ge];PN(c,i,a),fN(c,a,i)}return r!=null&&sb(i,a),x}function R(){let n=jt(),e=pn(),t=VN(e);return n.firstCreatePass&&nM(n,t),qI(t)&&zI(),HI(),t.classesWithoutHost!=null&&p3(t)&&jE(n,t,Me(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&g3(t)&&jE(n,t,Me(),t.stylesWithoutHost,!1),R}function Ot(n,e,t,r){return x(n,e,t,r),R(),Ot}function Pi(n,e,t,r){let i=Me(),s=i[ge],o=n+Ut,a=s.firstCreatePass?_6(o,s,2,e,t,r):s.data[o];return FN(a,i,n,e,mM),r!=null&&sb(i,a),Pi}function Go(){let n=pn(),e=VN(n);return qI(e)&&zI(),HI(),Go}var mM=(n,e,t,r,i)=>($m(!0),mN(e[yt],r,sk()));function je(){return Me()}var Jh=void 0;function g5(n){let e=Math.floor(Math.abs(n)),t=n.toString().replace(/^[^.]*\.?/,"").length;return e===1&&t===0?1:5}var m5=["en",[["a","p"],["AM","PM"]],[["AM","PM"]],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Jh,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Jh,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm\u202Fa","h:mm:ss\u202Fa","h:mm:ss\u202Fa z","h:mm:ss\u202Fa zzzz"],["{1}, {0}",Jh,Jh,Jh],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",g5],dE={};function ur(n){let e=y5(n),t=Fk(e);if(t)return t;let r=e.split("-")[0];if(t=Fk(r),t)return t;if(r==="en")return m5;throw new ae(701,!1)}function Fk(n){return n in dE||(dE[n]=ms.ng&&ms.ng.common&&ms.ng.common.locales&&ms.ng.common.locales[n]),dE[n]}var Ft=(function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n})(Ft||{});function y5(n){return n.toLowerCase().replace(/_/g,"-")}var hf="en-US";var v5=hf;function yM(n){typeof n=="string"&&(v5=n.toLowerCase().replace(/_/g,"-"))}function Q(n,e,t){let r=Me(),i=jt(),s=pn();return vM(i,r,r[yt],s,n,e,t),Q}function bu(n,e,t){let r=Me(),i=jt(),s=pn();return(s.type&3||t)&&iM(s,i,r,t,r[yt],n,e,Jm(s,r,e)),bu}function vM(n,e,t,r,i,s,o){let a=!0,c=null;if((r.type&3||o)&&(c??=Jm(r,e,s),iM(r,n,e,o,t,i,s,c)&&(a=!1)),a){let d=r.outputs?.[i],h=r.hostDirectiveOutputs?.[i];if(h&&h.length)for(let p=0;p<h.length;p+=2){let y=h[p],E=h[p+1];c??=Jm(r,e,s),Rk(r,e,y,E,i,c)}if(d&&d.length)for(let p of d)c??=Jm(r,e,s),Rk(r,e,p,i,i,c)}}function $(n=1){return ik(n)}function Ny(n,e,t,r){return q6(n,e,t,r),Ny}function vb(n){let e=Me(),t=jt(),r=QI();Vm(r+1);let i=ub(t,r);if(n.dirty&&FR(e)===((i.metadata.flags&2)===2)){if(i.matches===null)n.reset([]);else{let s=K6(e,r);n.reset(s,A3),n.notifyOnChanges()}return!0}return!1}function _b(){return $6(Me(),QI())}function wb(n){let e=WR();return FI(e,Ut+n)}function Gm(n,e){return n<<17|e<<2}function Tc(n){return n>>17&32767}function _5(n){return(n&2)==2}function w5(n,e){return n&131071|e<<17}function BE(n){return n|2}function _u(n){return(n&131068)>>2}function hE(n,e){return n&-131069|e<<2}function I5(n){return(n&1)===1}function $E(n){return n|1}function E5(n,e,t,r,i,s){let o=s?e.classBindings:e.styleBindings,a=Tc(o),c=_u(o);n[r]=t;let d=!1,h;if(Array.isArray(t)){let p=t;h=p[1],(h===null||ou(p,h)>0)&&(d=!0)}else h=t;if(i)if(c!==0){let y=Tc(n[a+1]);n[r+1]=Gm(y,a),y!==0&&(n[y+1]=hE(n[y+1],r)),n[a+1]=w5(n[a+1],r)}else n[r+1]=Gm(a,0),a!==0&&(n[a+1]=hE(n[a+1],r)),a=r;else n[r+1]=Gm(c,0),a===0?a=r:n[c+1]=hE(n[c+1],r),c=r;d&&(n[r+1]=BE(n[r+1])),Vk(n,h,r,!0),Vk(n,h,r,!1),b5(e,h,n,r,s),o=Gm(a,c),s?e.classBindings=o:e.styleBindings=o}function b5(n,e,t,r,i){let s=i?n.residualClasses:n.residualStyles;s!=null&&typeof e=="string"&&ou(s,e)>=0&&(t[r+1]=$E(t[r+1]))}function Vk(n,e,t,r){let i=n[t+1],s=e===null,o=r?Tc(i):_u(i),a=!1;for(;o!==0&&(a===!1||s);){let c=n[o],d=n[o+1];C5(c,e)&&(a=!0,n[o+1]=r?$E(d):BE(d)),o=r?Tc(d):_u(d)}a&&(n[t+1]=r?BE(i):$E(i))}function C5(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?ou(n,e)>=0:!1}var Jr={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function T5(n){return n.substring(Jr.key,Jr.keyEnd)}function S5(n){return D5(n),_M(n,wM(n,0,Jr.textEnd))}function _M(n,e){let t=Jr.textEnd;return t===e?-1:(e=Jr.keyEnd=A5(n,Jr.key=e,t),wM(n,e,t))}function D5(n){Jr.key=0,Jr.keyEnd=0,Jr.value=0,Jr.valueEnd=0,Jr.textEnd=n.length}function wM(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function A5(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}function My(n,e,t){return IM(n,e,t,!1),My}function Mn(n,e){return IM(n,e,null,!0),Mn}function it(n){R5(F5,x5,n,!0)}function x5(n,e){for(let t=S5(e);t>=0;t=_M(e,t))xm(n,T5(e),!0)}function IM(n,e,t,r){let i=Me(),s=jt(),o=Om(2);if(s.firstUpdatePass&&bM(s,n,o,r),e!==Zn&&Ni(i,o,e)){let a=s.data[Ai()];CM(s,a,i,i[yt],n,i[o+1]=L5(e,t),r,o)}}function R5(n,e,t,r){let i=jt(),s=Om(2);i.firstUpdatePass&&bM(i,null,s,r);let o=Me();if(t!==Zn&&Ni(o,s,t)){let a=i.data[Ai()];if(TM(a,r)&&!EM(i,s)){let c=r?a.classesWithoutHost:a.stylesWithoutHost;c!==null&&(t=Tm(c,t||"")),jE(i,a,o,t,r)}else V5(i,a,o,o[yt],o[s+1],o[s+1]=O5(n,e,t),r,s)}}function EM(n,e){return e>=n.expandoStartIndex}function bM(n,e,t,r){let i=n.data;if(i[t+1]===null){let s=i[Ai()],o=EM(n,t);TM(s,r)&&e===null&&!o&&(e=!1),e=k5(i,s,e,r),E5(i,s,e,t,o,r)}}function k5(n,e,t,r){let i=ek(n),s=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=fE(null,n,e,t,r),t=of(t,e.attrs,r),s=null);else{let o=e.directiveStylingLast;if(o===-1||n[o]!==i)if(t=fE(i,n,e,t,r),s===null){let c=N5(n,e,r);c!==void 0&&Array.isArray(c)&&(c=fE(null,n,e,c[1],r),c=of(c,e.attrs,r),M5(n,e,r,c))}else s=P5(n,e,r)}return s!==void 0&&(r?e.residualClasses=s:e.residualStyles=s),t}function N5(n,e,t){let r=t?e.classBindings:e.styleBindings;if(_u(r)!==0)return n[Tc(r)]}function M5(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[Tc(i)]=r}function P5(n,e,t){let r,i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++){let o=n[s].hostAttrs;r=of(r,o,t)}return of(r,e.attrs,t)}function fE(n,e,t,r,i){let s=null,o=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<o&&(s=e[a],r=of(r,s.hostAttrs,i),s!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function of(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let s=0;s<e.length;s++){let o=e[s];typeof o=="number"?i=o:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),xm(n,o,t?!0:e[++s]))}return n===void 0?null:n}function O5(n,e,t){if(t==null||t==="")return Bn;let r=[],i=cf(t);if(Array.isArray(i))for(let s=0;s<i.length;s++)n(r,i[s],!0);else if(typeof i=="object")for(let s in i)i.hasOwnProperty(s)&&n(r,s,i[s]);else typeof i=="string"&&e(r,i);return r}function F5(n,e,t){let r=String(e);r!==""&&!r.includes(" ")&&xm(n,r,t)}function V5(n,e,t,r,i,s,o,a){i===Zn&&(i=Bn);let c=0,d=0,h=0<i.length?i[0]:null,p=0<s.length?s[0]:null;for(;h!==null||p!==null;){let y=c<i.length?i[c+1]:void 0,E=d<s.length?s[d+1]:void 0,k=null,P;h===p?(c+=2,d+=2,y!==E&&(k=p,P=E)):p===null||h!==null&&h<p?(c+=2,k=h):(d+=2,k=p,P=E),k!==null&&CM(n,e,t,r,k,P,o,a),h=c<i.length?i[c]:null,p=d<s.length?s[d]:null}}function CM(n,e,t,r,i,s,o,a){if(!(e.type&3))return;let c=n.data,d=c[a+1],h=I5(d)?Lk(c,e,t,i,_u(d),o):void 0;if(!gy(h)){gy(s)||_5(d)&&(s=Lk(c,null,t,i,a,o));let p=OI(Ai(),t);b9(r,o,p,i,s)}}function Lk(n,e,t,r,i,s){let o=e===null,a;for(;i>0;){let c=n[i],d=Array.isArray(c),h=d?c[1]:c,p=h===null,y=t[i+1];y===Zn&&(y=p?Bn:void 0);let E=p?Rm(y,r):h===r?y:void 0;if(d&&!gy(E)&&(E=Rm(c,r)),gy(E)&&(a=E,o))return a;let k=n[i+1];i=o?Tc(k):_u(k)}if(e!==null){let c=s?e.residualClasses:e.residualStyles;c!=null&&(a=Rm(c,r))}return a}function gy(n){return n!==void 0}function L5(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=ps(cf(n)))),n}function TM(n,e){return(n.flags&(e?8:16))!==0}function N(n,e=""){let t=Me(),r=jt(),i=n+Ut,s=r.firstCreatePass?Ay(r,i,1,e,null):r.data[i],o=U5(r,t,s,e,n);t[i]=o,Bm()&&rb(r,t,o,s),du(s,!1)}var U5=(n,e,t,r,i)=>($m(!0),j3(e[yt],r));function j5(n,e,t,r=""){return Ni(n,_c(),t)?e+uc(t)+r:Zn}function B5(n,e,t,r,i,s=""){let o=QR(),a=rM(n,o,t,i);return Om(2),a?e+uc(t)+r+uc(i)+s:Zn}function Pe(n){return ct("",n),Pe}function ct(n,e,t){let r=Me(),i=j5(r,n,e,t);return i!==Zn&&SM(r,Ai(),i),ct}function Py(n,e,t,r,i){let s=Me(),o=B5(s,n,e,t,r,i);return o!==Zn&&SM(s,Ai(),o),Py}function SM(n,e,t){let r=OI(e,n);B3(n[yt],r,t)}function un(n,e,t){fb(e)&&(e=e());let r=Me(),i=_c();if(Ni(r,i,e)){let s=jt(),o=jm();ON(o,r,n,e,r[yt],t)}return un}function gn(n,e){let t=fb(n);return t&&n.set(e),t}function dn(n,e){let t=Me(),r=jt(),i=pn();return vM(r,t,t[yt],i,n,e),dn}function Uk(n,e,t){let r=jt();r.firstCreatePass&&DM(e,r.data,r.blueprint,Si(n),t)}function DM(n,e,t,r,i){if(n=Cn(n),Array.isArray(n))for(let s=0;s<n.length;s++)DM(n[s],e,t,r,i);else{let s=jt(),o=Me(),a=pn(),c=ac(n)?n:Cn(n.provide),d=RI(n),h=a.providerIndexes&1048575,p=a.directiveStart,y=a.providerIndexes>>20;if(ac(n)||!n.multi){let E=new Ic(d,i,Le,null),k=gE(c,e,i?h:h+y,p);k===-1?(yE(ny(a,o),s,c),pE(s,n,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(E),o.push(E)):(t[k]=E,o[k]=E)}else{let E=gE(c,e,h+y,p),k=gE(c,e,h,h+y),P=E>=0&&t[E],M=k>=0&&t[k];if(i&&!M||!i&&!P){yE(ny(a,o),s,c);let H=q5(i?H5:$5,t.length,i,r,d,n);!i&&M&&(t[k].providerFactory=H),pE(s,n,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(H),o.push(H)}else{let H=AM(t[i?k:E],d,!i&&r);pE(s,n,E>-1?E:k,H)}!i&&r&&M&&t[k].componentProviders++}}}function pE(n,e,t,r){let i=ac(e),s=kR(e);if(i||s){let c=(s?Cn(e.useClass):e).prototype.ngOnDestroy;if(c){let d=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let h=d.indexOf(t);h===-1?d.push(t,[r,c]):d[h+1].push(r,c)}else d.push(t,c)}}}function AM(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function gE(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function $5(n,e,t,r,i){return HE(this.multi,[])}function H5(n,e,t,r,i){let s=this.multi,o;if(this.providerFactory){let a=this.providerFactory.componentProviders,c=ef(r,r[ge],this.providerFactory.index,i);o=c.slice(0,a),HE(s,o);for(let d=a;d<c.length;d++)o.push(c[d])}else o=[],HE(s,o);return o}function HE(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function q5(n,e,t,r,i,s){let o=new Ic(n,t,Le,null);return o.multi=[],o.index=e,o.componentProviders=0,AM(o,i,r&&!t),o}function Cu(n,e){return t=>{t.providersResolver=(r,i)=>Uk(r,i?i(n):n,!1),e&&(t.viewProvidersResolver=(r,i)=>Uk(r,i?i(e):e,!0))}}function z5(n,e){let t=n[e];return t===Zn?void 0:t}function G5(n,e,t,r,i,s,o){let a=e+t;return rM(n,a,i,s)?w6(n,a+2,o?r.call(o,i,s):r(i,s)):z5(n,a+2)}function ff(n,e){let t=jt(),r,i=n+Ut;t.firstCreatePass?(r=W5(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];let s=r.factory||(r.factory=Mo(r.type,!0)),o,a=jn(Le);try{let c=ty(!1),d=s();return ty(c),VI(t,Me(),i,d),d}finally{jn(a)}}function W5(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function pf(n,e,t,r){let i=n+Ut,s=Me(),o=FI(s,i);return K5(s,i)?G5(s,KR(),e,o.transform,t,r,o):o.transform(t,r)}function K5(n,e){return n[ge].data[e].pure}var my=class{ngModuleFactory;componentFactories;constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},Ib=(()=>{class n{compileModuleSync(t){return new dy(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=II(t),s=EN(i.declarations).reduce((o,a)=>{let c=Fo(a);return c&&o.push(new vu(c)),o},[]);return new my(r,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=se({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var xM=(()=>{class n{applicationErrorHandler=j(cr);appRef=j(zo);taskService=j(_s);ngZone=j(_t);zonelessEnabled=j(Yh);tracing=j(Dc,{optional:!0});zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new sn;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Uh):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(j(iE,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()}))}notify(t){if(!this.zonelessEnabled&&t===5)return;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2;break}case 12:{this.appRef.dirtyFlags|=16;break}case 13:{this.appRef.dirtyFlags|=2;break}case 11:break;case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?eE:ZI;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Uh+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(t),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,eE(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=se({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function RM(){return[{provide:gs,useExisting:xM},{provide:_t,useClass:jh},{provide:Yh,useValue:!0}]}function Q5(){return typeof $localize<"u"&&$localize.locale||hf}var gf=new ce("",{factory:()=>j(gf,{optional:!0,skipSelf:!0})||Q5()});function st(n,e){return qg(n,e?.equal)}var NM=Symbol("InputSignalNode#UNSET"),c$=oe(B({},zg),{transformFn:void 0,applyValueToInputSignal(n,e){xh(n,e)}});function MM(n,e){let t=Object.create(c$);t.value=n,t.transformFn=e?.transform;function r(){if(Sh(t),t.value===NM){let i=null;throw new ae(-950,i)}return t.value}return r[Un]=t,r}var Fy=class{attributeName;constructor(e){this.attributeName=e}__NG_ELEMENT_ID__=()=>af(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}};function kM(n,e){return MM(n,e)}function l$(n){return MM(NM,n)}var PM=(kM.required=l$,kM);var Eb=new ce(""),u$=new ce("");function mf(n){return!n.moduleRef}function d$(n){let e=mf(n)?n.r3Injector:n.moduleRef.injector,t=e.get(_t);return t.run(()=>{mf(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(cr),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:r})}),mf(n)){let s=()=>e.destroy(),o=n.platformInjector.get(Eb);o.add(s),e.onDestroy(()=>{i.unsubscribe(),o.delete(s)})}else{let s=()=>n.moduleRef.destroy(),o=n.platformInjector.get(Eb);o.add(s),n.moduleRef.onDestroy(()=>{Zh(n.allPlatformModules,n.moduleRef),i.unsubscribe(),o.delete(s)})}return f$(r,t,()=>{let s=e.get(_s),o=s.add(),a=e.get(mb);return a.runInitializers(),a.donePromise.then(()=>{let c=e.get(gf,hf);if(yM(c||hf),!e.get(u$,!0))return mf(n)?e.get(zo):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(mf(n)){let h=e.get(zo);return n.rootComponent!==void 0&&h.bootstrap(n.rootComponent),h}else return h$?.(n.moduleRef,n.allPlatformModules),n.moduleRef}).finally(()=>void s.remove(o))})})}var h$;function f$(n,e,t){try{let r=t();return qo(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n(r)),r}}var Oy=null;function p$(n=[],e){return Mt.create({name:e,providers:[{provide:Hh,useValue:"platform"},{provide:Eb,useValue:new Set([()=>Oy=null])},...n]})}function g$(n=[]){if(Oy)return Oy;let e=p$(n);return Oy=e,pM(),m$(e),e}function m$(n){let e=n.get(vy,null);an(n,()=>{e?.forEach(t=>t())})}function bb(){return!1}var Wo=(()=>{class n{static __NG_ELEMENT_ID__=y$}return n})();function y$(n){return v$(pn(),Me(),(n&16)===16)}function v$(n,e,t){if(jo(n)&&!t){let r=Cr(n.index,e);return new $o(r,r)}else if(n.type&175){let r=e[or];return new $o(r,e)}return null}function OM(n){let{rootComponent:e,appProviders:t,platformProviders:r,platformRef:i}=n;rt(Ke.BootstrapApplicationStart);try{let s=i?.injector??g$(r),o=[RM(),lk,...t||[]],a=new sf({providers:o,parent:s,debugName:"",runEnvironmentInitializers:!1});return d$({r3Injector:a.injector,platformInjector:s,rootComponent:e})}catch(s){return Promise.reject(s)}finally{rt(Ke.BootstrapApplicationEnd)}}function Su(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}var FM=null;function Sr(){return FM}function Cb(n){FM??=n}var yf=class{},Vy=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=se({token:n,factory:()=>j(VM),providedIn:"platform"})}return n})();var VM=(()=>{class n extends Vy{_location;_history;_doc=j(cn);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Sr().getBaseHref(this._doc)}onPopState(t){let r=Sr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=Sr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||n)};static \u0275prov=se({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function jM(n,e){return n?e?n.endsWith("/")?e.startsWith("/")?n+e.slice(1):n+e:e.startsWith("/")?n+e:`${n}/${e}`:n:e}function LM(n){let e=n.search(/#|\?|$/);return n[e-1]==="/"?n.slice(0,e-1)+n.slice(e):n}function Ko(n){return n&&n[0]!=="?"?`?${n}`:n}var Du=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=se({token:n,factory:()=>j(w$),providedIn:"root"})}return n})(),_$=new ce(""),w$=(()=>{class n extends Du{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??j(cn).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return jM(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+Ko(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){let o=this.prepareExternalUrl(i+Ko(s));this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){let o=this.prepareExternalUrl(i+Ko(s));this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(Ne(Vy),Ne(_$,8))};static \u0275prov=se({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Au=(()=>{class n{_subject=new gt;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=b$(LM(UM(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Ko(r))}normalize(t){return n.stripTrailingSlash(E$(this._basePath,UM(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ko(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ko(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=Ko;static joinWithSlash=jM;static stripTrailingSlash=LM;static \u0275fac=function(r){return new(r||n)(Ne(Du))};static \u0275prov=se({token:n,factory:()=>I$(),providedIn:"root"})}return n})();function I$(){return new Au(Ne(Du))}function E$(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function UM(n){return n.replace(/\/index.html$/,"")}function b$(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var Pn=(function(n){return n[n.Format=0]="Format",n[n.Standalone=1]="Standalone",n})(Pn||{}),dt=(function(n){return n[n.Narrow=0]="Narrow",n[n.Abbreviated=1]="Abbreviated",n[n.Wide=2]="Wide",n[n.Short=3]="Short",n})(dt||{}),er=(function(n){return n[n.Short=0]="Short",n[n.Medium=1]="Medium",n[n.Long=2]="Long",n[n.Full=3]="Full",n})(er||{}),Ts={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function $M(n){return ur(n)[Ft.LocaleId]}function HM(n,e,t){let r=ur(n),i=[r[Ft.DayPeriodsFormat],r[Ft.DayPeriodsStandalone]],s=Dr(i,e);return Dr(s,t)}function qM(n,e,t){let r=ur(n),i=[r[Ft.DaysFormat],r[Ft.DaysStandalone]],s=Dr(i,e);return Dr(s,t)}function zM(n,e,t){let r=ur(n),i=[r[Ft.MonthsFormat],r[Ft.MonthsStandalone]],s=Dr(i,e);return Dr(s,t)}function GM(n,e){let r=ur(n)[Ft.Eras];return Dr(r,e)}function vf(n,e){let t=ur(n);return Dr(t[Ft.DateFormat],e)}function _f(n,e){let t=ur(n);return Dr(t[Ft.TimeFormat],e)}function wf(n,e){let r=ur(n)[Ft.DateTimeFormat];return Dr(r,e)}function If(n,e){let t=ur(n),r=t[Ft.NumberSymbols][e];if(typeof r>"u"){if(e===Ts.CurrencyDecimal)return t[Ft.NumberSymbols][Ts.Decimal];if(e===Ts.CurrencyGroup)return t[Ft.NumberSymbols][Ts.Group]}return r}function WM(n){if(!n[Ft.ExtraData])throw new ae(2303,!1)}function KM(n){let e=ur(n);return WM(e),(e[Ft.ExtraData][2]||[]).map(r=>typeof r=="string"?Tb(r):[Tb(r[0]),Tb(r[1])])}function QM(n,e,t){let r=ur(n);WM(r);let i=[r[Ft.ExtraData][0],r[Ft.ExtraData][1]],s=Dr(i,e)||[];return Dr(s,t)||[]}function Dr(n,e){for(let t=e;t>-1;t--)if(typeof n[t]<"u")return n[t];throw new ae(2304,!1)}function Tb(n){let[e,t]=n.split(":");return{hours:+e,minutes:+t}}var C$=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Ly={},T$=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;function YM(n,e,t,r){let i=P$(n);e=Cs(t,e)||e;let o=[],a;for(;e;)if(a=T$.exec(e),a){o=o.concat(a.slice(1));let h=o.pop();if(!h)break;e=h}else{o.push(e);break}let c=i.getTimezoneOffset();r&&(c=XM(r,c),i=M$(i,r));let d="";return o.forEach(h=>{let p=k$(h);d+=p?p(i,t,c):h==="''"?"'":h.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),d}function Hy(n,e,t){let r=new Date(0);return r.setFullYear(n,e,t),r.setHours(0,0,0),r}function Cs(n,e){let t=$M(n);if(Ly[t]??={},Ly[t][e])return Ly[t][e];let r="";switch(e){case"shortDate":r=vf(n,er.Short);break;case"mediumDate":r=vf(n,er.Medium);break;case"longDate":r=vf(n,er.Long);break;case"fullDate":r=vf(n,er.Full);break;case"shortTime":r=_f(n,er.Short);break;case"mediumTime":r=_f(n,er.Medium);break;case"longTime":r=_f(n,er.Long);break;case"fullTime":r=_f(n,er.Full);break;case"short":let i=Cs(n,"shortTime"),s=Cs(n,"shortDate");r=Uy(wf(n,er.Short),[i,s]);break;case"medium":let o=Cs(n,"mediumTime"),a=Cs(n,"mediumDate");r=Uy(wf(n,er.Medium),[o,a]);break;case"long":let c=Cs(n,"longTime"),d=Cs(n,"longDate");r=Uy(wf(n,er.Long),[c,d]);break;case"full":let h=Cs(n,"fullTime"),p=Cs(n,"fullDate");r=Uy(wf(n,er.Full),[h,p]);break}return r&&(Ly[t][e]=r),r}function Uy(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,r){return e!=null&&r in e?e[r]:t})),n}function Zr(n,e,t="-",r,i){let s="";(n<0||i&&n<=0)&&(i?n=-n+1:(n=-n,s=t));let o=String(n);for(;o.length<e;)o="0"+o;return r&&(o=o.slice(o.length-e)),s+o}function S$(n,e){return Zr(n,3).substring(0,e)}function Bt(n,e,t=0,r=!1,i=!1){return function(s,o){let a=D$(n,s);if((t>0||a>-t)&&(a+=t),n===3)a===0&&t===-12&&(a=12);else if(n===6)return S$(a,e);let c=If(o,Ts.MinusSign);return Zr(a,e,c,r,i)}}function D$(n,e){switch(n){case 0:return e.getFullYear();case 1:return e.getMonth();case 2:return e.getDate();case 3:return e.getHours();case 4:return e.getMinutes();case 5:return e.getSeconds();case 6:return e.getMilliseconds();case 7:return e.getDay();default:throw new ae(2301,!1)}}function pt(n,e,t=Pn.Format,r=!1){return function(i,s){return A$(i,s,n,e,t,r)}}function A$(n,e,t,r,i,s){switch(t){case 2:return zM(e,i,r)[n.getMonth()];case 1:return qM(e,i,r)[n.getDay()];case 0:let o=n.getHours(),a=n.getMinutes();if(s){let d=KM(e),h=QM(e,i,r),p=d.findIndex(y=>{if(Array.isArray(y)){let[E,k]=y,P=o>=E.hours&&a>=E.minutes,M=o<k.hours||o===k.hours&&a<k.minutes;if(E.hours<k.hours){if(P&&M)return!0}else if(P||M)return!0}else if(y.hours===o&&y.minutes===a)return!0;return!1});if(p!==-1)return h[p]}return HM(e,i,r)[o<12?0:1];case 3:return GM(e,r)[n.getFullYear()<=0?0:1];default:let c=t;throw new ae(2302,!1)}}function jy(n){return function(e,t,r){let i=-1*r,s=If(t,Ts.MinusSign),o=i>0?Math.floor(i/60):Math.ceil(i/60);switch(n){case 0:return(i>=0?"+":"")+Zr(o,2,s)+Zr(Math.abs(i%60),2,s);case 1:return"GMT"+(i>=0?"+":"")+Zr(o,1,s);case 2:return"GMT"+(i>=0?"+":"")+Zr(o,2,s)+":"+Zr(Math.abs(i%60),2,s);case 3:return r===0?"Z":(i>=0?"+":"")+Zr(o,2,s)+":"+Zr(Math.abs(i%60),2,s);default:throw new ae(2310,!1)}}}var x$=0,$y=4;function R$(n){let e=Hy(n,x$,1).getDay();return Hy(n,0,1+(e<=$y?$y:$y+7)-e)}function JM(n){let e=n.getDay(),t=e===0?-3:$y-e;return Hy(n.getFullYear(),n.getMonth(),n.getDate()+t)}function Sb(n,e=!1){return function(t,r){let i;if(e){let s=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,o=t.getDate();i=1+Math.floor((o+s)/7)}else{let s=JM(t),o=R$(s.getFullYear()),a=s.getTime()-o.getTime();i=1+Math.round(a/6048e5)}return Zr(i,n,If(r,Ts.MinusSign))}}function By(n,e=!1){return function(t,r){let s=JM(t).getFullYear();return Zr(s,n,If(r,Ts.MinusSign),e)}}var Db={};function k$(n){if(Db[n])return Db[n];let e;switch(n){case"G":case"GG":case"GGG":e=pt(3,dt.Abbreviated);break;case"GGGG":e=pt(3,dt.Wide);break;case"GGGGG":e=pt(3,dt.Narrow);break;case"y":e=Bt(0,1,0,!1,!0);break;case"yy":e=Bt(0,2,0,!0,!0);break;case"yyy":e=Bt(0,3,0,!1,!0);break;case"yyyy":e=Bt(0,4,0,!1,!0);break;case"Y":e=By(1);break;case"YY":e=By(2,!0);break;case"YYY":e=By(3);break;case"YYYY":e=By(4);break;case"M":case"L":e=Bt(1,1,1);break;case"MM":case"LL":e=Bt(1,2,1);break;case"MMM":e=pt(2,dt.Abbreviated);break;case"MMMM":e=pt(2,dt.Wide);break;case"MMMMM":e=pt(2,dt.Narrow);break;case"LLL":e=pt(2,dt.Abbreviated,Pn.Standalone);break;case"LLLL":e=pt(2,dt.Wide,Pn.Standalone);break;case"LLLLL":e=pt(2,dt.Narrow,Pn.Standalone);break;case"w":e=Sb(1);break;case"ww":e=Sb(2);break;case"W":e=Sb(1,!0);break;case"d":e=Bt(2,1);break;case"dd":e=Bt(2,2);break;case"c":case"cc":e=Bt(7,1);break;case"ccc":e=pt(1,dt.Abbreviated,Pn.Standalone);break;case"cccc":e=pt(1,dt.Wide,Pn.Standalone);break;case"ccccc":e=pt(1,dt.Narrow,Pn.Standalone);break;case"cccccc":e=pt(1,dt.Short,Pn.Standalone);break;case"E":case"EE":case"EEE":e=pt(1,dt.Abbreviated);break;case"EEEE":e=pt(1,dt.Wide);break;case"EEEEE":e=pt(1,dt.Narrow);break;case"EEEEEE":e=pt(1,dt.Short);break;case"a":case"aa":case"aaa":e=pt(0,dt.Abbreviated);break;case"aaaa":e=pt(0,dt.Wide);break;case"aaaaa":e=pt(0,dt.Narrow);break;case"b":case"bb":case"bbb":e=pt(0,dt.Abbreviated,Pn.Standalone,!0);break;case"bbbb":e=pt(0,dt.Wide,Pn.Standalone,!0);break;case"bbbbb":e=pt(0,dt.Narrow,Pn.Standalone,!0);break;case"B":case"BB":case"BBB":e=pt(0,dt.Abbreviated,Pn.Format,!0);break;case"BBBB":e=pt(0,dt.Wide,Pn.Format,!0);break;case"BBBBB":e=pt(0,dt.Narrow,Pn.Format,!0);break;case"h":e=Bt(3,1,-12);break;case"hh":e=Bt(3,2,-12);break;case"H":e=Bt(3,1);break;case"HH":e=Bt(3,2);break;case"m":e=Bt(4,1);break;case"mm":e=Bt(4,2);break;case"s":e=Bt(5,1);break;case"ss":e=Bt(5,2);break;case"S":e=Bt(6,1);break;case"SS":e=Bt(6,2);break;case"SSS":e=Bt(6,3);break;case"Z":case"ZZ":case"ZZZ":e=jy(0);break;case"ZZZZZ":e=jy(3);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=jy(1);break;case"OOOO":case"ZZZZ":case"zzzz":e=jy(2);break;default:return null}return Db[n]=e,e}function XM(n,e){n=n.replace(/:/g,"");let t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function N$(n,e){return n=new Date(n.getTime()),n.setMinutes(n.getMinutes()+e),n}function M$(n,e,t){let i=n.getTimezoneOffset(),s=XM(e,i);return N$(n,-1*(s-i))}function P$(n){if(BM(n))return n;if(typeof n=="number"&&!isNaN(n))return new Date(n);if(typeof n=="string"){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){let[i,s=1,o=1]=n.split("-").map(a=>+a);return Hy(i,s-1,o)}let t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let r;if(r=n.match(C$))return O$(r)}let e=new Date(n);if(!BM(e))throw new ae(2311,!1);return e}function O$(n){let e=new Date(0),t=0,r=0,i=n[8]?e.setUTCFullYear:e.setFullYear,s=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),r=Number(n[9]+n[11])),i.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));let o=Number(n[4]||0)-t,a=Number(n[5]||0)-r,c=Number(n[6]||0),d=Math.floor(parseFloat("0."+(n[7]||0))*1e3);return s.call(e,o,a,c,d),e}function BM(n){return n instanceof Date&&!isNaN(n.valueOf())}function F$(n,e){return new ae(2100,!1)}var V$="mediumDate",ZM=new ce(""),eP=new ce(""),Ef=(()=>{class n{locale;defaultTimezone;defaultOptions;constructor(t,r,i){this.locale=t,this.defaultTimezone=r,this.defaultOptions=i}transform(t,r,i,s){if(t==null||t===""||t!==t)return null;try{let o=r??this.defaultOptions?.dateFormat??V$,a=i??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return YM(t,o,s||this.locale,a)}catch(o){throw F$(n,o.message)}}static \u0275fac=function(r){return new(r||n)(Le(gf,16),Le(ZM,24),Le(eP,24))};static \u0275pipe=db({name:"date",type:n,pure:!0})}return n})();var Ar=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Es({type:n});static \u0275inj=Ei({})}return n})();function Ab(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,s]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}var bf=class{};var tP="browser";var Cf=class{_doc;constructor(e){this._doc=e}manager},qy=(()=>{class n extends Cf{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i,s){return t.addEventListener(r,i,s),()=>this.removeEventListener(t,r,i,s)}removeEventListener(t,r,i,s){return t.removeEventListener(r,i,s)}static \u0275fac=function(r){return new(r||n)(Ne(cn))};static \u0275prov=se({token:n,factory:n.\u0275fac})}return n})(),Wy=new ce(""),Mb=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,r){this._zone=r,t.forEach(o=>{o.manager=this});let i=t.filter(o=>!(o instanceof qy));this._plugins=i.slice().reverse();let s=t.find(o=>o instanceof qy);s&&this._plugins.push(s)}addEventListener(t,r,i,s){return this._findPluginFor(r).addEventListener(t,r,i,s)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(s=>s.supports(t)),!r)throw new ae(5101,!1);return this._eventNameToPlugin.set(t,r),r}static \u0275fac=function(r){return new(r||n)(Ne(Wy),Ne(_t))};static \u0275prov=se({token:n,factory:n.\u0275fac})}return n})(),Rb="ng-app-id";function nP(n){for(let e of n)e.remove()}function rP(n,e){let t=e.createElement("style");return t.textContent=n,t}function U$(n,e,t,r){let i=n.head?.querySelectorAll(`style[${Rb}="${e}"],link[${Rb}="${e}"]`);if(i)for(let s of i)s.removeAttribute(Rb),s instanceof HTMLLinkElement?r.set(s.href.slice(s.href.lastIndexOf("/")+1),{usage:0,elements:[s]}):s.textContent&&t.set(s.textContent,{usage:0,elements:[s]})}function Nb(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var Pb=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(t,r,i,s={}){this.doc=t,this.appId=r,this.nonce=i,U$(t,r,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,r){for(let i of t)this.addUsage(i,this.inline,rP);r?.forEach(i=>this.addUsage(i,this.external,Nb))}removeStyles(t,r){for(let i of t)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(t,r,i){let s=r.get(t);s?s.usage++:r.set(t,{usage:1,elements:[...this.hosts].map(o=>this.addElement(o,i(t,this.doc)))})}removeUsage(t,r){let i=r.get(t);i&&(i.usage--,i.usage<=0&&(nP(i.elements),r.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])nP(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(t,rP(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(t,Nb(r,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,r){return this.nonce&&r.setAttribute("nonce",this.nonce),t.appendChild(r)}static \u0275fac=function(r){return new(r||n)(Ne(cn),Ne(yy),Ne(_y,8),Ne(Sc))};static \u0275prov=se({token:n,factory:n.\u0275fac})}return n})(),kb={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Ob=/%COMP%/g;var sP="%COMP%",j$=`_nghost-${sP}`,B$=`_ngcontent-${sP}`,$$=!0,H$=new ce("",{factory:()=>$$});function q$(n){return B$.replace(Ob,n)}function z$(n){return j$.replace(Ob,n)}function oP(n,e){return e.map(t=>t.replace(Ob,n))}var Fb=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,r,i,s,o,a,c=null,d=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.ngZone=a,this.nonce=c,this.tracingService=d,this.platformIsServer=!1,this.defaultRenderer=new Tf(t,o,a,this.platformIsServer,this.tracingService)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(t,r);return i instanceof Gy?i.applyToHost(t):i instanceof Sf&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,s=i.get(r.id);if(!s){let o=this.doc,a=this.ngZone,c=this.eventManager,d=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.platformIsServer,y=this.tracingService;switch(r.encapsulation){case Xr.Emulated:s=new Gy(c,d,r,this.appId,h,o,a,p,y);break;case Xr.ShadowDom:return new zy(c,t,r,o,a,this.nonce,p,y,d);case Xr.ExperimentalIsolatedShadowDom:return new zy(c,t,r,o,a,this.nonce,p,y);default:s=new Sf(c,d,r,h,o,a,p,y);break}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(r){return new(r||n)(Ne(Mb),Ne(Pb),Ne(yy),Ne(H$),Ne(cn),Ne(_t),Ne(_y),Ne(Dc,8))};static \u0275prov=se({token:n,factory:n.\u0275fac})}return n})(),Tf=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,r,i,s){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.tracingService=s}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(kb[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(iP(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(iP(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new ae(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let s=kb[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=kb[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(ki.DashCase|ki.Important)?e.style.setProperty(t,r,i&ki.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&ki.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r,i){if(typeof e=="string"&&(e=Sr().getGlobalEventTarget(this.doc,e),!e))throw new ae(5102,!1);let s=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(s=this.tracingService.wrapEventListener(e,t,s)),this.eventManager.addEventListener(e,t,s,i)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;e(t)===!1&&t.preventDefault()}}};function iP(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var zy=class extends Tf{hostEl;sharedStylesHost;shadowRoot;constructor(e,t,r,i,s,o,a,c,d){super(e,i,s,a,c),this.hostEl=t,this.sharedStylesHost=d,this.shadowRoot=t.attachShadow({mode:"open"}),this.sharedStylesHost&&this.sharedStylesHost.addHost(this.shadowRoot);let h=r.styles;h=oP(r.id,h);for(let y of h){let E=document.createElement("style");o&&E.setAttribute("nonce",o),E.textContent=y,this.shadowRoot.appendChild(E)}let p=r.getExternalStyles?.();if(p)for(let y of p){let E=Nb(y,i);o&&E.setAttribute("nonce",o),this.shadowRoot.appendChild(E)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost&&this.sharedStylesHost.removeHost(this.shadowRoot)}},Sf=class extends Tf{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,r,i,s,o,a,c,d){super(e,s,o,a,c),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i;let h=r.styles;this.styles=d?oP(d,h):h,this.styleUrls=r.getExternalStyles?.(d)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&Ec.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},Gy=class extends Sf{contentAttr;hostAttr;constructor(e,t,r,i,s,o,a,c,d){let h=i+"-"+r.id;super(e,t,r,s,o,a,c,d,h),this.contentAttr=q$(h),this.hostAttr=z$(h)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}};var Ky=class n extends yf{supportsDOMEvents=!0;static makeCurrent(){Cb(new n)}onAndCancel(e,t,r,i){return e.addEventListener(t,r,i),()=>{e.removeEventListener(t,r,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=G$();return t==null?null:W$(t)}resetBaseElement(){Df=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Ab(document.cookie,e)}},Df=null;function G$(){return Df=Df||document.head.querySelector("base"),Df?Df.getAttribute("href"):null}function W$(n){return new URL(n,document.baseURI).pathname}var K$=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=se({token:n,factory:n.\u0275fac})}return n})(),aP=["alt","control","meta","shift"],Q$={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Y$={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},cP=(()=>{class n extends Cf{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i,s){let o=n.parseEventName(r),a=n.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Sr().onAndCancel(t,o.domEventName,a,s))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let s=n._normalizeKey(r.pop()),o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),aP.forEach(d=>{let h=r.indexOf(d);h>-1&&(r.splice(h,1),o+=d+".")}),o+=s,r.length!=0||s.length===0)return null;let c={};return c.domEventName=i,c.fullKey=o,c}static matchEventFullKeyCode(t,r){let i=Q$[t.key]||t.key,s="";return r.indexOf("code.")>-1&&(i=t.code,s="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),aP.forEach(o=>{if(o!==i){let a=Y$[o];a(t)&&(s+=o+".")}}),s+=i,s===r)}static eventCallback(t,r,i){return s=>{n.matchEventFullKeyCode(s,t)&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(r){return new(r||n)(Ne(cn))};static \u0275prov=se({token:n,factory:n.\u0275fac})}return n})();function Vb(n,e,t){let r=B({rootComponent:n,platformRef:t?.platformRef},J$(e));return OM(r)}function J$(n){return{appProviders:[...n8,...n?.providers??[]],platformProviders:t8}}function X$(){Ky.makeCurrent()}function Z$(){return new Ii}function e8(){return GE(document),document}var t8=[{provide:Sc,useValue:tP},{provide:vy,useValue:X$,multi:!0},{provide:cn,useFactory:e8}];var n8=[{provide:Hh,useValue:"root"},{provide:Ii,useFactory:Z$},{provide:Wy,useClass:qy,multi:!0},{provide:Wy,useClass:cP,multi:!0},Fb,Pb,Mb,{provide:bc,useExisting:Fb},{provide:bf,useClass:K$},[]];var lP=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(r){return new(r||n)(Ne(cn))};static \u0275prov=se({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Ce="primary",jf=Symbol("RouteTitle"),$b=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Nc(n){return new $b(n)}function vP(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let s=0;s<r.length;s++){let o=r[s],a=n[s];if(o[0]===":")i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function ev(n){return new Promise((e,t)=>{n.pipe(hs()).subscribe({next:r=>e(r),error:r=>t(r)})})}function i8(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Oi(n[t],e[t]))return!1;return!0}function Oi(n,e){let t=n?Hb(n):void 0,r=e?Hb(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!_P(n[i],e[i]))return!1;return!0}function Hb(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function _P(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}else return n===e}function wP(n){return n.length>0?n[n.length-1]:null}function Pc(n){return dm(n)?n:qo(n)?ke(Promise.resolve(n)):le(n)}function IP(n){return dm(n)?ev(n):Promise.resolve(n)}var s8={exact:bP,subset:CP},EP={exact:o8,subset:a8,ignored:()=>!0};function uP(n,e,t){return s8[t.paths](n.root,e.root,t.matrixParams)&&EP[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function o8(n,e){return Oi(n,e)}function bP(n,e,t){if(!Rc(n.segments,e.segments)||!Jy(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!bP(n.children[r],e.children[r],t))return!1;return!0}function a8(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>_P(n[t],e[t]))}function CP(n,e,t){return TP(n,e,e.segments,t)}function TP(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!Rc(i,t)||e.hasChildren()||!Jy(i,t,r))}else if(n.segments.length===t.length){if(!Rc(n.segments,t)||!Jy(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!CP(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!Rc(n.segments,i)||!Jy(n.segments,i,r)||!n.children[Ce]?!1:TP(n.children[Ce],e,s,r)}}function Jy(n,e,t){return e.every((r,i)=>EP[t](n[i].parameters,r.parameters))}var ti=class{root;queryParams;fragment;_queryParamMap;constructor(e=new Xe([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Nc(this.queryParams),this._queryParamMap}toString(){return u8.serialize(this)}},Xe=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Xy(this)}},Qo=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Nc(this.parameters),this._parameterMap}toString(){return DP(this)}};function c8(n,e){return Rc(n,e)&&n.every((t,r)=>Oi(t.parameters,e[r].parameters))}function Rc(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function l8(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===Ce&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==Ce&&(t=t.concat(e(i,r)))}),t}var Bf=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=se({token:n,factory:()=>new Yo,providedIn:"root"})}return n})(),Yo=class{parse(e){let t=new zb(e);return new ti(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${Af(e.root,!0)}`,r=f8(e.queryParams),i=typeof e.fragment=="string"?`#${d8(e.fragment)}`:"";return`${t}${r}${i}`}},u8=new Yo;function Xy(n){return n.segments.map(e=>DP(e)).join("/")}function Af(n,e){if(!n.hasChildren())return Xy(n);if(e){let t=n.children[Ce]?Af(n.children[Ce],!1):"",r=[];return Object.entries(n.children).forEach(([i,s])=>{i!==Ce&&r.push(`${i}:${Af(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=l8(n,(r,i)=>i===Ce?[Af(n.children[Ce],!1)]:[`${i}:${Af(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[Ce]!=null?`${Xy(n)}/${t[0]}`:`${Xy(n)}/(${t.join("//")})`}}function SP(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Qy(n){return SP(n).replace(/%3B/gi,";")}function d8(n){return encodeURI(n)}function qb(n){return SP(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Zy(n){return decodeURIComponent(n)}function dP(n){return Zy(n.replace(/\+/g,"%20"))}function DP(n){return`${qb(n.path)}${h8(n.parameters)}`}function h8(n){return Object.entries(n).map(([e,t])=>`;${qb(e)}=${qb(t)}`).join("")}function f8(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${Qy(t)}=${Qy(i)}`).join("&"):`${Qy(t)}=${Qy(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var p8=/^[^\/()?;#]+/;function Lb(n){let e=n.match(p8);return e?e[0]:""}var g8=/^[^\/()?;=#]+/;function m8(n){let e=n.match(g8);return e?e[0]:""}var y8=/^[^=?&#]+/;function v8(n){let e=n.match(y8);return e?e[0]:""}var _8=/^[^&#]+/;function w8(n){let e=n.match(_8);return e?e[0]:""}var zb=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Xe([],{}):new Xe([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Ce]=new Xe(e,t)),r}parseSegment(){let e=Lb(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new ae(4009,!1);return this.capture(e),new Qo(Zy(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=m8(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=Lb(this.remaining);i&&(r=i,this.capture(r))}e[Zy(t)]=Zy(r)}parseQueryParam(e){let t=v8(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let o=w8(this.remaining);o&&(r=o,this.capture(r))}let i=dP(t),s=dP(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Lb(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new ae(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=Ce);let o=this.parseChildren();t[s??Ce]=Object.keys(o).length===1&&o[Ce]?o[Ce]:new Xe([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new ae(4011,!1)}};function AP(n){return n.segments.length>0?new Xe([],{[Ce]:n}):n}function xP(n){let e={};for(let[r,i]of Object.entries(n.children)){let s=xP(i);if(r===Ce&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let t=new Xe(n.segments,e);return I8(t)}function I8(n){if(n.numberOfChildren===1&&n.children[Ce]){let e=n.children[Ce];return new Xe(n.segments.concat(e.segments),e.children)}return n}function Jo(n){return n instanceof ti}function RP(n,e,t=null,r=null,i=new Yo){let s=kP(n);return NP(s,e,t,r,i)}function kP(n){let e;function t(s){let o={};for(let c of s.children){let d=t(c);o[c.outlet]=d}let a=new Xe(s.url,o);return s===n&&(e=a),a}let r=t(n.root),i=AP(r);return e??i}function NP(n,e,t,r,i){let s=n;for(;s.parent;)s=s.parent;if(e.length===0)return Ub(s,s,s,t,r,i);let o=E8(e);if(o.toRoot())return Ub(s,s,new Xe([],{}),t,r,i);let a=b8(o,s,n),c=a.processChildren?Rf(a.segmentGroup,a.index,o.commands):PP(a.segmentGroup,a.index,o.commands);return Ub(s,a.segmentGroup,c,t,r,i)}function tv(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Mf(n){return typeof n=="object"&&n!=null&&n.outlets}function hP(n,e,t){n||="\u0275";let r=new ti;return r.queryParams={[n]:e},t.parse(t.serialize(r)).queryParams[n]}function Ub(n,e,t,r,i,s){let o={};for(let[d,h]of Object.entries(r??{}))o[d]=Array.isArray(h)?h.map(p=>hP(d,p,s)):hP(d,h,s);let a;n===e?a=t:a=MP(n,e,t);let c=AP(xP(a));return new ti(c,o,i)}function MP(n,e,t){let r={};return Object.entries(n.children).forEach(([i,s])=>{s===e?r[i]=t:r[i]=MP(s,e,t)}),new Xe(n.segments,r)}var nv=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&tv(r[0]))throw new ae(4003,!1);let i=r.find(Mf);if(i&&i!==wP(r))throw new ae(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function E8(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new nv(!0,0,n);let e=0,t=!1,r=n.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([c,d])=>{a[c]=typeof d=="string"?d.split("/"):d}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,s]},[]);return new nv(t,e,r)}var Ru=class{segmentGroup;processChildren;index;constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function b8(n,e,t){if(n.isAbsolute)return new Ru(e,!0,0);if(!t)return new Ru(e,!1,NaN);if(t.parent===null)return new Ru(t,!0,0);let r=tv(n.commands[0])?0:1,i=t.segments.length-1+r;return C8(t,i,n.numberOfDoubleDots)}function C8(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new ae(4005,!1);i=r.segments.length}return new Ru(r,!1,i-s)}function T8(n){return Mf(n[0])?n[0].outlets:{[Ce]:n}}function PP(n,e,t){if(n??=new Xe([],{}),n.segments.length===0&&n.hasChildren())return Rf(n,e,t);let r=S8(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let s=new Xe(n.segments.slice(0,r.pathIndex),{});return s.children[Ce]=new Xe(n.segments.slice(r.pathIndex),n.children),Rf(s,0,i)}else return r.match&&i.length===0?new Xe(n.segments,{}):r.match&&!n.hasChildren()?Gb(n,e,t):r.match?Rf(n,0,i):Gb(n,e,t)}function Rf(n,e,t){if(t.length===0)return new Xe(n.segments,{});{let r=T8(t),i={};if(Object.keys(r).some(s=>s!==Ce)&&n.children[Ce]&&n.numberOfChildren===1&&n.children[Ce].segments.length===0){let s=Rf(n.children[Ce],e,t);return new Xe(n.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=PP(n.children[s],e,o))}),Object.entries(n.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new Xe(n.segments,i)}}function S8(n,e,t){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;let o=n.segments[i],a=t[r];if(Mf(a))break;let c=`${a}`,d=r<t.length-1?t[r+1]:null;if(i>0&&c===void 0)break;if(c&&d&&typeof d=="object"&&d.outlets===void 0){if(!pP(c,d,o))return s;r+=2}else{if(!pP(c,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Gb(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let s=t[i];if(Mf(s)){let c=D8(s.outlets);return new Xe(r,c)}if(i===0&&tv(t[0])){let c=n.segments[e];r.push(new Qo(c.path,fP(t[0]))),i++;continue}let o=Mf(s)?s.outlets[Ce]:`${s}`,a=i<t.length-1?t[i+1]:null;o&&a&&tv(a)?(r.push(new Qo(o,fP(a))),i+=2):(r.push(new Qo(o,{})),i++)}return new Xe(r,{})}function D8(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=Gb(new Xe([],{}),0,r))}),e}function fP(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function pP(n,e,t){return n==t.path&&Oi(e,t.parameters)}var kf="imperative",mn=(function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n})(mn||{}),hr=class{id;url;constructor(e,t){this.id=e,this.url=t}},Mc=class extends hr{type=mn.NavigationStart;navigationTrigger;restoredState;constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},ni=class extends hr{urlAfterRedirects;type=mn.NavigationEnd;constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Hn=(function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n[n.Aborted=4]="Aborted",n})(Hn||{}),Pf=(function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n})(Pf||{}),Fi=class extends hr{reason;code;type=mn.NavigationCancel;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Ss=class extends hr{reason;code;type=mn.NavigationSkipped;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}},Nu=class extends hr{error;target;type=mn.NavigationError;constructor(e,t,r,i){super(e,t),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Of=class extends hr{urlAfterRedirects;state;type=mn.RoutesRecognized;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},rv=class extends hr{urlAfterRedirects;state;type=mn.GuardsCheckStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},iv=class extends hr{urlAfterRedirects;state;shouldActivate;type=mn.GuardsCheckEnd;constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},sv=class extends hr{urlAfterRedirects;state;type=mn.ResolveStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},ov=class extends hr{urlAfterRedirects;state;type=mn.ResolveEnd;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},av=class{route;type=mn.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},cv=class{route;type=mn.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},lv=class{snapshot;type=mn.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},uv=class{snapshot;type=mn.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},dv=class{snapshot;type=mn.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},hv=class{snapshot;type=mn.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var Ff=class{},Mu=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function A8(n){return!(n instanceof Ff)&&!(n instanceof Mu)}function x8(n,e){return n.providers&&!n._injector&&(n._injector=uf(n.providers,e,`Route: ${n.path}`)),n._injector??e}function ei(n){return n.outlet||Ce}function R8(n,e){let t=n.filter(r=>ei(r)===e);return t.push(...n.filter(r=>ei(r)!==e)),t}function Fu(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var fv=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return Fu(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new Vu(this.rootInjector)}},Vu=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new fv(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(r){return new(r||n)(Ne(Lt))};static \u0275prov=se({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),pv=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=Wb(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=Wb(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=Kb(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Kb(e,this._root).map(t=>t.value)}};function Wb(n,e){if(n===e.value)return e;for(let t of e.children){let r=Wb(n,t);if(r)return r}return null}function Kb(n,e){if(n===e.value)return[e];for(let t of e.children){let r=Kb(n,t);if(r.length)return r.unshift(e),r}return[]}var dr=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function xu(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var Vf=class extends pv{snapshot;constructor(e,t){super(e),this.snapshot=t,eC(this,e)}toString(){return this.snapshot.toString()}};function OP(n){let e=k8(n),t=new ft([new Qo("",{})]),r=new ft({}),i=new ft({}),s=new ft({}),o=new ft(""),a=new Ds(t,r,s,o,i,Ce,n,e.root);return a.snapshot=e.root,new Vf(new dr(a,[]),e)}function k8(n){let e={},t={},r={},s=new kc([],e,r,"",t,Ce,n,null,{});return new Lf("",new dr(s,[]))}var Ds=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,r,i,s,o,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(_e(d=>d[jf]))??le(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(_e(e=>Nc(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(_e(e=>Nc(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function gv(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:B(B({},e.params),n.params),data:B(B({},e.data),n.data),resolve:B(B(B(B({},n.data),e.data),i?.data),n._resolvedData)}:r={params:B({},n.params),data:B({},n.data),resolve:B(B({},n.data),n._resolvedData??{})},i&&VP(i)&&(r.resolve[jf]=i.title),r}var kc=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[jf]}constructor(e,t,r,i,s,o,a,c,d){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=c,this._resolve=d}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Nc(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Nc(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},Lf=class extends pv{url;constructor(e,t){super(t),this.url=e,eC(this,t)}toString(){return FP(this._root)}};function eC(n,e){e.value._routerState=n,e.children.forEach(t=>eC(n,t))}function FP(n){let e=n.children.length>0?` { ${n.children.map(FP).join(", ")} } `:"";return`${n.value}${e}`}function jb(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Oi(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Oi(e.params,t.params)||n.paramsSubject.next(t.params),i8(e.url,t.url)||n.urlSubject.next(t.url),Oi(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function Qb(n,e){let t=Oi(n.params,e.params)&&c8(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||Qb(n.parent,e.parent))}function VP(n){return typeof n.title=="string"||n.title===null}var LP=new ce(""),$f=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=Ce;activateEvents=new Dt;deactivateEvents=new Dt;attachEvents=new Dt;detachEvents=new Dt;routerOutletData=PM();parentContexts=j(Vu);location=j(Ac);changeDetector=j(Wo);inputBinder=j(_v,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new ae(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new ae(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new ae(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new ae(4013,!1);this._activatedRoute=t;let i=this.location,o=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new Yb(t,a,i.injector,this.routerOutletData);this.activated=i.createComponent(o,{index:i.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=Tn({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[ws]})}return n})(),Yb=class{route;childContexts;parent;outletData;constructor(e,t,r,i){this.route=e,this.childContexts=t,this.parent=r,this.outletData=i}get(e,t){return e===Ds?this.route:e===Vu?this.childContexts:e===LP?this.outletData:this.parent.get(e,t)}},_v=new ce("");var tC=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=$n({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&Ot(0,"router-outlet")},dependencies:[$f],encapsulation:2})}return n})();function nC(n){let e=n.children&&n.children.map(nC),t=e?oe(B({},n),{children:e}):B({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Ce&&(t.component=tC),t}function N8(n,e,t){let r=Uf(n,e._root,t?t._root:void 0);return new Vf(r,e)}function Uf(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=M8(n,e,t);return new dr(r,i)}else{if(n.shouldAttach(e.value)){let s=n.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>Uf(n,a)),o}}let r=P8(e.value),i=e.children.map(s=>Uf(n,s));return new dr(r,i)}}function M8(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Uf(n,r,i);return Uf(n,r)})}function P8(n){return new Ds(new ft(n.url),new ft(n.params),new ft(n.queryParams),new ft(n.fragment),new ft(n.data),n.outlet,n.component,n)}var Pu=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},UP="ngNavigationCancelingError";function mv(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=Jo(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=jP(!1,Hn.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function jP(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[UP]=!0,t.cancellationCode=e,t}function O8(n){return BP(n)&&Jo(n.url)}function BP(n){return!!n&&n[UP]}var F8=(n,e,t,r)=>_e(i=>(new Jb(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),Jb=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,r,i,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),jb(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=xu(t);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=xu(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){let o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=xu(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=xu(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new hv(s.value.snapshot))}),e.children.length&&this.forwardEvent(new uv(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(jb(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),jb(a.route.value),this.activateChildRoutes(e,null,o.children)}else o.attachRef=null,o.route=i,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}else this.activateChildRoutes(e,null,r)}},yv=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},ku=class{component;route;constructor(e,t){this.component=e,this.route=t}};function V8(n,e,t){let r=n._root,i=e?e._root:null;return xf(r,i,t,[r.value])}function L8(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function Lu(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!gI(n)?n:e.get(n):r}function xf(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=xu(e);return n.children.forEach(o=>{U8(o,s[o.value.outlet],t,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>Nf(a,t.getContext(o),i)),i}function U8(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let c=j8(o,s,s.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new yv(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?xf(n,e,a?a.children:null,r,i):xf(n,e,t,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new ku(a.outlet.component,o))}else o&&Nf(e,a,i),i.canActivateChecks.push(new yv(r)),s.component?xf(n,null,a?a.children:null,r,i):xf(n,null,t,r,i);return i}function j8(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!Rc(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Rc(n.url,e.url)||!Oi(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Qb(n,e)||!Oi(n.queryParams,e.queryParams);case"paramsChange":default:return!Qb(n,e)}}function Nf(n,e,t){let r=xu(n),i=n.value;Object.entries(r).forEach(([s,o])=>{i.component?e?Nf(o,e.children.getContext(s),t):Nf(o,null,t):Nf(o,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new ku(e.outlet.component,i)):t.canDeactivateChecks.push(new ku(null,i)):t.canDeactivateChecks.push(new ku(null,i))}function Hf(n){return typeof n=="function"}function B8(n){return typeof n=="boolean"}function $8(n){return n&&Hf(n.canLoad)}function H8(n){return n&&Hf(n.canActivate)}function q8(n){return n&&Hf(n.canActivateChild)}function z8(n){return n&&Hf(n.canDeactivate)}function G8(n){return n&&Hf(n.canMatch)}function $P(n){return n instanceof us||n?.name==="EmptyError"}var Yy=Symbol("INITIAL_VALUE");function Ou(){return wr(n=>Qw(n.map(e=>e.pipe(Yn(1),Xw(Yy)))).pipe(_e(e=>{for(let t of e)if(t!==!0){if(t===Yy)return Yy;if(t===!1||W8(t))return t}return!0}),Gr(e=>e!==Yy),Yn(1)))}function W8(n){return Jo(n)||n instanceof Pu}function HP(n){return n.aborted?le(void 0).pipe(Yn(1)):new Ve(e=>{let t=()=>{e.next(),e.complete()};return n.addEventListener("abort",t),()=>n.removeEventListener("abort",t)})}function qP(n){return Ph(HP(n))}function K8(n,e){return Nn(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return o.length===0&&s.length===0?le(oe(B({},t),{guardsResult:!0})):Q8(o,r,i,n).pipe(Nn(a=>a&&B8(a)?Y8(r,s,n,e):le(a)),_e(a=>oe(B({},t),{guardsResult:a})))})}function Q8(n,e,t,r){return ke(n).pipe(Nn(i=>tH(i.component,i.route,t,e,r)),hs(i=>i!==!0,!0))}function Y8(n,e,t,r){return ke(e).pipe(Mh(i=>nu(X8(i.route.parent,r),J8(i.route,r),eH(n,i.path,t),Z8(n,i.route,t))),hs(i=>i!==!0,!0))}function J8(n,e){return n!==null&&e&&e(new dv(n)),le(!0)}function X8(n,e){return n!==null&&e&&e(new lv(n)),le(!0)}function Z8(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return le(!0);let i=r.map(s=>Nh(()=>{let o=Fu(e)??t,a=Lu(s,o),c=H8(a)?a.canActivate(e,n):an(o,()=>a(e,n));return Pc(c).pipe(hs())}));return le(i).pipe(Ou())}function eH(n,e,t){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>L8(o)).filter(o=>o!==null).map(o=>Nh(()=>{let a=o.guards.map(c=>{let d=Fu(o.node)??t,h=Lu(c,d),p=q8(h)?h.canActivateChild(r,n):an(d,()=>h(r,n));return Pc(p).pipe(hs())});return le(a).pipe(Ou())}));return le(s).pipe(Ou())}function tH(n,e,t,r,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return le(!0);let o=s.map(a=>{let c=Fu(e)??i,d=Lu(a,c),h=z8(d)?d.canDeactivate(n,e,t,r):an(c,()=>d(n,e,t,r));return Pc(h).pipe(hs())});return le(o).pipe(Ou())}function nH(n,e,t,r,i){let s=e.canLoad;if(s===void 0||s.length===0)return le(!0);let o=s.map(a=>{let c=Lu(a,n),d=$8(c)?c.canLoad(e,t):an(n,()=>c(e,t)),h=Pc(d);return i?h.pipe(qP(i)):h});return le(o).pipe(Ou(),zP(r))}function zP(n){return $w(mt(e=>{if(typeof e!="boolean")throw mv(n,e)}),_e(e=>e===!0))}function rH(n,e,t,r,i){let s=e.canMatch;if(!s||s.length===0)return le(!0);let o=s.map(a=>{let c=Lu(a,n),d=G8(c)?c.canMatch(e,t):an(n,()=>c(e,t)),h=Pc(d);return i?h.pipe(qP(i)):h});return le(o).pipe(Ou(),zP(r))}var xc=class GP extends Error{segmentGroup;constructor(e){super(),this.segmentGroup=e||null,Object.setPrototypeOf(this,GP.prototype)}},Xb=class WP extends Error{urlTree;constructor(e){super(),this.urlTree=e,Object.setPrototypeOf(this,WP.prototype)}};function iH(n){throw new ae(4e3,!1)}function sH(n){throw jP(!1,Hn.GuardRejected)}var oH=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}async lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return r;if(i.numberOfChildren>1||!i.children[Ce])throw iH(`${e.redirectTo}`);i=i.children[Ce]}}async applyRedirectCommands(e,t,r,i,s){let o=await aH(t,i,s);if(o instanceof ti)throw new Xb(o);let a=this.applyRedirectCreateUrlTree(o,this.urlSerializer.parse(o),e,r);if(o[0]==="/")throw new Xb(a);return a}applyRedirectCreateUrlTree(e,t,r,i){let s=this.createSegmentGroup(e,t.root,r,i);return new ti(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s[0]===":"){let a=s.substring(1);r[i]=t[a]}else r[i]=s}),r}createSegmentGroup(e,t,r,i){let s=this.createSegments(e,t.segments,r,i),o={};return Object.entries(t.children).forEach(([a,c])=>{o[a]=this.createSegmentGroup(e,c,r,i)}),new Xe(s,o)}createSegments(e,t,r,i){return t.map(s=>s.path[0]===":"?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new ae(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}};function aH(n,e,t){if(typeof n=="string")return Promise.resolve(n);let r=n,{queryParams:i,fragment:s,routeConfig:o,url:a,outlet:c,params:d,data:h,title:p}=e;return ev(Pc(an(t,()=>r({params:d,data:h,queryParams:i,fragment:s,routeConfig:o,url:a,outlet:c,title:p}))))}var Zb={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function cH(n,e,t,r,i,s){let o=KP(n,e,t);return o.matched?(r=x8(e,r),rH(r,e,t,i,s).pipe(_e(a=>a===!0?o:B({},Zb)))):le(o)}function KP(n,e,t){if(e.path==="**")return lH(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?B({},Zb):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||vP)(t,n,e);if(!i)return B({},Zb);let s={};Object.entries(i.posParams??{}).forEach(([a,c])=>{s[a]=c.path});let o=i.consumed.length>0?B(B({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function lH(n){return{matched:!0,parameters:n.length>0?wP(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function gP(n,e,t,r){return t.length>0&&hH(n,t,r)?{segmentGroup:new Xe(e,dH(r,new Xe(t,n.children))),slicedSegments:[]}:t.length===0&&fH(n,t,r)?{segmentGroup:new Xe(n.segments,uH(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new Xe(n.segments,n.children),slicedSegments:t}}function uH(n,e,t,r){let i={};for(let s of t)if(wv(n,e,s)&&!r[ei(s)]){let o=new Xe([],{});i[ei(s)]=o}return B(B({},r),i)}function dH(n,e){let t={};t[Ce]=e;for(let r of n)if(r.path===""&&ei(r)!==Ce){let i=new Xe([],{});t[ei(r)]=i}return t}function hH(n,e,t){return t.some(r=>wv(n,e,r)&&ei(r)!==Ce)}function fH(n,e,t){return t.some(r=>wv(n,e,r))}function wv(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function pH(n,e,t){return e.length===0&&!n.children[t]}var gH=class{};async function mH(n,e,t,r,i,s,o="emptyOnly",a){return new vH(n,e,t,r,i,o,s,a).recognize()}var yH=31,vH=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;abortSignal;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,r,i,s,o,a,c){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.abortSignal=c,this.applyRedirects=new oH(this.urlSerializer,this.urlTree)}noMatchError(e){return new ae(4002,`'${e.segmentGroup}'`)}async recognize(){let e=gP(this.urlTree.root,[],[],this.config).segmentGroup,{children:t,rootSnapshot:r}=await this.match(e),i=new dr(r,t),s=new Lf("",i),o=RP(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}async match(e){let t=new kc([],Object.freeze({}),Object.freeze(B({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),Ce,this.rootComponentType,null,{});try{return{children:await this.processSegmentGroup(this.injector,this.config,e,Ce,t),rootSnapshot:t}}catch(r){if(r instanceof Xb)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof xc?this.noMatchError(r):r}}async processSegmentGroup(e,t,r,i,s){if(r.segments.length===0&&r.hasChildren())return this.processChildren(e,t,r,s);let o=await this.processSegment(e,t,r,r.segments,i,!0,s);return o instanceof dr?[o]:[]}async processChildren(e,t,r,i){let s=[];for(let c of Object.keys(r.children))c==="primary"?s.unshift(c):s.push(c);let o=[];for(let c of s){let d=r.children[c],h=R8(t,c),p=await this.processSegmentGroup(e,h,d,c,i);o.push(...p)}let a=QP(o);return _H(a),a}async processSegment(e,t,r,i,s,o,a){for(let c of t)try{return await this.processSegmentAgainstRoute(c._injector??e,t,c,r,i,s,o,a)}catch(d){if(d instanceof xc||$P(d))continue;throw d}if(pH(r,i,s))return new gH;throw new xc(r)}async processSegmentAgainstRoute(e,t,r,i,s,o,a,c){if(ei(r)!==o&&(o===Ce||!wv(i,s,r)))throw new xc(i);if(r.redirectTo===void 0)return this.matchSegmentAgainstRoute(e,i,r,s,o,c);if(this.allowRedirects&&a)return this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,s,o,c);throw new xc(i)}async expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o,a){let{matched:c,parameters:d,consumedSegments:h,positionalParamSegments:p,remainingSegments:y}=KP(t,i,s);if(!c)throw new xc(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>yH&&(this.allowRedirects=!1));let E=new kc(s,d,Object.freeze(B({},this.urlTree.queryParams)),this.urlTree.fragment,mP(i),ei(i),i.component??i._loadedComponent??null,i,yP(i)),k=gv(E,a,this.paramsInheritanceStrategy);if(E.params=Object.freeze(k.params),E.data=Object.freeze(k.data),this.abortSignal.aborted)throw new Error(this.abortSignal.reason);let P=await this.applyRedirects.applyRedirectCommands(h,i.redirectTo,p,E,e),M=await this.applyRedirects.lineralizeSegments(i,P);return this.processSegment(e,r,t,M.concat(y),o,!1,a)}async matchSegmentAgainstRoute(e,t,r,i,s,o){if(this.abortSignal.aborted)throw new Error(this.abortSignal.reason);let a=await ev(cH(t,r,i,e,this.urlSerializer,this.abortSignal));if(r.path==="**"&&(t.children={}),!a?.matched)throw new xc(t);e=r._injector??e;let{routes:c}=await this.getChildConfig(e,r,i),d=r._loadedInjector??e,{parameters:h,consumedSegments:p,remainingSegments:y}=a,E=new kc(p,h,Object.freeze(B({},this.urlTree.queryParams)),this.urlTree.fragment,mP(r),ei(r),r.component??r._loadedComponent??null,r,yP(r)),k=gv(E,o,this.paramsInheritanceStrategy);E.params=Object.freeze(k.params),E.data=Object.freeze(k.data);let{segmentGroup:P,slicedSegments:M}=gP(t,p,y,c);if(M.length===0&&P.hasChildren()){let ee=await this.processChildren(d,c,P,E);return new dr(E,ee)}if(c.length===0&&M.length===0)return new dr(E,[]);let H=ei(r)===s,Y=await this.processSegment(d,c,P,M,H?Ce:s,!0,E);return new dr(E,Y instanceof dr?[Y]:[])}async getChildConfig(e,t,r){if(t.children)return{routes:t.children,injector:e};if(t.loadChildren){if(t._loadedRoutes!==void 0)return{routes:t._loadedRoutes,injector:t._loadedInjector};if(this.abortSignal.aborted)throw new Error(this.abortSignal.reason);if(await ev(nH(e,t,r,this.urlSerializer,this.abortSignal))){let s=await this.configLoader.loadChildren(e,t);return t._loadedRoutes=s.routes,t._loadedInjector=s.injector,s}throw sH(t)}return{routes:[],injector:e}}};function _H(n){n.sort((e,t)=>e.value.outlet===Ce?-1:t.value.outlet===Ce?1:e.value.outlet.localeCompare(t.value.outlet))}function wH(n){let e=n.value.routeConfig;return e&&e.path===""}function QP(n){let e=[],t=new Set;for(let r of n){if(!wH(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=QP(r.children);e.push(new dr(r.value,i))}return e.filter(r=>!t.has(r))}function mP(n){return n.data||{}}function yP(n){return n.resolve||{}}var IH=new ce("",{factory:()=>mH});function EH(n,e,t,r,i,s,o){let a=n.get(IH);return Nn(c=>le(c).pipe(wr(d=>a(n,e,t,r,d.extractedUrl,i,s,o)),_e(({state:d,tree:h})=>oe(B({},c),{targetSnapshot:d,urlAfterRedirects:h}))))}function bH(n,e){return Nn(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return le(t);let s=new Set(i.map(c=>c.route)),o=new Set;for(let c of s)if(!o.has(c))for(let d of YP(c))o.add(d);let a=0;return ke(o).pipe(Mh(c=>s.has(c)?CH(c,r,n,e):(c.data=gv(c,c.parent,n).resolve,le(void 0))),mt(()=>a++),mm(1),Nn(c=>a===o.size?le(t):Kn))})}function YP(n){let e=n.children.map(t=>YP(t)).flat();return[n,...e]}function CH(n,e,t,r){let i=n.routeConfig,s=n._resolve;return i?.title!==void 0&&!VP(i)&&(s[jf]=i.title),Nh(()=>(n.data=gv(n,n.parent,t).resolve,TH(s,n,e,r).pipe(_e(o=>(n._resolvedData=o,n.data=B(B({},n.data),o),null)))))}function TH(n,e,t,r){let i=Hb(n);if(i.length===0)return le({});let s={};return ke(i).pipe(Nn(o=>SH(n[o],e,t,r).pipe(hs(),mt(a=>{if(a instanceof Pu)throw mv(new Yo,a);s[o]=a}))),mm(1),_e(()=>s),ds(o=>$P(o)?Kn:_i(o)))}function SH(n,e,t,r){let i=Fu(e)??r,s=Lu(n,i),o=s.resolve?s.resolve(e,t):an(i,()=>s(e,t));return Pc(o)}function Bb(n){return wr(e=>{let t=n(e);return t?ke(t).pipe(_e(()=>e)):le(e)})}var rC=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===Ce);return r}getResolvedTitleForRoute(t){return t.data[jf]}static \u0275fac=function(r){return new(r||n)};static \u0275prov=se({token:n,factory:()=>j(JP),providedIn:"root"})}return n})(),JP=(()=>{class n extends rC{title;constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||n)(Ne(lP))};static \u0275prov=se({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Uu=new ce("",{factory:()=>({})}),qf=new ce(""),XP=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=j(Ib);async loadComponent(t,r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return Promise.resolve(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=(async()=>{try{let s=await IP(an(t,()=>r.loadComponent())),o=await tO(eO(s));return this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=o,o}finally{this.componentLoaders.delete(r)}})();return this.componentLoaders.set(r,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Promise.resolve({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let i=(async()=>{try{let s=await ZP(r,this.compiler,t,this.onLoadEndListener);return r._loadedRoutes=s.routes,r._loadedInjector=s.injector,s}finally{this.childrenLoaders.delete(r)}})();return this.childrenLoaders.set(r,i),i}static \u0275fac=function(r){return new(r||n)};static \u0275prov=se({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();async function ZP(n,e,t,r){let i=await IP(an(t,()=>n.loadChildren())),s=await tO(eO(i)),o;s instanceof Ry||Array.isArray(s)?o=s:o=await e.compileModuleAsync(s),r&&r(n);let a,c,d=!1;return Array.isArray(o)?(c=o,d=!0):(a=o.create(t).injector,c=a.get(qf,[],{optional:!0,self:!0}).flat()),{routes:c.map(nC),injector:a}}function DH(n){return n&&typeof n=="object"&&"default"in n}function eO(n){return DH(n)?n.default:n}async function tO(n){return n}var Iv=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=se({token:n,factory:()=>j(AH),providedIn:"root"})}return n})(),AH=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static \u0275fac=function(r){return new(r||n)};static \u0275prov=se({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),nO=new ce("");var xH=()=>{},rO=new ce(""),iO=(()=>{class n{currentNavigation=be(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=be(null);events=new gt;transitionAbortWithErrorSubject=new gt;configLoader=j(XP);environmentInjector=j(Lt);destroyRef=j(Tr);urlSerializer=j(Bf);rootContexts=j(Vu);location=j(Au);inputBindingEnabled=j(_v,{optional:!0})!==null;titleStrategy=j(rC);options=j(Uu,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=j(Iv);createViewTransition=j(nO,{optional:!0});navigationErrorHandler=j(rO,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>le(void 0);rootComponentType=null;destroyed=!1;constructor(){let t=i=>this.events.next(new av(i)),r=i=>this.events.next(new cv(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;ln(()=>{this.transitions?.next(oe(B({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,id:r}))})}setupNavigations(t){return this.transitions=new ft(null),this.transitions.pipe(Gr(r=>r!==null),wr(r=>{let i=!1,s=new AbortController;return le(r).pipe(wr(o=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",Hn.SupersededByNewNavigation),Kn;this.currentTransition=r;let a=this.lastSuccessfulNavigation();this.currentNavigation.set({id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,targetBrowserUrl:typeof o.extras.browserUrl=="string"?this.urlSerializer.parse(o.extras.browserUrl):o.extras.browserUrl,trigger:o.source,extras:o.extras,previousNavigation:a?oe(B({},a),{previousNavigation:null}):null,abort:()=>s.abort()});let c=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),d=o.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!c&&d!=="reload")return this.events.next(new Ss(o.id,this.urlSerializer.serialize(o.rawUrl),"",Pf.IgnoredSameUrlNavigation)),o.resolve(!1),Kn;if(this.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return le(o).pipe(wr(h=>(this.events.next(new Mc(h.id,this.urlSerializer.serialize(h.extractedUrl),h.source,h.restoredState)),h.id!==this.navigationId?Kn:Promise.resolve(h))),EH(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy,s.signal),mt(h=>{r.targetSnapshot=h.targetSnapshot,r.urlAfterRedirects=h.urlAfterRedirects,this.currentNavigation.update(y=>(y.finalUrl=h.urlAfterRedirects,y));let p=new Of(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(p)}));if(c&&this.urlHandlingStrategy.shouldProcessUrl(o.currentRawUrl)){let{id:h,extractedUrl:p,source:y,restoredState:E,extras:k}=o,P=new Mc(h,this.urlSerializer.serialize(p),y,E);this.events.next(P);let M=OP(this.rootComponentType).snapshot;return this.currentTransition=r=oe(B({},o),{targetSnapshot:M,urlAfterRedirects:p,extras:oe(B({},k),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update(H=>(H.finalUrl=p,H)),le(r)}else return this.events.next(new Ss(o.id,this.urlSerializer.serialize(o.extractedUrl),"",Pf.IgnoredByUrlHandlingStrategy)),o.resolve(!1),Kn}),mt(o=>{let a=new rv(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(a)}),_e(o=>(this.currentTransition=r=oe(B({},o),{guards:V8(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),r)),K8(this.environmentInjector,o=>this.events.next(o)),mt(o=>{if(r.guardsResult=o.guardsResult,o.guardsResult&&typeof o.guardsResult!="boolean")throw mv(this.urlSerializer,o.guardsResult);let a=new iv(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(a)}),Gr(o=>o.guardsResult?!0:(this.cancelNavigationTransition(o,"",Hn.GuardRejected),!1)),Bb(o=>{if(o.guards.canActivateChecks.length!==0)return le(o).pipe(mt(a=>{let c=new sv(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(c)}),wr(a=>{let c=!1;return le(a).pipe(bH(this.paramsInheritanceStrategy,this.environmentInjector),mt({next:()=>c=!0,complete:()=>{c||this.cancelNavigationTransition(a,"",Hn.NoDataFromResolver)}}))}),mt(a=>{let c=new ov(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(c)}))}),Bb(o=>{let a=d=>{let h=[];if(d.routeConfig?._loadedComponent)d.component=d.routeConfig?._loadedComponent;else if(d.routeConfig?.loadComponent){let p=Fu(d)??this.environmentInjector;h.push(this.configLoader.loadComponent(p,d.routeConfig).then(y=>{d.component=y}))}for(let p of d.children)h.push(...a(p));return h},c=a(o.targetSnapshot.root);return c.length===0?le(o):ke(Promise.all(c).then(()=>o))}),Bb(()=>this.afterPreactivation()),wr(()=>{let{currentSnapshot:o,targetSnapshot:a}=r,c=this.createViewTransition?.(this.environmentInjector,o.root,a.root);return c?ke(c).pipe(_e(()=>r)):le(r)}),_e(o=>{let a=N8(t.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return this.currentTransition=r=oe(B({},o),{targetRouterState:a}),this.currentNavigation.update(c=>(c.targetRouterState=a,c)),r}),mt(()=>{this.events.next(new Ff)}),F8(this.rootContexts,t.routeReuseStrategy,o=>this.events.next(o),this.inputBindingEnabled),Yn(1),Ph(HP(s.signal).pipe(Gr(()=>!i&&!r.targetRouterState),mt(()=>{this.cancelNavigationTransition(r,s.signal.reason+"",Hn.Aborted)}))),mt({next:o=>{i=!0,this.currentNavigation.update(a=>(a.abort=xH,a)),this.lastSuccessfulNavigation.set(ln(this.currentNavigation)),this.events.next(new ni(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects))),this.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{i=!0}}),Ph(this.transitionAbortWithErrorSubject.pipe(mt(o=>{throw o}))),Jw(()=>{s.abort(),i||this.cancelNavigationTransition(r,"",Hn.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),ds(o=>{if(this.destroyed)return r.resolve(!1),Kn;if(i=!0,BP(o))this.events.next(new Fi(r.id,this.urlSerializer.serialize(r.extractedUrl),o.message,o.cancellationCode)),O8(o)?this.events.next(new Mu(o.url,o.navigationBehaviorOptions)):r.resolve(!1);else{let a=new Nu(r.id,this.urlSerializer.serialize(r.extractedUrl),o,r.targetSnapshot??void 0);try{let c=an(this.environmentInjector,()=>this.navigationErrorHandler?.(a));if(c instanceof Pu){let{message:d,cancellationCode:h}=mv(this.urlSerializer,c);this.events.next(new Fi(r.id,this.urlSerializer.serialize(r.extractedUrl),d,h)),this.events.next(new Mu(c.redirectTo,c.navigationBehaviorOptions))}else throw this.events.next(a),o}catch(c){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(c)}}return Kn}))}))}cancelNavigationTransition(t,r,i){let s=new Fi(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(s),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=ln(this.currentNavigation),i=r?.targetBrowserUrl??r?.extractedUrl;return t.toString()!==i?.toString()&&!r?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||n)};static \u0275prov=se({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function RH(n){return n!==kf}var sO=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=se({token:n,factory:()=>j(kH),providedIn:"root"})}return n})(),vv=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},kH=(()=>{class n extends vv{static \u0275fac=(()=>{let t;return function(i){return(t||(t=Is(n)))(i||n)}})();static \u0275prov=se({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),iC=(()=>{class n{urlSerializer=j(Bf);options=j(Uu,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=j(Au);urlHandlingStrategy=j(Iv);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new ti;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:t,initialUrl:r,targetBrowserUrl:i}){let s=t!==void 0?this.urlHandlingStrategy.merge(t,r):r,o=i??s;return o instanceof ti?this.urlSerializer.serialize(o):o}commitTransition({targetRouterState:t,finalUrl:r,initialUrl:i}){r&&t?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=t):this.rawUrlTree=i}routerState=OP(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:t}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t??this.rawUrlTree)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=se({token:n,factory:()=>j(oO),providedIn:"root"})}return n})(),oO=(()=>{class n extends iC{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{t(r.url,r.state,"popstate")})})}handleRouterEvent(t,r){t instanceof Mc?this.updateStateMemento():t instanceof Ss?this.commitTransition(r):t instanceof Of?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof Ff?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof Fi&&t.code!==Hn.SupersededByNewNavigation&&t.code!==Hn.Redirect?this.restoreHistory(r):t instanceof Nu?this.restoreHistory(r,!0):t instanceof ni&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,{extras:r,id:i}){let{replaceUrl:s,state:o}=r;if(this.location.isCurrentPathEqualTo(t)||s){let a=this.browserPageId,c=B(B({},o),this.generateNgRouterState(i,a));this.location.replaceState(t,"",c)}else{let a=B(B({},o),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(t,"",a)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,s=this.currentPageId-i;s!==0?this.location.historyGo(s):this.getCurrentUrlTree()===t.finalUrl&&s===0&&(this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Is(n)))(i||n)}})();static \u0275prov=se({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function sC(n,e){n.events.pipe(Gr(t=>t instanceof ni||t instanceof Fi||t instanceof Nu||t instanceof Ss),_e(t=>t instanceof ni||t instanceof Ss?0:(t instanceof Fi?t.code===Hn.Redirect||t.code===Hn.SupersededByNewNavigation:!1)?2:1),Gr(t=>t!==2),Yn(1)).subscribe(()=>{e()})}var NH={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},MH={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},ju=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=j(hb);stateManager=j(iC);options=j(Uu,{optional:!0})||{};pendingTasks=j(_s);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=j(iO);urlSerializer=j(Bf);location=j(Au);urlHandlingStrategy=j(Iv);injector=j(Lt);_events=new gt;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=j(sO);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=j(qf,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!j(_v,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new sn;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,s=ln(this.navigationTransitions.currentNavigation);if(i!==null&&s!==null){if(this.stateManager.handleRouterEvent(r,s),r instanceof Fi&&r.code!==Hn.Redirect&&r.code!==Hn.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof ni)this.navigated=!0;else if(r instanceof Mu){let o=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c=B({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||RH(i.source)},o);this.scheduleNavigation(a,kf,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}A8(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),kf,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r,i)=>{this.navigateToSyncWithBrowser(t,i,r)})}navigateToSyncWithBrowser(t,r,i){let s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){let c=B({},i);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(s.state=c)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,o,s).catch(c=>{this.disposed||this.injector.get(cr)(c)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return ln(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(nC),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:c}=r,d=c?this.currentUrlTree.fragment:o,h=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":h=B(B({},this.currentUrlTree.queryParams),s);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=s||null}h!==null&&(h=this.removeEmptyProps(h));let p;try{let y=i?i.snapshot:this.routerState.snapshot.root;p=kP(y)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),p=this.currentUrlTree.root}return NP(p,t,h,d??null,this.urlSerializer)}navigateByUrl(t,r={skipLocationChange:!1}){let i=Jo(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,kf,null,r)}navigate(t,r={skipLocationChange:!1}){return PH(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.console.warn(su(4018,!1)),this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=B({},NH):r===!1?i=B({},MH):i=r,Jo(t))return uP(this.currentUrlTree,t,i);let s=this.parseUrl(t);return uP(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,s])=>(s!=null&&(r[i]=s),r),{})}scheduleNavigation(t,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let a,c,d;o?(a=o.resolve,c=o.reject,d=o.promise):d=new Promise((p,y)=>{a=p,c=y});let h=this.pendingTasks.add();return sC(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:s,resolve:a,reject:c,promise:d,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),d.catch(p=>Promise.reject(p))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=se({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function PH(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new ae(4008,!1)}var Bu=(()=>{class n{router;route;tabIndexAttribute;renderer;el;locationStrategy;reactiveHref=be(null);get href(){return ln(this.reactiveHref)}set href(t){this.reactiveHref.set(t)}target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new gt;applicationErrorHandler=j(cr);options=j(Uu,{optional:!0});constructor(t,r,i,s,o,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=s,this.el=o,this.locationStrategy=a,this.reactiveHref.set(j(new Fy("href"),{optional:!0}));let c=o.nativeElement.tagName?.toLowerCase();this.isAnchorElement=c==="a"||c==="area"||!!(typeof customElements=="object"&&customElements.get(c)?.observedAttributes?.includes?.("href")),this.isAnchorElement?this.setTabIndexIfNotOnNativeEl("0"):this.subscribeToNavigationEventsIfNecessary()}subscribeToNavigationEventsIfNecessary(){if(this.subscription!==void 0||!this.isAnchorElement)return;let t=this.preserveFragment,r=i=>i==="merge"||i==="preserve";t||=r(this.queryParamsHandling),t||=!this.queryParamsHandling&&!r(this.options?.defaultQueryParamsHandling),t&&(this.subscription=this.router.events.subscribe(i=>{i instanceof ni&&this.updateHref()}))}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&(this.updateHref(),this.subscribeToNavigationEventsIfNecessary()),this.onChanges.next(this)}routerLinkInput=null;set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(Jo(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,r,i,s,o){let a=this.urlTree;if(a===null||this.isAnchorElement&&(t!==0||r||i||s||o||typeof this.target=="string"&&this.target!="_self"))return!0;let c={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,c)?.catch(d=>{this.applicationErrorHandler(d)}),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.reactiveHref.set(t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t))??"":null)}applyAttributeValue(t,r){let i=this.renderer,s=this.el.nativeElement;r!==null?i.setAttribute(s,t,r):i.removeAttribute(s,t)}get urlTree(){return this.routerLinkInput===null?null:Jo(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||n)(Le(ju),Le(Ds),af("tabindex"),Le(Mi),Le(Jn),Le(Du))};static \u0275dir=Tn({type:n,selectors:[["","routerLink",""]],hostVars:2,hostBindings:function(r,i){r&1&&Q("click",function(o){return i.onClick(o.button,o.ctrlKey,o.shiftKey,o.altKey,o.metaKey)}),r&2&&df("href",i.reactiveHref(),QE)("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",Su],skipLocationChange:[2,"skipLocationChange","skipLocationChange",Su],replaceUrl:[2,"replaceUrl","replaceUrl",Su],routerLink:"routerLink"},features:[ws]})}return n})(),oC=(()=>{class n{router;element;renderer;cdr;links;classes=[];routerEventsSubscription;linkInputChangesSubscription;_isActive=!1;get isActive(){return this._isActive}routerLinkActiveOptions={exact:!1};ariaCurrentWhenActive;isActiveChange=new Dt;link=j(Bu,{optional:!0});constructor(t,r,i,s){this.router=t,this.element=r,this.renderer=i,this.cdr=s,this.routerEventsSubscription=t.events.subscribe(o=>{o instanceof ni&&this.update()})}ngAfterContentInit(){le(this.links.changes,le(null)).pipe(tu()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();let t=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=ke(t).pipe(tu()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(t){let r=Array.isArray(t)?t:t.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(t){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{let t=this.hasActiveLinks();this.classes.forEach(r=>{t?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),t&&this.ariaCurrentWhenActive!==void 0?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==t&&(this._isActive=t,this.cdr.markForCheck(),this.isActiveChange.emit(t))})}isLinkActive(t){let r=FH(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>{let s=i.urlTree;return s?t.isActive(s,r):!1}}hasActiveLinks(){let t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.links.some(t)}static \u0275fac=function(r){return new(r||n)(Le(ju),Le(Jn),Le(Mi),Le(Wo))};static \u0275dir=Tn({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(r,i,s){if(r&1&&Ny(s,Bu,5),r&2){let o;vb(o=_b())&&(i.links=o)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[ws]})}return n})();function FH(n){return!!n.paths}var VH=new ce("");function aC(n,...e){return sr([{provide:qf,multi:!0,useValue:n},[],{provide:Ds,useFactory:LH},{provide:ky,multi:!0,useFactory:UH},e.map(t=>t.\u0275providers)])}function LH(){return j(ju).routerState.root}function UH(){let n=j(Mt);return e=>{let t=n.get(zo);if(e!==t.components[0])return;let r=n.get(ju),i=n.get(jH);n.get(BH)===1&&r.initialNavigation(),n.get($H,null,{optional:!0})?.setUpPreloading(),n.get(VH,null,{optional:!0})?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var jH=new ce("",{factory:()=>new gt}),BH=new ce("",{factory:()=>1});var $H=new ce("");var aO=()=>{};var uO=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},HH=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=n[t++],o=n[t++],a=n[t++],c=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let s=n[t++],o=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},Ev={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let s=n[i],o=i+1<n.length,a=o?n[i+1]:0,c=i+2<n.length,d=c?n[i+2]:0,h=s>>2,p=(s&3)<<4|a>>4,y=(a&15)<<2|d>>6,E=d&63;c||(E=64,o||(y=64)),r.push(t[h],t[p],t[y],t[E])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(uO(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):HH(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let s=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let d=i<n.length?t[n.charAt(i)]:64;++i;let p=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||a==null||d==null||p==null)throw new lC;let y=s<<2|a>>4;if(r.push(y),d!==64){let E=a<<4&240|d>>2;if(r.push(E),p!==64){let k=d<<6&192|p;r.push(k)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},lC=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},qH=function(n){let e=uO(n);return Ev.encodeByteArray(e,!0)},Gf=function(n){return qH(n).replace(/\./g,"")},bv=function(n){try{return Ev.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function dC(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var zH=()=>dC().__FIREBASE_DEFAULTS__,GH=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},WH=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&bv(n[1]);return e&&JSON.parse(e)},Cv=()=>{try{return aO()||zH()||GH()||WH()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},hC=n=>{var e,t;return(t=(e=Cv())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},dO=n=>{let e=hC(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},fC=()=>{var n;return(n=Cv())===null||n===void 0?void 0:n.config},pC=n=>{var e;return(e=Cv())===null||e===void 0?void 0:e[`_${n}`]};var Oc=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function Xo(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Tv(n){return(await fetch(n,{credentials:"include"})).ok}function hO(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Gf(JSON.stringify(t)),Gf(JSON.stringify(o)),""].join(".")}var zf={};function KH(){let n={prod:[],emulator:[]};for(let e of Object.keys(zf))zf[e]?n.emulator.push(e):n.prod.push(e);return n}function QH(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}var cO=!1;function Sv(n,e){if(typeof window>"u"||typeof document>"u"||!Xo(window.location.host)||zf[n]===e||zf[n]||cO)return;zf[n]=e;function t(y){return`__firebase__banner__${y}`}let r="__firebase__banner",s=KH().prod.length>0;function o(){let y=document.getElementById(r);y&&y.remove()}function a(y){y.style.display="flex",y.style.background="#7faaf0",y.style.position="fixed",y.style.bottom="5px",y.style.left="5px",y.style.padding=".5em",y.style.borderRadius="5px",y.style.alignItems="center"}function c(y,E){y.setAttribute("width","24"),y.setAttribute("id",E),y.setAttribute("height","24"),y.setAttribute("viewBox","0 0 24 24"),y.setAttribute("fill","none"),y.style.marginLeft="-6px"}function d(){let y=document.createElement("span");return y.style.cursor="pointer",y.style.marginLeft="16px",y.style.fontSize="24px",y.innerHTML=" &times;",y.onclick=()=>{cO=!0,o()},y}function h(y,E){y.setAttribute("id",E),y.innerText="Learn more",y.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",y.setAttribute("target","__blank"),y.style.paddingLeft="5px",y.style.textDecoration="underline"}function p(){let y=QH(r),E=t("text"),k=document.getElementById(E)||document.createElement("span"),P=t("learnmore"),M=document.getElementById(P)||document.createElement("a"),H=t("preprendIcon"),Y=document.getElementById(H)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(y.created){let ee=y.element;a(ee),h(M,P);let De=d();c(Y,H),ee.append(Y,k,M,De),document.body.appendChild(ee)}s?(k.innerText="Preview backend disconnected.",Y.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Y.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,k.innerText="Preview backend running in this workspace."),k.setAttribute("id",E)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}function yn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function fO(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(yn())}function YH(){var n;let e=(n=Cv())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function pO(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function gO(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function mO(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function yO(){let n=yn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function vO(){return!YH()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Wf(){try{return typeof indexedDB=="object"}catch{return!1}}function _O(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}var JH="FirebaseError",fr=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=JH,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ri.prototype.create)}},ri=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?XH(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new fr(i,a,r)}};function XH(n,e){return n.replace(ZH,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var ZH=/\{\$([^}]+)}/g;function wO(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Vi(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let s=n[i],o=e[i];if(lO(s)&&lO(o)){if(!Vi(s,o))return!1}else if(s!==o)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function lO(n){return n!==null&&typeof n=="object"}function Kf(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function IO(n,e){let t=new uC(n,e);return t.subscribe.bind(t)}var uC=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");eq(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=cC),i.error===void 0&&(i.error=cC),i.complete===void 0&&(i.complete=cC);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function eq(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function cC(){}var bye=14400*1e3;function hn(n){return n&&n._delegate?n._delegate:n}var qn=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Fc="[DEFAULT]";var gC=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new Oc;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(nq(e))try{this.getOrInitializeService({instanceIdentifier:Fc})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Fc){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){let e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Fc){return this.instances.has(e)}getOptions(e=Fc){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[s,o]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);let o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:tq(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Fc){return this.component?this.component.multipleInstances?e:Fc:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function tq(n){return n===Fc?void 0:n}function nq(n){return n.instantiationMode==="EAGER"}var Dv=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new gC(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var rq=[],Be=(function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n})(Be||{}),iq={debug:Be.DEBUG,verbose:Be.VERBOSE,info:Be.INFO,warn:Be.WARN,error:Be.ERROR,silent:Be.SILENT},sq=Be.INFO,oq={[Be.DEBUG]:"log",[Be.VERBOSE]:"log",[Be.INFO]:"info",[Be.WARN]:"warn",[Be.ERROR]:"error"},aq=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=oq[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Li=class{constructor(e){this.name=e,this._logLevel=sq,this._logHandler=aq,this._userLogHandler=null,rq.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Be))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?iq[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Be.DEBUG,...e),this._logHandler(this,Be.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Be.VERBOSE,...e),this._logHandler(this,Be.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Be.INFO,...e),this._logHandler(this,Be.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Be.WARN,...e),this._logHandler(this,Be.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Be.ERROR,...e),this._logHandler(this,Be.ERROR,...e)}};var cq=(n,e)=>e.some(t=>n instanceof t),EO,bO;function lq(){return EO||(EO=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function uq(){return bO||(bO=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var CO=new WeakMap,yC=new WeakMap,TO=new WeakMap,mC=new WeakMap,_C=new WeakMap;function dq(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(Ui(n.result)),i()},o=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&CO.set(t,n)}).catch(()=>{}),_C.set(e,n),e}function hq(n){if(yC.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),i()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});yC.set(n,e)}var vC={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return yC.get(n);if(e==="objectStoreNames")return n.objectStoreNames||TO.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ui(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function SO(n){vC=n(vC)}function fq(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(Av(this),e,...t);return TO.set(r,e.sort?e.sort():[e]),Ui(r)}:uq().includes(n)?function(...e){return n.apply(Av(this),e),Ui(CO.get(this))}:function(...e){return Ui(n.apply(Av(this),e))}}function pq(n){return typeof n=="function"?fq(n):(n instanceof IDBTransaction&&hq(n),cq(n,lq())?new Proxy(n,vC):n)}function Ui(n){if(n instanceof IDBRequest)return dq(n);if(mC.has(n))return mC.get(n);let e=pq(n);return e!==n&&(mC.set(n,e),_C.set(e,n)),e}var Av=n=>_C.get(n);function xv(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){let o=indexedDB.open(n,e),a=Ui(o);return r&&o.addEventListener("upgradeneeded",c=>{r(Ui(o.result),c.oldVersion,c.newVersion,Ui(o.transaction),c)}),t&&o.addEventListener("blocked",c=>t(c.oldVersion,c.newVersion,c)),a.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),a}var gq=["get","getKey","getAll","getAllKeys","count"],mq=["put","add","delete","clear"],wC=new Map;function DO(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(wC.get(e))return wC.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=mq.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||gq.includes(t)))return;let s=async function(o,...a){let c=this.transaction(o,i?"readwrite":"readonly"),d=c.store;return r&&(d=d.index(a.shift())),(await Promise.all([d[t](...a),i&&c.done]))[0]};return wC.set(e,s),s}SO(n=>oe(B({},n),{get:(e,t,r)=>DO(e,t)||n.get(e,t,r),has:(e,t)=>!!DO(e,t)||n.has(e,t)}));var EC=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(yq(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function yq(n){let e=n.getComponent();return e?.type==="VERSION"}var bC="@firebase/app",AO="0.13.2";var As=new Li("@firebase/app"),vq="@firebase/app-compat",_q="@firebase/analytics-compat",wq="@firebase/analytics",Iq="@firebase/app-check-compat",Eq="@firebase/app-check",bq="@firebase/auth",Cq="@firebase/auth-compat",Tq="@firebase/database",Sq="@firebase/data-connect",Dq="@firebase/database-compat",Aq="@firebase/functions",xq="@firebase/functions-compat",Rq="@firebase/installations",kq="@firebase/installations-compat",Nq="@firebase/messaging",Mq="@firebase/messaging-compat",Pq="@firebase/performance",Oq="@firebase/performance-compat",Fq="@firebase/remote-config",Vq="@firebase/remote-config-compat",Lq="@firebase/storage",Uq="@firebase/storage-compat",jq="@firebase/firestore",Bq="@firebase/ai",$q="@firebase/firestore-compat",Hq="firebase",qq="11.10.0";var CC="[DEFAULT]",zq={[bC]:"fire-core",[vq]:"fire-core-compat",[wq]:"fire-analytics",[_q]:"fire-analytics-compat",[Eq]:"fire-app-check",[Iq]:"fire-app-check-compat",[bq]:"fire-auth",[Cq]:"fire-auth-compat",[Tq]:"fire-rtdb",[Sq]:"fire-data-connect",[Dq]:"fire-rtdb-compat",[Aq]:"fire-fn",[xq]:"fire-fn-compat",[Rq]:"fire-iid",[kq]:"fire-iid-compat",[Nq]:"fire-fcm",[Mq]:"fire-fcm-compat",[Pq]:"fire-perf",[Oq]:"fire-perf-compat",[Fq]:"fire-rc",[Vq]:"fire-rc-compat",[Lq]:"fire-gcs",[Uq]:"fire-gcs-compat",[jq]:"fire-fst",[$q]:"fire-fst-compat",[Bq]:"fire-vertex","fire-js":"fire-js",[Hq]:"fire-js-all"};var Qf=new Map,Gq=new Map,TC=new Map;function xO(n,e){try{n.container.addComponent(e)}catch(t){As.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function ii(n){let e=n.name;if(TC.has(e))return As.debug(`There were multiple attempts to register component ${e}.`),!1;TC.set(e,n);for(let t of Qf.values())xO(t,n);for(let t of Gq.values())xO(t,n);return!0}function $u(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function xr(n){return n==null?!1:n.settings!==void 0}var Wq={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Zo=new ri("app","Firebase",Wq);var SC=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new qn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Zo.create("app-deleted",{appName:this._name})}};var ea=qq;function xC(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:CC,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw Zo.create("bad-app-name",{appName:String(i)});if(t||(t=fC()),!t)throw Zo.create("no-options");let s=Qf.get(i);if(s){if(Vi(t,s.options)&&Vi(r,s.config))return s;throw Zo.create("duplicate-app",{appName:i})}let o=new Dv(i);for(let c of TC.values())o.addComponent(c);let a=new SC(t,r,o);return Qf.set(i,a),a}function Vc(n=CC){let e=Qf.get(n);if(!e&&n===CC&&fC())return xC();if(!e)throw Zo.create("no-app",{appName:n});return e}function Rv(){return Array.from(Qf.values())}function xt(n,e,t){var r;let i=(r=zq[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),As.warn(a.join(" "));return}ii(new qn(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var Kq="firebase-heartbeat-database",Qq=1,Yf="firebase-heartbeat-store",IC=null;function MO(){return IC||(IC=xv(Kq,Qq,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Yf)}catch(t){console.warn(t)}}}}).catch(n=>{throw Zo.create("idb-open",{originalErrorMessage:n.message})})),IC}async function Yq(n){try{let t=(await MO()).transaction(Yf),r=await t.objectStore(Yf).get(PO(n));return await t.done,r}catch(e){if(e instanceof fr)As.warn(e.message);else{let t=Zo.create("idb-get",{originalErrorMessage:e?.message});As.warn(t.message)}}}async function RO(n,e){try{let r=(await MO()).transaction(Yf,"readwrite");await r.objectStore(Yf).put(e,PO(n)),await r.done}catch(t){if(t instanceof fr)As.warn(t.message);else{let r=Zo.create("idb-set",{originalErrorMessage:t?.message});As.warn(r.message)}}}function PO(n){return`${n.name}!${n.options.appId}`}var Jq=1024,Xq=30,DC=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new AC(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=kO();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>Xq){let o=ez(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){As.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=kO(),{heartbeatsToSend:r,unsentEntries:i}=Zq(this._heartbeatsCache.heartbeats),s=Gf(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return As.warn(t),""}}};function kO(){return new Date().toISOString().substring(0,10)}function Zq(n,e=Jq){let t=[],r=n.slice();for(let i of n){let s=t.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),NO(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),NO(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var AC=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Wf()?_O().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){let t=await Yq(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){let i=await this.read();return RO(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){let i=await this.read();return RO(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}};function NO(n){return Gf(JSON.stringify({version:2,heartbeats:n})).length}function ez(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function tz(n){ii(new qn("platform-logger",e=>new EC(e),"PRIVATE")),ii(new qn("heartbeat",e=>new DC(e),"PRIVATE")),xt(bC,AO,n),xt(bC,AO,"esm2017"),xt("fire-js","")}tz("");var nz="firebase",rz="11.10.0";xt(nz,rz,"app");function OO(n){n===void 0&&(n=j(Mt));let e=n.get(hu);return t=>new Ve(r=>{let i=e.add(),s=!1;function o(){s||(i(),s=!0)}let a=t.subscribe({next:c=>{r.next(c),o()},complete:()=>{r.complete(),o()},error:c=>{r.error(c),o()}});return a.add(()=>{r.unsubscribe(),o()}),a})}var ta=new sc("ANGULARFIRE2_VERSION");function Jf(n,e,t){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===t);if(s.length===1)return s[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var qu=(n,e)=>{let t=e?[e]:Rv(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},Hu=(function(n){return n[n.SILENT=0]="SILENT",n[n.WARN=1]="WARN",n[n.VERBOSE=2]="VERBOSE",n})(Hu||{}),FO=bb()&&typeof Zone<"u"?Hu.WARN:Hu.SILENT;var kv=class{zone;delegate;constructor(e,t=Ww){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,s=function(o){i?i.runGuarded(()=>{e.apply(this,[o])}):e.apply(this,[o])};return this.delegate.schedule(s,t,r)}},na=(()=>{class n{outsideAngular;insideAngular;constructor(){let t=j(_t);this.outsideAngular=t.runOutsideAngular(()=>new kv(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=t.run(()=>new kv(typeof Zone>"u"?void 0:Zone.current,Gw))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=se({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),VO=!1;function iz(n,e){!VO&&(FO>Hu.SILENT||bb())&&(VO=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),FO>=e&&console.warn(`Firebase API called outside injection context: ${n.name}`)}function sz(n){let e=j(_t,{optional:!0});return e?e.runOutsideAngular(()=>n()):n()}function Lc(n){let e=j(_t,{optional:!0});return e?e.run(()=>n()):n()}var oz=(n,e,t)=>(...r)=>(e&&setTimeout(e,0),an(t,()=>Lc(()=>n.apply(void 0,r)))),Sn=(n,e,t)=>(t||=e?Hu.WARN:Hu.VERBOSE,function(){let r,i=arguments,s,o,a;try{s=j(na),o=j(hu),a=j(Lt)}catch{return iz(n,t),n.apply(this,i)}for(let d=0;d<arguments.length;d++)typeof i[d]=="function"&&(e&&(r||=Lc(()=>o.add())),i[d]=oz(i[d],r,a));let c=sz(()=>n.apply(this,i));return e?c instanceof Ve?c.pipe(ko(s.outsideAngular),Ro(s.insideAngular),OO(a)):c instanceof Promise?Lc(()=>{let d=o.add();return new Promise((h,p)=>{c.then(y=>an(a,()=>Lc(()=>h(y))),y=>an(a,()=>Lc(()=>p(y)))).finally(d)})}):typeof c=="function"&&r?function(){return setTimeout(r,0),c.apply(this,arguments)}:Lc(()=>c):c instanceof Ve?c.pipe(ko(s.outsideAngular),Ro(s.insideAngular)):Lc(()=>c)});var xs=class{constructor(e){return e}},Uc=class{constructor(){return Rv()}};function az(n){return n&&n.length===1?n[0]:new xs(Vc())}var RC=new ce("angularfire2._apps"),cz={provide:xs,useFactory:az,deps:[[new lr,RC]]},lz={provide:Uc,deps:[[new lr,RC]]};function uz(n){return(e,t)=>{let r=t.get(Sc);xt("angularfire",ta.full,"core"),xt("angularfire",ta.full,"app"),xt("angular",fI.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new xs(i)}}function LO(n,...e){return sr([cz,lz,{provide:RC,useFactory:uz(n),multi:!0,deps:[_t,Mt,na,...e]}])}var UO=Sn(xC,!0);var dz=new Map,hz={activated:!1,tokenObservers:[]},fz={initialized:!1,enabled:!1};function si(n){return dz.get(n)||Object.assign({},hz)}function HO(){return fz}var pz="https://content-firebaseappcheck.googleapis.com/v1";var gz="exchangeDebugToken",jO={OFFSET_DURATION:300*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:960*1e3},bve=1440*60*1e3;var MC=class{constructor(e,t,r,i,s){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(e){this.stop();try{this.pending=new Oc,this.pending.promise.catch(t=>{}),await mz(this.getNextRun(e)),this.pending.resolve(),await this.pending.promise,this.pending=new Oc,this.pending.promise.catch(t=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function mz(n){return new Promise(e=>{setTimeout(e,n)})}var yz={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},ra=new ri("appCheck","AppCheck",yz);function qO(n){if(!si(n).activated)throw ra.create("use-before-activation",{appName:n.name})}async function zO({url:n,body:e},t){let r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){let p=await i.getHeartbeatsHeader();p&&(r["X-Firebase-Client"]=p)}let s={method:"POST",body:JSON.stringify(e),headers:r},o;try{o=await fetch(n,s)}catch(p){throw ra.create("fetch-network-error",{originalErrorMessage:p?.message})}if(o.status!==200)throw ra.create("fetch-status-error",{httpStatus:o.status});let a;try{a=await o.json()}catch(p){throw ra.create("fetch-parse-error",{originalErrorMessage:p?.message})}let c=a.ttl.match(/^([\d.]+)(s)$/);if(!c||!c[2]||isNaN(Number(c[1])))throw ra.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});let d=Number(c[1])*1e3,h=Date.now();return{token:a.token,expireTimeMillis:h+d,issuedAtTimeMillis:h}}function GO(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${pz}/projects/${t}/apps/${r}:${gz}?key=${i}`,body:{debug_token:e}}}var vz="firebase-app-check-database",_z=1,PC="firebase-app-check-store";var Nv=null;function wz(){return Nv||(Nv=new Promise((n,e)=>{try{let t=indexedDB.open(vz,_z);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(ra.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(PC,{keyPath:"compositeKey"})}}}catch(t){e(ra.create("storage-open",{originalErrorMessage:t?.message}))}}),Nv)}function Iz(n,e){return Ez(bz(n),e)}async function Ez(n,e){let r=(await wz()).transaction(PC,"readwrite"),s=r.objectStore(PC).put({compositeKey:n,value:e});return new Promise((o,a)=>{s.onsuccess=c=>{o()},r.onerror=c=>{var d;a(ra.create("storage-set",{originalErrorMessage:(d=c.target.error)===null||d===void 0?void 0:d.message}))}})}function bz(n){return`${n.options.appId}-${n.name}`}var Xf=new Li("@firebase/app-check");function kC(n,e){return Wf()?Iz(n,e).catch(t=>{Xf.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function WO(){return HO().enabled}async function KO(){let n=HO();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}var Cz={error:"UNKNOWN_ERROR"};function Tz(n){return Ev.encodeString(JSON.stringify(n),!1)}async function OC(n,e=!1,t=!1){let r=n.app;qO(r);let i=si(r),s=i.token,o;if(s&&!Zf(s)&&(i.token=void 0,s=void 0),!s){let d=await i.cachedTokenPromise;d&&(Zf(d)?s=d:await kC(r,void 0))}if(!e&&s&&Zf(s))return{token:s.token};let a=!1;if(WO())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=zO(GO(r,await KO()),n.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),a=!0);let d=await i.exchangeTokenPromise;return await kC(r,d),i.token=d,{token:d.token}}catch(d){return d.code==="appCheck/throttled"||d.code==="appCheck/initial-throttle"?Xf.warn(d.message):t&&Xf.error(d),NC(d)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),a=!0),s=await si(r).exchangeTokenPromise}catch(d){d.code==="appCheck/throttled"||d.code==="appCheck/initial-throttle"?Xf.warn(d.message):t&&Xf.error(d),o=d}let c;return s?o?Zf(s)?c={token:s.token,internalError:o}:c=NC(o):(c={token:s.token},i.token=s,await kC(r,s)):c=NC(o),a&&xz(r,c),c}async function Sz(n){let e=n.app;qO(e);let{provider:t}=si(e);if(WO()){let r=await KO(),{token:i}=await zO(GO(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=await t.getToken();return{token:r}}}function Dz(n,e,t,r){let{app:i}=n,s=si(i),o={next:t,error:r,type:e};if(s.tokenObservers=[...s.tokenObservers,o],s.token&&Zf(s.token)){let a=s.token;Promise.resolve().then(()=>{t({token:a.token}),BO(n)}).catch(()=>{})}s.cachedTokenPromise.then(()=>BO(n))}function QO(n,e){let t=si(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function BO(n){let{app:e}=n,t=si(e),r=t.tokenRefresher;r||(r=Az(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function Az(n){let{app:e}=n;return new MC(async()=>{let t=si(e),r;if(t.token?r=await OC(n,!0):r=await OC(n),r.error)throw r.error;if(r.internalError)throw r.internalError},()=>!0,()=>{let t=si(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-300*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},jO.RETRIAL_MIN_WAIT,jO.RETRIAL_MAX_WAIT)}function xz(n,e){let t=si(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function Zf(n){return n.expireTimeMillis-Date.now()>0}function NC(n){return{token:Tz(Cz),error:n}}var FC=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=si(this.app);for(let t of e)QO(this.app,t.next);return Promise.resolve()}};function Rz(n,e){return new FC(n,e)}function kz(n){return{getToken:e=>OC(n,e),getLimitedUseToken:()=>Sz(n),addTokenListener:e=>Dz(n,"INTERNAL",e),removeTokenListener:e=>QO(n.app,e)}}var Nz="@firebase/app-check",Mz="0.10.1";var Pz="app-check",$O="app-check-internal";function Oz(){ii(new qn(Pz,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return Rz(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider($O).initialize()})),ii(new qn($O,n=>{let e=n.getProvider("app-check").getImmediate();return kz(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),xt(Nz,Mz)}Oz();var Fz="app-check";var zu=class{constructor(){return qu(Fz)}};var Vz=["localhost","0.0.0.0","127.0.0.1"],Ove=typeof window<"u"&&Vz.includes(window.location.hostname);var YO=()=>{};var ZO=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},Lz=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=n[t++],o=n[t++],a=n[t++],c=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let s=n[t++],o=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},e2={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let s=n[i],o=i+1<n.length,a=o?n[i+1]:0,c=i+2<n.length,d=c?n[i+2]:0,h=s>>2,p=(s&3)<<4|a>>4,y=(a&15)<<2|d>>6,E=d&63;c||(E=64,o||(y=64)),r.push(t[h],t[p],t[y],t[E])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(ZO(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):Lz(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let s=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let d=i<n.length?t[n.charAt(i)]:64;++i;let p=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||a==null||d==null||p==null)throw new VC;let y=s<<2|a>>4;if(r.push(y),d!==64){let E=a<<4&240|d>>2;if(r.push(E),p!==64){let k=d<<6&192|p;r.push(k)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},VC=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},Uz=function(n){let e=ZO(n);return e2.encodeByteArray(e,!0)},tp=function(n){return Uz(n).replace(/\./g,"")},t2=function(n){try{return e2.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function n2(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var jz=()=>n2().__FIREBASE_DEFAULTS__,Bz=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},$z=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&t2(n[1]);return e&&JSON.parse(e)},LC=()=>{try{return YO()||jz()||Bz()||$z()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Hz=n=>LC()?.emulatorHosts?.[n],r2=n=>{let e=Hz(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},UC=()=>LC()?.config;var Mv=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function Pv(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function i2(n){return(await fetch(n,{credentials:"include"})).ok}function s2(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=B({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[tp(JSON.stringify(t)),tp(JSON.stringify(o)),""].join(".")}var ep={};function qz(){let n={prod:[],emulator:[]};for(let e of Object.keys(ep))ep[e]?n.emulator.push(e):n.prod.push(e);return n}function zz(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}var JO=!1;function o2(n,e){if(typeof window>"u"||typeof document>"u"||!Pv(window.location.host)||ep[n]===e||ep[n]||JO)return;ep[n]=e;function t(y){return`__firebase__banner__${y}`}let r="__firebase__banner",s=qz().prod.length>0;function o(){let y=document.getElementById(r);y&&y.remove()}function a(y){y.style.display="flex",y.style.background="#7faaf0",y.style.position="fixed",y.style.bottom="5px",y.style.left="5px",y.style.padding=".5em",y.style.borderRadius="5px",y.style.alignItems="center"}function c(y,E){y.setAttribute("width","24"),y.setAttribute("id",E),y.setAttribute("height","24"),y.setAttribute("viewBox","0 0 24 24"),y.setAttribute("fill","none"),y.style.marginLeft="-6px"}function d(){let y=document.createElement("span");return y.style.cursor="pointer",y.style.marginLeft="16px",y.style.fontSize="24px",y.innerHTML=" &times;",y.onclick=()=>{JO=!0,o()},y}function h(y,E){y.setAttribute("id",E),y.innerText="Learn more",y.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",y.setAttribute("target","__blank"),y.style.paddingLeft="5px",y.style.textDecoration="underline"}function p(){let y=zz(r),E=t("text"),k=document.getElementById(E)||document.createElement("span"),P=t("learnmore"),M=document.getElementById(P)||document.createElement("a"),H=t("preprendIcon"),Y=document.getElementById(H)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(y.created){let ee=y.element;a(ee),h(M,P);let De=d();c(Y,H),ee.append(Y,k,M,De),document.body.appendChild(ee)}s?(k.innerText="Preview backend disconnected.",Y.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Y.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,k.innerText="Preview backend running in this workspace."),k.setAttribute("id",E)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}function a2(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Gz(){let n=LC()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function c2(){return!Gz()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function jC(){try{return typeof indexedDB=="object"}catch{return!1}}function l2(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(t){e(t)}})}var Wz="FirebaseError",Rs=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=Wz,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,np.prototype.create)}},np=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?Kz(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Rs(i,a,r)}};function Kz(n,e){return n.replace(Qz,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var Qz=/\{\$([^}]+)}/g;function Gu(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let s=n[i],o=e[i];if(XO(s)&&XO(o)){if(!Gu(s,o))return!1}else if(s!==o)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function XO(n){return n!==null&&typeof n=="object"}var jve=14400*1e3;function oi(n){return n&&n._delegate?n._delegate:n}var ks=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var jc="[DEFAULT]";var BC=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new Mv;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){let t=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Jz(e))try{this.getOrInitializeService({instanceIdentifier:jc})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=jc){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){let e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=jc){return this.instances.has(e)}getOptions(e=jc){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[s,o]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,t){let r=this.normalizeInstanceIdentifier(t),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);let s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Yz(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=jc){return this.component?this.component.multipleInstances?e:jc:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function Yz(n){return n===jc?void 0:n}function Jz(n){return n.instantiationMode==="EAGER"}var Ov=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new BC(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var Xz=[],ze=(function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n})(ze||{}),Zz={debug:ze.DEBUG,verbose:ze.VERBOSE,info:ze.INFO,warn:ze.WARN,error:ze.ERROR,silent:ze.SILENT},eG=ze.INFO,tG={[ze.DEBUG]:"log",[ze.VERBOSE]:"log",[ze.INFO]:"info",[ze.WARN]:"warn",[ze.ERROR]:"error"},nG=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=tG[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Wu=class{constructor(e){this.name=e,this._logLevel=eG,this._logHandler=nG,this._userLogHandler=null,Xz.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ze))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Zz[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ze.DEBUG,...e),this._logHandler(this,ze.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ze.VERBOSE,...e),this._logHandler(this,ze.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ze.INFO,...e),this._logHandler(this,ze.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ze.WARN,...e),this._logHandler(this,ze.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ze.ERROR,...e),this._logHandler(this,ze.ERROR,...e)}};var HC=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(rG(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function rG(n){return n.getComponent()?.type==="VERSION"}var qC="@firebase/app",u2="0.14.6";var Ns=new Wu("@firebase/app"),iG="@firebase/app-compat",sG="@firebase/analytics-compat",oG="@firebase/analytics",aG="@firebase/app-check-compat",cG="@firebase/app-check",lG="@firebase/auth",uG="@firebase/auth-compat",dG="@firebase/database",hG="@firebase/data-connect",fG="@firebase/database-compat",pG="@firebase/functions",gG="@firebase/functions-compat",mG="@firebase/installations",yG="@firebase/installations-compat",vG="@firebase/messaging",_G="@firebase/messaging-compat",wG="@firebase/performance",IG="@firebase/performance-compat",EG="@firebase/remote-config",bG="@firebase/remote-config-compat",CG="@firebase/storage",TG="@firebase/storage-compat",SG="@firebase/firestore",DG="@firebase/ai",AG="@firebase/firestore-compat",xG="firebase",RG="12.6.0";var zC="[DEFAULT]",kG={[qC]:"fire-core",[iG]:"fire-core-compat",[oG]:"fire-analytics",[sG]:"fire-analytics-compat",[cG]:"fire-app-check",[aG]:"fire-app-check-compat",[lG]:"fire-auth",[uG]:"fire-auth-compat",[dG]:"fire-rtdb",[hG]:"fire-data-connect",[fG]:"fire-rtdb-compat",[pG]:"fire-fn",[gG]:"fire-fn-compat",[mG]:"fire-iid",[yG]:"fire-iid-compat",[vG]:"fire-fcm",[_G]:"fire-fcm-compat",[wG]:"fire-perf",[IG]:"fire-perf-compat",[EG]:"fire-rc",[bG]:"fire-rc-compat",[CG]:"fire-gcs",[TG]:"fire-gcs-compat",[SG]:"fire-fst",[AG]:"fire-fst-compat",[DG]:"fire-vertex","fire-js":"fire-js",[xG]:"fire-js-all"};var Fv=new Map,NG=new Map,GC=new Map;function d2(n,e){try{n.container.addComponent(e)}catch(t){Ns.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function rp(n){let e=n.name;if(GC.has(e))return Ns.debug(`There were multiple attempts to register component ${e}.`),!1;GC.set(e,n);for(let t of Fv.values())d2(t,n);for(let t of NG.values())d2(t,n);return!0}function g2(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function m2(n){return n==null?!1:n.settings!==void 0}var MG={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ia=new np("app","Firebase",MG);var WC=class{constructor(e,t,r){this._isDeleted=!1,this._options=B({},e),this._config=B({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ks("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ia.create("app-deleted",{appName:this._name})}};var y2=RG;function sp(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=B({name:zC,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw ia.create("bad-app-name",{appName:String(i)});if(t||(t=UC()),!t)throw ia.create("no-options");let s=Fv.get(i);if(s){if(Gu(t,s.options)&&Gu(r,s.config))return s;throw ia.create("duplicate-app",{appName:i})}let o=new Ov(i);for(let c of GC.values())o.addComponent(c);let a=new WC(t,r,o);return Fv.set(i,a),a}function v2(n=zC){let e=Fv.get(n);if(!e&&n===zC&&UC())return sp();if(!e)throw ia.create("no-app",{appName:n});return e}function sa(n,e,t){let r=kG[n]??n;t&&(r+=`-${t}`);let i=r.match(/\s|\//),s=e.match(/\s|\//);if(i||s){let o=[`Unable to register library "${r}" with version "${e}":`];i&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&s&&o.push("and"),s&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ns.warn(o.join(" "));return}rp(new ks(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}var PG="firebase-heartbeat-database",OG=1,ip="firebase-heartbeat-store",$C=null;function _2(){return $C||($C=xv(PG,OG,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(ip)}catch(t){console.warn(t)}}}}).catch(n=>{throw ia.create("idb-open",{originalErrorMessage:n.message})})),$C}async function FG(n){try{let t=(await _2()).transaction(ip),r=await t.objectStore(ip).get(w2(n));return await t.done,r}catch(e){if(e instanceof Rs)Ns.warn(e.message);else{let t=ia.create("idb-get",{originalErrorMessage:e?.message});Ns.warn(t.message)}}}async function h2(n,e){try{let r=(await _2()).transaction(ip,"readwrite");await r.objectStore(ip).put(e,w2(n)),await r.done}catch(t){if(t instanceof Rs)Ns.warn(t.message);else{let r=ia.create("idb-set",{originalErrorMessage:t?.message});Ns.warn(r.message)}}}function w2(n){return`${n.name}!${n.options.appId}`}var VG=1024,LG=30,KC=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new QC(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{let t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=f2();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>LG){let i=jG(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Ns.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";let e=f2(),{heartbeatsToSend:t,unsentEntries:r}=UG(this._heartbeatsCache.heartbeats),i=tp(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return Ns.warn(e),""}}};function f2(){return new Date().toISOString().substring(0,10)}function UG(n,e=VG){let t=[],r=n.slice();for(let i of n){let s=t.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),p2(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),p2(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var QC=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return jC()?l2().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){let t=await FG(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){let r=await this.read();return h2(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){let r=await this.read();return h2(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}};function p2(n){return tp(JSON.stringify({version:2,heartbeats:n})).length}function jG(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function BG(n){rp(new ks("platform-logger",e=>new HC(e),"PRIVATE")),rp(new ks("heartbeat",e=>new KC(e),"PRIVATE")),sa(qC,u2,n),sa(qC,u2,"esm2020"),sa("fire-js","")}BG("");function O2(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var F2=O2,V2=new ri("auth","Firebase",O2());var $v=new Li("@firebase/auth");function $G(n,...e){$v.logLevel<=Be.WARN&&$v.warn(`Auth (${ea}): ${n}`,...e)}function Lv(n,...e){$v.logLevel<=Be.ERROR&&$v.error(`Auth (${ea}): ${n}`,...e)}function ca(n,...e){throw gT(n,...e)}function $c(n,...e){return gT(n,...e)}function L2(n,e,t){let r=Object.assign(Object.assign({},F2()),{[e]:t});return new ri("auth","Firebase",r).create(e,{appName:n.name})}function Bc(n){return L2(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function gT(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return V2.create(n,...e)}function Ee(n,e,...t){if(!n)throw gT(e,...t)}function Ms(n){let e="INTERNAL ASSERTION FAILED: "+n;throw Lv(e),new Error(e)}function la(n,e){n||Ms(e)}function ZC(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function HG(){return I2()==="http:"||I2()==="https:"}function I2(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function qG(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(HG()||gO()||"connection"in navigator)?navigator.onLine:!0}function zG(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var Hc=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,la(t>e,"Short delay should be less than long delay!"),this.isMobile=fO()||mO()}get(){return qG()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function mT(n,e){la(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var Hv=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ms("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ms("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ms("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var GG={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var WG=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],KG=new Hc(3e4,6e4);function yT(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function Ku(n,e,t,r,i={}){return U2(n,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});let a=Kf(Object.assign({key:n.config.apiKey},o)).slice(1),c=await n._getAdditionalHeaders();c["Content-Type"]="application/json",n.languageCode&&(c["X-Firebase-Locale"]=n.languageCode);let d=Object.assign({method:e,headers:c},s);return pO()||(d.referrerPolicy="no-referrer"),n.emulatorConfig&&Xo(n.emulatorConfig.host)&&(d.credentials="include"),Hv.fetch()(await j2(n,n.config.apiHost,t,a),d)})}async function U2(n,e,t){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},GG),e);try{let i=new eT(n),s=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();let o=await s.json();if("needConfirmation"in o)throw Vv(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[c,d]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Vv(n,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw Vv(n,"email-already-in-use",o);if(c==="USER_DISABLED")throw Vv(n,"user-disabled",o);let h=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw L2(n,h,d);ca(n,h)}}catch(i){if(i instanceof fr)throw i;ca(n,"network-request-failed",{message:String(i)})}}async function QG(n,e,t,r,i={}){let s=await Ku(n,e,t,r,i);return"mfaPendingCredential"in s&&ca(n,"multi-factor-auth-required",{_serverResponse:s}),s}async function j2(n,e,t,r){let i=`${e}${t}?${r}`,s=n,o=s.config.emulator?mT(n.config,i):`${n.config.apiScheme}://${i}`;return WG.includes(t)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o}var eT=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r($c(this.auth,"network-request-failed")),KG.get())})}};function Vv(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=$c(n,e,r);return i.customData._tokenResponse=t,i}async function YG(n,e){return Ku(n,"POST","/v1/accounts:delete",e)}async function qv(n,e){return Ku(n,"POST","/v1/accounts:lookup",e)}function op(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function vT(n,e=!1){let t=hn(n),r=await t.getIdToken(e),i=_T(r);Ee(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:op(YC(i.auth_time)),issuedAtTime:op(YC(i.iat)),expirationTime:op(YC(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}}function YC(n){return Number(n)*1e3}function _T(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Lv("JWT malformed, contained fewer than 3 sections"),null;try{let i=bv(t);return i?JSON.parse(i):(Lv("Failed to decode base64 JWT payload"),null)}catch(i){return Lv("Caught error parsing JWT payload as JSON",i?.toString()),null}}function E2(n){let e=_T(n);return Ee(e,"internal-error"),Ee(typeof e.exp<"u","internal-error"),Ee(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function cp(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof fr&&JG(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function JG({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var tT=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}};var lp=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=op(this.lastLoginAt),this.creationTime=op(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};async function zv(n){var e;let t=n.auth,r=await n.getIdToken(),i=await cp(n,qv(t,{idToken:r}));Ee(i?.users.length,t,"internal-error");let s=i.users[0];n._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?B2(s.providerUserInfo):[],a=XG(n.providerData,o),c=n.isAnonymous,d=!(n.email&&s.passwordHash)&&!a?.length,h=c?d:!1,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new lp(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(n,p)}async function wT(n){let e=hn(n);await zv(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function XG(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function B2(n){return n.map(e=>{var{providerId:t}=e,r=Kw(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}async function ZG(n,e){let t=await U2(n,{},async()=>{let r=Kf({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,o=await j2(n,i,"/v1/token",`key=${s}`),a=await n._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let c={method:"POST",headers:a,body:r};return n.emulatorConfig&&Xo(n.emulatorConfig.host)&&(c.credentials="include"),Hv.fetch()(o,c)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function e7(n,e){return Ku(n,"POST","/v2/accounts:revokeToken",yT(n,e))}var ap=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ee(e.idToken,"internal-error"),Ee(typeof e.idToken<"u","internal-error"),Ee(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):E2(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ee(e.length!==0,"internal-error");let t=E2(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ee(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){let{accessToken:r,refreshToken:i,expiresIn:s}=await ZG(e,t);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:s}=t,o=new n;return r&&(Ee(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(Ee(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(Ee(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return Ms("not implemented")}};function oa(n,e){Ee(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var aa=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,s=Kw(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new tT(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new lp(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){let t=await cp(this,this.stsTokenManager.getToken(this.auth,e));return Ee(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return vT(this,e)}reload(){return wT(this)}_assign(e){this!==e&&(Ee(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Ee(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await zv(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(xr(this.auth.app))return Promise.reject(Bc(this.auth));let e=await this.getIdToken();return await cp(this,YG(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,s,o,a,c,d,h;let p=(r=t.displayName)!==null&&r!==void 0?r:void 0,y=(i=t.email)!==null&&i!==void 0?i:void 0,E=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,k=(o=t.photoURL)!==null&&o!==void 0?o:void 0,P=(a=t.tenantId)!==null&&a!==void 0?a:void 0,M=(c=t._redirectEventId)!==null&&c!==void 0?c:void 0,H=(d=t.createdAt)!==null&&d!==void 0?d:void 0,Y=(h=t.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:ee,emailVerified:De,isAnonymous:Ze,providerData:ve,stsTokenManager:T}=t;Ee(ee&&T,e,"internal-error");let _=ap.fromJSON(this.name,T);Ee(typeof ee=="string",e,"internal-error"),oa(p,e.name),oa(y,e.name),Ee(typeof De=="boolean",e,"internal-error"),Ee(typeof Ze=="boolean",e,"internal-error"),oa(E,e.name),oa(k,e.name),oa(P,e.name),oa(M,e.name),oa(H,e.name),oa(Y,e.name);let I=new n({uid:ee,auth:e,email:y,emailVerified:De,displayName:p,isAnonymous:Ze,photoURL:k,phoneNumber:E,tenantId:P,stsTokenManager:_,createdAt:H,lastLoginAt:Y});return ve&&Array.isArray(ve)&&(I.providerData=ve.map(C=>Object.assign({},C))),M&&(I._redirectEventId=M),I}static async _fromIdTokenResponse(e,t,r=!1){let i=new ap;i.updateFromServerResponse(t);let s=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await zv(s),s}static async _fromGetAccountInfoResponse(e,t,r){let i=t.users[0];Ee(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?B2(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,a=new ap;a.updateFromIdToken(r);let c=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new lp(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(c,d),c}};var b2=new Map;function Ps(n){la(n instanceof Function,"Expected a class definition");let e=b2.get(n);return e?(la(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,b2.set(n,e),e)}var t7=(()=>{class n{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,r){this.storage[t]=r}async _get(t){let r=this.storage[t];return r===void 0?null:r}async _remove(t){delete this.storage[t]}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),nT=t7;function Uv(n,e,t){return`firebase:${n}:${e}:${t}`}var Gv=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=Uv(this.userKey,i.apiKey,s),this.fullPersistenceKey=Uv("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){let e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=await qv(this.auth,{idToken:e}).catch(()=>{});return t?aa._fromGetAccountInfoResponse(this.auth,t,e):null}return aa._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;let t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new n(Ps(nT),e,r);let i=(await Promise.all(t.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d),s=i[0]||Ps(nT),o=Uv(r,e.config.apiKey,e.name),a=null;for(let d of t)try{let h=await d._get(o);if(h){let p;if(typeof h=="string"){let y=await qv(e,{idToken:h}).catch(()=>{});if(!y)break;p=await aa._fromGetAccountInfoResponse(e,y,h)}else p=aa._fromJSON(e,h);d!==s&&(a=p),s=d;break}}catch{}let c=i.filter(d=>d._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new n(s,e,r):(s=c[0],a&&await s._set(o,a.toJSON()),await Promise.all(t.map(async d=>{if(d!==s)try{await d._remove(o)}catch{}})),new n(s,e,r))}};function C2(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(z2(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if($2(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(W2(e))return"Blackberry";if(K2(e))return"Webos";if(H2(e))return"Safari";if((e.includes("chrome/")||q2(e))&&!e.includes("edge/"))return"Chrome";if(G2(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function $2(n=yn()){return/firefox\//i.test(n)}function H2(n=yn()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function q2(n=yn()){return/crios\//i.test(n)}function z2(n=yn()){return/iemobile/i.test(n)}function G2(n=yn()){return/android/i.test(n)}function W2(n=yn()){return/blackberry/i.test(n)}function K2(n=yn()){return/webos/i.test(n)}function IT(n=yn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function n7(n=yn()){var e;return IT(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function r7(){return yO()&&document.documentMode===10}function Q2(n=yn()){return IT(n)||G2(n)||K2(n)||W2(n)||/windows phone/i.test(n)||z2(n)}function Y2(n,e=[]){let t;switch(n){case"Browser":t=C2(yn());break;case"Worker":t=`${C2(yn())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${ea}/${r}`}var rT=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=s=>new Promise((o,a)=>{try{let c=e(s);o(c)}catch(c){a(c)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}};async function i7(n,e={}){return Ku(n,"GET","/v2/passwordPolicy",yT(n,e))}var s7=6,iT=class{constructor(e){var t,r,i,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=o.minPasswordLength)!==null&&t!==void 0?t:s7,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,s,o,a;let c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(t=c.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(s=c.containsUppercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var sT=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Wv(this),this.idTokenSubscription=new Wv(this),this.beforeStateQueue=new rT(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=V2,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Ps(t)),this._initializationPromise=this.queue(async()=>{var r,i,s;if(!this._deleted&&(this.persistenceManager=await Gv.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;let e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{let t=await qv(this,{idToken:e}),r=await aa._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(xr(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}let r=await this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();let o=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=i?._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===a)&&c?.user&&(i=c.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Ee(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await zv(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=zG()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(xr(this.app))return Promise.reject(Bc(this));let t=e?hn(e):null;return t&&Ee(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ee(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return xr(this.app)?Promise.reject(Bc(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return xr(this.app)?Promise.reject(Bc(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ps(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){let e=await i7(this),t=new iT(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ri("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){let t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await e7(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){let r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){let t=e&&Ps(e)||this._popupRedirectResolver;Ee(t,this,"argument-error"),this.redirectPersistenceManager=await Gv.create(this,[Ps(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let s=typeof t=="function"?t:t.next.bind(t),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ee(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof t=="function"){let c=e.addObserver(t,r,i);return()=>{o=!0,c()}}else{let c=e.addObserver(t);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ee(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Y2(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);let i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;if(xr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t?.error&&$G(`Error while retrieving App Check token: ${t.error}`),t?.token}};function ET(n){return hn(n)}var Wv=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=IO(t=>this.observer=t)}get next(){return Ee(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var bT={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function o7(n){bT=n}function a7(n){return bT.loadJS(n)}function c7(){return bT.gapiScript}function J2(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function CT(n,e){let t=$u(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),s=t.getOptions();if(Vi(s,e??{}))return i;ca(i,"already-initialized")}return t.initialize({options:e})}function l7(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Ps);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function TT(n,e,t){let r=ET(n);Ee(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,s=X2(e),{host:o,port:a}=u7(e),c=a===null?"":`:${a}`,d={url:`${s}//${o}${c}/`},h=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){Ee(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Ee(Vi(d,r.config.emulator)&&Vi(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=d,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,Xo(o)?(Tv(`${s}//${o}${c}`),Sv("Auth",!0)):i||d7()}function X2(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function u7(n){let e=X2(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let s=i[1];return{host:s,port:T2(r.substr(s.length+1))}}else{let[s,o]=r.split(":");return{host:s,port:T2(o)}}}function T2(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function d7(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var Kv=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ms("not implemented")}_getIdTokenResponse(e){return Ms("not implemented")}_linkToIdToken(e,t){return Ms("not implemented")}_getReauthenticationResolver(e){return Ms("not implemented")}};async function JC(n,e){return QG(n,"POST","/v1/accounts:signInWithIdp",yT(n,e))}var Qv=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var oT=class extends Qv{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var up=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){let s=await aa._fromIdTokenResponse(e,r,i),o=S2(r);return new n({user:s,providerId:o,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);let i=S2(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})}};function S2(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var aT=class n extends fr{constructor(e,t,r,i){var s;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function Z2(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?aT._fromErrorAndOperation(n,s,e,r):s})}async function h7(n,e,t=!1){let r=await cp(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return up._forOperation(n,"link",r)}async function f7(n,e,t=!1){let{auth:r}=n;if(xr(r.app))return Promise.reject(Bc(r));let i="reauthenticate";try{let s=await cp(n,Z2(r,i,e,n),t);Ee(s.idToken,r,"internal-error");let o=_T(s.idToken);Ee(o,r,"internal-error");let{sub:a}=o;return Ee(n.uid===a,r,"user-mismatch"),up._forOperation(n,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&ca(r,"user-mismatch"),s}}async function p7(n,e,t=!1){if(xr(n.app))return Promise.reject(Bc(n));let r="signIn",i=await Z2(n,r,e),s=await up._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(s.user),s}function ST(n,e,t,r){return hn(n).onIdTokenChanged(e,t,r)}function DT(n,e,t){return hn(n).beforeAuthStateChanged(e,t)}var Yv="__sak";var Jv=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Yv,"1"),this.storage.removeItem(Yv),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var g7=1e3,m7=10,y7=(()=>{class n extends Jv{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Q2(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),s=this.localCache[r];i!==s&&t(r,s,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((a,c,d)=>{this.notifyListeners(a,d)});return}let i=t.key;r?this.detachListener():this.stopPolling();let s=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},o=this.storage.getItem(i);r7()&&o!==t.newValue&&t.newValue!==t.oldValue?setTimeout(s,m7):s()}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},g7)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,r){await super._set(t,r),this.localCache[t]=JSON.stringify(r)}async _get(t){let r=await super._get(t);return this.localCache[t]=JSON.stringify(r),r}async _remove(t){await super._remove(t),delete this.localCache[t]}}return n.type="LOCAL",n})(),eF=y7;var v7=(()=>{class n extends Jv{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),AT=v7;function _7(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}var w7=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let r=this.receivers.find(s=>s.isListeningto(t));if(r)return r;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}async handleEvent(t){let r=t,{eventId:i,eventType:s,data:o}=r.data,a=this.handlersMap[s];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:s});let c=Array.from(a).map(async h=>h(r.origin,o)),d=await _7(c);r.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:d})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function tF(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var cT=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,c)=>{let d=tF("",20);i.port1.start();let h=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(p){let y=p;if(y.data.eventId===d)switch(y.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(y.data.response);break;default:clearTimeout(h),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:t},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}};function ji(){return window}function I7(n){ji().location.href=n}function nF(){return typeof ji().WorkerGlobalScope<"u"&&typeof ji().importScripts=="function"}async function E7(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function b7(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function C7(){return nF()?self:null}var rF="firebaseLocalStorageDb",T7=1,Xv="firebaseLocalStorage",iF="fbase_key",qc=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function e_(n,e){return n.transaction([Xv],e?"readwrite":"readonly").objectStore(Xv)}function S7(){let n=indexedDB.deleteDatabase(rF);return new qc(n).toPromise()}function lT(){let n=indexedDB.open(rF,T7);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(Xv,{keyPath:iF})}catch(i){t(i)}}),n.addEventListener("success",async()=>{let r=n.result;r.objectStoreNames.contains(Xv)?e(r):(r.close(),await S7(),e(await lT()))})})}async function D2(n,e,t){let r=e_(n,!0).put({[iF]:e,value:t});return new qc(r).toPromise()}async function D7(n,e){let t=e_(n,!1).get(e),r=await new qc(t).toPromise();return r===void 0?null:r.value}function A2(n,e){let t=e_(n,!0).delete(e);return new qc(t).toPromise()}var A7=800,x7=3,R7=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await lT(),this.db)}async _withRetries(t){let r=0;for(;;)try{let i=await this._openDb();return await t(i)}catch(i){if(r++>x7)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return nF()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=w7._getInstance(C7()),this.receiver._subscribe("keyChanged",async(t,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(t,r)=>["keyChanged"])}async initializeSender(){var t,r;if(this.activeServiceWorker=await E7(),!this.activeServiceWorker)return;this.sender=new cT(this.activeServiceWorker);let i=await this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||b7()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;let t=await lT();return await D2(t,Yv,"1"),await A2(t,Yv),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,r){return this._withPendingWrite(async()=>(await this._withRetries(i=>D2(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)))}async _get(t){let r=await this._withRetries(i=>D7(i,t));return this.localCache[t]=r,r}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(r=>A2(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){let t=await this._withRetries(s=>{let o=e_(s,!1).getAll();return new qc(o).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(t.length!==0)for(let{fbase_key:s,value:o}of t)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),r.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),r.push(s));return r}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let s of Array.from(i))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),A7)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),sF=R7;var u_e=J2("rcb"),d_e=new Hc(3e4,6e4);function k7(n,e){return e?Ps(e):(Ee(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var dp=class extends Kv{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return JC(e,this._buildIdpRequest())}_linkToIdToken(e,t){return JC(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return JC(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function N7(n){return p7(n.auth,new dp(n),n.bypassAuthState)}function M7(n){let{auth:e,user:t}=n;return Ee(t,e,"internal-error"),f7(t,new dp(n),n.bypassAuthState)}async function P7(n){let{auth:e,user:t}=n;return Ee(t,e,"internal-error"),h7(t,new dp(n),n.bypassAuthState)}var uT=class{constructor(e,t,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){let{urlResponse:t,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}let c={auth:this.auth,requestUri:t,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(c))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return N7;case"linkViaPopup":case"linkViaRedirect":return P7;case"reauthViaPopup":case"reauthViaRedirect":return M7;default:ca(this.auth,"internal-error")}}resolve(e){la(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){la(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var h_e=new Hc(2e3,1e4);var O7="pendingRedirect",jv=new Map,dT=class extends uT{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=jv.get(this.auth._key());if(!e){try{let r=await F7(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}jv.set(this.auth._key(),e)}return this.bypassAuthState||jv.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}};async function F7(n,e){let t=U7(e),r=L7(n);if(!await r._isAvailable())return!1;let i=await r._get(t)==="true";return await r._remove(t),i}function V7(n,e){jv.set(n._key(),e)}function L7(n){return Ps(n._redirectPersistence)}function U7(n){return Uv(O7,n.config.apiKey,n.name)}async function j7(n,e,t=!1){if(xr(n.app))return Promise.reject(Bc(n));let r=ET(n),i=k7(r,e),o=await new dT(r,i,t).execute();return o&&!t&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}var B7=600*1e3,hT=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!$7(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!oF(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError($c(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=B7&&this.cachedEventUids.clear(),this.cachedEventUids.has(x2(e))}saveEventToCache(e){this.cachedEventUids.add(x2(e)),this.lastProcessedEventTime=Date.now()}};function x2(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function oF({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function $7(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return oF(n);default:return!1}}async function H7(n,e={}){return Ku(n,"GET","/v1/projects",e)}var q7=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,z7=/^https?/;async function G7(n){if(n.config.emulator)return;let{authorizedDomains:e}=await H7(n);for(let t of e)try{if(W7(t))return}catch{}ca(n,"unauthorized-domain")}function W7(n){let e=ZC(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let o=new URL(n);return o.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===r}if(!z7.test(t))return!1;if(q7.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var K7=new Hc(3e4,6e4);function R2(){let n=ji().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function Q7(n){return new Promise((e,t)=>{var r,i,s;function o(){R2(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{R2(),t($c(n,"network-request-failed"))},timeout:K7.get()})}if(!((i=(r=ji().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=ji().gapi)===null||s===void 0)&&s.load)o();else{let a=J2("iframefcb");return ji()[a]=()=>{gapi.load?o():t($c(n,"network-request-failed"))},a7(`${c7()}?onload=${a}`).catch(c=>t(c))}}).catch(e=>{throw Bv=null,e})}var Bv=null;function Y7(n){return Bv=Bv||Q7(n),Bv}var J7=new Hc(5e3,15e3),X7="__/auth/iframe",Z7="emulator/auth/iframe",eW={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},tW=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function nW(n){let e=n.config;Ee(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?mT(e,Z7):`https://${n.config.authDomain}/${X7}`,r={apiKey:e.apiKey,appName:n.name,v:ea},i=tW.get(n.config.apiHost);i&&(r.eid=i);let s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${t}?${Kf(r).slice(1)}`}async function rW(n){let e=await Y7(n),t=ji().gapi;return Ee(t,n,"internal-error"),e.open({where:document.body,url:nW(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:eW,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});let o=$c(n,"network-request-failed"),a=ji().setTimeout(()=>{s(o)},J7.get());function c(){ji().clearTimeout(a),i(r)}r.ping(c).then(c,()=>{s(o)})}))}var iW={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},sW=500,oW=600,aW="_blank",cW="http://localhost",Zv=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function lW(n,e,t,r=sW,i=oW){let s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",c=Object.assign(Object.assign({},iW),{width:r.toString(),height:i.toString(),top:s,left:o}),d=yn().toLowerCase();t&&(a=q2(d)?aW:t),$2(d)&&(e=e||cW,c.scrollbars="yes");let h=Object.entries(c).reduce((y,[E,k])=>`${y}${E}=${k},`,"");if(n7(d)&&a!=="_self")return uW(e||"",a),new Zv(null);let p=window.open(e||"",a,h);Ee(p,n,"popup-blocked");try{p.focus()}catch{}return new Zv(p)}function uW(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var dW="__/auth/handler",hW="emulator/auth/handler",fW=encodeURIComponent("fac");async function k2(n,e,t,r,i,s){Ee(n.config.authDomain,n,"auth-domain-config-required"),Ee(n.config.apiKey,n,"invalid-api-key");let o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:ea,eventId:i};if(e instanceof Qv){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",wO(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(let[h,p]of Object.entries(s||{}))o[h]=p}if(e instanceof oT){let h=e.getScopes().filter(p=>p!=="");h.length>0&&(o.scopes=h.join(","))}n.tenantId&&(o.tid=n.tenantId);let a=o;for(let h of Object.keys(a))a[h]===void 0&&delete a[h];let c=await n._getAppCheckToken(),d=c?`#${fW}=${encodeURIComponent(c)}`:"";return`${pW(n)}?${Kf(a).slice(1)}${d}`}function pW({config:n}){return n.emulator?mT(n,hW):`https://${n.authDomain}/${dW}`}var XC="webStorageSupport",fT=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=AT,this._completeRedirectFn=j7,this._overrideRedirectResult=V7}async _openPopup(e,t,r,i){var s;la((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let o=await k2(e,t,r,ZC(),i);return lW(e,o,tF())}async _openRedirect(e,t,r,i){await this._originValidation(e);let s=await k2(e,t,r,ZC(),i);return I7(s),new Promise(()=>{})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(la(s,"If manager is not set, promise should be"),s)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){let t=await rW(e),r=new hT(e);return t.register("authEvent",i=>(Ee(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(XC,{type:XC},i=>{var s;let o=(s=i?.[0])===null||s===void 0?void 0:s[XC];o!==void 0&&t(!!o),ca(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=G7(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Q2()||H2()||IT()}},aF=fT;var N2="@firebase/auth",M2="1.10.8";var pT=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ee(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function gW(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function mW(n){ii(new qn("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;Ee(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:o,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Y2(n)},d=new sT(r,i,s,c);return l7(d,t),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),ii(new qn("auth-internal",e=>{let t=ET(e.getProvider("auth").getImmediate());return(r=>new pT(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),xt(N2,M2,gW(n)),xt(N2,M2,"esm2017")}var yW=300,vW=pC("authIdTokenMaxAge")||yW,P2=null,_W=n=>async e=>{let t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>vW)return;let i=t?.token;P2!==i&&(P2=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function xT(n=Vc()){let e=$u(n,"auth");if(e.isInitialized())return e.getImmediate();let t=CT(n,{popupRedirectResolver:aF,persistence:[sF,eF,AT]}),r=pC("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let s=new URL(r,location.origin);if(location.origin===s.origin){let o=_W(s.toString());DT(t,o,()=>o(t.currentUser)),ST(t,a=>o(a))}}let i=hC("auth");return i&&TT(t,`http://${i}`),t}function wW(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}o7({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let s=$c("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",wW().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});mW("Browser");var cF="auth",hp=class{constructor(e){return e}},fp=class{constructor(){return qu(cF)}};var RT=new ce("angularfire2.auth-instances");function fK(n,e){let t=Jf(cF,n,e);return t&&new hp(t)}function pK(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new hp(r)}}var gK={provide:fp,deps:[[new lr,RT]]},mK={provide:hp,useFactory:fK,deps:[[new lr,RT],xs]};function lF(n,...e){return xt("angularfire",ta.full,"auth"),sr([mK,gK,{provide:RT,useFactory:pK(n),multi:!0,deps:[_t,Mt,na,Uc,[new lr,zu],...e]}])}var uF=Sn(xT,!0);var dF=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},hF={};var Os,kT;(function(){var n;function e(T,_){function I(){}I.prototype=_.prototype,T.F=_.prototype,T.prototype=new I,T.prototype.constructor=T,T.D=function(C,b,A){for(var w=Array(arguments.length-2),vt=2;vt<arguments.length;vt++)w[vt-2]=arguments[vt];return _.prototype[b].apply(C,w)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(T,_,I){I||(I=0);let C=Array(16);if(typeof _=="string")for(var b=0;b<16;++b)C[b]=_.charCodeAt(I++)|_.charCodeAt(I++)<<8|_.charCodeAt(I++)<<16|_.charCodeAt(I++)<<24;else for(b=0;b<16;++b)C[b]=_[I++]|_[I++]<<8|_[I++]<<16|_[I++]<<24;_=T.g[0],I=T.g[1],b=T.g[2];let A=T.g[3],w;w=_+(A^I&(b^A))+C[0]+3614090360&4294967295,_=I+(w<<7&4294967295|w>>>25),w=A+(b^_&(I^b))+C[1]+3905402710&4294967295,A=_+(w<<12&4294967295|w>>>20),w=b+(I^A&(_^I))+C[2]+606105819&4294967295,b=A+(w<<17&4294967295|w>>>15),w=I+(_^b&(A^_))+C[3]+3250441966&4294967295,I=b+(w<<22&4294967295|w>>>10),w=_+(A^I&(b^A))+C[4]+4118548399&4294967295,_=I+(w<<7&4294967295|w>>>25),w=A+(b^_&(I^b))+C[5]+1200080426&4294967295,A=_+(w<<12&4294967295|w>>>20),w=b+(I^A&(_^I))+C[6]+2821735955&4294967295,b=A+(w<<17&4294967295|w>>>15),w=I+(_^b&(A^_))+C[7]+4249261313&4294967295,I=b+(w<<22&4294967295|w>>>10),w=_+(A^I&(b^A))+C[8]+1770035416&4294967295,_=I+(w<<7&4294967295|w>>>25),w=A+(b^_&(I^b))+C[9]+2336552879&4294967295,A=_+(w<<12&4294967295|w>>>20),w=b+(I^A&(_^I))+C[10]+4294925233&4294967295,b=A+(w<<17&4294967295|w>>>15),w=I+(_^b&(A^_))+C[11]+2304563134&4294967295,I=b+(w<<22&4294967295|w>>>10),w=_+(A^I&(b^A))+C[12]+1804603682&4294967295,_=I+(w<<7&4294967295|w>>>25),w=A+(b^_&(I^b))+C[13]+4254626195&4294967295,A=_+(w<<12&4294967295|w>>>20),w=b+(I^A&(_^I))+C[14]+2792965006&4294967295,b=A+(w<<17&4294967295|w>>>15),w=I+(_^b&(A^_))+C[15]+1236535329&4294967295,I=b+(w<<22&4294967295|w>>>10),w=_+(b^A&(I^b))+C[1]+4129170786&4294967295,_=I+(w<<5&4294967295|w>>>27),w=A+(I^b&(_^I))+C[6]+3225465664&4294967295,A=_+(w<<9&4294967295|w>>>23),w=b+(_^I&(A^_))+C[11]+643717713&4294967295,b=A+(w<<14&4294967295|w>>>18),w=I+(A^_&(b^A))+C[0]+3921069994&4294967295,I=b+(w<<20&4294967295|w>>>12),w=_+(b^A&(I^b))+C[5]+3593408605&4294967295,_=I+(w<<5&4294967295|w>>>27),w=A+(I^b&(_^I))+C[10]+38016083&4294967295,A=_+(w<<9&4294967295|w>>>23),w=b+(_^I&(A^_))+C[15]+3634488961&4294967295,b=A+(w<<14&4294967295|w>>>18),w=I+(A^_&(b^A))+C[4]+3889429448&4294967295,I=b+(w<<20&4294967295|w>>>12),w=_+(b^A&(I^b))+C[9]+568446438&4294967295,_=I+(w<<5&4294967295|w>>>27),w=A+(I^b&(_^I))+C[14]+3275163606&4294967295,A=_+(w<<9&4294967295|w>>>23),w=b+(_^I&(A^_))+C[3]+4107603335&4294967295,b=A+(w<<14&4294967295|w>>>18),w=I+(A^_&(b^A))+C[8]+1163531501&4294967295,I=b+(w<<20&4294967295|w>>>12),w=_+(b^A&(I^b))+C[13]+2850285829&4294967295,_=I+(w<<5&4294967295|w>>>27),w=A+(I^b&(_^I))+C[2]+4243563512&4294967295,A=_+(w<<9&4294967295|w>>>23),w=b+(_^I&(A^_))+C[7]+1735328473&4294967295,b=A+(w<<14&4294967295|w>>>18),w=I+(A^_&(b^A))+C[12]+2368359562&4294967295,I=b+(w<<20&4294967295|w>>>12),w=_+(I^b^A)+C[5]+4294588738&4294967295,_=I+(w<<4&4294967295|w>>>28),w=A+(_^I^b)+C[8]+2272392833&4294967295,A=_+(w<<11&4294967295|w>>>21),w=b+(A^_^I)+C[11]+1839030562&4294967295,b=A+(w<<16&4294967295|w>>>16),w=I+(b^A^_)+C[14]+4259657740&4294967295,I=b+(w<<23&4294967295|w>>>9),w=_+(I^b^A)+C[1]+2763975236&4294967295,_=I+(w<<4&4294967295|w>>>28),w=A+(_^I^b)+C[4]+1272893353&4294967295,A=_+(w<<11&4294967295|w>>>21),w=b+(A^_^I)+C[7]+4139469664&4294967295,b=A+(w<<16&4294967295|w>>>16),w=I+(b^A^_)+C[10]+3200236656&4294967295,I=b+(w<<23&4294967295|w>>>9),w=_+(I^b^A)+C[13]+681279174&4294967295,_=I+(w<<4&4294967295|w>>>28),w=A+(_^I^b)+C[0]+3936430074&4294967295,A=_+(w<<11&4294967295|w>>>21),w=b+(A^_^I)+C[3]+3572445317&4294967295,b=A+(w<<16&4294967295|w>>>16),w=I+(b^A^_)+C[6]+76029189&4294967295,I=b+(w<<23&4294967295|w>>>9),w=_+(I^b^A)+C[9]+3654602809&4294967295,_=I+(w<<4&4294967295|w>>>28),w=A+(_^I^b)+C[12]+3873151461&4294967295,A=_+(w<<11&4294967295|w>>>21),w=b+(A^_^I)+C[15]+530742520&4294967295,b=A+(w<<16&4294967295|w>>>16),w=I+(b^A^_)+C[2]+3299628645&4294967295,I=b+(w<<23&4294967295|w>>>9),w=_+(b^(I|~A))+C[0]+4096336452&4294967295,_=I+(w<<6&4294967295|w>>>26),w=A+(I^(_|~b))+C[7]+1126891415&4294967295,A=_+(w<<10&4294967295|w>>>22),w=b+(_^(A|~I))+C[14]+2878612391&4294967295,b=A+(w<<15&4294967295|w>>>17),w=I+(A^(b|~_))+C[5]+4237533241&4294967295,I=b+(w<<21&4294967295|w>>>11),w=_+(b^(I|~A))+C[12]+1700485571&4294967295,_=I+(w<<6&4294967295|w>>>26),w=A+(I^(_|~b))+C[3]+2399980690&4294967295,A=_+(w<<10&4294967295|w>>>22),w=b+(_^(A|~I))+C[10]+4293915773&4294967295,b=A+(w<<15&4294967295|w>>>17),w=I+(A^(b|~_))+C[1]+2240044497&4294967295,I=b+(w<<21&4294967295|w>>>11),w=_+(b^(I|~A))+C[8]+1873313359&4294967295,_=I+(w<<6&4294967295|w>>>26),w=A+(I^(_|~b))+C[15]+4264355552&4294967295,A=_+(w<<10&4294967295|w>>>22),w=b+(_^(A|~I))+C[6]+2734768916&4294967295,b=A+(w<<15&4294967295|w>>>17),w=I+(A^(b|~_))+C[13]+1309151649&4294967295,I=b+(w<<21&4294967295|w>>>11),w=_+(b^(I|~A))+C[4]+4149444226&4294967295,_=I+(w<<6&4294967295|w>>>26),w=A+(I^(_|~b))+C[11]+3174756917&4294967295,A=_+(w<<10&4294967295|w>>>22),w=b+(_^(A|~I))+C[2]+718787259&4294967295,b=A+(w<<15&4294967295|w>>>17),w=I+(A^(b|~_))+C[9]+3951481745&4294967295,T.g[0]=T.g[0]+_&4294967295,T.g[1]=T.g[1]+(b+(w<<21&4294967295|w>>>11))&4294967295,T.g[2]=T.g[2]+b&4294967295,T.g[3]=T.g[3]+A&4294967295}r.prototype.v=function(T,_){_===void 0&&(_=T.length);let I=_-this.blockSize,C=this.C,b=this.h,A=0;for(;A<_;){if(b==0)for(;A<=I;)i(this,T,A),A+=this.blockSize;if(typeof T=="string"){for(;A<_;)if(C[b++]=T.charCodeAt(A++),b==this.blockSize){i(this,C),b=0;break}}else for(;A<_;)if(C[b++]=T[A++],b==this.blockSize){i(this,C),b=0;break}}this.h=b,this.o+=_},r.prototype.A=function(){var T=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);T[0]=128;for(var _=1;_<T.length-8;++_)T[_]=0;_=this.o*8;for(var I=T.length-8;I<T.length;++I)T[I]=_&255,_/=256;for(this.v(T),T=Array(16),_=0,I=0;I<4;++I)for(let C=0;C<32;C+=8)T[_++]=this.g[I]>>>C&255;return T};function s(T,_){var I=a;return Object.prototype.hasOwnProperty.call(I,T)?I[T]:I[T]=_(T)}function o(T,_){this.h=_;let I=[],C=!0;for(let b=T.length-1;b>=0;b--){let A=T[b]|0;C&&A==_||(I[b]=A,C=!1)}this.g=I}var a={};function c(T){return-128<=T&&T<128?s(T,function(_){return new o([_|0],_<0?-1:0)}):new o([T|0],T<0?-1:0)}function d(T){if(isNaN(T)||!isFinite(T))return p;if(T<0)return M(d(-T));let _=[],I=1;for(let C=0;T>=I;C++)_[C]=T/I|0,I*=4294967296;return new o(_,0)}function h(T,_){if(T.length==0)throw Error("number format error: empty string");if(_=_||10,_<2||36<_)throw Error("radix out of range: "+_);if(T.charAt(0)=="-")return M(h(T.substring(1),_));if(T.indexOf("-")>=0)throw Error('number format error: interior "-" character');let I=d(Math.pow(_,8)),C=p;for(let A=0;A<T.length;A+=8){var b=Math.min(8,T.length-A);let w=parseInt(T.substring(A,A+b),_);b<8?(b=d(Math.pow(_,b)),C=C.j(b).add(d(w))):(C=C.j(I),C=C.add(d(w)))}return C}var p=c(0),y=c(1),E=c(16777216);n=o.prototype,n.m=function(){if(P(this))return-M(this).m();let T=0,_=1;for(let I=0;I<this.g.length;I++){let C=this.i(I);T+=(C>=0?C:4294967296+C)*_,_*=4294967296}return T},n.toString=function(T){if(T=T||10,T<2||36<T)throw Error("radix out of range: "+T);if(k(this))return"0";if(P(this))return"-"+M(this).toString(T);let _=d(Math.pow(T,6));var I=this;let C="";for(;;){let b=De(I,_).g;I=H(I,b.j(_));let A=((I.g.length>0?I.g[0]:I.h)>>>0).toString(T);if(I=b,k(I))return A+C;for(;A.length<6;)A="0"+A;C=A+C}},n.i=function(T){return T<0?0:T<this.g.length?this.g[T]:this.h};function k(T){if(T.h!=0)return!1;for(let _=0;_<T.g.length;_++)if(T.g[_]!=0)return!1;return!0}function P(T){return T.h==-1}n.l=function(T){return T=H(this,T),P(T)?-1:k(T)?0:1};function M(T){let _=T.g.length,I=[];for(let C=0;C<_;C++)I[C]=~T.g[C];return new o(I,~T.h).add(y)}n.abs=function(){return P(this)?M(this):this},n.add=function(T){let _=Math.max(this.g.length,T.g.length),I=[],C=0;for(let b=0;b<=_;b++){let A=C+(this.i(b)&65535)+(T.i(b)&65535),w=(A>>>16)+(this.i(b)>>>16)+(T.i(b)>>>16);C=w>>>16,A&=65535,w&=65535,I[b]=w<<16|A}return new o(I,I[I.length-1]&-2147483648?-1:0)};function H(T,_){return T.add(M(_))}n.j=function(T){if(k(this)||k(T))return p;if(P(this))return P(T)?M(this).j(M(T)):M(M(this).j(T));if(P(T))return M(this.j(M(T)));if(this.l(E)<0&&T.l(E)<0)return d(this.m()*T.m());let _=this.g.length+T.g.length,I=[];for(var C=0;C<2*_;C++)I[C]=0;for(C=0;C<this.g.length;C++)for(let b=0;b<T.g.length;b++){let A=this.i(C)>>>16,w=this.i(C)&65535,vt=T.i(b)>>>16,zn=T.i(b)&65535;I[2*C+2*b]+=w*zn,Y(I,2*C+2*b),I[2*C+2*b+1]+=A*zn,Y(I,2*C+2*b+1),I[2*C+2*b+1]+=w*vt,Y(I,2*C+2*b+1),I[2*C+2*b+2]+=A*vt,Y(I,2*C+2*b+2)}for(T=0;T<_;T++)I[T]=I[2*T+1]<<16|I[2*T];for(T=_;T<2*_;T++)I[T]=0;return new o(I,0)};function Y(T,_){for(;(T[_]&65535)!=T[_];)T[_+1]+=T[_]>>>16,T[_]&=65535,_++}function ee(T,_){this.g=T,this.h=_}function De(T,_){if(k(_))throw Error("division by zero");if(k(T))return new ee(p,p);if(P(T))return _=De(M(T),_),new ee(M(_.g),M(_.h));if(P(_))return _=De(T,M(_)),new ee(M(_.g),_.h);if(T.g.length>30){if(P(T)||P(_))throw Error("slowDivide_ only works with positive integers.");for(var I=y,C=_;C.l(T)<=0;)I=Ze(I),C=Ze(C);var b=ve(I,1),A=ve(C,1);for(C=ve(C,2),I=ve(I,2);!k(C);){var w=A.add(C);w.l(T)<=0&&(b=b.add(I),A=w),C=ve(C,1),I=ve(I,1)}return _=H(T,b.j(_)),new ee(b,_)}for(b=p;T.l(_)>=0;){for(I=Math.max(1,Math.floor(T.m()/_.m())),C=Math.ceil(Math.log(I)/Math.LN2),C=C<=48?1:Math.pow(2,C-48),A=d(I),w=A.j(_);P(w)||w.l(T)>0;)I-=C,A=d(I),w=A.j(_);k(A)&&(A=y),b=b.add(A),T=H(T,w)}return new ee(b,T)}n.B=function(T){return De(this,T).h},n.and=function(T){let _=Math.max(this.g.length,T.g.length),I=[];for(let C=0;C<_;C++)I[C]=this.i(C)&T.i(C);return new o(I,this.h&T.h)},n.or=function(T){let _=Math.max(this.g.length,T.g.length),I=[];for(let C=0;C<_;C++)I[C]=this.i(C)|T.i(C);return new o(I,this.h|T.h)},n.xor=function(T){let _=Math.max(this.g.length,T.g.length),I=[];for(let C=0;C<_;C++)I[C]=this.i(C)^T.i(C);return new o(I,this.h^T.h)};function Ze(T){let _=T.g.length+1,I=[];for(let C=0;C<_;C++)I[C]=T.i(C)<<1|T.i(C-1)>>>31;return new o(I,T.h)}function ve(T,_){let I=_>>5;_%=32;let C=T.g.length-I,b=[];for(let A=0;A<C;A++)b[A]=_>0?T.i(A+I)>>>_|T.i(A+I+1)<<32-_:T.i(A+I);return new o(b,T.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,kT=hF.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=h,Os=hF.Integer=o}).apply(typeof dF<"u"?dF:typeof self<"u"?self:typeof window<"u"?window:{});var t_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Fs={};var NT,yK,Qu,MT,pp,n_,PT,OT,FT;(function(){var n,e=Object.defineProperty;function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof t_=="object"&&t_];for(var g=0;g<u.length;++g){var v=u[g];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var r=t(this);function i(u,g){if(g)e:{var v=r;u=u.split(".");for(var D=0;D<u.length-1;D++){var O=u[D];if(!(O in v))break e;v=v[O]}u=u[u.length-1],D=v[u],g=g(D),g!=D&&g!=null&&e(v,u,{configurable:!0,writable:!0,value:g})}}i("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(u){return u||function(g){var v=[],D;for(D in g)Object.prototype.hasOwnProperty.call(g,D)&&v.push([D,g[D]]);return v}});var s=s||{},o=this||self;function a(u){var g=typeof u;return g=="object"&&u!=null||g=="function"}function c(u,g,v){return u.call.apply(u.bind,arguments)}function d(u,g,v){return d=c,d.apply(null,arguments)}function h(u,g){var v=Array.prototype.slice.call(arguments,1);return function(){var D=v.slice();return D.push.apply(D,arguments),u.apply(this,D)}}function p(u,g){function v(){}v.prototype=g.prototype,u.Z=g.prototype,u.prototype=new v,u.prototype.constructor=u,u.Ob=function(D,O,L){for(var J=Array(arguments.length-2),we=2;we<arguments.length;we++)J[we-2]=arguments[we];return g.prototype[O].apply(D,J)}}var y=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function E(u){let g=u.length;if(g>0){let v=Array(g);for(let D=0;D<g;D++)v[D]=u[D];return v}return[]}function k(u,g){for(let D=1;D<arguments.length;D++){let O=arguments[D];var v=typeof O;if(v=v!="object"?v:O?Array.isArray(O)?"array":v:"null",v=="array"||v=="object"&&typeof O.length=="number"){v=u.length||0;let L=O.length||0;u.length=v+L;for(let J=0;J<L;J++)u[v+J]=O[J]}else u.push(O)}}class P{constructor(g,v){this.i=g,this.j=v,this.h=0,this.g=null}get(){let g;return this.h>0?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function M(u){o.setTimeout(()=>{throw u},0)}function H(){var u=T;let g=null;return u.g&&(g=u.g,u.g=u.g.next,u.g||(u.h=null),g.next=null),g}class Y{constructor(){this.h=this.g=null}add(g,v){let D=ee.get();D.set(g,v),this.h?this.h.next=D:this.g=D,this.h=D}}var ee=new P(()=>new De,u=>u.reset());class De{constructor(){this.next=this.g=this.h=null}set(g,v){this.h=g,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let Ze,ve=!1,T=new Y,_=()=>{let u=Promise.resolve(void 0);Ze=()=>{u.then(I)}};function I(){for(var u;u=H();){try{u.h.call(u.g)}catch(v){M(v)}var g=ee;g.j(u),g.h<100&&(g.h++,u.next=g.g,g.g=u)}ve=!1}function C(){this.u=this.u,this.C=this.C}C.prototype.u=!1,C.prototype.dispose=function(){this.u||(this.u=!0,this.N())},C.prototype[Symbol.dispose]=function(){this.dispose()},C.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function b(u,g){this.type=u,this.g=this.target=g,this.defaultPrevented=!1}b.prototype.h=function(){this.defaultPrevented=!0};var A=(function(){if(!o.addEventListener||!Object.defineProperty)return!1;var u=!1,g=Object.defineProperty({},"passive",{get:function(){u=!0}});try{let v=()=>{};o.addEventListener("test",v,g),o.removeEventListener("test",v,g)}catch{}return u})();function w(u){return/^[\s\xa0]*$/.test(u)}function vt(u,g){b.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,g)}p(vt,b),vt.prototype.init=function(u,g){let v=this.type=u.type,D=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=g,g=u.relatedTarget,g||(v=="mouseover"?g=u.fromElement:v=="mouseout"&&(g=u.toElement)),this.relatedTarget=g,D?(this.clientX=D.clientX!==void 0?D.clientX:D.pageX,this.clientY=D.clientY!==void 0?D.clientY:D.pageY,this.screenX=D.screenX||0,this.screenY=D.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&vt.Z.h.call(this)},vt.prototype.h=function(){vt.Z.h.call(this);let u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var zn="closure_listenable_"+(Math.random()*1e6|0),vw=0;function Oa(u,g,v,D,O){this.listener=u,this.proxy=null,this.src=g,this.type=v,this.capture=!!D,this.ha=O,this.key=++vw,this.da=this.fa=!1}function hi(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function io(u,g,v){for(let D in u)g.call(v,u[D],D,u)}function pg(u,g){for(let v in u)g.call(void 0,u[v],v,u)}function gg(u){let g={};for(let v in u)g[v]=u[v];return g}let Vr="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Zt(u,g){let v,D;for(let O=1;O<arguments.length;O++){D=arguments[O];for(v in D)u[v]=D[v];for(let L=0;L<Vr.length;L++)v=Vr[L],Object.prototype.hasOwnProperty.call(D,v)&&(u[v]=D[v])}}function _l(u){this.src=u,this.g={},this.h=0}_l.prototype.add=function(u,g,v,D,O){let L=u.toString();u=this.g[L],u||(u=this.g[L]=[],this.h++);let J=rh(u,g,D,O);return J>-1?(g=u[J],v||(g.fa=!1)):(g=new Oa(g,this.src,L,!!D,O),g.fa=v,u.push(g)),g};function ns(u,g){let v=g.type;if(v in u.g){var D=u.g[v],O=Array.prototype.indexOf.call(D,g,void 0),L;(L=O>=0)&&Array.prototype.splice.call(D,O,1),L&&(hi(g),u.g[v].length==0&&(delete u.g[v],u.h--))}}function rh(u,g,v,D){for(let O=0;O<u.length;++O){let L=u[O];if(!L.da&&L.listener==g&&L.capture==!!v&&L.ha==D)return O}return-1}var rs="closure_lm_"+(Math.random()*1e6|0),ih={};function mg(u,g,v,D,O){if(D&&D.once)return Il(u,g,v,D,O);if(Array.isArray(g)){for(let L=0;L<g.length;L++)mg(u,g[L],v,D,O);return null}return v=Tl(v),u&&u[zn]?u.J(g,v,a(D)?!!D.capture:!!D,O):Fa(u,g,v,!1,D,O)}function Fa(u,g,v,D,O,L){if(!g)throw Error("Invalid event type");let J=a(O)?!!O.capture:!!O,we=Cl(u);if(we||(u[rs]=we=new _l(u)),v=we.add(g,v,D,J,L),v.proxy)return v;if(D=wl(),v.proxy=D,D.src=u,D.listener=v,u.addEventListener)A||(O=J),O===void 0&&(O=!1),u.addEventListener(g.toString(),D,O);else if(u.attachEvent)u.attachEvent(bl(g.toString()),D);else if(u.addListener&&u.removeListener)u.addListener(D);else throw Error("addEventListener and attachEvent are unavailable.");return v}function wl(){function u(v){return g.call(u.src,u.listener,v)}let g=yg;return u}function Il(u,g,v,D,O){if(Array.isArray(g)){for(let L=0;L<g.length;L++)Il(u,g[L],v,D,O);return null}return v=Tl(v),u&&u[zn]?u.K(g,v,a(D)?!!D.capture:!!D,O):Fa(u,g,v,!0,D,O)}function El(u,g,v,D,O){if(Array.isArray(g))for(var L=0;L<g.length;L++)El(u,g[L],v,D,O);else D=a(D)?!!D.capture:!!D,v=Tl(v),u&&u[zn]?(u=u.i,L=String(g).toString(),L in u.g&&(g=u.g[L],v=rh(g,v,D,O),v>-1&&(hi(g[v]),Array.prototype.splice.call(g,v,1),g.length==0&&(delete u.g[L],u.h--)))):u&&(u=Cl(u))&&(g=u.g[g.toString()],u=-1,g&&(u=rh(g,v,D,O)),(v=u>-1?g[u]:null)&&Va(v))}function Va(u){if(typeof u!="number"&&u&&!u.da){var g=u.src;if(g&&g[zn])ns(g.i,u);else{var v=u.type,D=u.proxy;g.removeEventListener?g.removeEventListener(v,D,u.capture):g.detachEvent?g.detachEvent(bl(v),D):g.addListener&&g.removeListener&&g.removeListener(D),(v=Cl(g))?(ns(v,u),v.h==0&&(v.src=null,g[rs]=null)):hi(u)}}}function bl(u){return u in ih?ih[u]:ih[u]="on"+u}function yg(u,g){if(u.da)u=!0;else{g=new vt(g,this);let v=u.listener,D=u.ha||u.src;u.fa&&Va(u),u=v.call(D,g)}return u}function Cl(u){return u=u[rs],u instanceof _l?u:null}var sh="__closure_events_fn_"+(Math.random()*1e9>>>0);function Tl(u){return typeof u=="function"?u:(u[sh]||(u[sh]=function(g){return u.handleEvent(g)}),u[sh])}function en(){C.call(this),this.i=new _l(this),this.M=this,this.G=null}p(en,C),en.prototype[zn]=!0,en.prototype.removeEventListener=function(u,g,v,D){El(this,u,g,v,D)};function tn(u,g){var v,D=u.G;if(D)for(v=[];D;D=D.G)v.push(D);if(u=u.M,D=g.type||g,typeof g=="string")g=new b(g,u);else if(g instanceof b)g.target=g.target||u;else{var O=g;g=new b(D,u),Zt(g,O)}O=!0;let L,J;if(v)for(J=v.length-1;J>=0;J--)L=g.g=v[J],O=La(L,D,!0,g)&&O;if(L=g.g=u,O=La(L,D,!0,g)&&O,O=La(L,D,!1,g)&&O,v)for(J=0;J<v.length;J++)L=g.g=v[J],O=La(L,D,!1,g)&&O}en.prototype.N=function(){if(en.Z.N.call(this),this.i){var u=this.i;for(let g in u.g){let v=u.g[g];for(let D=0;D<v.length;D++)hi(v[D]);delete u.g[g],u.h--}}this.G=null},en.prototype.J=function(u,g,v,D){return this.i.add(String(u),g,!1,v,D)},en.prototype.K=function(u,g,v,D){return this.i.add(String(u),g,!0,v,D)};function La(u,g,v,D){if(g=u.i.g[String(g)],!g)return!0;g=g.concat();let O=!0;for(let L=0;L<g.length;++L){let J=g[L];if(J&&!J.da&&J.capture==v){let we=J.listener,l=J.ha||J.src;J.fa&&ns(u.i,J),O=we.call(l,D)!==!1&&O}}return O&&!D.defaultPrevented}function _w(u,g){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=d(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(g)>2147483647?-1:o.setTimeout(u,g||0)}function Sl(u){u.g=_w(()=>{u.g=null,u.i&&(u.i=!1,Sl(u))},u.l);let g=u.h;u.h=null,u.m.apply(null,g)}class oh extends C{constructor(g,v){super(),this.m=g,this.l=v,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:Sl(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function is(u){C.call(this),this.h=u,this.g={}}p(is,C);var nn=[];function fn(u){io(u.g,function(g,v){this.g.hasOwnProperty(v)&&Va(g)},u),u.g={}}is.prototype.N=function(){is.Z.N.call(this),fn(this)},is.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var so=o.JSON.stringify,vg=o.JSON.parse,_g=class{stringify(u){return o.JSON.stringify(u,void 0)}parse(u){return o.JSON.parse(u,void 0)}};function wg(){}function oo(){}var ao={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Dl(){b.call(this,"d")}p(Dl,b);function Ua(){b.call(this,"c")}p(Ua,b);var ss={},Ig=null;function co(){return Ig=Ig||new en}ss.Ia="serverreachability";function ah(u){b.call(this,ss.Ia,u)}p(ah,b);function lo(u){let g=co();tn(g,new ah(g))}ss.STAT_EVENT="statevent";function uo(u,g){b.call(this,ss.STAT_EVENT,u),this.stat=g}p(uo,b);function rn(u){let g=co();tn(g,new uo(g,u))}ss.Ja="timingevent";function Al(u,g){b.call(this,ss.Ja,u),this.size=g}p(Al,b);function tr(u,g){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){u()},g)}function ho(){this.g=!0}ho.prototype.ua=function(){this.g=!1};function xl(u,g,v,D,O,L){u.info(function(){if(u.g)if(L){var J="",we=L.split("&");for(let f=0;f<we.length;f++){var l=we[f].split("=");if(l.length>1){let m=l[0];l=l[1];let S=m.split("_");J=S.length>=2&&S[1]=="type"?J+(m+"="+l+"&"):J+(m+"=redacted&")}}}else J=null;else J=L;return"XMLHTTP REQ ("+D+") [attempt "+O+"]: "+g+`
`+v+`
`+J})}function Eg(u,g,v,D,O,L,J){u.info(function(){return"XMLHTTP RESP ("+D+") [ attempt "+O+"]: "+g+`
`+v+`
`+L+" "+J})}function vr(u,g,v,D){u.info(function(){return"XMLHTTP TEXT ("+g+"): "+bn(u,v)+(D?" "+D:"")})}function bg(u,g){u.info(function(){return"TIMEOUT: "+g})}ho.prototype.info=function(){};function bn(u,g){if(!u.g)return g;if(!g)return null;try{let L=JSON.parse(g);if(L){for(u=0;u<L.length;u++)if(Array.isArray(L[u])){var v=L[u];if(!(v.length<2)){var D=v[1];if(Array.isArray(D)&&!(D.length<1)){var O=D[0];if(O!="noop"&&O!="stop"&&O!="close")for(let J=1;J<D.length;J++)D[J]=""}}}}return so(L)}catch{return g}}var ja={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},fo={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},po;function ch(){}p(ch,wg),ch.prototype.g=function(){return new XMLHttpRequest},po=new ch;function Ba(u){return encodeURIComponent(String(u))}function go(u){var g=1;u=u.split(":");let v=[];for(;g>0&&u.length;)v.push(u.shift()),g--;return u.length&&v.push(u.join(":")),v}function fi(u,g,v,D){this.j=u,this.i=g,this.l=v,this.S=D||1,this.V=new is(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Cg}function Cg(){this.i=null,this.g="",this.h=!1}var $a={},Rl={};function Ha(u,g,v){u.M=1,u.A=Wa(nr(g)),u.u=v,u.R=!0,qa(u,null)}function qa(u,g){u.F=Date.now(),mo(u),u.B=nr(u.A);var v=u.B,D=u.S;Array.isArray(D)||(D=[String(D)]),Rg(v.i,"t",D),u.C=0,v=u.j.L,u.h=new Cg,u.g=Hl(u.j,v?g:null,!u.u),u.P>0&&(u.O=new oh(d(u.Y,u,u.g),u.P)),g=u.V,v=u.g,D=u.ba;var O="readystatechange";Array.isArray(O)||(O&&(nn[0]=O.toString()),O=nn);for(let L=0;L<O.length;L++){let J=mg(v,O[L],D||g.handleEvent,!1,g.h||g);if(!J)break;g.g[J.key]=J}g=u.J?gg(u.J):{},u.u?(u.v||(u.v="POST"),g["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,g)):(u.v="GET",u.g.ea(u.B,u.v,null,g)),lo(),xl(u.i,u.v,u.B,u.l,u.S,u.u)}fi.prototype.ba=function(u){u=u.target;let g=this.O;g&&Je(u)==3?g.j():this.Y(u)},fi.prototype.Y=function(u){try{if(u==this.g)e:{let we=Je(this.g),l=this.g.ya(),f=this.g.ca();if(!(we<3)&&(we!=3||this.g&&(this.h.h||this.g.la()||Vg(this.g)))){this.K||we!=4||l==7||(l==8||f<=0?lo(3):lo(2)),Nl(this);var g=this.g.ca();this.X=g;var v=pi(this);if(this.o=g==200,Eg(this.i,this.v,this.B,this.l,this.S,we,g),this.o){if(this.U&&!this.L){t:{if(this.g){var D,O=this.g;if((D=O.g?O.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(D)){var L=D;break t}}L=null}if(u=L)vr(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,vo(this,u);else{this.o=!1,this.m=3,rn(12),os(this),yo(this);break e}}if(this.R){u=!0;let m;for(;!this.K&&this.C<v.length;)if(m=Tg(this,v),m==Rl){we==4&&(this.m=4,rn(14),u=!1),vr(this.i,this.l,null,"[Incomplete Response]");break}else if(m==$a){this.m=4,rn(15),vr(this.i,this.l,v,"[Invalid Chunk]"),u=!1;break}else vr(this.i,this.l,m,null),vo(this,m);if(lh(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),we!=4||v.length!=0||this.h.h||(this.m=1,rn(16),u=!1),this.o=this.o&&u,!u)vr(this.i,this.l,v,"[Invalid Chunked Response]"),os(this),yo(this);else if(v.length>0&&!this.W){this.W=!0;var J=this.j;J.g==this&&J.aa&&!J.P&&(J.j.info("Great, no buffering proxy detected. Bytes received: "+v.length),jl(J),J.P=!0,rn(11))}}else vr(this.i,this.l,v,null),vo(this,v);we==4&&os(this),this.o&&!this.K&&(we==4?Eh(this.j,this):(this.o=!1,mo(this)))}else ww(this.g),g==400&&v.indexOf("Unknown SID")>0?(this.m=3,rn(12)):(this.m=0,rn(13)),os(this),yo(this)}}}catch{}finally{}};function pi(u){if(!lh(u))return u.g.la();let g=Vg(u.g);if(g==="")return"";let v="",D=g.length,O=Je(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return os(u),yo(u),"";u.h.i=new o.TextDecoder}for(let L=0;L<D;L++)u.h.h=!0,v+=u.h.i.decode(g[L],{stream:!(O&&L==D-1)});return g.length=0,u.h.g+=v,u.C=0,u.h.g}function lh(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function Tg(u,g){var v=u.C,D=g.indexOf(`
`,v);return D==-1?Rl:(v=Number(g.substring(v,D)),isNaN(v)?$a:(D+=1,D+v>g.length?Rl:(g=g.slice(D,D+v),u.C=D+v,g)))}fi.prototype.cancel=function(){this.K=!0,os(this)};function mo(u){u.T=Date.now()+u.H,kl(u,u.H)}function kl(u,g){if(u.D!=null)throw Error("WatchDog timer not null");u.D=tr(d(u.aa,u),g)}function Nl(u){u.D&&(o.clearTimeout(u.D),u.D=null)}fi.prototype.aa=function(){this.D=null;let u=Date.now();u-this.T>=0?(bg(this.i,this.B),this.M!=2&&(lo(),rn(17)),os(this),this.m=2,yo(this)):kl(this,this.T-u)};function yo(u){u.j.I==0||u.K||Eh(u.j,u)}function os(u){Nl(u);var g=u.O;g&&typeof g.dispose=="function"&&g.dispose(),u.O=null,fn(u.V),u.g&&(g=u.g,u.g=null,g.abort(),g.dispose())}function vo(u,g){try{var v=u.j;if(v.I!=0&&(v.g==u||za(v.h,u))){if(!u.L&&za(v.h,u)&&v.I==3){try{var D=v.Ba.g.parse(g)}catch{D=null}if(Array.isArray(D)&&D.length==3){var O=D;if(O[0]==0){e:if(!v.v){if(v.g)if(v.g.F+3e3<u.F)Bl(v),as(v);else break e;So(v),rn(18)}}else v.xa=O[1],0<v.xa-v.K&&O[2]<37500&&v.F&&v.A==0&&!v.C&&(v.C=tr(d(v.Va,v),6e3));gi(v.h)<=1&&v.ta&&(v.ta=void 0)}else yi(v,11)}else if((u.L||v.g==u)&&Bl(v),!w(g))for(O=v.Ba.g.parse(g),g=0;g<O.length;g++){let f=O[g],m=f[0];if(!(m<=v.K))if(v.K=m,f=f[1],v.I==2)if(f[0]=="c"){v.M=f[1],v.ba=f[2];let S=f[3];S!=null&&(v.ka=S,v.j.info("VER="+v.ka));let F=f[4];F!=null&&(v.za=F,v.j.info("SVER="+v.za));let U=f[5];U!=null&&typeof U=="number"&&U>0&&(D=1.5*U,v.O=D,v.j.info("backChannelRequestTimeoutMs_="+D)),D=v;let K=u.g;if(K){let Qe=K.g?K.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Qe){var L=D.h;L.g||Qe.indexOf("spdy")==-1&&Qe.indexOf("quic")==-1&&Qe.indexOf("h2")==-1||(L.j=L.l,L.g=new Set,L.h&&(uh(L,L.h),L.h=null))}if(D.G){let Nt=K.g?K.g.getResponseHeader("X-HTTP-Session-Id"):null;Nt&&(D.wa=Nt,lt(D.J,D.G,Nt))}}v.I=3,v.l&&v.l.ra(),v.aa&&(v.T=Date.now()-u.F,v.j.info("Handshake RTT: "+v.T+"ms")),D=v;var J=u;if(D.na=$l(D,D.L?D.ba:null,D.W),J.L){dh(D.h,J);var we=J,l=D.O;l&&(we.H=l),we.D&&(Nl(we),mo(we)),D.g=J}else Ul(D);v.i.length>0&&Wn(v)}else f[0]!="stop"&&f[0]!="close"||yi(v,7);else v.I==3&&(f[0]=="stop"||f[0]=="close"?f[0]=="stop"?yi(v,7):Ll(v):f[0]!="noop"&&v.l&&v.l.qa(f),v.A=0)}}lo(4)}catch{}}var Sg=class{constructor(u,g){this.g=u,this.map=g}};function Ml(u){this.l=u||10,o.PerformanceNavigationTiming?(u=o.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function _o(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function gi(u){return u.h?1:u.g?u.g.size:0}function za(u,g){return u.h?u.h==g:u.g?u.g.has(g):!1}function uh(u,g){u.g?u.g.add(g):u.h=g}function dh(u,g){u.h&&u.h==g?u.h=null:u.g&&u.g.has(g)&&u.g.delete(g)}Ml.prototype.cancel=function(){if(this.i=hh(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let u of this.g.values())u.cancel();this.g.clear()}};function hh(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let g=u.i;for(let v of u.g.values())g=g.concat(v.G);return g}return E(u.i)}var fh=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ph(u,g){if(u){u=u.split("&");for(let v=0;v<u.length;v++){let D=u[v].indexOf("="),O,L=null;D>=0?(O=u[v].substring(0,D),L=u[v].substring(D+1)):O=u[v],g(O,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function _r(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let g;u instanceof _r?(this.l=u.l,wo(this,u.j),this.o=u.o,this.g=u.g,Ga(this,u.u),this.h=u.h,gh(this,kg(u.i)),this.m=u.m):u&&(g=String(u).match(fh))?(this.l=!1,wo(this,g[1]||"",!0),this.o=Ka(g[2]||""),this.g=Ka(g[3]||"",!0),Ga(this,g[4]),this.h=Ka(g[5]||"",!0),gh(this,g[6]||"",!0),this.m=Ka(g[7]||"")):(this.l=!1,this.i=new Ur(null,this.l))}_r.prototype.toString=function(){let u=[];var g=this.j;g&&u.push(rr(g,Qa,!0),":");var v=this.g;return(v||g=="file")&&(u.push("//"),(g=this.o)&&u.push(rr(g,Qa,!0),"@"),u.push(Ba(v).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.u,v!=null&&u.push(":",String(v))),(v=this.h)&&(this.g&&v.charAt(0)!="/"&&u.push("/"),u.push(rr(v,v.charAt(0)=="/"?Dg:Pl,!0))),(v=this.i.toString())&&u.push("?",v),(v=this.m)&&u.push("#",rr(v,Ol)),u.join("")},_r.prototype.resolve=function(u){let g=nr(this),v=!!u.j;v?wo(g,u.j):v=!!u.o,v?g.o=u.o:v=!!u.g,v?g.g=u.g:v=u.u!=null;var D=u.h;if(v)Ga(g,u.u);else if(v=!!u.h){if(D.charAt(0)!="/")if(this.g&&!this.h)D="/"+D;else{var O=g.h.lastIndexOf("/");O!=-1&&(D=g.h.slice(0,O+1)+D)}if(O=D,O==".."||O==".")D="";else if(O.indexOf("./")!=-1||O.indexOf("/.")!=-1){D=O.lastIndexOf("/",0)==0,O=O.split("/");let L=[];for(let J=0;J<O.length;){let we=O[J++];we=="."?D&&J==O.length&&L.push(""):we==".."?((L.length>1||L.length==1&&L[0]!="")&&L.pop(),D&&J==O.length&&L.push("")):(L.push(we),D=!0)}D=L.join("/")}else D=O}return v?g.h=D:v=u.i.toString()!=="",v?gh(g,kg(u.i)):v=!!u.m,v&&(g.m=u.m),g};function nr(u){return new _r(u)}function wo(u,g,v){u.j=v?Ka(g,!0):g,u.j&&(u.j=u.j.replace(/:$/,""))}function Ga(u,g){if(g){if(g=Number(g),isNaN(g)||g<0)throw Error("Bad port number "+g);u.u=g}else u.u=null}function gh(u,g,v){g instanceof Ur?(u.i=g,Ya(u.i,u.l)):(v||(g=rr(g,ht)),u.i=new Ur(g,u.l))}function lt(u,g,v){u.i.set(g,v)}function Wa(u){return lt(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function Ka(u,g){return u?g?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function rr(u,g,v){return typeof u=="string"?(u=encodeURI(u).replace(g,Lr),v&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Lr(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Qa=/[#\/\?@]/g,Pl=/[#\?:]/g,Dg=/[#\?]/g,ht=/[#\?@]/g,Ol=/#/g;function Ur(u,g){this.h=this.g=null,this.i=u||null,this.j=!!g}function ir(u){u.g||(u.g=new Map,u.h=0,u.i&&ph(u.i,function(g,v){u.add(decodeURIComponent(g.replace(/\+/g," ")),v)}))}n=Ur.prototype,n.add=function(u,g){ir(this),this.i=null,u=Io(this,u);let v=this.g.get(u);return v||this.g.set(u,v=[]),v.push(g),this.h+=1,this};function Ag(u,g){ir(u),g=Io(u,g),u.g.has(g)&&(u.i=null,u.h-=u.g.get(g).length,u.g.delete(g))}function mh(u,g){return ir(u),g=Io(u,g),u.g.has(g)}n.forEach=function(u,g){ir(this),this.g.forEach(function(v,D){v.forEach(function(O){u.call(g,O,D,this)},this)},this)};function xg(u,g){ir(u);let v=[];if(typeof g=="string")mh(u,g)&&(v=v.concat(u.g.get(Io(u,g))));else for(u=Array.from(u.g.values()),g=0;g<u.length;g++)v=v.concat(u[g]);return v}n.set=function(u,g){return ir(this),this.i=null,u=Io(this,u),mh(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[g]),this.h+=1,this},n.get=function(u,g){return u?(u=xg(this,u),u.length>0?String(u[0]):g):g};function Rg(u,g,v){Ag(u,g),v.length>0&&(u.i=null,u.g.set(Io(u,g),E(v)),u.h+=v.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let u=[],g=Array.from(this.g.keys());for(let D=0;D<g.length;D++){var v=g[D];let O=Ba(v);v=xg(this,v);for(let L=0;L<v.length;L++){let J=O;v[L]!==""&&(J+="="+Ba(v[L])),u.push(J)}}return this.i=u.join("&")};function kg(u){let g=new Ur;return g.i=u.i,u.g&&(g.g=new Map(u.g),g.h=u.h),g}function Io(u,g){return g=String(g),u.j&&(g=g.toLowerCase()),g}function Ya(u,g){g&&!u.j&&(ir(u),u.i=null,u.g.forEach(function(v,D){let O=D.toLowerCase();D!=O&&(Ag(this,D),Rg(this,O,v))},u)),u.j=g}function mi(u,g){let v=new ho;if(o.Image){let D=new Image;D.onload=h(jr,v,"TestLoadImage: loaded",!0,g,D),D.onerror=h(jr,v,"TestLoadImage: error",!1,g,D),D.onabort=h(jr,v,"TestLoadImage: abort",!1,g,D),D.ontimeout=h(jr,v,"TestLoadImage: timeout",!1,g,D),o.setTimeout(function(){D.ontimeout&&D.ontimeout()},1e4),D.src=u}else g(!1)}function Ng(u,g){let v=new ho,D=new AbortController,O=setTimeout(()=>{D.abort(),jr(v,"TestPingServer: timeout",!1,g)},1e4);fetch(u,{signal:D.signal}).then(L=>{clearTimeout(O),L.ok?jr(v,"TestPingServer: ok",!0,g):jr(v,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(O),jr(v,"TestPingServer: error",!1,g)})}function jr(u,g,v,D,O){try{O&&(O.onload=null,O.onerror=null,O.onabort=null,O.ontimeout=null),D(v)}catch{}}function Mg(){this.g=new _g}function Br(u){this.i=u.Sb||null,this.h=u.ab||!1}p(Br,wg),Br.prototype.g=function(){return new Fl(this.i,this.h)};function Fl(u,g){en.call(this),this.H=u,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}p(Fl,en),n=Fl.prototype,n.open=function(u,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=g,this.readyState=1,Gn(this)},n.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;let g={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(g.body=u),(this.H||o).fetch(new Request(this.D,g)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ja(this)),this.readyState=0},n.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Gn(this)),this.g&&(this.readyState=3,Gn(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Pg(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function Pg(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}n.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var g=u.value?u.value:new Uint8Array(0);(g=this.B.decode(g,{stream:!u.done}))&&(this.response=this.responseText+=g)}u.done?Ja(this):Gn(this),this.readyState==3&&Pg(this)}},n.Oa=function(u){this.g&&(this.response=this.responseText=u,Ja(this))},n.Na=function(u){this.g&&(this.response=u,Ja(this))},n.ga=function(){this.g&&Ja(this)};function Ja(u){u.readyState=4,u.l=null,u.j=null,u.B=null,Gn(u)}n.setRequestHeader=function(u,g){this.A.append(u,g)},n.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let u=[],g=this.h.entries();for(var v=g.next();!v.done;)v=v.value,u.push(v[0]+": "+v[1]),v=g.next();return u.join(`\r
`)};function Gn(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Fl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Og(u){let g="";return io(u,function(v,D){g+=D,g+=":",g+=v,g+=`\r
`}),g}function yh(u,g,v){e:{for(D in v){var D=!1;break e}D=!0}D||(v=Og(v),typeof u=="string"?v!=null&&Ba(v):lt(u,g,v))}function ut(u){en.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}p(ut,en);var Vl=/^https?$/i,Fg=["POST","PUT"];n=ut.prototype,n.Fa=function(u){this.H=u},n.ea=function(u,g,v,D){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);g=g?g.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():po.g(),this.g.onreadystatechange=y(d(this.Ca,this));try{this.B=!0,this.g.open(g,String(u),!0),this.B=!1}catch(L){Eo(this,L);return}if(u=v||"",v=new Map(this.headers),D)if(Object.getPrototypeOf(D)===Object.prototype)for(var O in D)v.set(O,D[O]);else if(typeof D.keys=="function"&&typeof D.get=="function")for(let L of D.keys())v.set(L,D.get(L));else throw Error("Unknown input type for opt_headers: "+String(D));D=Array.from(v.keys()).find(L=>L.toLowerCase()=="content-type"),O=o.FormData&&u instanceof o.FormData,!(Array.prototype.indexOf.call(Fg,g,void 0)>=0)||D||O||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[L,J]of v)this.g.setRequestHeader(L,J);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(L){Eo(this,L)}};function Eo(u,g){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=g,u.o=5,bo(u),Co(u)}function bo(u){u.A||(u.A=!0,tn(u,"complete"),tn(u,"error"))}n.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,tn(this,"complete"),tn(this,"abort"),Co(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Co(this,!0)),ut.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?vh(this):this.Xa())},n.Xa=function(){vh(this)};function vh(u){if(u.h&&typeof s<"u"){if(u.v&&Je(u)==4)setTimeout(u.Ca.bind(u),0);else if(tn(u,"readystatechange"),Je(u)==4){u.h=!1;try{let L=u.ca();e:switch(L){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var v;if(!(v=g)){var D;if(D=L===0){let J=String(u.D).match(fh)[1]||null;!J&&o.self&&o.self.location&&(J=o.self.location.protocol.slice(0,-1)),D=!Vl.test(J?J.toLowerCase():"")}v=D}if(v)tn(u,"complete"),tn(u,"success");else{u.o=6;try{var O=Je(u)>2?u.g.statusText:""}catch{O=""}u.l=O+" ["+u.ca()+"]",bo(u)}}finally{Co(u)}}}}function Co(u,g){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);let v=u.g;u.g=null,g||tn(u,"ready");try{v.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function Je(u){return u.g?u.g.readyState:0}n.ca=function(){try{return Je(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(u){if(this.g){var g=this.g.responseText;return u&&g.indexOf(u)==0&&(g=g.substring(u.length)),vg(g)}};function Vg(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function ww(u){let g={};u=(u.g&&Je(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let D=0;D<u.length;D++){if(w(u[D]))continue;var v=go(u[D]);let O=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();let L=g[O]||[];g[O]=L,L.push(v)}pg(g,function(D){return D.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function To(u,g,v){return v&&v.internalChannelParams&&v.internalChannelParams[u]||g}function _h(u){this.za=0,this.i=[],this.j=new ho,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=To("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=To("baseRetryDelayMs",5e3,u),this.Za=To("retryDelaySeedMs",1e4,u),this.Ta=To("forwardChannelMaxRetries",2,u),this.va=To("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new Ml(u&&u.concurrentRequestLimit),this.Ba=new Mg,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=_h.prototype,n.ka=8,n.I=1,n.connect=function(u,g,v,D){rn(0),this.W=u,this.H=g||{},v&&D!==void 0&&(this.H.OSID=v,this.H.OAID=D),this.F=this.X,this.J=$l(this,null,this.W),Wn(this)};function Ll(u){if(wh(u),u.I==3){var g=u.V++,v=nr(u.J);if(lt(v,"SID",u.M),lt(v,"RID",g),lt(v,"TYPE","terminate"),$r(u,v),g=new fi(u,u.j,g),g.M=2,g.A=Wa(nr(v)),v=!1,o.navigator&&o.navigator.sendBeacon)try{v=o.navigator.sendBeacon(g.A.toString(),"")}catch{}!v&&o.Image&&(new Image().src=g.A,v=!0),v||(g.g=Hl(g.j,null),g.g.ea(g.A)),g.F=Date.now(),mo(g)}bh(u)}function as(u){u.g&&(jl(u),u.g.cancel(),u.g=null)}function wh(u){as(u),u.v&&(o.clearTimeout(u.v),u.v=null),Bl(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&o.clearTimeout(u.m),u.m=null)}function Wn(u){if(!_o(u.h)&&!u.m){u.m=!0;var g=u.Ea;Ze||_(),ve||(Ze(),ve=!0),T.add(g,u),u.D=0}}function Lg(u,g){return gi(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=g.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=tr(d(u.Ea,u,g),Do(u,u.D)),u.D++,!0)}n.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;let O=new fi(this,this.j,u),L=this.o;if(this.U&&(L?(L=gg(L),Zt(L,this.U)):L=this.U),this.u!==null||this.R||(O.J=L,L=null),this.S)e:{for(var g=0,v=0;v<this.i.length;v++){t:{var D=this.i[v];if("__data__"in D.map&&(D=D.map.__data__,typeof D=="string")){D=D.length;break t}D=void 0}if(D===void 0)break;if(g+=D,g>4096){g=v;break e}if(g===4096||v===this.i.length-1){g=v+1;break e}}g=1e3}else g=1e3;g=Ih(this,O,g),v=nr(this.J),lt(v,"RID",u),lt(v,"CVER",22),this.G&&lt(v,"X-HTTP-Session-Id",this.G),$r(this,v),L&&(this.R?g="headers="+Ba(Og(L))+"&"+g:this.u&&yh(v,this.u,L)),uh(this.h,O),this.Ra&&lt(v,"TYPE","init"),this.S?(lt(v,"$req",g),lt(v,"SID","null"),O.U=!0,Ha(O,v,null)):Ha(O,v,g),this.I=2}}else this.I==3&&(u?Ug(this,u):this.i.length==0||_o(this.h)||Ug(this))};function Ug(u,g){var v;g?v=g.l:v=u.V++;let D=nr(u.J);lt(D,"SID",u.M),lt(D,"RID",v),lt(D,"AID",u.K),$r(u,D),u.u&&u.o&&yh(D,u.u,u.o),v=new fi(u,u.j,v,u.D+1),u.u===null&&(v.J=u.o),g&&(u.i=g.G.concat(u.i)),g=Ih(u,v,1e3),v.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),uh(u.h,v),Ha(v,D,g)}function $r(u,g){u.H&&io(u.H,function(v,D){lt(g,D,v)}),u.l&&io({},function(v,D){lt(g,D,v)})}function Ih(u,g,v){v=Math.min(u.i.length,v);let D=u.l?d(u.l.Ka,u.l,u):null;e:{var O=u.i;let we=-1;for(;;){let l=["count="+v];we==-1?v>0?(we=O[0].g,l.push("ofs="+we)):we=0:l.push("ofs="+we);let f=!0;for(let m=0;m<v;m++){var L=O[m].g;let S=O[m].map;if(L-=we,L<0)we=Math.max(0,O[m].g-100),f=!1;else try{L="req"+L+"_"||"";try{var J=S instanceof Map?S:Object.entries(S);for(let[F,U]of J){let K=U;a(U)&&(K=so(U)),l.push(L+F+"="+encodeURIComponent(K))}}catch(F){throw l.push(L+"type="+encodeURIComponent("_badmap")),F}}catch{D&&D(S)}}if(f){J=l.join("&");break e}}J=void 0}return u=u.i.splice(0,v),g.G=u,J}function Ul(u){if(!u.g&&!u.v){u.Y=1;var g=u.Da;Ze||_(),ve||(Ze(),ve=!0),T.add(g,u),u.A=0}}function So(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=tr(d(u.Da,u),Do(u,u.A)),u.A++,!0)}n.Da=function(){if(this.v=null,Xa(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=tr(d(this.Wa,this),u)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,rn(10),as(this),Xa(this))};function jl(u){u.B!=null&&(o.clearTimeout(u.B),u.B=null)}function Xa(u){u.g=new fi(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var g=nr(u.na);lt(g,"RID","rpc"),lt(g,"SID",u.M),lt(g,"AID",u.K),lt(g,"CI",u.F?"0":"1"),!u.F&&u.ia&&lt(g,"TO",u.ia),lt(g,"TYPE","xmlhttp"),$r(u,g),u.u&&u.o&&yh(g,u.u,u.o),u.O&&(u.g.H=u.O);var v=u.g;u=u.ba,v.M=1,v.A=Wa(nr(g)),v.u=null,v.R=!0,qa(v,u)}n.Va=function(){this.C!=null&&(this.C=null,as(this),So(this),rn(19))};function Bl(u){u.C!=null&&(o.clearTimeout(u.C),u.C=null)}function Eh(u,g){var v=null;if(u.g==g){Bl(u),jl(u),u.g=null;var D=2}else if(za(u.h,g))v=g.G,dh(u.h,g),D=1;else return;if(u.I!=0){if(g.o)if(D==1){v=g.u?g.u.length:0,g=Date.now()-g.F;var O=u.D;D=co(),tn(D,new Al(D,v)),Wn(u)}else Ul(u);else if(O=g.m,O==3||O==0&&g.X>0||!(D==1&&Lg(u,g)||D==2&&So(u)))switch(v&&v.length>0&&(g=u.h,g.i=g.i.concat(v)),O){case 1:yi(u,5);break;case 4:yi(u,10);break;case 3:yi(u,6);break;default:yi(u,2)}}}function Do(u,g){let v=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(v*=2),v*g}function yi(u,g){if(u.j.info("Error code "+g),g==2){var v=d(u.bb,u),D=u.Ua;let O=!D;D=new _r(D||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||wo(D,"https"),Wa(D),O?mi(D.toString(),v):Ng(D.toString(),v)}else rn(2);u.I=0,u.l&&u.l.pa(g),bh(u),wh(u)}n.bb=function(u){u?(this.j.info("Successfully pinged google.com"),rn(2)):(this.j.info("Failed to ping google.com"),rn(1))};function bh(u){if(u.I=0,u.ja=[],u.l){let g=hh(u.h);(g.length!=0||u.i.length!=0)&&(k(u.ja,g),k(u.ja,u.i),u.h.i.length=0,E(u.i),u.i.length=0),u.l.oa()}}function $l(u,g,v){var D=v instanceof _r?nr(v):new _r(v);if(D.g!="")g&&(D.g=g+"."+D.g),Ga(D,D.u);else{var O=o.location;D=O.protocol,g=g?g+"."+O.hostname:O.hostname,O=+O.port;let L=new _r(null);D&&wo(L,D),g&&(L.g=g),O&&Ga(L,O),v&&(L.h=v),D=L}return v=u.G,g=u.wa,v&&g&&lt(D,v,g),lt(D,"VER",u.ka),$r(u,D),D}function Hl(u,g,v){if(g&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return g=u.Aa&&!u.ma?new ut(new Br({ab:v})):new ut(u.ma),g.Fa(u.L),g}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ch(){}n=Ch.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function cs(){}cs.prototype.g=function(u,g){return new An(u,g)};function An(u,g){en.call(this),this.g=new _h(g),this.l=u,this.h=g&&g.messageUrlParams||null,u=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(u?u["X-WebChannel-Content-Type"]=g.messageContentType:u={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.sa&&(u?u["X-WebChannel-Client-Profile"]=g.sa:u={"X-WebChannel-Client-Profile":g.sa}),this.g.U=u,(u=g&&g.Qb)&&!w(u)&&(this.g.u=u),this.A=g&&g.supportsCrossDomainXhr||!1,this.v=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!w(g)&&(this.g.G=g,u=this.h,u!==null&&g in u&&(u=this.h,g in u&&delete u[g])),this.j=new ls(this)}p(An,en),An.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},An.prototype.close=function(){Ll(this.g)},An.prototype.o=function(u){var g=this.g;if(typeof u=="string"){var v={};v.__data__=u,u=v}else this.v&&(v={},v.__data__=so(u),u=v);g.i.push(new Sg(g.Ya++,u)),g.I==3&&Wn(g)},An.prototype.N=function(){this.g.l=null,delete this.j,Ll(this.g),delete this.g,An.Z.N.call(this)};function Th(u){Dl.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var g=u.__sm__;if(g){e:{for(let v in g){u=v;break e}u=void 0}(this.i=u)&&(u=this.i,g=g!==null&&u in g?g[u]:void 0),this.data=g}else this.data=u}p(Th,Dl);function vi(){Ua.call(this),this.status=1}p(vi,Ua);function ls(u){this.g=u}p(ls,Ch),ls.prototype.ra=function(){tn(this.g,"a")},ls.prototype.qa=function(u){tn(this.g,new Th(u))},ls.prototype.pa=function(u){tn(this.g,new vi)},ls.prototype.oa=function(){tn(this.g,"b")},cs.prototype.createWebChannel=cs.prototype.g,An.prototype.send=An.prototype.o,An.prototype.open=An.prototype.m,An.prototype.close=An.prototype.close,FT=Fs.createWebChannelTransport=function(){return new cs},OT=Fs.getStatEventTarget=function(){return co()},PT=Fs.Event=ss,n_=Fs.Stat={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},ja.NO_ERROR=0,ja.TIMEOUT=8,ja.HTTP_ERROR=6,pp=Fs.ErrorCode=ja,fo.COMPLETE="complete",MT=Fs.EventType=fo,oo.EventType=ao,ao.OPEN="a",ao.CLOSE="b",ao.ERROR="c",ao.MESSAGE="d",en.prototype.listen=en.prototype.J,Qu=Fs.WebChannel=oo,yK=Fs.FetchXmlHttpFactory=Br,ut.prototype.listenOnce=ut.prototype.K,ut.prototype.getLastError=ut.prototype.Ha,ut.prototype.getLastErrorCode=ut.prototype.ya,ut.prototype.getStatus=ut.prototype.ca,ut.prototype.getResponseJson=ut.prototype.La,ut.prototype.getResponseText=ut.prototype.la,ut.prototype.send=ut.prototype.ea,ut.prototype.setWithCredentials=ut.prototype.Fa,NT=Fs.XhrIo=ut}).apply(typeof t_<"u"?t_:typeof self<"u"?self:typeof window<"u"?window:{});var fF="@firebase/firestore",pF="4.9.2";var vn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};vn.UNAUTHENTICATED=new vn(null),vn.GOOGLE_CREDENTIALS=new vn("google-credentials-uid"),vn.FIRST_PARTY=new vn("first-party-uid"),vn.MOCK_USER=new vn("mock-user");var _d="12.3.0";var Qc=new Wu("@firebase/firestore");function Yu(){return Qc.logLevel}function ie(n,...e){if(Qc.logLevel<=ze.DEBUG){let t=e.map(DD);Qc.debug(`Firestore (${_d}): ${n}`,...t)}}function js(n,...e){if(Qc.logLevel<=ze.ERROR){let t=e.map(DD);Qc.error(`Firestore (${_d}): ${n}`,...t)}}function id(n,...e){if(Qc.logLevel<=ze.WARN){let t=e.map(DD);Qc.warn(`Firestore (${_d}): ${n}`,...t)}}function DD(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function me(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,sV(n,r,t)}function sV(n,e,t){let r=`FIRESTORE (${_d}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw js(r),new Error(r)}function ot(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||sV(e,i,r)}function Te(n,e){return n}var z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},ne=class extends Rs{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Vs=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var l_=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},$T=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(vn.UNAUTHENTICATED))}shutdown(){}},HT=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},qT=class{constructor(e){this.t=e,this.currentUser=vn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ot(this.o===void 0,42304);let r=this.i,i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve(),s=new Vs;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Vs,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let c=s;e.enqueueRetryable(async()=>{await c.promise,await i(this.currentUser)})},a=c=>{ie("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(ie("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Vs)}},0),o()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(ie("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ot(typeof r.accessToken=="string",31837,{l:r}),new l_(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return ot(e===null||typeof e=="string",2055,{h:e}),new vn(e)}},zT=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=vn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},GT=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new zT(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(vn.FIRST_PARTY))}shutdown(){}invalidateToken(){}},u_=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},WT=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,m2(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){ot(this.o===void 0,3512);let r=s=>{s.error!=null&&ie("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.m;return this.m=s.token,ie("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{ie("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.V.getImmediate({optional:!0});s?i(s):ie("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new u_(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(ot(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new u_(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function vK(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var wp=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=vK(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%62))}return r}};function $e(n,e){return n<e?-1:n>e?1:0}function KT(n,e){let t=Math.min(n.length,e.length);for(let r=0;r<t;r++){let i=n.charAt(r),s=e.charAt(r);if(i!==s)return VT(i)===VT(s)?$e(i,s):VT(i)?1:-1}return $e(n.length,e.length)}var _K=55296,wK=57343;function VT(n){let e=n.charCodeAt(0);return e>=_K&&e<=wK}function sd(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var gF="__name__",d_=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&me(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&me(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let s=n.compareSegments(e.get(i),t.get(i));if(s!==0)return s}return $e(e.length,t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):KT(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Os.fromString(e.substring(4,e.length-2))}},It=class n extends d_{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new ne(z.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},IK=/^[_a-zA-Z][_a-zA-Z0-9]*$/,gr=class n extends d_{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return IK.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===gF}static keyField(){return new n([gF])}static fromServerFormat(e){let t=[],r="",i=0,s=()=>{if(r.length===0)throw new ne(z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},o=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new ne(z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new ne(z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new ne(z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var he=class n{constructor(e){this.path=e}static fromPath(e){return new n(It.fromString(e))}static fromName(e){return new n(It.fromString(e).popFirst(5))}static empty(){return new n(It.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&It.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return It.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new It(e.slice()))}};function oV(n,e,t){if(!t)throw new ne(z.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function EK(n,e,t,r){if(e===!0&&r===!0)throw new ne(z.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function mF(n){if(!he.isDocumentKey(n))throw new ne(z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function yF(n){if(he.isDocumentKey(n))throw new ne(z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function aV(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function $_(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":me(12329,{type:typeof n})}function Ls(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ne(z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=$_(n);throw new ne(z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function zt(n,e){let t={typeString:n};return e&&(t.value=e),t}function Np(n,e){if(!aV(n))throw new ne(z.INVALID_ARGUMENT,"JSON must be an object");let t;for(let r in e)if(e[r]){let i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}let o=n[r];if(i&&typeof o!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&o!==s.value){t=`Expected '${r}' field to equal '${s.value}'`;break}}if(t)throw new ne(z.INVALID_ARGUMENT,t);return!0}var vF=-62135596800,_F=1e6,Gt=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*_F);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ne(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ne(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<vF)throw new ne(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ne(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/_F}_compareTo(e){return this.seconds===e.seconds?$e(this.nanoseconds,e.nanoseconds):$e(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:n._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Np(e,n._jsonSchema))return new n(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-vF;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};Gt._jsonSchemaVersion="firestore/timestamp/1.0",Gt._jsonSchema={type:zt("string",Gt._jsonSchemaVersion),seconds:zt("number"),nanoseconds:zt("number")};var xe=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new Gt(0,0))}static max(){return new n(new Gt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Ip=-1,QT=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};QT.UNKNOWN_ID=-1;function bK(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=xe.fromTimestamp(r===1e9?new Gt(t+1,0):new Gt(t,r));return new Yc(i,he.empty(),e)}function CK(n){return new Yc(n.readTime,n.key,Ip)}var Yc=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(xe.min(),he.empty(),Ip)}static max(){return new n(xe.max(),he.empty(),Ip)}};function TK(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=he.comparator(n.documentKey,e.documentKey),t!==0?t:$e(n.largestBatchId,e.largestBatchId))}var SK="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",YT=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};async function wd(n){if(n.code!==z.FAILED_PRECONDITION||n.message!==SK)throw n;ie("LocalStore","Unexpectedly lost primary lease")}var G=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&me(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&t()},c=>r(c))}),o=!0,s===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let s=e.length,o=new Array(s),a=0;for(let c=0;c<s;c++){let d=c;t(e[d]).next(h=>{o[d]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,t){return new n((r,i)=>{let s=()=>{e()===!0?t().next(()=>{s()},i):r()};s()})}};function DK(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Id(n){return n.name==="IndexedDbTransactionError"}var AD=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>r.writeSequenceNumber(i))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.ue&&this.ue(t),t}}n.ce=-1;return n})(),xD=-1;function H_(n){return n==null}function Ep(n){return n===0&&1/n==-1/0}function AK(n){return typeof n=="number"&&Number.isInteger(n)&&!Ep(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var cV="";function xK(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=wF(e)),e=RK(n.get(t),e);return wF(e)}function RK(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let s=n.charAt(i);switch(s){case"\0":t+="";break;case cV:t+="";break;default:t+=s}}return t}function wF(n){return n+cV+""}var kK="remoteDocuments",lV="owner";var uV="mutationQueues";var dV="mutations";var hV="documentMutations",NK="remoteDocumentsV14";var fV="remoteDocumentGlobal";var pV="targets";var gV="targetDocuments";var mV="targetGlobal",yV="collectionParents";var vV="clientMetadata";var _V="bundles";var wV="namedQueries";var MK="indexConfiguration";var PK="indexState";var OK="indexEntries";var IV="documentOverlays";var FK="globals";var VK=[uV,dV,hV,kK,pV,lV,mV,gV,vV,fV,yV,_V,wV],p0e=[...VK,IV],LK=[uV,dV,hV,NK,pV,lV,mV,gV,vV,fV,yV,_V,wV,IV],UK=LK,jK=[...UK,MK,PK,OK];var g0e=[...jK,FK];function IF(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function va(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function EV(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Rt=class n{constructor(e,t){this.comparator=e,this.root=t||Bi.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Bi.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Bi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ed(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ed(this.root,e,this.comparator,!1)}getReverseIterator(){return new ed(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ed(this.root,e,this.comparator,!0)}},ed=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Bi=class n{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=s??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new n(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw me(43730,{key:this.key,value:this.value});if(this.right.isRed())throw me(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw me(27949);return e+(this.isRed()?0:1)}};Bi.EMPTY=null,Bi.RED=!0,Bi.BLACK=!1;Bi.EMPTY=new class{constructor(){this.size=0}get key(){throw me(57766)}get value(){throw me(16141)}get color(){throw me(16727)}get left(){throw me(29726)}get right(){throw me(36894)}copy(e,t,r,i,s){return this}insert(e,t,r){return new Bi(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var _n=class n{constructor(e){this.comparator=e,this.data=new Rt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new h_(this.data.getIterator())}getIteratorFrom(e){return new h_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},h_=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var kr=class n{constructor(e){this.fields=e,e.sort(gr.comparator)}static empty(){return new n([])}unionWith(e){let t=new _n(gr.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return sd(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var f_=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Fn=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=(function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new f_("Invalid base64 string: "+s):s}})(e);return new n(t)}static fromUint8Array(e){let t=(function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s})(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return $e(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Fn.EMPTY_BYTE_STRING=new Fn("");var BK=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Bs(n){if(ot(!!n,39018),typeof n=="string"){let e=0,t=BK.exec(n);if(ot(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:wt(n.seconds),nanos:wt(n.nanos)}}function wt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function $s(n){return typeof n=="string"?Fn.fromBase64String(n):Fn.fromUint8Array(n)}var bV="server_timestamp",CV="__type__",TV="__previous_value__",SV="__local_write_time__";function RD(n){return(n?.mapValue?.fields||{})[CV]?.stringValue===bV}function q_(n){let e=n.mapValue.fields[TV];return RD(e)?q_(e):e}function bp(n){let e=Bs(n.mapValue.fields[SV].timestampValue);return new Gt(e.seconds,e.nanos)}var JT=class{constructor(e,t,r,i,s,o,a,c,d,h){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=d,this.isUsingEmulator=h}},p_="(default)",g_=class n{constructor(e,t){this.projectId=e,this.database=t||p_}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===p_}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var kD="__type__",DV="__max__",r_={mapValue:{fields:{__type__:{stringValue:DV}}}},ND="__vector__",od="value";function pa(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?RD(n)?4:xV(n)?9007199254740991:AV(n)?10:11:me(28295,{value:n})}function qi(n,e){if(n===e)return!0;let t=pa(n);if(t!==pa(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return bp(n).isEqual(bp(e));case 3:return(function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=Bs(i.timestampValue),a=Bs(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(i,s){return $s(i.bytesValue).isEqual($s(s.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(i,s){return wt(i.geoPointValue.latitude)===wt(s.geoPointValue.latitude)&&wt(i.geoPointValue.longitude)===wt(s.geoPointValue.longitude)})(n,e);case 2:return(function(i,s){if("integerValue"in i&&"integerValue"in s)return wt(i.integerValue)===wt(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=wt(i.doubleValue),a=wt(s.doubleValue);return o===a?Ep(o)===Ep(a):isNaN(o)&&isNaN(a)}return!1})(n,e);case 9:return sd(n.arrayValue.values||[],e.arrayValue.values||[],qi);case 10:case 11:return(function(i,s){let o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(IF(o)!==IF(a))return!1;for(let c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!qi(o[c],a[c])))return!1;return!0})(n,e);default:return me(52216,{left:n})}}function Cp(n,e){return(n.values||[]).find(t=>qi(t,e))!==void 0}function ad(n,e){if(n===e)return 0;let t=pa(n),r=pa(e);if(t!==r)return $e(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return $e(n.booleanValue,e.booleanValue);case 2:return(function(s,o){let a=wt(s.integerValue||s.doubleValue),c=wt(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1})(n,e);case 3:return EF(n.timestampValue,e.timestampValue);case 4:return EF(bp(n),bp(e));case 5:return KT(n.stringValue,e.stringValue);case 6:return(function(s,o){let a=$s(s),c=$s(o);return a.compareTo(c)})(n.bytesValue,e.bytesValue);case 7:return(function(s,o){let a=s.split("/"),c=o.split("/");for(let d=0;d<a.length&&d<c.length;d++){let h=$e(a[d],c[d]);if(h!==0)return h}return $e(a.length,c.length)})(n.referenceValue,e.referenceValue);case 8:return(function(s,o){let a=$e(wt(s.latitude),wt(o.latitude));return a!==0?a:$e(wt(s.longitude),wt(o.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return bF(n.arrayValue,e.arrayValue);case 10:return(function(s,o){let a=s.fields||{},c=o.fields||{},d=a[od]?.arrayValue,h=c[od]?.arrayValue,p=$e(d?.values?.length||0,h?.values?.length||0);return p!==0?p:bF(d,h)})(n.mapValue,e.mapValue);case 11:return(function(s,o){if(s===r_.mapValue&&o===r_.mapValue)return 0;if(s===r_.mapValue)return 1;if(o===r_.mapValue)return-1;let a=s.fields||{},c=Object.keys(a),d=o.fields||{},h=Object.keys(d);c.sort(),h.sort();for(let p=0;p<c.length&&p<h.length;++p){let y=KT(c[p],h[p]);if(y!==0)return y;let E=ad(a[c[p]],d[h[p]]);if(E!==0)return E}return $e(c.length,h.length)})(n.mapValue,e.mapValue);default:throw me(23264,{he:t})}}function EF(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return $e(n,e);let t=Bs(n),r=Bs(e),i=$e(t.seconds,r.seconds);return i!==0?i:$e(t.nanos,r.nanos)}function bF(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let s=ad(t[i],r[i]);if(s)return s}return $e(t.length,r.length)}function cd(n){return XT(n)}function XT(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){let r=Bs(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return $s(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return he.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",i=!0;for(let s of t.values||[])i?i=!1:r+=",",r+=XT(s);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){let r=Object.keys(t.fields||{}).sort(),i="{",s=!0;for(let o of r)s?s=!1:i+=",",i+=`${o}:${XT(t.fields[o])}`;return i+"}"})(n.mapValue):me(61005,{value:n})}function o_(n){switch(pa(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=q_(n);return e?16+o_(e):16;case 5:return 2*n.stringValue.length;case 6:return $s(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce((i,s)=>i+o_(s),0)})(n.arrayValue);case 10:case 11:return(function(r){let i=0;return va(r.fields,(s,o)=>{i+=s.length+o_(o)}),i})(n.mapValue);default:throw me(13486,{value:n})}}function CF(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function ZT(n){return!!n&&"integerValue"in n}function MD(n){return!!n&&"arrayValue"in n}function TF(n){return!!n&&"nullValue"in n}function SF(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function a_(n){return!!n&&"mapValue"in n}function AV(n){return(n?.mapValue?.fields||{})[kD]?.stringValue===ND}function mp(n){if(n.geoPointValue)return{geoPointValue:B({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:B({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return va(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=mp(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=mp(n.arrayValue.values[t]);return e}return B({},n)}function xV(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===DV}var y0e={mapValue:{fields:{[kD]:{stringValue:ND},[od]:{arrayValue:{}}}}};var pr=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!a_(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=mp(t)}setAll(e){let t=gr.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){let c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=a.popLast()}o?r[a.lastSegment()]=mp(o):i.push(a.lastSegment())});let s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){let t=this.field(e.popLast());a_(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return qi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];a_(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){va(t,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new n(mp(this.value))}};function RV(n){let e=[];return va(n.fields,(t,r)=>{let i=new gr([t]);if(a_(r)){let s=RV(r.mapValue).fields;if(s.length===0)e.push(i);else for(let o of s)e.push(i.child(o))}else e.push(i)}),new kr(e)}var ai=class n{constructor(e,t,r,i,s,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new n(e,0,xe.min(),xe.min(),xe.min(),pr.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,xe.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,xe.min(),xe.min(),pr.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,xe.min(),xe.min(),pr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(xe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=pr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=pr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=xe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var ld=class{constructor(e,t){this.position=e,this.inclusive=t}};function DF(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let s=e[i],o=n.position[i];if(s.field.isKeyField()?r=he.comparator(he.fromName(o.referenceValue),t.key):r=ad(o,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function AF(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!qi(n.position[t],e.position[t]))return!1;return!0}var ud=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function $K(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var m_=class{},qt=class n extends m_{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new tS(e,t,r):t==="array-contains"?new iS(e,r):t==="in"?new sS(e,r):t==="not-in"?new oS(e,r):t==="array-contains-any"?new aS(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new nS(e,r):new rS(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(ad(t,this.value)):t!==null&&pa(this.value)===pa(t)&&this.matchesComparison(ad(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return me(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},ci=class n extends m_{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new n(e,t)}matches(e){return kV(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}};function kV(n){return n.op==="and"}function NV(n){return HK(n)&&kV(n)}function HK(n){for(let e of n.filters)if(e instanceof ci)return!1;return!0}function eS(n){if(n instanceof qt)return n.field.canonicalString()+n.op.toString()+cd(n.value);if(NV(n))return n.filters.map(e=>eS(e)).join(",");{let e=n.filters.map(t=>eS(t)).join(",");return`${n.op}(${e})`}}function MV(n,e){return n instanceof qt?(function(r,i){return i instanceof qt&&r.op===i.op&&r.field.isEqual(i.field)&&qi(r.value,i.value)})(n,e):n instanceof ci?(function(r,i){return i instanceof ci&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&MV(o,i.filters[a]),!0):!1})(n,e):void me(19439)}function PV(n){return n instanceof qt?(function(t){return`${t.field.canonicalString()} ${t.op} ${cd(t.value)}`})(n):n instanceof ci?(function(t){return t.op.toString()+" {"+t.getFilters().map(PV).join(" ,")+"}"})(n):"Filter"}var tS=class extends qt{constructor(e,t,r){super(e,t,r),this.key=he.fromName(r.referenceValue)}matches(e){let t=he.comparator(e.key,this.key);return this.matchesComparison(t)}},nS=class extends qt{constructor(e,t){super(e,"in",t),this.keys=OV("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},rS=class extends qt{constructor(e,t){super(e,"not-in",t),this.keys=OV("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function OV(n,e){return(e.arrayValue?.values||[]).map(t=>he.fromName(t.referenceValue))}var iS=class extends qt{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return MD(t)&&Cp(t.arrayValue,this.value)}},sS=class extends qt{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&Cp(this.value.arrayValue,t)}},oS=class extends qt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Cp(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Cp(this.value.arrayValue,t)}},aS=class extends qt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!MD(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Cp(this.value.arrayValue,r))}};var cS=class{constructor(e,t=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.Te=null}};function xF(n,e=null,t=[],r=[],i=null,s=null,o=null){return new cS(n,e,t,r,i,s,o)}function PD(n){let e=Te(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>eS(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>(function(s){return s.field.canonicalString()+s.dir})(r)).join(","),H_(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>cd(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>cd(r)).join(",")),e.Te=t}return e.Te}function OD(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!$K(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!MV(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!AF(n.startAt,e.startAt)&&AF(n.endAt,e.endAt)}function lS(n){return he.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var Jc=class{constructor(e,t=null,r=[],i=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}};function qK(n,e,t,r,i,s,o,a){return new Jc(n,e,t,r,i,s,o,a)}function FD(n){return new Jc(n)}function RF(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function FV(n){return n.collectionGroup!==null}function yp(n){let e=Te(n);if(e.Ie===null){e.Ie=[];let t=new Set;for(let s of e.explicitOrderBy)e.Ie.push(s),t.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new _n(gr.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(d=>{d.isInequality()&&(a=a.add(d.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.Ie.push(new ud(s,r))}),t.has(gr.keyField().canonicalString())||e.Ie.push(new ud(gr.keyField(),r))}return e.Ie}function $i(n){let e=Te(n);return e.Ee||(e.Ee=zK(e,yp(n))),e.Ee}function zK(n,e){if(n.limitType==="F")return xF(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new ud(i.field,s)});let t=n.endAt?new ld(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new ld(n.startAt.position,n.startAt.inclusive):null;return xF(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function uS(n,e){let t=n.filters.concat([e]);return new Jc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function dS(n,e,t){return new Jc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function z_(n,e){return OD($i(n),$i(e))&&n.limitType===e.limitType}function VV(n){return`${PD($i(n))}|lt:${n.limitType}`}function Ju(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>PV(i)).join(", ")}]`),H_(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>(function(o){return`${o.field.canonicalString()} (${o.dir})`})(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>cd(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>cd(i)).join(",")),`Target(${r})`})($i(n))}; limitType=${n.limitType})`}function G_(n,e){return e.isFoundDocument()&&(function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):he.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)})(n,e)&&(function(r,i){for(let s of yp(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0})(n,e)&&(function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0})(n,e)&&(function(r,i){return!(r.startAt&&!(function(o,a,c){let d=DF(o,a,c);return o.inclusive?d<=0:d<0})(r.startAt,yp(r),i)||r.endAt&&!(function(o,a,c){let d=DF(o,a,c);return o.inclusive?d>=0:d>0})(r.endAt,yp(r),i))})(n,e)}function GK(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function LV(n){return(e,t)=>{let r=!1;for(let i of yp(n)){let s=WK(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function WK(n,e,t){let r=n.field.isKeyField()?he.comparator(e.key,t.key):(function(s,o,a){let c=o.data.field(s),d=a.data.field(s);return c!==null&&d!==null?ad(c,d):me(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return me(19790,{direction:n.dir})}}var Hs=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){va(this.inner,(t,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return EV(this.inner)}size(){return this.innerSize}};var KK=new Rt(he.comparator);function qs(){return KK}var UV=new Rt(he.comparator);function gp(...n){let e=UV;for(let t of n)e=e.insert(t.key,t);return e}function jV(n){let e=UV;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function zc(){return vp()}function BV(){return vp()}function vp(){return new Hs(n=>n.toString(),(n,e)=>n.isEqual(e))}var QK=new Rt(he.comparator),YK=new _n(he.comparator);function He(...n){let e=YK;for(let t of n)e=e.add(t);return e}var JK=new _n($e);function XK(){return JK}function VD(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ep(e)?"-0":e}}function $V(n){return{integerValue:""+n}}function ZK(n,e){return AK(e)?$V(e):VD(n,e)}var dd=class{constructor(){this._=void 0}};function eQ(n,e,t){return n instanceof hd?(function(i,s){let o={fields:{[CV]:{stringValue:bV},[SV]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&RD(s)&&(s=q_(s)),s&&(o.fields[TV]=s),{mapValue:o}})(t,e):n instanceof Xc?qV(n,e):n instanceof Zc?zV(n,e):(function(i,s){let o=HV(i,s),a=kF(o)+kF(i.Ae);return ZT(o)&&ZT(i.Ae)?$V(a):VD(i.serializer,a)})(n,e)}function tQ(n,e,t){return n instanceof Xc?qV(n,e):n instanceof Zc?zV(n,e):t}function HV(n,e){return n instanceof fd?(function(r){return ZT(r)||(function(s){return!!s&&"doubleValue"in s})(r)})(e)?e:{integerValue:0}:null}var hd=class extends dd{},Xc=class extends dd{constructor(e){super(),this.elements=e}};function qV(n,e){let t=GV(e);for(let r of n.elements)t.some(i=>qi(i,r))||t.push(r);return{arrayValue:{values:t}}}var Zc=class extends dd{constructor(e){super(),this.elements=e}};function zV(n,e){let t=GV(e);for(let r of n.elements)t=t.filter(i=>!qi(i,r));return{arrayValue:{values:t}}}var fd=class extends dd{constructor(e,t){super(),this.serializer=e,this.Ae=t}};function kF(n){return wt(n.integerValue||n.doubleValue)}function GV(n){return MD(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function nQ(n,e){return n.field.isEqual(e.field)&&(function(r,i){return r instanceof Xc&&i instanceof Xc||r instanceof Zc&&i instanceof Zc?sd(r.elements,i.elements,qi):r instanceof fd&&i instanceof fd?qi(r.Ae,i.Ae):r instanceof hd&&i instanceof hd})(n.transform,e.transform)}var hS=class{constructor(e,t){this.version=e,this.transformResults=t}},Us=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function c_(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var pd=class{};function WV(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Tp(n.key,Us.none()):new el(n.key,n.data,Us.none());{let t=n.data,r=pr.empty(),i=new _n(gr.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new zi(n.key,r,new kr(i.toArray()),Us.none())}}function rQ(n,e,t){n instanceof el?(function(i,s,o){let a=i.value.clone(),c=MF(i.fieldTransforms,s,o.transformResults);a.setAll(c),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()})(n,e,t):n instanceof zi?(function(i,s,o){if(!c_(i.precondition,s))return void s.convertToUnknownDocument(o.version);let a=MF(i.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(KV(i)),c.setAll(a),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()})(n,e,t):(function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()})(0,e,t)}function _p(n,e,t,r){return n instanceof el?(function(s,o,a,c){if(!c_(s.precondition,o))return a;let d=s.value.clone(),h=PF(s.fieldTransforms,c,o);return d.setAll(h),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null})(n,e,t,r):n instanceof zi?(function(s,o,a,c){if(!c_(s.precondition,o))return a;let d=PF(s.fieldTransforms,c,o),h=o.data;return h.setAll(KV(s)),h.setAll(d),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(p=>p.field))})(n,e,t,r):(function(s,o,a){return c_(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a})(n,e,t)}function iQ(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),s=HV(r.transform,i||null);s!=null&&(t===null&&(t=pr.empty()),t.set(r.field,s))}return t||null}function NF(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&sd(r,i,(s,o)=>nQ(s,o))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var el=class extends pd{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},zi=class extends pd{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function KV(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function MF(n,e,t){let r=new Map;ot(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let i=0;i<t.length;i++){let s=n[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,tQ(o,a,t[i]))}return r}function PF(n,e,t){let r=new Map;for(let i of n){let s=i.transform,o=t.data.field(i.field);r.set(i.field,eQ(s,o,e))}return r}var Tp=class extends pd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},fS=class extends pd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var pS=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&rQ(s,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=_p(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=_p(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=BV();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=t.has(i.key)?null:a;let c=WV(o,a);c!==null&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(xe.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),He())}isEqual(e){return this.batchId===e.batchId&&sd(this.mutations,e.mutations,(t,r)=>NF(t,r))&&sd(this.baseMutations,e.baseMutations,(t,r)=>NF(t,r))}},gS=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){ot(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=(function(){return QK})(),s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new n(e,t,r,i)}};var mS=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var yS=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var $t,Ge;function sQ(n){switch(n){case z.OK:return me(64938);case z.CANCELLED:case z.UNKNOWN:case z.DEADLINE_EXCEEDED:case z.RESOURCE_EXHAUSTED:case z.INTERNAL:case z.UNAVAILABLE:case z.UNAUTHENTICATED:return!1;case z.INVALID_ARGUMENT:case z.NOT_FOUND:case z.ALREADY_EXISTS:case z.PERMISSION_DENIED:case z.FAILED_PRECONDITION:case z.ABORTED:case z.OUT_OF_RANGE:case z.UNIMPLEMENTED:case z.DATA_LOSS:return!0;default:return me(15467,{code:n})}}function QV(n){if(n===void 0)return js("GRPC error has no .code"),z.UNKNOWN;switch(n){case $t.OK:return z.OK;case $t.CANCELLED:return z.CANCELLED;case $t.UNKNOWN:return z.UNKNOWN;case $t.DEADLINE_EXCEEDED:return z.DEADLINE_EXCEEDED;case $t.RESOURCE_EXHAUSTED:return z.RESOURCE_EXHAUSTED;case $t.INTERNAL:return z.INTERNAL;case $t.UNAVAILABLE:return z.UNAVAILABLE;case $t.UNAUTHENTICATED:return z.UNAUTHENTICATED;case $t.INVALID_ARGUMENT:return z.INVALID_ARGUMENT;case $t.NOT_FOUND:return z.NOT_FOUND;case $t.ALREADY_EXISTS:return z.ALREADY_EXISTS;case $t.PERMISSION_DENIED:return z.PERMISSION_DENIED;case $t.FAILED_PRECONDITION:return z.FAILED_PRECONDITION;case $t.ABORTED:return z.ABORTED;case $t.OUT_OF_RANGE:return z.OUT_OF_RANGE;case $t.UNIMPLEMENTED:return z.UNIMPLEMENTED;case $t.DATA_LOSS:return z.DATA_LOSS;default:return me(39323,{code:n})}}(Ge=$t||($t={}))[Ge.OK=0]="OK",Ge[Ge.CANCELLED=1]="CANCELLED",Ge[Ge.UNKNOWN=2]="UNKNOWN",Ge[Ge.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ge[Ge.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ge[Ge.NOT_FOUND=5]="NOT_FOUND",Ge[Ge.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ge[Ge.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ge[Ge.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ge[Ge.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ge[Ge.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ge[Ge.ABORTED=10]="ABORTED",Ge[Ge.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ge[Ge.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ge[Ge.INTERNAL=13]="INTERNAL",Ge[Ge.UNAVAILABLE=14]="UNAVAILABLE",Ge[Ge.DATA_LOSS=15]="DATA_LOSS";var oQ=null;function aQ(){return new TextEncoder}var cQ=new Os([4294967295,4294967295],0);function OF(n){let e=aQ().encode(n),t=new kT;return t.update(e),new Uint8Array(t.digest())}function FF(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Os([t,r],0),new Os([i,s],0)]}var vS=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Gc(`Invalid padding: ${t}`);if(r<0)throw new Gc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Gc(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Gc(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Os.fromNumber(this.ge)}ye(e,t,r){let i=e.add(t.multiply(Os.fromNumber(r)));return i.compare(cQ)===1&&(i=new Os([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;let t=OF(e),[r,i]=FF(t);for(let s=0;s<this.hashCount;s++){let o=this.ye(r,i,s);if(!this.we(o))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new n(s,i,t);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.ge===0)return;let t=OF(e),[r,i]=FF(t);for(let s=0;s<this.hashCount;s++){let o=this.ye(r,i,s);this.Se(o)}}Se(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},Gc=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var y_=class n{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,Sp.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(xe.min(),i,new Rt($e),qs(),He())}},Sp=class n{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,He(),He(),He())}};var td=class{constructor(e,t,r,i){this.be=e,this.removedTargetIds=t,this.key=r,this.De=i}},v_=class{constructor(e,t){this.targetId=e,this.Ce=t}},__=class{constructor(e,t,r=Fn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},w_=class{constructor(){this.ve=0,this.Fe=VF(),this.Me=Fn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=He(),t=He(),r=He();return this.Fe.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:me(38017,{changeType:s})}}),new Sp(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=VF()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,ot(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}},_S=class{constructor(e){this.Ge=e,this.ze=new Map,this.je=qs(),this.Je=i_(),this.He=i_(),this.Ye=new Rt($e)}Ze(e){for(let t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(let t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,t=>{let r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:me(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach((r,i)=>{this.rt(i)&&t(i)})}st(e){let t=e.targetId,r=e.Ce.count,i=this.ot(t);if(i){let s=i.target;if(lS(s))if(r===0){let o=new he(s.path);this.et(t,o,ai.newNoDocument(o,xe.min()))}else ot(r===1,20013,{expectedCount:r});else{let o=this._t(t);if(o!==r){let a=this.ut(e),c=a?this.ct(a,e,o):1;if(c!==0){this.it(t);let d=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,d)}oQ?.lt((function(h,p,y,E,k){let P={localCacheCount:h,existenceFilterCount:p.count,databaseId:y.database,projectId:y.projectId},M=p.unchangedNames;return M&&(P.bloomFilter={applied:k===0,hashCount:M?.hashCount??0,bitmapLength:M?.bits?.bitmap?.length??0,padding:M?.bits?.padding??0,mightContain:H=>E?.mightContain(H)??!1}),P})(o,e.Ce,this.Ge.ht(),a,c))}}}}ut(e){let t=e.Ce.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t,o,a;try{o=$s(r).toUint8Array()}catch(c){if(c instanceof f_)return id("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new vS(o,i,s)}catch(c){return id(c instanceof Gc?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.ge===0?null:a}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){let r=this.Ge.getRemoteKeysForTarget(t),i=0;return r.forEach(s=>{let o=this.Ge.ht(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.et(t,s,null),i++)}),i}Tt(e){let t=new Map;this.ze.forEach((s,o)=>{let a=this.ot(o);if(a){if(s.current&&lS(a.target)){let c=new he(a.target.path);this.It(c).has(o)||this.Et(o,c)||this.et(o,c,ai.newNoDocument(c,e))}s.Be&&(t.set(o,s.ke()),s.qe())}});let r=He();this.He.forEach((s,o)=>{let a=!0;o.forEachWhile(c=>{let d=this.ot(c);return!d||d.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.je.forEach((s,o)=>o.setReadTime(e));let i=new y_(e,t,this.Ye,this.je,r);return this.je=qs(),this.Je=i_(),this.He=i_(),this.Ye=new Rt($e),i}Xe(e,t){if(!this.rt(e))return;let r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;let i=this.nt(e);this.Et(e,t)?i.Qe(t,1):i.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){let t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new w_,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new _n($e),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new _n($e),this.Je=this.Je.insert(e,t)),t}rt(e){let t=this.ot(e)!==null;return t||ie("WatchChangeAggregator","Detected inactive target",e),t}ot(e){let t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new w_),this.Ge.getRemoteKeysForTarget(e).forEach(t=>{this.et(e,t,null)})}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}};function i_(){return new Rt(he.comparator)}function VF(){return new Rt(he.comparator)}var lQ={asc:"ASCENDING",desc:"DESCENDING"},uQ={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},dQ={and:"AND",or:"OR"},wS=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function IS(n,e){return n.useProto3Json||H_(e)?e:{value:e}}function I_(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function YV(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function hQ(n,e){return I_(n,e.toTimestamp())}function Hi(n){return ot(!!n,49232),xe.fromTimestamp((function(t){let r=Bs(t);return new Gt(r.seconds,r.nanos)})(n))}function LD(n,e){return ES(n,e).canonicalString()}function ES(n,e){let t=(function(i){return new It(["projects",i.projectId,"databases",i.database])})(n).child("documents");return e===void 0?t:t.child(e)}function JV(n){let e=It.fromString(n);return ot(nL(e),10190,{key:e.toString()}),e}function bS(n,e){return LD(n.databaseId,e.path)}function LT(n,e){let t=JV(e);if(t.get(1)!==n.databaseId.projectId)throw new ne(z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ne(z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new he(ZV(t))}function XV(n,e){return LD(n.databaseId,e)}function fQ(n){let e=JV(n);return e.length===4?It.emptyPath():ZV(e)}function CS(n){return new It(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function ZV(n){return ot(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function LF(n,e,t){return{name:bS(n,e),fields:t.value.mapValue.fields}}function pQ(n,e){let t;if("targetChange"in e){e.targetChange;let r=(function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:me(39313,{state:d})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=(function(d,h){return d.useProto3Json?(ot(h===void 0||typeof h=="string",58123),Fn.fromBase64String(h||"")):(ot(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),Fn.fromUint8Array(h||new Uint8Array))})(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&(function(d){let h=d.code===void 0?z.UNKNOWN:QV(d.code);return new ne(h,d.message||"")})(o);t=new __(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=LT(n,r.document.name),s=Hi(r.document.updateTime),o=r.document.createTime?Hi(r.document.createTime):xe.min(),a=new pr({mapValue:{fields:r.document.fields}}),c=ai.newFoundDocument(i,s,o,a),d=r.targetIds||[],h=r.removedTargetIds||[];t=new td(d,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=LT(n,r.document),s=r.readTime?Hi(r.readTime):xe.min(),o=ai.newNoDocument(i,s),a=r.removedTargetIds||[];t=new td([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=LT(n,r.document),s=r.removedTargetIds||[];t=new td([],s,i,null)}else{if(!("filter"in e))return me(11601,{Rt:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,o=new yS(i,s),a=r.targetId;t=new v_(a,o)}}return t}function gQ(n,e){let t;if(e instanceof el)t={update:LF(n,e.key,e.value)};else if(e instanceof Tp)t={delete:bS(n,e.key)};else if(e instanceof zi)t={update:LF(n,e.key,e.data),updateMask:CQ(e.fieldMask)};else{if(!(e instanceof fS))return me(16599,{Vt:e.type});t={verify:bS(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>(function(s,o){let a=o.transform;if(a instanceof hd)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Xc)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Zc)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof fd)return{fieldPath:o.field.canonicalString(),increment:a.Ae};throw me(20930,{transform:o.transform})})(0,r))),e.precondition.isNone||(t.currentDocument=(function(i,s){return s.updateTime!==void 0?{updateTime:hQ(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:me(27497)})(n,e.precondition)),t}function mQ(n,e){return n&&n.length>0?(ot(e!==void 0,14353),n.map(t=>(function(i,s){let o=i.updateTime?Hi(i.updateTime):Hi(s);return o.isEqual(xe.min())&&(o=Hi(s)),new hS(o,i.transformResults||[])})(t,e))):[]}function yQ(n,e){return{documents:[XV(n,e.path)]}}function vQ(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=XV(n,i);let s=(function(d){if(d.length!==0)return tL(ci.create(d,"and"))})(e.filters);s&&(t.structuredQuery.where=s);let o=(function(d){if(d.length!==0)return d.map(h=>(function(y){return{field:Xu(y.field),direction:IQ(y.dir)}})(h))})(e.orderBy);o&&(t.structuredQuery.orderBy=o);let a=IS(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=(function(d){return{before:d.inclusive,values:d.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(d){return{before:!d.inclusive,values:d.position}})(e.endAt)),{ft:t,parent:i}}function _Q(n){let e=fQ(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){ot(r===1,65062);let h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];t.where&&(s=(function(p){let y=eL(p);return y instanceof ci&&NV(y)?y.getFilters():[y]})(t.where));let o=[];t.orderBy&&(o=(function(p){return p.map(y=>(function(k){return new ud(Zu(k.field),(function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(k.direction))})(y))})(t.orderBy));let a=null;t.limit&&(a=(function(p){let y;return y=typeof p=="object"?p.value:p,H_(y)?null:y})(t.limit));let c=null;t.startAt&&(c=(function(p){let y=!!p.before,E=p.values||[];return new ld(E,y)})(t.startAt));let d=null;return t.endAt&&(d=(function(p){let y=!p.before,E=p.values||[];return new ld(E,y)})(t.endAt)),qK(e,i,o,s,a,"F",c,d)}function wQ(n,e){let t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return me(28987,{purpose:i})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function eL(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=Zu(t.unaryFilter.field);return qt.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Zu(t.unaryFilter.field);return qt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=Zu(t.unaryFilter.field);return qt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=Zu(t.unaryFilter.field);return qt.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return me(61313);default:return me(60726)}})(n):n.fieldFilter!==void 0?(function(t){return qt.create(Zu(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return me(58110);default:return me(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return ci.create(t.compositeFilter.filters.map(r=>eL(r)),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return me(1026)}})(t.compositeFilter.op))})(n):me(30097,{filter:n})}function IQ(n){return lQ[n]}function EQ(n){return uQ[n]}function bQ(n){return dQ[n]}function Xu(n){return{fieldPath:n.canonicalString()}}function Zu(n){return gr.fromServerFormat(n.fieldPath)}function tL(n){return n instanceof qt?(function(t){if(t.op==="=="){if(SF(t.value))return{unaryFilter:{field:Xu(t.field),op:"IS_NAN"}};if(TF(t.value))return{unaryFilter:{field:Xu(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(SF(t.value))return{unaryFilter:{field:Xu(t.field),op:"IS_NOT_NAN"}};if(TF(t.value))return{unaryFilter:{field:Xu(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Xu(t.field),op:EQ(t.op),value:t.value}}})(n):n instanceof ci?(function(t){let r=t.getFilters().map(i=>tL(i));return r.length===1?r[0]:{compositeFilter:{op:bQ(t.op),filters:r}}})(n):me(54877,{filter:n})}function CQ(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function nL(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Dp=class n{constructor(e,t,r,i,s=xe.min(),o=xe.min(),a=Fn.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var TS=class{constructor(e){this.yt=e}};function TQ(n){let e=_Q({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?dS(e,e.limit,"L"):e}var E_=class{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(wt(e.integerValue));else if("doubleValue"in e){let r=wt(e.doubleValue);isNaN(r)?this.Ft(t,13):(this.Ft(t,15),Ep(r)?t.Mt(0):t.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(t,20),typeof r=="string"&&(r=Bs(r)),t.xt(`${r.seconds||""}`),t.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt($s(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ft(t,45),t.Mt(r.latitude||0),t.Mt(r.longitude||0)}else"mapValue"in e?xV(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):AV(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):me(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){let r=e.fields||{};this.Ft(t,55);for(let i of Object.keys(r))this.Ot(i,t),this.Ct(r[i],t)}kt(e,t){let r=e.fields||{};this.Ft(t,53);let i=od,s=r[i].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(wt(s)),this.Ot(i,t),this.Ct(r[i],t)}Qt(e,t){let r=e.values||[];this.Ft(t,50);for(let i of r)this.Ct(i,t)}Lt(e,t){this.Ft(t,37),he.fromName(e).path.forEach(r=>{this.Ft(t,60),this.Ut(r,t)})}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}};E_.Kt=new E_;var SS=class{constructor(){this.Cn=new DS}addToCollectionParentIndex(e,t){return this.Cn.add(t),G.resolve()}getCollectionParents(e,t){return G.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return G.resolve()}deleteFieldIndex(e,t){return G.resolve()}deleteAllFieldIndexes(e){return G.resolve()}createTargetIndexes(e,t){return G.resolve()}getDocumentsMatchingTarget(e,t){return G.resolve(null)}getIndexType(e,t){return G.resolve(0)}getFieldIndexes(e,t){return G.resolve([])}getNextCollectionGroupToUpdate(e){return G.resolve(null)}getMinOffset(e,t){return G.resolve(Yc.min())}getMinOffsetFromCollectionGroup(e,t){return G.resolve(Yc.min())}updateCollectionGroup(e,t,r){return G.resolve()}updateIndexEntries(e,t){return G.resolve()}},DS=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new _n(It.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new _n(It.comparator)).toArray()}};var v0e=new Uint8Array(0);var UF={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},rL=41943040,Rr=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};Rr.DEFAULT_COLLECTION_PERCENTILE=10,Rr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Rr.DEFAULT=new Rr(rL,Rr.DEFAULT_COLLECTION_PERCENTILE,Rr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Rr.DISABLED=new Rr(-1,0,0);var Ap=class n{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new n(0)}static cr(){return new n(-1)}};var jF="LruGarbageCollector",SQ=1048576;function BF([n,e],[t,r]){let i=$e(n,t);return i===0?$e(e,r):i}var AS=class{constructor(e){this.Ir=e,this.buffer=new _n(BF),this.Er=0}dr(){return++this.Er}Ar(e){let t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();BF(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},xS=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ie(jF,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Id(t)?ie(jF,"Ignoring IndexedDB error during garbage collection: ",t):await wd(t)}await this.Vr(3e5)})}},RS=class{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return G.resolve(AD.ce);let r=new AS(t);return this.mr.forEachTarget(e,i=>r.Ar(i.sequenceNumber)).next(()=>this.mr.pr(e,i=>r.Ar(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ie("LruGarbageCollector","Garbage collection skipped; disabled"),G.resolve(UF)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ie("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),UF):this.yr(e,t))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,i,s,o,a,c,d,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(ie("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,o=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,a=Date.now(),this.removeTargets(e,r,t))).next(p=>(s=p,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(d=Date.now(),Yu()<=ze.DEBUG&&ie("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(c-a)+`ms
	Removed ${p} documents in `+(d-c)+`ms
Total Duration: ${d-h}ms`),G.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:p})))}};function DQ(n,e){return new RS(n,e)}var kS=class{constructor(){this.changes=new Hs(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ai.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?G.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var NS=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var MS=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&_p(r.mutation,i,kr.empty(),Gt.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,He()).next(()=>r))}getLocalViewOfDocuments(e,t,r=He()){let i=zc();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=gp();return s.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){let r=zc();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,He()))}populateOverlays(e,t,r){let i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,r,i){let s=qs(),o=vp(),a=(function(){return vp()})();return t.forEach((c,d)=>{let h=r.get(d.key);i.has(d.key)&&(h===void 0||h.mutation instanceof zi)?s=s.insert(d.key,d):h!==void 0?(o.set(d.key,h.mutation.getFieldMask()),_p(h.mutation,d,h.mutation.getFieldMask(),Gt.now())):o.set(d.key,kr.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((d,h)=>o.set(d,h)),t.forEach((d,h)=>a.set(d,new NS(h,o.get(d)??null))),a))}recalculateAndSaveOverlays(e,t){let r=vp(),i=new Rt((o,a)=>o-a),s=He();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(let a of o)a.keys().forEach(c=>{let d=t.get(c);if(d===null)return;let h=r.get(c)||kr.empty();h=a.applyToLocalView(d,h),r.set(c,h);let p=(i.get(a.batchId)||He()).add(c);i=i.insert(a.batchId,p)})}).next(()=>{let o=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),d=c.key,h=c.value,p=BV();h.forEach(y=>{if(!s.has(y)){let E=WV(t.get(y),r.get(y));E!==null&&p.set(y,E),s=s.add(y)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,p))}return G.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return(function(o){return he.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):FV(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):G.resolve(zc()),a=Ip,c=s;return o.next(d=>G.forEach(d,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),s.get(h)?G.resolve():this.remoteDocumentCache.getEntry(e,h).next(y=>{c=c.insert(h,y)}))).next(()=>this.populateOverlays(e,d,s)).next(()=>this.computeViews(e,c,d,He())).next(h=>({batchId:a,changes:jV(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new he(t)).next(r=>{let i=gp();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let s=t.collectionGroup,o=gp();return this.indexManager.getCollectionParents(e,s).next(a=>G.forEach(a,c=>{let d=(function(p,y){return new Jc(y,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)})(t,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,d,r,i).next(h=>{h.forEach((p,y)=>{o=o.insert(p,y)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((c,d)=>{let h=d.getKey();o.get(h)===null&&(o=o.insert(h,ai.newInvalidDocument(h)))});let a=gp();return o.forEach((c,d)=>{let h=s.get(c);h!==void 0&&_p(h.mutation,d,kr.empty(),Gt.now()),G_(t,d)&&(a=a.insert(c,d))}),a})}};var PS=class{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return G.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:Hi(i.createTime)}})(t)),G.resolve()}getNamedQuery(e,t){return G.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(i){return{name:i.name,query:TQ(i.bundledQuery),readTime:Hi(i.readTime)}})(t)),G.resolve()}};var OS=class{constructor(){this.overlays=new Rt(he.comparator),this.qr=new Map}getOverlay(e,t){return G.resolve(this.overlays.get(t))}getOverlays(e,t){let r=zc();return G.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.St(e,t,s)}),G.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.qr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.qr.delete(r)),G.resolve()}getOverlaysForCollection(e,t,r){let i=zc(),s=t.length+1,o=new he(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let c=a.getNext().value,d=c.getKey();if(!t.isPrefixOf(d.path))break;d.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return G.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new Rt((d,h)=>d-h),o=this.overlays.getIterator();for(;o.hasNext();){let d=o.getNext().value;if(d.getKey().getCollectionGroup()===t&&d.largestBatchId>r){let h=s.get(d.largestBatchId);h===null&&(h=zc(),s=s.insert(d.largestBatchId,h)),h.set(d.getKey(),d)}}let a=zc(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((d,h)=>a.set(d,h)),!(a.size()>=i)););return G.resolve(a)}St(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new mS(t,r));let s=this.qr.get(t);s===void 0&&(s=He(),this.qr.set(t,s)),this.qr.set(t,s.add(r.key))}};var FS=class{constructor(){this.sessionToken=Fn.EMPTY_BYTE_STRING}getSessionToken(e){return G.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,G.resolve()}};var xp=class{constructor(){this.Qr=new _n(Ht.$r),this.Ur=new _n(Ht.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){let r=new Ht(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Gr(new Ht(e,t))}zr(e,t){e.forEach(r=>this.removeReference(r,t))}jr(e){let t=new he(new It([])),r=new Ht(t,e),i=new Ht(t,e+1),s=[];return this.Ur.forEachInRange([r,i],o=>{this.Gr(o),s.push(o.key)}),s}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){let t=new he(new It([])),r=new Ht(t,e),i=new Ht(t,e+1),s=He();return this.Ur.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let t=new Ht(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},Ht=class{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return he.comparator(e.key,t.key)||$e(e.Yr,t.Yr)}static Kr(e,t){return $e(e.Yr,t.Yr)||he.comparator(e.key,t.key)}};var VS=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new _n(Ht.$r)}checkEmpty(e){return G.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new pS(s,t,r,i);this.mutationQueue.push(o);for(let a of i)this.Zr=this.Zr.add(new Ht(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return G.resolve(o)}lookupMutationBatch(e,t){return G.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.ei(r),s=i<0?0:i;return G.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return G.resolve(this.mutationQueue.length===0?xD:this.tr-1)}getAllMutationBatches(e){return G.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new Ht(t,0),i=new Ht(t,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([r,i],o=>{let a=this.Xr(o.Yr);s.push(a)}),G.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new _n($e);return t.forEach(i=>{let s=new Ht(i,0),o=new Ht(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,o],a=>{r=r.add(a.Yr)})}),G.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,s=r;he.isDocumentKey(s)||(s=s.child(""));let o=new Ht(new he(s),0),a=new _n($e);return this.Zr.forEachWhile(c=>{let d=c.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(a=a.add(c.Yr)),!0)},o),G.resolve(this.ti(a))}ti(e){let t=[];return e.forEach(r=>{let i=this.Xr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){ot(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return G.forEach(t.mutations,i=>{let s=new Ht(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,t){let r=new Ht(t,0),i=this.Zr.firstAfterOrEqual(r);return G.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,G.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){let t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var LS=class{constructor(e){this.ri=e,this.docs=(function(){return new Rt(he.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return G.resolve(r?r.document.mutableCopy():ai.newInvalidDocument(t))}getEntries(e,t){let r=qs();return t.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():ai.newInvalidDocument(i))}),G.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=qs(),o=t.path,a=new he(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:d,value:{document:h}}=c.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||TK(CK(h),r)<=0||(i.has(h.key)||G_(t,h))&&(s=s.insert(h.key,h.mutableCopy()))}return G.resolve(s)}getAllFromCollectionGroup(e,t,r,i){me(9500)}ii(e,t){return G.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new US(this)}getSize(e){return G.resolve(this.size)}},US=class extends kS{constructor(e){super(),this.Nr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)}),G.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}};var jS=class{constructor(e){this.persistence=e,this.si=new Hs(t=>PD(t),OD),this.lastRemoteSnapshotVersion=xe.min(),this.highestTargetId=0,this.oi=0,this._i=new xp,this.targetCount=0,this.ai=Ap.ur()}forEachTarget(e,t){return this.si.forEach((r,i)=>t(i)),G.resolve()}getLastRemoteSnapshotVersion(e){return G.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return G.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),G.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),G.resolve()}Pr(e){this.si.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.ai=new Ap(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,G.resolve()}updateTargetData(e,t){return this.Pr(t),G.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,G.resolve()}removeTargets(e,t,r){let i=0,s=[];return this.si.forEach((o,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.si.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),G.waitFor(s).next(()=>i)}getTargetCount(e){return G.resolve(this.targetCount)}getTargetData(e,t){let r=this.si.get(t)||null;return G.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),G.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);let i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),G.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),G.resolve()}getMatchingKeysForTargetId(e,t){let r=this._i.Hr(t);return G.resolve(r)}containsKey(e,t){return G.resolve(this._i.containsKey(t))}};var b_=class{constructor(e,t){this.ui={},this.overlays={},this.ci=new AD(0),this.li=!1,this.li=!0,this.hi=new FS,this.referenceDelegate=e(this),this.Pi=new jS(this),this.indexManager=new SS,this.remoteDocumentCache=(function(i){return new LS(i)})(r=>this.referenceDelegate.Ti(r)),this.serializer=new TS(t),this.Ii=new PS(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new OS,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new VS(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){ie("MemoryPersistence","Starting transaction:",e);let i=new BS(this.ci.next());return this.referenceDelegate.Ei(),r(i).next(s=>this.referenceDelegate.di(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ai(e,t){return G.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,t)))}},BS=class extends YT{constructor(e){super(),this.currentSequenceNumber=e}},$S=class n{constructor(e){this.persistence=e,this.Ri=new xp,this.Vi=null}static mi(e){return new n(e)}get fi(){if(this.Vi)return this.Vi;throw me(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),G.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),G.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),G.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach(i=>this.fi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.fi.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}Ei(){this.Vi=new Set}di(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return G.forEach(this.fi,r=>{let i=he.fromPath(r);return this.gi(e,i).next(s=>{s||t.removeEntry(i,xe.min())})}).next(()=>(this.Vi=null,t.apply(e)))}updateLimboDocument(e,t){return this.gi(e,t).next(r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())})}Ti(e){return 0}gi(e,t){return G.or([()=>G.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}},C_=class n{constructor(e,t){this.persistence=e,this.pi=new Hs(r=>xK(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=DQ(this,t)}static mi(e,t){return new n(e,t)}Ei(){}di(e){return G.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){let t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}wr(e){let t=0;return this.pr(e,r=>{t++}).next(()=>t)}pr(e,t){return G.forEach(this.pi,(r,i)=>this.br(e,r,i).next(s=>s?G.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ii(e,o=>this.br(e,o,t).next(a=>{a||(r++,s.removeEntry(o,xe.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),G.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),G.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),G.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),G.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=o_(e.data.value)),t}br(e,t,r){return G.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let i=this.pi.get(t);return G.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var HS=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=i}static As(e,t){let r=He(),i=He();for(let s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new n(e,t.fromCache,r,i)}};var qS=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var zS=class{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return c2()?8:DK(a2())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,i){let s={result:null};return this.ys(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ws(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new qS;return this.Ss(e,t,o).next(a=>{if(s.result=a,this.Vs)return this.bs(e,t,o,a.size)})}).next(()=>s.result)}bs(e,t,r,i){return r.documentReadCount<this.fs?(Yu()<=ze.DEBUG&&ie("QueryEngine","SDK will not create cache indexes for query:",Ju(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),G.resolve()):(Yu()<=ze.DEBUG&&ie("QueryEngine","Query:",Ju(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(Yu()<=ze.DEBUG&&ie("QueryEngine","The SDK decides to create cache indexes for query:",Ju(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,$i(t))):G.resolve())}ys(e,t){if(RF(t))return G.resolve(null);let r=$i(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=dS(t,null,"F"),r=$i(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=He(...s);return this.ps.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let d=this.Ds(t,a);return this.Cs(t,d,o,c.readTime)?this.ys(e,dS(t,null,"F")):this.vs(e,d,t,c)}))})))}ws(e,t,r,i){return RF(t)||i.isEqual(xe.min())?G.resolve(null):this.ps.getDocuments(e,r).next(s=>{let o=this.Ds(t,s);return this.Cs(t,o,r,i)?G.resolve(null):(Yu()<=ze.DEBUG&&ie("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ju(t)),this.vs(e,o,t,bK(i,Ip)).next(a=>a))})}Ds(e,t){let r=new _n(LV(e));return t.forEach((i,s)=>{G_(e,s)&&(r=r.add(s))}),r}Cs(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ss(e,t,r){return Yu()<=ze.DEBUG&&ie("QueryEngine","Using full collection scan to execute query:",Ju(t)),this.ps.getDocumentsMatchingQuery(e,t,Yc.min(),r)}vs(e,t,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}};var UD="LocalStore",AQ=3e8,GS=class{constructor(e,t,r,i){this.persistence=e,this.Fs=t,this.serializer=i,this.Ms=new Rt($e),this.xs=new Hs(s=>PD(s),OD),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new MS(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}};function xQ(n,e,t,r){return new GS(n,e,t,r)}async function iL(n,e){let t=Te(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.Bs(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{let o=[],a=[],c=He();for(let d of i){o.push(d.batchId);for(let h of d.mutations)c=c.add(h.key)}for(let d of s){a.push(d.batchId);for(let h of d.mutations)c=c.add(h.key)}return t.localDocuments.getDocuments(r,c).next(d=>({Ls:d,removedBatchIds:o,addedBatchIds:a}))})})}function RQ(n,e){let t=Te(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),s=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(a,c,d,h){let p=d.batch,y=p.keys(),E=G.resolve();return y.forEach(k=>{E=E.next(()=>h.getEntry(c,k)).next(P=>{let M=d.docVersions.get(k);ot(M!==null,48541),P.version.compareTo(M)<0&&(p.applyToRemoteDocument(P,d),P.isValidDocument()&&(P.setReadTime(d.commitVersion),h.addEntry(P)))})}),E.next(()=>a.mutationQueue.removeMutationBatch(c,p))})(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(a){let c=He();for(let d=0;d<a.mutationResults.length;++d)a.mutationResults[d].transformResults.length>0&&(c=c.add(a.batch.mutations[d].key));return c})(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function sL(n){let e=Te(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Pi.getLastRemoteSnapshotVersion(t))}function kQ(n,e){let t=Te(n),r=e.snapshotVersion,i=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=t.Ns.newChangeBuffer({trackRemovals:!0});i=t.Ms;let a=[];e.targetChanges.forEach((h,p)=>{let y=i.get(p);if(!y)return;a.push(t.Pi.removeMatchingKeys(s,h.removedDocuments,p).next(()=>t.Pi.addMatchingKeys(s,h.addedDocuments,p)));let E=y.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(p)!==null?E=E.withResumeToken(Fn.EMPTY_BYTE_STRING,xe.min()).withLastLimboFreeSnapshotVersion(xe.min()):h.resumeToken.approximateByteSize()>0&&(E=E.withResumeToken(h.resumeToken,r)),i=i.insert(p,E),(function(P,M,H){return P.resumeToken.approximateByteSize()===0||M.snapshotVersion.toMicroseconds()-P.snapshotVersion.toMicroseconds()>=AQ?!0:H.addedDocuments.size+H.modifiedDocuments.size+H.removedDocuments.size>0})(y,E,h)&&a.push(t.Pi.updateTargetData(s,E))});let c=qs(),d=He();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(NQ(s,o,e.documentUpdates).next(h=>{c=h.ks,d=h.qs})),!r.isEqual(xe.min())){let h=t.Pi.getLastRemoteSnapshotVersion(s).next(p=>t.Pi.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(h)}return G.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,c,d)).next(()=>c)}).then(s=>(t.Ms=i,s))}function NQ(n,e,t){let r=He(),i=He();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=qs();return t.forEach((a,c)=>{let d=s.get(a);c.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(xe.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!d.isValidDocument()||c.version.compareTo(d.version)>0||c.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):ie(UD,"Ignoring outdated watch update for ",a,". Current version:",d.version," Watch version:",c.version)}),{ks:o,qs:i}})}function MQ(n,e){let t=Te(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=xD),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function PQ(n,e){let t=Te(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Pi.getTargetData(r,e).next(s=>s?(i=s,G.resolve(i)):t.Pi.allocateTargetId(r).next(o=>(i=new Dp(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Pi.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.xs.set(e,r.targetId)),r})}async function WS(n,e,t){let r=Te(n),i=r.Ms.get(e),s=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Id(o))throw o;ie(UD,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function $F(n,e,t){let r=Te(n),i=xe.min(),s=He();return r.persistence.runTransaction("Execute query","readwrite",o=>(function(c,d,h){let p=Te(c),y=p.xs.get(h);return y!==void 0?G.resolve(p.Ms.get(y)):p.Pi.getTargetData(d,h)})(r,o,$i(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,a.targetId).next(c=>{s=c})}).next(()=>r.Fs.getDocumentsMatchingQuery(o,e,t?i:xe.min(),t?s:He())).next(a=>(OQ(r,GK(e),a),{documents:a,Qs:s})))}function OQ(n,e,t){let r=n.Os.get(e)||xe.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.Os.set(e,r)}var T_=class{constructor(){this.activeTargetIds=XK()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var KS=class{constructor(){this.Mo=new T_,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new T_,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var QS=class{Oo(e){}shutdown(){}};var HF="ConnectivityMonitor",S_=class{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ie(HF,"Network connectivity changed: AVAILABLE");for(let e of this.qo)e(0)}ko(){ie(HF,"Network connectivity changed: UNAVAILABLE");for(let e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var s_=null;function YS(){return s_===null?s_=(function(){return 268435456+Math.round(2147483648*Math.random())})():s_++,"0x"+s_.toString(16)}var UT="RestConnection",FQ={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},JS=class{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===p_?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,t,r,i,s){let o=YS(),a=this.zo(e,t.toUriEncodedString());ie(UT,`Sending RPC '${e}' ${o}:`,a,r);let c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,i,s);let{host:d}=new URL(a),h=Pv(d);return this.Jo(e,a,c,r,h).then(p=>(ie(UT,`Received RPC '${e}' ${o}: `,p),p),p=>{throw id(UT,`RPC '${e}' ${o} failed with error: `,p,"url: ",a,"request:",r),p})}Ho(e,t,r,i,s,o){return this.Go(e,t,r,i,s)}jo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+_d})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}zo(e,t){let r=FQ[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}};var XS=class{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}};var On="WebChannelConnection",ZS=class extends JS{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,i,s){let o=YS();return new Promise((a,c)=>{let d=new NT;d.setWithCredentials(!0),d.listenOnce(MT.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case pp.NO_ERROR:let p=d.getResponseJson();ie(On,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(p)),a(p);break;case pp.TIMEOUT:ie(On,`RPC '${e}' ${o} timed out`),c(new ne(z.DEADLINE_EXCEEDED,"Request time out"));break;case pp.HTTP_ERROR:let y=d.getStatus();if(ie(On,`RPC '${e}' ${o} failed with status:`,y,"response text:",d.getResponseText()),y>0){let E=d.getResponseJson();Array.isArray(E)&&(E=E[0]);let k=E?.error;if(k&&k.status&&k.message){let P=(function(H){let Y=H.toLowerCase().replace(/_/g,"-");return Object.values(z).indexOf(Y)>=0?Y:z.UNKNOWN})(k.status);c(new ne(P,k.message))}else c(new ne(z.UNKNOWN,"Server responded with status "+d.getStatus()))}else c(new ne(z.UNAVAILABLE,"Connection failed."));break;default:me(9055,{l_:e,streamId:o,h_:d.getLastErrorCode(),P_:d.getLastError()})}}finally{ie(On,`RPC '${e}' ${o} completed.`)}});let h=JSON.stringify(i);ie(On,`RPC '${e}' ${o} sending request:`,i),d.send(t,"POST",h,r,15)})}T_(e,t,r){let i=YS(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=FT(),a=OT(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(c.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;let h=s.join("");ie(On,`Creating RPC '${e}' stream ${i}: ${h}`,c);let p=o.createWebChannel(h,c);this.I_(p);let y=!1,E=!1,k=new XS({Yo:M=>{E?ie(On,`Not sending because RPC '${e}' stream ${i} is closed:`,M):(y||(ie(On,`Opening RPC '${e}' stream ${i} transport.`),p.open(),y=!0),ie(On,`RPC '${e}' stream ${i} sending:`,M),p.send(M))},Zo:()=>p.close()}),P=(M,H,Y)=>{M.listen(H,ee=>{try{Y(ee)}catch(De){setTimeout(()=>{throw De},0)}})};return P(p,Qu.EventType.OPEN,()=>{E||(ie(On,`RPC '${e}' stream ${i} transport opened.`),k.o_())}),P(p,Qu.EventType.CLOSE,()=>{E||(E=!0,ie(On,`RPC '${e}' stream ${i} transport closed`),k.a_(),this.E_(p))}),P(p,Qu.EventType.ERROR,M=>{E||(E=!0,id(On,`RPC '${e}' stream ${i} transport errored. Name:`,M.name,"Message:",M.message),k.a_(new ne(z.UNAVAILABLE,"The operation could not be completed")))}),P(p,Qu.EventType.MESSAGE,M=>{if(!E){let H=M.data[0];ot(!!H,16349);let Y=H,ee=Y?.error||Y[0]?.error;if(ee){ie(On,`RPC '${e}' stream ${i} received error:`,ee);let De=ee.status,Ze=(function(_){let I=$t[_];if(I!==void 0)return QV(I)})(De),ve=ee.message;Ze===void 0&&(Ze=z.INTERNAL,ve="Unknown error status: "+De+" with message "+ee.message),E=!0,k.a_(new ne(Ze,ve)),p.close()}else ie(On,`RPC '${e}' stream ${i} received:`,H),k.u_(H)}}),P(a,PT.STAT_EVENT,M=>{M.stat===n_.PROXY?ie(On,`RPC '${e}' stream ${i} detected buffering proxy`):M.stat===n_.NOPROXY&&ie(On,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{k.__()},0),k}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(t=>t===e)}};function jT(){return typeof document<"u"?document:null}function W_(n){return new wS(n,!0)}var D_=class{constructor(e,t,r=1e3,i=1.5,s=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=i,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();let t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,t-r);i>0&&ie("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}};var qF="PersistentStream",A_=class{constructor(e,t,r,i,s,o,a,c){this.Mi=e,this.S_=r,this.b_=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new D_(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===z.RESOURCE_EXHAUSTED?(js(t.toString()),js("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;let e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===t&&this.G_(r,i)},r=>{e(()=>{let i=new ne(z.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(e,t){let r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.J_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return ie(qF,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget(()=>this.D_===e?t():(ie(qF,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},eD=class extends A_{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();let t=pQ(this.serializer,e),r=(function(s){if(!("targetChange"in s))return xe.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?xe.min():o.readTime?Hi(o.readTime):xe.min()})(e);return this.listener.H_(t,r)}Y_(e){let t={};t.database=CS(this.serializer),t.addTarget=(function(s,o){let a,c=o.target;if(a=lS(c)?{documents:yQ(s,c)}:{query:vQ(s,c).ft},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=YV(s,o.resumeToken);let d=IS(s,o.expectedCount);d!==null&&(a.expectedCount=d)}else if(o.snapshotVersion.compareTo(xe.min())>0){a.readTime=I_(s,o.snapshotVersion.toTimestamp());let d=IS(s,o.expectedCount);d!==null&&(a.expectedCount=d)}return a})(this.serializer,e);let r=wQ(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){let t={};t.database=CS(this.serializer),t.removeTarget=e,this.q_(t)}},tD=class extends A_{constructor(e,t,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return ot(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ot(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ot(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();let t=mQ(e.writeResults,e.commitTime),r=Hi(e.commitTime);return this.listener.na(r,t)}ra(){let e={};e.database=CS(this.serializer),this.q_(e)}ea(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>gQ(this.serializer,r))};this.q_(t)}};var nD=class{},rD=class extends nD{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new ne(z.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Go(e,ES(t,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new ne(z.UNKNOWN,s.toString())})}Ho(e,t,r,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Ho(e,ES(t,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ne(z.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}},iD=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(js(t),this.aa=!1):ie("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}};var tl="RemoteStore",sD=class{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo(o=>{r.enqueueAndForget(async()=>{nl(this)&&(ie(tl,"Restarting streams for network reachability change."),await(async function(c){let d=Te(c);d.Ea.add(4),await Mp(d),d.Ra.set("Unknown"),d.Ea.delete(4),await K_(d)})(this))})}),this.Ra=new iD(r,i)}};async function K_(n){if(nl(n))for(let e of n.da)await e(!0)}async function Mp(n){for(let e of n.da)await e(!1)}function oL(n,e){let t=Te(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),HD(t)?$D(t):Ed(t).O_()&&BD(t,e))}function jD(n,e){let t=Te(n),r=Ed(t);t.Ia.delete(e),r.O_()&&aL(t,e),t.Ia.size===0&&(r.O_()?r.L_():nl(t)&&t.Ra.set("Unknown"))}function BD(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(xe.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Ed(n).Y_(e)}function aL(n,e){n.Va.Ue(e),Ed(n).Z_(e)}function $D(n){n.Va=new _S({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),Ed(n).start(),n.Ra.ua()}function HD(n){return nl(n)&&!Ed(n).x_()&&n.Ia.size>0}function nl(n){return Te(n).Ea.size===0}function cL(n){n.Va=void 0}async function VQ(n){n.Ra.set("Online")}async function LQ(n){n.Ia.forEach((e,t)=>{BD(n,e)})}async function UQ(n,e){cL(n),HD(n)?(n.Ra.ha(e),$D(n)):n.Ra.set("Unknown")}async function jQ(n,e,t){if(n.Ra.set("Online"),e instanceof __&&e.state===2&&e.cause)try{await(async function(i,s){let o=s.cause;for(let a of s.targetIds)i.Ia.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.Ia.delete(a),i.Va.removeTarget(a))})(n,e)}catch(r){ie(tl,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await x_(n,r)}else if(e instanceof td?n.Va.Ze(e):e instanceof v_?n.Va.st(e):n.Va.tt(e),!t.isEqual(xe.min()))try{let r=await sL(n.localStore);t.compareTo(r)>=0&&await(function(s,o){let a=s.Va.Tt(o);return a.targetChanges.forEach((c,d)=>{if(c.resumeToken.approximateByteSize()>0){let h=s.Ia.get(d);h&&s.Ia.set(d,h.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,d)=>{let h=s.Ia.get(c);if(!h)return;s.Ia.set(c,h.withResumeToken(Fn.EMPTY_BYTE_STRING,h.snapshotVersion)),aL(s,c);let p=new Dp(h.target,c,d,h.sequenceNumber);BD(s,p)}),s.remoteSyncer.applyRemoteEvent(a)})(n,t)}catch(r){ie(tl,"Failed to raise snapshot:",r),await x_(n,r)}}async function x_(n,e,t){if(!Id(e))throw e;n.Ea.add(1),await Mp(n),n.Ra.set("Offline"),t||(t=()=>sL(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{ie(tl,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await K_(n)})}function lL(n,e){return e().catch(t=>x_(n,t,e))}async function Q_(n){let e=Te(n),t=ga(e),r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:xD;for(;BQ(e);)try{let i=await MQ(e.localStore,r);if(i===null){e.Ta.length===0&&t.L_();break}r=i.batchId,$Q(e,i)}catch(i){await x_(e,i)}uL(e)&&dL(e)}function BQ(n){return nl(n)&&n.Ta.length<10}function $Q(n,e){n.Ta.push(e);let t=ga(n);t.O_()&&t.X_&&t.ea(e.mutations)}function uL(n){return nl(n)&&!ga(n).x_()&&n.Ta.length>0}function dL(n){ga(n).start()}async function HQ(n){ga(n).ra()}async function qQ(n){let e=ga(n);for(let t of n.Ta)e.ea(t.mutations)}async function zQ(n,e,t){let r=n.Ta.shift(),i=gS.from(r,e,t);await lL(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),await Q_(n)}async function GQ(n,e){e&&ga(n).X_&&await(async function(r,i){if((function(o){return sQ(o)&&o!==z.ABORTED})(i.code)){let s=r.Ta.shift();ga(r).B_(),await lL(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await Q_(r)}})(n,e),uL(n)&&dL(n)}async function zF(n,e){let t=Te(n);t.asyncQueue.verifyOperationInProgress(),ie(tl,"RemoteStore received new credentials");let r=nl(t);t.Ea.add(3),await Mp(t),r&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await K_(t)}async function WQ(n,e){let t=Te(n);e?(t.Ea.delete(2),await K_(t)):e||(t.Ea.add(2),await Mp(t),t.Ra.set("Unknown"))}function Ed(n){return n.ma||(n.ma=(function(t,r,i){let s=Te(t);return s.sa(),new eD(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(n.datastore,n.asyncQueue,{Xo:VQ.bind(null,n),t_:LQ.bind(null,n),r_:UQ.bind(null,n),H_:jQ.bind(null,n)}),n.da.push(async e=>{e?(n.ma.B_(),HD(n)?$D(n):n.Ra.set("Unknown")):(await n.ma.stop(),cL(n))})),n.ma}function ga(n){return n.fa||(n.fa=(function(t,r,i){let s=Te(t);return s.sa(),new tD(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:HQ.bind(null,n),r_:GQ.bind(null,n),ta:qQ.bind(null,n),na:zQ.bind(null,n)}),n.da.push(async e=>{e?(n.fa.B_(),await Q_(n)):(await n.fa.stop(),n.Ta.length>0&&(ie(tl,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))})),n.fa}var oD=class n{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Vs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){let o=Date.now()+r,a=new n(e,t,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ne(z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function qD(n,e){if(js("AsyncQueue",`${e}: ${n}`),Id(n))return new ne(z.UNAVAILABLE,`${e}: ${n}`);throw n}var R_=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||he.comparator(t.key,r.key):(t,r)=>he.comparator(t.key,r.key),this.keyedMap=gp(),this.sortedSet=new Rt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var k_=class{constructor(){this.ga=new Rt(he.comparator)}track(e){let t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):me(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){let e=[];return this.ga.inorderTraversal((t,r)=>{e.push(r)}),e}},gd=class n{constructor(e,t,r,i,s,o,a,c,d){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=d}static fromInitialDocuments(e,t,r,i,s){let o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new n(e,t,R_.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&z_(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var aD=class{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}},cD=class{constructor(){this.queries=GF(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){let i=Te(t),s=i.queries;i.queries=GF(),s.forEach((o,a)=>{for(let c of a.Sa)c.onError(r)})})(this,new ne(z.ABORTED,"Firestore shutting down"))}};function GF(){return new Hs(n=>VV(n),z_)}async function KQ(n,e){let t=Te(n),r=3,i=e.query,s=t.queries.get(i);s?!s.ba()&&e.Da()&&(r=2):(s=new aD,r=e.Da()?0:1);try{switch(r){case 0:s.wa=await t.onListen(i,!0);break;case 1:s.wa=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(o){let a=qD(o,`Initialization of query '${Ju(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,s),s.Sa.push(e),e.va(t.onlineState),s.wa&&e.Fa(s.wa)&&zD(t)}async function QQ(n,e){let t=Te(n),r=e.query,i=3,s=t.queries.get(r);if(s){let o=s.Sa.indexOf(e);o>=0&&(s.Sa.splice(o,1),s.Sa.length===0?i=e.Da()?0:1:!s.ba()&&e.Da()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function YQ(n,e){let t=Te(n),r=!1;for(let i of e){let s=i.query,o=t.queries.get(s);if(o){for(let a of o.Sa)a.Fa(i)&&(r=!0);o.wa=i}}r&&zD(t)}function JQ(n,e,t){let r=Te(n),i=r.queries.get(e);if(i)for(let s of i.Sa)s.onError(t);r.queries.delete(e)}function zD(n){n.Ca.forEach(e=>{e.next()})}var lD,WF;(WF=lD||(lD={})).Ma="default",WF.Cache="cache";var uD=class{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new gd(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;let r=t!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;let t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=gd.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==lD.Cache}};var N_=class{constructor(e){this.key=e}},M_=class{constructor(e){this.key=e}},dD=class{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=He(),this.mutatedKeys=He(),this.eu=LV(e),this.tu=new R_(this.eu)}get nu(){return this.Ya}ru(e,t){let r=t?t.iu:new k_,i=t?t.tu:this.tu,s=t?t.mutatedKeys:this.mutatedKeys,o=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,d=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let y=i.get(h),E=G_(this.query,p)?p:null,k=!!y&&this.mutatedKeys.has(y.key),P=!!E&&(E.hasLocalMutations||this.mutatedKeys.has(E.key)&&E.hasCommittedMutations),M=!1;y&&E?y.data.isEqual(E.data)?k!==P&&(r.track({type:3,doc:E}),M=!0):this.su(y,E)||(r.track({type:2,doc:E}),M=!0,(c&&this.eu(E,c)>0||d&&this.eu(E,d)<0)&&(a=!0)):!y&&E?(r.track({type:0,doc:E}),M=!0):y&&!E&&(r.track({type:1,doc:y}),M=!0,(c||d)&&(a=!0)),M&&(E?(o=o.add(E),s=P?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{tu:o,iu:r,Cs:a,mutatedKeys:s}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;let o=e.iu.ya();o.sort((h,p)=>(function(E,k){let P=M=>{switch(M){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return me(20277,{Rt:M})}};return P(E)-P(k)})(h.type,p.type)||this.eu(h.doc,p.doc)),this.ou(r),i=i??!1;let a=t&&!i?this._u():[],c=this.Xa.size===0&&this.current&&!i?1:0,d=c!==this.Za;return this.Za=c,o.length!==0||d?{snapshot:new gd(this.query,e.tu,s,o,e.mutatedKeys,c===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new k_,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(t=>this.Ya=this.Ya.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ya=this.Ya.delete(t)),this.current=e.current)}_u(){if(!this.current)return[];let e=this.Xa;this.Xa=He(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});let t=[];return e.forEach(r=>{this.Xa.has(r)||t.push(new M_(r))}),this.Xa.forEach(r=>{e.has(r)||t.push(new N_(r))}),t}cu(e){this.Ya=e.Qs,this.Xa=He();let t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return gd.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}},GD="SyncEngine",hD=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},fD=class{constructor(e){this.key=e,this.hu=!1}},pD=class{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Hs(a=>VV(a),z_),this.Iu=new Map,this.Eu=new Set,this.du=new Rt(he.comparator),this.Au=new Map,this.Ru=new xp,this.Vu={},this.mu=new Map,this.fu=Ap.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}};async function XQ(n,e,t=!0){let r=yL(n),i,s=r.Tu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=await hL(r,e,t,!0),i}async function ZQ(n,e){let t=yL(n);await hL(t,e,!0,!1)}async function hL(n,e,t,r){let i=await PQ(n.localStore,$i(e)),s=i.targetId,o=n.sharedClientState.addLocalQueryTarget(s,t),a;return r&&(a=await eY(n,e,s,o==="current",i.resumeToken)),n.isPrimaryClient&&t&&oL(n.remoteStore,i),a}async function eY(n,e,t,r,i){n.pu=(p,y,E)=>(async function(P,M,H,Y){let ee=M.view.ru(H);ee.Cs&&(ee=await $F(P.localStore,M.query,!1).then(({documents:T})=>M.view.ru(T,ee)));let De=Y&&Y.targetChanges.get(M.targetId),Ze=Y&&Y.targetMismatches.get(M.targetId)!=null,ve=M.view.applyChanges(ee,P.isPrimaryClient,De,Ze);return QF(P,M.targetId,ve.au),ve.snapshot})(n,p,y,E);let s=await $F(n.localStore,e,!0),o=new dD(e,s.Qs),a=o.ru(s.documents),c=Sp.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),d=o.applyChanges(a,n.isPrimaryClient,c);QF(n,t,d.au);let h=new hD(e,t,o);return n.Tu.set(e,h),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),d.snapshot}async function tY(n,e,t){let r=Te(n),i=r.Tu.get(e),s=r.Iu.get(i.targetId);if(s.length>1)return r.Iu.set(i.targetId,s.filter(o=>!z_(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await WS(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&jD(r.remoteStore,i.targetId),gD(r,i.targetId)}).catch(wd)):(gD(r,i.targetId),await WS(r.localStore,i.targetId,!0))}async function nY(n,e){let t=Te(n),r=t.Tu.get(e),i=t.Iu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),jD(t.remoteStore,r.targetId))}async function rY(n,e,t){let r=uY(n);try{let i=await(function(o,a){let c=Te(o),d=Gt.now(),h=a.reduce((E,k)=>E.add(k.key),He()),p,y;return c.persistence.runTransaction("Locally write mutations","readwrite",E=>{let k=qs(),P=He();return c.Ns.getEntries(E,h).next(M=>{k=M,k.forEach((H,Y)=>{Y.isValidDocument()||(P=P.add(H))})}).next(()=>c.localDocuments.getOverlayedDocuments(E,k)).next(M=>{p=M;let H=[];for(let Y of a){let ee=iQ(Y,p.get(Y.key).overlayedDocument);ee!=null&&H.push(new zi(Y.key,ee,RV(ee.value.mapValue),Us.exists(!0)))}return c.mutationQueue.addMutationBatch(E,d,H,a)}).next(M=>{y=M;let H=M.applyToLocalDocumentSet(p,P);return c.documentOverlayCache.saveOverlays(E,M.batchId,H)})}).then(()=>({batchId:y.batchId,changes:jV(p)}))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(o,a,c){let d=o.Vu[o.currentUser.toKey()];d||(d=new Rt($e)),d=d.insert(a,c),o.Vu[o.currentUser.toKey()]=d})(r,i.batchId,t),await Pp(r,i.changes),await Q_(r.remoteStore)}catch(i){let s=qD(i,"Failed to persist write");t.reject(s)}}async function fL(n,e){let t=Te(n);try{let r=await kQ(t.localStore,e);e.targetChanges.forEach((i,s)=>{let o=t.Au.get(s);o&&(ot(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.hu=!0:i.modifiedDocuments.size>0?ot(o.hu,14607):i.removedDocuments.size>0&&(ot(o.hu,42227),o.hu=!1))}),await Pp(t,r,e)}catch(r){await wd(r)}}function KF(n,e,t){let r=Te(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Tu.forEach((s,o)=>{let a=o.view.va(e);a.snapshot&&i.push(a.snapshot)}),(function(o,a){let c=Te(o);c.onlineState=a;let d=!1;c.queries.forEach((h,p)=>{for(let y of p.Sa)y.va(a)&&(d=!0)}),d&&zD(c)})(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function iY(n,e,t){let r=Te(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Au.get(e),s=i&&i.key;if(s){let o=new Rt(he.comparator);o=o.insert(s,ai.newNoDocument(s,xe.min()));let a=He().add(s),c=new y_(xe.min(),new Map,new Rt($e),o,a);await fL(r,c),r.du=r.du.remove(s),r.Au.delete(e),WD(r)}else await WS(r.localStore,e,!1).then(()=>gD(r,e,t)).catch(wd)}async function sY(n,e){let t=Te(n),r=e.batch.batchId;try{let i=await RQ(t.localStore,e);gL(t,r,null),pL(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await Pp(t,i)}catch(i){await wd(i)}}async function oY(n,e,t){let r=Te(n);try{let i=await(function(o,a){let c=Te(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let h;return c.mutationQueue.lookupMutationBatch(d,a).next(p=>(ot(p!==null,37113),h=p.keys(),c.mutationQueue.removeMutationBatch(d,p))).next(()=>c.mutationQueue.performConsistencyCheck(d)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(d,h,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,h)).next(()=>c.localDocuments.getDocuments(d,h))})})(r.localStore,e);gL(r,e,t),pL(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await Pp(r,i)}catch(i){await wd(i)}}function pL(n,e){(n.mu.get(e)||[]).forEach(t=>{t.resolve()}),n.mu.delete(e)}function gL(n,e,t){let r=Te(n),i=r.Vu[r.currentUser.toKey()];if(i){let s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function gD(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach(r=>{n.Ru.containsKey(r)||mL(n,r)})}function mL(n,e){n.Eu.delete(e.path.canonicalString());let t=n.du.get(e);t!==null&&(jD(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),WD(n))}function QF(n,e,t){for(let r of t)r instanceof N_?(n.Ru.addReference(r.key,e),aY(n,r)):r instanceof M_?(ie(GD,"Document no longer in limbo: "+r.key),n.Ru.removeReference(r.key,e),n.Ru.containsKey(r.key)||mL(n,r.key)):me(19791,{wu:r})}function aY(n,e){let t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Eu.has(r)||(ie(GD,"New document in limbo: "+t),n.Eu.add(r),WD(n))}function WD(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){let e=n.Eu.values().next().value;n.Eu.delete(e);let t=new he(It.fromString(e)),r=n.fu.next();n.Au.set(r,new fD(t)),n.du=n.du.insert(t,r),oL(n.remoteStore,new Dp($i(FD(t.path)),r,"TargetPurposeLimboResolution",AD.ce))}}async function Pp(n,e,t){let r=Te(n),i=[],s=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((a,c)=>{o.push(r.pu(c,e,t).then(d=>{if((d||t)&&r.isPrimaryClient){let h=d?!d.fromCache:t?.targetChanges.get(c.targetId)?.current;r.sharedClientState.updateQueryState(c.targetId,h?"current":"not-current")}if(d){i.push(d);let h=HS.As(c.targetId,d);s.push(h)}}))}),await Promise.all(o),r.Pu.H_(i),await(async function(c,d){let h=Te(c);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>G.forEach(d,y=>G.forEach(y.Es,E=>h.persistence.referenceDelegate.addReference(p,y.targetId,E)).next(()=>G.forEach(y.ds,E=>h.persistence.referenceDelegate.removeReference(p,y.targetId,E)))))}catch(p){if(!Id(p))throw p;ie(UD,"Failed to update sequence numbers: "+p)}for(let p of d){let y=p.targetId;if(!p.fromCache){let E=h.Ms.get(y),k=E.snapshotVersion,P=E.withLastLimboFreeSnapshotVersion(k);h.Ms=h.Ms.insert(y,P)}}})(r.localStore,s))}async function cY(n,e){let t=Te(n);if(!t.currentUser.isEqual(e)){ie(GD,"User change. New user:",e.toKey());let r=await iL(t.localStore,e);t.currentUser=e,(function(s,o){s.mu.forEach(a=>{a.forEach(c=>{c.reject(new ne(z.CANCELLED,o))})}),s.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Pp(t,r.Ls)}}function lY(n,e){let t=Te(n),r=t.Au.get(e);if(r&&r.hu)return He().add(r.key);{let i=He(),s=t.Iu.get(e);if(!s)return i;for(let o of s){let a=t.Tu.get(o);i=i.unionWith(a.view.nu)}return i}}function yL(n){let e=Te(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=fL.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=lY.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=iY.bind(null,e),e.Pu.H_=YQ.bind(null,e.eventManager),e.Pu.yu=JQ.bind(null,e.eventManager),e}function uY(n){let e=Te(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=sY.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=oY.bind(null,e),e}var vL=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=W_(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,r){return null}Mu(t,r){return null}vu(t){return xQ(this.persistence,new zS,t.initialUser,this.serializer)}Cu(t){return new b_($S.mi,this.serializer)}Du(t){return new KS}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}return n.provider={build:()=>new n},n})(),mD=class extends vL{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){ot(this.persistence.referenceDelegate instanceof C_,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new xS(r,e.asyncQueue,t)}Cu(e){let t=this.cacheSizeBytes!==void 0?Rr.withCacheSize(this.cacheSizeBytes):Rr.DEFAULT;return new b_(r=>C_.mi(r,t),this.serializer)}};var dY=(()=>{class n{async initialize(t,r){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>KF(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=cY.bind(null,this.syncEngine),await WQ(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new cD})()}createDatastore(t){let r=W_(t.databaseInfo.databaseId),i=(function(o){return new ZS(o)})(t.databaseInfo);return(function(o,a,c,d){return new rD(o,a,c,d)})(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return(function(i,s,o,a,c){return new sD(i,s,o,a,c)})(this.localStore,this.datastore,t.asyncQueue,r=>KF(this.syncEngine,r,0),(function(){return S_.v()?new S_:new QS})())}createSyncEngine(t,r){return(function(s,o,a,c,d,h,p){let y=new pD(s,o,a,c,d,h);return p&&(y.gu=!0),y})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}async terminate(){await(async function(r){let i=Te(r);ie(tl,"RemoteStore shutting down."),i.Ea.add(5),await Mp(i),i.Aa.shutdown(),i.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}return n.provider={build:()=>new n},n})();var yD=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):js("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var ma="FirestoreClient",vD=class{constructor(e,t,r,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=vn.UNAUTHENTICATED,this.clientId=wp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{ie(ma,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(ie(ma,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Vs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=qD(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}};async function BT(n,e){n.asyncQueue.verifyOperationInProgress(),ie(ma,"Initializing OfflineComponentProvider");let t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async i=>{r.isEqual(i)||(await iL(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function YF(n,e){n.asyncQueue.verifyOperationInProgress();let t=await hY(n);ie(ma,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>zF(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>zF(e.remoteStore,i)),n._onlineComponents=e}async function hY(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ie(ma,"Using user provided OfflineComponentProvider");try{await BT(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===z.FAILED_PRECONDITION||i.code===z.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;id("Error using user provided cache. Falling back to memory cache: "+t),await BT(n,new vL)}}else ie(ma,"Using default OfflineComponentProvider"),await BT(n,new mD(void 0));return n._offlineComponents}async function _L(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ie(ma,"Using user provided OnlineComponentProvider"),await YF(n,n._uninitializedComponentsProvider._online)):(ie(ma,"Using default OnlineComponentProvider"),await YF(n,new dY))),n._onlineComponents}function fY(n){return _L(n).then(e=>e.syncEngine)}async function JF(n){let e=await _L(n),t=e.eventManager;return t.onListen=XQ.bind(null,e.syncEngine),t.onUnlisten=tY.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=ZQ.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=nY.bind(null,e.syncEngine),t}function wL(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var XF=new Map;var IL="firestore.googleapis.com",ZF=!0,P_=class{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ne(z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=IL,this.ssl=ZF}else this.host=e.host,this.ssl=e.ssl??ZF;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=rL;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<SQ)throw new ne(z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}EK("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=wL(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new ne(z.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new ne(z.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new ne(z.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},md=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new P_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ne(z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ne(z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new P_(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new $T;switch(r.type){case"firstParty":return new GT(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ne(z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){let r=XF.get(t);r&&(ie("ComponentProvider","Removing Datastore"),XF.delete(t),r.terminate())})(this),Promise.resolve()}};function pY(n,e,t,r={}){n=Ls(n,md);let i=Pv(e),s=n._getSettings(),o=oe(B({},s),{emulatorOptions:n._getEmulatorOptions()}),a=`${e}:${t}`;i&&(i2(`https://${a}`),o2("Firestore",!0)),s.host!==IL&&s.host!==a&&id("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let c=oe(B({},s),{host:a,ssl:i,emulatorOptions:r});if(!Gu(c,o)&&(n._setSettings(c),r.mockUserToken)){let d,h;if(typeof r.mockUserToken=="string")d=r.mockUserToken,h=vn.MOCK_USER;else{d=s2(r.mockUserToken,n._app?.options.projectId);let p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new ne(z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new vn(p)}n._authCredentials=new HT(new l_(d,h))}}var yd=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},wn=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ua(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}toJSON(){return{type:n._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(Np(t,n._jsonSchema))return new n(e,r||null,new he(It.fromString(t.referencePath)))}};wn._jsonSchemaVersion="firestore/documentReference/1.0",wn._jsonSchema={type:zt("string",wn._jsonSchemaVersion),referencePath:zt("string")};var ua=class n extends yd{constructor(e,t,r){super(e,t,FD(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new wn(this.firestore,null,new he(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function Op(n,e,...t){if(n=oi(n),oV("collection","path",e),n instanceof md){let r=It.fromString(e,...t);return yF(r),new ua(n,null,r)}{if(!(n instanceof wn||n instanceof ua))throw new ne(z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(It.fromString(e,...t));return yF(r),new ua(n.firestore,null,r)}}function Wt(n,e,...t){if(n=oi(n),arguments.length===1&&(e=wp.newId()),oV("doc","path",e),n instanceof md){let r=It.fromString(e,...t);return mF(r),new wn(n,null,new he(r))}{if(!(n instanceof wn||n instanceof ua))throw new ne(z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(It.fromString(e,...t));return mF(r),new wn(n.firestore,n instanceof ua?n.converter:null,new he(r))}}var eV="AsyncQueue",O_=class{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new D_(this,"async_queue_retry"),this._c=()=>{let r=jT();r&&ie(eV,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;let t=jT();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;let t=jT();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});let t=new Vs;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Id(e))throw e;ie(eV,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){let t=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,js("INTERNAL UNHANDLED ERROR: ",tV(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);let i=oD.createAndSchedule(this,e,t,r,s=>this.hc(s));return this.tc.push(i),i}uc(){this.nc&&me(47125,{Pc:tV(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(let t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){let t=this.tc.indexOf(e);this.tc.splice(t,1)}};function tV(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}function nV(n){return(function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let s of r)if(s in i&&typeof i[s]=="function")return!0;return!1})(n,["next","error","complete"])}var ya=class extends md{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new O_,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new O_(e),this._firestoreClient=void 0,await e}}};function Y_(n,e){let t=typeof n=="object"?n:v2(),r=typeof n=="string"?n:e||p_,i=g2(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let s=r2("firestore");s&&pY(i,...s)}return i}function EL(n){if(n._terminated)throw new ne(z.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||gY(n),n._firestoreClient}function gY(n){let e=n._freezeSettings(),t=(function(i,s,o,a){return new JT(i,s,o,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,wL(a.experimentalLongPollingOptions),a.useFetchStreams,a.isUsingEmulator)})(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new vD(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(i){let s=i?._online.build();return{_offline:i?._offline.build(s),_online:s}})(n._componentsProvider))}var da=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(Fn.fromBase64String(e))}catch(t){throw new ne(z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(Fn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Np(e,n._jsonSchema))return n.fromBase64String(e.bytes)}};da._jsonSchemaVersion="firestore/bytes/1.0",da._jsonSchema={type:zt("string",da._jsonSchemaVersion),bytes:zt("string")};var vd=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ne(z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new gr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Rp=class{constructor(e){this._methodName=e}};var ha=class n{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ne(z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ne(z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return $e(this._lat,e._lat)||$e(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:n._jsonSchemaVersion}}static fromJSON(e){if(Np(e,n._jsonSchema))return new n(e.latitude,e.longitude)}};ha._jsonSchemaVersion="firestore/geoPoint/1.0",ha._jsonSchema={type:zt("string",ha._jsonSchemaVersion),latitude:zt("number"),longitude:zt("number")};var fa=class n{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0})(this._values,e._values)}toJSON(){return{type:n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Np(e,n._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new n(e.vectorValues);throw new ne(z.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};fa._jsonSchemaVersion="firestore/vectorValue/1.0",fa._jsonSchema={type:zt("string",fa._jsonSchemaVersion),vectorValues:zt("object")};var mY=/^__.*__$/,_D=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new zi(e,this.data,this.fieldMask,t,this.fieldTransforms):new el(e,this.data,t,this.fieldTransforms)}},F_=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new zi(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function bL(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw me(40011,{Ac:n})}}var wD=class n{constructor(e,t,r,i,s,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new n(B(B({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){let t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.gc(e),r}yc(e){let t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return L_(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(bL(this.Ac)&&mY.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}},ID=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||W_(e)}Cc(e,t,r,i=!1){return new wD({Ac:e,methodName:t,Dc:r,path:gr.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function KD(n){let e=n._freezeSettings(),t=W_(n._databaseId);return new ID(n._databaseId,!!e.ignoreUndefinedProperties,t)}function yY(n,e,t,r,i,s={}){let o=n.Cc(s.merge||s.mergeFields?2:0,e,t,i);QD("Data must be an object, but it was:",o,r);let a=CL(r,o),c,d;if(s.merge)c=new kr(o.fieldMask),d=o.fieldTransforms;else if(s.mergeFields){let h=[];for(let p of s.mergeFields){let y=ED(e,p,t);if(!o.contains(y))throw new ne(z.INVALID_ARGUMENT,`Field '${y}' is specified in your field mask but missing from your input data.`);SL(h,y)||h.push(y)}c=new kr(h),d=o.fieldTransforms.filter(p=>c.covers(p.field))}else c=null,d=o.fieldTransforms;return new _D(new pr(a),c,d)}var V_=class n extends Rp{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function vY(n,e,t,r){let i=n.Cc(1,e,t);QD("Data must be an object, but it was:",i,r);let s=[],o=pr.empty();va(r,(c,d)=>{let h=YD(e,c,t);d=oi(d);let p=i.yc(h);if(d instanceof V_)s.push(h);else{let y=Fp(d,p);y!=null&&(s.push(h),o.set(h,y))}});let a=new kr(s);return new F_(o,a,i.fieldTransforms)}function _Y(n,e,t,r,i,s){let o=n.Cc(1,e,t),a=[ED(e,r,t)],c=[i];if(s.length%2!=0)throw new ne(z.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let y=0;y<s.length;y+=2)a.push(ED(e,s[y])),c.push(s[y+1]);let d=[],h=pr.empty();for(let y=a.length-1;y>=0;--y)if(!SL(d,a[y])){let E=a[y],k=c[y];k=oi(k);let P=o.yc(E);if(k instanceof V_)d.push(E);else{let M=Fp(k,P);M!=null&&(d.push(E),h.set(E,M))}}let p=new kr(d);return new F_(h,p,o.fieldTransforms)}function wY(n,e,t,r=!1){return Fp(t,n.Cc(r?4:3,e))}function Fp(n,e){if(TL(n=oi(n)))return QD("Unsupported field value:",e,n),CL(n,e);if(n instanceof Rp)return(function(r,i){if(!bL(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);let s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,i){let s=[],o=0;for(let a of r){let c=Fp(a,i.wc(o));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}})(n,e)}return(function(r,i){if((r=oi(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return ZK(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let s=Gt.fromDate(r);return{timestampValue:I_(i.serializer,s)}}if(r instanceof Gt){let s=new Gt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:I_(i.serializer,s)}}if(r instanceof ha)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof da)return{bytesValue:YV(i.serializer,r._byteString)};if(r instanceof wn){let s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:LD(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof fa)return(function(o,a){return{mapValue:{fields:{[kD]:{stringValue:ND},[od]:{arrayValue:{values:o.toArray().map(d=>{if(typeof d!="number")throw a.Sc("VectorValues must only contain numeric values.");return VD(a.serializer,d)})}}}}}})(r,i);throw i.Sc(`Unsupported field value: ${$_(r)}`)})(n,e)}function CL(n,e){let t={};return EV(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):va(n,(r,i)=>{let s=Fp(i,e.mc(r));s!=null&&(t[r]=s)}),{mapValue:{fields:t}}}function TL(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Gt||n instanceof ha||n instanceof da||n instanceof wn||n instanceof Rp||n instanceof fa)}function QD(n,e,t){if(!TL(t)||!aV(t)){let r=$_(t);throw r==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+r)}}function ED(n,e,t){if((e=oi(e))instanceof vd)return e._internalPath;if(typeof e=="string")return YD(n,e);throw L_("Field path arguments must be of type string or ",n,!1,void 0,t)}var IY=new RegExp("[~\\*/\\[\\]]");function YD(n,e,t){if(e.search(IY)>=0)throw L_(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new vd(...e.split("."))._internalPath}catch{throw L_(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function L_(n,e,t,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new ne(z.INVALID_ARGUMENT,a+n+c)}function SL(n,e){return n.some(t=>t.isEqual(e))}var U_=class{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new wn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new bD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(JD("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},bD=class extends U_{data(){return super.data()}};function JD(n,e){return typeof e=="string"?YD(n,e):e instanceof vd?e._internalPath:e._delegate._internalPath}function EY(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ne(z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var kp=class{},CD=class extends kp{};function Vp(n,e,...t){let r=[];e instanceof kp&&r.push(e),r=r.concat(t),(function(s){let o=s.filter(c=>c instanceof TD).length,a=s.filter(c=>c instanceof j_).length;if(o>1||o>0&&a>0)throw new ne(z.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(let i of r)n=i._apply(n);return n}var j_=class n extends CD{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return DL(e._query,t),new yd(e.firestore,e.converter,uS(e._query,t))}_parse(e){let t=KD(e.firestore);return(function(s,o,a,c,d,h,p){let y;if(d.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new ne(z.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){iV(p,h);let k=[];for(let P of p)k.push(rV(c,s,P));y={arrayValue:{values:k}}}else y=rV(c,s,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||iV(p,h),y=wY(a,o,p,h==="in"||h==="not-in");return qt.create(d,h,y)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function Lp(n,e,t){let r=e,i=JD("where",n);return j_._create(i,r,t)}var TD=class n extends kp{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:ci.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:((function(i,s){let o=i,a=s.getFlattenedFilters();for(let c of a)DL(o,c),o=uS(o,c)})(e._query,t),new yd(e.firestore,e.converter,uS(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};function rV(n,e,t){if(typeof(t=oi(t))=="string"){if(t==="")throw new ne(z.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!FV(e)&&t.indexOf("/")!==-1)throw new ne(z.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(It.fromString(t));if(!he.isDocumentKey(r))throw new ne(z.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return CF(n,new he(r))}if(t instanceof wn)return CF(n,t._key);throw new ne(z.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${$_(t)}.`)}function iV(n,e){if(!Array.isArray(n)||n.length===0)throw new ne(z.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function DL(n,e){let t=(function(i,s){for(let o of i)for(let a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null})(n.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new ne(z.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ne(z.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var SD=class{convertValue(e,t="none"){switch(pa(e)){case 0:return null;case 1:return e.booleanValue;case 2:return wt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes($s(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw me(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return va(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertVectorValue(e){let t=e.fields?.[od].arrayValue?.values?.map(r=>wt(r.doubleValue));return new fa(t)}convertGeoPoint(e){return new ha(wt(e.latitude),wt(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=q_(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(bp(e));default:return null}}convertTimestamp(e){let t=Bs(e);return new Gt(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=It.fromString(e);ot(nL(r),9688,{name:e});let i=new g_(r.get(1),r.get(3)),s=new he(r.popFirst(5));return i.isEqual(t)||js(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}};function bY(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var Wc=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Kc=class n extends U_{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new nd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(JD("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ne(z.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,t={};return t.type=n._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};Kc._jsonSchemaVersion="firestore/documentSnapshot/1.0",Kc._jsonSchema={type:zt("string",Kc._jsonSchemaVersion),bundleSource:zt("string","DocumentSnapshot"),bundleName:zt("string"),bundle:zt("string")};var nd=class extends Kc{data(e={}){return super.data(e)}},rd=class n{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Wc(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new nd(this._firestore,this._userDataWriter,r.key,r,new Wc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ne(z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{let c=new nd(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Wc(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{let c=new nd(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Wc(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),d=-1,h=-1;return a.type!==0&&(d=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:CY(a.type),doc:c,oldIndex:d,newIndex:h}})}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ne(z.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=n._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=wp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let t=[],r=[],i=[];return this.docs.forEach(s=>{s._document!==null&&(t.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function CY(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return me(61501,{type:n})}}rd._jsonSchemaVersion="firestore/querySnapshot/1.0",rd._jsonSchema={type:zt("string",rd._jsonSchemaVersion),bundleSource:zt("string","QuerySnapshot"),bundleName:zt("string"),bundle:zt("string")};var B_=class extends SD{constructor(e){super(),this.firestore=e}convertBytes(e){return new da(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new wn(this.firestore,null,t)}};function zs(n,e,t){n=Ls(n,wn);let r=Ls(n.firestore,ya),i=bY(n.converter,e,t);return XD(r,[yY(KD(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,Us.none())])}function _a(n,e,t,...r){n=Ls(n,wn);let i=Ls(n.firestore,ya),s=KD(i),o;return o=typeof(e=oi(e))=="string"||e instanceof vd?_Y(s,"updateDoc",n._key,e,t,r):vY(s,"updateDoc",n._key,e),XD(i,[o.toMutation(n._key,Us.exists(!0))])}function rl(n){return XD(Ls(n.firestore,ya),[new Tp(n._key,Us.none())])}function Up(n,...e){n=oi(n);let t={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||nV(e[r])||(t=e[r++]);let i={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(nV(e[r])){let c=e[r];e[r]=c.next?.bind(c),e[r+1]=c.error?.bind(c),e[r+2]=c.complete?.bind(c)}let s,o,a;if(n instanceof wn)o=Ls(n.firestore,ya),a=FD(n._key.path),s={next:c=>{e[r]&&e[r](TY(o,n,c))},error:e[r+1],complete:e[r+2]};else{let c=Ls(n,yd);o=Ls(c.firestore,ya),a=c._query;let d=new B_(o);s={next:h=>{e[r]&&e[r](new rd(o,d,c,h))},error:e[r+1],complete:e[r+2]},EY(n._query)}return(function(d,h,p,y){let E=new yD(y),k=new uD(h,E,p);return d.asyncQueue.enqueueAndForget(async()=>KQ(await JF(d),k)),()=>{E.Nu(),d.asyncQueue.enqueueAndForget(async()=>QQ(await JF(d),k))}})(EL(o),a,i,s)}function XD(n,e){return(function(r,i){let s=new Vs;return r.asyncQueue.enqueueAndForget(async()=>rY(await fY(r),i,s)),s.promise})(EL(n),e)}function TY(n,e,t){let r=t.docs.get(e._key),i=new B_(n);return new Kc(n,i,e._key,r,new Wc(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(i){_d=i})(y2),rp(new ks("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),a=new ya(new qT(r.getProvider("auth-internal")),new WT(o,r.getProvider("app-check-internal")),(function(d,h){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new ne(z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new g_(d.options.projectId,h)})(o,i),o);return s=B({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),sa(fF,pF,e),sa(fF,pF,"esm2020")})();var AL=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},xL={};var Gs,ZD;(function(){var n;function e(T,_){function I(){}I.prototype=_.prototype,T.D=_.prototype,T.prototype=new I,T.prototype.constructor=T,T.C=function(C,b,A){for(var w=Array(arguments.length-2),vt=2;vt<arguments.length;vt++)w[vt-2]=arguments[vt];return _.prototype[b].apply(C,w)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(T,_,I){I||(I=0);var C=Array(16);if(typeof _=="string")for(var b=0;16>b;++b)C[b]=_.charCodeAt(I++)|_.charCodeAt(I++)<<8|_.charCodeAt(I++)<<16|_.charCodeAt(I++)<<24;else for(b=0;16>b;++b)C[b]=_[I++]|_[I++]<<8|_[I++]<<16|_[I++]<<24;_=T.g[0],I=T.g[1],b=T.g[2];var A=T.g[3],w=_+(A^I&(b^A))+C[0]+3614090360&4294967295;_=I+(w<<7&4294967295|w>>>25),w=A+(b^_&(I^b))+C[1]+3905402710&4294967295,A=_+(w<<12&4294967295|w>>>20),w=b+(I^A&(_^I))+C[2]+606105819&4294967295,b=A+(w<<17&4294967295|w>>>15),w=I+(_^b&(A^_))+C[3]+3250441966&4294967295,I=b+(w<<22&4294967295|w>>>10),w=_+(A^I&(b^A))+C[4]+4118548399&4294967295,_=I+(w<<7&4294967295|w>>>25),w=A+(b^_&(I^b))+C[5]+1200080426&4294967295,A=_+(w<<12&4294967295|w>>>20),w=b+(I^A&(_^I))+C[6]+2821735955&4294967295,b=A+(w<<17&4294967295|w>>>15),w=I+(_^b&(A^_))+C[7]+4249261313&4294967295,I=b+(w<<22&4294967295|w>>>10),w=_+(A^I&(b^A))+C[8]+1770035416&4294967295,_=I+(w<<7&4294967295|w>>>25),w=A+(b^_&(I^b))+C[9]+2336552879&4294967295,A=_+(w<<12&4294967295|w>>>20),w=b+(I^A&(_^I))+C[10]+4294925233&4294967295,b=A+(w<<17&4294967295|w>>>15),w=I+(_^b&(A^_))+C[11]+2304563134&4294967295,I=b+(w<<22&4294967295|w>>>10),w=_+(A^I&(b^A))+C[12]+1804603682&4294967295,_=I+(w<<7&4294967295|w>>>25),w=A+(b^_&(I^b))+C[13]+4254626195&4294967295,A=_+(w<<12&4294967295|w>>>20),w=b+(I^A&(_^I))+C[14]+2792965006&4294967295,b=A+(w<<17&4294967295|w>>>15),w=I+(_^b&(A^_))+C[15]+1236535329&4294967295,I=b+(w<<22&4294967295|w>>>10),w=_+(b^A&(I^b))+C[1]+4129170786&4294967295,_=I+(w<<5&4294967295|w>>>27),w=A+(I^b&(_^I))+C[6]+3225465664&4294967295,A=_+(w<<9&4294967295|w>>>23),w=b+(_^I&(A^_))+C[11]+643717713&4294967295,b=A+(w<<14&4294967295|w>>>18),w=I+(A^_&(b^A))+C[0]+3921069994&4294967295,I=b+(w<<20&4294967295|w>>>12),w=_+(b^A&(I^b))+C[5]+3593408605&4294967295,_=I+(w<<5&4294967295|w>>>27),w=A+(I^b&(_^I))+C[10]+38016083&4294967295,A=_+(w<<9&4294967295|w>>>23),w=b+(_^I&(A^_))+C[15]+3634488961&4294967295,b=A+(w<<14&4294967295|w>>>18),w=I+(A^_&(b^A))+C[4]+3889429448&4294967295,I=b+(w<<20&4294967295|w>>>12),w=_+(b^A&(I^b))+C[9]+568446438&4294967295,_=I+(w<<5&4294967295|w>>>27),w=A+(I^b&(_^I))+C[14]+3275163606&4294967295,A=_+(w<<9&4294967295|w>>>23),w=b+(_^I&(A^_))+C[3]+4107603335&4294967295,b=A+(w<<14&4294967295|w>>>18),w=I+(A^_&(b^A))+C[8]+1163531501&4294967295,I=b+(w<<20&4294967295|w>>>12),w=_+(b^A&(I^b))+C[13]+2850285829&4294967295,_=I+(w<<5&4294967295|w>>>27),w=A+(I^b&(_^I))+C[2]+4243563512&4294967295,A=_+(w<<9&4294967295|w>>>23),w=b+(_^I&(A^_))+C[7]+1735328473&4294967295,b=A+(w<<14&4294967295|w>>>18),w=I+(A^_&(b^A))+C[12]+2368359562&4294967295,I=b+(w<<20&4294967295|w>>>12),w=_+(I^b^A)+C[5]+4294588738&4294967295,_=I+(w<<4&4294967295|w>>>28),w=A+(_^I^b)+C[8]+2272392833&4294967295,A=_+(w<<11&4294967295|w>>>21),w=b+(A^_^I)+C[11]+1839030562&4294967295,b=A+(w<<16&4294967295|w>>>16),w=I+(b^A^_)+C[14]+4259657740&4294967295,I=b+(w<<23&4294967295|w>>>9),w=_+(I^b^A)+C[1]+2763975236&4294967295,_=I+(w<<4&4294967295|w>>>28),w=A+(_^I^b)+C[4]+1272893353&4294967295,A=_+(w<<11&4294967295|w>>>21),w=b+(A^_^I)+C[7]+4139469664&4294967295,b=A+(w<<16&4294967295|w>>>16),w=I+(b^A^_)+C[10]+3200236656&4294967295,I=b+(w<<23&4294967295|w>>>9),w=_+(I^b^A)+C[13]+681279174&4294967295,_=I+(w<<4&4294967295|w>>>28),w=A+(_^I^b)+C[0]+3936430074&4294967295,A=_+(w<<11&4294967295|w>>>21),w=b+(A^_^I)+C[3]+3572445317&4294967295,b=A+(w<<16&4294967295|w>>>16),w=I+(b^A^_)+C[6]+76029189&4294967295,I=b+(w<<23&4294967295|w>>>9),w=_+(I^b^A)+C[9]+3654602809&4294967295,_=I+(w<<4&4294967295|w>>>28),w=A+(_^I^b)+C[12]+3873151461&4294967295,A=_+(w<<11&4294967295|w>>>21),w=b+(A^_^I)+C[15]+530742520&4294967295,b=A+(w<<16&4294967295|w>>>16),w=I+(b^A^_)+C[2]+3299628645&4294967295,I=b+(w<<23&4294967295|w>>>9),w=_+(b^(I|~A))+C[0]+4096336452&4294967295,_=I+(w<<6&4294967295|w>>>26),w=A+(I^(_|~b))+C[7]+1126891415&4294967295,A=_+(w<<10&4294967295|w>>>22),w=b+(_^(A|~I))+C[14]+2878612391&4294967295,b=A+(w<<15&4294967295|w>>>17),w=I+(A^(b|~_))+C[5]+4237533241&4294967295,I=b+(w<<21&4294967295|w>>>11),w=_+(b^(I|~A))+C[12]+1700485571&4294967295,_=I+(w<<6&4294967295|w>>>26),w=A+(I^(_|~b))+C[3]+2399980690&4294967295,A=_+(w<<10&4294967295|w>>>22),w=b+(_^(A|~I))+C[10]+4293915773&4294967295,b=A+(w<<15&4294967295|w>>>17),w=I+(A^(b|~_))+C[1]+2240044497&4294967295,I=b+(w<<21&4294967295|w>>>11),w=_+(b^(I|~A))+C[8]+1873313359&4294967295,_=I+(w<<6&4294967295|w>>>26),w=A+(I^(_|~b))+C[15]+4264355552&4294967295,A=_+(w<<10&4294967295|w>>>22),w=b+(_^(A|~I))+C[6]+2734768916&4294967295,b=A+(w<<15&4294967295|w>>>17),w=I+(A^(b|~_))+C[13]+1309151649&4294967295,I=b+(w<<21&4294967295|w>>>11),w=_+(b^(I|~A))+C[4]+4149444226&4294967295,_=I+(w<<6&4294967295|w>>>26),w=A+(I^(_|~b))+C[11]+3174756917&4294967295,A=_+(w<<10&4294967295|w>>>22),w=b+(_^(A|~I))+C[2]+718787259&4294967295,b=A+(w<<15&4294967295|w>>>17),w=I+(A^(b|~_))+C[9]+3951481745&4294967295,T.g[0]=T.g[0]+_&4294967295,T.g[1]=T.g[1]+(b+(w<<21&4294967295|w>>>11))&4294967295,T.g[2]=T.g[2]+b&4294967295,T.g[3]=T.g[3]+A&4294967295}r.prototype.u=function(T,_){_===void 0&&(_=T.length);for(var I=_-this.blockSize,C=this.B,b=this.h,A=0;A<_;){if(b==0)for(;A<=I;)i(this,T,A),A+=this.blockSize;if(typeof T=="string"){for(;A<_;)if(C[b++]=T.charCodeAt(A++),b==this.blockSize){i(this,C),b=0;break}}else for(;A<_;)if(C[b++]=T[A++],b==this.blockSize){i(this,C),b=0;break}}this.h=b,this.o+=_},r.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var _=1;_<T.length-8;++_)T[_]=0;var I=8*this.o;for(_=T.length-8;_<T.length;++_)T[_]=I&255,I/=256;for(this.u(T),T=Array(16),_=I=0;4>_;++_)for(var C=0;32>C;C+=8)T[I++]=this.g[_]>>>C&255;return T};function s(T,_){var I=a;return Object.prototype.hasOwnProperty.call(I,T)?I[T]:I[T]=_(T)}function o(T,_){this.h=_;for(var I=[],C=!0,b=T.length-1;0<=b;b--){var A=T[b]|0;C&&A==_||(I[b]=A,C=!1)}this.g=I}var a={};function c(T){return-128<=T&&128>T?s(T,function(_){return new o([_|0],0>_?-1:0)}):new o([T|0],0>T?-1:0)}function d(T){if(isNaN(T)||!isFinite(T))return p;if(0>T)return M(d(-T));for(var _=[],I=1,C=0;T>=I;C++)_[C]=T/I|0,I*=4294967296;return new o(_,0)}function h(T,_){if(T.length==0)throw Error("number format error: empty string");if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(T.charAt(0)=="-")return M(h(T.substring(1),_));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=d(Math.pow(_,8)),C=p,b=0;b<T.length;b+=8){var A=Math.min(8,T.length-b),w=parseInt(T.substring(b,b+A),_);8>A?(A=d(Math.pow(_,A)),C=C.j(A).add(d(w))):(C=C.j(I),C=C.add(d(w)))}return C}var p=c(0),y=c(1),E=c(16777216);n=o.prototype,n.m=function(){if(P(this))return-M(this).m();for(var T=0,_=1,I=0;I<this.g.length;I++){var C=this.i(I);T+=(0<=C?C:4294967296+C)*_,_*=4294967296}return T},n.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(k(this))return"0";if(P(this))return"-"+M(this).toString(T);for(var _=d(Math.pow(T,6)),I=this,C="";;){var b=De(I,_).g;I=H(I,b.j(_));var A=((0<I.g.length?I.g[0]:I.h)>>>0).toString(T);if(I=b,k(I))return A+C;for(;6>A.length;)A="0"+A;C=A+C}},n.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function k(T){if(T.h!=0)return!1;for(var _=0;_<T.g.length;_++)if(T.g[_]!=0)return!1;return!0}function P(T){return T.h==-1}n.l=function(T){return T=H(this,T),P(T)?-1:k(T)?0:1};function M(T){for(var _=T.g.length,I=[],C=0;C<_;C++)I[C]=~T.g[C];return new o(I,~T.h).add(y)}n.abs=function(){return P(this)?M(this):this},n.add=function(T){for(var _=Math.max(this.g.length,T.g.length),I=[],C=0,b=0;b<=_;b++){var A=C+(this.i(b)&65535)+(T.i(b)&65535),w=(A>>>16)+(this.i(b)>>>16)+(T.i(b)>>>16);C=w>>>16,A&=65535,w&=65535,I[b]=w<<16|A}return new o(I,I[I.length-1]&-2147483648?-1:0)};function H(T,_){return T.add(M(_))}n.j=function(T){if(k(this)||k(T))return p;if(P(this))return P(T)?M(this).j(M(T)):M(M(this).j(T));if(P(T))return M(this.j(M(T)));if(0>this.l(E)&&0>T.l(E))return d(this.m()*T.m());for(var _=this.g.length+T.g.length,I=[],C=0;C<2*_;C++)I[C]=0;for(C=0;C<this.g.length;C++)for(var b=0;b<T.g.length;b++){var A=this.i(C)>>>16,w=this.i(C)&65535,vt=T.i(b)>>>16,zn=T.i(b)&65535;I[2*C+2*b]+=w*zn,Y(I,2*C+2*b),I[2*C+2*b+1]+=A*zn,Y(I,2*C+2*b+1),I[2*C+2*b+1]+=w*vt,Y(I,2*C+2*b+1),I[2*C+2*b+2]+=A*vt,Y(I,2*C+2*b+2)}for(C=0;C<_;C++)I[C]=I[2*C+1]<<16|I[2*C];for(C=_;C<2*_;C++)I[C]=0;return new o(I,0)};function Y(T,_){for(;(T[_]&65535)!=T[_];)T[_+1]+=T[_]>>>16,T[_]&=65535,_++}function ee(T,_){this.g=T,this.h=_}function De(T,_){if(k(_))throw Error("division by zero");if(k(T))return new ee(p,p);if(P(T))return _=De(M(T),_),new ee(M(_.g),M(_.h));if(P(_))return _=De(T,M(_)),new ee(M(_.g),_.h);if(30<T.g.length){if(P(T)||P(_))throw Error("slowDivide_ only works with positive integers.");for(var I=y,C=_;0>=C.l(T);)I=Ze(I),C=Ze(C);var b=ve(I,1),A=ve(C,1);for(C=ve(C,2),I=ve(I,2);!k(C);){var w=A.add(C);0>=w.l(T)&&(b=b.add(I),A=w),C=ve(C,1),I=ve(I,1)}return _=H(T,b.j(_)),new ee(b,_)}for(b=p;0<=T.l(_);){for(I=Math.max(1,Math.floor(T.m()/_.m())),C=Math.ceil(Math.log(I)/Math.LN2),C=48>=C?1:Math.pow(2,C-48),A=d(I),w=A.j(_);P(w)||0<w.l(T);)I-=C,A=d(I),w=A.j(_);k(A)&&(A=y),b=b.add(A),T=H(T,w)}return new ee(b,T)}n.A=function(T){return De(this,T).h},n.and=function(T){for(var _=Math.max(this.g.length,T.g.length),I=[],C=0;C<_;C++)I[C]=this.i(C)&T.i(C);return new o(I,this.h&T.h)},n.or=function(T){for(var _=Math.max(this.g.length,T.g.length),I=[],C=0;C<_;C++)I[C]=this.i(C)|T.i(C);return new o(I,this.h|T.h)},n.xor=function(T){for(var _=Math.max(this.g.length,T.g.length),I=[],C=0;C<_;C++)I[C]=this.i(C)^T.i(C);return new o(I,this.h^T.h)};function Ze(T){for(var _=T.g.length+1,I=[],C=0;C<_;C++)I[C]=T.i(C)<<1|T.i(C-1)>>>31;return new o(I,T.h)}function ve(T,_){var I=_>>5;_%=32;for(var C=T.g.length-I,b=[],A=0;A<C;A++)b[A]=0<_?T.i(A+I)>>>_|T.i(A+I+1)<<32-_:T.i(A+I);return new o(b,T.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,ZD=xL.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=h,Gs=xL.Integer=o}).apply(typeof AL<"u"?AL:typeof self<"u"?self:typeof window<"u"?window:{});var J_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ws={};var eA,SY,bd,tA,jp,X_,nA,rA,iA;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,f,m){return l==Array.prototype||l==Object.prototype||(l[f]=m.value),l};function t(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof J_=="object"&&J_];for(var f=0;f<l.length;++f){var m=l[f];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}var r=t(this);function i(l,f){if(f)e:{var m=r;l=l.split(".");for(var S=0;S<l.length-1;S++){var F=l[S];if(!(F in m))break e;m=m[F]}l=l[l.length-1],S=m[l],f=f(S),f!=S&&f!=null&&e(m,l,{configurable:!0,writable:!0,value:f})}}function s(l,f){l instanceof String&&(l+="");var m=0,S=!1,F={next:function(){if(!S&&m<l.length){var U=m++;return{value:f(U,l[U]),done:!1}}return S=!0,{done:!0,value:void 0}}};return F[Symbol.iterator]=function(){return F},F}i("Array.prototype.values",function(l){return l||function(){return s(this,function(f,m){return m})}});var o=o||{},a=this||self;function c(l){var f=typeof l;return f=f!="object"?f:l?Array.isArray(l)?"array":f:"null",f=="array"||f=="object"&&typeof l.length=="number"}function d(l){var f=typeof l;return f=="object"&&l!=null||f=="function"}function h(l,f,m){return l.call.apply(l.bind,arguments)}function p(l,f,m){if(!l)throw Error();if(2<arguments.length){var S=Array.prototype.slice.call(arguments,2);return function(){var F=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(F,S),l.apply(f,F)}}return function(){return l.apply(f,arguments)}}function y(l,f,m){return y=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,y.apply(null,arguments)}function E(l,f){var m=Array.prototype.slice.call(arguments,1);return function(){var S=m.slice();return S.push.apply(S,arguments),l.apply(this,S)}}function k(l,f){function m(){}m.prototype=f.prototype,l.aa=f.prototype,l.prototype=new m,l.prototype.constructor=l,l.Qb=function(S,F,U){for(var K=Array(arguments.length-2),Qe=2;Qe<arguments.length;Qe++)K[Qe-2]=arguments[Qe];return f.prototype[F].apply(S,K)}}function P(l){let f=l.length;if(0<f){let m=Array(f);for(let S=0;S<f;S++)m[S]=l[S];return m}return[]}function M(l,f){for(let m=1;m<arguments.length;m++){let S=arguments[m];if(c(S)){let F=l.length||0,U=S.length||0;l.length=F+U;for(let K=0;K<U;K++)l[F+K]=S[K]}else l.push(S)}}class H{constructor(f,m){this.i=f,this.j=m,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function Y(l){return/^[\s\xa0]*$/.test(l)}function ee(){var l=a.navigator;return l&&(l=l.userAgent)?l:""}function De(l){return De[" "](l),l}De[" "]=function(){};var Ze=ee().indexOf("Gecko")!=-1&&!(ee().toLowerCase().indexOf("webkit")!=-1&&ee().indexOf("Edge")==-1)&&!(ee().indexOf("Trident")!=-1||ee().indexOf("MSIE")!=-1)&&ee().indexOf("Edge")==-1;function ve(l,f,m){for(let S in l)f.call(m,l[S],S,l)}function T(l,f){for(let m in l)f.call(void 0,l[m],m,l)}function _(l){let f={};for(let m in l)f[m]=l[m];return f}let I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function C(l,f){let m,S;for(let F=1;F<arguments.length;F++){S=arguments[F];for(m in S)l[m]=S[m];for(let U=0;U<I.length;U++)m=I[U],Object.prototype.hasOwnProperty.call(S,m)&&(l[m]=S[m])}}function b(l){var f=1;l=l.split(":");let m=[];for(;0<f&&l.length;)m.push(l.shift()),f--;return l.length&&m.push(l.join(":")),m}function A(l){a.setTimeout(()=>{throw l},0)}function w(){var l=io;let f=null;return l.g&&(f=l.g,l.g=l.g.next,l.g||(l.h=null),f.next=null),f}class vt{constructor(){this.h=this.g=null}add(f,m){let S=zn.get();S.set(f,m),this.h?this.h.next=S:this.g=S,this.h=S}}var zn=new H(()=>new vw,l=>l.reset());class vw{constructor(){this.next=this.g=this.h=null}set(f,m){this.h=f,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let Oa,hi=!1,io=new vt,pg=()=>{let l=a.Promise.resolve(void 0);Oa=()=>{l.then(gg)}};var gg=()=>{for(var l;l=w();){try{l.h.call(l.g)}catch(m){A(m)}var f=zn;f.j(l),100>f.h&&(f.h++,l.next=f.g,f.g=l)}hi=!1};function Vr(){this.s=this.s,this.C=this.C}Vr.prototype.s=!1,Vr.prototype.ma=function(){this.s||(this.s=!0,this.N())},Vr.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Zt(l,f){this.type=l,this.g=this.target=f,this.defaultPrevented=!1}Zt.prototype.h=function(){this.defaultPrevented=!0};var _l=(function(){if(!a.addEventListener||!Object.defineProperty)return!1;var l=!1,f=Object.defineProperty({},"passive",{get:function(){l=!0}});try{let m=()=>{};a.addEventListener("test",m,f),a.removeEventListener("test",m,f)}catch{}return l})();function ns(l,f){if(Zt.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var m=this.type=l.type,S=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=f,f=l.relatedTarget){if(Ze){e:{try{De(f.nodeName);var F=!0;break e}catch{}F=!1}F||(f=null)}}else m=="mouseover"?f=l.fromElement:m=="mouseout"&&(f=l.toElement);this.relatedTarget=f,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:rh[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&ns.aa.h.call(this)}}k(ns,Zt);var rh={2:"touch",3:"pen",4:"mouse"};ns.prototype.h=function(){ns.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var rs="closure_listenable_"+(1e6*Math.random()|0),ih=0;function mg(l,f,m,S,F){this.listener=l,this.proxy=null,this.src=f,this.type=m,this.capture=!!S,this.ha=F,this.key=++ih,this.da=this.fa=!1}function Fa(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function wl(l){this.src=l,this.g={},this.h=0}wl.prototype.add=function(l,f,m,S,F){var U=l.toString();l=this.g[U],l||(l=this.g[U]=[],this.h++);var K=El(l,f,S,F);return-1<K?(f=l[K],m||(f.fa=!1)):(f=new mg(f,this.src,U,!!S,F),f.fa=m,l.push(f)),f};function Il(l,f){var m=f.type;if(m in l.g){var S=l.g[m],F=Array.prototype.indexOf.call(S,f,void 0),U;(U=0<=F)&&Array.prototype.splice.call(S,F,1),U&&(Fa(f),l.g[m].length==0&&(delete l.g[m],l.h--))}}function El(l,f,m,S){for(var F=0;F<l.length;++F){var U=l[F];if(!U.da&&U.listener==f&&U.capture==!!m&&U.ha==S)return F}return-1}var Va="closure_lm_"+(1e6*Math.random()|0),bl={};function yg(l,f,m,S,F){if(S&&S.once)return Tl(l,f,m,S,F);if(Array.isArray(f)){for(var U=0;U<f.length;U++)yg(l,f[U],m,S,F);return null}return m=is(m),l&&l[rs]?l.K(f,m,d(S)?!!S.capture:!!S,F):Cl(l,f,m,!1,S,F)}function Cl(l,f,m,S,F,U){if(!f)throw Error("Invalid event type");var K=d(F)?!!F.capture:!!F,Qe=Sl(l);if(Qe||(l[Va]=Qe=new wl(l)),m=Qe.add(f,m,S,K,U),m.proxy)return m;if(S=sh(),m.proxy=S,S.src=l,S.listener=m,l.addEventListener)_l||(F=K),F===void 0&&(F=!1),l.addEventListener(f.toString(),S,F);else if(l.attachEvent)l.attachEvent(La(f.toString()),S);else if(l.addListener&&l.removeListener)l.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return m}function sh(){function l(m){return f.call(l.src,l.listener,m)}let f=_w;return l}function Tl(l,f,m,S,F){if(Array.isArray(f)){for(var U=0;U<f.length;U++)Tl(l,f[U],m,S,F);return null}return m=is(m),l&&l[rs]?l.L(f,m,d(S)?!!S.capture:!!S,F):Cl(l,f,m,!0,S,F)}function en(l,f,m,S,F){if(Array.isArray(f))for(var U=0;U<f.length;U++)en(l,f[U],m,S,F);else S=d(S)?!!S.capture:!!S,m=is(m),l&&l[rs]?(l=l.i,f=String(f).toString(),f in l.g&&(U=l.g[f],m=El(U,m,S,F),-1<m&&(Fa(U[m]),Array.prototype.splice.call(U,m,1),U.length==0&&(delete l.g[f],l.h--)))):l&&(l=Sl(l))&&(f=l.g[f.toString()],l=-1,f&&(l=El(f,m,S,F)),(m=-1<l?f[l]:null)&&tn(m))}function tn(l){if(typeof l!="number"&&l&&!l.da){var f=l.src;if(f&&f[rs])Il(f.i,l);else{var m=l.type,S=l.proxy;f.removeEventListener?f.removeEventListener(m,S,l.capture):f.detachEvent?f.detachEvent(La(m),S):f.addListener&&f.removeListener&&f.removeListener(S),(m=Sl(f))?(Il(m,l),m.h==0&&(m.src=null,f[Va]=null)):Fa(l)}}}function La(l){return l in bl?bl[l]:bl[l]="on"+l}function _w(l,f){if(l.da)l=!0;else{f=new ns(f,this);var m=l.listener,S=l.ha||l.src;l.fa&&tn(l),l=m.call(S,f)}return l}function Sl(l){return l=l[Va],l instanceof wl?l:null}var oh="__closure_events_fn_"+(1e9*Math.random()>>>0);function is(l){return typeof l=="function"?l:(l[oh]||(l[oh]=function(f){return l.handleEvent(f)}),l[oh])}function nn(){Vr.call(this),this.i=new wl(this),this.M=this,this.F=null}k(nn,Vr),nn.prototype[rs]=!0,nn.prototype.removeEventListener=function(l,f,m,S){en(this,l,f,m,S)};function fn(l,f){var m,S=l.F;if(S)for(m=[];S;S=S.F)m.push(S);if(l=l.M,S=f.type||f,typeof f=="string")f=new Zt(f,l);else if(f instanceof Zt)f.target=f.target||l;else{var F=f;f=new Zt(S,l),C(f,F)}if(F=!0,m)for(var U=m.length-1;0<=U;U--){var K=f.g=m[U];F=so(K,S,!0,f)&&F}if(K=f.g=l,F=so(K,S,!0,f)&&F,F=so(K,S,!1,f)&&F,m)for(U=0;U<m.length;U++)K=f.g=m[U],F=so(K,S,!1,f)&&F}nn.prototype.N=function(){if(nn.aa.N.call(this),this.i){var l=this.i,f;for(f in l.g){for(var m=l.g[f],S=0;S<m.length;S++)Fa(m[S]);delete l.g[f],l.h--}}this.F=null},nn.prototype.K=function(l,f,m,S){return this.i.add(String(l),f,!1,m,S)},nn.prototype.L=function(l,f,m,S){return this.i.add(String(l),f,!0,m,S)};function so(l,f,m,S){if(f=l.i.g[String(f)],!f)return!0;f=f.concat();for(var F=!0,U=0;U<f.length;++U){var K=f[U];if(K&&!K.da&&K.capture==m){var Qe=K.listener,Nt=K.ha||K.src;K.fa&&Il(l.i,K),F=Qe.call(Nt,S)!==!1&&F}}return F&&!S.defaultPrevented}function vg(l,f,m){if(typeof l=="function")m&&(l=y(l,m));else if(l&&typeof l.handleEvent=="function")l=y(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:a.setTimeout(l,f||0)}function _g(l){l.g=vg(()=>{l.g=null,l.i&&(l.i=!1,_g(l))},l.l);let f=l.h;l.h=null,l.m.apply(null,f)}class wg extends Vr{constructor(f,m){super(),this.m=f,this.l=m,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:_g(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function oo(l){Vr.call(this),this.h=l,this.g={}}k(oo,Vr);var ao=[];function Dl(l){ve(l.g,function(f,m){this.g.hasOwnProperty(m)&&tn(f)},l),l.g={}}oo.prototype.N=function(){oo.aa.N.call(this),Dl(this)},oo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ua=a.JSON.stringify,ss=a.JSON.parse,Ig=class{stringify(l){return a.JSON.stringify(l,void 0)}parse(l){return a.JSON.parse(l,void 0)}};function co(){}co.prototype.h=null;function ah(l){return l.h||(l.h=l.i())}function lo(){}var uo={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function rn(){Zt.call(this,"d")}k(rn,Zt);function Al(){Zt.call(this,"c")}k(Al,Zt);var tr={},ho=null;function xl(){return ho=ho||new nn}tr.La="serverreachability";function Eg(l){Zt.call(this,tr.La,l)}k(Eg,Zt);function vr(l){let f=xl();fn(f,new Eg(f))}tr.STAT_EVENT="statevent";function bg(l,f){Zt.call(this,tr.STAT_EVENT,l),this.stat=f}k(bg,Zt);function bn(l){let f=xl();fn(f,new bg(f,l))}tr.Ma="timingevent";function ja(l,f){Zt.call(this,tr.Ma,l),this.size=f}k(ja,Zt);function fo(l,f){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){l()},f)}function po(){this.g=!0}po.prototype.xa=function(){this.g=!1};function ch(l,f,m,S,F,U){l.info(function(){if(l.g)if(U)for(var K="",Qe=U.split("&"),Nt=0;Nt<Qe.length;Nt++){var Ye=Qe[Nt].split("=");if(1<Ye.length){var xn=Ye[0];Ye=Ye[1];var Rn=xn.split("_");K=2<=Rn.length&&Rn[1]=="type"?K+(xn+"="+Ye+"&"):K+(xn+"=redacted&")}}else K=null;else K=U;return"XMLHTTP REQ ("+S+") [attempt "+F+"]: "+f+`
`+m+`
`+K})}function Ba(l,f,m,S,F,U,K){l.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+F+"]: "+f+`
`+m+`
`+U+" "+K})}function go(l,f,m,S){l.info(function(){return"XMLHTTP TEXT ("+f+"): "+Cg(l,m)+(S?" "+S:"")})}function fi(l,f){l.info(function(){return"TIMEOUT: "+f})}po.prototype.info=function(){};function Cg(l,f){if(!l.g)return f;if(!f)return null;try{var m=JSON.parse(f);if(m){for(l=0;l<m.length;l++)if(Array.isArray(m[l])){var S=m[l];if(!(2>S.length)){var F=S[1];if(Array.isArray(F)&&!(1>F.length)){var U=F[0];if(U!="noop"&&U!="stop"&&U!="close")for(var K=1;K<F.length;K++)F[K]=""}}}}return Ua(m)}catch{return f}}var $a={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Rl={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ha;function qa(){}k(qa,co),qa.prototype.g=function(){return new XMLHttpRequest},qa.prototype.i=function(){return{}},Ha=new qa;function pi(l,f,m,S){this.j=l,this.i=f,this.l=m,this.R=S||1,this.U=new oo(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new lh}function lh(){this.i=null,this.g="",this.h=!1}var Tg={},mo={};function kl(l,f,m){l.L=1,l.v=Ol(Lr(f)),l.m=m,l.P=!0,Nl(l,null)}function Nl(l,f){l.F=Date.now(),vo(l),l.A=Lr(l.v);var m=l.A,S=l.R;Array.isArray(S)||(S=[String(S)]),Mg(m.i,"t",S),l.C=0,m=l.j.J,l.h=new lh,l.g=g(l.j,m?f:null,!l.m),0<l.O&&(l.M=new wg(y(l.Y,l,l.g),l.O)),f=l.U,m=l.g,S=l.ca;var F="readystatechange";Array.isArray(F)||(F&&(ao[0]=F.toString()),F=ao);for(var U=0;U<F.length;U++){var K=yg(m,F[U],S||f.handleEvent,!1,f.h||f);if(!K)break;f.g[K.key]=K}f=l.H?_(l.H):{},l.m?(l.u||(l.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,f)):(l.u="GET",l.g.ea(l.A,l.u,null,f)),vr(),ch(l.i,l.u,l.A,l.l,l.R,l.m)}pi.prototype.ca=function(l){l=l.target;let f=this.M;f&&Wn(l)==3?f.j():this.Y(l)},pi.prototype.Y=function(l){try{if(l==this.g)e:{let Rn=Wn(this.g);var f=this.g.Ba();let ql=this.g.Z();if(!(3>Rn)&&(Rn!=3||this.g&&(this.h.h||this.g.oa()||Lg(this.g)))){this.J||Rn!=4||f==7||(f==8||0>=ql?vr(3):vr(2)),Ml(this);var m=this.g.Z();this.X=m;t:if(yo(this)){var S=Lg(this.g);l="";var F=S.length,U=Wn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){gi(this),_o(this);var K="";break t}this.h.i=new a.TextDecoder}for(f=0;f<F;f++)this.h.h=!0,l+=this.h.i.decode(S[f],{stream:!(U&&f==F-1)});S.length=0,this.h.g+=l,this.C=0,K=this.h.g}else K=this.g.oa();if(this.o=m==200,Ba(this.i,this.u,this.A,this.l,this.R,Rn,m),this.o){if(this.T&&!this.K){t:{if(this.g){var Qe,Nt=this.g;if((Qe=Nt.g?Nt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Y(Qe)){var Ye=Qe;break t}}Ye=null}if(m=Ye)go(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,za(this,m);else{this.o=!1,this.s=3,bn(12),gi(this),_o(this);break e}}if(this.P){m=!0;let Hr;for(;!this.J&&this.C<K.length;)if(Hr=os(this,K),Hr==mo){Rn==4&&(this.s=4,bn(14),m=!1),go(this.i,this.l,null,"[Incomplete Response]");break}else if(Hr==Tg){this.s=4,bn(15),go(this.i,this.l,K,"[Invalid Chunk]"),m=!1;break}else go(this.i,this.l,Hr,null),za(this,Hr);if(yo(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Rn!=4||K.length!=0||this.h.h||(this.s=1,bn(16),m=!1),this.o=this.o&&m,!m)go(this.i,this.l,K,"[Invalid Chunked Response]"),gi(this),_o(this);else if(0<K.length&&!this.W){this.W=!0;var xn=this.j;xn.g==this&&xn.ba&&!xn.M&&(xn.j.info("Great, no buffering proxy detected. Bytes received: "+K.length),Hl(xn),xn.M=!0,bn(11))}}else go(this.i,this.l,K,null),za(this,K);Rn==4&&gi(this),this.o&&!this.J&&(Rn==4?An(this.j,this):(this.o=!1,vo(this)))}else Ug(this.g),m==400&&0<K.indexOf("Unknown SID")?(this.s=3,bn(12)):(this.s=0,bn(13)),gi(this),_o(this)}}}catch{}finally{}};function yo(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function os(l,f){var m=l.C,S=f.indexOf(`
`,m);return S==-1?mo:(m=Number(f.substring(m,S)),isNaN(m)?Tg:(S+=1,S+m>f.length?mo:(f=f.slice(S,S+m),l.C=S+m,f)))}pi.prototype.cancel=function(){this.J=!0,gi(this)};function vo(l){l.S=Date.now()+l.I,Sg(l,l.I)}function Sg(l,f){if(l.B!=null)throw Error("WatchDog timer not null");l.B=fo(y(l.ba,l),f)}function Ml(l){l.B&&(a.clearTimeout(l.B),l.B=null)}pi.prototype.ba=function(){this.B=null;let l=Date.now();0<=l-this.S?(fi(this.i,this.A),this.L!=2&&(vr(),bn(17)),gi(this),this.s=2,_o(this)):Sg(this,this.S-l)};function _o(l){l.j.G==0||l.J||An(l.j,l)}function gi(l){Ml(l);var f=l.M;f&&typeof f.ma=="function"&&f.ma(),l.M=null,Dl(l.U),l.g&&(f=l.g,l.g=null,f.abort(),f.ma())}function za(l,f){try{var m=l.j;if(m.G!=0&&(m.g==l||ph(m.h,l))){if(!l.K&&ph(m.h,l)&&m.G==3){try{var S=m.Da.g.parse(f)}catch{S=null}if(Array.isArray(S)&&S.length==3){var F=S;if(F[0]==0){e:if(!m.u){if(m.g)if(m.g.F+3e3<l.F)cs(m),So(m);else break e;$l(m),bn(18)}}else m.za=F[1],0<m.za-m.T&&37500>F[2]&&m.F&&m.v==0&&!m.C&&(m.C=fo(y(m.Za,m),6e3));if(1>=fh(m.h)&&m.ca){try{m.ca()}catch{}m.ca=void 0}}else vi(m,11)}else if((l.K||m.g==l)&&cs(m),!Y(f))for(F=m.Da.g.parse(f),f=0;f<F.length;f++){let Ye=F[f];if(m.T=Ye[0],Ye=Ye[1],m.G==2)if(Ye[0]=="c"){m.K=Ye[1],m.ia=Ye[2];let xn=Ye[3];xn!=null&&(m.la=xn,m.j.info("VER="+m.la));let Rn=Ye[4];Rn!=null&&(m.Aa=Rn,m.j.info("SVER="+m.Aa));let ql=Ye[5];ql!=null&&typeof ql=="number"&&0<ql&&(S=1.5*ql,m.L=S,m.j.info("backChannelRequestTimeoutMs_="+S)),S=m;let Hr=l.g;if(Hr){let jg=Hr.g?Hr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(jg){var U=S.h;U.g||jg.indexOf("spdy")==-1&&jg.indexOf("quic")==-1&&jg.indexOf("h2")==-1||(U.j=U.l,U.g=new Set,U.h&&(_r(U,U.h),U.h=null))}if(S.D){let Iw=Hr.g?Hr.g.getResponseHeader("X-HTTP-Session-Id"):null;Iw&&(S.ya=Iw,ht(S.I,S.D,Iw))}}m.G=3,m.l&&m.l.ua(),m.ba&&(m.R=Date.now()-l.F,m.j.info("Handshake RTT: "+m.R+"ms")),S=m;var K=l;if(S.qa=u(S,S.J?S.ia:null,S.W),K.K){nr(S.h,K);var Qe=K,Nt=S.L;Nt&&(Qe.I=Nt),Qe.B&&(Ml(Qe),vo(Qe)),S.g=K}else bh(S);0<m.i.length&&Xa(m)}else Ye[0]!="stop"&&Ye[0]!="close"||vi(m,7);else m.G==3&&(Ye[0]=="stop"||Ye[0]=="close"?Ye[0]=="stop"?vi(m,7):Ul(m):Ye[0]!="noop"&&m.l&&m.l.ta(Ye),m.v=0)}}vr(4)}catch{}}var uh=class{constructor(l,f){this.g=l,this.map=f}};function dh(l){this.l=l||10,a.PerformanceNavigationTiming?(l=a.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function hh(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function fh(l){return l.h?1:l.g?l.g.size:0}function ph(l,f){return l.h?l.h==f:l.g?l.g.has(f):!1}function _r(l,f){l.g?l.g.add(f):l.h=f}function nr(l,f){l.h&&l.h==f?l.h=null:l.g&&l.g.has(f)&&l.g.delete(f)}dh.prototype.cancel=function(){if(this.i=wo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let l of this.g.values())l.cancel();this.g.clear()}};function wo(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let f=l.i;for(let m of l.g.values())f=f.concat(m.D);return f}return P(l.i)}function Ga(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(c(l)){for(var f=[],m=l.length,S=0;S<m;S++)f.push(l[S]);return f}f=[],m=0;for(S in l)f[m++]=l[S];return f}function gh(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(c(l)||typeof l=="string"){var f=[];l=l.length;for(var m=0;m<l;m++)f.push(m);return f}f=[],m=0;for(let S in l)f[m++]=S;return f}}}function lt(l,f){if(l.forEach&&typeof l.forEach=="function")l.forEach(f,void 0);else if(c(l)||typeof l=="string")Array.prototype.forEach.call(l,f,void 0);else for(var m=gh(l),S=Ga(l),F=S.length,U=0;U<F;U++)f.call(void 0,S[U],m&&m[U],l)}var Wa=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ka(l,f){if(l){l=l.split("&");for(var m=0;m<l.length;m++){var S=l[m].indexOf("="),F=null;if(0<=S){var U=l[m].substring(0,S);F=l[m].substring(S+1)}else U=l[m];f(U,F?decodeURIComponent(F.replace(/\+/g," ")):"")}}}function rr(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof rr){this.h=l.h,Qa(this,l.j),this.o=l.o,this.g=l.g,Pl(this,l.s),this.l=l.l;var f=l.i,m=new Ya;m.i=f.i,f.g&&(m.g=new Map(f.g),m.h=f.h),Dg(this,m),this.m=l.m}else l&&(f=String(l).match(Wa))?(this.h=!1,Qa(this,f[1]||"",!0),this.o=Ur(f[2]||""),this.g=Ur(f[3]||"",!0),Pl(this,f[4]),this.l=Ur(f[5]||"",!0),Dg(this,f[6]||"",!0),this.m=Ur(f[7]||"")):(this.h=!1,this.i=new Ya(null,this.h))}rr.prototype.toString=function(){var l=[],f=this.j;f&&l.push(ir(f,mh,!0),":");var m=this.g;return(m||f=="file")&&(l.push("//"),(f=this.o)&&l.push(ir(f,mh,!0),"@"),l.push(encodeURIComponent(String(m)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m=this.s,m!=null&&l.push(":",String(m))),(m=this.l)&&(this.g&&m.charAt(0)!="/"&&l.push("/"),l.push(ir(m,m.charAt(0)=="/"?Rg:xg,!0))),(m=this.i.toString())&&l.push("?",m),(m=this.m)&&l.push("#",ir(m,Io)),l.join("")};function Lr(l){return new rr(l)}function Qa(l,f,m){l.j=m?Ur(f,!0):f,l.j&&(l.j=l.j.replace(/:$/,""))}function Pl(l,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);l.s=f}else l.s=null}function Dg(l,f,m){f instanceof Ya?(l.i=f,Fl(l.i,l.h)):(m||(f=ir(f,kg)),l.i=new Ya(f,l.h))}function ht(l,f,m){l.i.set(f,m)}function Ol(l){return ht(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function Ur(l,f){return l?f?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function ir(l,f,m){return typeof l=="string"?(l=encodeURI(l).replace(f,Ag),m&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function Ag(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var mh=/[#\/\?@]/g,xg=/[#\?:]/g,Rg=/[#\?]/g,kg=/[#\?@]/g,Io=/#/g;function Ya(l,f){this.h=this.g=null,this.i=l||null,this.j=!!f}function mi(l){l.g||(l.g=new Map,l.h=0,l.i&&Ka(l.i,function(f,m){l.add(decodeURIComponent(f.replace(/\+/g," ")),m)}))}n=Ya.prototype,n.add=function(l,f){mi(this),this.i=null,l=Br(this,l);var m=this.g.get(l);return m||this.g.set(l,m=[]),m.push(f),this.h+=1,this};function Ng(l,f){mi(l),f=Br(l,f),l.g.has(f)&&(l.i=null,l.h-=l.g.get(f).length,l.g.delete(f))}function jr(l,f){return mi(l),f=Br(l,f),l.g.has(f)}n.forEach=function(l,f){mi(this),this.g.forEach(function(m,S){m.forEach(function(F){l.call(f,F,S,this)},this)},this)},n.na=function(){mi(this);let l=Array.from(this.g.values()),f=Array.from(this.g.keys()),m=[];for(let S=0;S<f.length;S++){let F=l[S];for(let U=0;U<F.length;U++)m.push(f[S])}return m},n.V=function(l){mi(this);let f=[];if(typeof l=="string")jr(this,l)&&(f=f.concat(this.g.get(Br(this,l))));else{l=Array.from(this.g.values());for(let m=0;m<l.length;m++)f=f.concat(l[m])}return f},n.set=function(l,f){return mi(this),this.i=null,l=Br(this,l),jr(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[f]),this.h+=1,this},n.get=function(l,f){return l?(l=this.V(l),0<l.length?String(l[0]):f):f};function Mg(l,f,m){Ng(l,f),0<m.length&&(l.i=null,l.g.set(Br(l,f),P(m)),l.h+=m.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let l=[],f=Array.from(this.g.keys());for(var m=0;m<f.length;m++){var S=f[m];let U=encodeURIComponent(String(S)),K=this.V(S);for(S=0;S<K.length;S++){var F=U;K[S]!==""&&(F+="="+encodeURIComponent(String(K[S]))),l.push(F)}}return this.i=l.join("&")};function Br(l,f){return f=String(f),l.j&&(f=f.toLowerCase()),f}function Fl(l,f){f&&!l.j&&(mi(l),l.i=null,l.g.forEach(function(m,S){var F=S.toLowerCase();S!=F&&(Ng(this,S),Mg(this,F,m))},l)),l.j=f}function Pg(l,f){let m=new po;if(a.Image){let S=new Image;S.onload=E(Gn,m,"TestLoadImage: loaded",!0,f,S),S.onerror=E(Gn,m,"TestLoadImage: error",!1,f,S),S.onabort=E(Gn,m,"TestLoadImage: abort",!1,f,S),S.ontimeout=E(Gn,m,"TestLoadImage: timeout",!1,f,S),a.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=l}else f(!1)}function Ja(l,f){let m=new po,S=new AbortController,F=setTimeout(()=>{S.abort(),Gn(m,"TestPingServer: timeout",!1,f)},1e4);fetch(l,{signal:S.signal}).then(U=>{clearTimeout(F),U.ok?Gn(m,"TestPingServer: ok",!0,f):Gn(m,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(F),Gn(m,"TestPingServer: error",!1,f)})}function Gn(l,f,m,S,F){try{F&&(F.onload=null,F.onerror=null,F.onabort=null,F.ontimeout=null),S(m)}catch{}}function Og(){this.g=new Ig}function yh(l,f,m){let S=m||"";try{lt(l,function(F,U){let K=F;d(F)&&(K=Ua(F)),f.push(S+U+"="+encodeURIComponent(K))})}catch(F){throw f.push(S+"type="+encodeURIComponent("_badmap")),F}}function ut(l){this.l=l.Ub||null,this.j=l.eb||!1}k(ut,co),ut.prototype.g=function(){return new Vl(this.l,this.j)},ut.prototype.i=(function(l){return function(){return l}})({});function Vl(l,f){nn.call(this),this.D=l,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}k(Vl,nn),n=Vl.prototype,n.open=function(l,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=f,this.readyState=1,bo(this)},n.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(f.body=l),(this.D||a).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Eo(this)),this.readyState=0},n.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,bo(this)),this.g&&(this.readyState=3,bo(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Fg(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function Fg(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}n.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var f=l.value?l.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!l.done}))&&(this.response=this.responseText+=f)}l.done?Eo(this):bo(this),this.readyState==3&&Fg(this)}},n.Ra=function(l){this.g&&(this.response=this.responseText=l,Eo(this))},n.Qa=function(l){this.g&&(this.response=l,Eo(this))},n.ga=function(){this.g&&Eo(this)};function Eo(l){l.readyState=4,l.l=null,l.j=null,l.v=null,bo(l)}n.setRequestHeader=function(l,f){this.u.append(l,f)},n.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let l=[],f=this.h.entries();for(var m=f.next();!m.done;)m=m.value,l.push(m[0]+": "+m[1]),m=f.next();return l.join(`\r
`)};function bo(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(Vl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function vh(l){let f="";return ve(l,function(m,S){f+=S,f+=":",f+=m,f+=`\r
`}),f}function Co(l,f,m){e:{for(S in m){var S=!1;break e}S=!0}S||(m=vh(m),typeof l=="string"?m!=null&&encodeURIComponent(String(m)):ht(l,f,m))}function Je(l){nn.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}k(Je,nn);var Vg=/^https?$/i,ww=["POST","PUT"];n=Je.prototype,n.Ha=function(l){this.J=l},n.ea=function(l,f,m,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);f=f?f.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ha.g(),this.v=this.o?ah(this.o):ah(Ha),this.g.onreadystatechange=y(this.Ea,this);try{this.B=!0,this.g.open(f,String(l),!0),this.B=!1}catch(U){To(this,U);return}if(l=m||"",m=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var F in S)m.set(F,S[F]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(let U of S.keys())m.set(U,S.get(U));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(m.keys()).find(U=>U.toLowerCase()=="content-type"),F=a.FormData&&l instanceof a.FormData,!(0<=Array.prototype.indexOf.call(ww,f,void 0))||S||F||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[U,K]of m)this.g.setRequestHeader(U,K);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{wh(this),this.u=!0,this.g.send(l),this.u=!1}catch(U){To(this,U)}};function To(l,f){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=f,l.m=5,_h(l),as(l)}function _h(l){l.A||(l.A=!0,fn(l,"complete"),fn(l,"error"))}n.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,fn(this,"complete"),fn(this,"abort"),as(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),as(this,!0)),Je.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Ll(this):this.bb())},n.bb=function(){Ll(this)};function Ll(l){if(l.h&&typeof o<"u"&&(!l.v[1]||Wn(l)!=4||l.Z()!=2)){if(l.u&&Wn(l)==4)vg(l.Ea,0,l);else if(fn(l,"readystatechange"),Wn(l)==4){l.h=!1;try{let K=l.Z();e:switch(K){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var m;if(!(m=f)){var S;if(S=K===0){var F=String(l.D).match(Wa)[1]||null;!F&&a.self&&a.self.location&&(F=a.self.location.protocol.slice(0,-1)),S=!Vg.test(F?F.toLowerCase():"")}m=S}if(m)fn(l,"complete"),fn(l,"success");else{l.m=6;try{var U=2<Wn(l)?l.g.statusText:""}catch{U=""}l.l=U+" ["+l.Z()+"]",_h(l)}}finally{as(l)}}}}function as(l,f){if(l.g){wh(l);let m=l.g,S=l.v[0]?()=>{}:null;l.g=null,l.v=null,f||fn(l,"ready");try{m.onreadystatechange=S}catch{}}}function wh(l){l.I&&(a.clearTimeout(l.I),l.I=null)}n.isActive=function(){return!!this.g};function Wn(l){return l.g?l.g.readyState:0}n.Z=function(){try{return 2<Wn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(l){if(this.g){var f=this.g.responseText;return l&&f.indexOf(l)==0&&(f=f.substring(l.length)),ss(f)}};function Lg(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function Ug(l){let f={};l=(l.g&&2<=Wn(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<l.length;S++){if(Y(l[S]))continue;var m=b(l[S]);let F=m[0];if(m=m[1],typeof m!="string")continue;m=m.trim();let U=f[F]||[];f[F]=U,U.push(m)}T(f,function(S){return S.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function $r(l,f,m){return m&&m.internalChannelParams&&m.internalChannelParams[l]||f}function Ih(l){this.Aa=0,this.i=[],this.j=new po,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=$r("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=$r("baseRetryDelayMs",5e3,l),this.cb=$r("retryDelaySeedMs",1e4,l),this.Wa=$r("forwardChannelMaxRetries",2,l),this.wa=$r("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new dh(l&&l.concurrentRequestLimit),this.Da=new Og,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Ih.prototype,n.la=8,n.G=1,n.connect=function(l,f,m,S){bn(0),this.W=l,this.H=f||{},m&&S!==void 0&&(this.H.OSID=m,this.H.OAID=S),this.F=this.X,this.I=u(this,null,this.W),Xa(this)};function Ul(l){if(jl(l),l.G==3){var f=l.U++,m=Lr(l.I);if(ht(m,"SID",l.K),ht(m,"RID",f),ht(m,"TYPE","terminate"),Do(l,m),f=new pi(l,l.j,f),f.L=2,f.v=Ol(Lr(m)),m=!1,a.navigator&&a.navigator.sendBeacon)try{m=a.navigator.sendBeacon(f.v.toString(),"")}catch{}!m&&a.Image&&(new Image().src=f.v,m=!0),m||(f.g=g(f.j,null),f.g.ea(f.v)),f.F=Date.now(),vo(f)}ls(l)}function So(l){l.g&&(Hl(l),l.g.cancel(),l.g=null)}function jl(l){So(l),l.u&&(a.clearTimeout(l.u),l.u=null),cs(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&a.clearTimeout(l.s),l.s=null)}function Xa(l){if(!hh(l.h)&&!l.s){l.s=!0;var f=l.Ga;Oa||pg(),hi||(Oa(),hi=!0),io.add(f,l),l.B=0}}function Bl(l,f){return fh(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=f.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=fo(y(l.Ga,l,f),Th(l,l.B)),l.B++,!0)}n.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;let F=new pi(this,this.j,l),U=this.o;if(this.S&&(U?(U=_(U),C(U,this.S)):U=this.S),this.m!==null||this.O||(F.H=U,U=null),this.P)e:{for(var f=0,m=0;m<this.i.length;m++){t:{var S=this.i[m];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(f+=S,4096<f){f=m;break e}if(f===4096||m===this.i.length-1){f=m+1;break e}}f=1e3}else f=1e3;f=yi(this,F,f),m=Lr(this.I),ht(m,"RID",l),ht(m,"CVER",22),this.D&&ht(m,"X-HTTP-Session-Id",this.D),Do(this,m),U&&(this.O?f="headers="+encodeURIComponent(String(vh(U)))+"&"+f:this.m&&Co(m,this.m,U)),_r(this.h,F),this.Ua&&ht(m,"TYPE","init"),this.P?(ht(m,"$req",f),ht(m,"SID","null"),F.T=!0,kl(F,m,null)):kl(F,m,f),this.G=2}}else this.G==3&&(l?Eh(this,l):this.i.length==0||hh(this.h)||Eh(this))};function Eh(l,f){var m;f?m=f.l:m=l.U++;let S=Lr(l.I);ht(S,"SID",l.K),ht(S,"RID",m),ht(S,"AID",l.T),Do(l,S),l.m&&l.o&&Co(S,l.m,l.o),m=new pi(l,l.j,m,l.B+1),l.m===null&&(m.H=l.o),f&&(l.i=f.D.concat(l.i)),f=yi(l,m,1e3),m.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),_r(l.h,m),kl(m,S,f)}function Do(l,f){l.H&&ve(l.H,function(m,S){ht(f,S,m)}),l.l&&lt({},function(m,S){ht(f,S,m)})}function yi(l,f,m){m=Math.min(l.i.length,m);var S=l.l?y(l.l.Na,l.l,l):null;e:{var F=l.i;let U=-1;for(;;){let K=["count="+m];U==-1?0<m?(U=F[0].g,K.push("ofs="+U)):U=0:K.push("ofs="+U);let Qe=!0;for(let Nt=0;Nt<m;Nt++){let Ye=F[Nt].g,xn=F[Nt].map;if(Ye-=U,0>Ye)U=Math.max(0,F[Nt].g-100),Qe=!1;else try{yh(xn,K,"req"+Ye+"_")}catch{S&&S(xn)}}if(Qe){S=K.join("&");break e}}}return l=l.i.splice(0,m),f.D=l,S}function bh(l){if(!l.g&&!l.u){l.Y=1;var f=l.Fa;Oa||pg(),hi||(Oa(),hi=!0),io.add(f,l),l.v=0}}function $l(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=fo(y(l.Fa,l),Th(l,l.v)),l.v++,!0)}n.Fa=function(){if(this.u=null,Ch(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=fo(y(this.ab,this),l)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,bn(10),So(this),Ch(this))};function Hl(l){l.A!=null&&(a.clearTimeout(l.A),l.A=null)}function Ch(l){l.g=new pi(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var f=Lr(l.qa);ht(f,"RID","rpc"),ht(f,"SID",l.K),ht(f,"AID",l.T),ht(f,"CI",l.F?"0":"1"),!l.F&&l.ja&&ht(f,"TO",l.ja),ht(f,"TYPE","xmlhttp"),Do(l,f),l.m&&l.o&&Co(f,l.m,l.o),l.L&&(l.g.I=l.L);var m=l.g;l=l.ia,m.L=1,m.v=Ol(Lr(f)),m.m=null,m.P=!0,Nl(m,l)}n.Za=function(){this.C!=null&&(this.C=null,So(this),$l(this),bn(19))};function cs(l){l.C!=null&&(a.clearTimeout(l.C),l.C=null)}function An(l,f){var m=null;if(l.g==f){cs(l),Hl(l),l.g=null;var S=2}else if(ph(l.h,f))m=f.D,nr(l.h,f),S=1;else return;if(l.G!=0){if(f.o)if(S==1){m=f.m?f.m.length:0,f=Date.now()-f.F;var F=l.B;S=xl(),fn(S,new ja(S,m)),Xa(l)}else bh(l);else if(F=f.s,F==3||F==0&&0<f.X||!(S==1&&Bl(l,f)||S==2&&$l(l)))switch(m&&0<m.length&&(f=l.h,f.i=f.i.concat(m)),F){case 1:vi(l,5);break;case 4:vi(l,10);break;case 3:vi(l,6);break;default:vi(l,2)}}}function Th(l,f){let m=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(m*=2),m*f}function vi(l,f){if(l.j.info("Error code "+f),f==2){var m=y(l.fb,l),S=l.Xa;let F=!S;S=new rr(S||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Qa(S,"https"),Ol(S),F?Pg(S.toString(),m):Ja(S.toString(),m)}else bn(2);l.G=0,l.l&&l.l.sa(f),ls(l),jl(l)}n.fb=function(l){l?(this.j.info("Successfully pinged google.com"),bn(2)):(this.j.info("Failed to ping google.com"),bn(1))};function ls(l){if(l.G=0,l.ka=[],l.l){let f=wo(l.h);(f.length!=0||l.i.length!=0)&&(M(l.ka,f),M(l.ka,l.i),l.h.i.length=0,P(l.i),l.i.length=0),l.l.ra()}}function u(l,f,m){var S=m instanceof rr?Lr(m):new rr(m);if(S.g!="")f&&(S.g=f+"."+S.g),Pl(S,S.s);else{var F=a.location;S=F.protocol,f=f?f+"."+F.hostname:F.hostname,F=+F.port;var U=new rr(null);S&&Qa(U,S),f&&(U.g=f),F&&Pl(U,F),m&&(U.l=m),S=U}return m=l.D,f=l.ya,m&&f&&ht(S,m,f),ht(S,"VER",l.la),Do(l,S),S}function g(l,f,m){if(f&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=l.Ca&&!l.pa?new Je(new ut({eb:m})):new Je(l.pa),f.Ha(l.J),f}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function v(){}n=v.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function D(){}D.prototype.g=function(l,f){return new O(l,f)};function O(l,f){nn.call(this),this.g=new Ih(f),this.l=l,this.h=f&&f.messageUrlParams||null,l=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(l?l["X-WebChannel-Content-Type"]=f.messageContentType:l={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(l?l["X-WebChannel-Client-Profile"]=f.va:l={"X-WebChannel-Client-Profile":f.va}),this.g.S=l,(l=f&&f.Sb)&&!Y(l)&&(this.g.m=l),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!Y(f)&&(this.g.D=f,l=this.h,l!==null&&f in l&&(l=this.h,f in l&&delete l[f])),this.j=new we(this)}k(O,nn),O.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},O.prototype.close=function(){Ul(this.g)},O.prototype.o=function(l){var f=this.g;if(typeof l=="string"){var m={};m.__data__=l,l=m}else this.u&&(m={},m.__data__=Ua(l),l=m);f.i.push(new uh(f.Ya++,l)),f.G==3&&Xa(f)},O.prototype.N=function(){this.g.l=null,delete this.j,Ul(this.g),delete this.g,O.aa.N.call(this)};function L(l){rn.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var f=l.__sm__;if(f){e:{for(let m in f){l=m;break e}l=void 0}(this.i=l)&&(l=this.i,f=f!==null&&l in f?f[l]:void 0),this.data=f}else this.data=l}k(L,rn);function J(){Al.call(this),this.status=1}k(J,Al);function we(l){this.g=l}k(we,v),we.prototype.ua=function(){fn(this.g,"a")},we.prototype.ta=function(l){fn(this.g,new L(l))},we.prototype.sa=function(l){fn(this.g,new J)},we.prototype.ra=function(){fn(this.g,"b")},D.prototype.createWebChannel=D.prototype.g,O.prototype.send=O.prototype.o,O.prototype.open=O.prototype.m,O.prototype.close=O.prototype.close,iA=Ws.createWebChannelTransport=function(){return new D},rA=Ws.getStatEventTarget=function(){return xl()},nA=Ws.Event=tr,X_=Ws.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},$a.NO_ERROR=0,$a.TIMEOUT=8,$a.HTTP_ERROR=6,jp=Ws.ErrorCode=$a,Rl.COMPLETE="complete",tA=Ws.EventType=Rl,lo.EventType=uo,uo.OPEN="a",uo.CLOSE="b",uo.ERROR="c",uo.MESSAGE="d",nn.prototype.listen=nn.prototype.K,bd=Ws.WebChannel=lo,SY=Ws.FetchXmlHttpFactory=ut,Je.prototype.listenOnce=Je.prototype.L,Je.prototype.getLastError=Je.prototype.Ka,Je.prototype.getLastErrorCode=Je.prototype.Ba,Je.prototype.getStatus=Je.prototype.Z,Je.prototype.getResponseJson=Je.prototype.Oa,Je.prototype.getResponseText=Je.prototype.oa,Je.prototype.send=Je.prototype.ea,Je.prototype.setWithCredentials=Je.prototype.Ha,eA=Ws.XhrIo=Je}).apply(typeof J_<"u"?J_:typeof self<"u"?self:typeof window<"u"?window:{});var RL="@firebase/firestore",kL="4.8.0";var In=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};In.UNAUTHENTICATED=new In(null),In.GOOGLE_CREDENTIALS=new In("google-credentials-uid"),In.FIRST_PARTY=new In("first-party-uid"),In.MOCK_USER=new In("mock-user");var Hd="11.10.0";var ll=new Li("@firebase/firestore");function Cd(){return ll.logLevel}function re(n,...e){if(ll.logLevel<=Be.DEBUG){let t=e.map(Qx);ll.debug(`Firestore (${Hd}): ${n}`,...t)}}function Qs(n,...e){if(ll.logLevel<=Be.ERROR){let t=e.map(Qx);ll.error(`Firestore (${Hd}): ${n}`,...t)}}function Ca(n,...e){if(ll.logLevel<=Be.WARN){let t=e.map(Qx);ll.warn(`Firestore (${Hd}): ${n}`,...t)}}function Qx(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function ye(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,bU(n,r,t)}function bU(n,e,t){let r=`FIRESTORE (${Hd}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Qs(r),new Error(r)}function at(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||bU(e,i,r)}function Se(n,e){return n}var q={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},te=class extends fr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Gi=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var s0=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},lA=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(In.UNAUTHENTICATED))}shutdown(){}},uA=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},dA=class{constructor(e){this.t=e,this.currentUser=In.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){at(this.o===void 0,42304);let r=this.i,i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve(),s=new Gi;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Gi,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let c=s;e.enqueueRetryable(async()=>{await c.promise,await i(this.currentUser)})},a=c=>{re("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(re("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Gi)}},0),o()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(re("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(at(typeof r.accessToken=="string",31837,{l:r}),new s0(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return at(e===null||typeof e=="string",2055,{h:e}),new In(e)}},hA=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=In.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},fA=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new hA(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(In.FIRST_PARTY))}shutdown(){}invalidateToken(){}},o0=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},pA=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,xr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){at(this.o===void 0,3512);let r=s=>{s.error!=null&&re("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.m;return this.m=s.token,re("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{re("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.V.getImmediate({optional:!0});s?i(s):re("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new o0(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(at(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new o0(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function DY(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}function CU(){return new TextEncoder}var Gp=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=DY(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%62))}return r}};function Fe(n,e){return n<e?-1:n>e?1:0}function gA(n,e){let t=0;for(;t<n.length&&t<e.length;){let r=n.codePointAt(t),i=e.codePointAt(t);if(r!==i){if(r<128&&i<128)return Fe(r,i);{let s=CU(),o=AY(s.encode(NL(n,t)),s.encode(NL(e,t)));return o!==0?o:Fe(r,i)}}t+=r>65535?2:1}return Fe(n.length,e.length)}function NL(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function AY(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return Fe(n[t],e[t]);return Fe(n.length,e.length)}function kd(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var ML="__name__",a0=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&ye(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&ye(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let s=n.compareSegments(e.get(i),t.get(i));if(s!==0)return s}return Fe(e.length,t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):gA(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Gs.fromString(e.substring(4,e.length-2))}},bt=class n extends a0{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new te(q.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},xY=/^[_a-zA-Z][_a-zA-Z0-9]*$/,yr=class n extends a0{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return xY.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===ML}static keyField(){return new n([ML])}static fromServerFormat(e){let t=[],r="",i=0,s=()=>{if(r.length===0)throw new te(q.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},o=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new te(q.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new te(q.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new te(q.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var fe=class n{constructor(e){this.path=e}static fromPath(e){return new n(bt.fromString(e))}static fromName(e){return new n(bt.fromString(e).popFirst(5))}static empty(){return new n(bt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&bt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return bt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new bt(e.slice()))}};function TU(n,e,t){if(!t)throw new te(q.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function RY(n,e,t,r){if(e===!0&&r===!0)throw new te(q.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function PL(n){if(!fe.isDocumentKey(n))throw new te(q.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function OL(n){if(fe.isDocumentKey(n))throw new te(q.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function SU(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function j0(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":ye(12329,{type:typeof n})}function Wi(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new te(q.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=j0(n);throw new te(q.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Jt(n,e){let t={typeString:n};return e&&(t.value=e),t}function ig(n,e){if(!SU(n))throw new te(q.INVALID_ARGUMENT,"JSON must be an object");let t;for(let r in e)if(e[r]){let i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}let o=n[r];if(i&&typeof o!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&o!==s.value){t=`Expected '${r}' field to equal '${s.value}'`;break}}if(t)throw new te(q.INVALID_ARGUMENT,t);return!0}var FL=-62135596800,VL=1e6,Xt=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*VL);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new te(q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new te(q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<FL)throw new te(q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new te(q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/VL}_compareTo(e){return this.seconds===e.seconds?Fe(this.nanoseconds,e.nanoseconds):Fe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:n._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(ig(e,n._jsonSchema))return new n(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-FL;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};Xt._jsonSchemaVersion="firestore/timestamp/1.0",Xt._jsonSchema={type:Jt("string",Xt._jsonSchemaVersion),seconds:Jt("number"),nanoseconds:Jt("number")};var Re=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new Xt(0,0))}static max(){return new n(new Xt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Wp=-1,mA=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};mA.UNKNOWN_ID=-1;function kY(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Re.fromTimestamp(r===1e9?new Xt(t+1,0):new Xt(t,r));return new ul(i,fe.empty(),e)}function NY(n){return new ul(n.readTime,n.key,Wp)}var ul=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(Re.min(),fe.empty(),Wp)}static max(){return new n(Re.max(),fe.empty(),Wp)}};function MY(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=fe.comparator(n.documentKey,e.documentKey),t!==0?t:Fe(n.largestBatchId,e.largestBatchId))}var PY="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",yA=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};async function qd(n){if(n.code!==q.FAILED_PRECONDITION||n.message!==PY)throw n;re("LocalStore","Unexpectedly lost primary lease")}var W=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ye(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&t()},c=>r(c))}),o=!0,s===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let s=e.length,o=new Array(s),a=0;for(let c=0;c<s;c++){let d=c;t(e[d]).next(h=>{o[d]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,t){return new n((r,i)=>{let s=()=>{e()===!0?t().next(()=>{s()},i):r()};s()})}};function OY(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function zd(n){return n.name==="IndexedDbTransactionError"}var Yx=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this._e(i),this.ae=i=>r.writeSequenceNumber(i))}_e(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.ae&&this.ae(t),t}}n.ue=-1;return n})(),Jx=-1;function B0(n){return n==null}function Kp(n){return n===0&&1/n==-1/0}function FY(n){return typeof n=="number"&&Number.isInteger(n)&&!Kp(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var DU="";function VY(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=LL(e)),e=LY(n.get(t),e);return LL(e)}function LY(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let s=n.charAt(i);switch(s){case"\0":t+="";break;case DU:t+="";break;default:t+=s}}return t}function LL(n){return n+DU+""}var UY="remoteDocuments",AU="owner";var xU="mutationQueues";var RU="mutations";var kU="documentMutations",jY="remoteDocumentsV14";var NU="remoteDocumentGlobal";var MU="targets";var PU="targetDocuments";var OU="targetGlobal",FU="collectionParents";var VU="clientMetadata";var LU="bundles";var UU="namedQueries";var BY="indexConfiguration";var $Y="indexState";var HY="indexEntries";var jU="documentOverlays";var qY="globals";var zY=[xU,RU,kU,UY,MU,AU,OU,PU,VU,NU,FU,LU,UU],O0e=[...zY,jU],GY=[xU,RU,kU,jY,MU,AU,OU,PU,VU,NU,FU,LU,UU,jU],WY=GY,KY=[...WY,BY,$Y,HY];var F0e=[...KY,qY];function UL(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ra(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function BU(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var kt=class n{constructor(e,t){this.comparator=e,this.root=t||Ki.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ki.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ki.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ad(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ad(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ad(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ad(this.root,e,this.comparator,!0)}},Ad=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Ki=class n{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=s??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new n(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ye(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ye(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw ye(27949);return e+(this.isRed()?0:1)}};Ki.EMPTY=null,Ki.RED=!0,Ki.BLACK=!1;Ki.EMPTY=new class{constructor(){this.size=0}get key(){throw ye(57766)}get value(){throw ye(16141)}get color(){throw ye(16727)}get left(){throw ye(29726)}get right(){throw ye(36894)}copy(e,t,r,i,s){return this}insert(e,t,r){return new Ki(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var En=class n{constructor(e){this.comparator=e,this.data=new kt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new c0(this.data.getIterator())}getIteratorFrom(e){return new c0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},c0=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Mr=class n{constructor(e){this.fields=e,e.sort(yr.comparator)}static empty(){return new n([])}unionWith(e){let t=new En(yr.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return kd(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var l0=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Ln=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=(function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new l0("Invalid base64 string: "+s):s}})(e);return new n(t)}static fromUint8Array(e){let t=(function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s})(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Fe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Ln.EMPTY_BYTE_STRING=new Ln("");var QY=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ys(n){if(at(!!n,39018),typeof n=="string"){let e=0,t=QY.exec(n);if(at(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Et(n.seconds),nanos:Et(n.nanos)}}function Et(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Js(n){return typeof n=="string"?Ln.fromBase64String(n):Ln.fromUint8Array(n)}var $U="server_timestamp",HU="__type__",qU="__previous_value__",zU="__local_write_time__";function Xx(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[HU])===null||t===void 0?void 0:t.stringValue)===$U}function $0(n){let e=n.mapValue.fields[qU];return Xx(e)?$0(e):e}function Qp(n){let e=Ys(n.mapValue.fields[zU].timestampValue);return new Xt(e.seconds,e.nanos)}var vA=class{constructor(e,t,r,i,s,o,a,c,d,h){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=d,this.isUsingEmulator=h}},u0="(default)",d0=class n{constructor(e,t){this.projectId=e,this.database=t||u0}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===u0}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var Zx="__type__",GU="__max__",Z_={mapValue:{fields:{__type__:{stringValue:GU}}}},e1="__vector__",Nd="value";function Ta(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Xx(n)?4:KU(n)?9007199254740991:WU(n)?10:11:ye(28295,{value:n})}function Ji(n,e){if(n===e)return!0;let t=Ta(n);if(t!==Ta(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Qp(n).isEqual(Qp(e));case 3:return(function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=Ys(i.timestampValue),a=Ys(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(i,s){return Js(i.bytesValue).isEqual(Js(s.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(i,s){return Et(i.geoPointValue.latitude)===Et(s.geoPointValue.latitude)&&Et(i.geoPointValue.longitude)===Et(s.geoPointValue.longitude)})(n,e);case 2:return(function(i,s){if("integerValue"in i&&"integerValue"in s)return Et(i.integerValue)===Et(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=Et(i.doubleValue),a=Et(s.doubleValue);return o===a?Kp(o)===Kp(a):isNaN(o)&&isNaN(a)}return!1})(n,e);case 9:return kd(n.arrayValue.values||[],e.arrayValue.values||[],Ji);case 10:case 11:return(function(i,s){let o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(UL(o)!==UL(a))return!1;for(let c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!Ji(o[c],a[c])))return!1;return!0})(n,e);default:return ye(52216,{left:n})}}function Yp(n,e){return(n.values||[]).find(t=>Ji(t,e))!==void 0}function Md(n,e){if(n===e)return 0;let t=Ta(n),r=Ta(e);if(t!==r)return Fe(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Fe(n.booleanValue,e.booleanValue);case 2:return(function(s,o){let a=Et(s.integerValue||s.doubleValue),c=Et(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1})(n,e);case 3:return jL(n.timestampValue,e.timestampValue);case 4:return jL(Qp(n),Qp(e));case 5:return gA(n.stringValue,e.stringValue);case 6:return(function(s,o){let a=Js(s),c=Js(o);return a.compareTo(c)})(n.bytesValue,e.bytesValue);case 7:return(function(s,o){let a=s.split("/"),c=o.split("/");for(let d=0;d<a.length&&d<c.length;d++){let h=Fe(a[d],c[d]);if(h!==0)return h}return Fe(a.length,c.length)})(n.referenceValue,e.referenceValue);case 8:return(function(s,o){let a=Fe(Et(s.latitude),Et(o.latitude));return a!==0?a:Fe(Et(s.longitude),Et(o.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return BL(n.arrayValue,e.arrayValue);case 10:return(function(s,o){var a,c,d,h;let p=s.fields||{},y=o.fields||{},E=(a=p[Nd])===null||a===void 0?void 0:a.arrayValue,k=(c=y[Nd])===null||c===void 0?void 0:c.arrayValue,P=Fe(((d=E?.values)===null||d===void 0?void 0:d.length)||0,((h=k?.values)===null||h===void 0?void 0:h.length)||0);return P!==0?P:BL(E,k)})(n.mapValue,e.mapValue);case 11:return(function(s,o){if(s===Z_.mapValue&&o===Z_.mapValue)return 0;if(s===Z_.mapValue)return 1;if(o===Z_.mapValue)return-1;let a=s.fields||{},c=Object.keys(a),d=o.fields||{},h=Object.keys(d);c.sort(),h.sort();for(let p=0;p<c.length&&p<h.length;++p){let y=gA(c[p],h[p]);if(y!==0)return y;let E=Md(a[c[p]],d[h[p]]);if(E!==0)return E}return Fe(c.length,h.length)})(n.mapValue,e.mapValue);default:throw ye(23264,{le:t})}}function jL(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Fe(n,e);let t=Ys(n),r=Ys(e),i=Fe(t.seconds,r.seconds);return i!==0?i:Fe(t.nanos,r.nanos)}function BL(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let s=Md(t[i],r[i]);if(s)return s}return Fe(t.length,r.length)}function Pd(n){return _A(n)}function _A(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){let r=Ys(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Js(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return fe.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",i=!0;for(let s of t.values||[])i?i=!1:r+=",",r+=_A(s);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){let r=Object.keys(t.fields||{}).sort(),i="{",s=!0;for(let o of r)s?s=!1:i+=",",i+=`${o}:${_A(t.fields[o])}`;return i+"}"})(n.mapValue):ye(61005,{value:n})}function n0(n){switch(Ta(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=$0(n);return e?16+n0(e):16;case 5:return 2*n.stringValue.length;case 6:return Js(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce((i,s)=>i+n0(s),0)})(n.arrayValue);case 10:case 11:return(function(r){let i=0;return Ra(r.fields,(s,o)=>{i+=s.length+n0(o)}),i})(n.mapValue);default:throw ye(13486,{value:n})}}function $L(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function wA(n){return!!n&&"integerValue"in n}function t1(n){return!!n&&"arrayValue"in n}function HL(n){return!!n&&"nullValue"in n}function qL(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function r0(n){return!!n&&"mapValue"in n}function WU(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[Zx])===null||t===void 0?void 0:t.stringValue)===e1}function $p(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return Ra(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=$p(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=$p(n.arrayValue.values[t]);return e}return Object.assign({},n)}function KU(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===GU}var L0e={mapValue:{fields:{[Zx]:{stringValue:e1},[Nd]:{arrayValue:{}}}}};var mr=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!r0(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=$p(t)}setAll(e){let t=yr.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){let c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=a.popLast()}o?r[a.lastSegment()]=$p(o):i.push(a.lastSegment())});let s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){let t=this.field(e.popLast());r0(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ji(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];r0(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Ra(t,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new n($p(this.value))}};function QU(n){let e=[];return Ra(n.fields,(t,r)=>{let i=new yr([t]);if(r0(r)){let s=QU(r.mapValue).fields;if(s.length===0)e.push(i);else for(let o of s)e.push(i.child(o))}else e.push(i)}),new Mr(e)}var li=class n{constructor(e,t,r,i,s,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new n(e,0,Re.min(),Re.min(),Re.min(),mr.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,Re.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,Re.min(),Re.min(),mr.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,Re.min(),Re.min(),mr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Re.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=mr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=mr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Re.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Od=class{constructor(e,t){this.position=e,this.inclusive=t}};function zL(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let s=e[i],o=n.position[i];if(s.field.isKeyField()?r=fe.comparator(fe.fromName(o.referenceValue),t.key):r=Md(o,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function GL(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Ji(n.position[t],e.position[t]))return!1;return!0}var dl=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function YY(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var h0=class{},Yt=class n extends h0{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new EA(e,t,r):t==="array-contains"?new TA(e,r):t==="in"?new SA(e,r):t==="not-in"?new DA(e,r):t==="array-contains-any"?new AA(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new bA(e,r):new CA(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Md(t,this.value)):t!==null&&Ta(this.value)===Ta(t)&&this.matchesComparison(Md(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ye(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},ui=class n extends h0{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new n(e,t)}matches(e){return YU(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}};function YU(n){return n.op==="and"}function JU(n){return JY(n)&&YU(n)}function JY(n){for(let e of n.filters)if(e instanceof ui)return!1;return!0}function IA(n){if(n instanceof Yt)return n.field.canonicalString()+n.op.toString()+Pd(n.value);if(JU(n))return n.filters.map(e=>IA(e)).join(",");{let e=n.filters.map(t=>IA(t)).join(",");return`${n.op}(${e})`}}function XU(n,e){return n instanceof Yt?(function(r,i){return i instanceof Yt&&r.op===i.op&&r.field.isEqual(i.field)&&Ji(r.value,i.value)})(n,e):n instanceof ui?(function(r,i){return i instanceof ui&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&XU(o,i.filters[a]),!0):!1})(n,e):void ye(19439)}function ZU(n){return n instanceof Yt?(function(t){return`${t.field.canonicalString()} ${t.op} ${Pd(t.value)}`})(n):n instanceof ui?(function(t){return t.op.toString()+" {"+t.getFilters().map(ZU).join(" ,")+"}"})(n):"Filter"}var EA=class extends Yt{constructor(e,t,r){super(e,t,r),this.key=fe.fromName(r.referenceValue)}matches(e){let t=fe.comparator(e.key,this.key);return this.matchesComparison(t)}},bA=class extends Yt{constructor(e,t){super(e,"in",t),this.keys=ej("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},CA=class extends Yt{constructor(e,t){super(e,"not-in",t),this.keys=ej("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function ej(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>fe.fromName(r.referenceValue))}var TA=class extends Yt{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return t1(t)&&Yp(t.arrayValue,this.value)}},SA=class extends Yt{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&Yp(this.value.arrayValue,t)}},DA=class extends Yt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Yp(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Yp(this.value.arrayValue,t)}},AA=class extends Yt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!t1(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Yp(this.value.arrayValue,r))}};var xA=class{constructor(e,t=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.Pe=null}};function WL(n,e=null,t=[],r=[],i=null,s=null,o=null){return new xA(n,e,t,r,i,s,o)}function n1(n){let e=Se(n);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>IA(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>(function(s){return s.field.canonicalString()+s.dir})(r)).join(","),B0(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Pd(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Pd(r)).join(",")),e.Pe=t}return e.Pe}function r1(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!YY(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!XU(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!GL(n.startAt,e.startAt)&&GL(n.endAt,e.endAt)}function RA(n){return fe.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var Sa=class{constructor(e,t=null,r=[],i=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}};function XY(n,e,t,r,i,s,o,a){return new Sa(n,e,t,r,i,s,o,a)}function i1(n){return new Sa(n)}function KL(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function tj(n){return n.collectionGroup!==null}function Hp(n){let e=Se(n);if(e.Te===null){e.Te=[];let t=new Set;for(let s of e.explicitOrderBy)e.Te.push(s),t.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new En(yr.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(d=>{d.isInequality()&&(a=a.add(d.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.Te.push(new dl(s,r))}),t.has(yr.keyField().canonicalString())||e.Te.push(new dl(yr.keyField(),r))}return e.Te}function Qi(n){let e=Se(n);return e.Ie||(e.Ie=ZY(e,Hp(n))),e.Ie}function ZY(n,e){if(n.limitType==="F")return WL(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new dl(i.field,s)});let t=n.endAt?new Od(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Od(n.startAt.position,n.startAt.inclusive):null;return WL(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function kA(n,e){let t=n.filters.concat([e]);return new Sa(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function NA(n,e,t){return new Sa(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function H0(n,e){return r1(Qi(n),Qi(e))&&n.limitType===e.limitType}function nj(n){return`${n1(Qi(n))}|lt:${n.limitType}`}function Td(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>ZU(i)).join(", ")}]`),B0(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>(function(o){return`${o.field.canonicalString()} (${o.dir})`})(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Pd(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Pd(i)).join(",")),`Target(${r})`})(Qi(n))}; limitType=${n.limitType})`}function q0(n,e){return e.isFoundDocument()&&(function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):fe.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)})(n,e)&&(function(r,i){for(let s of Hp(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0})(n,e)&&(function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0})(n,e)&&(function(r,i){return!(r.startAt&&!(function(o,a,c){let d=zL(o,a,c);return o.inclusive?d<=0:d<0})(r.startAt,Hp(r),i)||r.endAt&&!(function(o,a,c){let d=zL(o,a,c);return o.inclusive?d>=0:d>0})(r.endAt,Hp(r),i))})(n,e)}function eJ(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function rj(n){return(e,t)=>{let r=!1;for(let i of Hp(n)){let s=tJ(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function tJ(n,e,t){let r=n.field.isKeyField()?fe.comparator(e.key,t.key):(function(s,o,a){let c=o.data.field(s),d=a.data.field(s);return c!==null&&d!==null?Md(c,d):ye(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ye(19790,{direction:n.dir})}}var Xs=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ra(this.inner,(t,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return BU(this.inner)}size(){return this.innerSize}};var nJ=new kt(fe.comparator);function Zs(){return nJ}var ij=new kt(fe.comparator);function Bp(...n){let e=ij;for(let t of n)e=e.insert(t.key,t);return e}function sj(n){let e=ij;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function il(){return qp()}function oj(){return qp()}function qp(){return new Xs(n=>n.toString(),(n,e)=>n.isEqual(e))}var rJ=new kt(fe.comparator),iJ=new En(fe.comparator);function qe(...n){let e=iJ;for(let t of n)e=e.add(t);return e}var sJ=new En(Fe);function oJ(){return sJ}function s1(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Kp(e)?"-0":e}}function aj(n){return{integerValue:""+n}}function aJ(n,e){return FY(e)?aj(e):s1(n,e)}var Fd=class{constructor(){this._=void 0}};function cJ(n,e,t){return n instanceof hl?(function(i,s){let o={fields:{[HU]:{stringValue:$U},[zU]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Xx(s)&&(s=$0(s)),s&&(o.fields[qU]=s),{mapValue:o}})(t,e):n instanceof fl?lj(n,e):n instanceof pl?uj(n,e):(function(i,s){let o=cj(i,s),a=QL(o)+QL(i.Ee);return wA(o)&&wA(i.Ee)?aj(a):s1(i.serializer,a)})(n,e)}function lJ(n,e,t){return n instanceof fl?lj(n,e):n instanceof pl?uj(n,e):t}function cj(n,e){return n instanceof Vd?(function(r){return wA(r)||(function(s){return!!s&&"doubleValue"in s})(r)})(e)?e:{integerValue:0}:null}var hl=class extends Fd{},fl=class extends Fd{constructor(e){super(),this.elements=e}};function lj(n,e){let t=dj(e);for(let r of n.elements)t.some(i=>Ji(i,r))||t.push(r);return{arrayValue:{values:t}}}var pl=class extends Fd{constructor(e){super(),this.elements=e}};function uj(n,e){let t=dj(e);for(let r of n.elements)t=t.filter(i=>!Ji(i,r));return{arrayValue:{values:t}}}var Vd=class extends Fd{constructor(e,t){super(),this.serializer=e,this.Ee=t}};function QL(n){return Et(n.integerValue||n.doubleValue)}function dj(n){return t1(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}var MA=class{constructor(e,t){this.field=e,this.transform=t}};function uJ(n,e){return n.field.isEqual(e.field)&&(function(r,i){return r instanceof fl&&i instanceof fl||r instanceof pl&&i instanceof pl?kd(r.elements,i.elements,Ji):r instanceof Vd&&i instanceof Vd?Ji(r.Ee,i.Ee):r instanceof hl&&i instanceof hl})(n.transform,e.transform)}var PA=class{constructor(e,t){this.version=e,this.transformResults=t}},Ks=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function i0(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var Ld=class{};function hj(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Jp(n.key,Ks.none()):new gl(n.key,n.data,Ks.none());{let t=n.data,r=mr.empty(),i=new En(yr.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Xi(n.key,r,new Mr(i.toArray()),Ks.none())}}function dJ(n,e,t){n instanceof gl?(function(i,s,o){let a=i.value.clone(),c=JL(i.fieldTransforms,s,o.transformResults);a.setAll(c),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()})(n,e,t):n instanceof Xi?(function(i,s,o){if(!i0(i.precondition,s))return void s.convertToUnknownDocument(o.version);let a=JL(i.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(fj(i)),c.setAll(a),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()})(n,e,t):(function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()})(0,e,t)}function zp(n,e,t,r){return n instanceof gl?(function(s,o,a,c){if(!i0(s.precondition,o))return a;let d=s.value.clone(),h=XL(s.fieldTransforms,c,o);return d.setAll(h),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null})(n,e,t,r):n instanceof Xi?(function(s,o,a,c){if(!i0(s.precondition,o))return a;let d=XL(s.fieldTransforms,c,o),h=o.data;return h.setAll(fj(s)),h.setAll(d),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(p=>p.field))})(n,e,t,r):(function(s,o,a){return i0(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a})(n,e,t)}function hJ(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),s=cj(r.transform,i||null);s!=null&&(t===null&&(t=mr.empty()),t.set(r.field,s))}return t||null}function YL(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&kd(r,i,(s,o)=>uJ(s,o))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var gl=class extends Ld{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Xi=class extends Ld{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function fj(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function JL(n,e,t){let r=new Map;at(n.length===t.length,32656,{Ae:t.length,Re:n.length});for(let i=0;i<t.length;i++){let s=n[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,lJ(o,a,t[i]))}return r}function XL(n,e,t){let r=new Map;for(let i of n){let s=i.transform,o=t.data.field(i.field);r.set(i.field,cJ(s,o,e))}return r}var Jp=class extends Ld{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},OA=class extends Ld{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var FA=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&dJ(s,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=zp(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=zp(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=oj();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=t.has(i.key)?null:a;let c=hj(o,a);c!==null&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(Re.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),qe())}isEqual(e){return this.batchId===e.batchId&&kd(this.mutations,e.mutations,(t,r)=>YL(t,r))&&kd(this.baseMutations,e.baseMutations,(t,r)=>YL(t,r))}},VA=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){at(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let i=(function(){return rJ})(),s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new n(e,t,r,i)}};var LA=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var UA=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var Kt,We;function fJ(n){switch(n){case q.OK:return ye(64938);case q.CANCELLED:case q.UNKNOWN:case q.DEADLINE_EXCEEDED:case q.RESOURCE_EXHAUSTED:case q.INTERNAL:case q.UNAVAILABLE:case q.UNAUTHENTICATED:return!1;case q.INVALID_ARGUMENT:case q.NOT_FOUND:case q.ALREADY_EXISTS:case q.PERMISSION_DENIED:case q.FAILED_PRECONDITION:case q.ABORTED:case q.OUT_OF_RANGE:case q.UNIMPLEMENTED:case q.DATA_LOSS:return!0;default:return ye(15467,{code:n})}}function pj(n){if(n===void 0)return Qs("GRPC error has no .code"),q.UNKNOWN;switch(n){case Kt.OK:return q.OK;case Kt.CANCELLED:return q.CANCELLED;case Kt.UNKNOWN:return q.UNKNOWN;case Kt.DEADLINE_EXCEEDED:return q.DEADLINE_EXCEEDED;case Kt.RESOURCE_EXHAUSTED:return q.RESOURCE_EXHAUSTED;case Kt.INTERNAL:return q.INTERNAL;case Kt.UNAVAILABLE:return q.UNAVAILABLE;case Kt.UNAUTHENTICATED:return q.UNAUTHENTICATED;case Kt.INVALID_ARGUMENT:return q.INVALID_ARGUMENT;case Kt.NOT_FOUND:return q.NOT_FOUND;case Kt.ALREADY_EXISTS:return q.ALREADY_EXISTS;case Kt.PERMISSION_DENIED:return q.PERMISSION_DENIED;case Kt.FAILED_PRECONDITION:return q.FAILED_PRECONDITION;case Kt.ABORTED:return q.ABORTED;case Kt.OUT_OF_RANGE:return q.OUT_OF_RANGE;case Kt.UNIMPLEMENTED:return q.UNIMPLEMENTED;case Kt.DATA_LOSS:return q.DATA_LOSS;default:return ye(39323,{code:n})}}(We=Kt||(Kt={}))[We.OK=0]="OK",We[We.CANCELLED=1]="CANCELLED",We[We.UNKNOWN=2]="UNKNOWN",We[We.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",We[We.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",We[We.NOT_FOUND=5]="NOT_FOUND",We[We.ALREADY_EXISTS=6]="ALREADY_EXISTS",We[We.PERMISSION_DENIED=7]="PERMISSION_DENIED",We[We.UNAUTHENTICATED=16]="UNAUTHENTICATED",We[We.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",We[We.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",We[We.ABORTED=10]="ABORTED",We[We.OUT_OF_RANGE=11]="OUT_OF_RANGE",We[We.UNIMPLEMENTED=12]="UNIMPLEMENTED",We[We.INTERNAL=13]="INTERNAL",We[We.UNAVAILABLE=14]="UNAVAILABLE",We[We.DATA_LOSS=15]="DATA_LOSS";var ZL=null;var pJ=new Gs([4294967295,4294967295],0);function eU(n){let e=CU().encode(n),t=new ZD;return t.update(e),new Uint8Array(t.digest())}function tU(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Gs([t,r],0),new Gs([i,s],0)]}var jA=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new sl(`Invalid padding: ${t}`);if(r<0)throw new sl(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new sl(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new sl(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=Gs.fromNumber(this.fe)}pe(e,t,r){let i=e.add(t.multiply(Gs.fromNumber(r)));return i.compare(pJ)===1&&(i=new Gs([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;let t=eU(e),[r,i]=tU(t);for(let s=0;s<this.hashCount;s++){let o=this.pe(r,i,s);if(!this.ye(o))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new n(s,i,t);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.fe===0)return;let t=eU(e),[r,i]=tU(t);for(let s=0;s<this.hashCount;s++){let o=this.pe(r,i,s);this.we(o)}}we(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},sl=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var f0=class n{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,Xp.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(Re.min(),i,new kt(Fe),Zs(),qe())}},Xp=class n{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,qe(),qe(),qe())}};var xd=class{constructor(e,t,r,i){this.Se=e,this.removedTargetIds=t,this.key=r,this.be=i}},p0=class{constructor(e,t){this.targetId=e,this.De=t}},g0=class{constructor(e,t,r=Ln.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},m0=class{constructor(){this.ve=0,this.Ce=nU(),this.Fe=Ln.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=qe(),t=qe(),r=qe();return this.Ce.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:ye(38017,{changeType:s})}}),new Xp(this.Fe,this.Me,e,t,r)}ke(){this.xe=!1,this.Ce=nU()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,at(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}},BA=class{constructor(e){this.We=e,this.Ge=new Map,this.ze=Zs(),this.je=e0(),this.Je=e0(),this.He=new kt(Fe)}Ye(e){for(let t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(let t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,t=>{let r=this.tt(t);switch(e.state){case 0:this.nt(t)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),r.Be(e.resumeToken));break;default:ye(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach((r,i)=>{this.nt(i)&&t(i)})}it(e){let t=e.targetId,r=e.De.count,i=this.st(t);if(i){let s=i.target;if(RA(s))if(r===0){let o=new fe(s.path);this.Xe(t,o,li.newNoDocument(o,Re.min()))}else at(r===1,20013,{expectedCount:r});else{let o=this.ot(t);if(o!==r){let a=this._t(e),c=a?this.ut(a,e,o):1;if(c!==0){this.rt(t);let d=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,d)}ZL?.ct((function(h,p,y,E,k){var P,M,H,Y,ee,De;let Ze={localCacheCount:h,existenceFilterCount:p.count,databaseId:y.database,projectId:y.projectId},ve=p.unchangedNames;return ve&&(Ze.bloomFilter={applied:k===0,hashCount:(P=ve?.hashCount)!==null&&P!==void 0?P:0,bitmapLength:(Y=(H=(M=ve?.bits)===null||M===void 0?void 0:M.bitmap)===null||H===void 0?void 0:H.length)!==null&&Y!==void 0?Y:0,padding:(De=(ee=ve?.bits)===null||ee===void 0?void 0:ee.padding)!==null&&De!==void 0?De:0,mightContain:T=>{var _;return(_=E?.mightContain(T))!==null&&_!==void 0&&_}}),Ze})(o,e.De,this.We.lt(),a,c))}}}}_t(e){let t=e.De.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t,o,a;try{o=Js(r).toUint8Array()}catch(c){if(c instanceof l0)return Ca("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new jA(o,i,s)}catch(c){return Ca(c instanceof sl?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.fe===0?null:a}ut(e,t,r){return t.De.count===r-this.ht(e,t.targetId)?0:2}ht(e,t){let r=this.We.getRemoteKeysForTarget(t),i=0;return r.forEach(s=>{let o=this.We.lt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Xe(t,s,null),i++)}),i}Pt(e){let t=new Map;this.Ge.forEach((s,o)=>{let a=this.st(o);if(a){if(s.current&&RA(a.target)){let c=new fe(a.target.path);this.Tt(c).has(o)||this.It(o,c)||this.Xe(o,c,li.newNoDocument(c,e))}s.Ne&&(t.set(o,s.Le()),s.ke())}});let r=qe();this.Je.forEach((s,o)=>{let a=!0;o.forEachWhile(c=>{let d=this.st(c);return!d||d.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ze.forEach((s,o)=>o.setReadTime(e));let i=new f0(e,t,this.He,this.ze,r);return this.ze=Zs(),this.je=e0(),this.Je=e0(),this.He=new kt(Fe),i}Ze(e,t){if(!this.nt(e))return;let r=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,r),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,r){if(!this.nt(e))return;let i=this.tt(e);this.It(e,t)?i.qe(t,1):i.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),r&&(this.ze=this.ze.insert(t,r))}removeTarget(e){this.Ge.delete(e)}ot(e){let t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new m0,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new En(Fe),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new En(Fe),this.je=this.je.insert(e,t)),t}nt(e){let t=this.st(e)!==null;return t||re("WatchChangeAggregator","Detected inactive target",e),t}st(e){let t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new m0),this.We.getRemoteKeysForTarget(e).forEach(t=>{this.Xe(e,t,null)})}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}};function e0(){return new kt(fe.comparator)}function nU(){return new kt(fe.comparator)}var gJ={asc:"ASCENDING",desc:"DESCENDING"},mJ={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},yJ={and:"AND",or:"OR"},$A=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function HA(n,e){return n.useProto3Json||B0(e)?e:{value:e}}function y0(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function gj(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function vJ(n,e){return y0(n,e.toTimestamp())}function Yi(n){return at(!!n,49232),Re.fromTimestamp((function(t){let r=Ys(t);return new Xt(r.seconds,r.nanos)})(n))}function o1(n,e){return qA(n,e).canonicalString()}function qA(n,e){let t=(function(i){return new bt(["projects",i.projectId,"databases",i.database])})(n).child("documents");return e===void 0?t:t.child(e)}function mj(n){let e=bt.fromString(n);return at(Ij(e),10190,{key:e.toString()}),e}function zA(n,e){return o1(n.databaseId,e.path)}function sA(n,e){let t=mj(e);if(t.get(1)!==n.databaseId.projectId)throw new te(q.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new te(q.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new fe(vj(t))}function yj(n,e){return o1(n.databaseId,e)}function _J(n){let e=mj(n);return e.length===4?bt.emptyPath():vj(e)}function GA(n){return new bt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function vj(n){return at(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function rU(n,e,t){return{name:zA(n,e),fields:t.value.mapValue.fields}}function wJ(n,e){let t;if("targetChange"in e){e.targetChange;let r=(function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:ye(39313,{state:d})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=(function(d,h){return d.useProto3Json?(at(h===void 0||typeof h=="string",58123),Ln.fromBase64String(h||"")):(at(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),Ln.fromUint8Array(h||new Uint8Array))})(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&(function(d){let h=d.code===void 0?q.UNKNOWN:pj(d.code);return new te(h,d.message||"")})(o);t=new g0(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=sA(n,r.document.name),s=Yi(r.document.updateTime),o=r.document.createTime?Yi(r.document.createTime):Re.min(),a=new mr({mapValue:{fields:r.document.fields}}),c=li.newFoundDocument(i,s,o,a),d=r.targetIds||[],h=r.removedTargetIds||[];t=new xd(d,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=sA(n,r.document),s=r.readTime?Yi(r.readTime):Re.min(),o=li.newNoDocument(i,s),a=r.removedTargetIds||[];t=new xd([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=sA(n,r.document),s=r.removedTargetIds||[];t=new xd([],s,i,null)}else{if(!("filter"in e))return ye(11601,{At:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,o=new UA(i,s),a=r.targetId;t=new p0(a,o)}}return t}function IJ(n,e){let t;if(e instanceof gl)t={update:rU(n,e.key,e.value)};else if(e instanceof Jp)t={delete:zA(n,e.key)};else if(e instanceof Xi)t={update:rU(n,e.key,e.data),updateMask:RJ(e.fieldMask)};else{if(!(e instanceof OA))return ye(16599,{Rt:e.type});t={verify:zA(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>(function(s,o){let a=o.transform;if(a instanceof hl)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof fl)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof pl)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Vd)return{fieldPath:o.field.canonicalString(),increment:a.Ee};throw ye(20930,{transform:o.transform})})(0,r))),e.precondition.isNone||(t.currentDocument=(function(i,s){return s.updateTime!==void 0?{updateTime:vJ(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:ye(27497)})(n,e.precondition)),t}function EJ(n,e){return n&&n.length>0?(at(e!==void 0,14353),n.map(t=>(function(i,s){let o=i.updateTime?Yi(i.updateTime):Yi(s);return o.isEqual(Re.min())&&(o=Yi(s)),new PA(o,i.transformResults||[])})(t,e))):[]}function bJ(n,e){return{documents:[yj(n,e.path)]}}function CJ(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=yj(n,i);let s=(function(d){if(d.length!==0)return wj(ui.create(d,"and"))})(e.filters);s&&(t.structuredQuery.where=s);let o=(function(d){if(d.length!==0)return d.map(h=>(function(y){return{field:Sd(y.field),direction:DJ(y.dir)}})(h))})(e.orderBy);o&&(t.structuredQuery.orderBy=o);let a=HA(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=(function(d){return{before:d.inclusive,values:d.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(d){return{before:!d.inclusive,values:d.position}})(e.endAt)),{Vt:t,parent:i}}function TJ(n){let e=_J(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){at(r===1,65062);let h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];t.where&&(s=(function(p){let y=_j(p);return y instanceof ui&&JU(y)?y.getFilters():[y]})(t.where));let o=[];t.orderBy&&(o=(function(p){return p.map(y=>(function(k){return new dl(Dd(k.field),(function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(k.direction))})(y))})(t.orderBy));let a=null;t.limit&&(a=(function(p){let y;return y=typeof p=="object"?p.value:p,B0(y)?null:y})(t.limit));let c=null;t.startAt&&(c=(function(p){let y=!!p.before,E=p.values||[];return new Od(E,y)})(t.startAt));let d=null;return t.endAt&&(d=(function(p){let y=!p.before,E=p.values||[];return new Od(E,y)})(t.endAt)),XY(e,i,o,s,a,"F",c,d)}function SJ(n,e){let t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ye(28987,{purpose:i})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function _j(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=Dd(t.unaryFilter.field);return Yt.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Dd(t.unaryFilter.field);return Yt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=Dd(t.unaryFilter.field);return Yt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=Dd(t.unaryFilter.field);return Yt.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ye(61313);default:return ye(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Yt.create(Dd(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ye(58110);default:return ye(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return ui.create(t.compositeFilter.filters.map(r=>_j(r)),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ye(1026)}})(t.compositeFilter.op))})(n):ye(30097,{filter:n})}function DJ(n){return gJ[n]}function AJ(n){return mJ[n]}function xJ(n){return yJ[n]}function Sd(n){return{fieldPath:n.canonicalString()}}function Dd(n){return yr.fromServerFormat(n.fieldPath)}function wj(n){return n instanceof Yt?(function(t){if(t.op==="=="){if(qL(t.value))return{unaryFilter:{field:Sd(t.field),op:"IS_NAN"}};if(HL(t.value))return{unaryFilter:{field:Sd(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(qL(t.value))return{unaryFilter:{field:Sd(t.field),op:"IS_NOT_NAN"}};if(HL(t.value))return{unaryFilter:{field:Sd(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Sd(t.field),op:AJ(t.op),value:t.value}}})(n):n instanceof ui?(function(t){let r=t.getFilters().map(i=>wj(i));return r.length===1?r[0]:{compositeFilter:{op:xJ(t.op),filters:r}}})(n):ye(54877,{filter:n})}function RJ(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Ij(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Zp=class n{constructor(e,t,r,i,s=Re.min(),o=Re.min(),a=Ln.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var WA=class{constructor(e){this.gt=e}};function kJ(n){let e=TJ({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?NA(e,e.limit,"L"):e}var v0=class{constructor(){}bt(e,t){this.Dt(e,t),t.vt()}Dt(e,t){if("nullValue"in e)this.Ct(t,5);else if("booleanValue"in e)this.Ct(t,10),t.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(t,15),t.Ft(Et(e.integerValue));else if("doubleValue"in e){let r=Et(e.doubleValue);isNaN(r)?this.Ct(t,13):(this.Ct(t,15),Kp(r)?t.Ft(0):t.Ft(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ct(t,20),typeof r=="string"&&(r=Ys(r)),t.Mt(`${r.seconds||""}`),t.Ft(r.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,t),this.Ot(t);else if("bytesValue"in e)this.Ct(t,30),t.Nt(Js(e.bytesValue)),this.Ot(t);else if("referenceValue"in e)this.Bt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ct(t,45),t.Ft(r.latitude||0),t.Ft(r.longitude||0)}else"mapValue"in e?KU(e)?this.Ct(t,Number.MAX_SAFE_INTEGER):WU(e)?this.Lt(e.mapValue,t):(this.kt(e.mapValue,t),this.Ot(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Ot(t)):ye(19022,{Qt:e})}xt(e,t){this.Ct(t,25),this.$t(e,t)}$t(e,t){t.Mt(e)}kt(e,t){let r=e.fields||{};this.Ct(t,55);for(let i of Object.keys(r))this.xt(i,t),this.Dt(r[i],t)}Lt(e,t){var r,i;let s=e.fields||{};this.Ct(t,53);let o=Nd,a=((i=(r=s[o].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.Ct(t,15),t.Ft(Et(a)),this.xt(o,t),this.Dt(s[o],t)}qt(e,t){let r=e.values||[];this.Ct(t,50);for(let i of r)this.Dt(i,t)}Bt(e,t){this.Ct(t,37),fe.fromName(e).path.forEach(r=>{this.Ct(t,60),this.$t(r,t)})}Ct(e,t){e.Ft(t)}Ot(e){e.Ft(2)}};v0.Ut=new v0;var KA=class{constructor(){this.Dn=new QA}addToCollectionParentIndex(e,t){return this.Dn.add(t),W.resolve()}getCollectionParents(e,t){return W.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return W.resolve()}deleteFieldIndex(e,t){return W.resolve()}deleteAllFieldIndexes(e){return W.resolve()}createTargetIndexes(e,t){return W.resolve()}getDocumentsMatchingTarget(e,t){return W.resolve(null)}getIndexType(e,t){return W.resolve(0)}getFieldIndexes(e,t){return W.resolve([])}getNextCollectionGroupToUpdate(e){return W.resolve(null)}getMinOffset(e,t){return W.resolve(ul.min())}getMinOffsetFromCollectionGroup(e,t){return W.resolve(ul.min())}updateCollectionGroup(e,t,r){return W.resolve()}updateIndexEntries(e,t){return W.resolve()}},QA=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new En(bt.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new En(bt.comparator)).toArray()}};var U0e=new Uint8Array(0);var iU={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Ej=41943040,Nr=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};Nr.DEFAULT_COLLECTION_PERCENTILE=10,Nr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Nr.DEFAULT=new Nr(Ej,Nr.DEFAULT_COLLECTION_PERCENTILE,Nr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Nr.DISABLED=new Nr(-1,0,0);var eg=class n{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new n(0)}static ur(){return new n(-1)}};var sU="LruGarbageCollector",NJ=1048576;function oU([n,e],[t,r]){let i=Fe(n,t);return i===0?Fe(e,r):i}var YA=class{constructor(e){this.Tr=e,this.buffer=new En(oU),this.Ir=0}dr(){return++this.Ir}Er(e){let t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();oU(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},JA=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){re(sU,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){zd(t)?re(sU,"Ignoring IndexedDB error during garbage collection: ",t):await qd(t)}await this.Rr(3e5)})}},XA=class{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return W.resolve(Yx.ue);let r=new YA(t);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(re("LruGarbageCollector","Garbage collection skipped; disabled"),W.resolve(iU)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(re("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),iU):this.pr(e,t))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let r,i,s,o,a,c,d,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(re("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,o=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,a=Date.now(),this.removeTargets(e,r,t))).next(p=>(s=p,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(d=Date.now(),Cd()<=Be.DEBUG&&re("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(c-a)+`ms
	Removed ${p} documents in `+(d-c)+`ms
Total Duration: ${d-h}ms`),W.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:p})))}};function MJ(n,e){return new XA(n,e)}var ZA=class{constructor(){this.changes=new Xs(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,li.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?W.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var ex=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var tx=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&zp(r.mutation,i,Mr.empty(),Xt.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,qe()).next(()=>r))}getLocalViewOfDocuments(e,t,r=qe()){let i=il();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=Bp();return s.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){let r=il();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,qe()))}populateOverlays(e,t,r){let i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,r,i){let s=Zs(),o=qp(),a=(function(){return qp()})();return t.forEach((c,d)=>{let h=r.get(d.key);i.has(d.key)&&(h===void 0||h.mutation instanceof Xi)?s=s.insert(d.key,d):h!==void 0?(o.set(d.key,h.mutation.getFieldMask()),zp(h.mutation,d,h.mutation.getFieldMask(),Xt.now())):o.set(d.key,Mr.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((d,h)=>o.set(d,h)),t.forEach((d,h)=>{var p;return a.set(d,new ex(h,(p=o.get(d))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,t){let r=qp(),i=new kt((o,a)=>o-a),s=qe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(let a of o)a.keys().forEach(c=>{let d=t.get(c);if(d===null)return;let h=r.get(c)||Mr.empty();h=a.applyToLocalView(d,h),r.set(c,h);let p=(i.get(a.batchId)||qe()).add(c);i=i.insert(a.batchId,p)})}).next(()=>{let o=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),d=c.key,h=c.value,p=oj();h.forEach(y=>{if(!s.has(y)){let E=hj(t.get(y),r.get(y));E!==null&&p.set(y,E),s=s.add(y)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,p))}return W.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return(function(o){return fe.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):tj(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):W.resolve(il()),a=Wp,c=s;return o.next(d=>W.forEach(d,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),s.get(h)?W.resolve():this.remoteDocumentCache.getEntry(e,h).next(y=>{c=c.insert(h,y)}))).next(()=>this.populateOverlays(e,d,s)).next(()=>this.computeViews(e,c,d,qe())).next(h=>({batchId:a,changes:sj(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new fe(t)).next(r=>{let i=Bp();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let s=t.collectionGroup,o=Bp();return this.indexManager.getCollectionParents(e,s).next(a=>W.forEach(a,c=>{let d=(function(p,y){return new Sa(y,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)})(t,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,d,r,i).next(h=>{h.forEach((p,y)=>{o=o.insert(p,y)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((c,d)=>{let h=d.getKey();o.get(h)===null&&(o=o.insert(h,li.newInvalidDocument(h)))});let a=Bp();return o.forEach((c,d)=>{let h=s.get(c);h!==void 0&&zp(h.mutation,d,Mr.empty(),Xt.now()),q0(t,d)&&(a=a.insert(c,d))}),a})}};var nx=class{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return W.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:Yi(i.createTime)}})(t)),W.resolve()}getNamedQuery(e,t){return W.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,(function(i){return{name:i.name,query:kJ(i.bundledQuery),readTime:Yi(i.readTime)}})(t)),W.resolve()}};var rx=class{constructor(){this.overlays=new kt(fe.comparator),this.kr=new Map}getOverlay(e,t){return W.resolve(this.overlays.get(t))}getOverlays(e,t){let r=il();return W.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.wt(e,t,s)}),W.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.kr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.kr.delete(r)),W.resolve()}getOverlaysForCollection(e,t,r){let i=il(),s=t.length+1,o=new fe(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let c=a.getNext().value,d=c.getKey();if(!t.isPrefixOf(d.path))break;d.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return W.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new kt((d,h)=>d-h),o=this.overlays.getIterator();for(;o.hasNext();){let d=o.getNext().value;if(d.getKey().getCollectionGroup()===t&&d.largestBatchId>r){let h=s.get(d.largestBatchId);h===null&&(h=il(),s=s.insert(d.largestBatchId,h)),h.set(d.getKey(),d)}}let a=il(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((d,h)=>a.set(d,h)),!(a.size()>=i)););return W.resolve(a)}wt(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new LA(t,r));let s=this.kr.get(t);s===void 0&&(s=qe(),this.kr.set(t,s)),this.kr.set(t,s.add(r.key))}};var ix=class{constructor(){this.sessionToken=Ln.EMPTY_BYTE_STRING}getSessionToken(e){return W.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,W.resolve()}};var tg=class{constructor(){this.qr=new En(Qt.Qr),this.$r=new En(Qt.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){let r=new Qt(e,t);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Wr(new Qt(e,t))}Gr(e,t){e.forEach(r=>this.removeReference(r,t))}zr(e){let t=new fe(new bt([])),r=new Qt(t,e),i=new Qt(t,e+1),s=[];return this.$r.forEachInRange([r,i],o=>{this.Wr(o),s.push(o.key)}),s}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){let t=new fe(new bt([])),r=new Qt(t,e),i=new Qt(t,e+1),s=qe();return this.$r.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let t=new Qt(e,0),r=this.qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},Qt=class{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return fe.comparator(e.key,t.key)||Fe(e.Hr,t.Hr)}static Ur(e,t){return Fe(e.Hr,t.Hr)||fe.comparator(e.key,t.key)}};var sx=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new En(Qt.Qr)}checkEmpty(e){return W.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let s=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new FA(s,t,r,i);this.mutationQueue.push(o);for(let a of i)this.Yr=this.Yr.add(new Qt(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return W.resolve(o)}lookupMutationBatch(e,t){return W.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.Xr(r),s=i<0?0:i;return W.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return W.resolve(this.mutationQueue.length===0?Jx:this.er-1)}getAllMutationBatches(e){return W.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new Qt(t,0),i=new Qt(t,Number.POSITIVE_INFINITY),s=[];return this.Yr.forEachInRange([r,i],o=>{let a=this.Zr(o.Hr);s.push(a)}),W.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new En(Fe);return t.forEach(i=>{let s=new Qt(i,0),o=new Qt(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([s,o],a=>{r=r.add(a.Hr)})}),W.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,s=r;fe.isDocumentKey(s)||(s=s.child(""));let o=new Qt(new fe(s),0),a=new En(Fe);return this.Yr.forEachWhile(c=>{let d=c.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(a=a.add(c.Hr)),!0)},o),W.resolve(this.ei(a))}ei(e){let t=[];return e.forEach(r=>{let i=this.Zr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){at(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return W.forEach(t.mutations,i=>{let s=new Qt(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,t){let r=new Qt(t,0),i=this.Yr.firstAfterOrEqual(r);return W.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,W.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){let t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var ox=class{constructor(e){this.ni=e,this.docs=(function(){return new kt(fe.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.ni(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return W.resolve(r?r.document.mutableCopy():li.newInvalidDocument(t))}getEntries(e,t){let r=Zs();return t.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():li.newInvalidDocument(i))}),W.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=Zs(),o=t.path,a=new fe(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:d,value:{document:h}}=c.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||MY(NY(h),r)<=0||(i.has(h.key)||q0(t,h))&&(s=s.insert(h.key,h.mutableCopy()))}return W.resolve(s)}getAllFromCollectionGroup(e,t,r,i){ye(9500)}ri(e,t){return W.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new ax(this)}getSize(e){return W.resolve(this.size)}},ax=class extends ZA{constructor(e){super(),this.Or=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Or.addEntry(e,i)):this.Or.removeEntry(r)}),W.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}};var cx=class{constructor(e){this.persistence=e,this.ii=new Xs(t=>n1(t),r1),this.lastRemoteSnapshotVersion=Re.min(),this.highestTargetId=0,this.si=0,this.oi=new tg,this.targetCount=0,this._i=eg.ar()}forEachTarget(e,t){return this.ii.forEach((r,i)=>t(i)),W.resolve()}getLastRemoteSnapshotVersion(e){return W.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return W.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),W.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.si&&(this.si=t),W.resolve()}hr(e){this.ii.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this._i=new eg(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,W.resolve()}updateTargetData(e,t){return this.hr(t),W.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,W.resolve()}removeTargets(e,t,r){let i=0,s=[];return this.ii.forEach((o,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.ii.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),W.waitFor(s).next(()=>i)}getTargetCount(e){return W.resolve(this.targetCount)}getTargetData(e,t){let r=this.ii.get(t)||null;return W.resolve(r)}addMatchingKeys(e,t,r){return this.oi.Kr(t,r),W.resolve()}removeMatchingKeys(e,t,r){this.oi.Gr(t,r);let i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),W.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),W.resolve()}getMatchingKeysForTargetId(e,t){let r=this.oi.Jr(t);return W.resolve(r)}containsKey(e,t){return W.resolve(this.oi.containsKey(t))}};var _0=class{constructor(e,t){this.ai={},this.overlays={},this.ui=new Yx(0),this.ci=!1,this.ci=!0,this.li=new ix,this.referenceDelegate=e(this),this.hi=new cx(this),this.indexManager=new KA,this.remoteDocumentCache=(function(i){return new ox(i)})(r=>this.referenceDelegate.Pi(r)),this.serializer=new WA(t),this.Ti=new nx(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new rx,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ai[e.toKey()];return r||(r=new sx(t,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,r){re("MemoryPersistence","Starting transaction:",e);let i=new lx(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(s=>this.referenceDelegate.di(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ei(e,t){return W.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,t)))}},lx=class extends yA{constructor(e){super(),this.currentSequenceNumber=e}},ux=class n{constructor(e){this.persistence=e,this.Ai=new tg,this.Ri=null}static Vi(e){return new n(e)}get mi(){if(this.Ri)return this.Ri;throw ye(60996)}addReference(e,t,r){return this.Ai.addReference(r,t),this.mi.delete(r.toString()),W.resolve()}removeReference(e,t,r){return this.Ai.removeReference(r,t),this.mi.add(r.toString()),W.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),W.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach(i=>this.mi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.mi.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}Ii(){this.Ri=new Set}di(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return W.forEach(this.mi,r=>{let i=fe.fromPath(r);return this.fi(e,i).next(s=>{s||t.removeEntry(i,Re.min())})}).next(()=>(this.Ri=null,t.apply(e)))}updateLimboDocument(e,t){return this.fi(e,t).next(r=>{r?this.mi.delete(t.toString()):this.mi.add(t.toString())})}Pi(e){return 0}fi(e,t){return W.or([()=>W.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}},w0=class n{constructor(e,t){this.persistence=e,this.gi=new Xs(r=>VY(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=MJ(this,t)}static Vi(e,t){return new n(e,t)}Ii(){}di(e){return W.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){let t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}yr(e){let t=0;return this.gr(e,r=>{t++}).next(()=>t)}gr(e,t){return W.forEach(this.gi,(r,i)=>this.Sr(e,r,i).next(s=>s?W.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ri(e,o=>this.Sr(e,o,t).next(a=>{a||(r++,s.removeEntry(o,Re.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),W.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),W.resolve()}removeReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),W.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),W.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=n0(e.data.value)),t}Sr(e,t,r){return W.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let i=this.gi.get(t);return W.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var dx=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Is=r,this.ds=i}static Es(e,t){let r=qe(),i=qe();for(let s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new n(e,t.fromCache,r,i)}};var hx=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var fx=class{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return vO()?8:OY(yn())>0?6:4})()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,r,i){let s={result:null};return this.ps(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ys(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new hx;return this.ws(e,t,o).next(a=>{if(s.result=a,this.Rs)return this.Ss(e,t,o,a.size)})}).next(()=>s.result)}Ss(e,t,r,i){return r.documentReadCount<this.Vs?(Cd()<=Be.DEBUG&&re("QueryEngine","SDK will not create cache indexes for query:",Td(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),W.resolve()):(Cd()<=Be.DEBUG&&re("QueryEngine","Query:",Td(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?(Cd()<=Be.DEBUG&&re("QueryEngine","The SDK decides to create cache indexes for query:",Td(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Qi(t))):W.resolve())}ps(e,t){if(KL(t))return W.resolve(null);let r=Qi(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=NA(t,null,"F"),r=Qi(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=qe(...s);return this.gs.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let d=this.bs(t,a);return this.Ds(t,d,o,c.readTime)?this.ps(e,NA(t,null,"F")):this.vs(e,d,t,c)}))})))}ys(e,t,r,i){return KL(t)||i.isEqual(Re.min())?W.resolve(null):this.gs.getDocuments(e,r).next(s=>{let o=this.bs(t,s);return this.Ds(t,o,r,i)?W.resolve(null):(Cd()<=Be.DEBUG&&re("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Td(t)),this.vs(e,o,t,kY(i,Wp)).next(a=>a))})}bs(e,t){let r=new En(rj(e));return t.forEach((i,s)=>{q0(e,s)&&(r=r.add(s))}),r}Ds(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}ws(e,t,r){return Cd()<=Be.DEBUG&&re("QueryEngine","Using full collection scan to execute query:",Td(t)),this.gs.getDocumentsMatchingQuery(e,t,ul.min(),r)}vs(e,t,r,i){return this.gs.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}};var a1="LocalStore",PJ=3e8,px=class{constructor(e,t,r,i){this.persistence=e,this.Cs=t,this.serializer=i,this.Fs=new kt(Fe),this.Ms=new Xs(s=>n1(s),r1),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new tx(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Fs))}};function OJ(n,e,t,r){return new px(n,e,t,r)}async function bj(n,e){let t=Se(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.Ns(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{let o=[],a=[],c=qe();for(let d of i){o.push(d.batchId);for(let h of d.mutations)c=c.add(h.key)}for(let d of s){a.push(d.batchId);for(let h of d.mutations)c=c.add(h.key)}return t.localDocuments.getDocuments(r,c).next(d=>({Bs:d,removedBatchIds:o,addedBatchIds:a}))})})}function FJ(n,e){let t=Se(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),s=t.Os.newChangeBuffer({trackRemovals:!0});return(function(a,c,d,h){let p=d.batch,y=p.keys(),E=W.resolve();return y.forEach(k=>{E=E.next(()=>h.getEntry(c,k)).next(P=>{let M=d.docVersions.get(k);at(M!==null,48541),P.version.compareTo(M)<0&&(p.applyToRemoteDocument(P,d),P.isValidDocument()&&(P.setReadTime(d.commitVersion),h.addEntry(P)))})}),E.next(()=>a.mutationQueue.removeMutationBatch(c,p))})(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(a){let c=qe();for(let d=0;d<a.mutationResults.length;++d)a.mutationResults[d].transformResults.length>0&&(c=c.add(a.batch.mutations[d].key));return c})(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function Cj(n){let e=Se(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.hi.getLastRemoteSnapshotVersion(t))}function VJ(n,e){let t=Se(n),r=e.snapshotVersion,i=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=t.Os.newChangeBuffer({trackRemovals:!0});i=t.Fs;let a=[];e.targetChanges.forEach((h,p)=>{let y=i.get(p);if(!y)return;a.push(t.hi.removeMatchingKeys(s,h.removedDocuments,p).next(()=>t.hi.addMatchingKeys(s,h.addedDocuments,p)));let E=y.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(p)!==null?E=E.withResumeToken(Ln.EMPTY_BYTE_STRING,Re.min()).withLastLimboFreeSnapshotVersion(Re.min()):h.resumeToken.approximateByteSize()>0&&(E=E.withResumeToken(h.resumeToken,r)),i=i.insert(p,E),(function(P,M,H){return P.resumeToken.approximateByteSize()===0||M.snapshotVersion.toMicroseconds()-P.snapshotVersion.toMicroseconds()>=PJ?!0:H.addedDocuments.size+H.modifiedDocuments.size+H.removedDocuments.size>0})(y,E,h)&&a.push(t.hi.updateTargetData(s,E))});let c=Zs(),d=qe();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(LJ(s,o,e.documentUpdates).next(h=>{c=h.Ls,d=h.ks})),!r.isEqual(Re.min())){let h=t.hi.getLastRemoteSnapshotVersion(s).next(p=>t.hi.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(h)}return W.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,c,d)).next(()=>c)}).then(s=>(t.Fs=i,s))}function LJ(n,e,t){let r=qe(),i=qe();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=Zs();return t.forEach((a,c)=>{let d=s.get(a);c.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(Re.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!d.isValidDocument()||c.version.compareTo(d.version)>0||c.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):re(a1,"Ignoring outdated watch update for ",a,". Current version:",d.version," Watch version:",c.version)}),{Ls:o,ks:i}})}function UJ(n,e){let t=Se(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Jx),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function jJ(n,e){let t=Se(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.hi.getTargetData(r,e).next(s=>s?(i=s,W.resolve(i)):t.hi.allocateTargetId(r).next(o=>(i=new Zp(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.hi.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.Fs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(r.targetId,r),t.Ms.set(e,r.targetId)),r})}async function gx(n,e,t){let r=Se(n),i=r.Fs.get(e),s=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!zd(o))throw o;re(a1,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(i.target)}function aU(n,e,t){let r=Se(n),i=Re.min(),s=qe();return r.persistence.runTransaction("Execute query","readwrite",o=>(function(c,d,h){let p=Se(c),y=p.Ms.get(h);return y!==void 0?W.resolve(p.Fs.get(y)):p.hi.getTargetData(d,h)})(r,o,Qi(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(o,a.targetId).next(c=>{s=c})}).next(()=>r.Cs.getDocumentsMatchingQuery(o,e,t?i:Re.min(),t?s:qe())).next(a=>(BJ(r,eJ(e),a),{documents:a,qs:s})))}function BJ(n,e,t){let r=n.xs.get(e)||Re.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.xs.set(e,r)}var I0=class{constructor(){this.activeTargetIds=oJ()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var mx=class{constructor(){this.Fo=new I0,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,r){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new I0,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var yx=class{xo(e){}shutdown(){}};var cU="ConnectivityMonitor",E0=class{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){re(cU,"Network connectivity changed: AVAILABLE");for(let e of this.ko)e(0)}Lo(){re(cU,"Network connectivity changed: UNAVAILABLE");for(let e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var t0=null;function vx(){return t0===null?t0=(function(){return 268435456+Math.round(2147483648*Math.random())})():t0++,"0x"+t0.toString(16)}var oA="RestConnection",$J={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},_x=class{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===u0?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,t,r,i,s){let o=vx(),a=this.Go(e,t.toUriEncodedString());re(oA,`Sending RPC '${e}' ${o}:`,a,r);let c={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(c,i,s);let{host:d}=new URL(a),h=Xo(d);return this.jo(e,a,c,r,h).then(p=>(re(oA,`Received RPC '${e}' ${o}: `,p),p),p=>{throw Ca(oA,`RPC '${e}' ${o} failed with error: `,p,"url: ",a,"request:",r),p})}Jo(e,t,r,i,s,o){return this.Wo(e,t,r,i,s)}zo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Hd})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}Go(e,t){let r=$J[e];return`${this.$o}/v1/${t}:${r}`}terminate(){}};var wx=class{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}};var Vn="WebChannelConnection",Ix=class extends _x{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,r,i,s){let o=vx();return new Promise((a,c)=>{let d=new eA;d.setWithCredentials(!0),d.listenOnce(tA.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case jp.NO_ERROR:let p=d.getResponseJson();re(Vn,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(p)),a(p);break;case jp.TIMEOUT:re(Vn,`RPC '${e}' ${o} timed out`),c(new te(q.DEADLINE_EXCEEDED,"Request time out"));break;case jp.HTTP_ERROR:let y=d.getStatus();if(re(Vn,`RPC '${e}' ${o} failed with status:`,y,"response text:",d.getResponseText()),y>0){let E=d.getResponseJson();Array.isArray(E)&&(E=E[0]);let k=E?.error;if(k&&k.status&&k.message){let P=(function(H){let Y=H.toLowerCase().replace(/_/g,"-");return Object.values(q).indexOf(Y)>=0?Y:q.UNKNOWN})(k.status);c(new te(P,k.message))}else c(new te(q.UNKNOWN,"Server responded with status "+d.getStatus()))}else c(new te(q.UNAVAILABLE,"Connection failed."));break;default:ye(9055,{c_:e,streamId:o,l_:d.getLastErrorCode(),h_:d.getLastError()})}}finally{re(Vn,`RPC '${e}' ${o} completed.`)}});let h=JSON.stringify(i);re(Vn,`RPC '${e}' ${o} sending request:`,i),d.send(t,"POST",h,r,15)})}P_(e,t,r){let i=vx(),s=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=iA(),a=rA(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(c.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(c.useFetchStreams=!0),this.zo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;let h=s.join("");re(Vn,`Creating RPC '${e}' stream ${i}: ${h}`,c);let p=o.createWebChannel(h,c);this.T_(p);let y=!1,E=!1,k=new wx({Ho:M=>{E?re(Vn,`Not sending because RPC '${e}' stream ${i} is closed:`,M):(y||(re(Vn,`Opening RPC '${e}' stream ${i} transport.`),p.open(),y=!0),re(Vn,`RPC '${e}' stream ${i} sending:`,M),p.send(M))},Yo:()=>p.close()}),P=(M,H,Y)=>{M.listen(H,ee=>{try{Y(ee)}catch(De){setTimeout(()=>{throw De},0)}})};return P(p,bd.EventType.OPEN,()=>{E||(re(Vn,`RPC '${e}' stream ${i} transport opened.`),k.s_())}),P(p,bd.EventType.CLOSE,()=>{E||(E=!0,re(Vn,`RPC '${e}' stream ${i} transport closed`),k.__(),this.I_(p))}),P(p,bd.EventType.ERROR,M=>{E||(E=!0,Ca(Vn,`RPC '${e}' stream ${i} transport errored. Name:`,M.name,"Message:",M.message),k.__(new te(q.UNAVAILABLE,"The operation could not be completed")))}),P(p,bd.EventType.MESSAGE,M=>{var H;if(!E){let Y=M.data[0];at(!!Y,16349);let ee=Y,De=ee?.error||((H=ee[0])===null||H===void 0?void 0:H.error);if(De){re(Vn,`RPC '${e}' stream ${i} received error:`,De);let Ze=De.status,ve=(function(I){let C=Kt[I];if(C!==void 0)return pj(C)})(Ze),T=De.message;ve===void 0&&(ve=q.INTERNAL,T="Unknown error status: "+Ze+" with message "+De.message),E=!0,k.__(new te(ve,T)),p.close()}else re(Vn,`RPC '${e}' stream ${i} received:`,Y),k.a_(Y)}}),P(a,nA.STAT_EVENT,M=>{M.stat===X_.PROXY?re(Vn,`RPC '${e}' stream ${i} detected buffering proxy`):M.stat===X_.NOPROXY&&re(Vn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{k.o_()},0),k}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(t=>t===e)}};function aA(){return typeof document<"u"?document:null}function z0(n){return new $A(n,!0)}var b0=class{constructor(e,t,r=1e3,i=1.5,s=6e4){this.Fi=e,this.timerId=t,this.d_=r,this.E_=i,this.A_=s,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();let t=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,t-r);i>0&&re("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}};var lU="PersistentStream",C0=class{constructor(e,t,r,i,s,o,a,c){this.Fi=e,this.w_=r,this.S_=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new b0(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===q.RESOURCE_EXHAUSTED?(Qs(t.toString()),Qs("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===q.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(t)}U_(){}auth(){this.state=1;let e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===t&&this.W_(r,i)},r=>{e(()=>{let i=new te(q.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(e,t){let r=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>++this.C_==1?this.j_(i):this.onNext(i))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return re(lU,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget(()=>this.b_===e?t():(re(lU,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},Ex=class extends C0{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();let t=wJ(this.serializer,e),r=(function(s){if(!("targetChange"in s))return Re.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?Re.min():o.readTime?Yi(o.readTime):Re.min()})(e);return this.listener.J_(t,r)}H_(e){let t={};t.database=GA(this.serializer),t.addTarget=(function(s,o){let a,c=o.target;if(a=RA(c)?{documents:bJ(s,c)}:{query:CJ(s,c).Vt},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=gj(s,o.resumeToken);let d=HA(s,o.expectedCount);d!==null&&(a.expectedCount=d)}else if(o.snapshotVersion.compareTo(Re.min())>0){a.readTime=y0(s,o.snapshotVersion.toTimestamp());let d=HA(s,o.expectedCount);d!==null&&(a.expectedCount=d)}return a})(this.serializer,e);let r=SJ(this.serializer,e);r&&(t.labels=r),this.k_(t)}Y_(e){let t={};t.database=GA(this.serializer),t.removeTarget=e,this.k_(t)}},bx=class extends C0{constructor(e,t,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return at(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,at(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){at(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();let t=EJ(e.writeResults,e.commitTime),r=Yi(e.commitTime);return this.listener.ta(r,t)}na(){let e={};e.database=GA(this.serializer),this.k_(e)}X_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>IJ(this.serializer,r))};this.k_(t)}};var Cx=class{},Tx=class extends Cx{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new te(q.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Wo(e,qA(t,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new te(q.UNKNOWN,s.toString())})}Jo(e,t,r,i,s){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Jo(e,qA(t,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new te(q.UNKNOWN,o.toString())})}terminate(){this.ra=!0,this.connection.terminate()}},Sx=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Qs(t),this._a=!1):re("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}};var ml="RemoteStore",Dx=class{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=s,this.Ea.xo(o=>{r.enqueueAndForget(async()=>{yl(this)&&(re(ml,"Restarting streams for network reachability change."),await(async function(c){let d=Se(c);d.Ia.add(4),await sg(d),d.Aa.set("Unknown"),d.Ia.delete(4),await G0(d)})(this))})}),this.Aa=new Sx(r,i)}};async function G0(n){if(yl(n))for(let e of n.da)await e(!0)}async function sg(n){for(let e of n.da)await e(!1)}function Tj(n,e){let t=Se(n);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),d1(t)?u1(t):Gd(t).x_()&&l1(t,e))}function c1(n,e){let t=Se(n),r=Gd(t);t.Ta.delete(e),r.x_()&&Sj(t,e),t.Ta.size===0&&(r.x_()?r.B_():yl(t)&&t.Aa.set("Unknown"))}function l1(n,e){if(n.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Re.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Gd(n).H_(e)}function Sj(n,e){n.Ra.$e(e),Gd(n).Y_(e)}function u1(n){n.Ra=new BA({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Ta.get(e)||null,lt:()=>n.datastore.serializer.databaseId}),Gd(n).start(),n.Aa.aa()}function d1(n){return yl(n)&&!Gd(n).M_()&&n.Ta.size>0}function yl(n){return Se(n).Ia.size===0}function Dj(n){n.Ra=void 0}async function HJ(n){n.Aa.set("Online")}async function qJ(n){n.Ta.forEach((e,t)=>{l1(n,e)})}async function zJ(n,e){Dj(n),d1(n)?(n.Aa.la(e),u1(n)):n.Aa.set("Unknown")}async function GJ(n,e,t){if(n.Aa.set("Online"),e instanceof g0&&e.state===2&&e.cause)try{await(async function(i,s){let o=s.cause;for(let a of s.targetIds)i.Ta.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.Ta.delete(a),i.Ra.removeTarget(a))})(n,e)}catch(r){re(ml,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await T0(n,r)}else if(e instanceof xd?n.Ra.Ye(e):e instanceof p0?n.Ra.it(e):n.Ra.et(e),!t.isEqual(Re.min()))try{let r=await Cj(n.localStore);t.compareTo(r)>=0&&await(function(s,o){let a=s.Ra.Pt(o);return a.targetChanges.forEach((c,d)=>{if(c.resumeToken.approximateByteSize()>0){let h=s.Ta.get(d);h&&s.Ta.set(d,h.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,d)=>{let h=s.Ta.get(c);if(!h)return;s.Ta.set(c,h.withResumeToken(Ln.EMPTY_BYTE_STRING,h.snapshotVersion)),Sj(s,c);let p=new Zp(h.target,c,d,h.sequenceNumber);l1(s,p)}),s.remoteSyncer.applyRemoteEvent(a)})(n,t)}catch(r){re(ml,"Failed to raise snapshot:",r),await T0(n,r)}}async function T0(n,e,t){if(!zd(e))throw e;n.Ia.add(1),await sg(n),n.Aa.set("Offline"),t||(t=()=>Cj(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{re(ml,"Retrying IndexedDB access"),await t(),n.Ia.delete(1),await G0(n)})}function Aj(n,e){return e().catch(t=>T0(n,t,e))}async function W0(n){let e=Se(n),t=Da(e),r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:Jx;for(;WJ(e);)try{let i=await UJ(e.localStore,r);if(i===null){e.Pa.length===0&&t.B_();break}r=i.batchId,KJ(e,i)}catch(i){await T0(e,i)}xj(e)&&Rj(e)}function WJ(n){return yl(n)&&n.Pa.length<10}function KJ(n,e){n.Pa.push(e);let t=Da(n);t.x_()&&t.Z_&&t.X_(e.mutations)}function xj(n){return yl(n)&&!Da(n).M_()&&n.Pa.length>0}function Rj(n){Da(n).start()}async function QJ(n){Da(n).na()}async function YJ(n){let e=Da(n);for(let t of n.Pa)e.X_(t.mutations)}async function JJ(n,e,t){let r=n.Pa.shift(),i=VA.from(r,e,t);await Aj(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),await W0(n)}async function XJ(n,e){e&&Da(n).Z_&&await(async function(r,i){if((function(o){return fJ(o)&&o!==q.ABORTED})(i.code)){let s=r.Pa.shift();Da(r).N_(),await Aj(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await W0(r)}})(n,e),xj(n)&&Rj(n)}async function uU(n,e){let t=Se(n);t.asyncQueue.verifyOperationInProgress(),re(ml,"RemoteStore received new credentials");let r=yl(t);t.Ia.add(3),await sg(t),r&&t.Aa.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),await G0(t)}async function ZJ(n,e){let t=Se(n);e?(t.Ia.delete(2),await G0(t)):e||(t.Ia.add(2),await sg(t),t.Aa.set("Unknown"))}function Gd(n){return n.Va||(n.Va=(function(t,r,i){let s=Se(t);return s.ia(),new Ex(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(n.datastore,n.asyncQueue,{Zo:HJ.bind(null,n),e_:qJ.bind(null,n),n_:zJ.bind(null,n),J_:GJ.bind(null,n)}),n.da.push(async e=>{e?(n.Va.N_(),d1(n)?u1(n):n.Aa.set("Unknown")):(await n.Va.stop(),Dj(n))})),n.Va}function Da(n){return n.ma||(n.ma=(function(t,r,i){let s=Se(t);return s.ia(),new bx(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:QJ.bind(null,n),n_:XJ.bind(null,n),ea:YJ.bind(null,n),ta:JJ.bind(null,n)}),n.da.push(async e=>{e?(n.ma.N_(),await W0(n)):(await n.ma.stop(),n.Pa.length>0&&(re(ml,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))})),n.ma}var Ax=class n{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Gi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){let o=Date.now()+r,a=new n(e,t,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new te(q.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function h1(n,e){if(Qs("AsyncQueue",`${e}: ${n}`),zd(n))return new te(q.UNAVAILABLE,`${e}: ${n}`);throw n}var S0=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||fe.comparator(t.key,r.key):(t,r)=>fe.comparator(t.key,r.key),this.keyedMap=Bp(),this.sortedSet=new kt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var D0=class{constructor(){this.fa=new kt(fe.comparator)}track(e){let t=e.doc.key,r=this.fa.get(t);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(t,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(t):e.type===1&&r.type===2?this.fa=this.fa.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):ye(63341,{At:e,ga:r}):this.fa=this.fa.insert(t,e)}pa(){let e=[];return this.fa.inorderTraversal((t,r)=>{e.push(r)}),e}},Ud=class n{constructor(e,t,r,i,s,o,a,c,d){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=d}static fromInitialDocuments(e,t,r,i,s){let o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new n(e,t,S0.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&H0(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var xx=class{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}},Rx=class{constructor(){this.queries=dU(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,r){let i=Se(t),s=i.queries;i.queries=dU(),s.forEach((o,a)=>{for(let c of a.wa)c.onError(r)})})(this,new te(q.ABORTED,"Firestore shutting down"))}};function dU(){return new Xs(n=>nj(n),H0)}async function kj(n,e){let t=Se(n),r=3,i=e.query,s=t.queries.get(i);s?!s.Sa()&&e.ba()&&(r=2):(s=new xx,r=e.ba()?0:1);try{switch(r){case 0:s.ya=await t.onListen(i,!0);break;case 1:s.ya=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(o){let a=h1(o,`Initialization of query '${Td(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,s),s.wa.push(e),e.va(t.onlineState),s.ya&&e.Ca(s.ya)&&f1(t)}async function Nj(n,e){let t=Se(n),r=e.query,i=3,s=t.queries.get(r);if(s){let o=s.wa.indexOf(e);o>=0&&(s.wa.splice(o,1),s.wa.length===0?i=e.ba()?0:1:!s.Sa()&&e.ba()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function eX(n,e){let t=Se(n),r=!1;for(let i of e){let s=i.query,o=t.queries.get(s);if(o){for(let a of o.wa)a.Ca(i)&&(r=!0);o.ya=i}}r&&f1(t)}function tX(n,e,t){let r=Se(n),i=r.queries.get(e);if(i)for(let s of i.wa)s.onError(t);r.queries.delete(e)}function f1(n){n.Da.forEach(e=>{e.next()})}var kx,hU;(hU=kx||(kx={})).Fa="default",hU.Cache="cache";var A0=class{constructor(e,t,r){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Ud(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;let r=t!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;let t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=Ud.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==kx.Cache}};var x0=class{constructor(e){this.key=e}},R0=class{constructor(e){this.key=e}},Nx=class{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=qe(),this.mutatedKeys=qe(),this.Xa=rj(e),this.eu=new S0(this.Xa)}get tu(){return this.Ha}nu(e,t){let r=t?t.ru:new D0,i=t?t.eu:this.eu,s=t?t.mutatedKeys:this.mutatedKeys,o=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,d=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let y=i.get(h),E=q0(this.query,p)?p:null,k=!!y&&this.mutatedKeys.has(y.key),P=!!E&&(E.hasLocalMutations||this.mutatedKeys.has(E.key)&&E.hasCommittedMutations),M=!1;y&&E?y.data.isEqual(E.data)?k!==P&&(r.track({type:3,doc:E}),M=!0):this.iu(y,E)||(r.track({type:2,doc:E}),M=!0,(c&&this.Xa(E,c)>0||d&&this.Xa(E,d)<0)&&(a=!0)):!y&&E?(r.track({type:0,doc:E}),M=!0):y&&!E&&(r.track({type:1,doc:y}),M=!0,(c||d)&&(a=!0)),M&&(E?(o=o.add(E),s=P?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{eu:o,ru:r,Ds:a,mutatedKeys:s}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let s=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;let o=e.ru.pa();o.sort((h,p)=>(function(E,k){let P=M=>{switch(M){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ye(20277,{At:M})}};return P(E)-P(k)})(h.type,p.type)||this.Xa(h.doc,p.doc)),this.su(r),i=i!=null&&i;let a=t&&!i?this.ou():[],c=this.Za.size===0&&this.current&&!i?1:0,d=c!==this.Ya;return this.Ya=c,o.length!==0||d?{snapshot:new Ud(this.query,e.eu,s,o,e.mutatedKeys,c===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:a}:{_u:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new D0,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(t=>this.Ha=this.Ha.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ha=this.Ha.delete(t)),this.current=e.current)}ou(){if(!this.current)return[];let e=this.Za;this.Za=qe(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});let t=[];return e.forEach(r=>{this.Za.has(r)||t.push(new R0(r))}),this.Za.forEach(r=>{e.has(r)||t.push(new x0(r))}),t}uu(e){this.Ha=e.qs,this.Za=qe();let t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return Ud.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}},p1="SyncEngine",Mx=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},Px=class{constructor(e){this.key=e,this.lu=!1}},Ox=class{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.hu={},this.Pu=new Xs(a=>nj(a),H0),this.Tu=new Map,this.Iu=new Set,this.du=new kt(fe.comparator),this.Eu=new Map,this.Au=new tg,this.Ru={},this.Vu=new Map,this.mu=eg.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}};async function nX(n,e,t=!0){let r=Lj(n),i,s=r.Pu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.cu()):i=await Mj(r,e,t,!0),i}async function rX(n,e){let t=Lj(n);await Mj(t,e,!0,!1)}async function Mj(n,e,t,r){let i=await jJ(n.localStore,Qi(e)),s=i.targetId,o=n.sharedClientState.addLocalQueryTarget(s,t),a;return r&&(a=await iX(n,e,s,o==="current",i.resumeToken)),n.isPrimaryClient&&t&&Tj(n.remoteStore,i),a}async function iX(n,e,t,r,i){n.gu=(p,y,E)=>(async function(P,M,H,Y){let ee=M.view.nu(H);ee.Ds&&(ee=await aU(P.localStore,M.query,!1).then(({documents:T})=>M.view.nu(T,ee)));let De=Y&&Y.targetChanges.get(M.targetId),Ze=Y&&Y.targetMismatches.get(M.targetId)!=null,ve=M.view.applyChanges(ee,P.isPrimaryClient,De,Ze);return pU(P,M.targetId,ve._u),ve.snapshot})(n,p,y,E);let s=await aU(n.localStore,e,!0),o=new Nx(e,s.qs),a=o.nu(s.documents),c=Xp.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),d=o.applyChanges(a,n.isPrimaryClient,c);pU(n,t,d._u);let h=new Mx(e,t,o);return n.Pu.set(e,h),n.Tu.has(t)?n.Tu.get(t).push(e):n.Tu.set(t,[e]),d.snapshot}async function sX(n,e,t){let r=Se(n),i=r.Pu.get(e),s=r.Tu.get(i.targetId);if(s.length>1)return r.Tu.set(i.targetId,s.filter(o=>!H0(o,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await gx(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&c1(r.remoteStore,i.targetId),Fx(r,i.targetId)}).catch(qd)):(Fx(r,i.targetId),await gx(r.localStore,i.targetId,!0))}async function oX(n,e){let t=Se(n),r=t.Pu.get(e),i=t.Tu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),c1(t.remoteStore,r.targetId))}async function aX(n,e,t){let r=pX(n);try{let i=await(function(o,a){let c=Se(o),d=Xt.now(),h=a.reduce((E,k)=>E.add(k.key),qe()),p,y;return c.persistence.runTransaction("Locally write mutations","readwrite",E=>{let k=Zs(),P=qe();return c.Os.getEntries(E,h).next(M=>{k=M,k.forEach((H,Y)=>{Y.isValidDocument()||(P=P.add(H))})}).next(()=>c.localDocuments.getOverlayedDocuments(E,k)).next(M=>{p=M;let H=[];for(let Y of a){let ee=hJ(Y,p.get(Y.key).overlayedDocument);ee!=null&&H.push(new Xi(Y.key,ee,QU(ee.value.mapValue),Ks.exists(!0)))}return c.mutationQueue.addMutationBatch(E,d,H,a)}).next(M=>{y=M;let H=M.applyToLocalDocumentSet(p,P);return c.documentOverlayCache.saveOverlays(E,M.batchId,H)})}).then(()=>({batchId:y.batchId,changes:sj(p)}))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(o,a,c){let d=o.Ru[o.currentUser.toKey()];d||(d=new kt(Fe)),d=d.insert(a,c),o.Ru[o.currentUser.toKey()]=d})(r,i.batchId,t),await og(r,i.changes),await W0(r.remoteStore)}catch(i){let s=h1(i,"Failed to persist write");t.reject(s)}}async function Pj(n,e){let t=Se(n);try{let r=await VJ(t.localStore,e);e.targetChanges.forEach((i,s)=>{let o=t.Eu.get(s);o&&(at(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.lu=!0:i.modifiedDocuments.size>0?at(o.lu,14607):i.removedDocuments.size>0&&(at(o.lu,42227),o.lu=!1))}),await og(t,r,e)}catch(r){await qd(r)}}function fU(n,e,t){let r=Se(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Pu.forEach((s,o)=>{let a=o.view.va(e);a.snapshot&&i.push(a.snapshot)}),(function(o,a){let c=Se(o);c.onlineState=a;let d=!1;c.queries.forEach((h,p)=>{for(let y of p.wa)y.va(a)&&(d=!0)}),d&&f1(c)})(r.eventManager,e),i.length&&r.hu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function cX(n,e,t){let r=Se(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Eu.get(e),s=i&&i.key;if(s){let o=new kt(fe.comparator);o=o.insert(s,li.newNoDocument(s,Re.min()));let a=qe().add(s),c=new f0(Re.min(),new Map,new kt(Fe),o,a);await Pj(r,c),r.du=r.du.remove(s),r.Eu.delete(e),g1(r)}else await gx(r.localStore,e,!1).then(()=>Fx(r,e,t)).catch(qd)}async function lX(n,e){let t=Se(n),r=e.batch.batchId;try{let i=await FJ(t.localStore,e);Fj(t,r,null),Oj(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await og(t,i)}catch(i){await qd(i)}}async function uX(n,e,t){let r=Se(n);try{let i=await(function(o,a){let c=Se(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let h;return c.mutationQueue.lookupMutationBatch(d,a).next(p=>(at(p!==null,37113),h=p.keys(),c.mutationQueue.removeMutationBatch(d,p))).next(()=>c.mutationQueue.performConsistencyCheck(d)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(d,h,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,h)).next(()=>c.localDocuments.getDocuments(d,h))})})(r.localStore,e);Fj(r,e,t),Oj(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await og(r,i)}catch(i){await qd(i)}}function Oj(n,e){(n.Vu.get(e)||[]).forEach(t=>{t.resolve()}),n.Vu.delete(e)}function Fj(n,e,t){let r=Se(n),i=r.Ru[r.currentUser.toKey()];if(i){let s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Ru[r.currentUser.toKey()]=i}}function Fx(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Tu.get(e))n.Pu.delete(r),t&&n.hu.pu(r,t);n.Tu.delete(e),n.isPrimaryClient&&n.Au.zr(e).forEach(r=>{n.Au.containsKey(r)||Vj(n,r)})}function Vj(n,e){n.Iu.delete(e.path.canonicalString());let t=n.du.get(e);t!==null&&(c1(n.remoteStore,t),n.du=n.du.remove(e),n.Eu.delete(t),g1(n))}function pU(n,e,t){for(let r of t)r instanceof x0?(n.Au.addReference(r.key,e),dX(n,r)):r instanceof R0?(re(p1,"Document no longer in limbo: "+r.key),n.Au.removeReference(r.key,e),n.Au.containsKey(r.key)||Vj(n,r.key)):ye(19791,{yu:r})}function dX(n,e){let t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Iu.has(r)||(re(p1,"New document in limbo: "+t),n.Iu.add(r),g1(n))}function g1(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){let e=n.Iu.values().next().value;n.Iu.delete(e);let t=new fe(bt.fromString(e)),r=n.mu.next();n.Eu.set(r,new Px(t)),n.du=n.du.insert(t,r),Tj(n.remoteStore,new Zp(Qi(i1(t.path)),r,"TargetPurposeLimboResolution",Yx.ue))}}async function og(n,e,t){let r=Se(n),i=[],s=[],o=[];r.Pu.isEmpty()||(r.Pu.forEach((a,c)=>{o.push(r.gu(c,e,t).then(d=>{var h;if((d||t)&&r.isPrimaryClient){let p=d?!d.fromCache:(h=t?.targetChanges.get(c.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(c.targetId,p?"current":"not-current")}if(d){i.push(d);let p=dx.Es(c.targetId,d);s.push(p)}}))}),await Promise.all(o),r.hu.J_(i),await(async function(c,d){let h=Se(c);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>W.forEach(d,y=>W.forEach(y.Is,E=>h.persistence.referenceDelegate.addReference(p,y.targetId,E)).next(()=>W.forEach(y.ds,E=>h.persistence.referenceDelegate.removeReference(p,y.targetId,E)))))}catch(p){if(!zd(p))throw p;re(a1,"Failed to update sequence numbers: "+p)}for(let p of d){let y=p.targetId;if(!p.fromCache){let E=h.Fs.get(y),k=E.snapshotVersion,P=E.withLastLimboFreeSnapshotVersion(k);h.Fs=h.Fs.insert(y,P)}}})(r.localStore,s))}async function hX(n,e){let t=Se(n);if(!t.currentUser.isEqual(e)){re(p1,"User change. New user:",e.toKey());let r=await bj(t.localStore,e);t.currentUser=e,(function(s,o){s.Vu.forEach(a=>{a.forEach(c=>{c.reject(new te(q.CANCELLED,o))})}),s.Vu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await og(t,r.Bs)}}function fX(n,e){let t=Se(n),r=t.Eu.get(e);if(r&&r.lu)return qe().add(r.key);{let i=qe(),s=t.Tu.get(e);if(!s)return i;for(let o of s){let a=t.Pu.get(o);i=i.unionWith(a.view.tu)}return i}}function Lj(n){let e=Se(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Pj.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=fX.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=cX.bind(null,e),e.hu.J_=eX.bind(null,e.eventManager),e.hu.pu=tX.bind(null,e.eventManager),e}function pX(n){let e=Se(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=lX.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=uX.bind(null,e),e}var Uj=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=z0(t.databaseInfo.databaseId),this.sharedClientState=this.bu(t),this.persistence=this.Du(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Cu(t,this.localStore),this.indexBackfillerScheduler=this.Fu(t,this.localStore)}Cu(t,r){return null}Fu(t,r){return null}vu(t){return OJ(this.persistence,new fx,t.initialUser,this.serializer)}Du(t){return new _0(ux.Vi,this.serializer)}bu(t){return new mx}async terminate(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}return n.provider={build:()=>new n},n})(),Vx=class extends Uj{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){at(this.persistence.referenceDelegate instanceof w0,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new JA(r,e.asyncQueue,t)}Du(e){let t=this.cacheSizeBytes!==void 0?Nr.withCacheSize(this.cacheSizeBytes):Nr.DEFAULT;return new _0(r=>w0.Vi(r,t),this.serializer)}};var gX=(()=>{class n{async initialize(t,r){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>fU(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=hX.bind(null,this.syncEngine),await ZJ(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new Rx})()}createDatastore(t){let r=z0(t.databaseInfo.databaseId),i=(function(o){return new Ix(o)})(t.databaseInfo);return(function(o,a,c,d){return new Tx(o,a,c,d)})(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return(function(i,s,o,a,c){return new Dx(i,s,o,a,c)})(this.localStore,this.datastore,t.asyncQueue,r=>fU(this.syncEngine,r,0),(function(){return E0.C()?new E0:new yx})())}createSyncEngine(t,r){return(function(s,o,a,c,d,h,p){let y=new Ox(s,o,a,c,d,h);return p&&(y.fu=!0),y})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}async terminate(){var t,r;await(async function(s){let o=Se(s);re(ml,"RemoteStore shutting down."),o.Ia.add(5),await sg(o),o.Ea.shutdown(),o.Aa.set("Unknown")})(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()}}return n.provider={build:()=>new n},n})();var k0=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Qs("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var Aa="FirestoreClient",Lx=class{constructor(e,t,r,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=In.UNAUTHENTICATED,this.clientId=Gp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{re(Aa,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(re(Aa,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Gi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=h1(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}};async function cA(n,e){n.asyncQueue.verifyOperationInProgress(),re(Aa,"Initializing OfflineComponentProvider");let t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async i=>{r.isEqual(i)||(await bj(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>{Ca("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then(()=>{re("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{Ca("Terminating Firestore due to IndexedDb database deletion failed",i)})}),n._offlineComponents=e}async function gU(n,e){n.asyncQueue.verifyOperationInProgress();let t=await mX(n);re(Aa,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>uU(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>uU(e.remoteStore,i)),n._onlineComponents=e}async function mX(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){re(Aa,"Using user provided OfflineComponentProvider");try{await cA(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===q.FAILED_PRECONDITION||i.code===q.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;Ca("Error using user provided cache. Falling back to memory cache: "+t),await cA(n,new Uj)}}else re(Aa,"Using default OfflineComponentProvider"),await cA(n,new Vx(void 0));return n._offlineComponents}async function jj(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(re(Aa,"Using user provided OnlineComponentProvider"),await gU(n,n._uninitializedComponentsProvider._online)):(re(Aa,"Using default OnlineComponentProvider"),await gU(n,new gX))),n._onlineComponents}function yX(n){return jj(n).then(e=>e.syncEngine)}async function Ux(n){let e=await jj(n),t=e.eventManager;return t.onListen=nX.bind(null,e.syncEngine),t.onUnlisten=sX.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=rX.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=oX.bind(null,e.syncEngine),t}function vX(n,e,t={}){let r=new Gi;return n.asyncQueue.enqueueAndForget(async()=>(function(s,o,a,c,d){let h=new k0({next:y=>{h.Ou(),o.enqueueAndForget(()=>Nj(s,p)),y.fromCache&&c.source==="server"?d.reject(new te(q.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(y)},error:y=>d.reject(y)}),p=new A0(a,h,{includeMetadataChanges:!0,ka:!0});return kj(s,p)})(await Ux(n),n.asyncQueue,e,t,r)),r.promise}function Bj(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var mU=new Map;var $j="firestore.googleapis.com",yU=!0,N0=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new te(q.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=$j,this.ssl=yU}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:yU;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Ej;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<NJ)throw new te(q.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}RY("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Bj((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new te(q.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new te(q.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new te(q.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},jd=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new N0({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new te(q.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new te(q.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new N0(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new lA;switch(r.type){case"firstParty":return new fA(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new te(q.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){let r=mU.get(t);r&&(re("ComponentProvider","Removing Datastore"),mU.delete(t),r.terminate())})(this),Promise.resolve()}};function Hj(n,e,t,r={}){var i;n=Wi(n,jd);let s=Xo(e),o=n._getSettings(),a=Object.assign(Object.assign({},o),{emulatorOptions:n._getEmulatorOptions()}),c=`${e}:${t}`;s&&(Tv(`https://${c}`),Sv("Firestore",!0)),o.host!==$j&&o.host!==c&&Ca("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let d=Object.assign(Object.assign({},o),{host:c,ssl:s,emulatorOptions:r});if(!Vi(d,a)&&(n._setSettings(d),r.mockUserToken)){let h,p;if(typeof r.mockUserToken=="string")h=r.mockUserToken,p=In.MOCK_USER;else{h=hO(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let y=r.mockUserToken.sub||r.mockUserToken.user_id;if(!y)throw new te(q.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new In(y)}n._authCredentials=new uA(new s0(h,p))}}var xa=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Dn=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new wa(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}toJSON(){return{type:n._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(ig(t,n._jsonSchema))return new n(e,r||null,new fe(bt.fromString(t.referencePath)))}};Dn._jsonSchemaVersion="firestore/documentReference/1.0",Dn._jsonSchema={type:Jt("string",Dn._jsonSchemaVersion),referencePath:Jt("string")};var wa=class n extends xa{constructor(e,t,r){super(e,t,i1(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Dn(this.firestore,null,new fe(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function qj(n,e,...t){if(n=hn(n),TU("collection","path",e),n instanceof jd){let r=bt.fromString(e,...t);return OL(r),new wa(n,null,r)}{if(!(n instanceof Dn||n instanceof wa))throw new te(q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(bt.fromString(e,...t));return OL(r),new wa(n.firestore,null,r)}}function m1(n,e,...t){if(n=hn(n),arguments.length===1&&(e=Gp.newId()),TU("doc","path",e),n instanceof jd){let r=bt.fromString(e,...t);return PL(r),new Dn(n,null,new fe(r))}{if(!(n instanceof Dn||n instanceof wa))throw new te(q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(bt.fromString(e,...t));return PL(r),new Dn(n.firestore,n instanceof wa?n.converter:null,new fe(r))}}var vU="AsyncQueue",M0=class{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new b0(this,"async_queue_retry"),this.oc=()=>{let r=aA();r&&re(vU,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;let t=aA();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;let t=aA();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});let t=new Gi;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!zd(e))throw e;re(vU,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){let t=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,Qs("INTERNAL UNHANDLED ERROR: ",_U(r)),r}).then(r=>(this.nc=!1,r))));return this._c=t,t}enqueueAfterDelay(e,t,r){this.ac(),this.sc.indexOf(e)>-1&&(t=0);let i=Ax.createAndSchedule(this,e,t,r,s=>this.lc(s));return this.ec.push(i),i}ac(){this.tc&&ye(47125,{hc:_U(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(let t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){let t=this.ec.indexOf(e);this.ec.splice(t,1)}};function _U(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}function wU(n){return(function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let s of r)if(s in i&&typeof i[s]=="function")return!0;return!1})(n,["next","error","complete"])}var eo=class extends jd{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new M0,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new M0(e),this._firestoreClient=void 0,await e}}};function zj(n,e){let t=typeof n=="object"?n:Vc(),r=typeof n=="string"?n:e||u0,i=$u(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let s=dO("firestore");s&&Hj(i,...s)}return i}function y1(n){if(n._terminated)throw new te(q.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||_X(n),n._firestoreClient}function _X(n){var e,t,r;let i=n._freezeSettings(),s=(function(a,c,d,h){return new vA(a,c,d,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,Bj(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)})(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new Lx(n._authCredentials,n._appCheckCredentials,n._queue,s,n._componentsProvider&&(function(a){let c=a?._online.build();return{_offline:a?._offline.build(c),_online:c}})(n._componentsProvider))}var Ia=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(Ln.fromBase64String(e))}catch(t){throw new te(q.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(Ln.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(ig(e,n._jsonSchema))return n.fromBase64String(e.bytes)}};Ia._jsonSchemaVersion="firestore/bytes/1.0",Ia._jsonSchema={type:Jt("string",Ia._jsonSchemaVersion),bytes:Jt("string")};var Bd=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new te(q.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new yr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var $d=class{constructor(e){this._methodName=e}};var Ea=class n{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new te(q.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new te(q.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Fe(this._lat,e._lat)||Fe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:n._jsonSchemaVersion}}static fromJSON(e){if(ig(e,n._jsonSchema))return new n(e.latitude,e.longitude)}};Ea._jsonSchemaVersion="firestore/geoPoint/1.0",Ea._jsonSchema={type:Jt("string",Ea._jsonSchemaVersion),latitude:Jt("number"),longitude:Jt("number")};var ba=class n{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0})(this._values,e._values)}toJSON(){return{type:n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(ig(e,n._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new n(e.vectorValues);throw new te(q.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};ba._jsonSchemaVersion="firestore/vectorValue/1.0",ba._jsonSchema={type:Jt("string",ba._jsonSchemaVersion),vectorValues:Jt("object")};var wX=/^__.*__$/,jx=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Xi(e,this.data,this.fieldMask,t,this.fieldTransforms):new gl(e,this.data,t,this.fieldTransforms)}},P0=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Xi(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function Gj(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ye(40011,{Ec:n})}}var Bx=class n{constructor(e,t,r,i,s,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Ac(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.fc(e),i}gc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return F0(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(Gj(this.Ec)&&wX.test(e))throw this.wc('Document fields cannot begin and end with "__"')}},$x=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||z0(e)}Dc(e,t,r,i=!1){return new Bx({Ec:e,methodName:t,bc:r,path:yr.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function v1(n){let e=n._freezeSettings(),t=z0(n._databaseId);return new $x(n._databaseId,!!e.ignoreUndefinedProperties,t)}function IX(n,e,t,r,i,s={}){let o=n.Dc(s.merge||s.mergeFields?2:0,e,t,i);_1("Data must be an object, but it was:",o,r);let a=Wj(r,o),c,d;if(s.merge)c=new Mr(o.fieldMask),d=o.fieldTransforms;else if(s.mergeFields){let h=[];for(let p of s.mergeFields){let y=qx(e,p,t);if(!o.contains(y))throw new te(q.INVALID_ARGUMENT,`Field '${y}' is specified in your field mask but missing from your input data.`);Qj(h,y)||h.push(y)}c=new Mr(h),d=o.fieldTransforms.filter(p=>c.covers(p.field))}else c=null,d=o.fieldTransforms;return new jx(new mr(a),c,d)}var O0=class n extends $d{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};var Hx=class n extends $d{_toFieldTransform(e){return new MA(e.path,new hl)}isEqual(e){return e instanceof n}};function EX(n,e,t,r){let i=n.Dc(1,e,t);_1("Data must be an object, but it was:",i,r);let s=[],o=mr.empty();Ra(r,(c,d)=>{let h=w1(e,c,t);d=hn(d);let p=i.gc(h);if(d instanceof O0)s.push(h);else{let y=ag(d,p);y!=null&&(s.push(h),o.set(h,y))}});let a=new Mr(s);return new P0(o,a,i.fieldTransforms)}function bX(n,e,t,r,i,s){let o=n.Dc(1,e,t),a=[qx(e,r,t)],c=[i];if(s.length%2!=0)throw new te(q.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let y=0;y<s.length;y+=2)a.push(qx(e,s[y])),c.push(s[y+1]);let d=[],h=mr.empty();for(let y=a.length-1;y>=0;--y)if(!Qj(d,a[y])){let E=a[y],k=c[y];k=hn(k);let P=o.gc(E);if(k instanceof O0)d.push(E);else{let M=ag(k,P);M!=null&&(d.push(E),h.set(E,M))}}let p=new Mr(d);return new P0(h,p,o.fieldTransforms)}function CX(n,e,t,r=!1){return ag(t,n.Dc(r?4:3,e))}function ag(n,e){if(Kj(n=hn(n)))return _1("Unsupported field value:",e,n),Wj(n,e);if(n instanceof $d)return(function(r,i){if(!Gj(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);let s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(r,i){let s=[],o=0;for(let a of r){let c=ag(a,i.yc(o));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}})(n,e)}return(function(r,i){if((r=hn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return aJ(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let s=Xt.fromDate(r);return{timestampValue:y0(i.serializer,s)}}if(r instanceof Xt){let s=new Xt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:y0(i.serializer,s)}}if(r instanceof Ea)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ia)return{bytesValue:gj(i.serializer,r._byteString)};if(r instanceof Dn){let s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.wc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:o1(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof ba)return(function(o,a){return{mapValue:{fields:{[Zx]:{stringValue:e1},[Nd]:{arrayValue:{values:o.toArray().map(d=>{if(typeof d!="number")throw a.wc("VectorValues must only contain numeric values.");return s1(a.serializer,d)})}}}}}})(r,i);throw i.wc(`Unsupported field value: ${j0(r)}`)})(n,e)}function Wj(n,e){let t={};return BU(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ra(n,(r,i)=>{let s=ag(i,e.Vc(r));s!=null&&(t[r]=s)}),{mapValue:{fields:t}}}function Kj(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Xt||n instanceof Ea||n instanceof Ia||n instanceof Dn||n instanceof $d||n instanceof ba)}function _1(n,e,t){if(!Kj(t)||!SU(t)){let r=j0(t);throw r==="an object"?e.wc(n+" a custom object"):e.wc(n+" "+r)}}function qx(n,e,t){if((e=hn(e))instanceof Bd)return e._internalPath;if(typeof e=="string")return w1(n,e);throw F0("Field path arguments must be of type string or ",n,!1,void 0,t)}var TX=new RegExp("[~\\*/\\[\\]]");function w1(n,e,t){if(e.search(TX)>=0)throw F0(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Bd(...e.split("."))._internalPath}catch{throw F0(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function F0(n,e,t,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new te(q.INVALID_ARGUMENT,a+n+c)}function Qj(n,e){return n.some(t=>t.isEqual(e))}var V0=class{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Dn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new zx(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(K0("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},zx=class extends V0{data(){return super.data()}};function K0(n,e){return typeof e=="string"?w1(n,e):e instanceof Bd?e._internalPath:e._delegate._internalPath}function Yj(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new te(q.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var ng=class{},L0=class extends ng{};function Jj(n,e,...t){let r=[];e instanceof ng&&r.push(e),r=r.concat(t),(function(s){let o=s.filter(c=>c instanceof Gx).length,a=s.filter(c=>c instanceof U0).length;if(o>1||o>0&&a>0)throw new te(q.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(let i of r)n=i._apply(n);return n}var U0=class n extends L0{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return e4(e._query,t),new xa(e.firestore,e.converter,kA(e._query,t))}_parse(e){let t=v1(e.firestore);return(function(s,o,a,c,d,h,p){let y;if(d.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new te(q.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){EU(p,h);let k=[];for(let P of p)k.push(IU(c,s,P));y={arrayValue:{values:k}}}else y=IU(c,s,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||EU(p,h),y=CX(a,o,p,h==="in"||h==="not-in");return Yt.create(d,h,y)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function Xj(n,e,t){let r=e,i=K0("where",n);return U0._create(i,r,t)}var Gx=class n extends ng{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:ui.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:((function(i,s){let o=i,a=s.getFlattenedFilters();for(let c of a)e4(o,c),o=kA(o,c)})(e._query,t),new xa(e.firestore,e.converter,kA(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var Wx=class n extends L0{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=(function(i,s,o){if(i.startAt!==null)throw new te(q.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new te(q.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new dl(s,o)})(e._query,this._field,this._direction);return new xa(e.firestore,e.converter,(function(i,s){let o=i.explicitOrderBy.concat([s]);return new Sa(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)})(e._query,t))}};function Zj(n,e="asc"){let t=e,r=K0("orderBy",n);return Wx._create(r,t)}function IU(n,e,t){if(typeof(t=hn(t))=="string"){if(t==="")throw new te(q.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!tj(e)&&t.indexOf("/")!==-1)throw new te(q.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(bt.fromString(t));if(!fe.isDocumentKey(r))throw new te(q.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return $L(n,new fe(r))}if(t instanceof Dn)return $L(n,t._key);throw new te(q.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${j0(t)}.`)}function EU(n,e){if(!Array.isArray(n)||n.length===0)throw new te(q.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function e4(n,e){let t=(function(i,s){for(let o of i)for(let a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null})(n.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new te(q.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new te(q.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var Kx=class{convertValue(e,t="none"){switch(Ta(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Et(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Js(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ye(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return Ra(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertVectorValue(e){var t,r,i;let s=(i=(r=(t=e.fields)===null||t===void 0?void 0:t[Nd].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>Et(o.doubleValue));return new ba(s)}convertGeoPoint(e){return new Ea(Et(e.latitude),Et(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=$0(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Qp(e));default:return null}}convertTimestamp(e){let t=Ys(e);return new Xt(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=bt.fromString(e);at(Ij(r),9688,{name:e});let i=new d0(r.get(1),r.get(3)),s=new fe(r.popFirst(5));return i.isEqual(t)||Qs(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}};function SX(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var ol=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},al=class n extends V0{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new Rd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(K0("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new te(q.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,t={};return t.type=n._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};al._jsonSchemaVersion="firestore/documentSnapshot/1.0",al._jsonSchema={type:Jt("string",al._jsonSchemaVersion),bundleSource:Jt("string","DocumentSnapshot"),bundleName:Jt("string"),bundle:Jt("string")};var Rd=class extends al{data(e={}){return super.data(e)}},cl=class n{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new ol(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Rd(this._firestore,this._userDataWriter,r.key,r,new ol(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new te(q.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{let c=new Rd(i._firestore,i._userDataWriter,a.doc.key,a.doc,new ol(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{let c=new Rd(i._firestore,i._userDataWriter,a.doc.key,a.doc,new ol(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),d=-1,h=-1;return a.type!==0&&(d=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:DX(a.type),doc:c,oldIndex:d,newIndex:h}})}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new te(q.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=n._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Gp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let t=[],r=[],i=[];return this.docs.forEach(s=>{s._document!==null&&(t.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function DX(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ye(61501,{type:n})}}cl._jsonSchemaVersion="firestore/querySnapshot/1.0",cl._jsonSchema={type:Jt("string",cl._jsonSchemaVersion),bundleSource:Jt("string","QuerySnapshot"),bundleName:Jt("string"),bundle:Jt("string")};var rg=class extends Kx{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ia(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Dn(this.firestore,null,t)}};function t4(n){n=Wi(n,xa);let e=Wi(n.firestore,eo),t=y1(e),r=new rg(e);return Yj(n._query),vX(t,n._query).then(i=>new cl(e,r,n,i))}function n4(n,e,t,...r){n=Wi(n,Dn);let i=Wi(n.firestore,eo),s=v1(i),o;return o=typeof(e=hn(e))=="string"||e instanceof Bd?bX(s,"updateDoc",n._key,e,t,r):EX(s,"updateDoc",n._key,e),I1(i,[o.toMutation(n._key,Ks.exists(!0))])}function r4(n){return I1(Wi(n.firestore,eo),[new Jp(n._key,Ks.none())])}function i4(n,e){let t=Wi(n.firestore,eo),r=m1(n),i=SX(n.converter,e);return I1(t,[IX(v1(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,Ks.exists(!1))]).then(()=>r)}function s4(n,...e){var t,r,i;n=hn(n);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||wU(e[o])||(s=e[o++]);let a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(wU(e[o])){let p=e[o];e[o]=(t=p.next)===null||t===void 0?void 0:t.bind(p),e[o+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[o+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let c,d,h;if(n instanceof Dn)d=Wi(n.firestore,eo),h=i1(n._key.path),c={next:p=>{e[o]&&e[o](AX(d,n,p))},error:e[o+1],complete:e[o+2]};else{let p=Wi(n,xa);d=Wi(p.firestore,eo),h=p._query;let y=new rg(d);c={next:E=>{e[o]&&e[o](new cl(d,y,p,E))},error:e[o+1],complete:e[o+2]},Yj(n._query)}return(function(y,E,k,P){let M=new k0(P),H=new A0(E,M,k);return y.asyncQueue.enqueueAndForget(async()=>kj(await Ux(y),H)),()=>{M.Ou(),y.asyncQueue.enqueueAndForget(async()=>Nj(await Ux(y),H))}})(y1(d),h,a,c)}function I1(n,e){return(function(r,i){let s=new Gi;return r.asyncQueue.enqueueAndForget(async()=>aX(await yX(r),i,s)),s.promise})(y1(n),e)}function AX(n,e,t){let r=t.docs.get(e._key),i=new rg(n);return new al(n,i,e._key,r,new ol(t.hasPendingWrites,t.fromCache),e.converter)}function Zi(){return new Hx("serverTimestamp")}(function(e,t=!0){(function(i){Hd=i})(ea),ii(new qn("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),a=new eo(new dA(r.getProvider("auth-internal")),new pA(o,r.getProvider("app-check-internal")),(function(d,h){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new te(q.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new d0(d.options.projectId,h)})(o,i),o);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),xt(RL,kL,e),xt(RL,kL,"esm2017")})();var di=class{constructor(e){return e}},o4="firestore",E1=class{constructor(){return qu(o4)}};var b1=new ce("angularfire2.firestore-instances");function xX(n,e){let t=Jf(o4,n,e);return t&&new di(t)}function RX(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new di(r)}}var kX={provide:E1,deps:[[new lr,b1]]},NX={provide:di,useFactory:xX,deps:[[new lr,b1],xs]};function a4(n,...e){return xt("angularfire",ta.full,"fst"),sr([NX,kX,{provide:b1,useFactory:RX(n),multi:!0,deps:[_t,Mt,na,Uc,[new lr,fp],[new lr,zu],...e]}])}var Wd=Sn(i4,!0,2);var to=Sn(qj,!0,2);var Kd=Sn(r4,!0,2);var Pr=Sn(m1,!0,2);var C1=Sn(t4,!0);var c4=Sn(zj,!0);var Q0=Sn(s4,!0);var l4=Sn(Zj,!0,2),Y0=Sn(Jj,!0,2);var ka=Sn(n4,!0,2);var u4=Sn(Xj,!0,2);var Qd={production:!0,firebase:{apiKey:"AIzaSyA3FfYeMQ9WiWHlNKU1wsaMt8v3TOuNn_I",authDomain:"homeneeds-21223.firebaseapp.com",projectId:"homeneeds-21223",storageBucket:"homeneeds-21223.firebasestorage.app",messagingSenderId:"278167644572",appId:"1:278167644572:web:c5ca2a5c3e4da71fda4059",measurementId:"G-HXX054VJJ6"},apiUrl:"https://home-needs-psi.vercel.app"};var _4=(()=>{class n{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,r){this._renderer=t,this._elementRef=r}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(r){return new(r||n)(Le(Mi),Le(Jn))};static \u0275dir=Tn({type:n})}return n})(),R1=(()=>{class n extends _4{static \u0275fac=(()=>{let t;return function(i){return(t||(t=Is(n)))(i||n)}})();static \u0275dir=Tn({type:n,features:[bs]})}return n})(),tw=new ce("");var MX={provide:tw,useExisting:ys(()=>es),multi:!0};function PX(){let n=Sr()?Sr().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var OX=new ce(""),es=(()=>{class n extends _4{_compositionMode;_composing=!1;constructor(t,r,i){super(t,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!PX())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(r){return new(r||n)(Le(Mi),Le(Jn),Le(OX,8))};static \u0275dir=Tn({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&Q("input",function(o){return i._handleInput(o.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(o){return i._compositionEnd(o.target.value)})},standalone:!1,features:[Cu([MX]),bs]})}return n})();var FX=new ce(""),VX=new ce("");function w4(n){return n!=null}function I4(n){return qo(n)?ke(n):n}function E4(n){let e={};return n.forEach(t=>{e=t!=null?B(B({},e),t):e}),Object.keys(e).length===0?null:e}function b4(n,e){return e.map(t=>t(n))}function LX(n){return!n.validate}function C4(n){return n.map(e=>LX(e)?e:t=>e.validate(t))}function UX(n){if(!n)return null;let e=n.filter(w4);return e.length==0?null:function(t){return E4(b4(t,e))}}function T4(n){return n!=null?UX(C4(n)):null}function jX(n){if(!n)return null;let e=n.filter(w4);return e.length==0?null:function(t){let r=b4(t,e).map(I4);return No(r).pipe(_e(E4))}}function S4(n){return n!=null?jX(C4(n)):null}function d4(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function BX(n){return n._rawValidators}function $X(n){return n._rawAsyncValidators}function T1(n){return n?Array.isArray(n)?n:[n]:[]}function X0(n,e){return Array.isArray(n)?n.includes(e):n===e}function h4(n,e){let t=T1(e);return T1(n).forEach(i=>{X0(t,i)||t.push(i)}),t}function f4(n,e){return T1(e).filter(t=>!X0(n,t))}var Z0=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=T4(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=S4(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},S1=class extends Z0{name;get formDirective(){return null}get path(){return null}},hg=class extends Z0{_parent=null;name=null;valueAccessor=null},D1=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}};var Na=(()=>{class n extends D1{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(Le(hg,2))};static \u0275dir=Tn({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&Mn("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[bs]})}return n})();var cg="VALID",J0="INVALID",Yd="PENDING",lg="DISABLED",vl=class{},ew=class extends vl{value;source;constructor(e,t){super(),this.value=e,this.source=t}},ug=class extends vl{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}},dg=class extends vl{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}},Jd=class extends vl{status;source;constructor(e,t){super(),this.status=e,this.source=t}};var A1=class extends vl{source;constructor(e){super(),this.source=e}};function HX(n){return(nw(n)?n.validators:n)||null}function qX(n){return Array.isArray(n)?T4(n):n||null}function zX(n,e){return(nw(e)?e.asyncValidators:n)||null}function GX(n){return Array.isArray(n)?S4(n):n||null}function nw(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}var x1=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return ln(this.statusReactive)}set status(e){ln(()=>this.statusReactive.set(e))}_status=st(()=>this.statusReactive());statusReactive=be(void 0);get valid(){return this.status===cg}get invalid(){return this.status===J0}get pending(){return this.status==Yd}get disabled(){return this.status===lg}get enabled(){return this.status!==lg}errors;get pristine(){return ln(this.pristineReactive)}set pristine(e){ln(()=>this.pristineReactive.set(e))}_pristine=st(()=>this.pristineReactive());pristineReactive=be(!0);get dirty(){return!this.pristine}get touched(){return ln(this.touchedReactive)}set touched(e){ln(()=>this.touchedReactive.set(e))}_touched=st(()=>this.touchedReactive());touchedReactive=be(!1);get untouched(){return!this.touched}_events=new gt;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(h4(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(h4(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(f4(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(f4(e,this._rawAsyncValidators))}hasValidator(e){return X0(this._rawValidators,e)}hasAsyncValidator(e){return X0(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(oe(B({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new dg(!0,r))}markAllAsDirty(e={}){this.markAsDirty({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsDirty(e))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new dg(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(oe(B({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new ug(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new ug(!0,r))}markAsPending(e={}){this.status=Yd;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Jd(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(oe(B({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=lg,this.errors=null,this._forEachChild(i=>{i.disable(oe(B({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new ew(this.value,r)),this._events.next(new Jd(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(oe(B({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=cg,this._forEachChild(r=>{r.enable(oe(B({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(oe(B({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===cg||this.status===Yd)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new ew(this.value,t)),this._events.next(new Jd(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(oe(B({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?lg:cg}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=Yd,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1,shouldHaveEmitted:e!==!1};let r=I4(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new Jd(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new Dt,this.statusChanges=new Dt}_calculateStatus(){return this._allControlsDisabled()?lg:this.errors?J0:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Yd)?Yd:this._anyControlsHaveStatus(J0)?J0:cg}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new ug(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new dg(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){nw(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=qX(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=GX(this._rawAsyncValidators)}};var D4=new ce("",{factory:()=>k1}),k1="always";function WX(n,e){return[...e.path,n]}function KX(n,e,t=k1){YX(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),JX(n,e),ZX(n,e),XX(n,e),QX(n,e)}function p4(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function QX(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function YX(n,e){let t=BX(n);e.validator!==null?n.setValidators(d4(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=$X(n);e.asyncValidator!==null?n.setAsyncValidators(d4(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();p4(e._rawValidators,i),p4(e._rawAsyncValidators,i)}function JX(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&A4(n,e)})}function XX(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&A4(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function A4(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function ZX(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function eZ(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function tZ(n){return Object.getPrototypeOf(n.constructor)===R1}function nZ(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(s=>{s.constructor===es?t=s:tZ(s)?r=s:i=s}),i||r||t||null}function g4(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function m4(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var rZ=class extends x1{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,r){super(HX(t),zX(r,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),nw(t)&&(t.nonNullable||t.initialValueIsDefault)&&(m4(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),t.overwriteDefaultValue&&(this.defaultValue=this.value),this._pendingChange=!1,t?.emitEvent!==!1&&this._events.next(new A1(this))}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){g4(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){g4(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){m4(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var iZ={provide:hg,useExisting:ys(()=>no)},y4=Promise.resolve(),no=(()=>{class n extends hg{_changeDetectorRef;callSetDisabledState;control=new rZ;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new Dt;constructor(t,r,i,s,o,a){super(),this._changeDetectorRef=o,this.callSetDisabledState=a,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=nZ(this,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),eZ(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){KX(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){y4.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&Su(r);y4.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?WX(t,this._parent):[t]}static \u0275fac=function(r){return new(r||n)(Le(S1,9),Le(FX,10),Le(VX,10),Le(tw,10),Le(Wo,8),Le(D4,8))};static \u0275dir=Tn({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[Cu([iZ]),bs,ws]})}return n})();var sZ={provide:tw,useExisting:ys(()=>Ma),multi:!0};function x4(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function oZ(n){return n.split(":")[0]}var Ma=(()=>{class n extends R1{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;appRefInjector=j(zo).injector;destroyRef=j(Tr);cdr=j(Wo);_queuedWrite=!1;_writeValueAfterRender(){this._queuedWrite||this.appRefInjector.destroyed||(this._queuedWrite=!0,by({write:()=>{this.destroyRef.destroyed||(this._queuedWrite=!1,this.writeValue(this.value))}},{injector:this.appRefInjector}))}writeValue(t){this.cdr.markForCheck(),this.value=t;let r=this._getOptionId(t),i=x4(r,t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){let r=oZ(t);return this._optionMap.has(r)?this._optionMap.get(r):t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Is(n)))(i||n)}})();static \u0275dir=Tn({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&Q("change",function(o){return i.onChange(o.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[Cu([sZ]),bs]})}return n})(),Xd=(()=>{class n{_element;_renderer;_select;id;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(x4(this.id,t)),this._select._writeValueAfterRender())}set value(t){this._setElementValue(t),this._select&&this._select._writeValueAfterRender()}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select._writeValueAfterRender())}static \u0275fac=function(r){return new(r||n)(Le(Jn),Le(Mi),Le(Ma,9))};static \u0275dir=Tn({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})(),aZ={provide:tw,useExisting:ys(()=>R4),multi:!0};function v4(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function cZ(n){return n.split(":")[0]}var R4=(()=>{class n extends R1{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){this.value=t;let r;if(Array.isArray(t)){let i=t.map(s=>this._getOptionId(s));r=(s,o)=>{s._setSelected(i.indexOf(o.toString())>-1)}}else r=(i,s)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{let i=[],s=r.selectedOptions;if(s!==void 0){let o=s;for(let a=0;a<o.length;a++){let c=o[a],d=this._getOptionValue(c.value);i.push(d)}}else{let o=r.options;for(let a=0;a<o.length;a++){let c=o[a];if(c.selected){let d=this._getOptionValue(c.value);i.push(d)}}}this.value=i,t(i)}}_registerOption(t){let r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){let r=cZ(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Is(n)))(i||n)}})();static \u0275dir=Tn({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&Q("change",function(o){return i.onChange(o.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[Cu([aZ]),bs]})}return n})(),Zd=(()=>{class n{_element;_renderer;_select;id;_value;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(v4(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(v4(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||n)(Le(Jn),Le(Mi),Le(R4,9))};static \u0275dir=Tn({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})();var lZ=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Es({type:n});static \u0275inj=Ei({})}return n})();var Pa=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:D4,useValue:t.callSetDisabledState??k1}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Es({type:n});static \u0275inj=Ei({imports:[lZ]})}return n})();var uZ="firebase",dZ="12.6.0";sa(uZ,dZ,"app");var Or=class n{firestore=j(di);usersCollection=to(this.firestore,"users");users=be([]);currentUser=be(null);loading=be(!0);error=be(null);usersSubject=new ft([]);users$=this.usersSubject.asObservable();migrationInProgress=be(!1);constructor(){this.subscribeToUsers(),this.restoreSession()}subscribeToUsers(){let e=Y0(this.usersCollection,l4("name"));Q0(e,t=>{let r=t.docs.map(i=>{let s=i.data();return oe(B({id:i.id},s),{userId:s.userId||null,lastActive:s.lastActive?.toDate?s.lastActive.toDate():s.lastActive,createdAt:s.createdAt?.toDate?s.createdAt.toDate():s.createdAt})});this.users.set(r),this.usersSubject.next(r),this.updateCurrentUserReference(r),this.loading.set(!1),this.migrateUsersWithoutUserId(r).subscribe()},t=>{console.error("Error fetching users",t),this.error.set(t.message),this.loading.set(!1)})}migrateUsersWithoutUserId(e){if(this.migrationInProgress())return le(void 0);let t=e.filter(i=>!i.userId);if(t.length===0)return le(void 0);this.migrationInProgress.set(!0),console.log(`\u{1F504} Migrating ${t.length} user(s) without userId...`);let r=t.map(i=>{let s=this.generateUserId();return console.log(`  \u2192 Migrating user "${i.name}" (${i.id}) \u2192 userId: ${s}`),this.updateUser$(i.id,{userId:s}).pipe(_e(()=>({name:i.name,userId:s})))});return ke(Promise.all(r.map(i=>i.toPromise()))).pipe(mt(i=>{console.log(`\u2705 Successfully migrated ${i.length} user(s):`,i)}),ds(i=>(console.error("\u274C Error during user migration:",i),le(void 0))),mt(()=>{this.migrationInProgress.set(!1)}),_e(()=>{}))}restoreSession(){localStorage.getItem("currentUserId")&&this.users().length>0&&this.updateCurrentUserReference(this.users())}updateCurrentUserReference(e){let t=localStorage.getItem("currentUserId");if(t){let r=e.find(i=>i.id===t);r&&(this.currentUser.set(r),r.status!=="active"&&this.updateUser$(r.id,{status:"active",lastActive:Zi()}).subscribe())}}login$(e){return(e.userId?le(void 0):this.updateUser$(e.id,{userId:this.generateUserId()}).pipe(mt(()=>e=oe(B({},e),{userId:this.generateUserId()})))).pipe(wr(()=>(localStorage.setItem("currentUserId",e.id),this.currentUser.set(e),this.updateUser$(e.id,{status:"active",lastActive:Zi()}))))}async login(e){if(!e.userId){let t=this.generateUserId();await this.updateUser(e.id,{userId:t}),e=oe(B({},e),{userId:t})}localStorage.setItem("currentUserId",e.id),this.currentUser.set(e),await this.updateUser(e.id,{status:"active",lastActive:Zi()})}logout$(){let e=this.currentUser();return e?this.updateUser$(e.id,{status:"offline",lastActive:Zi()}).pipe(mt(()=>{localStorage.removeItem("currentUserId"),this.currentUser.set(null)})):(localStorage.removeItem("currentUserId"),this.currentUser.set(null),le(void 0))}async logout(){let e=this.currentUser();e&&await this.updateUser(e.id,{status:"offline",lastActive:Zi()}),localStorage.removeItem("currentUserId"),this.currentUser.set(null)}createUser$(e){let t=this.generateUserId();return ke(Wd(this.usersCollection,oe(B({},e),{userId:t,status:e.status||"pending",lastActive:Zi(),createdAt:Zi()}))).pipe(_e(()=>{}))}async createUser(e){let t=this.generateUserId();await Wd(this.usersCollection,oe(B({},e),{userId:t,status:e.status||"pending",lastActive:Zi(),createdAt:Zi()}))}generateUserId(){let e=Date.now().toString(36),t=Math.random().toString(36).substring(2,8);return`user_${e}_${t}`}updateUser$(e,t){return ke(ka(Pr(this.firestore,"users",e),t))}async updateUser(e,t){await ka(Pr(this.firestore,"users",e),t)}deleteUser$(e){return ke(Kd(Pr(this.firestore,"users",e)))}async deleteUser(e){await Kd(Pr(this.firestore,"users",e))}manualMigrateAllUsers$(){let t=this.users().filter(o=>!o.userId);if(t.length===0)return console.log("\u2705 All users already have userId assigned."),le({migrated:0,errors:0});let r=0,i=0,s=t.map(o=>{let a=this.generateUserId();return this.updateUser$(o.id,{userId:a}).pipe(mt(()=>{console.log(`\u2705 Migrated user "${o.name}" \u2192 ${a}`),r++}),ds(c=>(console.error(`\u274C Failed to migrate user "${o.name}":`,c),i++,le(void 0))))});return ke(Promise.all(s.map(o=>o.toPromise()))).pipe(_e(()=>({migrated:r,errors:i})))}async manualMigrateAllUsers(){let t=this.users().filter(s=>!s.userId);if(t.length===0)return console.log("\u2705 All users already have userId assigned."),{migrated:0,errors:0};let r=0,i=0;for(let s of t)try{let o=this.generateUserId();await this.updateUser(s.id,{userId:o}),console.log(`\u2705 Migrated user "${s.name}" \u2192 ${o}`),r++}catch(o){console.error(`\u274C Failed to migrate user "${s.name}":`,o),i++}return{migrated:r,errors:i}}getUsersNeedingMigration(){return this.users().filter(e=>!e.userId)}static \u0275fac=function(t){return new(t||n)};static \u0275prov=se({token:n,factory:n.\u0275fac,providedIn:"root"})};var ts=class n{userService=j(Or);firestore;TASKS_COLLECTION="overview_tasks";tasksSignal=be([]);tasks=st(()=>this.tasksSignal());tasksSubject=new ft([]);tasks$=this.tasksSubject.asObservable();unsubTasks=null;constructor(){let e=sp(Qd.firebase);this.firestore=Y_(e),xi(()=>{let t=this.userService.currentUser();this.cleanupSubscription(),t&&t.userId?(console.log("\u{1F4CB} Loading tasks for user:",t.userId),this.initRealtimeData(t.userId)):(console.log("\u{1F512} No user logged in - clearing task data"),this.tasksSignal.set([]),this.tasksSubject.next([]))})}getCurrentUserId(){return this.userService.currentUser()?.userId||""}cleanupSubscription(){this.unsubTasks&&(this.unsubTasks(),this.unsubTasks=null)}initRealtimeData(e){if(!e)return;let t=Vp(Op(this.firestore,this.TASKS_COLLECTION),Lp("userId","==",e));this.unsubTasks=Up(t,r=>{let i=r.docs.map(s=>{let o=s.data(),a=o.dueDate&&typeof o.dueDate.toDate=="function"?o.dueDate.toDate():o.dueDate?new Date(o.dueDate):null,c=o.createdAt&&typeof o.createdAt.toDate=="function"?o.createdAt.toDate():new Date;return oe(B({},o),{dueDate:a,createdAt:c})});i.sort((s,o)=>new Date(o.createdAt).getTime()-new Date(s.createdAt).getTime()),this.tasksSignal.set(i),this.tasksSubject.next(i)})}createTask$(e){let t=this.getCurrentUserId();if(!t)return _i(()=>new Error("User must be logged in to create tasks"));let r=`task_${Date.now()}_${Math.random().toString(36).substr(2,5)}`;return ke(zs(Wt(this.firestore,this.TASKS_COLLECTION,r),oe(B({},e),{id:r,userId:t,createdAt:new Date}))).pipe(_e(()=>r))}async createTask(e){let t=this.getCurrentUserId();if(!t)throw new Error("User must be logged in to create tasks");let r=`task_${Date.now()}_${Math.random().toString(36).substr(2,5)}`;await zs(Wt(this.firestore,this.TASKS_COLLECTION,r),oe(B({},e),{id:r,userId:t,createdAt:new Date}))}updateTask$(e,t){return ke(_a(Wt(this.firestore,this.TASKS_COLLECTION,e),t))}async updateTask(e,t){await _a(Wt(this.firestore,this.TASKS_COLLECTION,e),t)}deleteTask$(e){return ke(rl(Wt(this.firestore,this.TASKS_COLLECTION,e)))}async deleteTask(e){await rl(Wt(this.firestore,this.TASKS_COLLECTION,e))}ngOnDestroy(){this.cleanupSubscription()}static \u0275fac=function(t){return new(t||n)};static \u0275prov=se({token:n,factory:n.\u0275fac,providedIn:"root"})};var fg=["bg-red-500","bg-orange-500","bg-amber-500","bg-green-500","bg-emerald-500","bg-teal-500","bg-cyan-500","bg-blue-500","bg-indigo-500","bg-violet-500","bg-purple-500","bg-fuchsia-500","bg-pink-500","bg-rose-500","bg-slate-500"],k4=[{id:"groceries",label:"Groceries",color:"bg-amber-400",textColor:"text-amber-400"},{id:"chores",label:"Chores",color:"bg-blue-400",textColor:"text-blue-400"},{id:"repairs",label:"Repairs",color:"bg-purple-500",textColor:"text-purple-400"},{id:"other",label:"Other",color:"bg-slate-400",textColor:"text-slate-400"}];var Fr=class n{dialog=be(null);confirm$(e,t="Confirm"){let r=new gt;return this.dialog.set({message:e,title:t,type:"confirm",confirmText:"Confirm",cancelText:"Cancel",result$:r}),r.pipe(Yn(1))}confirm(e,t="Confirm"){return hm(this.confirm$(e,t))}alert$(e,t="Alert"){let r=new gt;return this.dialog.set({message:e,title:t,type:"info",confirmText:"OK",result$:r}),r.pipe(Yn(1))}alert(e,t="Alert"){return hm(this.alert$(e,t))}success$(e,t="Success"){let r=new gt;return this.dialog.set({message:e,title:t,type:"success",confirmText:"OK",result$:r}),r.pipe(Yn(1))}error$(e,t="Error"){let r=new gt;return this.dialog.set({message:e,title:t,type:"error",confirmText:"OK",result$:r}),r.pipe(Yn(1))}close(e){let t=this.dialog();t&&(t.result$.next(e),t.result$.complete(),this.dialog.set(null))}static \u0275fac=function(t){return new(t||n)};static \u0275prov=se({token:n,factory:n.\u0275fac,providedIn:"root"})};var eh=class n{firestore=j(di);userService=j(Or);COLLECTION="assignees";assigneesSignal=be([]);assignees=st(()=>this.assigneesSignal());assigneesSubject=new ft([]);assignees$=this.assigneesSubject.asObservable();unsubAssignees=null;constructor(){xi(()=>{let e=this.userService.currentUser();this.cleanupSubscription(),e&&e.userId?(console.log("\u{1F465} Loading assignees for user:",e.userId),this.subscribeToAssignees(e.userId)):(console.log("\u{1F512} No user logged in - clearing assignee data"),this.assigneesSignal.set([]),this.assigneesSubject.next([]))})}getCurrentUserId(){return this.userService.currentUser()?.userId||""}cleanupSubscription(){this.unsubAssignees&&(this.unsubAssignees(),this.unsubAssignees=null)}subscribeToAssignees(e){if(!e)return;let t=Y0(to(this.firestore,this.COLLECTION),u4("userId","==",e));this.unsubAssignees=Q0(t,r=>{let i=r.docs.map(s=>B({id:s.id},s.data()));i.sort((s,o)=>s.name.localeCompare(o.name)),this.assigneesSignal.set(i),this.assigneesSubject.next(i)},r=>{console.error("Error fetching assignees:",r)})}createAssignee$(e,t){let r=this.getCurrentUserId();if(!r)return _i(()=>new Error("User must be logged in to create assignees"));let i=e.charAt(0).toUpperCase();return ke(Wd(to(this.firestore,this.COLLECTION),{name:e,color:t,initial:i,userId:r})).pipe(_e(s=>s.id))}async createAssignee(e,t){let r=this.getCurrentUserId();if(!r)throw new Error("User must be logged in to create assignees");let i=e.charAt(0).toUpperCase();await Wd(to(this.firestore,this.COLLECTION),{name:e,color:t,initial:i,userId:r})}updateAssignee$(e,t){let r=B({},t);return t.name&&(r.initial=t.name.charAt(0).toUpperCase()),ke(ka(Pr(this.firestore,this.COLLECTION,e),r))}async updateAssignee(e,t){t.name&&(t.initial=t.name.charAt(0).toUpperCase()),await ka(Pr(this.firestore,this.COLLECTION,e),t)}deleteAssignee$(e){return ke(Kd(Pr(this.firestore,this.COLLECTION,e)))}async deleteAssignee(e){await Kd(Pr(this.firestore,this.COLLECTION,e))}getAssignee(e){return this.assigneesSignal().find(t=>t.id===e)}ngOnDestroy(){this.cleanupSubscription()}static \u0275fac=function(t){return new(t||n)};static \u0275prov=se({token:n,factory:n.\u0275fac,providedIn:"root"})};var hZ=(n,e)=>e.id;function fZ(n,e){if(n&1){let t=je();x(0,"button",17),Q("click",function(){let i=X(t).$implicit,s=$();return Z(s.assigneeColor=i)}),R()}if(n&2){let t=e.$implicit,r=$();it(t),Mn("ring-slate-400",r.assigneeColor===t)("ring-transparent",r.assigneeColor!==t)}}function pZ(n,e){if(n&1){let t=je();x(0,"button",18),Q("click",function(){X(t);let i=$();return Z(i.resetForm())}),N(1," Cancel "),R()}}function gZ(n,e){if(n&1){let t=je();x(0,"div",15)(1,"div",19)(2,"div",20),N(3),R(),x(4,"span",21),N(5),R()(),x(6,"div",22)(7,"button",23),Q("click",function(){let i=X(t).$implicit,s=$();return Z(s.editAssignee(i))}),x(8,"span",24),N(9,"edit"),R()(),x(10,"button",25),Q("click",function(){let i=X(t).$implicit,s=$();return Z(s.deleteAssignee(i.id))}),x(11,"span",24),N(12,"delete"),R()()()()}if(n&2){let t=e.$implicit;V(2),it(t.color),V(),ct(" ",t.initial," "),V(2),Pe(t.name)}}function mZ(n,e){n&1&&(x(0,"div",16),N(1,"No assignees yet"),R())}var iw=class n{close=new Dt;assigneeService=j(eh);overviewService=j(ts);dialogService=j(Fr);assignees=this.assigneeService.assignees;assigneeColors=fg;editingAssignee=null;assigneeName="";assigneeColor=fg[0];onClose(){this.close.emit()}resetForm(){this.editingAssignee=null,this.assigneeName="",this.assigneeColor=this.assigneeColors[0]}editAssignee(e){this.editingAssignee=e,this.assigneeName=e.name,this.assigneeColor=e.color}async saveAssignee(){this.assigneeName.trim()&&(this.editingAssignee?await this.assigneeService.updateAssignee(this.editingAssignee.id,{name:this.assigneeName,color:this.assigneeColor}):await this.assigneeService.createAssignee(this.assigneeName,this.assigneeColor),this.resetForm())}async deleteAssignee(e){if(this.overviewService.tasks().filter(r=>r.assigneeId===e).length>0){await this.dialogService.alert("Cannot delete assignee with active tasks.");return}await this.dialogService.confirm("Delete this assignee?","Confirm")&&await this.assigneeService.deleteAssignee(e)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=$n({type:n,selectors:[["app-assignee-management"]],outputs:{close:"close"},decls:22,vars:5,consts:[[1,"fixed","inset-0","z-[60]","flex","items-center","justify-center","p-4","bg-black/50","backdrop-blur-sm","animate-in","fade-in","duration-200"],[1,"bg-white","dark:bg-surface-dark","w-full","max-w-sm","rounded-2xl","shadow-xl","overflow-hidden","animate-in","zoom-in-95","duration-200","border","border-slate-200","dark:border-border-dark","flex","flex-col","max-h-[80vh]"],[1,"p-4","border-b","border-slate-100","dark:border-border-dark","flex","justify-between","items-center","bg-slate-50/50","dark:bg-black/20"],[1,"font-bold","text-lg","text-slate-900","dark:text-white"],[1,"p-1","rounded-full","hover:bg-slate-200","dark:hover:bg-border-dark","transition-colors",3,"click"],[1,"material-symbols-outlined"],[1,"flex-1","overflow-y-auto","p-4","space-y-3"],[1,"bg-slate-50","dark:bg-black/20","p-3","rounded-xl","space-y-3"],["type","text","placeholder","Name (e.g. Alex)",1,"w-full","h-10","px-3","rounded-lg","bg-white","dark:bg-surface-dark","border","border-slate-200","dark:border-border-dark","text-sm","focus:border-primary","focus:ring-1","focus:ring-primary","outline-none","text-slate-900","dark:text-white",3,"ngModelChange","ngModel"],[1,"flex","flex-wrap","gap-2"],[1,"size-6","rounded-full","transition-transform","hover:scale-110","ring-2","ring-offset-1","dark:ring-offset-surface-dark",3,"class","ring-slate-400","ring-transparent"],[1,"flex","justify-end","gap-2"],[1,"text-xs","text-slate-500","font-bold","hover:text-slate-700","dark:hover:text-slate-300","px-2"],[1,"h-8","px-4","bg-primary","text-slate-900","rounded-lg","text-xs","font-bold","hover:bg-primary-hover","disabled:opacity-50","disabled:cursor-not-allowed","transition-colors",3,"click","disabled"],[1,"space-y-2"],[1,"flex","items-center","justify-between","p-2","rounded-lg","hover:bg-slate-50","dark:hover:bg-white/5","group","border","border-transparent","hover:border-slate-100","dark:hover:border-border-dark","transition-all"],[1,"text-center","py-6","text-slate-400","text-sm"],[1,"size-6","rounded-full","transition-transform","hover:scale-110","ring-2","ring-offset-1","dark:ring-offset-surface-dark",3,"click"],[1,"text-xs","text-slate-500","font-bold","hover:text-slate-700","dark:hover:text-slate-300","px-2",3,"click"],[1,"flex","items-center","gap-3"],[1,"size-8","rounded-full","flex","items-center","justify-center","text-xs","font-bold","text-white","shadow-sm"],[1,"text-sm","font-bold","text-slate-900","dark:text-white"],[1,"flex","gap-1","opacity-0","group-hover:opacity-100","transition-opacity"],[1,"size-7","rounded","bg-white","dark:bg-black/20","border","border-slate-200","dark:border-border-dark","flex","items-center","justify-center","text-slate-500","hover:text-primary","transition-colors",3,"click"],[1,"material-symbols-outlined","text-[14px]"],[1,"size-7","rounded","bg-white","dark:bg-black/20","border","border-slate-200","dark:border-border-dark","flex","items-center","justify-center","text-slate-500","hover:text-red-500","transition-colors",3,"click"]],template:function(t,r){t&1&&(x(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),N(4,"Manage Assignees"),R(),x(5,"button",4),Q("click",function(){return r.onClose()}),x(6,"span",5),N(7,"close"),R()()(),x(8,"div",6)(9,"div",7)(10,"input",8),dn("ngModelChange",function(s){return gn(r.assigneeName,s)||(r.assigneeName=s),s}),R(),x(11,"div",9),Ct(12,fZ,1,6,"button",10,Eu),R(),x(14,"div",11),ue(15,pZ,2,0,"button",12),x(16,"button",13),Q("click",function(){return r.saveAssignee()}),N(17),R()()(),x(18,"div",14),Ct(19,gZ,13,4,"div",15,hZ,!1,mZ,2,0,"div",16),R()()()()),t&2&&(V(10),un("ngModel",r.assigneeName),V(2),Tt(r.assigneeColors),V(3),de(r.editingAssignee?15:-1),V(),Ue("disabled",!r.assigneeName.trim()),V(),ct(" ",r.editingAssignee?"Update":"Add"," "),V(2),Tt(r.assignees()))},dependencies:[Ar,Pa,es,Na,no],encapsulation:2})};var ro=[{id:"produce",userId:"system",name:"Produce",icon:"nutrition",color:"text-green-500",isDefault:!0,createdAt:new Date},{id:"dairy",userId:"system",name:"Dairy & Eggs",icon:"water_drop",color:"text-blue-400",isDefault:!0,createdAt:new Date},{id:"pantry",userId:"system",name:"Pantry",icon:"soup_kitchen",color:"text-orange-400",isDefault:!0,createdAt:new Date},{id:"baby",userId:"system",name:"Baby Needs",icon:"child_care",color:"text-pink-500",isDefault:!0,createdAt:new Date},{id:"cleaning",userId:"system",name:"Cleaning Items",icon:"cleaning_services",color:"text-cyan-500",isDefault:!0,createdAt:new Date},{id:"other",userId:"system",name:"Other",icon:"category",color:"text-slate-400",isDefault:!0,createdAt:new Date}],N4=["nutrition","water_drop","soup_kitchen","category","local_dining","bakery_dining","icecream","liquor","coffee","lunch_dining","restaurant","fastfood","ramen_dining","set_meal","egg","cake","cookie","local_pizza","kebab_dining","rice_bowl","cleaning_services","child_care"],M4=["text-green-500","text-blue-400","text-orange-400","text-slate-400","text-red-500","text-purple-500","text-pink-500","text-yellow-500","text-teal-500","text-indigo-500","text-cyan-500","text-lime-500"];var sw=[{name:"Red Apples",category:"produce",imageUrl:"https://images.pexels.com/photos/102104/pexels-photo-102104.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Bananas",category:"produce",imageUrl:"https://images.pexels.com/photos/2872755/pexels-photo-2872755.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Oranges",category:"produce",imageUrl:"https://images.pexels.com/photos/327098/pexels-photo-327098.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Strawberries",category:"produce",imageUrl:"https://images.pexels.com/photos/46174/strawberries-berries-fruit-freshness-46174.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Blueberries",category:"produce",imageUrl:"https://images.pexels.com/photos/1153655/pexels-photo-1153655.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Grapes",category:"produce",imageUrl:"https://images.pexels.com/photos/60021/grapes-wine-fruit-vines-60021.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Lemons",category:"produce",imageUrl:"https://images.pexels.com/photos/1414110/pexels-photo-1414110.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Limes",category:"produce",imageUrl:"https://images.pexels.com/photos/1435736/pexels-photo-1435736.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Watermelon",category:"produce",imageUrl:"https://images.pexels.com/photos/1313267/pexels-photo-1313267.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Pineapple",category:"produce",imageUrl:"https://images.pexels.com/photos/947879/pexels-photo-947879.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Mangoes",category:"produce",imageUrl:"https://images.pexels.com/photos/918643/pexels-photo-918643.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Avocados",category:"produce",imageUrl:"https://images.pexels.com/photos/557659/pexels-photo-557659.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Peaches",category:"produce",imageUrl:"https://images.pexels.com/photos/1028599/pexels-photo-1028599.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Pears",category:"produce",imageUrl:"https://images.pexels.com/photos/568471/pexels-photo-568471.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Cherries",category:"produce",imageUrl:"https://images.pexels.com/photos/175727/pexels-photo-175727.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Kiwi",category:"produce",imageUrl:"https://images.pexels.com/photos/51312/kiwi-fruit-vitamins-healthy-eating-51312.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Raspberries",category:"produce",imageUrl:"https://images.pexels.com/photos/892808/pexels-photo-892808.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Pomegranate",category:"produce",imageUrl:"https://images.pexels.com/photos/65256/pomegranate-open-cores-fruit-65256.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Grapefruit",category:"produce",imageUrl:"https://images.pexels.com/photos/1171170/pexels-photo-1171170.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Coconut",category:"produce",imageUrl:"https://images.pexels.com/photos/1030973/pexels-photo-1030973.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Broccoli",category:"produce",imageUrl:"https://images.pexels.com/photos/47347/broccoli-vegetable-food-healthy-47347.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Carrots",category:"produce",imageUrl:"https://images.pexels.com/photos/143133/pexels-photo-143133.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Spinach",category:"produce",imageUrl:"https://images.pexels.com/photos/2325843/pexels-photo-2325843.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Tomatoes",category:"produce",imageUrl:"https://images.pexels.com/photos/1367242/pexels-photo-1367242.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Cucumbers",category:"produce",imageUrl:"https://images.pexels.com/photos/37528/cucumber-salad-food-healthy-37528.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Bell Peppers",category:"produce",imageUrl:"https://images.pexels.com/photos/128536/pexels-photo-128536.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Onions",category:"produce",imageUrl:"https://images.pexels.com/photos/144206/pexels-photo-144206.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Garlic",category:"produce",imageUrl:"https://images.pexels.com/photos/1392585/pexels-photo-1392585.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Potatoes",category:"produce",imageUrl:"https://images.pexels.com/photos/144248/potatoes-vegetables-erdfrucht-bio-144248.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Sweet Potatoes",category:"produce",imageUrl:"https://images.pexels.com/photos/2284166/pexels-photo-2284166.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Lettuce",category:"produce",imageUrl:"https://images.pexels.com/photos/1199562/pexels-photo-1199562.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Cabbage",category:"produce",imageUrl:"https://images.pexels.com/photos/2518893/pexels-photo-2518893.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Cauliflower",category:"produce",imageUrl:"https://images.pexels.com/photos/6316515/pexels-photo-6316515.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Zucchini",category:"produce",imageUrl:"https://images.pexels.com/photos/128420/pexels-photo-128420.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Eggplant",category:"produce",imageUrl:"https://images.pexels.com/photos/321551/pexels-photo-321551.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Green Beans",category:"produce",imageUrl:"https://images.pexels.com/photos/63286/peas-green-beans-vegetables-63286.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Asparagus",category:"produce",imageUrl:"https://images.pexels.com/photos/351679/pexels-photo-351679.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Celery",category:"produce",imageUrl:"https://images.pexels.com/photos/2893635/pexels-photo-2893635.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Mushrooms",category:"produce",imageUrl:"https://images.pexels.com/photos/36438/mushrooms-brown-mushrooms-cook-eat.jpg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Corn",category:"produce",imageUrl:"https://images.pexels.com/photos/547263/pexels-photo-547263.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Ginger",category:"produce",imageUrl:"https://images.pexels.com/photos/161556/ginger-plant-asia-rhizome-161556.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Fresh Basil",category:"produce",imageUrl:"https://images.pexels.com/photos/1171182/pexels-photo-1171182.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Green Onions",category:"produce",imageUrl:"https://images.pexels.com/photos/4197447/pexels-photo-4197447.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Red Cabbage",category:"produce",imageUrl:"https://images.pexels.com/photos/6316517/pexels-photo-6316517.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Radishes",category:"produce",imageUrl:"https://images.pexels.com/photos/244393/pexels-photo-244393.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1}];var ow=[{name:"Whole Milk",category:"dairy",imageUrl:"https://images.pexels.com/photos/248412/pexels-photo-248412.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"2% Reduced Fat Milk",category:"dairy",imageUrl:"https://images.pexels.com/photos/2198626/pexels-photo-2198626.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Skim Milk",category:"dairy",imageUrl:"https://images.pexels.com/photos/725998/pexels-photo-725998.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Heavy Cream",category:"dairy",imageUrl:"https://images.pexels.com/photos/357573/pexels-photo-357573.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Half & Half",category:"dairy",imageUrl:"https://images.pexels.com/photos/416528/pexels-photo-416528.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Almond Milk",category:"dairy",imageUrl:"https://images.pexels.com/photos/3735180/pexels-photo-3735180.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Oat Milk",category:"dairy",imageUrl:"https://images.pexels.com/photos/5946627/pexels-photo-5946627.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Coconut Milk",category:"dairy",imageUrl:"https://images.pexels.com/photos/4202490/pexels-photo-4202490.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Large Eggs",category:"dairy",imageUrl:"https://images.pexels.com/photos/162712/egg-white-food-protein-162712.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Organic Free Range Eggs",category:"dairy",imageUrl:"https://images.pexels.com/photos/6941041/pexels-photo-6941041.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Egg Whites",category:"dairy",imageUrl:"https://images.pexels.com/photos/4110008/pexels-photo-4110008.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Brown Eggs",category:"dairy",imageUrl:"https://images.pexels.com/photos/4045570/pexels-photo-4045570.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Cheddar Cheese",category:"dairy",imageUrl:"https://images.pexels.com/photos/821365/pexels-photo-821365.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Mozzarella",category:"dairy",imageUrl:"https://images.pexels.com/photos/4109943/pexels-photo-4109943.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Parmesan",category:"dairy",imageUrl:"https://images.pexels.com/photos/4187779/pexels-photo-4187779.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Swiss Cheese",category:"dairy",imageUrl:"https://images.pexels.com/photos/773253/pexels-photo-773253.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Cream Cheese",category:"dairy",imageUrl:"https://images.pexels.com/photos/4397919/pexels-photo-4397919.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Feta Cheese",category:"dairy",imageUrl:"https://images.pexels.com/photos/4197908/pexels-photo-4197908.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Blue Cheese",category:"dairy",imageUrl:"https://images.pexels.com/photos/4198018/pexels-photo-4198018.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Goat Cheese",category:"dairy",imageUrl:"https://images.pexels.com/photos/4198041/pexels-photo-4198041.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Brie",category:"dairy",imageUrl:"https://images.pexels.com/photos/6287530/pexels-photo-6287530.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Cottage Cheese",category:"dairy",imageUrl:"https://images.pexels.com/photos/5946609/pexels-photo-5946609.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Ricotta",category:"dairy",imageUrl:"https://images.pexels.com/photos/6287535/pexels-photo-6287535.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Shredded Cheese",category:"dairy",imageUrl:"https://images.pexels.com/photos/4198024/pexels-photo-4198024.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"String Cheese",category:"dairy",imageUrl:"https://images.pexels.com/photos/4198020/pexels-photo-4198020.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Butter",category:"dairy",imageUrl:"https://images.pexels.com/photos/531334/pexels-photo-531334.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Unsalted Butter",category:"dairy",imageUrl:"https://images.pexels.com/photos/4110003/pexels-photo-4110003.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Margarine",category:"dairy",imageUrl:"https://images.pexels.com/photos/4397916/pexels-photo-4397916.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Greek Yogurt",category:"dairy",imageUrl:"https://images.pexels.com/photos/1435706/pexels-photo-1435706.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Plain Yogurt",category:"dairy",imageUrl:"https://images.pexels.com/photos/3669638/pexels-photo-3669638.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Flavored Yogurt",category:"dairy",imageUrl:"https://images.pexels.com/photos/4051580/pexels-photo-4051580.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Yogurt Drinks",category:"dairy",imageUrl:"https://images.pexels.com/photos/3625372/pexels-photo-3625372.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Sour Cream",category:"dairy",imageUrl:"https://images.pexels.com/photos/4397923/pexels-photo-4397923.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Whipped Cream",category:"dairy",imageUrl:"https://images.pexels.com/photos/3026806/pexels-photo-3026806.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1}];var aw=[{name:"Spaghetti",category:"pantry",imageUrl:"https://images.pexels.com/photos/4518844/pexels-photo-4518844.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Penne Pasta",category:"pantry",imageUrl:"https://images.pexels.com/photos/1437267/pexels-photo-1437267.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Macaroni",category:"pantry",imageUrl:"https://images.pexels.com/photos/4518710/pexels-photo-4518710.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Jasmine Rice",category:"pantry",imageUrl:"https://images.pexels.com/photos/4110251/pexels-photo-4110251.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Brown Rice",category:"pantry",imageUrl:"https://images.pexels.com/photos/4110377/pexels-photo-4110377.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Quinoa",category:"pantry",imageUrl:"https://images.pexels.com/photos/6740535/pexels-photo-6740535.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Oatmeal",category:"pantry",imageUrl:"https://images.pexels.com/photos/216951/pexels-photo-216951.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Bread Crumbs",category:"pantry",imageUrl:"https://images.pexels.com/photos/4110476/pexels-photo-4110476.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Canned Tomatoes",category:"pantry",imageUrl:"https://images.pexels.com/photos/5945755/pexels-photo-5945755.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Tomato Sauce",category:"pantry",imageUrl:"https://images.pexels.com/photos/4198012/pexels-photo-4198012.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Tomato Paste",category:"pantry",imageUrl:"https://images.pexels.com/photos/5945757/pexels-photo-5945757.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Black Beans",category:"pantry",imageUrl:"https://images.pexels.com/photos/4198019/pexels-photo-4198019.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Kidney Beans",category:"pantry",imageUrl:"https://images.pexels.com/photos/4198015/pexels-photo-4198015.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Chickpeas",category:"pantry",imageUrl:"https://images.pexels.com/photos/4198017/pexels-photo-4198017.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Canned Corn",category:"pantry",imageUrl:"https://images.pexels.com/photos/7469406/pexels-photo-7469406.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Canned Tuna",category:"pantry",imageUrl:"https://images.pexels.com/photos/5718026/pexels-photo-5718026.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Chicken Broth",category:"pantry",imageUrl:"https://images.pexels.com/photos/5938358/pexels-photo-5938358.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Vegetable Broth",category:"pantry",imageUrl:"https://images.pexels.com/photos/5938356/pexels-photo-5938356.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Coconut Milk (Canned)",category:"pantry",imageUrl:"https://images.pexels.com/photos/4202490/pexels-photo-4202490.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Olive Oil",category:"pantry",imageUrl:"https://images.pexels.com/photos/1022385/pexels-photo-1022385.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Vegetable Oil",category:"pantry",imageUrl:"https://images.pexels.com/photos/4202482/pexels-photo-4202482.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Coconut Oil",category:"pantry",imageUrl:"https://images.pexels.com/photos/4202486/pexels-photo-4202486.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Balsamic Vinegar",category:"pantry",imageUrl:"https://images.pexels.com/photos/4198037/pexels-photo-4198037.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Apple Cider Vinegar",category:"pantry",imageUrl:"https://images.pexels.com/photos/6957100/pexels-photo-6957100.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Soy Sauce",category:"pantry",imageUrl:"https://images.pexels.com/photos/4518578/pexels-photo-4518578.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"All-Purpose Flour",category:"pantry",imageUrl:"https://images.pexels.com/photos/5765/flour-powder-wheat-jar.jpg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Whole Wheat Flour",category:"pantry",imageUrl:"https://images.pexels.com/photos/4110256/pexels-photo-4110256.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Sugar",category:"pantry",imageUrl:"https://images.pexels.com/photos/2523650/pexels-photo-2523650.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Brown Sugar",category:"pantry",imageUrl:"https://images.pexels.com/photos/4110521/pexels-photo-4110521.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Powdered Sugar",category:"pantry",imageUrl:"https://images.pexels.com/photos/5946613/pexels-photo-5946613.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Baking Soda",category:"pantry",imageUrl:"https://images.pexels.com/photos/5946608/pexels-photo-5946608.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Baking Powder",category:"pantry",imageUrl:"https://images.pexels.com/photos/5946610/pexels-photo-5946610.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Vanilla Extract",category:"pantry",imageUrl:"https://images.pexels.com/photos/5946611/pexels-photo-5946611.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Cocoa Powder",category:"pantry",imageUrl:"https://images.pexels.com/photos/65882/chocolate-dark-coffee-confiserie-65882.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Chocolate Chips",category:"pantry",imageUrl:"https://images.pexels.com/photos/918327/pexels-photo-918327.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Yeast",category:"pantry",imageUrl:"https://images.pexels.com/photos/5946612/pexels-photo-5946612.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Honey",category:"pantry",imageUrl:"https://images.pexels.com/photos/302163/pexels-photo-302163.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Maple Syrup",category:"pantry",imageUrl:"https://images.pexels.com/photos/7474239/pexels-photo-7474239.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Peanut Butter",category:"pantry",imageUrl:"https://images.pexels.com/photos/5469076/pexels-photo-5469076.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Almond Butter",category:"pantry",imageUrl:"https://images.pexels.com/photos/5469079/pexels-photo-5469079.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Jam/Jelly",category:"pantry",imageUrl:"https://images.pexels.com/photos/1638927/pexels-photo-1638927.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Nutella",category:"pantry",imageUrl:"https://images.pexels.com/photos/4110533/pexels-photo-4110533.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Salt",category:"pantry",imageUrl:"https://images.pexels.com/photos/3296398/pexels-photo-3296398.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Black Pepper",category:"pantry",imageUrl:"https://images.pexels.com/photos/4198056/pexels-photo-4198056.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Garlic Powder",category:"pantry",imageUrl:"https://images.pexels.com/photos/4198051/pexels-photo-4198051.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Onion Powder",category:"pantry",imageUrl:"https://images.pexels.com/photos/4198053/pexels-photo-4198053.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Paprika",category:"pantry",imageUrl:"https://images.pexels.com/photos/4198054/pexels-photo-4198054.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Cumin",category:"pantry",imageUrl:"https://images.pexels.com/photos/4198060/pexels-photo-4198060.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Cinnamon",category:"pantry",imageUrl:"https://images.pexels.com/photos/4198055/pexels-photo-4198055.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Italian Seasoning",category:"pantry",imageUrl:"https://images.pexels.com/photos/4198057/pexels-photo-4198057.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Chili Powder",category:"pantry",imageUrl:"https://images.pexels.com/photos/4198059/pexels-photo-4198059.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Oregano",category:"pantry",imageUrl:"https://images.pexels.com/photos/4198062/pexels-photo-4198062.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Bay Leaves",category:"pantry",imageUrl:"https://images.pexels.com/photos/4198064/pexels-photo-4198064.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Ketchup",category:"pantry",imageUrl:"https://images.pexels.com/photos/5945565/pexels-photo-5945565.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Mustard",category:"pantry",imageUrl:"https://images.pexels.com/photos/5945566/pexels-photo-5945566.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Mayonnaise",category:"pantry",imageUrl:"https://images.pexels.com/photos/4397921/pexels-photo-4397921.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Hot Sauce",category:"pantry",imageUrl:"https://images.pexels.com/photos/4198048/pexels-photo-4198048.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"BBQ Sauce",category:"pantry",imageUrl:"https://images.pexels.com/photos/4198047/pexels-photo-4198047.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Worcestershire Sauce",category:"pantry",imageUrl:"https://images.pexels.com/photos/4198044/pexels-photo-4198044.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Almonds",category:"pantry",imageUrl:"https://images.pexels.com/photos/1013420/pexels-photo-1013420.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Walnuts",category:"pantry",imageUrl:"https://images.pexels.com/photos/4202493/pexels-photo-4202493.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Cashews",category:"pantry",imageUrl:"https://images.pexels.com/photos/4202491/pexels-photo-4202491.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Raisins",category:"pantry",imageUrl:"https://images.pexels.com/photos/4198033/pexels-photo-4198033.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Dried Cranberries",category:"pantry",imageUrl:"https://images.pexels.com/photos/4198031/pexels-photo-4198031.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Cereal",category:"pantry",imageUrl:"https://images.pexels.com/photos/135525/pexels-photo-135525.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Granola",category:"pantry",imageUrl:"https://images.pexels.com/photos/3872433/pexels-photo-3872433.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Crackers",category:"pantry",imageUrl:"https://images.pexels.com/photos/4110452/pexels-photo-4110452.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Tortilla Chips",category:"pantry",imageUrl:"https://images.pexels.com/photos/5737254/pexels-photo-5737254.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Popcorn",category:"pantry",imageUrl:"https://images.pexels.com/photos/33129/popcorn-movie-party-entertainment.jpg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Coffee",category:"pantry",imageUrl:"https://images.pexels.com/photos/585753/pexels-photo-585753.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Tea",category:"pantry",imageUrl:"https://images.pexels.com/photos/227908/pexels-photo-227908.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Hot Chocolate Mix",category:"pantry",imageUrl:"https://images.pexels.com/photos/5946618/pexels-photo-5946618.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1}];var cw=[{name:"Diapers (Newborn)",category:"baby",imageUrl:"https://placehold.co/200x200/E6E6FA/555555?text=Newborn+Diapers",isInCart:!1,isChecked:!1},{name:"Diapers (Size 1)",category:"baby",imageUrl:"https://placehold.co/200x200/E6E6FA/555555?text=Size+1+Diapers",isInCart:!1,isChecked:!1},{name:"Diapers (Size 2)",category:"baby",imageUrl:"https://placehold.co/200x200/E6E6FA/555555?text=Size+2+Diapers",isInCart:!1,isChecked:!1},{name:"Diapers (Size 3)",category:"baby",imageUrl:"https://placehold.co/200x200/E6E6FA/555555?text=Size+3+Diapers",isInCart:!1,isChecked:!1},{name:"Baby Wipes",category:"baby",imageUrl:"https://placehold.co/200x200/F0FFFF/555555?text=Baby+Wipes",isInCart:!1,isChecked:!1},{name:"Diaper Rash Cream",category:"baby",imageUrl:"https://images.pexels.com/photos/6941883/pexels-photo-6941883.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Diaper Disposal Bags",category:"baby",imageUrl:"https://images.pexels.com/photos/4239013/pexels-photo-4239013.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Baby Formula",category:"baby",imageUrl:"https://images.pexels.com/photos/6941096/pexels-photo-6941096.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Baby Cereal",category:"baby",imageUrl:"https://images.pexels.com/photos/6941098/pexels-photo-6941098.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Baby Food Pouches",category:"baby",imageUrl:"https://images.pexels.com/photos/6941099/pexels-photo-6941099.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Baby Food Jars",category:"baby",imageUrl:"https://images.pexels.com/photos/6941100/pexels-photo-6941100.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Baby Snacks",category:"baby",imageUrl:"https://images.pexels.com/photos/6941101/pexels-photo-6941101.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Baby Puffs",category:"baby",imageUrl:"https://images.pexels.com/photos/6941102/pexels-photo-6941102.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Teething Biscuits",category:"baby",imageUrl:"https://images.pexels.com/photos/6941103/pexels-photo-6941103.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Baby Water",category:"baby",imageUrl:"https://images.pexels.com/photos/1000084/pexels-photo-1000084.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Baby Bottles",category:"baby",imageUrl:"https://placehold.co/200x200/FFFACD/555555?text=Baby+Bottles",isInCart:!1,isChecked:!1},{name:"Bottle Nipples",category:"baby",imageUrl:"https://placehold.co/200x200/FFFACD/555555?text=Bottle+Nipples",isInCart:!1,isChecked:!1},{name:"Sippy Cups",category:"baby",imageUrl:"https://images.pexels.com/photos/3663068/pexels-photo-3663068.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Baby Spoons",category:"baby",imageUrl:"https://images.pexels.com/photos/6941885/pexels-photo-6941885.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Baby Bowls",category:"baby",imageUrl:"https://images.pexels.com/photos/6941886/pexels-photo-6941886.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Baby Bibs",category:"baby",imageUrl:"https://placehold.co/200x200/FFE4E1/555555?text=Baby+Bibs",isInCart:!1,isChecked:!1},{name:"Bottle Brush",category:"baby",imageUrl:"https://images.pexels.com/photos/6941887/pexels-photo-6941887.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Bottle Sterilizer",category:"baby",imageUrl:"https://images.pexels.com/photos/6941888/pexels-photo-6941888.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Baby Shampoo",category:"baby",imageUrl:"https://images.pexels.com/photos/3993398/pexels-photo-3993398.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Baby Body Wash",category:"baby",imageUrl:"https://images.pexels.com/photos/3993399/pexels-photo-3993399.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Baby Lotion",category:"baby",imageUrl:"https://images.pexels.com/photos/6941889/pexels-photo-6941889.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Baby Oil",category:"baby",imageUrl:"https://images.pexels.com/photos/6941890/pexels-photo-6941890.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Baby Powder",category:"baby",imageUrl:"https://images.pexels.com/photos/6941891/pexels-photo-6941891.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Baby Sunscreen",category:"baby",imageUrl:"https://images.pexels.com/photos/6941892/pexels-photo-6941892.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Baby Nail Clippers",category:"baby",imageUrl:"https://images.pexels.com/photos/6941893/pexels-photo-6941893.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Baby Thermometer",category:"baby",imageUrl:"https://images.pexels.com/photos/6941894/pexels-photo-6941894.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Nasal Aspirator",category:"baby",imageUrl:"https://images.pexels.com/photos/6941895/pexels-photo-6941895.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Baby Cotton Balls",category:"baby",imageUrl:"https://images.pexels.com/photos/4465124/pexels-photo-4465124.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Baby Q-Tips",category:"baby",imageUrl:"https://images.pexels.com/photos/4465125/pexels-photo-4465125.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Baby Tylenol",category:"baby",imageUrl:"https://images.pexels.com/photos/6941900/pexels-photo-6941900.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Baby Ibuprofen",category:"baby",imageUrl:"https://images.pexels.com/photos/6941901/pexels-photo-6941901.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Gripe Water",category:"baby",imageUrl:"https://images.pexels.com/photos/6941902/pexels-photo-6941902.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Gas Drops",category:"baby",imageUrl:"https://images.pexels.com/photos/6941903/pexels-photo-6941903.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Teething Gel",category:"baby",imageUrl:"https://images.pexels.com/photos/6941904/pexels-photo-6941904.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Saline Drops",category:"baby",imageUrl:"https://images.pexels.com/photos/6941905/pexels-photo-6941905.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Vitamin D Drops",category:"baby",imageUrl:"https://images.pexels.com/photos/6941906/pexels-photo-6941906.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Pacifiers",category:"baby",imageUrl:"https://placehold.co/200x200/FFB6C1/555555?text=Pacifiers",isInCart:!1,isChecked:!1},{name:"Teething Toys",category:"baby",imageUrl:"https://placehold.co/200x200/FFB6C1/555555?text=Teething+Toys",isInCart:!1,isChecked:!1},{name:"Baby Blanket",category:"baby",imageUrl:"https://placehold.co/200x200/FFE4E1/555555?text=Baby+Blanket",isInCart:!1,isChecked:!1},{name:"Swaddle Wrap",category:"baby",imageUrl:"https://placehold.co/200x200/FFE4E1/555555?text=Swaddle+Wrap",isInCart:!1,isChecked:!1},{name:"Burp Cloths",category:"baby",imageUrl:"https://placehold.co/200x200/FFE4E1/555555?text=Burp+Cloths",isInCart:!1,isChecked:!1},{name:"Baby Detergent",category:"baby",imageUrl:"https://images.pexels.com/photos/4239091/pexels-photo-4239091.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Stain Remover",category:"baby",imageUrl:"https://images.pexels.com/photos/4239092/pexels-photo-4239092.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Fabric Softener",category:"baby",imageUrl:"https://images.pexels.com/photos/4239093/pexels-photo-4239093.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1}];var lw=[{name:"All-Purpose Cleaner",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4239035/pexels-photo-4239035.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Glass Cleaner",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4239036/pexels-photo-4239036.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Disinfectant Spray",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4239091/pexels-photo-4239091.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Bleach",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4239013/pexels-photo-4239013.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Floor Cleaner",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4108715/pexels-photo-4108715.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Bathroom Cleaner",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4239037/pexels-photo-4239037.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Toilet Bowl Cleaner",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4239038/pexels-photo-4239038.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Tile & Grout Cleaner",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4108714/pexels-photo-4108714.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Oven Cleaner",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4239039/pexels-photo-4239039.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Stainless Steel Cleaner",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4239040/pexels-photo-4239040.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Laundry Detergent",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4239091/pexels-photo-4239091.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Fabric Softener",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4239092/pexels-photo-4239092.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Stain Remover",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4239093/pexels-photo-4239093.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Dryer Sheets",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4239094/pexels-photo-4239094.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Bleach Alternative",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4239095/pexels-photo-4239095.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Dish Soap",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4239031/pexels-photo-4239031.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Dishwasher Detergent",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4239032/pexels-photo-4239032.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Dishwasher Rinse Aid",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4239033/pexels-photo-4239033.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Dish Sponges",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4239015/pexels-photo-4239015.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Steel Wool Pads",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4239016/pexels-photo-4239016.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Broom",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4108716/pexels-photo-4108716.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Dustpan",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4108717/pexels-photo-4108717.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Mop",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4108718/pexels-photo-4108718.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Mop Bucket",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4108719/pexels-photo-4108719.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Duster",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4108720/pexels-photo-4108720.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Microfiber Cloths",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4239017/pexels-photo-4239017.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Cleaning Rags",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4239018/pexels-photo-4239018.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Scrub Brush",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4239019/pexels-photo-4239019.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Toilet Brush",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4239020/pexels-photo-4239020.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Rubber Gloves",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4239021/pexels-photo-4239021.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Trash Bags (Small)",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4239022/pexels-photo-4239022.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Trash Bags (Large)",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4239023/pexels-photo-4239023.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Recycling Bags",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4239024/pexels-photo-4239024.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Paper Towels",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4239025/pexels-photo-4239025.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Toilet Paper",category:"cleaning",imageUrl:"https://images.pexels.com/photos/3958210/pexels-photo-3958210.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Facial Tissues",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4239026/pexels-photo-4239026.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Napkins",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4239027/pexels-photo-4239027.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Air Freshener Spray",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4239028/pexels-photo-4239028.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Plug-in Air Freshener",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4239029/pexels-photo-4239029.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Scented Candles",category:"cleaning",imageUrl:"https://images.pexels.com/photos/3270223/pexels-photo-3270223.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Carpet Cleaner",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4108713/pexels-photo-4108713.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Furniture Polish",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4239041/pexels-photo-4239041.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Wood Cleaner",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4239042/pexels-photo-4239042.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Drain Cleaner",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4239043/pexels-photo-4239043.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Hand Sanitizer",category:"cleaning",imageUrl:"https://images.pexels.com/photos/3987142/pexels-photo-3987142.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Disinfecting Wipes",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4239010/pexels-photo-4239010.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1}];var th=class n{userService=j(Or);firestore;GROCERIES_COLLECTION="groceries";CATEGORIES_COLLECTION="categories";HISTORY_COLLECTION="shopping_history";unsubGroceries=null;unsubCategories=null;groceriesSignal=be([]);categoriesSignal=be([...ro]);searchQuerySignal=be("");selectedCategorySignal=be("all");sortBySignal=be("name");isLoadingSignal=be(!0);errorSignal=be(null);isSeededSignal=be(!1);hasMigratedThisSession=!1;groceriesSubject=new ft([]);categoriesSubject=new ft([...ro]);groceries$=this.groceriesSubject.asObservable();categories$=this.categoriesSubject.asObservable();categories=st(()=>this.categoriesSignal());categoryIds=st(()=>this.categoriesSignal().map(e=>e.id));isLoading=st(()=>this.isLoadingSignal());groceries=st(()=>{let e=this.groceriesSignal(),t=this.searchQuerySignal().toLowerCase(),r=this.selectedCategorySignal(),i=this.sortBySignal();return t&&(e=e.filter(s=>s.name.toLowerCase().includes(t))),r==="cart"?e=e.filter(s=>s.isInCart):r!=="all"&&(e=e.filter(s=>s.category===r)),e=[...e].sort((s,o)=>{switch(i){case"name":return s.name.localeCompare(o.name);case"category":return s.category.localeCompare(o.category);case"date":return new Date(o.createdAt).getTime()-new Date(s.createdAt).getTime();default:return 0}}),e});cartItems=st(()=>this.groceriesSignal().filter(e=>e.isInCart));checkedItems=st(()=>this.cartItems().filter(e=>e.isChecked));uncheckedItems=st(()=>this.cartItems().filter(e=>!e.isChecked));searchQuery=st(()=>this.searchQuerySignal());selectedCategory=st(()=>this.selectedCategorySignal());sortBy=st(()=>this.sortBySignal());error=st(()=>this.errorSignal());groceriesByCategory=st(()=>{let e=this.groceries(),t=this.categoriesSignal(),r={};return t.forEach(i=>{r[i.id]=[]}),e.forEach(i=>{r[i.category]?r[i.category].push(i):r.other&&r.other.push(i)}),r});constructor(){let e=sp(Qd.firebase);this.firestore=Y_(e),xi(()=>{let t=this.userService.currentUser();this.cleanupSubscriptions(),this.hasMigratedThisSession=!1,t&&t.userId?(console.log("\u{1F4E6} Loading groceries for user:",t.userId),this.initializeFirestoreListeners(t.userId)):(console.log("\u{1F512} No user logged in - clearing grocery data"),this.groceriesSignal.set([]),this.groceriesSubject.next([]),this.categoriesSignal.set([...ro]),this.categoriesSubject.next([...ro]),this.isLoadingSignal.set(!1))})}getCurrentUserId(){return this.userService.currentUser()?.userId||""}cleanupSubscriptions(){this.unsubGroceries&&(this.unsubGroceries(),this.unsubGroceries=null),this.unsubCategories&&(this.unsubCategories(),this.unsubCategories=null)}initializeFirestoreListeners(e){if(!e)return;this.isLoadingSignal.set(!0);let t=Vp(Op(this.firestore,this.GROCERIES_COLLECTION),Lp("userId","==",e));this.unsubGroceries=Up(t,i=>{let s=i.docs.map(o=>{let a=o.data();return oe(B({id:o.id},a),{createdAt:a.createdAt?.toDate?a.createdAt.toDate():new Date(a.createdAt),updatedAt:a.updatedAt?.toDate?a.updatedAt.toDate():new Date(a.updatedAt)})});this.groceriesSignal.set(s),this.groceriesSubject.next(s),this.isLoadingSignal.set(!1),s.length===0&&!this.isSeededSignal()?this.seedInitialData$(e).subscribe():this.checkAndMigrateData(e,s)},i=>{console.error("Error loading groceries:",i),this.errorSignal.set(i.message),this.isLoadingSignal.set(!1)});let r=Vp(Op(this.firestore,this.CATEGORIES_COLLECTION),Lp("userId","in",[e,"system"]));this.unsubCategories=Up(r,i=>{if(i.docs.length>0){let s=i.docs.map(a=>oe(B({id:a.id},a.data()),{createdAt:a.data().createdAt?.toDate?a.data().createdAt.toDate():new Date}));s.sort((a,c)=>a.name.localeCompare(c.name));let o=ro.filter(a=>!s.some(c=>c.id===a.id));if(o.length>0){o.forEach(c=>this.saveCategoryToFirestore$(c).subscribe());let a=[...s,...o];this.categoriesSignal.set(a),this.categoriesSubject.next(a)}else this.categoriesSignal.set(s),this.categoriesSubject.next(s)}else ro.forEach(s=>this.saveCategoryToFirestore$(s).subscribe()),this.categoriesSignal.set([...ro]),this.categoriesSubject.next([...ro])},i=>{console.error("Error loading categories:",i)})}seedInitialData$(e){if(this.isSeededSignal())return le(void 0);this.isSeededSignal.set(!0),console.log("Seeding initial grocery data for user:",e);let t=[...sw,...ow,...aw,...cw,...lw],r=t.map(i=>this.create$(i));return No(r).pipe(mt(()=>console.log(`Seeded ${t.length} grocery items for user ${e}`)),_e(()=>{}))}saveCategoryToFirestore$(e){let t=Wt(this.firestore,this.CATEGORIES_COLLECTION,e.id);return ke(zs(t,oe(B({},e),{createdAt:e.createdAt})))}createCategory$(e){let t=this.getCurrentUserId();if(!t)return _i(()=>new Error("User must be logged in to create categories"));let r=oe(B({},e),{id:this.generateCategoryId(e.name),userId:t,isDefault:!1,createdAt:new Date});return this.saveCategoryToFirestore$(r).pipe(_e(()=>r))}async createCategory(e){let t=this.getCurrentUserId();if(!t)throw new Error("User must be logged in to create categories");let r=oe(B({},e),{id:this.generateCategoryId(e.name),userId:t,isDefault:!1,createdAt:new Date});return await this.saveCategoryToFirestore$(r).toPromise(),r}getCategory(e){return this.categoriesSignal().find(t=>t.id===e)}updateCategory$(e,t){let r=this.getCategory(e);if(!r||r.isDefault)return le(void 0);let i=Wt(this.firestore,this.CATEGORIES_COLLECTION,e);return ke(_a(i,t)).pipe(_e(()=>B(B({},r),t)))}async updateCategory(e,t){let r=this.getCategory(e);if(!r||r.isDefault)return;let i=Wt(this.firestore,this.CATEGORIES_COLLECTION,e);return await _a(i,t),B(B({},r),t)}deleteCategory(e){let t=this.getCategory(e);if(!t)return{success:!1,error:"Category not found"};if(t.isDefault)return{success:!1,error:"Cannot delete default categories"};let r=this.groceriesSignal().filter(s=>s.category===e);if(r.length>0)return{success:!1,error:`Cannot delete category "${t.name}" because it has ${r.length} item(s). Please move or delete the items first.`};let i=Wt(this.firestore,this.CATEGORIES_COLLECTION,e);return rl(i),{success:!0}}getItemCountInCategory(e){return this.groceriesSignal().filter(t=>t.category===e).length}getCategoryLabel(e){return this.getCategory(e)?.name||e}getCategoryIcon(e){return this.getCategory(e)?.icon||"category"}getCategoryColor(e){return this.getCategory(e)?.color||"text-slate-400"}setSearchQuery(e){this.searchQuerySignal.set(e)}setCategory(e){this.selectedCategorySignal.set(e)}setSortBy(e){this.sortBySignal.set(e)}create$(e){let t=this.getCurrentUserId();if(!t)return _i(()=>new Error("User must be logged in to create items"));let r=oe(B({},e),{id:this.generateId(),userId:t,createdAt:new Date,updatedAt:new Date}),i=Wt(this.firestore,this.GROCERIES_COLLECTION,r.id);return ke(zs(i,r)).pipe(_e(()=>r))}async create(e){let t=this.getCurrentUserId();if(!t)throw new Error("User must be logged in to create items");let r=oe(B({},e),{id:this.generateId(),userId:t,createdAt:new Date,updatedAt:new Date}),i=Wt(this.firestore,this.GROCERIES_COLLECTION,r.id);return await zs(i,r),r}update$(e,t){let r=this.groceriesSignal().find(s=>s.id===e);if(!r)return le(void 0);let i=Wt(this.firestore,this.GROCERIES_COLLECTION,e);return ke(_a(i,oe(B({},t),{updatedAt:new Date}))).pipe(_e(()=>oe(B(B({},r),t),{updatedAt:new Date})))}async update(e,t){let r=this.groceriesSignal().find(s=>s.id===e);if(!r)return;let i=Wt(this.firestore,this.GROCERIES_COLLECTION,e);return await _a(i,oe(B({},t),{updatedAt:new Date})),oe(B(B({},r),t),{updatedAt:new Date})}delete$(e){let t=Wt(this.firestore,this.GROCERIES_COLLECTION,e);return ke(rl(t)).pipe(_e(()=>!0))}async delete(e){let t=Wt(this.firestore,this.GROCERIES_COLLECTION,e);return await rl(t),!0}getById(e){return this.groceriesSignal().find(t=>t.id===e)}addToCart$(e){return this.update$(e,{isInCart:!0}).pipe(_e(()=>{}))}async addToCart(e){await this.update(e,{isInCart:!0})}removeFromCart$(e){return this.update$(e,{isInCart:!1,isChecked:!1}).pipe(_e(()=>{}))}async removeFromCart(e){await this.update(e,{isInCart:!1,isChecked:!1})}toggleChecked$(e){let t=this.getById(e);return t?this.update$(e,{isChecked:!t.isChecked}).pipe(_e(()=>{})):le(void 0)}async toggleChecked(e){let t=this.getById(e);t&&await this.update(e,{isChecked:!t.isChecked})}clearCart$(){let e=this.cartItems();if(e.length===0)return le(void 0);let t=e.map(r=>this.update$(r.id,{isInCart:!1,isChecked:!1}));return No(t).pipe(_e(()=>{}))}async clearCart(){let t=this.cartItems().map(r=>this.update(r.id,{isInCart:!1,isChecked:!1}));await Promise.all(t)}resetToSeedData$(){let t=this.groceriesSignal().map(r=>this.delete$(r.id));return No(t).pipe(mt(()=>this.isSeededSignal.set(!1)),_e(()=>{}))}async resetToSeedData(){let t=this.groceriesSignal().map(r=>this.delete(r.id));await Promise.all(t),this.isSeededSignal.set(!1)}saveToHistory$(){let e=this.getCurrentUserId();if(!e)return le(void 0);let t=this.cartItems();if(t.length===0)return le(void 0);let r=`history_${Date.now()}`,i=Wt(this.firestore,this.HISTORY_COLLECTION,r),s={id:r,userId:e,date:new Date,itemCount:t.length,items:t.map(o=>({id:o.id,name:o.name,category:o.category,checked:o.isChecked})),completed:!0};return ke(zs(i,s))}async saveToHistory(){let e=this.getCurrentUserId();if(!e)return;let t=this.cartItems();if(t.length===0)return;let r=`history_${Date.now()}`,i=Wt(this.firestore,this.HISTORY_COLLECTION,r),s={id:r,userId:e,date:new Date,itemCount:t.length,items:t.map(o=>({id:o.id,name:o.name,category:o.category,checked:o.isChecked})),completed:!0};await zs(i,s)}generateId(){return`grocery_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}generateCategoryId(e){return`cat_${e.toLowerCase().replace(/\s+/g,"_")}_${Date.now()}`}checkAndMigrateData(e,t){if(this.hasMigratedThisSession)return;let r="v15";localStorage.getItem(`homeneeds_seed_version_${e}`)!==r&&(console.log(`Migrating data to ${r} for user ${e}...`),this.hasMigratedThisSession=!0,this.migrateMissingSeedData$(t).subscribe(()=>{localStorage.setItem(`homeneeds_seed_version_${e}`,r)}))}migrateMissingSeedData$(e){console.log("Checking for missing seed items...");let t=e??this.groceriesSignal();console.log(`Current items count: ${t.length}`);let r=[...sw,...ow,...aw,...cw,...lw];console.log(`Total seed data count: ${r.length}`);let i=r.filter(s=>!t.some(o=>o.name===s.name));if(i.length>0){console.log(`Adding ${i.length} missing items...`),console.log("Missing items:",i.map(o=>o.name).join(", "));let s=i.map(o=>this.create$(o));return No(s).pipe(mt(()=>console.log(`\u2705 Successfully added ${i.length} items`)),_e(()=>{}))}else return console.log("All seed items are present."),le(void 0)}async migrateMissingSeedData(e){console.log("Checking for missing seed items...");let t=e??this.groceriesSignal();console.log(`Current items count: ${t.length}`);let r=[...sw,...ow,...aw,...cw,...lw];console.log(`Total seed data count: ${r.length}`);let i=r.filter(s=>!t.some(o=>o.name===s.name));i.length>0?(console.log(`Adding ${i.length} missing items...`),console.log("Missing items:",i.map(s=>s.name).join(", ")),await Promise.all(i.map(s=>this.create(s))),console.log(`\u2705 Successfully added ${i.length} items`)):console.log("All seed items are present.")}ngOnDestroy(){this.cleanupSubscriptions()}static \u0275fac=function(t){return new(t||n)};static \u0275prov=se({token:n,factory:n.\u0275fac,providedIn:"root"})};var dw=(n,e)=>e.id;function yZ(n,e){if(n&1&&Ot(0,"img",38),n&2){let t=$().$implicit;Ue("src",t.imageUrl,Xn)}}function vZ(n,e){if(n&1&&(x(0,"span",40)(1,"span",46),N(2,"alarm"),R(),N(3),ff(4,"date"),R()),n&2){let t=$().$implicit;V(3),ct(" ",pf(4,1,t.dueDate,"MMM d, h:mm a")," ")}}function _Z(n,e){if(n&1&&(x(0,"div",48),N(1),R()),n&2){let t=e;it(t.color),Ue("title","Assigned to "+t.name),V(),ct(" ",t.initial," ")}}function wZ(n,e){if(n&1&&ue(0,_Z,2,4,"div",47),n&2){let t,r=$(4);de((t=r.getAssigneeById(e))?0:-1,t)}}function IZ(n,e){if(n&1&&(x(0,"span",41),N(1),R()),n&2){let t=$().$implicit;V(),Pe(t.description)}}function EZ(n,e){if(n&1){let t=je();x(0,"div",31)(1,"span",32),N(2,"drag_indicator"),R(),x(3,"label",33)(4,"input",34),Q("change",function(){let i=X(t).$implicit,s=$(3);return Z(s.toggleComplete(i))}),R(),x(5,"span",35),N(6,"check"),R()(),x(7,"div",36),Q("click",function(){let i=X(t).$implicit,s=$(3);return Z(s.edit(i))}),x(8,"div",37),ue(9,yZ,1,1,"img",38),x(10,"span",39),N(11),R(),ue(12,vZ,5,4,"span",40),ue(13,wZ,1,1),R(),ue(14,IZ,2,1,"span",41),R(),x(15,"div",42)(16,"button",43),Q("click",function(){let i=X(t).$implicit,s=$(3);return Z(s.edit(i))}),x(17,"span",44),N(18,"edit"),R()(),x(19,"button",45),Q("click",function(){let i=X(t).$implicit,s=$(3);return Z(s.delete(i.id))}),x(20,"span",44),N(21,"delete"),R()()()()}if(n&2){let t,r=e.$implicit;Mn("opacity-50",r.isCompleted),V(4),Ue("checked",r.isCompleted),V(5),de(r.imageUrl?9:-1),V(),Mn("line-through",r.isCompleted)("text-slate-500",r.isCompleted),V(),ct(" ",r.title," "),V(),de(r.dueDate?12:-1),V(),de((t=r.assigneeId)?13:-1,t),V(),de(r.description?14:-1)}}function bZ(n,e){if(n&1&&(x(0,"section",24)(1,"div",25)(2,"h3",26),Ot(3,"span",27),N(4),R(),x(5,"span",28),N(6),R()(),x(7,"div",29),Ct(8,EZ,22,12,"div",30,dw),R()()),n&2){let t=$().$implicit,r=$();Ue("id","section-"+t.id),V(3),it(t.color),V(),ct(" ",t.label," "),V(),it(t.color+" "+t.textColor+" bg-opacity-10"),V(),ct(" ",r.groupedTasks()[t.id].length," Items "),V(2),Tt(r.groupedTasks()[t.id])}}function CZ(n,e){if(n&1&&ue(0,bZ,10,7,"section",24),n&2){let t=e.$implicit,r=$();de(r.groupedTasks()[t.id]&&r.groupedTasks()[t.id].length>0?0:-1)}}function TZ(n,e){n&1&&(x(0,"div",20)(1,"span",49),N(2,"task_alt"),R(),x(3,"h3",50),N(4,"All caught up!"),R(),x(5,"p",51),N(6,"Create a task to get started."),R()())}function SZ(n,e){n&1&&(x(0,"span",77),N(1,"check"),R())}function DZ(n,e){if(n&1){let t=je();x(0,"button",75),Q("click",function(){let i=X(t).$implicit,s=$(3);return Z(s.selectCategory(i.id))}),Ot(1,"span",76),N(2),ue(3,SZ,2,0,"span",77),R()}if(n&2){let t=e.$implicit,r=$(3);V(),it(t.color),V(),ct(" ",t.label," "),V(),de(r.taskCategory===t.id?3:-1)}}function AZ(n,e){if(n&1&&(x(0,"div",63),Ct(1,DZ,4,4,"button",74,dw),R()),n&2){let t=$(2);V(),Tt(t.categories)}}function xZ(n,e){if(n&1&&(x(0,"option",69),N(1),R()),n&2){let t=e.$implicit;Ue("value",t.id),V(),Pe(t.name)}}function RZ(n,e){if(n&1){let t=je();x(0,"div",23)(1,"div",52)(2,"div",53)(3,"h3",54),N(4),R(),x(5,"button",55),Q("click",function(){X(t);let i=$();return Z(i.toggleAddModal(!1))}),x(6,"span",56),N(7,"close"),R()()(),x(8,"div",57)(9,"div")(10,"label",58),N(11,"Task Title"),R(),x(12,"input",59),dn("ngModelChange",function(i){X(t);let s=$();return gn(s.taskTitle,i)||(s.taskTitle=i),Z(i)}),R()(),x(13,"div")(14,"label",58),N(15,"Category"),R(),x(16,"div",60)(17,"button",61),Q("click",function(){X(t);let i=$();return Z(i.toggleCategoryDropdown())}),x(18,"span"),N(19),R(),x(20,"span",62),N(21,"expand_more"),R()(),ue(22,AZ,3,0,"div",63),R()(),x(23,"div")(24,"div",64)(25,"label",65),N(26,"Assignee"),R(),x(27,"button",66),Q("click",function(){X(t);let i=$();return Z(i.openManageAssignees())}),N(28,"Manage"),R()(),x(29,"select",67),dn("ngModelChange",function(i){X(t);let s=$();return gn(s.taskAssigneeId,i)||(s.taskAssigneeId=i),Z(i)}),x(30,"option",68),N(31,"Unassigned"),R(),Ct(32,xZ,2,2,"option",69,dw),R()(),x(34,"div")(35,"label",58),N(36,"Due Date"),R(),x(37,"input",70),dn("ngModelChange",function(i){X(t);let s=$();return gn(s.taskDueDate,i)||(s.taskDueDate=i),Z(i)}),R()()(),x(38,"div",71)(39,"button",72),Q("click",function(){X(t);let i=$();return Z(i.toggleAddModal(!1))}),N(40,"Cancel"),R(),x(41,"button",73),Q("click",function(){X(t);let i=$();return Z(i.saveTask())}),N(42,"Save Task"),R()()()()}if(n&2){let t=$();V(4),Pe(t.editingTask?"Edit Task":"New Task"),V(8),un("ngModel",t.taskTitle),V(7),Pe(t.getSelectedCategoryLabel()),V(3),de(t.showCategoryDropdown?22:-1),V(7),un("ngModel",t.taskAssigneeId),V(3),Tt(t.assignees()),V(5),un("ngModel",t.taskDueDate)}}function kZ(n,e){if(n&1){let t=je();x(0,"app-assignee-management",78),Q("close",function(){X(t);let i=$();return Z(i.closeAssigneeModal())}),R()}}var uw=class n{overviewService=j(ts);dialogService=j(Fr);assigneeService=j(eh);groceryService=j(th);tasks=this.overviewService.tasks;assignees=this.assigneeService.assignees;categories=k4;assigneeColors=fg;groupedTasks=st(()=>{let e=this.tasks(),t={};return this.categories.forEach(r=>t[r.id]=[]),t.other=[],e.forEach(r=>{let i=r.category;t[i]?t[i].push(r):t.other.push(r)}),t});totalPending=st(()=>this.tasks().filter(e=>!e.isCompleted).length);activeCategoriesCount=st(()=>{let e=this.groupedTasks();return Object.values(e).filter(t=>t.length>0).length});showAddModal=!1;editingTask=null;taskTitle="";taskCategory="groceries";taskDueDate="";taskAssigneeId="";showCategoryDropdown=!1;showAssigneeModal=!1;constructor(){}toggleAddModal(e){this.showAddModal=e,e||this.resetForm()}resetForm(){this.editingTask=null,this.taskTitle="",this.taskCategory="groceries",this.taskDueDate="",this.taskAssigneeId="",this.showCategoryDropdown=!1}toggleCategoryDropdown(){this.showCategoryDropdown=!this.showCategoryDropdown}selectCategory(e){this.taskCategory=e,this.showCategoryDropdown=!1}getSelectedCategoryLabel(){return this.categories.find(e=>e.id===this.taskCategory)?.label||"Select Category"}async saveTask(){if(!this.taskTitle.trim())return;let e={title:this.taskTitle,category:this.taskCategory,assigneeId:this.taskAssigneeId||void 0,isCompleted:!1,dueDate:this.taskDueDate?new Date(this.taskDueDate):null};this.editingTask?await this.overviewService.updateTask(this.editingTask.id,{title:this.taskTitle,category:this.taskCategory,assigneeId:this.taskAssigneeId||void 0,dueDate:this.taskDueDate?new Date(this.taskDueDate):null}):await this.overviewService.createTask(e),this.toggleAddModal(!1)}async toggleComplete(e){let t=!e.isCompleted;if(await this.overviewService.updateTask(e.id,{isCompleted:t}),t&&e.category==="groceries"){let r=this.groceryService.groceries().find(i=>i.name===e.title);r&&r.isInCart&&await this.groceryService.update(r.id,{isInCart:!1,isChecked:!1})}}async delete(e){if(await this.dialogService.confirm("Delete this task?","Delete Task")){let t=this.tasks().find(r=>r.id===e);if(await this.overviewService.deleteTask(e),t&&t.category==="groceries"){let r=this.groceryService.groceries().find(i=>i.name===t.title);r&&r.isInCart&&await this.groceryService.update(r.id,{isInCart:!1,isChecked:!1})}}}edit(e){this.editingTask=e,this.taskTitle=e.title,this.taskCategory=e.category,this.taskAssigneeId=e.assigneeId||"",this.taskDueDate=e.dueDate?new Date(e.dueDate.getTime()-e.dueDate.getTimezoneOffset()*6e4).toISOString().slice(0,16):"",this.showAddModal=!0}openManageAssignees(){this.showAssigneeModal=!0}closeAssigneeModal(){this.showAssigneeModal=!1}getAssigneeById(e){if(e)return this.assignees().find(t=>t.id===e)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=$n({type:n,selectors:[["app-overview"]],hostAttrs:[1,"flex-1","h-screen","flex","flex-col","overflow-hidden"],decls:39,vars:5,consts:[["id","overview-page",1,"flex-1","flex","flex-col","h-screen","overflow-y-auto","relative","bg-slate-50","dark:bg-background-dark"],[1,"px-8","pt-8","pb-4","w-full","z-10","flex","flex-col","gap-4","sticky","top-0","bg-slate-50/90","dark:bg-background-dark/90","backdrop-blur-sm"],[1,"flex","flex-col","w-full","group"],[1,"flex","w-full","items-center","rounded-full","h-14","bg-white","dark:bg-surface-dark","shadow-sm","border","border-slate-200","dark:border-border-dark","focus-within:border-primary","focus-within:ring-1","focus-within:ring-primary","transition-all","duration-300","px-6"],[1,"material-symbols-outlined","text-slate-400","dark:text-text-muted","group-focus-within:text-primary","transition-colors"],["id","overview-search-input","placeholder","Search for items to buy, fix, or clean...",1,"w-full","bg-transparent","border-none","focus:ring-0","text-base","font-medium","text-slate-900","dark:text-white","placeholder:text-slate-400","dark:placeholder:text-text-muted-darker","ml-3"],[1,"bg-primary","hover:bg-primary-hover","text-slate-900","p-2","rounded-full","transition-colors","flex","items-center","justify-center",3,"click"],[1,"material-symbols-outlined","text-[20px]","font-bold"],[1,"flex","items-center","gap-3","px-2"],[1,"text-xs","uppercase","font-bold","text-slate-500","dark:text-text-muted","tracking-wider"],["id","filter-chips",1,"flex","gap-2","text-slate-600","dark:text-slate-400","text-sm"],[1,"px-3","py-1","bg-white","dark:bg-surface-dark","rounded-full","border","border-slate-200","dark:border-border-dark","cursor-pointer","hover:border-primary"],[1,"flex-1","overflow-y-auto","px-8","pb-20","scroll-smooth"],[1,"w-full","flex","flex-col","gap-10"],[1,"flex","flex-wrap","justify-between","items-end","gap-4","mt-4","border-b","border-border-dark","pb-6"],[1,"text-4xl","font-black","text-slate-900","dark:text-white","tracking-tight","mb-2"],[1,"text-slate-500","dark:text-text-muted"],[1,"flex","gap-3"],[1,"flex","items-center","gap-2","px-5","py-2.5","rounded-full","bg-primary","text-slate-900","font-bold","text-sm","hover:bg-primary-hover","transition-colors","shadow-lg","shadow-primary/20",3,"click"],[1,"material-symbols-outlined","text-sm"],[1,"text-center","py-20","animate-in","fade-in","zoom-in-50","duration-500"],[1,"absolute","bottom-10","right-10","w-16","h-16","bg-primary","hover:bg-primary-hover","rounded-full","shadow-2xl","shadow-primary/20","text-slate-900","flex","items-center","justify-center","transition-transform","hover:scale-105","active:scale-95","z-40",3,"click"],[1,"material-symbols-outlined",2,"font-size","32px"],[1,"fixed","inset-0","z-50","flex","items-center","justify-center","p-4","bg-black/50","backdrop-blur-sm","animate-in","fade-in","duration-200"],[3,"id"],[1,"flex","items-center","justify-between","mb-5"],[1,"text-2xl","font-bold","text-slate-900","dark:text-white","flex","items-center","gap-3"],[1,"w-2","h-8","rounded-full","block"],[1,"text-xs","font-bold","px-3","py-1","rounded-full","bg-opacity-10"],[1,"grid","grid-cols-1","gap-3"],[1,"group","flex","items-center","gap-3","p-4","rounded-xl","bg-white","dark:bg-surface-dark","border","border-transparent","dark:border-border-dark","hover:border-primary/30","transition-all","duration-200","shadow-sm","hover:shadow-md","dark:shadow-none","relative","overflow-hidden","active:scale-[0.99]","active:shadow-inner",3,"opacity-50"],[1,"group","flex","items-center","gap-3","p-4","rounded-xl","bg-white","dark:bg-surface-dark","border","border-transparent","dark:border-border-dark","hover:border-primary/30","transition-all","duration-200","shadow-sm","hover:shadow-md","dark:shadow-none","relative","overflow-hidden","active:scale-[0.99]","active:shadow-inner"],[1,"material-symbols-outlined","text-slate-300","dark:text-border-dark","group-hover:text-slate-400","dark:group-hover:text-slate-500","cursor-grab","select-none","transition-colors"],[1,"relative","flex","items-center","p-2","rounded-full","cursor-pointer"],["type","checkbox",1,"peer","h-6","w-6","cursor-pointer","appearance-none","rounded-full","border-2","border-slate-400","dark:border-slate-500","transition-all","checked:border-primary","checked:bg-primary",3,"change","checked"],[1,"material-symbols-outlined","absolute","inset-0","flex","items-center","justify-center","text-white","text-[18px]","opacity-0","peer-checked:opacity-100","pointer-events-none","transition-opacity"],[1,"flex","flex-col","flex-1","min-w-0","cursor-pointer",3,"click"],[1,"flex","items-center","gap-3"],["alt","",1,"size-8","rounded-lg","object-cover","bg-slate-100","dark:bg-black/20","border","border-slate-200","dark:border-border-dark","shrink-0",3,"src"],[1,"text-base","font-bold","text-slate-900","dark:text-white","group-hover:text-primary","transition-colors","truncate"],[1,"hidden","sm:inline-flex","items-center","gap-1","px-2","py-0.5","rounded-md","text-[10px]","font-bold","uppercase","tracking-wider","bg-slate-100","text-slate-500","dark:bg-slate-800","dark:text-slate-400"],[1,"text-sm","text-slate-500","dark:text-text-muted-darker","truncate"],[1,"flex","items-center","gap-1","sm:gap-2","opacity-100","sm:opacity-0","group-hover:opacity-100","transition-opacity","z-20"],["title","Edit",1,"p-2","text-slate-400","hover:text-white","hover:bg-border-dark","rounded-full","transition-colors",3,"click"],[1,"material-symbols-outlined","text-[20px]"],["title","Delete",1,"p-2","text-slate-400","hover:text-rose-400","hover:bg-border-dark","rounded-full","transition-colors",3,"click"],[1,"material-symbols-outlined","text-[12px]"],[1,"size-6","rounded-full","flex","items-center","justify-center","text-[10px]","font-bold","text-white","ring-2","ring-white","dark:ring-surface-dark","ml-1",3,"title","class"],[1,"size-6","rounded-full","flex","items-center","justify-center","text-[10px]","font-bold","text-white","ring-2","ring-white","dark:ring-surface-dark","ml-1",3,"title"],[1,"material-symbols-outlined","text-6xl","text-slate-300","dark:text-slate-600"],[1,"mt-4","text-xl","font-bold","text-slate-500","dark:text-slate-400"],[1,"text-slate-400","dark:text-slate-500"],[1,"bg-white","dark:bg-surface-dark","w-full","max-w-md","rounded-2xl","shadow-xl","overflow-hidden","animate-in","zoom-in-95","duration-200","border","border-slate-200","dark:border-border-dark"],[1,"p-4","border-b","border-slate-100","dark:border-border-dark","flex","justify-between","items-center"],[1,"font-bold","text-lg","text-slate-900","dark:text-white"],[1,"p-1","rounded-full","hover:bg-slate-100","dark:hover:bg-border-dark","transition-colors",3,"click"],[1,"material-symbols-outlined"],[1,"p-6","space-y-4"],[1,"block","text-sm","font-medium","text-slate-700","dark:text-slate-300","mb-1"],["type","text","placeholder","e.g. Buy Milk",1,"w-full","px-4","py-2","rounded-lg","bg-slate-50","dark:bg-black/20","border","border-slate-200","dark:border-border-dark","focus:border-primary","focus:ring-1","focus:ring-primary","outline-none","text-slate-900","dark:text-white",3,"ngModelChange","ngModel"],[1,"relative"],[1,"w-full","px-4","py-2","rounded-lg","bg-slate-50","dark:bg-black/20","border","border-slate-200","dark:border-border-dark","focus:border-primary","focus:ring-1","focus:ring-primary","outline-none","text-slate-900","dark:text-white","text-left","flex","justify-between","items-center",3,"click"],[1,"material-symbols-outlined","text-slate-500"],[1,"absolute","top-full","left-0","right-0","mt-1","bg-white","dark:bg-surface-dark","border","border-slate-200","dark:border-border-dark","rounded-lg","shadow-xl","z-50","overflow-hidden","animate-in","fade-in","zoom-in-95","duration-100","max-h-48","overflow-y-auto"],[1,"flex","justify-between","items-center","mb-1"],[1,"block","text-sm","font-medium","text-slate-700","dark:text-slate-300"],[1,"text-xs","text-primary","font-bold","hover:underline",3,"click"],[1,"w-full","px-4","py-2","rounded-lg","bg-slate-50","dark:bg-black/20","border","border-slate-200","dark:border-border-dark","focus:border-primary","focus:ring-1","focus:ring-primary","outline-none","text-slate-900","dark:text-white",3,"ngModelChange","ngModel"],["value",""],[3,"value"],["type","datetime-local",1,"w-full","px-4","py-2","rounded-lg","bg-slate-50","dark:bg-black/20","border","border-slate-200","dark:border-border-dark","focus:border-primary","focus:ring-1","focus:ring-primary","outline-none","text-slate-900","dark:text-white",3,"ngModelChange","ngModel"],[1,"p-4","bg-slate-50","dark:bg-black/20","flex","justify-end","gap-3"],[1,"px-4","py-2","rounded-lg","text-slate-600","dark:text-slate-400","font-medium","hover:bg-slate-200","dark:hover:bg-border-dark","transition-colors",3,"click"],[1,"px-4","py-2","rounded-lg","bg-primary","text-slate-900","font-bold","hover:bg-primary-hover","transition-colors","shadow-lg","shadow-primary/20",3,"click"],[1,"w-full","px-4","py-3","text-left","text-slate-700","dark:text-white","hover:bg-slate-50","dark:hover:bg-border-dark","transition-colors","flex","items-center","gap-2"],[1,"w-full","px-4","py-3","text-left","text-slate-700","dark:text-white","hover:bg-slate-50","dark:hover:bg-border-dark","transition-colors","flex","items-center","gap-2",3,"click"],[1,"w-3","h-3","rounded-full"],[1,"material-symbols-outlined","ml-auto","text-primary","text-sm"],[3,"close"]],template:function(t,r){t&1&&(x(0,"main",0)(1,"div",1)(2,"label",2)(3,"div",3)(4,"span",4),N(5,"search"),R(),Ot(6,"input",5),x(7,"button",6),Q("click",function(){return r.toggleAddModal(!0)}),x(8,"span",7),N(9,"add"),R()()()(),x(10,"div",8)(11,"span",9),N(12,"Filter by Due Date:"),R(),x(13,"div",10)(14,"span",11),N(15,"All"),R(),x(16,"span",11),N(17,"Today"),R()()()(),x(18,"div",12)(19,"div",13)(20,"div",14)(21,"div")(22,"h2",15),N(23,"My Lists"),R(),x(24,"p",16),N(25),R()(),x(26,"div",17)(27,"button",18),Q("click",function(){return r.toggleAddModal(!0)}),x(28,"span",19),N(29,"add_task"),R(),N(30," New Task "),R()()(),Ct(31,CZ,1,1,null,null,dw),ue(33,TZ,7,0,"div",20),R()(),x(34,"button",21),Q("click",function(){return r.toggleAddModal(!0)}),x(35,"span",22),N(36,"add"),R()(),ue(37,RZ,43,6,"div",23),ue(38,kZ,1,0,"app-assignee-management"),R()),t&2&&(V(25),Py("You have ",r.totalPending()," pending items across ",r.activeCategoriesCount()," categories."),V(6),Tt(r.categories),V(2),de(r.activeCategoriesCount()===0&&(!r.groupedTasks().other||r.groupedTasks().other.length===0)?33:-1),V(4),de(r.showAddModal?37:-1),V(),de(r.showAssigneeModal?38:-1))},dependencies:[Ar,Pa,Xd,Zd,es,Ma,Na,no,iw,Ef],encapsulation:2})};var nh=class n{MAX_WIDTH=400;MAX_HEIGHT=400;QUALITY=.7;async compressImage(e){return new Promise((t,r)=>{let i=new FileReader;i.onload=s=>{let o=new Image;o.onload=()=>{try{let a=document.createElement("canvas"),{width:c,height:d}=o;c>d?c>this.MAX_WIDTH&&(d=Math.round(d*this.MAX_WIDTH/c),c=this.MAX_WIDTH):d>this.MAX_HEIGHT&&(c=Math.round(c*this.MAX_HEIGHT/d),d=this.MAX_HEIGHT),a.width=c,a.height=d;let h=a.getContext("2d");if(!h){r(new Error("Could not get canvas context"));return}h.drawImage(o,0,0,c,d);let p=a.toDataURL("image/jpeg",this.QUALITY);t(p)}catch(a){r(a)}},o.onerror=()=>{r(new Error("Failed to load image"))},o.src=s.target?.result},i.onerror=()=>{r(new Error("Failed to read file"))},i.readAsDataURL(e)})}isValidImageFile(e){return["image/jpeg","image/png","image/gif","image/webp"].includes(e.type)}formatFileSize(e){return e<1024?e+" B":e<1024*1024?(e/1024).toFixed(1)+" KB":(e/(1024*1024)).toFixed(1)+" MB"}static \u0275fac=function(t){return new(t||n)};static \u0275prov=se({token:n,factory:n.\u0275fac,providedIn:"root"})};var hw=(n,e)=>e.id,NZ=(n,e)=>e.value;function MZ(n,e){if(n&1){let t=je();x(0,"button",39),Q("click",function(){let i=X(t).$implicit,s=$(2);return Z(s.onSortChange(i.value))}),N(1),R()}if(n&2){let t=e.$implicit,r=$(2);Mn("bg-primary-10",r.sortBy()===t.value)("text-primary",r.sortBy()===t.value)("text-slate-700",r.sortBy()!==t.value)("dark:text-slate-300",r.sortBy()!==t.value),V(),ct(" ",t.label," ")}}function PZ(n,e){if(n&1&&(x(0,"div",10),Ct(1,MZ,2,9,"button",38,NZ),R()),n&2){let t=$();V(),Tt(t.sortOptions)}}function OZ(n,e){if(n&1&&(x(0,"div",15)(1,"div",40)(2,"div",41)(3,"span",42),N(4,"error"),R()(),x(5,"div",43)(6,"h3",44),N(7,"Connection Error"),R(),x(8,"div",45)(9,"p"),N(10),R(),x(11,"p",46),N(12,"Please check your Firestore Security Rules or Auth configuration."),R()()()()()),n&2){let t=$();V(10),Pe(t.error())}}function FZ(n,e){if(n&1){let t=je();x(0,"div",48)(1,"button",49),Q("click",function(i){X(t);let s=$().$implicit;return $().startEditCategory(s),Z(i.stopPropagation())}),x(2,"span",50),N(3,"edit"),R()(),x(4,"button",51),Q("click",function(i){X(t);let s=$().$implicit;return $().deleteCategory(s.id),Z(i.stopPropagation())}),x(5,"span",50),N(6,"close"),R()()()}}function VZ(n,e){if(n&1){let t=je();x(0,"div",29)(1,"button",28),Q("click",function(){let i=X(t).$implicit,s=$();return Z(s.onCategoryChange(i.id))}),x(2,"span",47),N(3),R(),x(4,"p"),N(5),R(),ue(6,FZ,7,0,"div",48),R()()}if(n&2){let t=e.$implicit,r=$();V(),it(r.selectedCategory()===t.id?"flex h-9 shrink-0 items-center justify-center gap-x-2 rounded-lg bg-slate-900 dark:bg-white px-4 pr-2 hover:opacity-90 transition-opacity":"flex h-9 shrink-0 items-center justify-center gap-x-2 rounded-lg bg-white dark:bg-surface-dark border border-slate-200 dark:border-border-dark px-4 pr-2 hover:bg-slate-50 dark:hover:bg-border-dark transition-colors"),V(),it(t.color),V(),Pe(t.icon),V(),it(r.selectedCategory()===t.id?"text-white dark:text-slate-900 text-sm font-bold":"text-slate-600 dark:text-slate-300 text-sm font-medium"),V(),ct(" ",t.name," "),V(),de(t.isDefault?-1:6)}}function LZ(n,e){if(n&1){let t=je();x(0,"img",66),Q("error",function(i){X(t);let s=$(4);return Z(s.handleImageError(i))}),R()}if(n&2){let t=$().$implicit;Ue("alt",t.name)("src",t.imageUrl,Xn)}}function UZ(n,e){n&1&&(x(0,"div",60)(1,"span",67),N(2,"grocery"),R()())}function jZ(n,e){if(n&1){let t=je();x(0,"span",68),N(1,"In Cart"),R(),x(2,"button",69),Q("click",function(){X(t);let i=$().$implicit,s=$(3);return Z(s.removeFromCart(i.id))}),x(3,"span",31),N(4,"remove_shopping_cart"),R()()}}function BZ(n,e){if(n&1){let t=je();x(0,"button",70),Q("click",function(){X(t);let i=$().$implicit,s=$(3);return Z(s.addToCart(i.id))}),x(1,"span",4),N(2,"add_shopping_cart"),R()()}}function $Z(n,e){if(n&1){let t=je();x(0,"div",57)(1,"div",2)(2,"div",58),ue(3,LZ,1,2,"img",59)(4,UZ,3,0,"div",60),R(),x(5,"div")(6,"h4",61),N(7),R()()(),x(8,"div",62),ue(9,jZ,5,0)(10,BZ,3,0,"button",63),x(11,"button",64),Q("click",function(){let i=X(t).$implicit,s=$(3);return Z(s.startEdit(i))}),x(12,"span",31),N(13,"edit"),R()(),x(14,"button",65),Q("click",function(){let i=X(t).$implicit,s=$(3);return Z(s.deleteItem(i.id))}),x(15,"span",31),N(16,"delete"),R()()()()}if(n&2){let t=e.$implicit;V(3),de(t.imageUrl?3:4),V(4),Pe(t.name),V(2),de(t.isInCart?9:10)}}function HZ(n,e){if(n&1&&(x(0,"section",52)(1,"div",53)(2,"h3",54)(3,"span",19),N(4),R(),N(5),R(),x(6,"span",55),N(7),R()(),x(8,"div",56),Ct(9,$Z,17,3,"div",57,hw),R()()),n&2){let t=$().$implicit,r=$();Ue("id","section-"+t.id),V(3),it(t.color),V(),Pe(t.icon),V(),ct(" ",t.name," "),V(2),ct("",r.getItemCount(t.id)," items"),V(2),Tt(r.groceriesByCategory()[t.id])}}function qZ(n,e){if(n&1&&ue(0,HZ,11,6,"section",52),n&2){let t=e.$implicit,r=$();de(r.groceriesByCategory()[t.id]&&r.groceriesByCategory()[t.id].length>0?0:-1)}}function zZ(n,e){if(n&1){let t=je();x(0,"button",76),Q("click",function(){X(t);let i=$(2);return Z(i.onCategoryChange("all"))}),N(1," Browse all items "),R()}}function GZ(n,e){if(n&1&&(x(0,"div",33)(1,"div",71)(2,"span",72),N(3,"search_off"),R()(),x(4,"h3",73),N(5,"No items found"),R(),x(6,"p",74),N(7," We couldn't find any items matching your current filters. "),R(),ue(8,zZ,2,0,"button",75),R()),n&2){let t=$();V(8),de(t.selectedCategory()!=="all"?8:-1)}}function WZ(n,e){if(n&1&&(x(0,"span",36),N(1),R()),n&2){let t=$();V(),Pe(t.getTotalCartItems())}}function KZ(n,e){n&1&&(x(0,"div",83)(1,"span",98),N(2,"progress_activity"),R(),x(3,"span",99),N(4,"Compressing..."),R()())}function QZ(n,e){if(n&1){let t=je();x(0,"img",100),Q("error",function(i){X(t);let s=$(2);return Z(s.handleImageError(i))}),R()}if(n&2){let t=$(2);Ue("src",t.editItemImageUrl,Xn)}}function YZ(n,e){n&1&&(x(0,"span",85),N(1,"image"),R())}function JZ(n,e){if(n&1){let t=je();x(0,"button",101),Q("click",function(){X(t);let i=$(2);return Z(i.removeImage())}),x(1,"span",50),N(2,"close"),R()()}}function XZ(n,e){if(n&1&&(x(0,"option",94),N(1),R()),n&2){let t=e.$implicit;Ue("value",t.id),V(),Pe(t.name)}}function ZZ(n,e){if(n&1){let t=je();x(0,"div",77),Q("click",function(){X(t);let i=$();return Z(i.cancelEdit())}),x(1,"div",78),Q("click",function(i){return X(t),Z(i.stopPropagation())}),x(2,"h3",79),N(3),R(),x(4,"div",80)(5,"div",81)(6,"div",8)(7,"div",82),ue(8,KZ,5,0,"div",83)(9,QZ,1,1,"img",84)(10,YZ,2,0,"span",85),R(),ue(11,JZ,3,0,"button",86),R(),x(12,"label",87)(13,"input",88),Q("change",function(i){X(t);let s=$();return Z(s.onImageFileSelected(i))}),R(),x(14,"span",89)(15,"span",31),N(16,"upload"),R(),N(17),R()(),x(18,"p",90),N(19,"Images are compressed automatically"),R()(),x(20,"div")(21,"label",91),N(22,"Item Name"),R(),x(23,"input",92),dn("ngModelChange",function(i){X(t);let s=$();return gn(s.editItemName,i)||(s.editItemName=i),Z(i)}),R()(),x(24,"div")(25,"label",91),N(26,"Category"),R(),x(27,"select",93),dn("ngModelChange",function(i){X(t);let s=$();return gn(s.editItemCategory,i)||(s.editItemCategory=i),Z(i)}),Ct(28,XZ,2,2,"option",94,hw),R()()(),x(30,"div",95)(31,"button",96),Q("click",function(){X(t);let i=$();return Z(i.cancelEdit())}),N(32,"Cancel"),R(),x(33,"button",97),Q("click",function(){X(t);let i=$();return Z(i.saveEdit())}),N(34,"Save"),R()()()()}if(n&2){let t=$();V(3),Pe(t.editingItem?"Edit Item":"Add Item"),V(5),de(t.isUploadingImage?8:t.editItemImageUrl?9:10),V(3),de(t.editItemImageUrl&&!t.isUploadingImage?11:-1),V(2),Ue("disabled",t.isUploadingImage),V(4),ct(" ",t.editItemImageUrl?"Change Image":"Upload Image"," "),V(6),un("ngModel",t.editItemName),V(4),un("ngModel",t.editItemCategory),V(),Tt(t.categories()),V(5),Ue("disabled",t.isUploadingImage)}}function eee(n,e){if(n&1){let t=je();x(0,"button",28),Q("click",function(){let i=X(t).$implicit,s=$(2);return Z(s.editCategoryIcon=i)}),x(1,"span",19),N(2),R()()}if(n&2){let t=e.$implicit,r=$(2);it(r.editCategoryIcon===t?"size-10 rounded-lg bg-primary text-white flex items-center justify-center":"size-10 rounded-lg bg-white dark:bg-surface-dark border border-slate-200 dark:border-border-dark flex items-center justify-center hover:border-primary transition-colors"),V(2),Pe(t)}}function tee(n,e){if(n&1){let t=je();x(0,"button",28),Q("click",function(){let i=X(t).$implicit,s=$(2);return Z(s.editCategoryColor=i)}),x(1,"span",19),N(2,"circle"),R()()}if(n&2){let t=e.$implicit,r=$(2);it(r.editCategoryColor===t?"size-10 rounded-lg bg-white dark:bg-surface-dark border-2 border-primary flex items-center justify-center":"size-10 rounded-lg bg-white dark:bg-surface-dark border border-slate-200 dark:border-border-dark flex items-center justify-center hover:border-primary transition-colors"),V(),it(t)}}function nee(n,e){if(n&1){let t=je();x(0,"div",77),Q("click",function(){X(t);let i=$();return Z(i.closeCategoryModal())}),x(1,"div",78),Q("click",function(i){return X(t),Z(i.stopPropagation())}),x(2,"h3",79),N(3),R(),x(4,"div",80)(5,"div",102)(6,"div",103)(7,"span",104),N(8),R(),x(9,"span",105),N(10),R()()(),x(11,"div")(12,"label",91),N(13,"Category Name"),R(),x(14,"input",106),dn("ngModelChange",function(i){X(t);let s=$();return gn(s.editCategoryName,i)||(s.editCategoryName=i),Z(i)}),R()(),x(15,"div")(16,"label",107),N(17,"Icon"),R(),x(18,"div",108),Ct(19,eee,3,3,"button",109,Eu),R()(),x(21,"div")(22,"label",107),N(23,"Color"),R(),x(24,"div",110),Ct(25,tee,3,4,"button",109,Eu),R()()(),x(27,"div",95)(28,"button",96),Q("click",function(){X(t);let i=$();return Z(i.closeCategoryModal())}),N(29,"Cancel"),R(),x(30,"button",111),Q("click",function(){X(t);let i=$();return Z(i.saveCategory())}),N(31,"Save"),R()()()()}if(n&2){let t=$();V(3),Pe(t.editingCategory?"Edit Category":"Add Category"),V(4),it(t.editCategoryColor),V(),Pe(t.editCategoryIcon),V(2),Pe(t.editCategoryName||"Category Name"),V(4),un("ngModel",t.editCategoryName),V(5),Tt(t.availableIcons),V(6),Tt(t.availableColors)}}var fw=class n{groceryService=j(th);imageService=j(nh);dialogService=j(Fr);overviewService=j(ts);groceries=this.groceryService.groceries;groceriesByCategory=this.groceryService.groceriesByCategory;cartItems=this.groceryService.cartItems;checkedItems=this.groceryService.checkedItems;uncheckedItems=this.groceryService.uncheckedItems;searchQuery=this.groceryService.searchQuery;selectedCategory=this.groceryService.selectedCategory;sortBy=this.groceryService.sortBy;categories=this.groceryService.categories;categoryIds=this.groceryService.categoryIds;error=this.groceryService.error;isLoading=this.groceryService.isLoading;availableIcons=N4;availableColors=M4;newItemName="";showAddModal=!1;isAddingFromSidebar=!1;editingItem=null;editItemName="";editItemCategory="other";editItemImageUrl="";isUploadingImage=!1;showMobileCart=!1;toggleMobileCart(){this.showMobileCart=!this.showMobileCart}showCategoryModal=!1;editingCategory=null;editCategoryName="";editCategoryIcon="category";editCategoryColor="text-slate-400";sortOptions=[{value:"name",label:"Name"},{value:"category",label:"Category"},{value:"date",label:"Date Added"}];showSortDropdown=!1;openAddCategoryModal(){this.editingCategory=null,this.editCategoryName="",this.editCategoryIcon="category",this.editCategoryColor="text-slate-400",this.showCategoryModal=!0}startEditCategory(e){e.isDefault||(this.editingCategory=e,this.editCategoryName=e.name,this.editCategoryIcon=e.icon,this.editCategoryColor=e.color,this.showCategoryModal=!0)}async saveCategory(){this.editCategoryName.trim()&&(this.editingCategory?await this.groceryService.updateCategory(this.editingCategory.id,{name:this.editCategoryName.trim(),icon:this.editCategoryIcon,color:this.editCategoryColor}):await this.groceryService.createCategory({name:this.editCategoryName.trim(),icon:this.editCategoryIcon,color:this.editCategoryColor}),this.closeCategoryModal())}async deleteCategory(e){let t=this.groceryService.getCategory(e);if(!t||t.isDefault)return;let r=this.groceryService.getItemCountInCategory(e);if(r>0){await this.dialogService.alert(`Cannot delete category "${t.name}" because it has ${r} item(s). Please move or delete the items first.`);return}if(await this.dialogService.confirm(`Delete category "${t.name}"?`,"Delete Category")){let i=this.groceryService.deleteCategory(e);!i.success&&i.error&&await this.dialogService.alert(i.error)}}closeCategoryModal(){this.editingCategory=null,this.editCategoryName="",this.editCategoryIcon="category",this.editCategoryColor="text-slate-400",this.showCategoryModal=!1}async onImageFileSelected(e){let t=e.target,r=t.files?.[0];if(r){if(!this.imageService.isValidImageFile(r)){await this.dialogService.alert("Please select a valid image file (JPEG, PNG, GIF, or WebP)");return}this.isUploadingImage=!0;try{let i=await this.imageService.compressImage(r);this.editItemImageUrl=i}catch(i){console.error("Error compressing image:",i),await this.dialogService.alert("Failed to process image. Please try again.")}finally{this.isUploadingImage=!1,t.value=""}}}removeImage(){this.editItemImageUrl=""}onSearch(e){let t=e.target;this.groceryService.setSearchQuery(t.value)}onCategoryChange(e){this.groceryService.setCategory(e)}onSortChange(e){this.groceryService.setSortBy(e),this.showSortDropdown=!1}toggleSortDropdown(){this.showSortDropdown=!this.showSortDropdown}async addItem(){this.newItemName.trim()&&(await this.groceryService.create({name:this.newItemName.trim(),category:"other",isInCart:!1,isChecked:!1}),this.newItemName="")}async addItemWithCategory(e,t){e.trim()&&await this.groceryService.create({name:e.trim(),category:t,isInCart:!1,isChecked:!1})}deleteItem(e){this.groceryService.delete(e)}startEdit(e){this.editingItem=e,this.editItemName=e.name,this.editItemCategory=e.category,this.editItemImageUrl=e.imageUrl||"",this.showAddModal=!0}openAddModal(e=!1){this.isAddingFromSidebar=e,this.editingItem=null,this.editItemName="",this.editItemCategory="other",this.editItemImageUrl="",this.showAddModal=!0}async saveEdit(){this.editItemName.trim()&&(this.editingItem?await this.groceryService.update(this.editingItem.id,{name:this.editItemName.trim(),category:this.editItemCategory,imageUrl:this.editItemImageUrl.trim()||void 0}):(await this.groceryService.create({name:this.editItemName.trim(),category:this.editItemCategory,imageUrl:this.editItemImageUrl.trim()||void 0,isInCart:this.isAddingFromSidebar,isChecked:!1}),this.isAddingFromSidebar&&this.createOverviewTask(this.editItemName.trim(),this.editItemImageUrl.trim()||void 0)),this.cancelEdit())}cancelEdit(){this.editingItem=null,this.editItemName="",this.editItemCategory="other",this.editItemImageUrl="",this.showAddModal=!1}async addToCart(e){await this.groceryService.addToCart(e);let t=this.groceries().find(r=>r.id===e);t&&this.createOverviewTask(t.name,t.imageUrl)}async removeFromCart(e){let t=this.groceries().find(r=>r.id===e);await this.groceryService.removeFromCart(e),t&&this.removeOverviewTask(t.name)}async toggleChecked(e){await this.groceryService.toggleChecked(e)}async clearCart(){let e=this.cartItems();await this.groceryService.clearCart();for(let t of e)this.removeOverviewTask(t.name)}async checkout(){if(this.cartItems().length!==0&&await this.dialogService.confirm("Complete shopping trip and save to history?","Checkout"))try{await this.groceryService.saveToHistory(),await this.groceryService.clearCart()}catch(e){console.error("Checkout failed",e),await this.dialogService.alert("Failed to save history. Please check your connection.")}}getCategoryLabel(e){return this.groceryService.getCategoryLabel(e)}getCategoryIcon(e){return this.groceryService.getCategoryIcon(e)}getCategoryColor(e){return this.groceryService.getCategoryColor(e)}getItemCount(e){return this.groceriesByCategory()[e]?.length||0}getTotalCartItems(){return this.cartItems().length}getProgress(){let e=this.cartItems().length;return e===0?0:this.checkedItems().length/e*100}isDefaultCategory(e){return this.groceryService.getCategory(e)?.isDefault??!1}handleImageError(e){let t=e.target;t.src="https://placehold.co/200x200/cccccc/ffffff?text=No+Image"}async resetData(){await this.dialogService.confirm("This will reset all grocery data to the default seed data. Continue?","Reset Data")&&await this.groceryService.resetToSeedData()}createOverviewTask(e,t){let r=new Date;r.setDate(r.getDate()+3),this.overviewService.createTask({title:e,category:"groceries",isCompleted:!1,dueDate:r,imageUrl:t})}async removeOverviewTask(e){let r=this.overviewService.tasks().find(i=>i.title===e&&i.category==="groceries");r&&await this.overviewService.deleteTask(r.id)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=$n({type:n,selectors:[["app-groceries"]],hostAttrs:[1,"flex-1","h-screen","flex","flex-col","overflow-hidden"],decls:60,vars:12,consts:[["id","groceries-page",1,"flex","flex-col","h-screen","w-full","overflow-hidden"],["id","groceries-header",1,"flex","items-center","justify-between","whitespace-nowrap","border-b","border-solid","border-[#e5e7eb]","dark:border-border-dark","bg-white","dark:bg-background-dark","px-6","py-3","shrink-0","z-20"],[1,"flex","items-center","gap-4"],[1,"size-8","bg-primary","rounded-lg","flex","items-center","justify-center","text-white"],[1,"material-symbols-outlined","text-[20px]"],[1,"text-slate-900","dark:text-white","text-xl","font-bold","leading-tight","tracking-[-0.015em]"],[1,"flex","flex-1","justify-end","gap-6","items-center"],[1,"flex","gap-2"],[1,"relative"],["id","btn-sort",1,"flex","size-10","cursor-pointer","items-center","justify-center","overflow-hidden","rounded-lg","bg-slate-100","dark:bg-border-dark","text-slate-900","dark:text-white","hover:bg-slate-200","dark:hover:bg-[#3b4754]","transition-colors",3,"click"],[1,"absolute","right-0","top-12","w-40","bg-white","dark:bg-surface-dark","border","border-slate-200","dark:border-border-dark","rounded-lg","shadow-xl","z-50","overflow-hidden"],["id","btn-reset","title","Reset to seed data",1,"flex","size-10","cursor-pointer","items-center","justify-center","overflow-hidden","rounded-lg","bg-slate-100","dark:bg-border-dark","text-slate-900","dark:text-white","hover:bg-red-500","hover:text-white","transition-colors",3,"click"],[1,"flex","flex-1","min-h-0"],["id","groceries-main-content",1,"flex-1","min-w-0","overflow-y-auto","bg-background-light","dark:bg-background-dark","relative"],[1,"w-full","mx-auto","px-6","py-8","flex","flex-col","gap-6"],[1,"bg-red-50","dark:bg-red-900/20","border-l-4","border-red-500","p-4","rounded-r-lg"],[1,"flex","flex-col","md:flex-row","gap-4"],[1,"flex-1","relative","group"],[1,"absolute","left-4","top-1/2","-translate-y-1/2","text-slate-400"],[1,"material-symbols-outlined"],["id","groceries-search-input","placeholder","Search for items (e.g. Avocado, Milk)...","type","text",1,"w-full","h-12","pl-12","pr-4","bg-white","dark:bg-surface-dark","border","border-slate-200","dark:border-border-dark","rounded-xl","text-slate-900","dark:text-white","placeholder:text-slate-400","focus:outline-none","focus:ring-2","focus:ring-primary","focus:border-transparent","transition-all","shadow-sm",3,"input","value"],[1,"md:w-[350px]","relative","flex","gap-2"],[1,"flex-1","relative"],["id","groceries-quick-add-input","placeholder","Quick add item...","type","text",1,"w-full","h-12","pl-4","pr-12","bg-white","dark:bg-surface-dark","border","border-slate-200","dark:border-border-dark","rounded-xl","text-slate-900","dark:text-white","placeholder:text-slate-400","focus:outline-none","focus:ring-2","focus:ring-primary","focus:border-transparent","transition-all","shadow-sm",3,"ngModelChange","keyup.enter","ngModel"],["id","btn-quick-add",1,"absolute","right-2","top-2","size-8","bg-primary/10","hover:bg-primary/20","text-primary","rounded-lg","flex","items-center","justify-center","transition-colors",3,"click"],["id","btn-add-custom",1,"h-12","px-4","bg-primary","text-white","rounded-xl","flex","items-center","justify-center","gap-2","hover:bg-blue-600","transition-colors","shadow-lg","shadow-blue-500/20","whitespace-nowrap",3,"click"],[1,"hidden","sm:inline","font-semibold","text-sm"],["id","groceries-filter-chips",1,"flex","gap-3","overflow-x-auto","pb-2","scrollbar-hide","items-center"],[3,"click"],[1,"relative","group","shrink-0"],[1,"flex","h-9","shrink-0","items-center","justify-center","gap-x-2","rounded-lg","border-2","border-dashed","border-slate-300","dark:border-slate-600","px-4","hover:border-primary","hover:text-primary","transition-colors","text-slate-400",3,"click"],[1,"material-symbols-outlined","text-[18px]"],[1,"text-sm","font-medium"],[1,"flex","flex-col","items-center","justify-center","py-20","text-center","animate-in","fade-in","duration-300"],[1,"h-12"],["id","btn-mobile-cart",1,"xl:hidden","fixed","bottom-6","right-6","size-14","bg-primary","text-white","rounded-full","shadow-xl","shadow-blue-500/40","flex","items-center","justify-center","z-50",3,"click"],[1,"absolute","top-0","right-0","size-5","bg-red-500","rounded-full","border-2","border-background-light","dark:border-background-dark","text-[10px]","font-bold","flex","items-center","justify-center"],[1,"fixed","inset-0","bg-black/50","flex","items-center","justify-center","z-50"],[1,"w-full","px-4","py-2","text-left","text-sm","hover:bg-slate-100","dark:hover:bg-border-dark","transition-colors",3,"bg-primary-10","text-primary","text-slate-700","dark:text-slate-300"],[1,"w-full","px-4","py-2","text-left","text-sm","hover:bg-slate-100","dark:hover:bg-border-dark","transition-colors",3,"click"],[1,"flex"],[1,"flex-shrink-0"],[1,"material-symbols-outlined","text-red-500"],[1,"ml-3"],[1,"text-sm","font-medium","text-red-800","dark:text-red-200"],[1,"mt-2","text-sm","text-red-700","dark:text-red-300"],[1,"mt-1","font-semibold"],[1,"material-symbols-outlined","text-[16px]"],[1,"flex","items-center","gap-1","ml-1"],[1,"size-5","flex","items-center","justify-center","rounded","hover:bg-black/10","dark:hover:bg-white/10",3,"click"],[1,"material-symbols-outlined","text-[14px]"],[1,"size-5","flex","items-center","justify-center","rounded","hover:bg-red-500/20","text-red-500",3,"click"],[3,"id"],[1,"flex","items-center","justify-between","mb-4"],[1,"text-lg","font-bold","text-slate-900","dark:text-white","flex","items-center","gap-2"],[1,"text-xs","font-medium","text-slate-500","bg-slate-100","dark:bg-border-dark","px-2","py-1","rounded"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],[1,"group","bg-white","dark:bg-surface-dark","p-4","rounded-xl","border","border-slate-200","dark:border-border-dark","hover:border-primary/50","dark:hover:border-primary/50","transition-colors","shadow-sm","flex","items-center","justify-between"],[1,"size-12","rounded-lg","bg-slate-50","dark:bg-black/20","overflow-hidden","flex-shrink-0"],[1,"w-full","h-full","object-cover",3,"alt","src"],[1,"w-full","h-full","flex","items-center","justify-center"],[1,"font-semibold","text-slate-900","dark:text-white"],[1,"flex","items-center","gap-2"],["title","Add to cart",1,"size-9","bg-primary","text-white","rounded-lg","flex","items-center","justify-center","hover:bg-blue-600","transition-colors","shadow-lg","shadow-blue-500/20"],["title","Edit",1,"p-2","text-slate-400","hover:text-primary","rounded-full","hover:bg-slate-100","dark:hover:bg-border-dark","transition-colors",3,"click"],["title","Delete",1,"p-2","text-slate-400","hover:text-red-500","rounded-full","hover:bg-slate-100","dark:hover:bg-border-dark","transition-colors",3,"click"],[1,"w-full","h-full","object-cover",3,"error","alt","src"],[1,"material-symbols-outlined","text-slate-400"],[1,"text-xs","text-green-500","font-medium"],["title","Remove from cart",1,"p-2","text-slate-400","hover:text-red-500","rounded-full","hover:bg-slate-100","dark:hover:bg-border-dark","transition-colors",3,"click"],["title","Add to cart",1,"size-9","bg-primary","text-white","rounded-lg","flex","items-center","justify-center","hover:bg-blue-600","transition-colors","shadow-lg","shadow-blue-500/20",3,"click"],[1,"size-24","rounded-full","bg-slate-100","dark:bg-black/20","flex","items-center","justify-center","mb-4"],[1,"material-symbols-outlined","text-4xl","text-slate-300"],[1,"text-lg","font-bold","text-slate-900","dark:text-white"],[1,"text-slate-500","dark:text-slate-400","mt-2","max-w-xs","mx-auto"],[1,"mt-6","text-primary","font-medium","hover:underline"],[1,"mt-6","text-primary","font-medium","hover:underline",3,"click"],[1,"fixed","inset-0","bg-black/50","flex","items-center","justify-center","z-50",3,"click"],[1,"bg-white","dark:bg-surface-dark","rounded-2xl","p-6","w-full","max-w-md","shadow-2xl",3,"click"],[1,"text-lg","font-bold","text-slate-900","dark:text-white","mb-4"],[1,"space-y-4"],[1,"flex","flex-col","items-center","gap-3"],[1,"size-24","rounded-xl","bg-slate-100","dark:bg-black/20","overflow-hidden","flex","items-center","justify-center"],[1,"flex","flex-col","items-center"],["alt","Preview",1,"w-full","h-full","object-cover",3,"src"],[1,"material-symbols-outlined","text-4xl","text-slate-400"],[1,"absolute","-top-2","-right-2","size-6","bg-red-500","text-white","rounded-full","flex","items-center","justify-center","hover:bg-red-600","transition-colors","shadow-lg"],[1,"cursor-pointer"],["type","file","accept","image/jpeg,image/png,image/gif,image/webp",1,"hidden",3,"change","disabled"],[1,"flex","items-center","gap-2","px-4","py-2","bg-slate-100","dark:bg-border-dark","text-slate-600","dark:text-slate-300","rounded-lg","hover:bg-slate-200","dark:hover:bg-slate-600","transition-colors","text-sm","font-medium"],[1,"text-xs","text-slate-400"],[1,"block","text-sm","font-medium","text-slate-700","dark:text-slate-300","mb-1"],["type","text","placeholder","Enter item name...",1,"w-full","h-12","px-4","bg-white","dark:bg-background-dark","border","border-slate-200","dark:border-border-dark","rounded-xl","text-slate-900","dark:text-white","focus:outline-none","focus:ring-2","focus:ring-primary",3,"ngModelChange","ngModel"],[1,"w-full","h-12","px-4","bg-white","dark:bg-background-dark","border","border-slate-200","dark:border-border-dark","rounded-xl","text-slate-900","dark:text-white","focus:outline-none","focus:ring-2","focus:ring-primary",3,"ngModelChange","ngModel"],[3,"value"],[1,"flex","gap-3","mt-6"],[1,"flex-1","h-10","rounded-lg","border","border-slate-200","dark:border-border-dark","text-slate-600","dark:text-slate-300","font-semibold","text-sm","hover:bg-slate-50","dark:hover:bg-border-dark","transition-colors",3,"click"],[1,"flex-1","h-10","rounded-lg","bg-primary","text-white","font-semibold","text-sm","hover:bg-blue-600","shadow-lg","shadow-blue-500/20","transition-colors","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],[1,"material-symbols-outlined","text-2xl","text-primary","animate-spin"],[1,"text-xs","text-slate-400","mt-1"],["alt","Preview",1,"w-full","h-full","object-cover",3,"error","src"],[1,"absolute","-top-2","-right-2","size-6","bg-red-500","text-white","rounded-full","flex","items-center","justify-center","hover:bg-red-600","transition-colors","shadow-lg",3,"click"],[1,"flex","justify-center"],[1,"flex","items-center","gap-3","px-6","py-3","rounded-xl","bg-slate-100","dark:bg-black/20"],[1,"material-symbols-outlined","text-2xl"],[1,"font-bold","text-slate-900","dark:text-white"],["type","text","placeholder","e.g., Frozen Foods, Beverages...",1,"w-full","h-12","px-4","bg-white","dark:bg-background-dark","border","border-slate-200","dark:border-border-dark","rounded-xl","text-slate-900","dark:text-white","focus:outline-none","focus:ring-2","focus:ring-primary",3,"ngModelChange","ngModel"],[1,"block","text-sm","font-medium","text-slate-700","dark:text-slate-300","mb-2"],[1,"flex","flex-wrap","gap-2","max-h-24","overflow-y-auto","p-2","bg-slate-50","dark:bg-black/20","rounded-xl"],[3,"class"],[1,"flex","flex-wrap","gap-2","p-2","bg-slate-50","dark:bg-black/20","rounded-xl"],[1,"flex-1","h-10","rounded-lg","bg-primary","text-white","font-semibold","text-sm","hover:bg-blue-600","shadow-lg","shadow-blue-500/20","transition-colors",3,"click"]],template:function(t,r){t&1&&(x(0,"div",0)(1,"header",1)(2,"div",2)(3,"div",3)(4,"span",4),N(5,"shopping_basket"),R()(),x(6,"h2",5),N(7,"Groceries"),R()(),x(8,"div",6)(9,"div",7)(10,"div",8)(11,"button",9),Q("click",function(){return r.toggleSortDropdown()}),x(12,"span",4),N(13,"sort"),R()(),ue(14,PZ,3,0,"div",10),R(),x(15,"button",11),Q("click",function(){return r.resetData()}),x(16,"span",4),N(17,"restart_alt"),R()()()()(),x(18,"div",12)(19,"main",13)(20,"div",14),ue(21,OZ,13,1,"div",15),x(22,"div",16)(23,"div",17)(24,"div",18)(25,"span",19),N(26,"search"),R()(),x(27,"input",20),Q("input",function(s){return r.onSearch(s)}),R()(),x(28,"div",21)(29,"div",22)(30,"input",23),dn("ngModelChange",function(s){return gn(r.newItemName,s)||(r.newItemName=s),s}),Q("keyup.enter",function(){return r.addItem()}),R(),x(31,"button",24),Q("click",function(){return r.addItem()}),x(32,"span",4),N(33,"add"),R()()(),x(34,"button",25),Q("click",function(){return r.openAddModal()}),x(35,"span",4),N(36,"add_circle"),R(),x(37,"span",26),N(38,"New"),R()()()(),x(39,"div",27)(40,"button",28),Q("click",function(){return r.onCategoryChange("all")}),x(41,"p"),N(42," All Items "),R()(),Ct(43,VZ,7,9,"div",29,hw),x(45,"button",30),Q("click",function(){return r.openAddCategoryModal()}),x(46,"span",31),N(47,"add"),R(),x(48,"span",32),N(49,"Add Category"),R()()(),Ct(50,qZ,1,1,null,null,hw),ue(52,GZ,9,1,"div",33),Ot(53,"div",34),R()(),x(54,"button",35),Q("click",function(){return r.toggleMobileCart()}),x(55,"span",19),N(56,"shopping_cart"),R(),ue(57,WZ,2,1,"span",36),R()(),ue(58,ZZ,35,8,"div",37),ue(59,nee,32,6,"div",37),R()),t&2&&(V(14),de(r.showSortDropdown?14:-1),V(7),de(r.error()?21:-1),V(6),Ue("value",r.searchQuery()),V(3),un("ngModel",r.newItemName),V(10),it(r.selectedCategory()==="all"?"flex h-9 shrink-0 items-center justify-center gap-x-2 rounded-lg bg-slate-900 dark:bg-white px-4 hover:opacity-90 transition-opacity":"flex h-9 shrink-0 items-center justify-center gap-x-2 rounded-lg bg-white dark:bg-surface-dark border border-slate-200 dark:border-border-dark px-4 hover:bg-slate-50 dark:hover:bg-border-dark transition-colors"),V(),it(r.selectedCategory()==="all"?"text-white dark:text-slate-900 text-sm font-bold":"text-slate-600 dark:text-slate-300 text-sm font-medium"),V(2),Tt(r.categories()),V(7),Tt(r.categories()),V(2),de(r.groceries().length===0&&!r.isLoading()?52:-1),V(5),de(r.getTotalCartItems()>0?57:-1),V(),de(r.showAddModal?58:-1),V(),de(r.showCategoryModal?59:-1))},dependencies:[Ar,Pa,Xd,Zd,es,Ma,Na,no],styles:["#groceries-page[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex:1;height:100%;overflow:hidden}#groceries-main-content[_ngcontent-%COMP%]{flex:1;overflow-y:auto;overflow-x:hidden}#groceries-main-content[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}#groceries-main-content[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:transparent}#groceries-main-content[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:#9ca3af66;border-radius:4px}#groceries-main-content[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background-color:#9ca3af99}#shopping-list-sidebar[_ngcontent-%COMP%]{max-height:100%;height:100%}#cart-items-container[_ngcontent-%COMP%]{flex:1 1 0%;min-height:0;max-height:calc(100vh - 280px);overflow-y:auto}#cart-items-container[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}#cart-items-container[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:transparent}#cart-items-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:#9ca3af80;border-radius:3px}#cart-items-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background-color:#9ca3afb3}"]})};var P4=[{value:"admin",label:"Admin",colorClass:"bg-primary/10 text-primary border-primary/20"},{value:"member",label:"Member",colorClass:"bg-surface-dark text-slate-300 border-border-dark"},{value:"guest",label:"Guest",colorClass:"bg-surface-dark text-text-muted border-border-dark"}];var O4=(n,e)=>e.value,ree=(n,e)=>e.id;function iee(n,e){if(n&1&&(x(0,"option",22),N(1),R()),n&2){let t=e.$implicit;Ue("value",t.value),V(),Pe(t.label)}}function see(n,e){if(n&1&&(x(0,"div",43),N(1),R()),n&2){let t=$().$implicit;V(),Pe(t.name.charAt(0).toUpperCase())}}function oee(n,e){if(n&1){let t=je();x(0,"tr",36)(1,"td",41)(2,"div",5)(3,"div",42),ue(4,see,2,1,"div",43),R(),x(5,"div",44)(6,"span",45),N(7),R()()()(),x(8,"td",41)(9,"span",46),N(10),R()(),x(11,"td",41)(12,"div",47),Ot(13,"div",48),x(14,"span",49),N(15),R()()(),x(16,"td",41)(17,"span",50),N(18),ff(19,"date"),R()(),x(20,"td",51)(21,"div",52)(22,"button",53),Q("click",function(){let i=X(t).$implicit,s=$();return Z(s.openLoginModal(i))}),x(23,"span",9),N(24,"login"),R()(),x(25,"button",54),Q("click",function(){let i=X(t).$implicit,s=$();return Z(s.openEditModal(i))}),x(26,"span",9),N(27,"edit"),R()(),x(28,"button",55),Q("click",function(){let i=X(t).$implicit,s=$();return Z(s.deleteUser(i))}),x(29,"span",9),N(30,"delete"),R()()()()()}if(n&2){let t,r,i,s=e.$implicit,o=$();V(3),My("background-image",s.avatarUrl?"url("+s.avatarUrl+")":""),V(),de(s.avatarUrl?-1:4),V(3),Pe(s.name),V(2),it(o.getRoleClass(s.role)),V(),ct(" ",o.getRoleLabel(s.role)," "),V(3),it(o.getStatusColor(s.status)),V(),Mn("text-primary",s.status==="pending")("text-white",s.status!=="pending"),V(),ct(" ",o.getStatusLabel(s.status)," "),V(3),ct(" ",s.lastActive?pf(19,19,s.lastActive,"short"):"Never"," "),V(4),Ue("title",((t=o.currentUser())==null?null:t.id)===s.id?"Currently Logged In":"Switch to User")("disabled",((r=o.currentUser())==null?null:r.id)===s.id),V(),Mn("text-primary",((i=o.currentUser())==null?null:i.id)===s.id)}}function aee(n,e){n&1&&(x(0,"tr")(1,"td",56)(2,"span",57),N(3,"person_off"),R(),x(4,"p"),N(5,"No users found matching your criteria."),R()()())}function cee(n,e){if(n&1&&Ot(0,"img",65),n&2){let t=$(2);Ue("src",t.formAvatarUrl,Xn)}}function lee(n,e){n&1&&(x(0,"span",66),N(1,"person"),R())}function uee(n,e){if(n&1){let t=je();x(0,"button",80),Q("click",function(i){X(t);let s=$(2);return Z(s.removeAvatar(i))}),x(1,"span",81),N(2,"close"),R()()}}function dee(n,e){if(n&1&&(x(0,"option",22),N(1),R()),n&2){let t=e.$implicit;Ue("value",t.value),V(),Pe(t.label)}}function hee(n,e){if(n&1){let t=je();x(0,"div")(1,"label",73),N(2,"Status"),R(),x(3,"select",76),dn("ngModelChange",function(i){X(t);let s=$(2);return gn(s.formStatus,i)||(s.formStatus=i),Z(i)}),x(4,"option",24),N(5,"Active"),R(),x(6,"option",26),N(7,"Inactive"),R(),x(8,"option",25),N(9,"Pending"),R(),x(10,"option",28),N(11,"Away"),R(),x(12,"option",27),N(13,"Offline"),R()()()}if(n&2){let t=$(2);V(3),un("ngModel",t.formStatus)}}function fee(n,e){if(n&1){let t=je();x(0,"div",40)(1,"div",58)(2,"div",59)(3,"h3",60),N(4),R(),x(5,"button",61),Q("click",function(){X(t);let i=$();return Z(i.closeModal())}),x(6,"span",7),N(7,"close"),R()()(),x(8,"div",62)(9,"div",63)(10,"div",64),Q("click",function(){X(t);let i=wb(23);return Z(i.click())}),ue(11,cee,1,1,"img",65)(12,lee,2,0,"span",66),x(13,"div",67)(14,"span",68),N(15,"upload"),R()(),ue(16,uee,3,0,"button",69),R(),x(17,"div",44)(18,"span",70),N(19,"Profile Photo"),R(),x(20,"span",71),N(21,"Click to upload"),R()(),x(22,"input",72,0),Q("change",function(i){X(t);let s=$();return Z(s.onAvatarSelected(i))}),R()(),x(24,"div")(25,"label",73),N(26,"Full Name"),R(),x(27,"input",74),dn("ngModelChange",function(i){X(t);let s=$();return gn(s.formName,i)||(s.formName=i),Z(i)}),R()(),x(28,"div")(29,"label",73),N(30),R(),x(31,"input",75),dn("ngModelChange",function(i){X(t);let s=$();return gn(s.formPassword,i)||(s.formPassword=i),Z(i)}),R()(),x(32,"div")(33,"label",73),N(34,"Role"),R(),x(35,"select",76),dn("ngModelChange",function(i){X(t);let s=$();return gn(s.formRole,i)||(s.formRole=i),Z(i)}),Ct(36,dee,2,2,"option",22,O4),R()(),ue(38,hee,14,1,"div"),R(),x(39,"div",77)(40,"button",78),Q("click",function(){X(t);let i=$();return Z(i.closeModal())}),N(41,"Cancel"),R(),x(42,"button",79),Q("click",function(){X(t);let i=$();return Z(i.saveUser())}),N(43,"Save User"),R()()()()}if(n&2){let t=$();V(4),Pe(t.editingUser?"Edit User":"New User"),V(7),de(t.formAvatarUrl?11:12),V(5),de(t.formAvatarUrl?16:-1),V(11),un("ngModel",t.formName),V(3),Pe(t.editingUser?"New Password (Optional)":"Password"),V(),un("ngModel",t.formPassword),Ue("placeholder",t.editingUser?"Leave blank to keep current":"Enter password"),V(4),un("ngModel",t.formRole),V(),Tt(t.userRoles),V(2),de(t.editingUser?38:-1)}}function pee(n,e){if(n&1&&(x(0,"p",86),N(1),R()),n&2){let t=$(2);V(),Pe(t.loginError)}}function gee(n,e){if(n&1){let t=je();x(0,"div",40)(1,"div",82)(2,"div",59)(3,"h3",60),N(4),R(),x(5,"button",61),Q("click",function(){X(t);let i=$();return Z(i.closeLoginModal())}),x(6,"span",7),N(7,"close"),R()()(),x(8,"div",62)(9,"div",83)(10,"div",84),Ot(11,"img",65),R()(),x(12,"div")(13,"label",73),N(14,"Password"),R(),x(15,"input",85),dn("ngModelChange",function(i){X(t);let s=$();return gn(s.loginPasswordInput,i)||(s.loginPasswordInput=i),Z(i)}),Q("keyup.enter",function(){X(t);let i=$();return Z(i.attemptLogin())}),R(),ue(16,pee,2,1,"p",86),R()(),x(17,"div",77)(18,"button",78),Q("click",function(){X(t);let i=$();return Z(i.closeLoginModal())}),N(19,"Cancel"),R(),x(20,"button",79),Q("click",function(){X(t);let i=$();return Z(i.attemptLogin())}),N(21,"Login"),R()()()()}if(n&2){let t=$();V(4),ct("Login as ",t.loginTargetUser==null?null:t.loginTargetUser.name),V(7),Ue("src",(t.loginTargetUser==null?null:t.loginTargetUser.avatarUrl)||"https://ui-avatars.com/api/?name="+(t.loginTargetUser==null?null:t.loginTargetUser.name)+"&background=random",Xn),V(4),un("ngModel",t.loginPasswordInput),V(),de(t.loginError?16:-1)}}var pw=class n{userService=j(Or);dialogService=j(Fr);imageService=j(nh);users=this.userService.users;currentUser=this.userService.currentUser;userRoles=P4;showLoginModal=!1;loginTargetUser=null;loginPasswordInput="";loginError="";openLoginModal(e){this.loginTargetUser=e,this.loginPasswordInput="",this.loginError="",this.showLoginModal=!0}closeLoginModal(){this.showLoginModal=!1}async attemptLogin(){if(!this.loginTargetUser)return;if((this.loginTargetUser.password||"")!==this.loginPasswordInput){this.loginError="Incorrect password";return}try{await this.userService.login(this.loginTargetUser)}finally{this.closeLoginModal()}}searchQuery=be("");roleFilter=be("All");statusFilter=be("All");filteredUsers=st(()=>{let e=this.users(),t=this.searchQuery().toLowerCase(),r=this.roleFilter(),i=this.statusFilter();return t&&(e=e.filter(s=>s.name.toLowerCase().includes(t))),r!=="All"&&(e=e.filter(s=>s.role===r)),i!=="All"&&(e=e.filter(s=>s.status===i)),e});showModal=!1;editingUser=null;formName="";formPassword="";formRole="member";formStatus="active";formAvatarUrl="";openAddModal(){this.editingUser=null,this.resetForm(),this.showModal=!0}openEditModal(e){this.editingUser=e,this.formName=e.name,this.formRole=e.role,this.formStatus=e.status,this.formAvatarUrl=e.avatarUrl||"",this.showModal=!0}closeModal(){this.showModal=!1}resetForm(){this.formName="",this.formPassword="",this.formRole="member",this.formStatus="active",this.formAvatarUrl=""}removeAvatar(e){e.stopPropagation(),this.formAvatarUrl=""}async saveUser(){if(this.formName.trim())try{if(this.editingUser){let e={name:this.formName,role:this.formRole,status:this.formStatus,avatarUrl:this.formAvatarUrl};this.formPassword&&(e.password=this.formPassword),await this.userService.updateUser(this.editingUser.id,e)}else await this.userService.createUser({name:this.formName,password:this.formPassword,role:this.formRole,status:"pending",avatarUrl:this.formAvatarUrl||`https://ui-avatars.com/api/?name=${this.formName}&background=random`})}finally{this.closeModal()}}async deleteUser(e){await this.dialogService.confirm(`Delete user ${e.name}?`,"Delete User")&&await this.userService.deleteUser(e.id)}getRoleLabel(e){return this.userRoles.find(t=>t.value===e)?.label||e}getRoleClass(e){return this.userRoles.find(t=>t.value===e)?.colorClass||"bg-gray-100 text-gray-800"}getStatusColor(e){switch(e){case"active":return"bg-emerald-500 shadow-[0_0_8px_rgba(16,185,129,0.5)]";case"away":return"bg-amber-500 shadow-[0_0_8px_rgba(245,158,11,0.5)]";case"offline":return"bg-gray-500";case"pending":return"border-2 border-primary/50 border-t-transparent animate-spin";default:return"bg-gray-400"}}getStatusLabel(e){return e==="pending"?"Invited":e.charAt(0).toUpperCase()+e.slice(1)}async onAvatarSelected(e){let t=e.target.files?.[0];t&&(this.formAvatarUrl=await this.imageService.compressImage(t))}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=$n({type:n,selectors:[["app-users"]],decls:78,vars:7,consts:[["fileInput",""],[1,"flex-1","flex","flex-col","h-full","overflow-hidden","bg-background-light","dark:bg-background-dark","relative"],[1,"flex","items-center","justify-between","px-8","py-5","border-b","border-border-dark","bg-background-dark","sticky","top-0","z-10"],[1,"flex","flex-col","gap-1"],[1,"text-white","text-2xl","font-bold","leading-tight","tracking-tight"],[1,"flex","items-center","gap-4"],[1,"size-10","rounded-full","bg-surface-dark","hover:bg-border-dark","flex","items-center","justify-center","text-text-muted","hover:text-white","transition-colors"],[1,"material-symbols-outlined"],[1,"bg-primary","hover:bg-primary-hover","text-white","h-10","px-5","rounded-lg","text-sm","font-bold","flex","items-center","gap-2","transition-all","shadow-lg","shadow-primary/20",3,"click"],[1,"material-symbols-outlined","text-[20px]"],[1,"flex-1","overflow-y-auto","p-8"],[1,"max-w-[1200px]","mx-auto","flex","flex-col","gap-6"],[1,"text-text-muted","text-base","max-w-2xl"],[1,"flex","flex-col","sm:flex-row","gap-4","justify-between","items-start","sm:items-center","bg-surface-dark","p-4","rounded-xl","border","border-border-dark"],[1,"relative","w-full","sm:max-w-md","group"],[1,"absolute","inset-y-0","left-0","pl-3","flex","items-center","pointer-events-none"],[1,"material-symbols-outlined","text-text-muted","group-focus-within:text-primary","transition-colors"],["placeholder","Search users by name...","type","text",1,"block","w-full","pl-10","pr-3","py-2.5","border","border-border-dark","rounded-lg","leading-5","bg-background-dark","text-white","placeholder-text-muted","focus:outline-none","focus:ring-1","focus:ring-primary","focus:border-primary","sm:text-sm","transition-all",3,"ngModelChange","ngModel"],[1,"flex","gap-3","w-full","sm:w-auto"],[1,"relative"],[1,"appearance-none","bg-background-dark","border","border-border-dark","text-white","text-sm","rounded-lg","focus:ring-primary","focus:border-primary","block","w-full","pl-3","pr-10","py-2.5","cursor-pointer","hover:border-slate-600","transition-colors",3,"ngModelChange","ngModel"],["value","All"],[3,"value"],[1,"pointer-events-none","absolute","inset-y-0","right-0","flex","items-center","px-2","text-text-muted"],["value","active"],["value","pending"],["value","inactive"],["value","offline"],["value","away"],[1,"bg-surface-dark","rounded-xl","border","border-border-dark","overflow-hidden","shadow-sm"],[1,"overflow-x-auto"],[1,"w-full","text-left","border-collapse"],[1,"border-b","border-border-dark","bg-surface-dark"],[1,"py-4","px-6","text-xs","font-semibold","uppercase","tracking-wider","text-text-muted"],[1,"py-4","px-6","text-xs","font-semibold","uppercase","tracking-wider","text-text-muted","text-right"],[1,"divide-y","divide-border-dark"],[1,"hover:bg-slate-800","transition-colors","group"],[1,"px-6","py-4","border-t","border-border-dark","bg-surface-dark","flex","items-center","justify-between"],[1,"text-sm","text-text-muted"],[1,"font-medium","text-white"],[1,"fixed","inset-0","z-50","flex","items-center","justify-center","p-4","bg-black/50","backdrop-blur-sm","animate-in","fade-in","duration-200"],[1,"py-4","px-6","whitespace-nowrap"],[1,"bg-center","bg-no-repeat","bg-cover","rounded-full","size-10","border","border-border-dark","bg-surface-dark","relative","overflow-hidden"],[1,"absolute","inset-0","flex","items-center","justify-center","text-xs","font-bold","text-text-muted","bg-border-dark"],[1,"flex","flex-col"],[1,"text-white","text-sm","font-semibold"],[1,"inline-flex","items-center","px-2.5","py-0.5","rounded-full","text-xs","font-medium","border"],[1,"flex","items-center","gap-2"],[1,"h-2","w-2","rounded-full"],[1,"text-sm"],[1,"text-text-muted","text-sm"],[1,"py-4","px-6","whitespace-nowrap","text-right"],[1,"flex","items-center","justify-end","gap-2","opacity-0","group-hover:opacity-100","transition-opacity"],[1,"p-2","text-text-muted","hover:text-white","hover:bg-border-dark","rounded-lg","transition-colors",3,"click","title","disabled"],["title","Edit User",1,"p-2","text-text-muted","hover:text-white","hover:bg-border-dark","rounded-lg","transition-colors",3,"click"],["title","Delete User",1,"p-2","text-text-muted","hover:text-red-400","hover:bg-border-dark","rounded-lg","transition-colors",3,"click"],["colspan","5",1,"py-12","text-center","text-text-muted"],[1,"material-symbols-outlined","text-4xl","mb-2","opacity-50"],[1,"bg-surface-dark","border","border-border-dark","w-full","max-w-md","rounded-xl","shadow-2xl","overflow-hidden","animate-in","zoom-in-95","duration-200"],[1,"p-6","border-b","border-border-dark","flex","justify-between","items-center","bg-background-dark"],[1,"font-bold","text-lg","text-white"],[1,"p-1","rounded-full","hover:bg-border-dark","text-text-muted","hover:text-white","transition-colors",3,"click"],[1,"p-6","space-y-4"],[1,"flex","items-center","gap-4","pb-2","border-b","border-border-dark"],[1,"relative","size-14","rounded-full","bg-background-dark","border","border-border-dark","overflow-hidden","flex","items-center","justify-center","group","cursor-pointer",3,"click"],[1,"w-full","h-full","object-cover",3,"src"],[1,"material-symbols-outlined","text-text-muted","text-2xl"],[1,"absolute","inset-0","bg-black/50","flex","items-center","justify-center","opacity-0","group-hover:opacity-100","transition-opacity"],[1,"material-symbols-outlined","text-white","text-sm"],["title","Remove Photo",1,"absolute","top-0","right-0","bg-red-500","rounded-full","p-0.5","text-white","z-20","hover:bg-red-600","transition-colors","shadow-sm","flex","items-center","justify-center","transform","translate-x-1/4","-translate-y-1/4"],[1,"text-xs","font-semibold","uppercase","text-text-muted"],[1,"text-xs","text-text-muted"],["type","file","accept","image/*",1,"hidden",3,"change"],[1,"block","text-xs","font-semibold","uppercase","text-text-muted","mb-1.5"],["type","text","placeholder","e.g. Alex Johnson",1,"w-full","bg-background-dark","border","border-border-dark","rounded-lg","px-4","py-2.5","text-white","focus:outline-none","focus:border-primary","focus:ring-1","focus:ring-primary","transition-all",3,"ngModelChange","ngModel"],["type","password",1,"w-full","bg-background-dark","border","border-border-dark","rounded-lg","px-4","py-2.5","text-white","focus:outline-none","focus:border-primary","focus:ring-1","focus:ring-primary","transition-all",3,"ngModelChange","ngModel","placeholder"],[1,"w-full","bg-background-dark","border","border-border-dark","rounded-lg","px-4","py-2.5","text-white","focus:outline-none","focus:border-primary","focus:ring-1","focus:ring-primary","transition-all","appearance-none",3,"ngModelChange","ngModel"],[1,"p-4","bg-background-dark","border-t","border-border-dark","flex","justify-end","gap-3"],[1,"px-5","py-2.5","rounded-lg","border","border-border-dark","text-text-muted","font-bold","text-sm","hover:text-white","hover:border-white","transition-colors",3,"click"],[1,"px-5","py-2.5","rounded-lg","bg-primary","text-white","font-bold","text-sm","hover:bg-primary-hover","transition-colors","shadow-lg","shadow-primary/20",3,"click"],["title","Remove Photo",1,"absolute","top-0","right-0","bg-red-500","rounded-full","p-0.5","text-white","z-20","hover:bg-red-600","transition-colors","shadow-sm","flex","items-center","justify-center","transform","translate-x-1/4","-translate-y-1/4",3,"click"],[1,"material-symbols-outlined","text-[10px]","font-bold"],[1,"bg-surface-dark","border","border-border-dark","w-full","max-w-sm","rounded-xl","shadow-2xl","overflow-hidden","animate-in","zoom-in-95","duration-200"],[1,"flex","justify-center","mb-4"],[1,"relative","size-20","rounded-full","border-2","border-border-dark","overflow-hidden"],["type","password","placeholder","Enter password","autofocus","",1,"w-full","bg-background-dark","border","border-border-dark","rounded-lg","px-4","py-2.5","text-white","focus:outline-none","focus:border-primary","focus:ring-1","focus:ring-primary","transition-all",3,"ngModelChange","keyup.enter","ngModel"],[1,"text-red-400","text-xs","mt-1"]],template:function(t,r){t&1&&(x(0,"div",1)(1,"header",2)(2,"div",3)(3,"h2",4),N(4,"User Management"),R()(),x(5,"div",5)(6,"button",6)(7,"span",7),N(8,"notifications"),R()(),x(9,"button",8),Q("click",function(){return r.openAddModal()}),x(10,"span",9),N(11,"add"),R(),x(12,"span"),N(13,"Add New User"),R()()()(),x(14,"div",10)(15,"div",11)(16,"p",12),N(17," Manage access and roles for your household members. You can invite new family members, assign tasks, and control permissions. "),R(),x(18,"div",13)(19,"div",14)(20,"div",15)(21,"span",16),N(22,"search"),R()(),x(23,"input",17),Q("ngModelChange",function(s){return r.searchQuery.set(s)}),R()(),x(24,"div",18)(25,"div",19)(26,"select",20),Q("ngModelChange",function(s){return r.roleFilter.set(s)}),x(27,"option",21),N(28,"All Roles"),R(),Ct(29,iee,2,2,"option",22,O4),R(),x(31,"div",23)(32,"span",9),N(33,"expand_more"),R()()(),x(34,"div",19)(35,"select",20),Q("ngModelChange",function(s){return r.statusFilter.set(s)}),x(36,"option",21),N(37,"All Status"),R(),x(38,"option",24),N(39,"Active"),R(),x(40,"option",25),N(41,"Pending"),R(),x(42,"option",26),N(43,"Inactive"),R(),x(44,"option",27),N(45,"Offline"),R(),x(46,"option",28),N(47,"Away"),R()(),x(48,"div",23)(49,"span",9),N(50,"expand_more"),R()()()()(),x(51,"div",29)(52,"div",30)(53,"table",31)(54,"thead")(55,"tr",32)(56,"th",33),N(57,"User"),R(),x(58,"th",33),N(59,"Role"),R(),x(60,"th",33),N(61,"Status"),R(),x(62,"th",33),N(63,"Last Active"),R(),x(64,"th",34),N(65,"Actions"),R()()(),x(66,"tbody",35),Ct(67,oee,31,22,"tr",36,ree,!1,aee,6,0,"tr"),R()()(),x(70,"div",37)(71,"p",38),N(72,"Showing "),x(73,"span",39),N(74),R(),N(75," users"),R()()()()(),ue(76,fee,44,9,"div",40),ue(77,gee,22,4,"div",40),R()),t&2&&(V(23),Ue("ngModel",r.searchQuery()),V(3),Ue("ngModel",r.roleFilter()),V(3),Tt(r.userRoles),V(6),Ue("ngModel",r.statusFilter()),V(32),Tt(r.filteredUsers()),V(7),Pe(r.filteredUsers().length),V(2),de(r.showModal?76:-1),V(),de(r.showLoginModal?77:-1))},dependencies:[Ar,Pa,Xd,Zd,es,Ma,Na,no,Ef],encapsulation:2})};var F4=[{path:"",redirectTo:"overview",pathMatch:"full"},{path:"overview",component:uw},{path:"groceries",component:fw},{path:"users",component:pw}];var V4={providers:[rE(),aC(F4),LO(()=>UO(Qd.firebase)),a4(()=>c4()),lF(()=>uF())]};function mee(n,e){if(n&1&&(Pi(0,"h3",4),N(1),Go()),n&2){let t=$();V(),Pe(t.title)}}function yee(n,e){if(n&1){let t=je();Pi(0,"button",9),bu("click",function(){X(t);let i=$(2);return Z(i.cancel())}),N(1),Go()}if(n&2){let t=$();V(),ct(" ",t.cancelText||"Cancel"," ")}}function vee(n,e){if(n&1){let t=je();Pi(0,"div",0)(1,"div",1),bu("click",function(){let i=X(t),s=$();return Z(i.type==="confirm"?s.cancel():s.confirm())}),Go(),Pi(2,"div",2)(3,"div",3),ue(4,mee,2,1,"h3",4),Pi(5,"p",5),N(6),Go()(),Pi(7,"div",6),ue(8,yee,2,1,"button",7),Pi(9,"button",8),bu("click",function(){X(t);let i=$();return Z(i.confirm())}),N(10),Go()()()()}if(n&2){let t=e;V(4),de(t.title?4:-1),V(2),Pe(t.message),V(2),de(t.type==="confirm"?8:-1),V(),Mn("bg-rose-500",t.type==="error")("bg-primary",t.type!=="error"),V(),ct(" ",t.confirmText||"OK"," ")}}var gw=class n{dialogService=j(Fr);confirm(){this.dialogService.close(!0)}cancel(){this.dialogService.close(!1)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=$n({type:n,selectors:[["app-dialog"]],decls:1,vars:1,consts:[[1,"fixed","inset-0","z-[100]","flex","items-center","justify-center","p-4","bg-black/50","backdrop-blur-sm","animate-in","fade-in","duration-200"],[1,"absolute","inset-0",3,"click"],[1,"relative","bg-white","dark:bg-surface-dark","w-full","max-w-sm","rounded-2xl","shadow-xl","overflow-hidden","animate-in","zoom-in-95","duration-200","border","border-slate-200","dark:border-border-dark"],[1,"p-6"],[1,"text-xl","font-bold","text-slate-900","dark:text-white","mb-2"],[1,"text-slate-600","dark:text-slate-300","leading-relaxed"],[1,"p-4","bg-slate-50","dark:bg-black/20","flex","justify-end","gap-3"],[1,"px-4","py-2","rounded-lg","text-slate-600","dark:text-slate-400","font-bold","hover:bg-slate-200","dark:hover:bg-border-dark","transition-colors"],[1,"px-5","py-2","rounded-lg","text-slate-900","font-bold","hover:brightness-110","transition-all","shadow-lg","active:scale-95",3,"click"],[1,"px-4","py-2","rounded-lg","text-slate-600","dark:text-slate-400","font-bold","hover:bg-slate-200","dark:hover:bg-border-dark","transition-colors",3,"click"]],template:function(t,r){if(t&1&&ue(0,vee,11,8,"div",0),t&2){let i;de((i=r.dialogService.dialog())?0:-1,i)}},dependencies:[Ar],encapsulation:2})};var mw=class n{firestore=j(di);COLLECTIONS=["groceries","categories","overview_tasks","assignees","shopping_history"];async migrateAllDataToUser(e){if(!e)return console.error("\u274C userId is required"),[];console.log(`\u{1F504} Starting data migration to userId: ${e}`);let t=[];for(let r of this.COLLECTIONS){let i=await this.migrateCollection(r,e);t.push(i)}return console.log("\u2705 Migration complete!",t),t}async migrateCollection(e,t){console.log(`  \u{1F4C1} Migrating collection: ${e}`);let r=0,i=0;try{let s=to(this.firestore,e),a=(await C1(s)).docs.map(async c=>{let d=c.data();if(d.userId===t){console.log(`    \u23ED\uFE0F Skipping ${c.id} (already has userId)`);return}if(d.userId==="system"&&e==="categories"){console.log(`    \u23ED\uFE0F Skipping ${c.id} (system category)`);return}try{await ka(Pr(this.firestore,e,c.id),{userId:t}),console.log(`    \u2705 Updated ${c.id}`),r++}catch(h){console.error(`    \u274C Error updating ${c.id}:`,h),i++}});await Promise.all(a)}catch(s){console.error(`  \u274C Error reading collection ${e}:`,s),i++}return console.log(`  \u{1F4CA} ${e}: ${r} updated, ${i} errors`),{collection:e,updated:r,errors:i}}async previewMigration(){console.log("\u{1F4CB} Preview of data to migrate:");for(let e of this.COLLECTIONS)try{let t=to(this.firestore,e),r=await C1(t),i=r.docs.filter(s=>{let o=s.data();return!o.userId||o.userId!=="system"&&e!=="categories"});console.log(`  \u{1F4C1} ${e}: ${i.length}/${r.docs.length} documents need migration`)}catch(t){console.error(`  \u274C Error reading ${e}:`,t)}}static \u0275fac=function(t){return new(t||n)};static \u0275prov=se({token:n,factory:n.\u0275fac,providedIn:"root"})};var _ee=(n,e)=>e.id;function wee(n,e){n&1&&(x(0,"h1",6),N(1,"HomeNeeds"),R())}function Iee(n,e){n&1&&(x(0,"p",7),N(1,"Manage your home effortlessly"),R())}function Eee(n,e){n&1&&(x(0,"span",11),N(1,"Overview"),R())}function bee(n,e){n&1&&(x(0,"span",14),N(1,"Groceries"),R())}function Cee(n,e){n&1&&(x(0,"span",14),N(1,"Users"),R())}function Tee(n,e){n&1&&(x(0,"span",18),N(1,"Log Out"),R())}function See(n,e){if(n&1&&(x(0,"div",20)(1,"div",26)(2,"span",27),N(3,"pending_actions"),R(),x(4,"span",28),N(5,"Today"),R()(),x(6,"p",29),N(7),R(),x(8,"p",30),N(9,"Items Pending"),R()()),n&2){let t=$();V(7),Pe(t.pendingItemsCount())}}function Dee(n,e){if(n&1&&(x(0,"div",21)(1,"span",31),N(2,"pending_actions"),R(),x(3,"span",32),N(4),R()()),n&2){let t=$();V(4),Pe(t.pendingItemsCount())}}function Aee(n,e){if(n&1&&(x(0,"div",33)(1,"span",34),N(2),R(),x(3,"span",35),N(4),R()(),x(5,"span",36),N(6,"expand_more"),R()),n&2){let t,r,i=$();V(2),Pe(((t=i.currentUser())==null?null:t.name)||"Guest"),V(2),Pe(((r=i.currentUser())==null?null:r.role)||"Visitor")}}function xee(n,e){n&1&&(x(0,"div",47)(1,"span",49),N(2,"lock"),R()())}function Ree(n,e){if(n&1){let t=je();x(0,"button",44),Q("click",function(){let i=X(t).$implicit,s=$(3);return Z(s.selectUser(i))}),x(1,"div",45),Ot(2,"img",46),ue(3,xee,3,0,"div",47),R(),x(4,"span",48),N(5),R()()}if(n&2){let t=e.$implicit;V(2),Ue("src",t.avatarUrl||"https://ui-avatars.com/api/?name="+t.name+"&background=random",Xn),V(),de(t.password?3:-1),V(2),Pe(t.name)}}function kee(n,e){if(n&1&&(x(0,"div",41),Ct(1,Ree,6,3,"button",43,_ee),R()),n&2){let t=$(2);V(),Tt(t.users())}}function Nee(n,e){if(n&1&&(x(0,"p",55),N(1),R()),n&2){let t=$(3);V(),Pe(t.loginError())}}function Mee(n,e){if(n&1){let t=je();x(0,"div",42)(1,"div",50)(2,"div",51),Ot(3,"img",46),R(),x(4,"h3",52),N(5),R()(),x(6,"div",53)(7,"div")(8,"input",54),Q("input",function(i){X(t);let s=$(2);return Z(s.passwordInput.set(i.target.value))})("keyup.enter",function(){X(t);let i=$(2);return Z(i.verifyLogin())}),R(),ue(9,Nee,2,1,"p",55),R(),x(10,"button",56),Q("click",function(){X(t);let i=$(2);return Z(i.verifyLogin())}),N(11,"Login"),R(),x(12,"button",57),Q("click",function(){X(t);let i=$(2);return Z(i.cancelPassword())}),N(13,"Back"),R()()()}if(n&2){let t,r,i=$(2);V(3),Ue("src",((t=i.selectedUser())==null?null:t.avatarUrl)||"https://ui-avatars.com/api/?name="+((t=i.selectedUser())==null?null:t.name)+"&background=random",Xn),V(2),Pe((r=i.selectedUser())==null?null:r.name),V(3),Ue("value",i.passwordInput()),V(),de(i.loginError()?9:-1)}}function Pee(n,e){if(n&1&&(x(0,"div",25)(1,"div",37)(2,"div",38)(3,"h1",39),N(4,"Welcome Back"),R(),x(5,"p",40),N(6,"Who is using HomeNeeds?"),R()(),ue(7,kee,3,0,"div",41)(8,Mee,14,4,"div",42),R()()),n&2){let t=$();V(7),de(t.loginStep()==="select"?7:8)}}var yw=class n{title=be("frontend");overviewService=j(ts);userService=j(Or);migrationService=j(mw);users=this.userService.users;currentUser=this.userService.currentUser;loading=this.userService.loading;sidebarCollapsed=be(this.getSavedSidebarState());loginStep=be("select");selectedUser=be(null);passwordInput=be("");loginError=be("");pendingItemsCount=st(()=>this.overviewService.tasks().filter(e=>!e.isCompleted).length);constructor(){window.userService=this.userService,window.migrationService=this.migrationService,console.log("\u{1F527} Dev Console Tools Available:"),console.log("   \u2192 window.userService.manualMigrateAllUsers()"),console.log('   \u2192 window.migrationService.migrateAllDataToUser("user_xxx")'),console.log("   \u2192 window.migrationService.previewMigration()"),xi(()=>{let e=this.sidebarCollapsed();localStorage.setItem("sidebar-collapsed",JSON.stringify(e))})}getSavedSidebarState(){let e=localStorage.getItem("sidebar-collapsed");return e?JSON.parse(e):!1}toggleSidebar(){this.sidebarCollapsed.update(e=>!e)}selectUser(e){e.password?(this.selectedUser.set(e),this.loginStep.set("password"),this.passwordInput.set(""),this.loginError.set("")):this.userService.login(e)}cancelPassword(){this.loginStep.set("select"),this.selectedUser.set(null)}async verifyLogin(){let e=this.selectedUser();e&&(e.password===this.passwordInput()?(await this.userService.login(e),this.loginStep.set("select"),this.selectedUser.set(null)):this.loginError.set("Incorrect password"))}logout(){this.userService.logout()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=$n({type:n,selectors:[["app-root"]],hostAttrs:[1,"w-full","h-screen","flex","overflow-hidden"],decls:38,vars:29,consts:[["id","app-sidebar"],["id","sidebar-toggle",1,"absolute","-right-3","top-6","z-10","w-6","h-6","bg-primary","rounded-full","flex","items-center","justify-center","shadow-lg","hover:bg-primary-hover","transition-all",3,"click","title"],[1,"material-symbols-outlined","text-white","text-sm",2,"font-size","16px"],[1,"flex","flex-col","mb-8"],[1,"flex","items-center","gap-2","mb-1"],[1,"material-symbols-outlined","text-primary",2,"font-size","32px"],[1,"text-2xl","font-extrabold","tracking-tight","whitespace-nowrap"],[1,"text-sm","text-slate-500","dark:text-text-muted"],["id","main-nav",1,"flex","flex-col","gap-2"],["id","nav-overview","routerLink","/overview","routerLinkActive","bg-primary/10 text-primary-hover dark:text-primary",3,"title"],[1,"material-symbols-outlined","filled"],[1,"font-bold","text-sm"],["id","nav-groceries","routerLink","/groceries","routerLinkActive","bg-primary/10 text-primary-hover dark:text-primary",3,"title"],[1,"material-symbols-outlined","group-hover:text-slate-900","dark:group-hover:text-white","transition-colors"],[1,"font-medium","text-sm","group-hover:text-slate-900","dark:group-hover:text-white","transition-colors"],["id","nav-users","routerLink","/users","routerLinkActive","bg-primary/10 text-primary-hover dark:text-primary",3,"title"],["id","nav-logout",3,"click","title"],[1,"material-symbols-outlined","group-hover:text-red-500","dark:group-hover:text-red-400","transition-colors"],[1,"font-medium","text-sm","group-hover:text-red-500","dark:group-hover:text-red-400","transition-colors"],[1,"flex","flex-col","gap-4","mt-8"],["id","stats-card",1,"p-5","rounded-2xl","bg-surface-dark/40","border","border-border-dark","backdrop-blur-sm"],["title","Items Pending",1,"flex","flex-col","items-center","p-2","rounded-xl","bg-surface-dark/40","border","border-border-dark"],["id","user-profile"],["alt","User avatar",1,"w-8","h-8","rounded-full","object-cover",3,"src","title"],[1,"flex-1","h-screen","flex","flex-col","overflow-hidden"],[1,"fixed","inset-0","z-[100]","bg-[#111317]","flex","items-center","justify-center","p-4"],[1,"flex","justify-between","items-start","mb-2"],[1,"material-symbols-outlined","text-text-muted"],[1,"text-xs","font-bold","text-primary","bg-primary/10","px-2","py-1","rounded-full"],[1,"text-3xl","font-black","text-white","leading-tight","mb-1"],[1,"text-xs","text-text-muted","font-medium"],[1,"material-symbols-outlined","text-text-muted","text-sm"],[1,"text-lg","font-bold","text-white"],[1,"flex","flex-col"],[1,"text-sm","font-bold","text-white","leading-none"],[1,"text-[10px]","text-text-muted","capitalize"],[1,"material-symbols-outlined","text-text-muted","ml-auto","text-sm"],[1,"max-w-4xl","w-full","flex","flex-col","items-center","gap-12","animate-in","fade-in","zoom-in","duration-300"],[1,"text-center","space-y-2"],[1,"text-4xl","font-bold","text-white","tracking-tight"],[1,"text-[#9ea7b7]","text-lg"],[1,"flex","flex-wrap","justify-center","gap-8"],[1,"bg-[#1a202e]","border","border-[#292e38]","rounded-2xl","p-8","w-full","max-w-sm","shadow-2xl","animate-in","zoom-in-95","duration-200"],[1,"group","flex","flex-col","items-center","gap-4","transition-transform","hover:scale-105","outline-none","focus:scale-105"],[1,"group","flex","flex-col","items-center","gap-4","transition-transform","hover:scale-105","outline-none","focus:scale-105",3,"click"],[1,"size-24","rounded-full","border-2","border-[#292e38]","group-hover:border-[#2060df]","overflow-hidden","transition-colors","relative"],[1,"w-full","h-full","object-cover",3,"src"],[1,"absolute","inset-0","bg-black/40","flex","items-center","justify-center","opacity-0","group-hover:opacity-100","transition-opacity"],[1,"text-lg","font-medium","text-[#9ea7b7]","group-hover:text-white","transition-colors"],[1,"material-symbols-outlined","text-white"],[1,"flex","flex-col","items-center","gap-4","mb-6"],[1,"size-16","rounded-full","border","border-[#292e38]","overflow-hidden"],[1,"text-white","font-bold","text-xl"],[1,"space-y-4"],["type","password","placeholder","Enter Password","autofocus","",1,"w-full","bg-[#111317]","border","border-[#292e38]","rounded-lg","px-4","py-3","text-white","focus:outline-none","focus:border-[#2060df]","focus:ring-1","focus:ring-[#2060df]","transition-all","text-center","placeholder-[#586173]",3,"input","keyup.enter","value"],[1,"text-red-400","text-xs","mt-2","text-center"],[1,"w-full","py-3","rounded-lg","bg-[#2060df]","text-white","font-bold","hover:bg-[#2060df]/90","transition-colors",3,"click"],[1,"w-full","py-3","rounded-lg","border","border-[#3b4250]","text-[#9ea7b7]","font-bold","hover:text-white","hover:border-white","transition-colors",3,"click"]],template:function(t,r){if(t&1&&(x(0,"aside",0)(1,"button",1),Q("click",function(){return r.toggleSidebar()}),x(2,"span",2),N(3),R()(),x(4,"div")(5,"div",3)(6,"div",4)(7,"span",5),N(8,"checklist"),R(),ue(9,wee,2,0,"h1",6),R(),ue(10,Iee,2,0,"p",7),R(),x(11,"nav",8)(12,"a",9)(13,"span",10),N(14,"dashboard"),R(),ue(15,Eee,2,0,"span",11),R(),x(16,"a",12)(17,"span",13),N(18,"shopping_cart"),R(),ue(19,bee,2,0,"span",14),R(),x(20,"a",15)(21,"span",13),N(22,"group"),R(),ue(23,Cee,2,0,"span",14),R(),x(24,"button",16),Q("click",function(){return r.logout()}),x(25,"span",17),N(26,"logout"),R(),ue(27,Tee,2,0,"span",18),R()()(),x(28,"div",19),ue(29,See,10,1,"div",20)(30,Dee,5,1,"div",21),x(31,"div",22),Ot(32,"img",23),ue(33,Aee,7,2),R()()(),x(34,"div",24),Ot(35,"router-outlet"),R(),Ot(36,"app-dialog"),ue(37,Pee,9,1,"div",25)),t&2){let i,s;it(r.sidebarCollapsed()?"sidebar sidebar-collapsed":"sidebar sidebar-expanded"),V(),Ue("title",r.sidebarCollapsed()?"Expand sidebar":"Collapse sidebar"),V(2),ct(" ",r.sidebarCollapsed()?"chevron_right":"chevron_left"," "),V(6),de(r.sidebarCollapsed()?-1:9),V(),de(r.sidebarCollapsed()?-1:10),V(2),it(r.sidebarCollapsed()?"nav-item nav-item-collapsed":"nav-item"),Ue("title",r.sidebarCollapsed()?"Overview":""),V(3),de(r.sidebarCollapsed()?-1:15),V(),it(r.sidebarCollapsed()?"nav-item nav-item-collapsed":"nav-item"),Ue("title",r.sidebarCollapsed()?"Groceries":""),V(3),de(r.sidebarCollapsed()?-1:19),V(),it(r.sidebarCollapsed()?"nav-item nav-item-collapsed":"nav-item"),Ue("title",r.sidebarCollapsed()?"Users":""),V(3),de(r.sidebarCollapsed()?-1:23),V(),it(r.sidebarCollapsed()?"nav-item nav-item-collapsed text-left mt-auto":"nav-item text-left mt-auto"),Ue("title",r.sidebarCollapsed()?"Log Out":""),V(3),de(r.sidebarCollapsed()?-1:27),V(2),de(r.sidebarCollapsed()?30:29),V(2),it(r.sidebarCollapsed()?"flex items-center justify-center p-2 rounded-full bg-surface-dark cursor-pointer hover:bg-border-dark transition-colors":"flex items-center gap-3 p-4 rounded-full bg-surface-dark cursor-pointer hover:bg-border-dark transition-colors"),V(),Ue("src",((i=r.currentUser())==null?null:i.avatarUrl)||"https://ui-avatars.com/api/?name=Guest&background=random",Xn)("title",((s=r.currentUser())==null?null:s.name)||"Guest"),V(),de(r.sidebarCollapsed()?-1:33),V(4),de(!r.currentUser()&&!r.loading()?37:-1)}},dependencies:[$f,Bu,oC,gw],styles:['.sidebar[_ngcontent-%COMP%]{height:100vh;flex-shrink:0;border-right-width:1px;border-right-style:solid;border-color:#e2e8f0;background-color:#fff;display:flex;flex-direction:column;justify-content:space-between;padding:1.5rem;position:relative;transition:width .3s cubic-bezier(.4,0,.2,1),padding .3s cubic-bezier(.4,0,.2,1)}.dark[_nghost-%COMP%]   .sidebar[_ngcontent-%COMP%], .dark   [_nghost-%COMP%]   .sidebar[_ngcontent-%COMP%]{border-color:#292e38;background-color:#111317}.sidebar-expanded[_ngcontent-%COMP%]{width:20rem}.sidebar-collapsed[_ngcontent-%COMP%]{width:5rem;padding-left:1rem;padding-right:1rem}.nav-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;padding:.75rem 1rem;border-radius:9999px;color:#64748b;transition:all .2s ease;width:100%}.nav-item[_ngcontent-%COMP%]:hover{background-color:#f1f5f9}.dark[_nghost-%COMP%]   .nav-item[_ngcontent-%COMP%], .dark   [_nghost-%COMP%]   .nav-item[_ngcontent-%COMP%]{color:#9ea7b7}.dark[_nghost-%COMP%]   .nav-item[_ngcontent-%COMP%]:hover, .dark   [_nghost-%COMP%]   .nav-item[_ngcontent-%COMP%]:hover{background-color:#1e2433}.nav-item-collapsed[_ngcontent-%COMP%]{justify-content:center;padding-left:.5rem;padding-right:.5rem}.nav-item[_ngcontent-%COMP%]   .material-symbols-outlined[_ngcontent-%COMP%]{transition:transform .2s ease}.sidebar-collapsed[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]:hover   .material-symbols-outlined[_ngcontent-%COMP%]{transform:scale(1.1)}#sidebar-toggle[_ngcontent-%COMP%]{transition:transform .3s ease,box-shadow .2s ease;z-index:100}#sidebar-toggle[_ngcontent-%COMP%]:hover{transform:scale(1.1);box-shadow:0 4px 12px #2060df66}#stats-card[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .2s ease}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}#user-profile[_ngcontent-%COMP%]{transition:all .3s cubic-bezier(.4,0,.2,1)}.sidebar-collapsed[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]{position:relative}.sidebar-collapsed[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]:after{content:attr(title);position:absolute;left:100%;top:50%;transform:translateY(-50%);margin-left:.75rem;padding:.5rem .75rem;background:#1a202e;color:#fff;font-size:.75rem;font-weight:500;border-radius:.5rem;white-space:nowrap;opacity:0;pointer-events:none;transition:opacity .2s ease,transform .2s ease;z-index:100;box-shadow:0 4px 12px #0000004d}.sidebar-collapsed[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]:hover:after{opacity:1;transform:translateY(-50%) translate(4px)}.sidebar-collapsed[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]:not([title]):after, .sidebar-collapsed[_ngcontent-%COMP%]   .nav-item[title=""][_ngcontent-%COMP%]:after{display:none}']})};Vb(yw,V4).catch(n=>console.error(n));
