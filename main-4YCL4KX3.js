var n4=Object.defineProperty,r4=Object.defineProperties;var i4=Object.getOwnPropertyDescriptors;var o1=Object.getOwnPropertySymbols;var s4=Object.prototype.hasOwnProperty,o4=Object.prototype.propertyIsEnumerable;var a1=(n,e,t)=>e in n?n4(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,z=(n,e)=>{for(var t in e||={})s4.call(e,t)&&a1(n,t,e[t]);if(o1)for(var t of o1(e))o4.call(e,t)&&a1(n,t,e[t]);return n},ce=(n,e)=>r4(n,i4(e));var Dn=null,Ig=!1,ew=1,a4=null,On=Symbol("SIGNAL");function fe(n){let e=Dn;return Dn=n,e}function Cg(){return Dn}var ih={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function sh(n){if(Ig)throw new Error("");if(Dn===null)return;Dn.consumerOnSignalRead(n);let e=Dn.producersTail;if(e!==void 0&&e.producer===n)return;let t,r=Dn.recomputing;if(r&&(t=e!==void 0?e.nextProducer:Dn.producers,t!==void 0&&t.producer===n)){Dn.producersTail=t,t.lastReadVersion=n.version;return}let i=n.consumersTail;if(i!==void 0&&i.consumer===Dn&&(!r||l4(i,Dn)))return;let s=Sl(Dn),o={producer:n,consumer:Dn,nextProducer:t,prevConsumer:i,lastReadVersion:n.version,nextConsumer:void 0};Dn.producersTail=o,e!==void 0?e.nextProducer=o:Dn.producers=o,s&&d1(n,o)}function c1(){ew++}function tw(n){if(!(Sl(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===ew)){if(!n.producerMustRecompute(n)&&!Dg(n)){Z0(n);return}n.producerRecomputeValue(n),Z0(n)}}function nw(n){if(n.consumers===void 0)return;let e=Ig;Ig=!0;try{for(let t=n.consumers;t!==void 0;t=t.nextConsumer){let r=t.consumer;r.dirty||c4(r)}}finally{Ig=e}}function rw(){return Dn?.consumerAllowSignalWrites!==!1}function c4(n){n.dirty=!0,nw(n),n.consumerMarkedDirty?.(n)}function Z0(n){n.dirty=!1,n.lastCleanEpoch=ew}function oh(n){return n&&l1(n),fe(n)}function l1(n){n.producersTail=void 0,n.recomputing=!0}function Tg(n,e){fe(e),n&&u1(n)}function u1(n){n.recomputing=!1;let e=n.producersTail,t=e!==void 0?e.nextProducer:n.producers;if(t!==void 0){if(Sl(n))do t=iw(t);while(t!==void 0);e!==void 0?e.nextProducer=void 0:n.producers=void 0}}function Dg(n){for(let e=n.producers;e!==void 0;e=e.nextProducer){let t=e.producer,r=e.lastReadVersion;if(r!==t.version||(tw(t),r!==t.version))return!0}return!1}function ah(n){if(Sl(n)){let e=n.producers;for(;e!==void 0;)e=iw(e)}n.producers=void 0,n.producersTail=void 0,n.consumers=void 0,n.consumersTail=void 0}function d1(n,e){let t=n.consumersTail,r=Sl(n);if(t!==void 0?(e.nextConsumer=t.nextConsumer,t.nextConsumer=e):(e.nextConsumer=void 0,n.consumers=e),e.prevConsumer=t,n.consumersTail=e,!r)for(let i=n.producers;i!==void 0;i=i.nextProducer)d1(i.producer,i)}function iw(n){let e=n.producer,t=n.nextProducer,r=n.nextConsumer,i=n.prevConsumer;if(n.nextConsumer=void 0,n.prevConsumer=void 0,r!==void 0?r.prevConsumer=i:e.consumersTail=i,i!==void 0)i.nextConsumer=r;else if(e.consumers=r,!Sl(e)){let s=e.producers;for(;s!==void 0;)s=iw(s)}return t}function Sl(n){return n.consumerIsAlwaysLive||n.consumers!==void 0}function sw(n){a4?.(n)}function l4(n,e){let t=e.producersTail;if(t!==void 0){let r=e.producers;do{if(r===n)return!0;if(r===t)break;r=r.nextProducer}while(r!==void 0)}return!1}function ow(n,e){return Object.is(n,e)}function Sg(n,e){let t=Object.create(u4);t.computation=n,e!==void 0&&(t.equal=e);let r=()=>{if(tw(t),sh(t),t.value===bg)throw t.error;return t.value};return r[On]=t,sw(t),r}var J0=Symbol("UNSET"),X0=Symbol("COMPUTING"),bg=Symbol("ERRORED"),u4=ce(z({},ih),{value:J0,dirty:!0,error:null,equal:ow,kind:"computed",producerMustRecompute(n){return n.value===J0||n.value===X0},producerRecomputeValue(n){if(n.value===X0)throw new Error("");let e=n.value;n.value=X0;let t=oh(n),r,i=!1;try{r=n.computation(),fe(null),i=e!==J0&&e!==bg&&r!==bg&&n.equal(e,r)}catch(s){r=bg,n.error=s}finally{Tg(n,t)}if(i){n.value=e;return}n.value=r,n.version++}});function d4(){throw new Error}var h1=d4;function f1(n){h1(n)}function aw(n){h1=n}var h4=null;function cw(n,e){let t=Object.create(Ag);t.value=n,e!==void 0&&(t.equal=e);let r=()=>p1(t);return r[On]=t,sw(t),[r,o=>ch(t,o),o=>g1(t,o)]}function p1(n){return sh(n),n.value}function ch(n,e){rw()||f1(n),n.equal(n.value,e)||(n.value=e,f4(n))}function g1(n,e){rw()||f1(n),ch(n,e(n.value))}var Ag=ce(z({},ih),{equal:ow,value:void 0,kind:"signal"});function f4(n){n.version++,c1(),nw(n),h4?.(n)}function lw(n){let e=fe(null);try{return n()}finally{fe(e)}}function Te(n){return typeof n=="function"}function Al(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var xg=Al(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function Pa(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var Zt=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let s of t)s.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(Te(r))try{r()}catch(s){e=s instanceof xg?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{m1(s)}catch(o){e=e??[],o instanceof xg?e=[...e,...o.errors]:e.push(o)}}if(e)throw new xg(e)}}add(e){var t;if(e&&e!==this)if(this.closed)m1(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Pa(t,e)}remove(e){let{_finalizers:t}=this;t&&Pa(t,e),e instanceof n&&e._removeParent(this)}};Zt.EMPTY=(()=>{let n=new Zt;return n.closed=!0,n})();var uw=Zt.EMPTY;function Rg(n){return n instanceof Zt||n&&"closed"in n&&Te(n.remove)&&Te(n.add)&&Te(n.unsubscribe)}function m1(n){Te(n)?n():n.unsubscribe()}var Lr={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var xl={setTimeout(n,e,...t){let{delegate:r}=xl;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=xl;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function kg(n){xl.setTimeout(()=>{let{onUnhandledError:e}=Lr;if(e)e(n);else throw n})}function lh(){}var y1=dw("C",void 0,void 0);function _1(n){return dw("E",void 0,n)}function v1(n){return dw("N",n,void 0)}function dw(n,e,t){return{kind:n,value:e,error:t}}var Oa=null;function Rl(n){if(Lr.useDeprecatedSynchronousErrorHandling){let e=!Oa;if(e&&(Oa={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=Oa;if(Oa=null,t)throw r}}else n()}function w1(n){Lr.useDeprecatedSynchronousErrorHandling&&Oa&&(Oa.errorThrown=!0,Oa.error=n)}var Fa=class extends Zt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Rg(e)&&e.add(this)):this.destination=m4}static create(e,t,r){return new kl(e,t,r)}next(e){this.isStopped?fw(v1(e),this):this._next(e)}error(e){this.isStopped?fw(_1(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?fw(y1,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},p4=Function.prototype.bind;function hw(n,e){return p4.call(n,e)}var pw=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){Ng(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){Ng(r)}else Ng(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Ng(t)}}},kl=class extends Fa{constructor(e,t,r){super();let i;if(Te(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let s;this&&Lr.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&hw(e.next,s),error:e.error&&hw(e.error,s),complete:e.complete&&hw(e.complete,s)}):i=e}this.destination=new pw(i)}};function Ng(n){Lr.useDeprecatedSynchronousErrorHandling?w1(n):kg(n)}function g4(n){throw n}function fw(n,e){let{onStoppedNotification:t}=Lr;t&&xl.setTimeout(()=>t(n,e))}var m4={closed:!0,next:lh,error:g4,complete:lh};var Nl=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Ur(n){return n}function gw(...n){return mw(n)}function mw(n){return n.length===0?Ur:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var Me=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let s=_4(t)?t:new kl(t,r,i);return Rl(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=E1(r),new r((i,s)=>{let o=new kl({next:a=>{try{t(a)}catch(c){s(c),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[Nl](){return this}pipe(...t){return mw(t)(this)}toPromise(t){return t=E1(t),new t((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return n.create=e=>new n(e),n})();function E1(n){var e;return(e=n??Lr.Promise)!==null&&e!==void 0?e:Promise}function y4(n){return n&&Te(n.next)&&Te(n.error)&&Te(n.complete)}function _4(n){return n&&n instanceof Fa||y4(n)&&Rg(n)}function v4(n){return Te(n?.lift)}function Xe(n){return e=>{if(v4(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Ze(n,e,t,r,i){return new yw(n,e,t,r,i)}var yw=class extends Fa{constructor(e,t,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};var I1=Al(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var en=(()=>{class n extends Me{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new Mg(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new I1}next(t){Rl(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){Rl(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Rl(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:s}=this;return r||i?uw:(this.currentObservers=null,s.push(t),new Zt(()=>{this.currentObservers=null,Pa(s,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:s}=this;r?t.error(i):s&&t.complete()}asObservable(){let t=new Me;return t.source=this,t}}return n.create=(e,t)=>new Mg(e,t),n})(),Mg=class extends en{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:uw}};var wn=class extends en{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var _w={now(){return(_w.delegate||Date).now()},delegate:void 0};var Pg=class extends Zt{constructor(e,t){super()}schedule(e,t=0){return this}};var uh={setInterval(n,e,...t){let{delegate:r}=uh;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=uh;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var Ml=class extends Pg{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,s=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(s,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,r=0){return uh.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&uh.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,Pa(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var Pl=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};Pl.now=_w.now;var Ol=class extends Pl{constructor(e,t=Pl.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var vw=new Ol(Ml);var Og=class extends Ml{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var Fg=class extends Ol{};var ww=new Fg(Og);var Wn=new Me(n=>n.complete());function b1(n){return n&&Te(n.schedule)}function C1(n){return n[n.length-1]}function Vg(n){return Te(C1(n))?n.pop():void 0}function fo(n){return b1(C1(n))?n.pop():void 0}function Ew(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function D1(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{d(r.next(h))}catch(p){o(p)}}function c(h){try{d(r.throw(h))}catch(p){o(p)}}function d(h){h.done?s(h.value):i(h.value).then(a,c)}d((r=r.apply(n,e||[])).next())})}function T1(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Va(n){return this instanceof Va?(this.v=n,this):new Va(n)}function S1(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(I){return function(k){return Promise.resolve(k).then(I,p)}}function a(I,k){r[I]&&(i[I]=function(P){return new Promise(function(M,$){s.push([I,P,M,$])>1||c(I,P)})},k&&(i[I]=k(i[I])))}function c(I,k){try{d(r[I](k))}catch(P){y(s[0][3],P)}}function d(I){I.value instanceof Va?Promise.resolve(I.value.v).then(h,p):y(s[0][2],I)}function h(I){c("next",I)}function p(I){c("throw",I)}function y(I,k){I(k),s.shift(),s.length&&c(s[0][0],s[0][1])}}function A1(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof T1=="function"?T1(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(s){t[s]=n[s]&&function(o){return new Promise(function(a,c){o=n[s](o),i(a,c,o.done,o.value)})}}function i(s,o,a,c){Promise.resolve(c).then(function(d){s({value:d,done:a})},o)}}var Lg=n=>n&&typeof n.length=="number"&&typeof n!="function";function Ug(n){return Te(n?.then)}function jg(n){return Te(n[Nl])}function Bg(n){return Symbol.asyncIterator&&Te(n?.[Symbol.asyncIterator])}function $g(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function w4(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Hg=w4();function qg(n){return Te(n?.[Hg])}function zg(n){return S1(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield Va(t.read());if(i)return yield Va(void 0);yield yield Va(r)}}finally{t.releaseLock()}})}function Gg(n){return Te(n?.getReader)}function Nt(n){if(n instanceof Me)return n;if(n!=null){if(jg(n))return E4(n);if(Lg(n))return I4(n);if(Ug(n))return b4(n);if(Bg(n))return x1(n);if(qg(n))return C4(n);if(Gg(n))return T4(n)}throw $g(n)}function E4(n){return new Me(e=>{let t=n[Nl]();if(Te(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function I4(n){return new Me(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function b4(n){return new Me(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,kg)})}function C4(n){return new Me(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function x1(n){return new Me(e=>{D4(n,e).catch(t=>e.error(t))})}function T4(n){return x1(zg(n))}function D4(n,e){var t,r,i,s;return D1(this,void 0,void 0,function*(){try{for(t=A1(n);r=yield t.next(),!r.done;){let o=r.value;if(e.next(o),e.closed)return}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=t.return)&&(yield s.call(t))}finally{if(i)throw i.error}}e.complete()})}function Kn(n,e,t,r=0,i=!1){let s=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(s),!i)return s}function po(n,e=0){return Xe((t,r)=>{t.subscribe(Ze(r,i=>Kn(r,n,()=>r.next(i),e),()=>Kn(r,n,()=>r.complete(),e),i=>Kn(r,n,()=>r.error(i),e)))})}function go(n,e=0){return Xe((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function R1(n,e){return Nt(n).pipe(go(e),po(e))}function k1(n,e){return Nt(n).pipe(go(e),po(e))}function N1(n,e){return new Me(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function M1(n,e){return new Me(t=>{let r;return Kn(t,e,()=>{r=n[Hg](),Kn(t,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){t.error(o);return}s?t.complete():t.next(i)},0,!0)}),()=>Te(r?.return)&&r.return()})}function Wg(n,e){if(!n)throw new Error("Iterable cannot be null");return new Me(t=>{Kn(t,e,()=>{let r=n[Symbol.asyncIterator]();Kn(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function P1(n,e){return Wg(zg(n),e)}function O1(n,e){if(n!=null){if(jg(n))return R1(n,e);if(Lg(n))return N1(n,e);if(Ug(n))return k1(n,e);if(Bg(n))return Wg(n,e);if(qg(n))return M1(n,e);if(Gg(n))return P1(n,e)}throw $g(n)}function Mt(n,e){return e?O1(n,e):Nt(n)}function je(...n){let e=fo(n);return Mt(n,e)}function Iw(n,e){let t=Te(n)?n:()=>n,r=i=>i.error(t());return new Me(e?i=>e.schedule(r,0,i):r)}function Kg(n){return!!n&&(n instanceof Me||Te(n.lift)&&Te(n.subscribe))}var La=Al(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function ut(n,e){return Xe((t,r)=>{let i=0;t.subscribe(Ze(r,s=>{r.next(n.call(e,s,i++))}))})}var{isArray:S4}=Array;function A4(n,e){return S4(e)?n(...e):n(e)}function Qg(n){return ut(e=>A4(n,e))}var{isArray:x4}=Array,{getPrototypeOf:R4,prototype:k4,keys:N4}=Object;function Yg(n){if(n.length===1){let e=n[0];if(x4(e))return{args:e,keys:null};if(M4(e)){let t=N4(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function M4(n){return n&&typeof n=="object"&&R4(n)===k4}function Jg(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function bw(...n){let e=fo(n),t=Vg(n),{args:r,keys:i}=Yg(n);if(r.length===0)return Mt([],e);let s=new Me(P4(r,e,i?o=>Jg(i,o):Ur));return t?s.pipe(Qg(t)):s}function P4(n,e,t=Ur){return r=>{F1(e,()=>{let{length:i}=n,s=new Array(i),o=i,a=i;for(let c=0;c<i;c++)F1(e,()=>{let d=Mt(n[c],e),h=!1;d.subscribe(Ze(r,p=>{s[c]=p,h||(h=!0,a--),a||r.next(t(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}function F1(n,e,t){n?Kn(t,n,e):e()}function V1(n,e,t,r,i,s,o,a){let c=[],d=0,h=0,p=!1,y=()=>{p&&!c.length&&!d&&e.complete()},I=P=>d<r?k(P):c.push(P),k=P=>{s&&e.next(P),d++;let M=!1;Nt(t(P,h++)).subscribe(Ze(e,$=>{i?.($),s?I($):e.next($)},()=>{M=!0},void 0,()=>{if(M)try{for(d--;c.length&&d<r;){let $=c.shift();o?Kn(e,o,()=>k($)):k($)}y()}catch($){e.error($)}}))};return n.subscribe(Ze(e,I,()=>{p=!0,y()})),()=>{a?.()}}function Fn(n,e,t=1/0){return Te(e)?Fn((r,i)=>ut((s,o)=>e(r,s,i,o))(Nt(n(r,i))),t):(typeof e=="number"&&(t=e),Xe((r,i)=>V1(r,i,n,t)))}function L1(n=1/0){return Fn(Ur,n)}function U1(){return L1(1)}function Fl(...n){return U1()(Mt(n,fo(n)))}function dh(n){return new Me(e=>{Nt(n()).subscribe(e)})}function Cw(...n){let e=Vg(n),{args:t,keys:r}=Yg(n),i=new Me(s=>{let{length:o}=t;if(!o){s.complete();return}let a=new Array(o),c=o,d=o;for(let h=0;h<o;h++){let p=!1;Nt(t[h]).subscribe(Ze(s,y=>{p||(p=!0,d--),a[h]=y},()=>c--,void 0,()=>{(!c||!p)&&(d||s.next(r?Jg(r,a):a),s.complete())}))}});return e?i.pipe(Qg(e)):i}function di(n,e){return Xe((t,r)=>{let i=0;t.subscribe(Ze(r,s=>n.call(e,s,i++)&&r.next(s)))})}function hh(n){return Xe((e,t)=>{let r=null,i=!1,s;r=e.subscribe(Ze(t,void 0,void 0,o=>{s=Nt(n(o,hh(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}function Xg(n,e){return Te(e)?Fn(n,e,1):Fn(n,1)}function Tw(n){return Xe((e,t)=>{let r=!1;e.subscribe(Ze(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Zi(n){return n<=0?()=>Wn:Xe((e,t)=>{let r=0;e.subscribe(Ze(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function j1(n=O4){return Xe((e,t)=>{let r=!1;e.subscribe(Ze(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function O4(){return new La}function Dw(n){return Xe((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function es(n,e){let t=arguments.length>=2;return r=>r.pipe(n?di((i,s)=>n(i,s,r)):Ur,Zi(1),t?Tw(e):j1(()=>new La))}function Zg(n){return n<=0?()=>Wn:Xe((e,t)=>{let r=[];e.subscribe(Ze(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function Sw(...n){let e=fo(n);return Xe((t,r)=>{(e?Fl(n,t,e):Fl(n,t)).subscribe(r)})}function hi(n,e){return Xe((t,r)=>{let i=null,s=0,o=!1,a=()=>o&&!i&&r.complete();t.subscribe(Ze(r,c=>{i?.unsubscribe();let d=0,h=s++;Nt(n(c,h)).subscribe(i=Ze(r,p=>r.next(e?e(c,p,h,d++):p),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function fh(n){return Xe((e,t)=>{Nt(n).subscribe(Ze(t,()=>t.complete(),lh)),!t.closed&&e.subscribe(t)})}function Vn(n,e,t){let r=Te(n)||e||t?{next:n,error:e,complete:t}:n;return r?Xe((i,s)=>{var o;(o=r.subscribe)===null||o===void 0||o.call(r);let a=!0;i.subscribe(Ze(s,c=>{var d;(d=r.next)===null||d===void 0||d.call(r,c),s.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),s.complete()},c=>{var d;a=!1,(d=r.error)===null||d===void 0||d.call(r,c),s.error(c)},()=>{var c,d;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(d=r.finalize)===null||d===void 0||d.call(r)}))}):Ur}var Aw;function em(){return Aw}function fi(n){let e=Aw;return Aw=n,e}var B1=Symbol("NotFound");function Vl(n){return n===B1||n?.name==="\u0275NotFound"}var ja=class{full;major;minor;patch;constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},qw=new ja("21.0.5");var sm="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",oe=class extends Error{code;constructor(e,t){super(Ul(e,t)),this.code=e}};function L4(n){return`NG0${Math.abs(n)}`}function Ul(n,e){return`${L4(n)}${e?": "+e:""}`}var rs=globalThis;function et(n){for(let e in n)if(n[e]===et)return e;throw Error("")}function G1(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function ns(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(ns).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let r=t.indexOf(`
`);return r>=0?t.slice(0,r):t}function om(n,e){return n?e?`${n} ${e}`:n:e||""}var U4=et({__forward_ref__:et});function is(n){return n.__forward_ref__=is,n.toString=function(){return ns(this())},n}function En(n){return zw(n)?n():n}function zw(n){return typeof n=="function"&&n.hasOwnProperty(U4)&&n.__forward_ref__===is}function se(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function gi(n){return{providers:n.providers||[],imports:n.imports||[]}}function vh(n){return j4(n,am)}function Gw(n){return vh(n)!==null}function j4(n,e){return n.hasOwnProperty(e)&&n[e]||null}function B4(n){let e=n?.[am]??null;return e||null}function Rw(n){return n&&n.hasOwnProperty(nm)?n[nm]:null}var am=et({\u0275prov:et}),nm=et({\u0275inj:et}),ae=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=se({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function Ww(n){return n&&!!n.\u0275providers}var Kw=et({\u0275cmp:et}),Qw=et({\u0275dir:et}),Yw=et({\u0275pipe:et}),Jw=et({\u0275mod:et}),gh=et({\u0275fac:et}),qa=et({__NG_ELEMENT_ID__:et}),$1=et({__NG_ENV_ID__:et});function Xw(n){return n[Jw]||null}function vo(n){return n[Kw]||null}function Zw(n){return n[Qw]||null}function W1(n){return n[Yw]||null}function za(n){return typeof n=="string"?n:n==null?"":String(n)}function K1(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():za(n)}var Q1=et({ngErrorCode:et}),$4=et({ngErrorMessage:et}),H4=et({ngTokenPath:et});function eE(n,e){return Y1("",-200,e)}function cm(n,e){throw new oe(-201,!1)}function Y1(n,e,t){let r=new oe(e,n);return r[Q1]=e,r[$4]=n,t&&(r[H4]=t),r}function q4(n){return n[Q1]}var kw;function J1(){return kw}function Ln(n){let e=kw;return kw=n,e}function tE(n,e,t){let r=vh(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&8)return null;if(e!==void 0)return e;cm(n,"Injector")}var z4={},Ua=z4,Nw="__NG_DI_FLAG__",Mw=class{injector;constructor(e){this.injector=e}retrieve(e,t){let r=Ba(t)||0;try{return this.injector.get(e,r&8?null:Ua,r)}catch(i){if(Vl(i))return i;throw i}}};function G4(n,e=0){let t=em();if(t===void 0)throw new oe(-203,!1);if(t===null)return tE(n,void 0,e);{let r=W4(e),i=t.retrieve(n,r);if(Vl(i)){if(r.optional)return null;throw i}return i}}function xe(n,e=0){return(J1()||G4)(En(n),e)}function j(n,e){return xe(n,Ba(e))}function Ba(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function W4(n){return{optional:!!(n&8),host:!!(n&1),self:!!(n&2),skipSelf:!!(n&4)}}function Pw(n){let e=[];for(let t=0;t<n.length;t++){let r=En(n[t]);if(Array.isArray(r)){if(r.length===0)throw new oe(900,!1);let i,s=0;for(let o=0;o<r.length;o++){let a=r[o],c=K4(a);typeof c=="number"?c===-1?i=a.token:s|=c:i=a}e.push(xe(i,s))}else e.push(xe(r))}return e}function X1(n,e){return n[Nw]=e,n.prototype[Nw]=e,n}function K4(n){return n[Nw]}function mo(n,e){let t=n.hasOwnProperty(gh);return t?n[gh]:null}function lm(n,e){n.forEach(t=>Array.isArray(t)?lm(t,e):e(t))}function nE(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function wh(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function Z1(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let s=i-2;n[i]=n[s],i--}n[e]=t,n[e+1]=r}}function um(n,e,t){let r=jl(n,e);return r>=0?n[r|1]=t:(r=~r,Z1(n,r,e,t)),r}function dm(n,e){let t=jl(n,e);if(t>=0)return n[t|1]}function jl(n,e){return Q4(n,e,1)}function Q4(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let s=r+(i-r>>1),o=n[s<<t];if(e===o)return s<<t;o>e?i=s:r=s+1}return~(i<<t)}var wo={},Un=[],Ga=new ae(""),rE=new ae("",-1),iE=new ae(""),mh=class{get(e,t=Ua){if(t===Ua){let i=Y1("",-201);throw i.name="\u0275NotFound",i}return t}};function nr(n){return{\u0275providers:n}}function eR(n){return nr([{provide:Ga,multi:!0,useValue:n}])}function tR(...n){return{\u0275providers:sE(!0,n),\u0275fromNgModule:!0}}function sE(n,...e){let t=[],r=new Set,i,s=o=>{t.push(o)};return lm(e,o=>{let a=o;rm(a,s,[],r)&&(i||=[],i.push(a))}),i!==void 0&&nR(i,s),t}function nR(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];oE(i,s=>{e(s,r)})}}function rm(n,e,t,r){if(n=En(n),!n)return!1;let i=null,s=Rw(n),o=!s&&vo(n);if(!s&&!o){let c=n.ngModule;if(s=Rw(c),s)i=c;else return!1}else{if(o&&!o.standalone)return!1;i=n}let a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){let c=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let d of c)rm(d,e,t,r)}}else if(s){if(s.imports!=null&&!a){r.add(i);let d;try{lm(s.imports,h=>{rm(h,e,t,r)&&(d||=[],d.push(h))})}finally{}d!==void 0&&nR(d,e)}if(!a){let d=mo(i)||(()=>new i);e({provide:i,useFactory:d,deps:Un},i),e({provide:iE,useValue:i,multi:!0},i),e({provide:Ga,useValue:()=>xe(i),multi:!0},i)}let c=s.providers;if(c!=null&&!a){let d=n;oE(c,h=>{e(h,d)})}}else return!1;return i!==n&&n.providers!==void 0}function oE(n,e){for(let t of n)Ww(t)&&(t=t.\u0275providers),Array.isArray(t)?oE(t,e):e(t)}var Y4=et({provide:String,useValue:et});function rR(n){return n!==null&&typeof n=="object"&&Y4 in n}function J4(n){return!!(n&&n.useExisting)}function X4(n){return!!(n&&n.useFactory)}function $a(n){return typeof n=="function"}function iR(n){return!!n.useClass}var Eh=new ae(""),tm={},H1={},xw;function Ih(){return xw===void 0&&(xw=new mh),xw}var Pt=class{},Ha=class extends Pt{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,Fw(e,o=>this.processProvider(o)),this.records.set(rE,Ll(void 0,this)),i.has("environment")&&this.records.set(Pt,Ll(void 0,this));let s=this.records.get(Eh);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(iE,Un,{self:!0}))}retrieve(e,t){let r=Ba(t)||0;try{return this.get(e,Ua,r)}catch(i){if(Vl(i))return i;throw i}}destroy(){ph(this),this._destroyed=!0;let e=fe(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),fe(e)}}onDestroy(e){return ph(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){ph(this);let t=fi(this),r=Ln(void 0),i;try{return e()}finally{fi(t),Ln(r)}}get(e,t=Ua,r){if(ph(this),e.hasOwnProperty($1))return e[$1](this);let i=Ba(r),s,o=fi(this),a=Ln(void 0);try{if(!(i&4)){let d=this.records.get(e);if(d===void 0){let h=rB(e)&&vh(e);h&&this.injectableDefInScope(h)?d=Ll(Ow(e),tm):d=null,this.records.set(e,d)}if(d!=null)return this.hydrate(e,d,i)}let c=i&2?Ih():this.parent;return t=i&8&&t===Ua?null:t,c.get(e,t)}catch(c){let d=q4(c);throw d===-200||d===-201?new oe(d,null):c}finally{Ln(a),fi(o)}}resolveInjectorInitializers(){let e=fe(null),t=fi(this),r=Ln(void 0),i;try{let s=this.get(Ga,Un,{self:!0});for(let o of s)o()}finally{fi(t),Ln(r),fe(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(ns(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=En(e);let t=$a(e)?e:En(e&&e.provide),r=eB(e);if(!$a(e)&&e.multi===!0){let i=this.records.get(t);i||(i=Ll(void 0,tm,!0),i.factory=()=>Pw(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t,r){let i=fe(null);try{if(t.value===H1)throw eE(ns(e));return t.value===tm&&(t.value=H1,t.value=t.factory(void 0,r)),typeof t.value=="object"&&t.value&&nB(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{fe(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=En(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function Ow(n){let e=vh(n),t=e!==null?e.factory:mo(n);if(t!==null)return t;if(n instanceof ae)throw new oe(204,!1);if(n instanceof Function)return Z4(n);throw new oe(204,!1)}function Z4(n){if(n.length>0)throw new oe(204,!1);let t=B4(n);return t!==null?()=>t.factory(n):()=>new n}function eB(n){if(rR(n))return Ll(void 0,n.useValue);{let e=aE(n);return Ll(e,tm)}}function aE(n,e,t){let r;if($a(n)){let i=En(n);return mo(i)||Ow(i)}else if(rR(n))r=()=>En(n.useValue);else if(X4(n))r=()=>n.useFactory(...Pw(n.deps||[]));else if(J4(n))r=(i,s)=>xe(En(n.useExisting),s!==void 0&&s&8?8:void 0);else{let i=En(n&&(n.useClass||n.provide));if(tB(n))r=()=>new i(...Pw(n.deps));else return mo(i)||Ow(i)}return r}function ph(n){if(n.destroyed)throw new oe(205,!1)}function Ll(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function tB(n){return!!n.deps}function nB(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function rB(n){return typeof n=="function"||typeof n=="object"&&n.ngMetadataName==="InjectionToken"}function Fw(n,e){for(let t of n)Array.isArray(t)?Fw(t,e):t&&Ww(t)?Fw(t.\u0275providers,e):e(t)}function tn(n,e){let t;n instanceof Ha?(ph(n),t=n):t=new Mw(n);let r,i=fi(t),s=Ln(void 0);try{return e()}finally{fi(i),Ln(s)}}function sR(){return J1()!==void 0||em()!=null}var jr=0,me=1,we=2,ln=3,yr=4,_r=5,Bl=6,$l=7,At=8,ss=9,mi=10,ht=11,Hl=12,cE=13,Wa=14,rr=15,Ka=16,Qa=17,Ya=18,bh=19,lE=20,ts=21,hm=22,Ch=23,ir=24,Ja=25,Xa=26,Ft=27,oR=1,uE=6,Eo=7,Th=8,Dh=9,xt=10;function yi(n){return Array.isArray(n)&&typeof n[oR]=="object"}function Br(n){return Array.isArray(n)&&n[oR]===!0}function dE(n){return(n.flags&4)!==0}function Io(n){return n.componentOffset>-1}function fm(n){return(n.flags&1)===1}function _i(n){return!!n.template}function ql(n){return(n[we]&512)!==0}function Za(n){return(n[we]&256)===256}var aR="svg",cR="math";function vr(n){for(;Array.isArray(n);)n=n[jr];return n}function hE(n,e){return vr(e[n])}function $r(n,e){return vr(e[n.index])}function Sh(n,e){return n.data[e]}function fE(n,e){return n[e]}function pE(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function wr(n,e){let t=e[n];return yi(t)?t:t[jr]}function pm(n){return(n[we]&128)===128}function lR(n){return Br(n[ln])}function vi(n,e){return e==null?null:n[e]}function gE(n){n[Qa]=0}function mE(n){n[we]&1024||(n[we]|=1024,pm(n)&&zl(n))}function uR(n,e){for(;n>0;)e=e[Wa],n--;return e}function Ah(n){return!!(n[we]&9216||n[ir]?.dirty)}function gm(n){n[mi].changeDetectionScheduler?.notify(8),n[we]&64&&(n[we]|=1024),Ah(n)&&zl(n)}function zl(n){n[mi].changeDetectionScheduler?.notify(0);let e=yo(n);for(;e!==null&&!(e[we]&8192||(e[we]|=8192,!pm(e)));)e=yo(e)}function yE(n,e){if(Za(n))throw new oe(911,!1);n[ts]===null&&(n[ts]=[]),n[ts].push(e)}function dR(n,e){if(n[ts]===null)return;let t=n[ts].indexOf(e);t!==-1&&n[ts].splice(t,1)}function yo(n){let e=n[ln];return Br(e)?e[ln]:e}function hR(n){return n[$l]??=[]}function fR(n){return n.cleanup??=[]}var ke={lFrame:xR(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var Vw=!1;function pR(){return ke.lFrame.elementDepthCount}function gR(){ke.lFrame.elementDepthCount++}function _E(){ke.lFrame.elementDepthCount--}function mR(){return ke.bindingsEnabled}function yR(){return ke.skipHydrationRootTNode!==null}function vE(n){return ke.skipHydrationRootTNode===n}function wE(){ke.skipHydrationRootTNode=null}function Pe(){return ke.lFrame.lView}function un(){return ke.lFrame.tView}function X(n){return ke.lFrame.contextLView=n,n[At]}function Z(n){return ke.lFrame.contextLView=null,n}function Sn(){let n=EE();for(;n!==null&&n.type===64;)n=n.parent;return n}function EE(){return ke.lFrame.currentTNode}function _R(){let n=ke.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function Gl(n,e){let t=ke.lFrame;t.currentTNode=n,t.isParent=e}function IE(){return ke.lFrame.isParent}function vR(){ke.lFrame.isParent=!1}function wR(){return ke.lFrame.contextLView}function bE(){return Vw}function CE(n){let e=Vw;return Vw=n,e}function ER(){let n=ke.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function IR(){return ke.lFrame.bindingIndex}function bR(n){return ke.lFrame.bindingIndex=n}function ec(){return ke.lFrame.bindingIndex++}function mm(n){let e=ke.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function CR(){return ke.lFrame.inI18n}function TR(n,e){let t=ke.lFrame;t.bindingIndex=t.bindingRootIndex=n,ym(e)}function DR(){return ke.lFrame.currentDirectiveIndex}function ym(n){ke.lFrame.currentDirectiveIndex=n}function SR(n){let e=ke.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function TE(n){ke.lFrame.currentQueryIndex=n}function iB(n){let e=n[me];return e.type===2?e.declTNode:e.type===1?n[_r]:null}function DE(n,e,t){if(t&4){let i=e,s=n;for(;i=i.parent,i===null&&!(t&1);)if(i=iB(s),i===null||(s=s[Wa],i.type&10))break;if(i===null)return!1;e=i,n=s}let r=ke.lFrame=AR();return r.currentTNode=e,r.lView=n,!0}function _m(n){let e=AR(),t=n[me];ke.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function AR(){let n=ke.lFrame,e=n===null?null:n.child;return e===null?xR(n):e}function xR(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function RR(){let n=ke.lFrame;return ke.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var SE=RR;function vm(){let n=RR();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function kR(n){return(ke.lFrame.contextLView=uR(n,ke.lFrame.contextLView))[At]}function wi(){return ke.lFrame.selectedIndex}function bo(n){ke.lFrame.selectedIndex=n}function wm(){let n=ke.lFrame;return Sh(n.tView,n.selectedIndex)}function NR(){return ke.lFrame.currentNamespace}var MR=!0;function Em(){return MR}function Im(n){MR=n}function Lw(n,e=null,t=null,r){let i=AE(n,e,t,r);return i.resolveInjectorInitializers(),i}function AE(n,e=null,t=null,r,i=new Set){let s=[t||Un,tR(n)];return r=r||(typeof n=="object"?void 0:ns(n)),new Ha(s,e||Ih(),r||null,i)}var Ot=class n{static THROW_IF_NOT_FOUND=Ua;static NULL=new mh;static create(e,t){if(Array.isArray(e))return Lw({name:""},t,e,"");{let r=e.name??"";return Lw({name:r},e.parent,e.providers,r)}}static \u0275prov=se({token:n,providedIn:"any",factory:()=>xe(rE)});static __NG_ELEMENT_ID__=-1},nn=new ae(""),Hr=(()=>{class n{static __NG_ELEMENT_ID__=sB;static __NG_ENV_ID__=t=>t}return n})(),Uw=class extends Hr{_lView;constructor(e){super(),this._lView=e}get destroyed(){return Za(this._lView)}onDestroy(e){let t=this._lView;return yE(t,e),()=>dR(t,e)}};function sB(){return new Uw(Pe())}var PR=!1,os=(()=>{class n{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new wn(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new Me(t=>{t.next(!1),t.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=se({token:n,providedIn:"root",factory:()=>new n})}return n})(),jw=class extends en{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,sR()&&(this.destroyRef=j(Hr,{optional:!0})??void 0,this.pendingTasks=j(os,{optional:!0})??void 0)}emit(e){let t=fe(null);try{super.next(e)}finally{fe(t)}}subscribe(e,t,r){let i=e,s=t||(()=>null),o=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),s=c.error?.bind(c),o=c.complete?.bind(c)}this.__isAsync&&(s=this.wrapInTimeout(s),i&&(i=this.wrapInTimeout(i)),o&&(o=this.wrapInTimeout(o)));let a=super.subscribe({next:i,error:s,complete:o});return e instanceof Zt&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(t)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},St=jw;function im(...n){}function xE(n){let e,t;function r(){n=im;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function RE(n){return queueMicrotask(()=>n()),()=>{n=im}}var kE="isAngularZone",yh=kE+"_ID",oB=0,gt=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new St(!1);onMicrotaskEmpty=new St(!1);onStable=new St(!1);onError=new St(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:s=PR}=e;if(typeof Zone>"u")throw new oe(908,!1);Zone.assertZonePatched();let o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!i&&r,o.shouldCoalesceRunChangeDetection=i,o.callbackScheduled=!1,o.scheduleInRootZone=s,lB(o)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(kE)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new oe(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new oe(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,aB,im,im);try{return s.runTask(o,t,r)}finally{s.cancelTask(o)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},aB={};function NE(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function cB(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){xE(()=>{n.callbackScheduled=!1,Bw(n),n.isCheckStableRunning=!0,NE(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),Bw(n)}function lB(n){let e=()=>{cB(n)},t=oB++;n._inner=n._inner.fork({name:"angular",properties:{[kE]:!0,[yh]:t,[yh+t]:!0},onInvokeTask:(r,i,s,o,a,c)=>{if(uB(c))return r.invokeTask(s,o,a,c);try{return q1(n),r.invokeTask(s,o,a,c)}finally{(n.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),z1(n)}},onInvoke:(r,i,s,o,a,c,d)=>{try{return q1(n),r.invoke(s,o,a,c,d)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!dB(c)&&e(),z1(n)}},onHasTask:(r,i,s,o)=>{r.hasTask(s,o),i===s&&(o.change=="microTask"?(n._hasPendingMicrotasks=o.microTask,Bw(n),NE(n)):o.change=="macroTask"&&(n.hasPendingMacrotasks=o.macroTask))},onHandleError:(r,i,s,o)=>(r.handleError(s,o),n.runOutsideAngular(()=>n.onError.emit(o)),!1)})}function Bw(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function q1(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function z1(n){n._nesting--,NE(n)}var _h=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new St;onMicrotaskEmpty=new St;onStable=new St;onError=new St;run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function uB(n){return OR(n,"__ignore_ng_zone__")}function dB(n){return OR(n,"__scheduler_tick__")}function OR(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var pi=class{_console=console;handleError(e){this._console.error("ERROR",e)}},sr=new ae("",{factory:()=>{let n=j(gt),e=j(Pt),t;return r=>{n.runOutsideAngular(()=>{e.destroyed&&!t?setTimeout(()=>{throw r}):(t??=e.get(pi),t.handleError(r))})}}}),FR={provide:Ga,useValue:()=>{let n=j(pi,{optional:!0})},multi:!0},hB=new ae("",{factory:()=>{let n=j(nn).defaultView;if(!n)return;let e=j(sr),t=s=>{e(s.reason),s.preventDefault()},r=s=>{s.error?e(s.error):e(new Error(s.message,{cause:s})),s.preventDefault()},i=()=>{n.addEventListener("unhandledrejection",t),n.addEventListener("error",r)};typeof Zone<"u"?Zone.root.run(i):i(),j(Hr).onDestroy(()=>{n.removeEventListener("error",r),n.removeEventListener("unhandledrejection",t)})}});function ME(){return nr([eR(()=>void j(hB))])}function Ae(n,e){let[t,r,i]=cw(n,e?.equal),s=t,o=s[On];return s.set=r,s.update=i,s.asReadonly=VR.bind(s),s}function VR(){let n=this[On];if(n.readonlyFn===void 0){let e=()=>this();e[On]=n,n.readonlyFn=e}return n.readonlyFn}var bm=(()=>{class n{view;node;constructor(t,r){this.view=t,this.node=r}static __NG_ELEMENT_ID__=fB}return n})();function fB(){return new bm(Pe(),Sn())}var _o=class{},xh=new ae("",{factory:()=>!0});var PE=new ae(""),Wl=(()=>{class n{internalPendingTasks=j(os);scheduler=j(_o);errorHandler=j(sr);add(){let t=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(t)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(t))}}run(t){let r=this.add();t().catch(this.errorHandler).finally(r)}static \u0275prov=se({token:n,providedIn:"root",factory:()=>new n})}return n})(),OE=(()=>{class n{static \u0275prov=se({token:n,providedIn:"root",factory:()=>new $w})}return n})(),$w=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let t=e.zone,r=this.queues.get(t);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let r=this.queues.get(t);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[t,r]of this.queues)t===null?e||=this.flushQueue(r):e||=t.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let t=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,t=!0,r.run());return t}},Hw=class{[On];constructor(e){this[On]=e}destroy(){this[On].destroy()}};function rn(n){return lw(n)}function eu(n){return{toString:n}.toString()}var Cm="__parameters__";function EB(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function IB(n,e,t){return eu(()=>{let r=EB(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;let o=new i(...s);return a.annotation=o,a;function a(c,d,h){let p=c.hasOwnProperty(Cm)?c[Cm]:Object.defineProperty(c,Cm,{value:[]})[Cm];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(o),c}}return i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var or=X1(IB("Optional"),8);function bB(n){return typeof n=="function"}function hk(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}var km=class{previousValue;currentValue;firstChange;constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}},Co=(()=>{let n=()=>fk;return n.ngInherit=!0,n})();function fk(n){return n.type.prototype.ngOnChanges&&(n.setInput=TB),CB}function CB(){let n=gk(this),e=n?.current;if(e){let t=n.previous;if(t===wo)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function TB(n,e,t,r,i){let s=this.declaredInputs[r],o=gk(n)||DB(n,{previous:wo,current:null}),a=o.current||(o.current={}),c=o.previous,d=c[s];a[s]=new km(d&&d.currentValue,t,c===wo),hk(n,e,i,t)}var pk="__ngSimpleChanges__";function gk(n){return n[pk]||null}function DB(n,e){return n[pk]=e}var LR=[];var tt=function(n,e=null,t){for(let r=0;r<LR.length;r++){let i=LR[r];i(n,e,t)}},ze=(function(n){return n[n.TemplateCreateStart=0]="TemplateCreateStart",n[n.TemplateCreateEnd=1]="TemplateCreateEnd",n[n.TemplateUpdateStart=2]="TemplateUpdateStart",n[n.TemplateUpdateEnd=3]="TemplateUpdateEnd",n[n.LifecycleHookStart=4]="LifecycleHookStart",n[n.LifecycleHookEnd=5]="LifecycleHookEnd",n[n.OutputStart=6]="OutputStart",n[n.OutputEnd=7]="OutputEnd",n[n.BootstrapApplicationStart=8]="BootstrapApplicationStart",n[n.BootstrapApplicationEnd=9]="BootstrapApplicationEnd",n[n.BootstrapComponentStart=10]="BootstrapComponentStart",n[n.BootstrapComponentEnd=11]="BootstrapComponentEnd",n[n.ChangeDetectionStart=12]="ChangeDetectionStart",n[n.ChangeDetectionEnd=13]="ChangeDetectionEnd",n[n.ChangeDetectionSyncStart=14]="ChangeDetectionSyncStart",n[n.ChangeDetectionSyncEnd=15]="ChangeDetectionSyncEnd",n[n.AfterRenderHooksStart=16]="AfterRenderHooksStart",n[n.AfterRenderHooksEnd=17]="AfterRenderHooksEnd",n[n.ComponentStart=18]="ComponentStart",n[n.ComponentEnd=19]="ComponentEnd",n[n.DeferBlockStateStart=20]="DeferBlockStateStart",n[n.DeferBlockStateEnd=21]="DeferBlockStateEnd",n[n.DynamicComponentStart=22]="DynamicComponentStart",n[n.DynamicComponentEnd=23]="DynamicComponentEnd",n[n.HostBindingsUpdateStart=24]="HostBindingsUpdateStart",n[n.HostBindingsUpdateEnd=25]="HostBindingsUpdateEnd",n})(ze||{});function SB(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){let o=fk(e);(t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o)}i&&(t.preOrderHooks??=[]).push(0-n,i),s&&((t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s))}function AB(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:d,ngOnDestroy:h}=s;o&&(n.contentHooks??=[]).push(-t,o),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),d&&((n.viewHooks??=[]).push(t,d),(n.viewCheckHooks??=[]).push(t,d)),h!=null&&(n.destroyHooks??=[]).push(t,h)}}function Sm(n,e,t){mk(n,e,3,t)}function Am(n,e,t,r){(n[we]&3)===t&&mk(n,e,t,r)}function FE(n,e){let t=n[we];(t&3)===e&&(t&=16383,t+=1,n[we]=t)}function mk(n,e,t,r){let i=r!==void 0?n[Qa]&65535:0,s=r??-1,o=e.length-1,a=0;for(let c=i;c<o;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(n[Qa]+=65536),(a<s||s==-1)&&(xB(n,t,e,c),n[Qa]=(n[Qa]&4294901760)+c+2),c++}function UR(n,e){tt(ze.LifecycleHookStart,n,e);let t=fe(null);try{e.call(n)}finally{fe(t),tt(ze.LifecycleHookEnd,n,e)}}function xB(n,e,t,r){let i=t[r]<0,s=t[r+1],o=i?-t[r]:t[r],a=n[o];i?n[we]>>14<n[Qa]>>16&&(n[we]&3)===e&&(n[we]+=16384,UR(a,s)):UR(a,s)}var Ql=-1,nc=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,r,i){this.factory=e,this.name=i,this.canSeeViewProviders=t,this.injectImpl=r}};function RB(n){return(n.flags&8)!==0}function kB(n){return(n.flags&16)!==0}function NB(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let s=t[r++],o=t[r++],a=t[r++];n.setAttribute(e,o,a,s)}else{let s=i,o=t[++r];MB(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),r++}}return r}function yk(n){return n===3||n===4||n===6}function MB(n){return n.charCodeAt(0)===64}function Yl(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?jR(n,t,i,null,e[++r]):jR(n,t,i,null,null))}}return n}function jR(n,e,t,r,i){let s=0,o=n.length;if(e===-1)o=-1;else for(;s<n.length;){let a=n[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<n.length;){let a=n[s];if(typeof a=="number")break;if(a===t){i!==null&&(n[s+1]=i);return}s++,i!==null&&s++}o!==-1&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),i!==null&&n.splice(s++,0,i)}function _k(n){return n!==Ql}function Nm(n){return n&32767}function PB(n){return n>>16}function Mm(n,e){let t=PB(n),r=e;for(;t>0;)r=r[Wa],t--;return r}var WE=!0;function Pm(n){let e=WE;return WE=n,e}var OB=256,vk=OB-1,wk=5,FB=0,Ei={};function VB(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(qa)&&(r=t[qa]),r==null&&(r=t[qa]=FB++);let i=r&vk,s=1<<i;e.data[n+(i>>wk)]|=s}function Om(n,e){let t=Ek(n,e);if(t!==-1)return t;let r=e[me];r.firstCreatePass&&(n.injectorIndex=e.length,VE(r.data,n),VE(e,null),VE(r.blueprint,null));let i=gI(n,e),s=n.injectorIndex;if(_k(i)){let o=Nm(i),a=Mm(i,e),c=a[me].data;for(let d=0;d<8;d++)e[s+d]=a[o+d]|c[o+d]}return e[s+8]=i,s}function VE(n,e){n.push(0,0,0,0,0,0,0,0,e)}function Ek(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function gI(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=Dk(i),r===null)return Ql;if(t++,i=i[Wa],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return Ql}function KE(n,e,t){VB(n,e,t)}function LB(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let r=t.length,i=0;for(;i<r;){let s=t[i];if(yk(s))break;if(s===0)i=i+2;else if(typeof s=="number")for(i++;i<r&&typeof t[i]=="string";)i++;else{if(s===e)return t[i+1];i=i+2}}}return null}function Ik(n,e,t){if(t&8||n!==void 0)return n;cm(e,"NodeInjector")}function bk(n,e,t,r){if(t&8&&r===void 0&&(r=null),(t&3)===0){let i=n[ss],s=Ln(void 0);try{return i?i.get(e,r,t&8):tE(e,r,t&8)}finally{Ln(s)}}return Ik(r,e,t)}function Ck(n,e,t,r=0,i){if(n!==null){if(e[we]&2048&&!(r&2)){let o=HB(n,e,t,r,Ei);if(o!==Ei)return o}let s=Tk(n,e,t,r,Ei);if(s!==Ei)return s}return bk(e,t,r,i)}function Tk(n,e,t,r,i){let s=BB(t);if(typeof s=="function"){if(!DE(e,n,r))return r&1?Ik(i,t,r):bk(e,t,r,i);try{let o;if(o=s(r),o==null&&!(r&8))cm(t);else return o}finally{SE()}}else if(typeof s=="number"){let o=null,a=Ek(n,e),c=Ql,d=r&1?e[rr][_r]:null;for((a===-1||r&4)&&(c=a===-1?gI(n,e):e[a+8],c===Ql||!$R(r,!1)?a=-1:(o=e[me],a=Nm(c),e=Mm(c,e)));a!==-1;){let h=e[me];if(BR(s,a,h.data)){let p=UB(a,e,t,o,r,d);if(p!==Ei)return p}c=e[a+8],c!==Ql&&$R(r,e[me].data[a+8]===d)&&BR(s,a,e)?(o=h,a=Nm(c),e=Mm(c,e)):a=-1}}return i}function UB(n,e,t,r,i,s){let o=e[me],a=o.data[n+8],c=r==null?Io(a)&&WE:r!=o&&(a.type&3)!==0,d=i&1&&s===a,h=jB(a,o,t,c,d);return h!==null?Fm(e,o,h,a,i):Ei}function jB(n,e,t,r,i){let s=n.providerIndexes,o=e.data,a=s&1048575,c=n.directiveStart,d=n.directiveEnd,h=s>>20,p=r?a:a+h,y=i?a+h:d;for(let I=p;I<y;I++){let k=o[I];if(I<c&&t===k||I>=c&&k.type===t)return I}if(i){let I=o[c];if(I&&_i(I)&&I.type===t)return c}return null}function Fm(n,e,t,r,i){let s=n[t],o=e.data;if(s instanceof nc){let a=s;if(a.resolving){let I=K1(o[t]);throw eE(I)}let c=Pm(a.canSeeViewProviders);a.resolving=!0;let d=o[t].type||o[t],h,p=a.injectImpl?Ln(a.injectImpl):null,y=DE(n,r,0);try{s=n[t]=a.factory(void 0,i,o,n,r),e.firstCreatePass&&t>=r.directiveStart&&SB(t,o[t],e)}finally{p!==null&&Ln(p),Pm(c),a.resolving=!1,SE()}}return s}function BB(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(qa)?n[qa]:void 0;return typeof e=="number"?e>=0?e&vk:$B:e}function BR(n,e,t){let r=1<<n;return!!(t[e+(n>>wk)]&r)}function $R(n,e){return!(n&2)&&!(n&1&&e)}var tc=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return Ck(this._tNode,this._lView,e,Ba(r),t)}};function $B(){return new tc(Sn(),Pe())}function as(n){return eu(()=>{let e=n.prototype.constructor,t=e[gh]||QE(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let s=i[gh]||QE(i);if(s&&s!==t)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function QE(n){return zw(n)?()=>{let e=QE(En(n));return e&&e()}:mo(n)}function HB(n,e,t,r,i){let s=n,o=e;for(;s!==null&&o!==null&&o[we]&2048&&!ql(o);){let a=Tk(s,o,t,r|2,Ei);if(a!==Ei)return a;let c=s.parent;if(!c){let d=o[lE];if(d){let h=d.get(t,Ei,r);if(h!==Ei)return h}c=Dk(o),o=o[Wa]}s=c}return i}function Dk(n){let e=n[me],t=e.type;return t===2?e.declTNode:t===1?n[_r]:null}function Lh(n){return LB(Sn(),n)}function qB(){return mI(Sn(),Pe())}function mI(n,e){return new Ci($r(n,e))}var Ci=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=qB}return n})();function Sk(n){return(n.flags&128)===128}var yI=(function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n})(yI||{}),Ak=new Map,zB=0;function GB(){return zB++}function WB(n){Ak.set(n[bh],n)}function YE(n){Ak.delete(n[bh])}var HR="__ngContext__";function Jl(n,e){yi(e)?(n[HR]=e[bh],WB(e)):n[HR]=e}function xk(n){return kk(n[Hl])}function Rk(n){return kk(n[yr])}function kk(n){for(;n!==null&&!Br(n);)n=n[yr];return n}var KB;function _I(n){KB=n}var Ym=new ae("",{factory:()=>QB}),QB="ng";var Jm=new ae(""),cc=new ae("",{providedIn:"platform",factory:()=>"unknown"});var Xm=new ae("",{factory:()=>j(nn).body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var Nk="r";var Mk="di";var Pk=!1,Ok=new ae("",{factory:()=>Pk});var YB=(n,e,t,r)=>{};function JB(n,e,t,r){YB(n,e,t,r)}function vI(n){return(n.flags&32)===32}var XB=()=>null;function Fk(n,e,t=!1){return XB(n,e,t)}function Vk(n,e){let t=n.contentQueries;if(t!==null){let r=fe(null);try{for(let i=0;i<t.length;i+=2){let s=t[i],o=t[i+1];if(o!==-1){let a=n.data[o];TE(s),a.contentQueries(2,e[o],o)}}}finally{fe(r)}}}function JE(n,e,t){TE(0);let r=fe(null);try{e(n,t)}finally{fe(r)}}function Lk(n,e,t){if(dE(e)){let r=fe(null);try{let i=e.directiveStart,s=e.directiveEnd;for(let o=i;o<s;o++){let a=n.data[o];if(a.contentQueries){let c=t[o];a.contentQueries(1,c,o)}}}finally{fe(r)}}}var Gr=(function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n[n.ExperimentalIsolatedShadowDom=4]="ExperimentalIsolatedShadowDom",n})(Gr||{});var Tm;function ZB(){if(Tm===void 0&&(Tm=null,rs.trustedTypes))try{Tm=rs.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Tm}function qR(n){return ZB()?.createScriptURL(n)||n}var Vm=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${sm})`}};function Uh(n){return n instanceof Vm?n.changingThisBreaksApplicationSecurity:n}function wI(n,e){let t=Uk(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${sm})`)}return t===e}function Uk(n){return n instanceof Vm&&n.getTypeName()||null}var e3=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function jk(n){return n=String(n),n.match(e3)?n:"unsafe:"+n}function t3(n,e){return n.createText(e)}function n3(n,e,t){n.setValue(e,t)}function Bk(n,e,t){return n.createElement(e,t)}function Lm(n,e,t,r,i){n.insertBefore(e,t,r,i)}function $k(n,e,t){n.appendChild(e,t)}function zR(n,e,t,r,i){r!==null?Lm(n,e,t,r,i):$k(n,e,t)}function Hk(n,e,t,r){n.removeChild(null,e,t,r)}function r3(n,e,t){n.setAttribute(e,"style",t)}function i3(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function qk(n,e,t){let{mergedAttrs:r,classes:i,styles:s}=t;r!==null&&NB(n,e,r),i!==null&&i3(n,e,i),s!==null&&r3(n,e,s)}var Zm=(function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n})(Zm||{});function Qn(n){let e=Gk();return e?e.sanitize(Zm.URL,n)||"":wI(n,"URL")?Uh(n):jk(za(n))}function zk(n){let e=Gk();if(e)return qR(e.sanitize(Zm.RESOURCE_URL,n)||"");if(wI(n,"ResourceURL"))return qR(Uh(n));throw new oe(904,!1)}function s3(n,e){return e==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||e==="href"&&(n==="base"||n==="link")?zk:Qn}function EI(n,e,t){return s3(e,t)(n)}function Gk(){let n=Pe();return n&&n[mi].sanitizer}function Wk(n){return n instanceof Function?n():n}function o3(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let s=e.length;if(i+s===r||n.charCodeAt(i+s)<=32)return i}t=i+1}}var Kk="ng-template";function a3(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&o3(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(II(n))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&typeof(s=e[i])=="string";)if(s.toLowerCase()===t)return!0}return!1}function II(n){return n.type===4&&n.value!==Kk}function c3(n,e,t){let r=n.type===4&&!t?Kk:n.value;return e===r}function l3(n,e,t){let r=4,i=n.attrs,s=i!==null?h3(i):0,o=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!o&&!qr(r)&&!qr(c))return!1;if(o&&qr(c))continue;o=!1,r=c|r&1;continue}if(!o)if(r&4){if(r=2|r&1,c!==""&&!c3(n,c,t)||c===""&&e.length===1){if(qr(r))return!1;o=!0}}else if(r&8){if(i===null||!a3(n,i,c,t)){if(qr(r))return!1;o=!0}}else{let d=e[++a],h=u3(c,i,II(n),t);if(h===-1){if(qr(r))return!1;o=!0;continue}if(d!==""){let p;if(h>s?p="":p=i[h+1].toLowerCase(),r&2&&d!==p){if(qr(r))return!1;o=!0}}}}return qr(r)||o}function qr(n){return(n&1)===0}function u3(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let s=!1;for(;i<e.length;){let o=e[i];if(o===n)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return f3(e,n)}function d3(n,e,t=!1){for(let r=0;r<e.length;r++)if(l3(n,e[r],t))return!0;return!1}function h3(n){for(let e=0;e<n.length;e++){let t=n[e];if(yk(t))return e}return n.length}function f3(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function GR(n,e){return n?":not("+e.trim()+")":e}function p3(n){let e=n[0],t=1,r=2,i="",s=!1;for(;t<n.length;){let o=n[t];if(typeof o=="string")if(r&2){let a=n[++t];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+o:r&4&&(i+=" "+o);else i!==""&&!qr(o)&&(e+=GR(s,i),i=""),r=o,s=s||!qr(r);t++}return i!==""&&(e+=GR(s,i)),e}function g3(n){return n.map(p3).join(",")}function m3(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let s=n[r];if(typeof s=="string")i===2?s!==""&&e.push(s,n[++r]):i===8&&t.push(s);else{if(!qr(i))break;i=s}r++}return t.length&&e.push(1,...t),e}var Yn={};function bI(n,e,t,r,i,s,o,a,c,d,h){let p=Ft+r,y=p+i,I=y3(p,y),k=typeof d=="function"?d():d;return I[me]={type:n,blueprint:I,template:t,queries:null,viewQuery:a,declTNode:e,data:I.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:y,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:c,consts:k,incompleteFirstPass:!1,ssrId:h}}function y3(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:Yn);return t}function _3(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=bI(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function CI(n,e,t,r,i,s,o,a,c,d,h){let p=e.blueprint.slice();return p[jr]=i,p[we]=r|4|128|8|64|1024,(d!==null||n&&n[we]&2048)&&(p[we]|=2048),gE(p),p[ln]=p[Wa]=n,p[At]=t,p[mi]=o||n&&n[mi],p[ht]=a||n&&n[ht],p[ss]=c||n&&n[ss]||null,p[_r]=s,p[bh]=GB(),p[Bl]=h,p[lE]=d,p[rr]=e.type==2?n[rr]:p,p}function v3(n,e,t){let r=$r(e,n),i=_3(t),s=n[mi].rendererFactory,o=TI(n,CI(n,i,null,Qk(t),r,e,null,s.createRenderer(r,t),null,null,null));return n[e.index]=o}function Qk(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function Yk(n,e,t,r){if(t===0)return-1;let i=e.length;for(let s=0;s<t;s++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function TI(n,e){return n[Hl]?n[cE][yr]=e:n[Hl]=e,n[cE]=e,e}function V(n=1){Jk(un(),Pe(),wi()+n,!1)}function Jk(n,e,t,r){if(!r)if((e[we]&3)===3){let s=n.preOrderCheckHooks;s!==null&&Sm(e,s,t)}else{let s=n.preOrderHooks;s!==null&&Am(e,s,0,t)}bo(t)}var ey=(function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n})(ey||{});function XE(n,e,t,r){let i=fe(null);try{let[s,o,a]=n.inputs[t],c=null;(o&ey.SignalBased)!==0&&(c=e[s][On]),c!==null&&c.transformFn!==void 0?r=c.transformFn(r):a!==null&&(r=a.call(e,r)),n.setInput!==null?n.setInput(e,c,r,t,s):hk(e,c,s,r)}finally{fe(i)}}var Ii=(function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n})(Ii||{}),w3;function DI(n,e){return w3(n,e)}var rc=new Set,ty=(function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n})(ty||{}),lc=new ae(""),WR=new Set;function To(n){WR.has(n)||(WR.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var SI=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=se({token:n,providedIn:"root",factory:()=>new n})}return n})(),Xk=[0,1,2,3],Zk=(()=>{class n{ngZone=j(gt);scheduler=j(_o);errorHandler=j(pi,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){j(lc,{optional:!0})}execute(){let t=this.sequences.size>0;t&&tt(ze.AfterRenderHooksStart),this.executing=!0;for(let r of Xk)for(let i of this.sequences)if(!(i.erroredOrDestroyed||!i.hooks[r]))try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let s=i.hooks[r];return s(i.pipelinedValue)},i.snapshot))}catch(s){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(s)}this.executing=!1;for(let r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(let r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),t&&tt(ze.AfterRenderHooksEnd)}register(t){let{view:r}=t;r!==void 0?((r[Ja]??=[]).push(t),zl(r),r[we]|=8192):this.executing?this.deferredRegistrations.add(t):this.addSequence(t)}addSequence(t){this.sequences.add(t),this.scheduler.notify(7)}unregister(t){this.executing&&this.sequences.has(t)?(t.erroredOrDestroyed=!0,t.pipelinedValue=void 0,t.once=!0):(this.sequences.delete(t),this.deferredRegistrations.delete(t))}maybeTrace(t,r){return r?r.run(ty.AFTER_NEXT_RENDER,t):t()}static \u0275prov=se({token:n,providedIn:"root",factory:()=>new n})}return n})(),Um=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,t,r,i,s,o=null){this.impl=e,this.hooks=t,this.view=r,this.once=i,this.snapshot=o,this.unregisterOnDestroy=s?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let e=this.view?.[Ja];e&&(this.view[Ja]=e.filter(t=>t!==this))}};function ny(n,e){let t=e?.injector??j(Ot);return To("NgAfterNextRender"),I3(n,t,e,!0)}function E3(n){return n instanceof Function?[void 0,void 0,n,void 0]:[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function I3(n,e,t,r){let i=e.get(SI);i.impl??=e.get(Zk);let s=e.get(lc,null,{optional:!0}),o=t?.manualCleanup!==!0?e.get(Hr):null,a=e.get(bm,null,{optional:!0}),c=new Um(i.impl,E3(n),a?.view,r,o,s?.snapshot(null));return i.impl.register(c),c}var eN=new ae("",{factory:()=>({queue:new Set,isScheduled:!1,scheduler:null,injector:j(Pt)})});function tN(n,e,t){let r=n.get(eN);if(Array.isArray(e))for(let i of e)r.queue.add(i),t?.detachedLeaveAnimationFns?.push(i);else r.queue.add(e),t?.detachedLeaveAnimationFns?.push(e);r.scheduler&&r.scheduler(n)}function b3(n,e){let t=n.get(eN);if(e.detachedLeaveAnimationFns){for(let r of e.detachedLeaveAnimationFns)t.queue.delete(r);e.detachedLeaveAnimationFns=void 0}}function C3(n,e){for(let[t,r]of e)tN(n,r.animateFns)}function KR(n,e,t,r){let i=n?.[Xa]?.enter;e!==null&&i&&i.has(t.index)&&C3(r,i)}function Kl(n,e,t,r,i,s,o,a){if(i!=null){let c,d=!1;Br(i)?c=i:yi(i)&&(d=!0,i=i[jr]);let h=vr(i);n===0&&r!==null?(KR(a,r,s,t),o==null?$k(e,r,h):Lm(e,r,h,o||null,!0)):n===1&&r!==null?(KR(a,r,s,t),Lm(e,r,h,o||null,!0)):n===2?QR(a,s,t,p=>{Hk(e,h,d,p)}):n===3&&QR(a,s,t,()=>{e.destroyNode(h)}),c!=null&&V3(e,n,t,c,s,r,o)}}function T3(n,e){nN(n,e),e[jr]=null,e[_r]=null}function D3(n,e,t,r,i,s){r[jr]=i,r[_r]=e,iy(n,r,t,1,i,s)}function nN(n,e){e[mi].changeDetectionScheduler?.notify(9),iy(n,e,e[ht],2,null,null)}function S3(n){let e=n[Hl];if(!e)return LE(n[me],n);for(;e;){let t=null;if(yi(e))t=e[Hl];else{let r=e[xt];r&&(t=r)}if(!t){for(;e&&!e[yr]&&e!==n;)yi(e)&&LE(e[me],e),e=e[ln];e===null&&(e=n),yi(e)&&LE(e[me],e),t=e&&e[yr]}e=t}}function AI(n,e){let t=n[Dh],r=t.indexOf(e);t.splice(r,1)}function ry(n,e){if(Za(e))return;let t=e[ht];t.destroyNode&&iy(n,e,t,3,null,null),S3(e)}function LE(n,e){if(Za(e))return;let t=fe(null);try{e[we]&=-129,e[we]|=256,e[ir]&&ah(e[ir]),R3(n,e),x3(n,e),e[me].type===1&&e[ht].destroy();let r=e[Ka];if(r!==null&&Br(e[ln])){r!==e[ln]&&AI(r,e);let i=e[Ya];i!==null&&i.detachView(n)}YE(e)}finally{fe(t)}}function QR(n,e,t,r){let i=n?.[Xa];if(i==null||i.leave==null||!i.leave.has(e.index))return r(!1);n&&rc.add(n),tN(t,()=>{if(i.leave&&i.leave.has(e.index)){let o=i.leave.get(e.index),a=[];if(o){for(let c=0;c<o.animateFns.length;c++){let d=o.animateFns[c],{promise:h}=d();a.push(h)}i.detachedLeaveAnimationFns=void 0}i.running=Promise.allSettled(a),A3(n,r)}else n&&rc.delete(n),r(!1)},i)}function A3(n,e){let t=n[Xa]?.running;if(t){t.then(()=>{n[Xa].running=void 0,rc.delete(n),e(!0)});return}e(!1)}function x3(n,e){let t=n.cleanup,r=e[$l];if(t!==null)for(let o=0;o<t.length-1;o+=2)if(typeof t[o]=="string"){let a=t[o+3];a>=0?r[a]():r[-a].unsubscribe(),o+=2}else{let a=r[t[o+1]];t[o].call(a)}r!==null&&(e[$l]=null);let i=e[ts];if(i!==null){e[ts]=null;for(let o=0;o<i.length;o++){let a=i[o];a()}}let s=e[Ch];if(s!==null){e[Ch]=null;for(let o of s)o.destroy()}}function R3(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof nc)){let s=t[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=i[s[o]],c=s[o+1];tt(ze.LifecycleHookStart,a,c);try{c.call(a)}finally{tt(ze.LifecycleHookEnd,a,c)}}else{tt(ze.LifecycleHookStart,i,s);try{s.call(i)}finally{tt(ze.LifecycleHookEnd,i,s)}}}}}function k3(n,e,t){return N3(n,e.parent,t)}function N3(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[jr];if(Io(r)){let{encapsulation:i}=n.data[r.directiveStart+r.componentOffset];if(i===Gr.None||i===Gr.Emulated)return null}return $r(r,t)}function M3(n,e,t){return O3(n,e,t)}function P3(n,e,t){return n.type&40?$r(n,t):null}var O3=P3,YR;function xI(n,e,t,r){let i=k3(n,r,e),s=e[ht],o=r.parent||e[_r],a=M3(o,r,e);if(i!=null)if(Array.isArray(t))for(let c=0;c<t.length;c++)zR(s,i,t[c],a,!1);else zR(s,i,t,a,!1);YR!==void 0&&YR(s,r,e,t,i)}function kh(n,e){if(e!==null){let t=e.type;if(t&3)return $r(e,n);if(t&4)return ZE(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return kh(n,r);{let i=n[e.index];return Br(i)?ZE(-1,i):vr(i)}}else{if(t&128)return kh(n,e.next);if(t&32)return DI(e,n)()||vr(n[e.index]);{let r=rN(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=yo(n[rr]);return kh(i,r)}else return kh(n,e.next)}}}return null}function rN(n,e){if(e!==null){let r=n[rr][_r],i=e.projection;return r.projection[i]}return null}function ZE(n,e){let t=xt+n+1;if(t<e.length){let r=e[t],i=r[me].firstChild;if(i!==null)return kh(r,i)}return e[Eo]}function RI(n,e,t,r,i,s,o){for(;t!=null;){let a=r[ss];if(t.type===128){t=t.next;continue}let c=r[t.index],d=t.type;if(o&&e===0&&(c&&Jl(vr(c),r),t.flags|=2),!vI(t))if(d&8)RI(n,e,t.child,r,i,s,!1),Kl(e,n,a,i,c,t,s,r);else if(d&32){let h=DI(t,r),p;for(;p=h();)Kl(e,n,a,i,p,t,s,r);Kl(e,n,a,i,c,t,s,r)}else d&16?F3(n,e,r,t,i,s):Kl(e,n,a,i,c,t,s,r);t=o?t.projectionNext:t.next}}function iy(n,e,t,r,i,s){RI(t,r,n.firstChild,e,i,s,!1)}function F3(n,e,t,r,i,s){let o=t[rr],c=o[_r].projection[r.projection];if(Array.isArray(c))for(let d=0;d<c.length;d++){let h=c[d];Kl(e,n,t[ss],i,h,r,s,t)}else{let d=c,h=o[ln];Sk(r)&&(d.flags|=128),RI(n,e,d,h,i,s,!0)}}function V3(n,e,t,r,i,s,o){let a=r[Eo],c=vr(r);a!==c&&Kl(e,n,t,s,a,i,o);for(let d=xt;d<r.length;d++){let h=r[d];iy(h[me],h,n,e,s,a)}}function L3(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let s=r.indexOf("-")===-1?void 0:Ii.DashCase;i==null?n.removeStyle(t,r,s):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=Ii.Important),n.setStyle(t,r,i,s))}}function iN(n,e,t,r,i){let s=wi(),o=r&2;try{bo(-1),o&&e.length>Ft&&Jk(n,e,Ft,!1);let a=o?ze.TemplateUpdateStart:ze.TemplateCreateStart;tt(a,i,t),t(r,i)}finally{bo(s);let a=o?ze.TemplateUpdateEnd:ze.TemplateCreateEnd;tt(a,i,t)}}function sN(n,e,t){z3(n,e,t),(t.flags&64)===64&&G3(n,e,t)}function kI(n,e,t=$r){let r=e.localNames;if(r!==null){let i=e.index+1;for(let s=0;s<r.length;s+=2){let o=r[s+1],a=o===-1?t(e,n):n[o];n[i++]=a}}}function U3(n,e,t,r){let s=r.get(Ok,Pk)||t===Gr.ShadowDom||t===Gr.ExperimentalIsolatedShadowDom,o=n.selectRootElement(e,s);return j3(o),o}function j3(n){B3(n)}var B3=()=>null;function $3(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function oN(n,e,t,r,i,s){let o=e[me];if(NI(n,o,e,t,r)){Io(n)&&q3(e,n.index);return}n.type&3&&(t=$3(t)),H3(n,e,t,r,i,s)}function H3(n,e,t,r,i,s){if(n.type&3){let o=$r(n,e);r=s!=null?s(r,n.value||"",t):r,i.setProperty(o,t,r)}else n.type&12}function q3(n,e){let t=wr(e,n);t[we]&16||(t[we]|=64)}function z3(n,e,t){let r=t.directiveStart,i=t.directiveEnd;Io(t)&&v3(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||Om(t,e);let s=t.initialInputs;for(let o=r;o<i;o++){let a=n.data[o],c=Fm(e,n,o,t);if(Jl(c,e),s!==null&&J3(e,o-r,c,a,t,s),_i(a)){let d=wr(t.index,e);d[At]=Fm(e,n,o,t)}}}function G3(n,e,t){let r=t.directiveStart,i=t.directiveEnd,s=t.index,o=DR();try{bo(s);for(let a=r;a<i;a++){let c=n.data[a],d=e[a];ym(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&W3(c,d)}}finally{bo(-1),ym(o)}}function W3(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function K3(n,e){let t=n.directiveRegistry,r=null;if(t)for(let i=0;i<t.length;i++){let s=t[i];d3(e,s.selectors,!1)&&(r??=[],_i(s)?r.unshift(s):r.push(s))}return r}function Q3(n,e,t,r,i,s){let o=$r(n,e);Y3(e[ht],o,s,n.value,t,r,i)}function Y3(n,e,t,r,i,s,o){if(s==null)n.removeAttribute(e,i,t);else{let a=o==null?za(s):o(s,r||"",i);n.setAttribute(e,i,a,t)}}function J3(n,e,t,r,i,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;a+=2){let c=o[a],d=o[a+1];XE(r,t,c,d)}}function aN(n,e,t,r,i){let s=Ft+t,o=e[me],a=i(o,e,n,r,t);e[s]=a,Gl(n,!0);let c=n.type===2;return c?(qk(e[ht],a,n),(pR()===0||fm(n))&&Jl(a,e),gR()):Jl(a,e),Em()&&(!c||!vI(n))&&xI(o,e,a,n),n}function cN(n){let e=n;return IE()?vR():(e=e.parent,Gl(e,!1)),e}function X3(n,e){let t=n[ss];if(!t)return;let r;try{r=t.get(sr,null)}catch{r=null}r?.(e)}function NI(n,e,t,r,i){let s=n.inputs?.[r],o=n.hostDirectiveInputs?.[r],a=!1;if(o)for(let c=0;c<o.length;c+=2){let d=o[c],h=o[c+1],p=e.data[d];XE(p,t[d],h,i),a=!0}if(s)for(let c of s){let d=t[c],h=e.data[c];XE(h,d,r,i),a=!0}return a}function Z3(n,e){let t=wr(e,n),r=t[me];e6(r,t);let i=t[jr];i!==null&&t[Bl]===null&&(t[Bl]=Fk(i,t[ss])),tt(ze.ComponentStart);try{MI(r,t,t[At])}finally{tt(ze.ComponentEnd,t[At])}}function e6(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function MI(n,e,t){_m(e);try{let r=n.viewQuery;r!==null&&JE(1,r,t);let i=n.template;i!==null&&iN(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[Ya]?.finishViewCreation(n),n.staticContentQueries&&Vk(n,e),n.staticViewQueries&&JE(2,n.viewQuery,t);let s=n.components;s!==null&&t6(e,s)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[we]&=-5,vm()}}function t6(n,e){for(let t=0;t<e.length;t++)Z3(n,e[t])}function PI(n,e,t,r){let i=fe(null);try{let s=e.tView,a=n[we]&4096?4096:16,c=CI(n,s,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),d=n[e.index];c[Ka]=d;let h=n[Ya];return h!==null&&(c[Ya]=h.createEmbeddedView(s)),MI(s,c,t),c}finally{fe(i)}}function Mh(n,e){return!e||e.firstChild===null||Sk(n)}function Ph(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let s=e[t.index];s!==null&&r.push(vr(s)),Br(s)&&lN(s,r);let o=t.type;if(o&8)Ph(n,e,t.child,r);else if(o&32){let a=DI(t,e),c;for(;c=a();)r.push(c)}else if(o&16){let a=rN(e,t);if(Array.isArray(a))r.push(...a);else{let c=yo(e[rr]);Ph(c[me],c,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function lN(n,e){for(let t=xt;t<n.length;t++){let r=n[t],i=r[me].firstChild;i!==null&&Ph(r[me],r,i,e)}n[Eo]!==n[jr]&&e.push(n[Eo])}function uN(n){if(n[Ja]!==null){for(let e of n[Ja])e.impl.addSequence(e);n[Ja].length=0}}var dN=[];function n6(n){return n[ir]??r6(n)}function r6(n){let e=dN.pop()??Object.create(s6);return e.lView=n,e}function i6(n){n.lView[ir]!==n&&(n.lView=null,dN.push(n))}var s6=ce(z({},ih),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{zl(n.lView)},consumerOnSignalRead(){this.lView[ir]=this}});function o6(n){let e=n[ir]??Object.create(a6);return e.lView=n,e}var a6=ce(z({},ih),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=yo(n.lView);for(;e&&!hN(e[me]);)e=yo(e);e&&mE(e)},consumerOnSignalRead(){this.lView[ir]=this}});function hN(n){return n.type!==2}function fN(n){if(n[Ch]===null)return;let e=!0;for(;e;){let t=!1;for(let r of n[Ch])r.dirty&&(t=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=t&&!!(n[we]&8192)}}var c6=100;function pN(n,e=0){let r=n[mi].rendererFactory,i=!1;i||r.begin?.();try{l6(n,e)}finally{i||r.end?.()}}function l6(n,e){let t=bE();try{CE(!0),eI(n,e);let r=0;for(;Ah(n);){if(r===c6)throw new oe(103,!1);r++,eI(n,1)}}finally{CE(t)}}function u6(n,e,t,r){if(Za(e))return;let i=e[we],s=!1,o=!1;_m(e);let a=!0,c=null,d=null;s||(hN(n)?(d=n6(e),c=oh(d)):Cg()===null?(a=!1,d=o6(e),c=oh(d)):e[ir]&&(ah(e[ir]),e[ir]=null));try{gE(e),bR(n.bindingStartIndex),t!==null&&iN(n,e,t,2,r);let h=(i&3)===3;if(!s)if(h){let I=n.preOrderCheckHooks;I!==null&&Sm(e,I,null)}else{let I=n.preOrderHooks;I!==null&&Am(e,I,0,null),FE(e,0)}if(o||d6(e),fN(e),gN(e,0),n.contentQueries!==null&&Vk(n,e),!s)if(h){let I=n.contentCheckHooks;I!==null&&Sm(e,I)}else{let I=n.contentHooks;I!==null&&Am(e,I,1),FE(e,1)}f6(n,e);let p=n.components;p!==null&&yN(e,p,0);let y=n.viewQuery;if(y!==null&&JE(2,y,r),!s)if(h){let I=n.viewCheckHooks;I!==null&&Sm(e,I)}else{let I=n.viewHooks;I!==null&&Am(e,I,2),FE(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[hm]){for(let I of e[hm])I();e[hm]=null}s||(uN(e),e[we]&=-73)}catch(h){throw s||zl(e),h}finally{d!==null&&(Tg(d,c),a&&i6(d)),vm()}}function gN(n,e){for(let t=xk(n);t!==null;t=Rk(t))for(let r=xt;r<t.length;r++){let i=t[r];mN(i,e)}}function d6(n){for(let e=xk(n);e!==null;e=Rk(e)){if(!(e[we]&2))continue;let t=e[Dh];for(let r=0;r<t.length;r++){let i=t[r];mE(i)}}}function h6(n,e,t){tt(ze.ComponentStart);let r=wr(e,n);try{mN(r,t)}finally{tt(ze.ComponentEnd,r[At])}}function mN(n,e){pm(n)&&eI(n,e)}function eI(n,e){let r=n[me],i=n[we],s=n[ir],o=!!(e===0&&i&16);if(o||=!!(i&64&&e===0),o||=!!(i&1024),o||=!!(s?.dirty&&Dg(s)),o||=!1,s&&(s.dirty=!1),n[we]&=-9217,o)u6(r,n,r.template,n[At]);else if(i&8192){let a=fe(null);try{fN(n),gN(n,1);let c=r.components;c!==null&&yN(n,c,1),uN(n)}finally{fe(a)}}}function yN(n,e,t){for(let r=0;r<e.length;r++)h6(n,e[r],t)}function f6(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)bo(~i);else{let s=i,o=t[++r],a=t[++r];TR(o,s);let c=e[s];tt(ze.HostBindingsUpdateStart,c);try{a(2,c)}finally{tt(ze.HostBindingsUpdateEnd,c)}}}}finally{bo(-1)}}function OI(n,e){let t=bE()?64:1088;for(n[mi].changeDetectionScheduler?.notify(e);n;){n[we]|=t;let r=yo(n);if(ql(n)&&!r)return n;n=r}return null}function _N(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function vN(n,e){let t=xt+e;if(t<n.length)return n[t]}function sy(n,e,t,r=!0){let i=e[me];if(p6(i,e,n,t),r){let o=ZE(t,n),a=e[ht],c=a.parentNode(n[Eo]);c!==null&&D3(i,n[_r],a,e,c,o)}let s=e[Bl];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function wN(n,e){let t=Oh(n,e);return t!==void 0&&ry(t[me],t),t}function Oh(n,e){if(n.length<=xt)return;let t=xt+e,r=n[t];if(r){let i=r[Ka];i!==null&&i!==n&&AI(i,r),e>0&&(n[t-1][yr]=r[yr]);let s=wh(n,xt+e);T3(r[me],r);let o=s[Ya];o!==null&&o.detachView(s[me]),r[ln]=null,r[yr]=null,r[we]&=-129}return r}function p6(n,e,t,r){let i=xt+r,s=t.length;r>0&&(t[i-1][yr]=e),r<s-xt?(e[yr]=t[i],nE(t,xt+r,e)):(t.push(e),e[yr]=null),e[ln]=t;let o=e[Ka];o!==null&&t!==o&&EN(o,e);let a=e[Ya];a!==null&&a.insertView(n),gm(e),e[we]|=128}function EN(n,e){let t=n[Dh],r=e[ln];if(yi(r))n[we]|=2;else{let i=r[ln][rr];e[rr]!==i&&(n[we]|=2)}t===null?n[Dh]=[e]:t.push(e)}var ic=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,t=e[me];return Ph(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t}get context(){return this._lView[At]}set context(e){this._lView[At]=e}get destroyed(){return Za(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[ln];if(Br(e)){let t=e[Th],r=t?t.indexOf(this):-1;r>-1&&(Oh(e,r),wh(t,r))}this._attachedToViewContainer=!1}ry(this._lView[me],this._lView)}onDestroy(e){yE(this._lView,e)}markForCheck(){OI(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[we]&=-129}reattach(){gm(this._lView),this._lView[we]|=128}detectChanges(){this._lView[we]|=1024,pN(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new oe(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=ql(this._lView),t=this._lView[Ka];t!==null&&!e&&AI(t,this._lView),nN(this._lView[me],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new oe(902,!1);this._appRef=e;let t=ql(this._lView),r=this._lView[Ka];r!==null&&!t&&EN(r,this._lView),gm(this._lView)}};function oy(n,e,t,r,i){let s=n.data[e];if(s===null)s=g6(n,e,t,r,i),CR()&&(s.flags|=32);else if(s.type&64){s.type=t,s.value=r,s.attrs=i;let o=_R();s.injectorIndex=o===null?-1:o.injectorIndex}return Gl(s,!0),s}function g6(n,e,t,r,i){let s=EE(),o=IE(),a=o?s:s&&s.parent,c=n.data[e]=y6(n,a,t,e,r,i);return m6(n,c,s,o),c}function m6(n,e,t,r){n.firstChild===null&&(n.firstChild=e),t!==null&&(r?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function y6(n,e,t,r,i,s){let o=e?e.injectorIndex:-1,a=0;return yR()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,fieldIndex:-1,customControlIndex:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function _6(n){let e=n[uE]??[],r=n[ln][ht],i=[];for(let s of e)s.data[Mk]!==void 0?i.push(s):v6(s,r);n[uE]=i}function v6(n,e){let t=0,r=n.firstChild;if(r){let i=n.data[Nk];for(;t<i;){let s=r.nextSibling;Hk(e,r,!1),r=s,t++}}}var w6=()=>null,E6=()=>null;function tI(n,e){return w6(n,e)}function IN(n,e,t){return E6(n,e,t)}var bN=class{},ay=class{},nI=class{resolveComponentFactory(e){throw new oe(917,!1)}},jh=class{static NULL=new nI},sc=class{},cs=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>I6()}return n})();function I6(){let n=Pe(),e=Sn(),t=wr(e.index,n);return(yi(t)?t:n)[ht]}var CN=(()=>{class n{static \u0275prov=se({token:n,providedIn:"root",factory:()=>null})}return n})();var xm={},rI=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){let i=this.injector.get(e,xm,r);return i!==xm||t===xm?i:this.parentInjector.get(e,t,r)}};function jm(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)i=om(i,a);else if(s==2){let c=a,d=e[++o];r=om(r,c+": "+d+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function Be(n,e=0){let t=Pe();if(t===null)return xe(n,e);let r=Sn();return Ck(r,t,En(n),e)}function b6(n,e,t,r,i){let s=r===null?null:{"":-1},o=i(n,t);if(o!==null){let a=o,c=null,d=null;for(let h of o)if(h.resolveHostDirectives!==null){[a,c,d]=h.resolveHostDirectives(o);break}D6(n,e,t,a,s,c,d)}s!==null&&r!==null&&C6(t,r,s)}function C6(n,e,t){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let s=t[e[i+1]];if(s==null)throw new oe(-301,!1);r.push(e[i],s)}}function T6(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function D6(n,e,t,r,i,s,o){let a=r.length,c=null;for(let y=0;y<a;y++){let I=r[y];c===null&&_i(I)&&(c=I,T6(n,t,y)),KE(Om(t,e),n,I.type)}N6(t,n.data.length,a),c?.viewProvidersResolver&&c.viewProvidersResolver(c);for(let y=0;y<a;y++){let I=r[y];I.providersResolver&&I.providersResolver(I)}let d=!1,h=!1,p=Yk(n,e,a,null);a>0&&(t.directiveToIndex=new Map);for(let y=0;y<a;y++){let I=r[y];if(t.mergedAttrs=Yl(t.mergedAttrs,I.hostAttrs),A6(n,t,e,p,I),k6(p,I,i),o!==null&&o.has(I)){let[P,M]=o.get(I);t.directiveToIndex.set(I.type,[p,P+t.directiveStart,M+t.directiveStart])}else(s===null||!s.has(I))&&t.directiveToIndex.set(I.type,p);I.contentQueries!==null&&(t.flags|=4),(I.hostBindings!==null||I.hostAttrs!==null||I.hostVars!==0)&&(t.flags|=64);let k=I.type.prototype;!d&&(k.ngOnChanges||k.ngOnInit||k.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),d=!0),!h&&(k.ngOnChanges||k.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),h=!0),p++}S6(n,t,s)}function S6(n,e,t){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=n.data[r];if(t===null||!t.has(i))JR(0,e,i,r),JR(1,e,i,r),ZR(e,r,!1);else{let s=t.get(i);XR(0,e,s,r),XR(1,e,s,r),ZR(e,r,!0)}}}function JR(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let s in i)if(i.hasOwnProperty(s)){let o;n===0?o=e.inputs??={}:o=e.outputs??={},o[s]??=[],o[s].push(r),TN(e,s)}}function XR(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let s in i)if(i.hasOwnProperty(s)){let o=i[s],a;n===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[o]??=[],a[o].push(r,s),TN(e,o)}}function TN(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function ZR(n,e,t){let{attrs:r,inputs:i,hostDirectiveInputs:s}=n;if(r===null||!t&&i===null||t&&s===null||II(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let o=null,a=0;for(;a<r.length;){let c=r[a];if(c===0){a+=4;continue}else if(c===5){a+=2;continue}else if(typeof c=="number")break;if(!t&&i.hasOwnProperty(c)){let d=i[c];for(let h of d)if(h===e){o??=[],o.push(c,r[a+1]);break}}else if(t&&s.hasOwnProperty(c)){let d=s[c];for(let h=0;h<d.length;h+=2)if(d[h]===e){o??=[],o.push(d[h+1],r[a+1]);break}}a+=2}n.initialInputs??=[],n.initialInputs.push(o)}function A6(n,e,t,r,i){n.data[r]=i;let s=i.factory||(i.factory=mo(i.type,!0)),o=new nc(s,_i(i),Be,null);n.blueprint[r]=o,t[r]=o,x6(n,e,r,Yk(n,t,i.hostVars,Yn),i)}function x6(n,e,t,r,i){let s=i.hostBindings;if(s){let o=n.hostBindingOpCodes;o===null&&(o=n.hostBindingOpCodes=[]);let a=~e.index;R6(o)!=a&&o.push(a),o.push(t,r,s)}}function R6(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function k6(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;_i(e)&&(t[""]=n)}}function N6(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function DN(n,e,t,r,i,s,o,a){let c=e[me],d=c.consts,h=vi(d,o),p=oy(c,n,t,r,h);return s&&b6(c,e,p,vi(d,a),i),p.mergedAttrs=Yl(p.mergedAttrs,p.attrs),p.attrs!==null&&jm(p,p.attrs,!1),p.mergedAttrs!==null&&jm(p,p.mergedAttrs,!0),c.queries!==null&&c.queries.elementStart(c,p),p}function SN(n,e){AB(n,e),dE(e)&&n.queries.elementEnd(e)}function M6(n,e,t,r,i,s){let o=e.consts,a=vi(o,i),c=oy(e,n,t,r,a);if(c.mergedAttrs=Yl(c.mergedAttrs,c.attrs),s!=null){let d=vi(o,s);c.localNames=[];for(let h=0;h<d.length;h+=2)c.localNames.push(d[h],-1)}return c.attrs!==null&&jm(c,c.attrs,!1),c.mergedAttrs!==null&&jm(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function P6(n,e,t){return n[e]=t}function bi(n,e,t){if(t===Yn)return!1;let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function AN(n,e,t,r){let i=bi(n,e,t);return bi(n,e+1,r)||i}function Rm(n,e,t){return function r(i){let s=Io(n)?wr(n.index,e):e;OI(s,5);let o=e[At],a=ek(e,o,t,i),c=r.__ngNextListenerFn__;for(;c;)a=ek(e,o,c,i)&&a,c=c.__ngNextListenerFn__;return a}}function ek(n,e,t,r){let i=fe(null);try{return tt(ze.OutputStart,e,t),t(r)!==!1}catch(s){return X3(n,s),!1}finally{tt(ze.OutputEnd,e,t),fe(i)}}function xN(n,e,t,r,i,s,o,a){let c=fm(n),d=!1,h=null;if(!r&&c&&(h=F6(e,t,s,n.index)),h!==null){let p=h.__ngLastListenerFn__||h;p.__ngNextListenerFn__=o,h.__ngLastListenerFn__=o,d=!0}else{let p=$r(n,t),y=r?r(p):p;JB(t,y,s,a);let I=i.listen(y,s,a);if(!O6(s)){let k=r?P=>r(vr(P[n.index])):n.index;RN(k,e,t,s,a,I,!1)}}return d}function O6(n){return n.startsWith("animation")||n.startsWith("transition")}function F6(n,e,t,r){let i=n.cleanup;if(i!=null)for(let s=0;s<i.length-1;s+=2){let o=i[s];if(o===t&&i[s+1]===r){let a=e[$l],c=i[s+2];return a&&a.length>c?a[c]:null}typeof o=="string"&&(s+=2)}return null}function RN(n,e,t,r,i,s,o){let a=e.firstCreatePass?fR(e):null,c=hR(t),d=c.length;c.push(i,s),a&&a.push(r,n,d,(d+1)*(o?-1:1))}function tk(n,e,t,r,i,s){let o=e[t],a=e[me],d=a.data[t].outputs[r],p=o[d].subscribe(s);RN(n.index,a,e,i,s,p,!0)}var iI=Symbol("BINDING");var Bm=class extends jh{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=vo(e);return new Xl(t,this.ngModule)}};function V6(n){return Object.keys(n).map(e=>{let[t,r,i]=n[e],s={propName:t,templateName:e,isSignal:(r&ey.SignalBased)!==0};return i&&(s.transform=i),s})}function L6(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function U6(n,e,t){let r=e instanceof Pt?e:e?.injector;return r&&n.getStandaloneInjector!==null&&(r=n.getStandaloneInjector(r)||r),r?new rI(t,r):t}function j6(n){let e=n.get(sc,null);if(e===null)throw new oe(407,!1);let t=n.get(CN,null),r=n.get(_o,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:r,ngReflect:!1}}function B6(n,e){let t=kN(n);return Bk(e,t,t==="svg"?aR:t==="math"?cR:null)}function kN(n){return(n.selectors[0][0]||"div").toLowerCase()}var Xl=class extends ay{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=V6(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=L6(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=g3(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,r,i,s,o){tt(ze.DynamicComponentStart);let a=fe(null);try{let c=this.componentDef,d=$6(r,c,o,s),h=U6(c,i||this.ngModule,e),p=j6(h),y=p.rendererFactory.createRenderer(null,c),I=r?U3(y,r,c.encapsulation,h):B6(c,y),k=o?.some(nk)||s?.some($=>typeof $!="function"&&$.bindings.some(nk)),P=CI(null,d,null,512|Qk(c),null,null,p,y,h,null,Fk(I,h,!0));P[Ft]=I,_m(P);let M=null;try{let $=DN(Ft,P,2,"#host",()=>d.directiveRegistry,!0,0);qk(y,I,$),Jl(I,P),sN(d,P,$),Lk(d,$,P),SN(d,$),t!==void 0&&q6($,this.ngContentSelectors,t),M=wr($.index,P),P[At]=M[At],MI(d,P,null)}catch($){throw M!==null&&YE(M),YE(P),$}finally{tt(ze.DynamicComponentEnd),vm()}return new $m(this.componentType,P,!!k)}finally{fe(a)}}};function $6(n,e,t,r){let i=n?["ng-version","21.0.5"]:m3(e.selectors[0]),s=null,o=null,a=0;if(t)for(let h of t)a+=h[iI].requiredVars,h.create&&(h.targetIdx=0,(s??=[]).push(h)),h.update&&(h.targetIdx=0,(o??=[]).push(h));if(r)for(let h=0;h<r.length;h++){let p=r[h];if(typeof p!="function")for(let y of p.bindings){a+=y[iI].requiredVars;let I=h+1;y.create&&(y.targetIdx=I,(s??=[]).push(y)),y.update&&(y.targetIdx=I,(o??=[]).push(y))}}let c=[e];if(r)for(let h of r){let p=typeof h=="function"?h:h.type,y=Zw(p);c.push(y)}return bI(0,null,H6(s,o),1,a,c,null,null,null,[i],null)}function H6(n,e){return!n&&!e?null:t=>{if(t&1&&n)for(let r of n)r.create();if(t&2&&e)for(let r of e)r.update()}}function nk(n){let e=n[iI].kind;return e==="input"||e==="twoWay"}var $m=class extends bN{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t,r){super(),this._rootLView=t,this._hasInputBindings=r,this._tNode=Sh(t[me],Ft),this.location=mI(this._tNode,t),this.instance=wr(this._tNode.index,t)[At],this.hostView=this.changeDetectorRef=new ic(t,void 0),this.componentType=e}setInput(e,t){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let i=this._rootLView,s=NI(r,i[me],i,e,t);this.previousInputValues.set(e,t);let o=wr(r.index,i);OI(o,1)}get injector(){return new tc(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function q6(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let s=t[i];r.push(s!=null&&s.length?Array.from(s):null)}}var Bh=(()=>{class n{static __NG_ELEMENT_ID__=z6}return n})();function z6(){let n=Sn();return W6(n,Pe())}var G6=Bh,NN=class extends G6{_lContainer;_hostTNode;_hostLView;constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return mI(this._hostTNode,this._hostLView)}get injector(){return new tc(this._hostTNode,this._hostLView)}get parentInjector(){let e=gI(this._hostTNode,this._hostLView);if(_k(e)){let t=Mm(e,this._hostLView),r=Nm(e),i=t[me].data[r+8];return new tc(i,t)}else return new tc(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=rk(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-xt}createEmbeddedView(e,t,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let o=tI(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},s,o);return this.insertImpl(a,i,Mh(this._hostTNode,o)),a}createComponent(e,t,r,i,s,o,a){let c=e&&!bB(e),d;if(c)d=t;else{let M=t||{};d=M.index,r=M.injector,i=M.projectableNodes,s=M.environmentInjector||M.ngModuleRef,o=M.directives,a=M.bindings}let h=c?e:new Xl(vo(e)),p=r||this.parentInjector;if(!s&&h.ngModule==null){let $=(c?p:this.parentInjector).get(Pt,null);$&&(s=$)}let y=vo(h.componentType??{}),I=tI(this._lContainer,y?.id??null),k=I?.firstChild??null,P=h.create(p,i,k,s,o,a);return this.insertImpl(P.hostView,d,Mh(this._hostTNode,I)),P}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(lR(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[ln],d=new NN(c,c[_r],c[ln]);d.detach(d.indexOf(e))}}let s=this._adjustIndex(t),o=this._lContainer;return sy(o,i,s,r),e.attachToViewContainerRef(),nE(UE(o),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=rk(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=Oh(this._lContainer,t);r&&(wh(UE(this._lContainer),t),ry(r[me],r))}detach(e){let t=this._adjustIndex(e,-1),r=Oh(this._lContainer,t);return r&&wh(UE(this._lContainer),t)!=null?new ic(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function rk(n){return n[Th]}function UE(n){return n[Th]||(n[Th]=[])}function W6(n,e){let t,r=e[n.index];return Br(r)?t=r:(t=_N(r,e,null,n),e[n.index]=t,TI(e,t)),Q6(t,e,n,r),new NN(t,n,e)}function K6(n,e){let t=n[ht],r=t.createComment(""),i=$r(e,n),s=t.parentNode(i);return Lm(t,s,r,t.nextSibling(i),!1),r}var Q6=X6,Y6=()=>!1;function J6(n,e,t){return Y6(n,e,t)}function X6(n,e,t,r){if(n[Eo])return;let i;t.type&8?i=vr(r):i=K6(e,t),n[Eo]=i}var oc=class{},cy=class{};var Hm=class extends oc{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new Bm(this);constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t;let s=Xw(e);this._bootstrapComponents=Wk(s.bootstrap),this._r3Injector=AE(e,t,[{provide:oc,useValue:this},{provide:jh,useValue:this.componentFactoryResolver},...r],ns(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},qm=class extends cy{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new Hm(this.moduleType,e,[])}};var Fh=class extends oc{injector;componentFactoryResolver=new Bm(this);instance=null;constructor(e){super();let t=new Ha([...e.providers,{provide:oc,useValue:this},{provide:jh,useValue:this.componentFactoryResolver}],e.parent||Ih(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function $h(n,e,t=null){return new Fh({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var Z6=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=sE(!1,t.type),i=r.length>0?$h([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=se({token:n,providedIn:"environment",factory:()=>new n(xe(Pt))})}return n})();function jn(n){return eu(()=>{let e=MN(n),t=ce(z({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===yI.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(Z6).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Gr.Emulated,styles:n.styles||Un,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&To("NgStandalone"),PN(t);let r=n.dependencies;return t.directiveDefs=ik(r,e5),t.pipeDefs=ik(r,W1),t.id=r5(t),t})}function e5(n){return vo(n)||Zw(n)}function ls(n){return eu(()=>({type:n.type,bootstrap:n.bootstrap||Un,declarations:n.declarations||Un,imports:n.imports||Un,exports:n.exports||Un,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function t5(n,e){if(n==null)return wo;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],s,o,a,c;Array.isArray(i)?(a=i[0],s=i[1],o=i[2]??s,c=i[3]||null):(s=i,o=i,a=ey.None,c=null),t[s]=[r,a,c],e[s]=o}return t}function n5(n){if(n==null)return wo;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function An(n){return eu(()=>{let e=MN(n);return PN(e),e})}function FI(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone??!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function MN(n){let e={};return{type:n.type,providersResolver:null,viewProvidersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||wo,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||Un,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:t5(n.inputs,e),outputs:n5(n.outputs),debugInfo:null}}function PN(n){n.features?.forEach(e=>e(n))}function ik(n,e){return n?()=>{let t=typeof n=="function"?n():n,r=[];for(let i of t){let s=e(i);s!==null&&r.push(s)}return r}:null}function r5(n){let e=0,t=typeof n.consts=="function"?"":n.consts,r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let s of r.join("|"))e=Math.imul(31,e)+s.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function i5(n){return Object.getPrototypeOf(n.prototype).constructor}function us(n){let e=i5(n.type),t=!0,r=[n];for(;e;){let i;if(_i(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new oe(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let o=n;o.inputs=jE(n.inputs),o.declaredInputs=jE(n.declaredInputs),o.outputs=jE(n.outputs);let a=i.hostBindings;a&&l5(n,a);let c=i.viewQuery,d=i.contentQueries;if(c&&a5(n,c),d&&c5(n,d),s5(n,i),G1(n.outputs,i.outputs),_i(i)&&i.data.animation){let h=n.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let s=i.features;if(s)for(let o=0;o<s.length;o++){let a=s[o];a&&a.ngInherit&&a(n),a===us&&(t=!1)}}e=Object.getPrototypeOf(e)}o5(r)}function s5(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t])}}function o5(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Yl(i.hostAttrs,t=Yl(t,i.hostAttrs))}}function jE(n){return n===wo?{}:n===Un?[]:n}function a5(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function c5(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,s)=>{e(r,i,s),t(r,i,s)}:n.contentQueries=e}function l5(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function u5(n,e,t,r,i,s,o,a){if(t.firstCreatePass){n.mergedAttrs=Yl(n.mergedAttrs,n.attrs);let h=n.tView=bI(2,n,i,s,o,t.directiveRegistry,t.pipeRegistry,null,t.schemas,t.consts,null);t.queries!==null&&(t.queries.template(t,n),h.queries=t.queries.embeddedTView(n))}a&&(n.flags|=a),Gl(n,!1);let c=d5(t,e,n,r);Em()&&xI(t,e,c,n),Jl(c,e);let d=_N(c,e,c,n);e[r+Ft]=d,TI(e,d),J6(d,n,e)}function zm(n,e,t,r,i,s,o,a,c,d,h){let p=t+Ft,y;if(e.firstCreatePass){if(y=oy(e,p,4,o||null,a||null),d!=null){let I=vi(e.consts,d);y.localNames=[];for(let k=0;k<I.length;k+=2)y.localNames.push(I[k],-1)}}else y=e.data[p];return u5(y,n,e,t,r,i,s,c),d!=null&&kI(n,y,h),y}var d5=h5;function h5(n,e,t,r){return Im(!0),e[ht].createComment("")}var VI=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=se({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();function ON(n){return typeof n=="function"&&n[On]!==void 0}function LI(n){return ON(n)&&typeof n.set=="function"}var UI=new ae("");function Do(n){return!!n&&typeof n.then=="function"}function jI(n){return!!n&&typeof n.subscribe=="function"}var FN=new ae("");var BI=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r});appInits=j(FN,{optional:!0})??[];injector=j(Ot);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let s=tn(this.injector,i);if(Do(s))t.push(s);else if(jI(s)){let o=new Promise((a,c)=>{s.subscribe({complete:a,error:c})});t.push(o)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=se({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),ly=new ae("");function VN(){aw(()=>{let n="";throw new oe(600,n)})}function LN(n){return n.isBoundToModule}var f5=10;var So=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=j(sr);afterRenderManager=j(SI);zonelessEnabled=j(xh);rootEffectScheduler=j(OE);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new en;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=j(os);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(ut(t=>!t))}constructor(){j(lc,{optional:!0})}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}_injector=j(Pt);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,r){return this.bootstrapImpl(t,r)}bootstrapImpl(t,r,i=Ot.NULL){return this._injector.get(gt).run(()=>{tt(ze.BootstrapComponentStart);let o=t instanceof ay;if(!this._injector.get(BI).done){let k="";throw new oe(405,k)}let c;o?c=t:c=this._injector.get(jh).resolveComponentFactory(t),this.componentTypes.push(c.componentType);let d=LN(c)?void 0:this._injector.get(oc),h=r||c.selector,p=c.create(i,[],h,d),y=p.location.nativeElement,I=p.injector.get(UI,null);return I?.registerApplication(y),p.onDestroy(()=>{this.detachView(p.hostView),Nh(this.components,p),I?.unregisterApplication(y)}),this._loadComponent(p),tt(ze.BootstrapComponentEnd,p),p})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){tt(ze.ChangeDetectionStart),this.tracingSnapshot!==null?this.tracingSnapshot.run(ty.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw tt(ze.ChangeDetectionEnd),new oe(101,!1);let t=fe(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,fe(t),this.afterTick.next(),tt(ze.ChangeDetectionEnd)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(sc,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<f5;){tt(ze.ChangeDetectionSyncStart);try{this.synchronizeOnce()}finally{tt(ze.ChangeDetectionSyncEnd)}}}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let t=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!Ah(i))continue;let s=r&&!this.zonelessEnabled?0:1;pN(i,s),t=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}t||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>Ah(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;Nh(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(t),this._injector.get(ly,[]).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Nh(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new oe(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||n)};static \u0275prov=se({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Nh(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function Hh(n,e,t,r){let i=Pe(),s=ec();if(bi(i,s,e)){let o=un(),a=wm();Q3(a,i,n,e,t,r)}return Hh}var cae=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";var sI=class{destroy(e){}updateValue(e,t){}swap(e,t){let r=Math.min(e,t),i=Math.max(e,t),s=this.detach(i);if(i-r>1){let o=this.detach(r);this.attach(r,s),this.attach(i,o)}else this.attach(r,s)}move(e,t){this.attach(t,this.detach(e))}};function BE(n,e,t,r,i){return n===t&&Object.is(e,r)?1:Object.is(i(n,e),i(t,r))?-1:0}function p5(n,e,t,r){let i,s,o=0,a=n.length-1,c=void 0;if(Array.isArray(e)){fe(r);let d=e.length-1;for(fe(null);o<=a&&o<=d;){let h=n.at(o),p=e[o],y=BE(o,h,o,p,t);if(y!==0){y<0&&n.updateValue(o,p),o++;continue}let I=n.at(a),k=e[d],P=BE(a,I,d,k,t);if(P!==0){P<0&&n.updateValue(a,k),a--,d--;continue}let M=t(o,h),$=t(a,I),Y=t(o,p);if(Object.is(Y,$)){let ee=t(d,k);Object.is(ee,M)?(n.swap(o,a),n.updateValue(a,k),d--,a--):n.move(a,o),n.updateValue(o,p),o++;continue}if(i??=new Gm,s??=ok(n,o,a,t),oI(n,i,o,Y))n.updateValue(o,p),o++,a++;else if(s.has(Y))i.set(M,n.detach(o)),a--;else{let ee=n.create(o,e[o]);n.attach(o,ee),o++,a++}}for(;o<=d;)sk(n,i,t,o,e[o]),o++}else if(e!=null){fe(r);let d=e[Symbol.iterator]();fe(null);let h=d.next();for(;!h.done&&o<=a;){let p=n.at(o),y=h.value,I=BE(o,p,o,y,t);if(I!==0)I<0&&n.updateValue(o,y),o++,h=d.next();else{i??=new Gm,s??=ok(n,o,a,t);let k=t(o,y);if(oI(n,i,o,k))n.updateValue(o,y),o++,a++,h=d.next();else if(!s.has(k))n.attach(o,n.create(o,y)),o++,a++,h=d.next();else{let P=t(o,p);i.set(P,n.detach(o)),a--}}}for(;!h.done;)sk(n,i,t,n.length,h.value),h=d.next()}for(;o<=a;)n.destroy(n.detach(a--));i?.forEach(d=>{n.destroy(d)})}function oI(n,e,t,r){return e!==void 0&&e.has(r)?(n.attach(t,e.get(r)),e.delete(r),!0):!1}function sk(n,e,t,r,i){if(oI(n,e,r,t(r,i)))n.updateValue(r,i);else{let s=n.create(r,i);n.attach(r,s)}}function ok(n,e,t,r){let i=new Set;for(let s=e;s<=t;s++)i.add(r(s,n.at(s)));return i}var Gm=class{kvMap=new Map;_vMap=void 0;has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let t=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(t)?(this.kvMap.set(e,this._vMap.get(t)),this._vMap.delete(t)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,t){if(this.kvMap.has(e)){let r=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,t)}else this.kvMap.set(e,t)}forEach(e){for(let[t,r]of this.kvMap)if(e(r,t),this._vMap!==void 0){let i=this._vMap;for(;i.has(r);)r=i.get(r),e(r,t)}}};function ye(n,e,t,r,i,s,o,a){To("NgControlFlow");let c=Pe(),d=un(),h=vi(d.consts,s);return zm(c,d,n,e,t,r,i,h,256,o,a),$I}function $I(n,e,t,r,i,s,o,a){To("NgControlFlow");let c=Pe(),d=un(),h=vi(d.consts,s);return zm(c,d,n,e,t,r,i,h,512,o,a),$I}function _e(n,e){To("NgControlFlow");let t=Pe(),r=ec(),i=t[r]!==Yn?t[r]:-1,s=i!==-1?Wm(t,Ft+i):void 0,o=0;if(bi(t,r,n)){let a=fe(null);try{if(s!==void 0&&wN(s,o),n!==-1){let c=Ft+n,d=Wm(t,c),h=uI(t[me],c),p=IN(d,h,t),y=PI(t,h,e,{dehydratedView:p});sy(d,y,o,Mh(h,p))}}finally{fe(a)}}else if(s!==void 0){let a=vN(s,o);a!==void 0&&(a[At]=e)}}var aI=class{lContainer;$implicit;$index;constructor(e,t,r){this.lContainer=e,this.$implicit=t,this.$index=r}get $count(){return this.lContainer.length-xt}};function tu(n,e){return e}var cI=class{hasEmptyBlock;trackByFn;liveCollection;constructor(e,t,r){this.hasEmptyBlock=e,this.trackByFn=t,this.liveCollection=r}};function wt(n,e,t,r,i,s,o,a,c,d,h,p,y){To("NgControlFlow");let I=Pe(),k=un(),P=c!==void 0,M=Pe(),$=a?o.bind(M[rr][At]):o,Y=new cI(P,$);M[Ft+n]=Y,zm(I,k,n+1,e,t,r,i,vi(k.consts,s),256),P&&zm(I,k,n+2,c,d,h,p,vi(k.consts,y),512)}var lI=class extends sI{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(e,t,r){super(),this.lContainer=e,this.hostLView=t,this.templateTNode=r}get length(){return this.lContainer.length-xt}at(e){return this.getLView(e)[At].$implicit}attach(e,t){let r=t[Bl];this.needsIndexUpdate||=e!==this.length,sy(this.lContainer,t,e,Mh(this.templateTNode,r)),g5(this.lContainer,e)}detach(e){return this.needsIndexUpdate||=e!==this.length-1,m5(this.lContainer,e),y5(this.lContainer,e)}create(e,t){let r=tI(this.lContainer,this.templateTNode.tView.ssrId);return PI(this.hostLView,this.templateTNode,new aI(this.lContainer,t,e),{dehydratedView:r})}destroy(e){ry(e[me],e)}updateValue(e,t){this.getLView(e)[At].$implicit=t}reset(){this.needsIndexUpdate=!1}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[At].$index=e}getLView(e){return _5(this.lContainer,e)}};function Et(n){let e=fe(null),t=wi();try{let r=Pe(),i=r[me],s=r[t],o=t+1,a=Wm(r,o);if(s.liveCollection===void 0){let d=uI(i,o);s.liveCollection=new lI(a,r,d)}else s.liveCollection.reset();let c=s.liveCollection;if(p5(c,n,s.trackByFn,e),c.updateIndexes(),s.hasEmptyBlock){let d=ec(),h=c.length===0;if(bi(r,d,h)){let p=t+2,y=Wm(r,p);if(h){let I=uI(i,p),k=IN(y,I,r),P=PI(r,I,void 0,{dehydratedView:k});sy(y,P,0,Mh(I,k))}else i.firstUpdatePass&&_6(y),wN(y,0)}}}finally{fe(e)}}function Wm(n,e){return n[e]}function g5(n,e){if(n.length<=xt)return;let t=xt+e,r=n[t],i=r?r[Xa]:void 0;if(r&&i&&i.detachedLeaveAnimationFns&&i.detachedLeaveAnimationFns.length>0){let s=r[ss];b3(s,i),rc.delete(r),i.detachedLeaveAnimationFns=void 0}}function m5(n,e){if(n.length<=xt)return;let t=xt+e,r=n[t],i=r?r[Xa]:void 0;i&&i.leave&&i.leave.size>0&&(i.detachedLeaveAnimationFns=[])}function y5(n,e){return Oh(n,e)}function _5(n,e){return vN(n,e)}function uI(n,e){return Sh(n,e)}function Ge(n,e,t){let r=Pe(),i=ec();if(bi(r,i,e)){let s=un(),o=wm();oN(o,r,n,e,r[ht],t)}return Ge}function dI(n,e,t,r,i){NI(e,n,t,i?"class":"style",r)}function x(n,e,t,r){let i=Pe(),s=i[me],o=n+Ft,a=s.firstCreatePass?DN(o,i,2,e,K3,mR(),t,r):s.data[o];if(aN(a,i,n,e,UN),fm(a)){let c=i[me];sN(c,i,a),Lk(c,a,i)}return r!=null&&kI(i,a),x}function R(){let n=un(),e=Sn(),t=cN(e);return n.firstCreatePass&&SN(n,t),vE(t)&&wE(),_E(),t.classesWithoutHost!=null&&RB(t)&&dI(n,t,Pe(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&kB(t)&&dI(n,t,Pe(),t.stylesWithoutHost,!1),R}function Rt(n,e,t,r){return x(n,e,t,r),R(),Rt}function Ti(n,e,t,r){let i=Pe(),s=i[me],o=n+Ft,a=s.firstCreatePass?M6(o,s,2,e,t,r):s.data[o];return aN(a,i,n,e,UN),r!=null&&kI(i,a),Ti}function Ao(){let n=Sn(),e=cN(n);return vE(e)&&wE(),_E(),Ao}var UN=(n,e,t,r,i)=>(Im(!0),Bk(e[ht],r,NR()));function Oe(){return Pe()}var Rh=void 0;function v5(n){let e=Math.floor(Math.abs(n)),t=n.toString().replace(/^[^.]*\.?/,"").length;return e===1&&t===0?1:5}var w5=["en",[["a","p"],["AM","PM"]],[["AM","PM"]],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Rh,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Rh,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm\u202Fa","h:mm:ss\u202Fa","h:mm:ss\u202Fa z","h:mm:ss\u202Fa zzzz"],["{1}, {0}",Rh,Rh,Rh],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",v5],$E={};function ar(n){let e=E5(n),t=ak(e);if(t)return t;let r=e.split("-")[0];if(t=ak(r),t)return t;if(r==="en")return w5;throw new oe(701,!1)}function ak(n){return n in $E||($E[n]=rs.ng&&rs.ng.common&&rs.ng.common.locales&&rs.ng.common.locales[n]),$E[n]}var kt=(function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n})(kt||{});function E5(n){return n.toLowerCase().replace(/_/g,"-")}var qh="en-US";var I5=qh;function jN(n){typeof n=="string"&&(I5=n.toLowerCase().replace(/_/g,"-"))}function Q(n,e,t){let r=Pe(),i=un(),s=Sn();return BN(i,r,r[ht],s,n,e,t),Q}function nu(n,e,t){let r=Pe(),i=un(),s=Sn();return(s.type&3||t)&&xN(s,i,r,t,r[ht],n,e,Rm(s,r,e)),nu}function BN(n,e,t,r,i,s,o){let a=!0,c=null;if((r.type&3||o)&&(c??=Rm(r,e,s),xN(r,n,e,o,t,i,s,c)&&(a=!1)),a){let d=r.outputs?.[i],h=r.hostDirectiveOutputs?.[i];if(h&&h.length)for(let p=0;p<h.length;p+=2){let y=h[p],I=h[p+1];c??=Rm(r,e,s),tk(r,e,y,I,i,c)}if(d&&d.length)for(let p of d)c??=Rm(r,e,s),tk(r,e,p,i,i,c)}}function B(n=1){return kR(n)}function HI(n){let e=wR();return fE(e,Ft+n)}function Dm(n,e){return n<<17|e<<2}function ac(n){return n>>17&32767}function b5(n){return(n&2)==2}function C5(n,e){return n&131071|e<<17}function hI(n){return n|2}function Zl(n){return(n&131068)>>2}function HE(n,e){return n&-131069|e<<2}function T5(n){return(n&1)===1}function fI(n){return n|1}function D5(n,e,t,r,i,s){let o=s?e.classBindings:e.styleBindings,a=ac(o),c=Zl(o);n[r]=t;let d=!1,h;if(Array.isArray(t)){let p=t;h=p[1],(h===null||jl(p,h)>0)&&(d=!0)}else h=t;if(i)if(c!==0){let y=ac(n[a+1]);n[r+1]=Dm(y,a),y!==0&&(n[y+1]=HE(n[y+1],r)),n[a+1]=C5(n[a+1],r)}else n[r+1]=Dm(a,0),a!==0&&(n[a+1]=HE(n[a+1],r)),a=r;else n[r+1]=Dm(c,0),a===0?a=r:n[c+1]=HE(n[c+1],r),c=r;d&&(n[r+1]=hI(n[r+1])),ck(n,h,r,!0),ck(n,h,r,!1),S5(e,h,n,r,s),o=Dm(a,c),s?e.classBindings=o:e.styleBindings=o}function S5(n,e,t,r,i){let s=i?n.residualClasses:n.residualStyles;s!=null&&typeof e=="string"&&jl(s,e)>=0&&(t[r+1]=fI(t[r+1]))}function ck(n,e,t,r){let i=n[t+1],s=e===null,o=r?ac(i):Zl(i),a=!1;for(;o!==0&&(a===!1||s);){let c=n[o],d=n[o+1];A5(c,e)&&(a=!0,n[o+1]=r?fI(d):hI(d)),o=r?ac(d):Zl(d)}a&&(n[t+1]=r?hI(i):fI(i))}function A5(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?jl(n,e)>=0:!1}var zr={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function x5(n){return n.substring(zr.key,zr.keyEnd)}function R5(n){return k5(n),$N(n,HN(n,0,zr.textEnd))}function $N(n,e){let t=zr.textEnd;return t===e?-1:(e=zr.keyEnd=N5(n,zr.key=e,t),HN(n,e,t))}function k5(n){zr.key=0,zr.keyEnd=0,zr.value=0,zr.valueEnd=0,zr.textEnd=n.length}function HN(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function N5(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}function uy(n,e,t){return qN(n,e,t,!1),uy}function xn(n,e){return qN(n,e,null,!0),xn}function ft(n){P5(j5,M5,n,!0)}function M5(n,e){for(let t=R5(e);t>=0;t=$N(e,t))um(n,x5(e),!0)}function qN(n,e,t,r){let i=Pe(),s=un(),o=mm(2);if(s.firstUpdatePass&&GN(s,n,o,r),e!==Yn&&bi(i,o,e)){let a=s.data[wi()];WN(s,a,i,i[ht],n,i[o+1]=$5(e,t),r,o)}}function P5(n,e,t,r){let i=un(),s=mm(2);i.firstUpdatePass&&GN(i,null,s,r);let o=Pe();if(t!==Yn&&bi(o,s,t)){let a=i.data[wi()];if(KN(a,r)&&!zN(i,s)){let c=r?a.classesWithoutHost:a.stylesWithoutHost;c!==null&&(t=om(c,t||"")),dI(i,a,o,t,r)}else B5(i,a,o,o[ht],o[s+1],o[s+1]=U5(n,e,t),r,s)}}function zN(n,e){return e>=n.expandoStartIndex}function GN(n,e,t,r){let i=n.data;if(i[t+1]===null){let s=i[wi()],o=zN(n,t);KN(s,r)&&e===null&&!o&&(e=!1),e=O5(i,s,e,r),D5(i,s,e,t,o,r)}}function O5(n,e,t,r){let i=SR(n),s=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=qE(null,n,e,t,r),t=Vh(t,e.attrs,r),s=null);else{let o=e.directiveStylingLast;if(o===-1||n[o]!==i)if(t=qE(i,n,e,t,r),s===null){let c=F5(n,e,r);c!==void 0&&Array.isArray(c)&&(c=qE(null,n,e,c[1],r),c=Vh(c,e.attrs,r),V5(n,e,r,c))}else s=L5(n,e,r)}return s!==void 0&&(r?e.residualClasses=s:e.residualStyles=s),t}function F5(n,e,t){let r=t?e.classBindings:e.styleBindings;if(Zl(r)!==0)return n[ac(r)]}function V5(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[ac(i)]=r}function L5(n,e,t){let r,i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++){let o=n[s].hostAttrs;r=Vh(r,o,t)}return Vh(r,e.attrs,t)}function qE(n,e,t,r,i){let s=null,o=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<o&&(s=e[a],r=Vh(r,s.hostAttrs,i),s!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function Vh(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let s=0;s<e.length;s++){let o=e[s];typeof o=="number"?i=o:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),um(n,o,t?!0:e[++s]))}return n===void 0?null:n}function U5(n,e,t){if(t==null||t==="")return Un;let r=[],i=Uh(t);if(Array.isArray(i))for(let s=0;s<i.length;s++)n(r,i[s],!0);else if(typeof i=="object")for(let s in i)i.hasOwnProperty(s)&&n(r,s,i[s]);else typeof i=="string"&&e(r,i);return r}function j5(n,e,t){let r=String(e);r!==""&&!r.includes(" ")&&um(n,r,t)}function B5(n,e,t,r,i,s,o,a){i===Yn&&(i=Un);let c=0,d=0,h=0<i.length?i[0]:null,p=0<s.length?s[0]:null;for(;h!==null||p!==null;){let y=c<i.length?i[c+1]:void 0,I=d<s.length?s[d+1]:void 0,k=null,P;h===p?(c+=2,d+=2,y!==I&&(k=p,P=I)):p===null||h!==null&&h<p?(c+=2,k=h):(d+=2,k=p,P=I),k!==null&&WN(n,e,t,r,k,P,o,a),h=c<i.length?i[c]:null,p=d<s.length?s[d]:null}}function WN(n,e,t,r,i,s,o,a){if(!(e.type&3))return;let c=n.data,d=c[a+1],h=T5(d)?lk(c,e,t,i,Zl(d),o):void 0;if(!Km(h)){Km(s)||b5(d)&&(s=lk(c,null,t,i,a,o));let p=hE(wi(),t);L3(r,o,p,i,s)}}function lk(n,e,t,r,i,s){let o=e===null,a;for(;i>0;){let c=n[i],d=Array.isArray(c),h=d?c[1]:c,p=h===null,y=t[i+1];y===Yn&&(y=p?Un:void 0);let I=p?dm(y,r):h===r?y:void 0;if(d&&!Km(I)&&(I=dm(c,r)),Km(I)&&(a=I,o))return a;let k=n[i+1];i=o?ac(k):Zl(k)}if(e!==null){let c=s?e.residualClasses:e.residualStyles;c!=null&&(a=dm(c,r))}return a}function Km(n){return n!==void 0}function $5(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=ns(Uh(n)))),n}function KN(n,e){return(n.flags&(e?8:16))!==0}function N(n,e=""){let t=Pe(),r=un(),i=n+Ft,s=r.firstCreatePass?oy(r,i,1,e,null):r.data[i],o=H5(r,t,s,e,n);t[i]=o,Em()&&xI(r,t,o,s),Gl(s,!1)}var H5=(n,e,t,r,i)=>(Im(!0),t3(e[ht],r));function q5(n,e,t,r=""){return bi(n,ec(),t)?e+za(t)+r:Yn}function z5(n,e,t,r,i,s=""){let o=IR(),a=AN(n,o,t,i);return mm(2),a?e+za(t)+r+za(i)+s:Yn}function Re(n){return lt("",n),Re}function lt(n,e,t){let r=Pe(),i=q5(r,n,e,t);return i!==Yn&&QN(r,wi(),i),lt}function dy(n,e,t,r,i){let s=Pe(),o=z5(s,n,e,t,r,i);return o!==Yn&&QN(s,wi(),o),dy}function QN(n,e,t){let r=hE(e,n);n3(n[ht],r,t)}function sn(n,e,t){LI(e)&&(e=e());let r=Pe(),i=ec();if(bi(r,i,e)){let s=un(),o=wm();oN(o,r,n,e,r[ht],t)}return sn}function dn(n,e){let t=LI(n);return t&&n.set(e),t}function on(n,e){let t=Pe(),r=un(),i=Sn();return BN(r,t,t[ht],i,n,e),on}function uk(n,e,t){let r=un();r.firstCreatePass&&YN(e,r.data,r.blueprint,_i(n),t)}function YN(n,e,t,r,i){if(n=En(n),Array.isArray(n))for(let s=0;s<n.length;s++)YN(n[s],e,t,r,i);else{let s=un(),o=Pe(),a=Sn(),c=$a(n)?n:En(n.provide),d=aE(n),h=a.providerIndexes&1048575,p=a.directiveStart,y=a.providerIndexes>>20;if($a(n)||!n.multi){let I=new nc(d,i,Be,null),k=GE(c,e,i?h:h+y,p);k===-1?(KE(Om(a,o),s,c),zE(s,n,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(I),o.push(I)):(t[k]=I,o[k]=I)}else{let I=GE(c,e,h+y,p),k=GE(c,e,h,h+y),P=I>=0&&t[I],M=k>=0&&t[k];if(i&&!M||!i&&!P){KE(Om(a,o),s,c);let $=K5(i?W5:G5,t.length,i,r,d,n);!i&&M&&(t[k].providerFactory=$),zE(s,n,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push($),o.push($)}else{let $=JN(t[i?k:I],d,!i&&r);zE(s,n,I>-1?I:k,$)}!i&&r&&M&&t[k].componentProviders++}}}function zE(n,e,t,r){let i=$a(e),s=iR(e);if(i||s){let c=(s?En(e.useClass):e).prototype.ngOnDestroy;if(c){let d=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let h=d.indexOf(t);h===-1?d.push(t,[r,c]):d[h+1].push(r,c)}else d.push(t,c)}}}function JN(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function GE(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function G5(n,e,t,r,i){return pI(this.multi,[])}function W5(n,e,t,r,i){let s=this.multi,o;if(this.providerFactory){let a=this.providerFactory.componentProviders,c=Fm(r,r[me],this.providerFactory.index,i);o=c.slice(0,a),pI(s,o);for(let d=a;d<c.length;d++)o.push(c[d])}else o=[],pI(s,o);return o}function pI(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function K5(n,e,t,r,i,s){let o=new nc(n,t,Be,null);return o.multi=[],o.index=e,o.componentProviders=0,JN(o,i,r&&!t),o}function ru(n,e){return t=>{t.providersResolver=(r,i)=>uk(r,i?i(n):n,!1),e&&(t.viewProvidersResolver=(r,i)=>uk(r,i?i(e):e,!0))}}function Q5(n,e){let t=n[e];return t===Yn?void 0:t}function Y5(n,e,t,r,i,s,o){let a=e+t;return AN(n,a,i,s)?P6(n,a+2,o?r.call(o,i,s):r(i,s)):Q5(n,a+2)}function zh(n,e){let t=un(),r,i=n+Ft;t.firstCreatePass?(r=J5(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];let s=r.factory||(r.factory=mo(r.type,!0)),o,a=Ln(Be);try{let c=Pm(!1),d=s();return Pm(c),pE(t,Pe(),i,d),d}finally{Ln(a)}}function J5(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function Gh(n,e,t,r){let i=n+Ft,s=Pe(),o=fE(s,i);return X5(s,i)?Y5(s,ER(),e,o.transform,t,r,o):o.transform(t,r)}function X5(n,e){return n[me].data[e].pure}var Qm=class{ngModuleFactory;componentFactories;constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},qI=(()=>{class n{compileModuleSync(t){return new qm(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=Xw(t),s=Wk(i.declarations).reduce((o,a)=>{let c=vo(a);return c&&o.push(new Xl(c)),o},[]);return new Qm(r,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=se({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var XN=(()=>{class n{applicationErrorHandler=j(sr);appRef=j(So);taskService=j(os);ngZone=j(gt);zonelessEnabled=j(xh);tracing=j(lc,{optional:!0});zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Zt;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(yh):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(j(PE,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()}))}notify(t){if(!this.zonelessEnabled&&t===5)return;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2;break}case 12:{this.appRef.dirtyFlags|=16;break}case 13:{this.appRef.dirtyFlags|=2;break}case 11:break;case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?RE:xE;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(yh+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(t),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,RE(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=se({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function ZN(){return[{provide:_o,useExisting:XN},{provide:gt,useClass:_h},{provide:xh,useValue:!0}]}function Z5(){return typeof $localize<"u"&&$localize.locale||qh}var Wh=new ae("",{factory:()=>j(Wh,{optional:!0,skipSelf:!0})||Z5()});function nt(n,e){return Sg(n,e?.equal)}var tM=Symbol("InputSignalNode#UNSET"),y9=ce(z({},Ag),{transformFn:void 0,applyValueToInputSignal(n,e){ch(n,e)}});function nM(n,e){let t=Object.create(y9);t.value=n,t.transformFn=e?.transform;function r(){if(sh(t),t.value===tM){let i=null;throw new oe(-950,i)}return t.value}return r[On]=t,r}var fy=class{attributeName;constructor(e){this.attributeName=e}__NG_ELEMENT_ID__=()=>Lh(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}};function eM(n,e){return nM(n,e)}function _9(n){return nM(tM,n)}var rM=(eM.required=_9,eM);var zI=new ae(""),v9=new ae("");function Kh(n){return!n.moduleRef}function w9(n){let e=Kh(n)?n.r3Injector:n.moduleRef.injector,t=e.get(gt);return t.run(()=>{Kh(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(sr),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:r})}),Kh(n)){let s=()=>e.destroy(),o=n.platformInjector.get(zI);o.add(s),e.onDestroy(()=>{i.unsubscribe(),o.delete(s)})}else{let s=()=>n.moduleRef.destroy(),o=n.platformInjector.get(zI);o.add(s),n.moduleRef.onDestroy(()=>{Nh(n.allPlatformModules,n.moduleRef),i.unsubscribe(),o.delete(s)})}return I9(r,t,()=>{let s=e.get(os),o=s.add(),a=e.get(BI);return a.runInitializers(),a.donePromise.then(()=>{let c=e.get(Wh,qh);if(jN(c||qh),!e.get(v9,!0))return Kh(n)?e.get(So):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(Kh(n)){let h=e.get(So);return n.rootComponent!==void 0&&h.bootstrap(n.rootComponent),h}else return E9?.(n.moduleRef,n.allPlatformModules),n.moduleRef}).finally(()=>void s.remove(o))})})}var E9;function I9(n,e,t){try{let r=t();return Do(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n(r)),r}}var hy=null;function b9(n=[],e){return Ot.create({name:e,providers:[{provide:Eh,useValue:"platform"},{provide:zI,useValue:new Set([()=>hy=null])},...n]})}function C9(n=[]){if(hy)return hy;let e=b9(n);return hy=e,VN(),T9(e),e}function T9(n){let e=n.get(Jm,null);tn(n,()=>{e?.forEach(t=>t())})}function GI(){return!1}var uc=(()=>{class n{static __NG_ELEMENT_ID__=D9}return n})();function D9(n){return S9(Sn(),Pe(),(n&16)===16)}function S9(n,e,t){if(Io(n)&&!t){let r=wr(n.index,e);return new ic(r,r)}else if(n.type&175){let r=e[rr];return new ic(r,e)}return null}function iM(n){let{rootComponent:e,appProviders:t,platformProviders:r,platformRef:i}=n;tt(ze.BootstrapApplicationStart);try{let s=i?.injector??C9(r),o=[ZN(),FR,...t||[]],a=new Fh({providers:o,parent:s,debugName:"",runEnvironmentInitializers:!1});return w9({r3Injector:a.injector,platformInjector:s,rootComponent:e})}catch(s){return Promise.reject(s)}finally{tt(ze.BootstrapApplicationEnd)}}function su(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}var sM=null;function Er(){return sM}function WI(n){sM??=n}var Qh=class{},py=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=se({token:n,factory:()=>j(oM),providedIn:"platform"})}return n})();var oM=(()=>{class n extends py{_location;_history;_doc=j(nn);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Er().getBaseHref(this._doc)}onPopState(t){let r=Er().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=Er().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||n)};static \u0275prov=se({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function lM(n,e){return n?e?n.endsWith("/")?e.startsWith("/")?n+e.slice(1):n+e:e.startsWith("/")?n+e:`${n}/${e}`:n:e}function aM(n){let e=n.search(/#|\?|$/);return n[e-1]==="/"?n.slice(0,e-1)+n.slice(e):n}function xo(n){return n&&n[0]!=="?"?`?${n}`:n}var ou=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=se({token:n,factory:()=>j(x9),providedIn:"root"})}return n})(),A9=new ae(""),x9=(()=>{class n extends ou{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??j(nn).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return lM(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+xo(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){let o=this.prepareExternalUrl(i+xo(s));this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){let o=this.prepareExternalUrl(i+xo(s));this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(xe(py),xe(A9,8))};static \u0275prov=se({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),au=(()=>{class n{_subject=new en;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=N9(aM(cM(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+xo(r))}normalize(t){return n.stripTrailingSlash(k9(this._basePath,cM(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+xo(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+xo(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=xo;static joinWithSlash=lM;static stripTrailingSlash=aM;static \u0275fac=function(r){return new(r||n)(xe(ou))};static \u0275prov=se({token:n,factory:()=>R9(),providedIn:"root"})}return n})();function R9(){return new au(xe(ou))}function k9(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function cM(n){return n.replace(/\/index.html$/,"")}function N9(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var Rn=(function(n){return n[n.Format=0]="Format",n[n.Standalone=1]="Standalone",n})(Rn||{}),at=(function(n){return n[n.Narrow=0]="Narrow",n[n.Abbreviated=1]="Abbreviated",n[n.Wide=2]="Wide",n[n.Short=3]="Short",n})(at||{}),Jn=(function(n){return n[n.Short=0]="Short",n[n.Medium=1]="Medium",n[n.Long=2]="Long",n[n.Full=3]="Full",n})(Jn||{}),hs={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function dM(n){return ar(n)[kt.LocaleId]}function hM(n,e,t){let r=ar(n),i=[r[kt.DayPeriodsFormat],r[kt.DayPeriodsStandalone]],s=Ir(i,e);return Ir(s,t)}function fM(n,e,t){let r=ar(n),i=[r[kt.DaysFormat],r[kt.DaysStandalone]],s=Ir(i,e);return Ir(s,t)}function pM(n,e,t){let r=ar(n),i=[r[kt.MonthsFormat],r[kt.MonthsStandalone]],s=Ir(i,e);return Ir(s,t)}function gM(n,e){let r=ar(n)[kt.Eras];return Ir(r,e)}function Yh(n,e){let t=ar(n);return Ir(t[kt.DateFormat],e)}function Jh(n,e){let t=ar(n);return Ir(t[kt.TimeFormat],e)}function Xh(n,e){let r=ar(n)[kt.DateTimeFormat];return Ir(r,e)}function Zh(n,e){let t=ar(n),r=t[kt.NumberSymbols][e];if(typeof r>"u"){if(e===hs.CurrencyDecimal)return t[kt.NumberSymbols][hs.Decimal];if(e===hs.CurrencyGroup)return t[kt.NumberSymbols][hs.Group]}return r}function mM(n){if(!n[kt.ExtraData])throw new oe(2303,!1)}function yM(n){let e=ar(n);return mM(e),(e[kt.ExtraData][2]||[]).map(r=>typeof r=="string"?KI(r):[KI(r[0]),KI(r[1])])}function _M(n,e,t){let r=ar(n);mM(r);let i=[r[kt.ExtraData][0],r[kt.ExtraData][1]],s=Ir(i,e)||[];return Ir(s,t)||[]}function Ir(n,e){for(let t=e;t>-1;t--)if(typeof n[t]<"u")return n[t];throw new oe(2304,!1)}function KI(n){let[e,t]=n.split(":");return{hours:+e,minutes:+t}}var M9=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,gy={},P9=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;function vM(n,e,t,r){let i=H9(n);e=ds(t,e)||e;let o=[],a;for(;e;)if(a=P9.exec(e),a){o=o.concat(a.slice(1));let h=o.pop();if(!h)break;e=h}else{o.push(e);break}let c=i.getTimezoneOffset();r&&(c=EM(r,c),i=$9(i,r));let d="";return o.forEach(h=>{let p=j9(h);d+=p?p(i,t,c):h==="''"?"'":h.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),d}function wy(n,e,t){let r=new Date(0);return r.setFullYear(n,e,t),r.setHours(0,0,0),r}function ds(n,e){let t=dM(n);if(gy[t]??={},gy[t][e])return gy[t][e];let r="";switch(e){case"shortDate":r=Yh(n,Jn.Short);break;case"mediumDate":r=Yh(n,Jn.Medium);break;case"longDate":r=Yh(n,Jn.Long);break;case"fullDate":r=Yh(n,Jn.Full);break;case"shortTime":r=Jh(n,Jn.Short);break;case"mediumTime":r=Jh(n,Jn.Medium);break;case"longTime":r=Jh(n,Jn.Long);break;case"fullTime":r=Jh(n,Jn.Full);break;case"short":let i=ds(n,"shortTime"),s=ds(n,"shortDate");r=my(Xh(n,Jn.Short),[i,s]);break;case"medium":let o=ds(n,"mediumTime"),a=ds(n,"mediumDate");r=my(Xh(n,Jn.Medium),[o,a]);break;case"long":let c=ds(n,"longTime"),d=ds(n,"longDate");r=my(Xh(n,Jn.Long),[c,d]);break;case"full":let h=ds(n,"fullTime"),p=ds(n,"fullDate");r=my(Xh(n,Jn.Full),[h,p]);break}return r&&(gy[t][e]=r),r}function my(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,r){return e!=null&&r in e?e[r]:t})),n}function Wr(n,e,t="-",r,i){let s="";(n<0||i&&n<=0)&&(i?n=-n+1:(n=-n,s=t));let o=String(n);for(;o.length<e;)o="0"+o;return r&&(o=o.slice(o.length-e)),s+o}function O9(n,e){return Wr(n,3).substring(0,e)}function Vt(n,e,t=0,r=!1,i=!1){return function(s,o){let a=F9(n,s);if((t>0||a>-t)&&(a+=t),n===3)a===0&&t===-12&&(a=12);else if(n===6)return O9(a,e);let c=Zh(o,hs.MinusSign);return Wr(a,e,c,r,i)}}function F9(n,e){switch(n){case 0:return e.getFullYear();case 1:return e.getMonth();case 2:return e.getDate();case 3:return e.getHours();case 4:return e.getMinutes();case 5:return e.getSeconds();case 6:return e.getMilliseconds();case 7:return e.getDay();default:throw new oe(2301,!1)}}function dt(n,e,t=Rn.Format,r=!1){return function(i,s){return V9(i,s,n,e,t,r)}}function V9(n,e,t,r,i,s){switch(t){case 2:return pM(e,i,r)[n.getMonth()];case 1:return fM(e,i,r)[n.getDay()];case 0:let o=n.getHours(),a=n.getMinutes();if(s){let d=yM(e),h=_M(e,i,r),p=d.findIndex(y=>{if(Array.isArray(y)){let[I,k]=y,P=o>=I.hours&&a>=I.minutes,M=o<k.hours||o===k.hours&&a<k.minutes;if(I.hours<k.hours){if(P&&M)return!0}else if(P||M)return!0}else if(y.hours===o&&y.minutes===a)return!0;return!1});if(p!==-1)return h[p]}return hM(e,i,r)[o<12?0:1];case 3:return gM(e,r)[n.getFullYear()<=0?0:1];default:let c=t;throw new oe(2302,!1)}}function yy(n){return function(e,t,r){let i=-1*r,s=Zh(t,hs.MinusSign),o=i>0?Math.floor(i/60):Math.ceil(i/60);switch(n){case 0:return(i>=0?"+":"")+Wr(o,2,s)+Wr(Math.abs(i%60),2,s);case 1:return"GMT"+(i>=0?"+":"")+Wr(o,1,s);case 2:return"GMT"+(i>=0?"+":"")+Wr(o,2,s)+":"+Wr(Math.abs(i%60),2,s);case 3:return r===0?"Z":(i>=0?"+":"")+Wr(o,2,s)+":"+Wr(Math.abs(i%60),2,s);default:throw new oe(2310,!1)}}}var L9=0,vy=4;function U9(n){let e=wy(n,L9,1).getDay();return wy(n,0,1+(e<=vy?vy:vy+7)-e)}function wM(n){let e=n.getDay(),t=e===0?-3:vy-e;return wy(n.getFullYear(),n.getMonth(),n.getDate()+t)}function QI(n,e=!1){return function(t,r){let i;if(e){let s=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,o=t.getDate();i=1+Math.floor((o+s)/7)}else{let s=wM(t),o=U9(s.getFullYear()),a=s.getTime()-o.getTime();i=1+Math.round(a/6048e5)}return Wr(i,n,Zh(r,hs.MinusSign))}}function _y(n,e=!1){return function(t,r){let s=wM(t).getFullYear();return Wr(s,n,Zh(r,hs.MinusSign),e)}}var YI={};function j9(n){if(YI[n])return YI[n];let e;switch(n){case"G":case"GG":case"GGG":e=dt(3,at.Abbreviated);break;case"GGGG":e=dt(3,at.Wide);break;case"GGGGG":e=dt(3,at.Narrow);break;case"y":e=Vt(0,1,0,!1,!0);break;case"yy":e=Vt(0,2,0,!0,!0);break;case"yyy":e=Vt(0,3,0,!1,!0);break;case"yyyy":e=Vt(0,4,0,!1,!0);break;case"Y":e=_y(1);break;case"YY":e=_y(2,!0);break;case"YYY":e=_y(3);break;case"YYYY":e=_y(4);break;case"M":case"L":e=Vt(1,1,1);break;case"MM":case"LL":e=Vt(1,2,1);break;case"MMM":e=dt(2,at.Abbreviated);break;case"MMMM":e=dt(2,at.Wide);break;case"MMMMM":e=dt(2,at.Narrow);break;case"LLL":e=dt(2,at.Abbreviated,Rn.Standalone);break;case"LLLL":e=dt(2,at.Wide,Rn.Standalone);break;case"LLLLL":e=dt(2,at.Narrow,Rn.Standalone);break;case"w":e=QI(1);break;case"ww":e=QI(2);break;case"W":e=QI(1,!0);break;case"d":e=Vt(2,1);break;case"dd":e=Vt(2,2);break;case"c":case"cc":e=Vt(7,1);break;case"ccc":e=dt(1,at.Abbreviated,Rn.Standalone);break;case"cccc":e=dt(1,at.Wide,Rn.Standalone);break;case"ccccc":e=dt(1,at.Narrow,Rn.Standalone);break;case"cccccc":e=dt(1,at.Short,Rn.Standalone);break;case"E":case"EE":case"EEE":e=dt(1,at.Abbreviated);break;case"EEEE":e=dt(1,at.Wide);break;case"EEEEE":e=dt(1,at.Narrow);break;case"EEEEEE":e=dt(1,at.Short);break;case"a":case"aa":case"aaa":e=dt(0,at.Abbreviated);break;case"aaaa":e=dt(0,at.Wide);break;case"aaaaa":e=dt(0,at.Narrow);break;case"b":case"bb":case"bbb":e=dt(0,at.Abbreviated,Rn.Standalone,!0);break;case"bbbb":e=dt(0,at.Wide,Rn.Standalone,!0);break;case"bbbbb":e=dt(0,at.Narrow,Rn.Standalone,!0);break;case"B":case"BB":case"BBB":e=dt(0,at.Abbreviated,Rn.Format,!0);break;case"BBBB":e=dt(0,at.Wide,Rn.Format,!0);break;case"BBBBB":e=dt(0,at.Narrow,Rn.Format,!0);break;case"h":e=Vt(3,1,-12);break;case"hh":e=Vt(3,2,-12);break;case"H":e=Vt(3,1);break;case"HH":e=Vt(3,2);break;case"m":e=Vt(4,1);break;case"mm":e=Vt(4,2);break;case"s":e=Vt(5,1);break;case"ss":e=Vt(5,2);break;case"S":e=Vt(6,1);break;case"SS":e=Vt(6,2);break;case"SSS":e=Vt(6,3);break;case"Z":case"ZZ":case"ZZZ":e=yy(0);break;case"ZZZZZ":e=yy(3);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=yy(1);break;case"OOOO":case"ZZZZ":case"zzzz":e=yy(2);break;default:return null}return YI[n]=e,e}function EM(n,e){n=n.replace(/:/g,"");let t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function B9(n,e){return n=new Date(n.getTime()),n.setMinutes(n.getMinutes()+e),n}function $9(n,e,t){let i=n.getTimezoneOffset(),s=EM(e,i);return B9(n,-1*(s-i))}function H9(n){if(uM(n))return n;if(typeof n=="number"&&!isNaN(n))return new Date(n);if(typeof n=="string"){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){let[i,s=1,o=1]=n.split("-").map(a=>+a);return wy(i,s-1,o)}let t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let r;if(r=n.match(M9))return q9(r)}let e=new Date(n);if(!uM(e))throw new oe(2311,!1);return e}function q9(n){let e=new Date(0),t=0,r=0,i=n[8]?e.setUTCFullYear:e.setFullYear,s=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),r=Number(n[9]+n[11])),i.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));let o=Number(n[4]||0)-t,a=Number(n[5]||0)-r,c=Number(n[6]||0),d=Math.floor(parseFloat("0."+(n[7]||0))*1e3);return s.call(e,o,a,c,d),e}function uM(n){return n instanceof Date&&!isNaN(n.valueOf())}function z9(n,e){return new oe(2100,!1)}var G9="mediumDate",IM=new ae(""),bM=new ae(""),ef=(()=>{class n{locale;defaultTimezone;defaultOptions;constructor(t,r,i){this.locale=t,this.defaultTimezone=r,this.defaultOptions=i}transform(t,r,i,s){if(t==null||t===""||t!==t)return null;try{let o=r??this.defaultOptions?.dateFormat??G9,a=i??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return vM(t,o,s||this.locale,a)}catch(o){throw z9(n,o.message)}}static \u0275fac=function(r){return new(r||n)(Be(Wh,16),Be(IM,24),Be(bM,24))};static \u0275pipe=FI({name:"date",type:n,pure:!0})}return n})();var br=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=ls({type:n});static \u0275inj=gi({})}return n})();function JI(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,s]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}var tf=class{};var CM="browser";var nf=class{_doc;constructor(e){this._doc=e}manager},Ey=(()=>{class n extends nf{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i,s){return t.addEventListener(r,i,s),()=>this.removeEventListener(t,r,i,s)}removeEventListener(t,r,i,s){return t.removeEventListener(r,i,s)}static \u0275fac=function(r){return new(r||n)(xe(nn))};static \u0275prov=se({token:n,factory:n.\u0275fac})}return n})(),Cy=new ae(""),nb=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,r){this._zone=r,t.forEach(o=>{o.manager=this});let i=t.filter(o=>!(o instanceof Ey));this._plugins=i.slice().reverse();let s=t.find(o=>o instanceof Ey);s&&this._plugins.push(s)}addEventListener(t,r,i,s){return this._findPluginFor(r).addEventListener(t,r,i,s)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(s=>s.supports(t)),!r)throw new oe(5101,!1);return this._eventNameToPlugin.set(t,r),r}static \u0275fac=function(r){return new(r||n)(xe(Cy),xe(gt))};static \u0275prov=se({token:n,factory:n.\u0275fac})}return n})(),ZI="ng-app-id";function TM(n){for(let e of n)e.remove()}function DM(n,e){let t=e.createElement("style");return t.textContent=n,t}function K9(n,e,t,r){let i=n.head?.querySelectorAll(`style[${ZI}="${e}"],link[${ZI}="${e}"]`);if(i)for(let s of i)s.removeAttribute(ZI),s instanceof HTMLLinkElement?r.set(s.href.slice(s.href.lastIndexOf("/")+1),{usage:0,elements:[s]}):s.textContent&&t.set(s.textContent,{usage:0,elements:[s]})}function tb(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var rb=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(t,r,i,s={}){this.doc=t,this.appId=r,this.nonce=i,K9(t,r,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,r){for(let i of t)this.addUsage(i,this.inline,DM);r?.forEach(i=>this.addUsage(i,this.external,tb))}removeStyles(t,r){for(let i of t)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(t,r,i){let s=r.get(t);s?s.usage++:r.set(t,{usage:1,elements:[...this.hosts].map(o=>this.addElement(o,i(t,this.doc)))})}removeUsage(t,r){let i=r.get(t);i&&(i.usage--,i.usage<=0&&(TM(i.elements),r.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])TM(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(t,DM(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(t,tb(r,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,r){return this.nonce&&r.setAttribute("nonce",this.nonce),t.appendChild(r)}static \u0275fac=function(r){return new(r||n)(xe(nn),xe(Ym),xe(Xm,8),xe(cc))};static \u0275prov=se({token:n,factory:n.\u0275fac})}return n})(),eb={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},ib=/%COMP%/g;var AM="%COMP%",Q9=`_nghost-${AM}`,Y9=`_ngcontent-${AM}`,J9=!0,X9=new ae("",{factory:()=>J9});function Z9(n){return Y9.replace(ib,n)}function e$(n){return Q9.replace(ib,n)}function xM(n,e){return e.map(t=>t.replace(ib,n))}var sb=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,r,i,s,o,a,c=null,d=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.ngZone=a,this.nonce=c,this.tracingService=d,this.platformIsServer=!1,this.defaultRenderer=new rf(t,o,a,this.platformIsServer,this.tracingService)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(t,r);return i instanceof by?i.applyToHost(t):i instanceof sf&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,s=i.get(r.id);if(!s){let o=this.doc,a=this.ngZone,c=this.eventManager,d=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.platformIsServer,y=this.tracingService;switch(r.encapsulation){case Gr.Emulated:s=new by(c,d,r,this.appId,h,o,a,p,y);break;case Gr.ShadowDom:return new Iy(c,t,r,o,a,this.nonce,p,y,d);case Gr.ExperimentalIsolatedShadowDom:return new Iy(c,t,r,o,a,this.nonce,p,y);default:s=new sf(c,d,r,h,o,a,p,y);break}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(r){return new(r||n)(xe(nb),xe(rb),xe(Ym),xe(X9),xe(nn),xe(gt),xe(Xm),xe(lc,8))};static \u0275prov=se({token:n,factory:n.\u0275fac})}return n})(),rf=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,r,i,s){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.tracingService=s}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(eb[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(SM(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(SM(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new oe(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let s=eb[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=eb[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Ii.DashCase|Ii.Important)?e.style.setProperty(t,r,i&Ii.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Ii.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r,i){if(typeof e=="string"&&(e=Er().getGlobalEventTarget(this.doc,e),!e))throw new oe(5102,!1);let s=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(s=this.tracingService.wrapEventListener(e,t,s)),this.eventManager.addEventListener(e,t,s,i)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;e(t)===!1&&t.preventDefault()}}};function SM(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var Iy=class extends rf{hostEl;sharedStylesHost;shadowRoot;constructor(e,t,r,i,s,o,a,c,d){super(e,i,s,a,c),this.hostEl=t,this.sharedStylesHost=d,this.shadowRoot=t.attachShadow({mode:"open"}),this.sharedStylesHost&&this.sharedStylesHost.addHost(this.shadowRoot);let h=r.styles;h=xM(r.id,h);for(let y of h){let I=document.createElement("style");o&&I.setAttribute("nonce",o),I.textContent=y,this.shadowRoot.appendChild(I)}let p=r.getExternalStyles?.();if(p)for(let y of p){let I=tb(y,i);o&&I.setAttribute("nonce",o),this.shadowRoot.appendChild(I)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost&&this.sharedStylesHost.removeHost(this.shadowRoot)}},sf=class extends rf{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,r,i,s,o,a,c,d){super(e,s,o,a,c),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i;let h=r.styles;this.styles=d?xM(d,h):h,this.styleUrls=r.getExternalStyles?.(d)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&rc.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},by=class extends sf{contentAttr;hostAttr;constructor(e,t,r,i,s,o,a,c,d){let h=i+"-"+r.id;super(e,t,r,s,o,a,c,d,h),this.contentAttr=Z9(h),this.hostAttr=e$(h)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}};var Ty=class n extends Qh{supportsDOMEvents=!0;static makeCurrent(){WI(new n)}onAndCancel(e,t,r,i){return e.addEventListener(t,r,i),()=>{e.removeEventListener(t,r,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=t$();return t==null?null:n$(t)}resetBaseElement(){of=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return JI(document.cookie,e)}},of=null;function t$(){return of=of||document.head.querySelector("base"),of?of.getAttribute("href"):null}function n$(n){return new URL(n,document.baseURI).pathname}var r$=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=se({token:n,factory:n.\u0275fac})}return n})(),RM=["alt","control","meta","shift"],i$={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},s$={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},kM=(()=>{class n extends nf{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i,s){let o=n.parseEventName(r),a=n.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Er().onAndCancel(t,o.domEventName,a,s))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let s=n._normalizeKey(r.pop()),o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),RM.forEach(d=>{let h=r.indexOf(d);h>-1&&(r.splice(h,1),o+=d+".")}),o+=s,r.length!=0||s.length===0)return null;let c={};return c.domEventName=i,c.fullKey=o,c}static matchEventFullKeyCode(t,r){let i=i$[t.key]||t.key,s="";return r.indexOf("code.")>-1&&(i=t.code,s="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),RM.forEach(o=>{if(o!==i){let a=s$[o];a(t)&&(s+=o+".")}}),s+=i,s===r)}static eventCallback(t,r,i){return s=>{n.matchEventFullKeyCode(s,t)&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(r){return new(r||n)(xe(nn))};static \u0275prov=se({token:n,factory:n.\u0275fac})}return n})();function ob(n,e,t){let r=z({rootComponent:n,platformRef:t?.platformRef},o$(e));return iM(r)}function o$(n){return{appProviders:[...d$,...n?.providers??[]],platformProviders:u$}}function a$(){Ty.makeCurrent()}function c$(){return new pi}function l$(){return _I(document),document}var u$=[{provide:cc,useValue:CM},{provide:Jm,useValue:a$,multi:!0},{provide:nn,useFactory:l$}];var d$=[{provide:Eh,useValue:"root"},{provide:pi,useFactory:c$},{provide:Cy,useClass:Ey,multi:!0},{provide:Cy,useClass:kM,multi:!0},sb,rb,nb,{provide:sc,useExisting:sb},{provide:tf,useClass:r$},[]];var NM=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(r){return new(r||n)(xe(nn))};static \u0275prov=se({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Ee="primary",vf=Symbol("RouteTitle"),db=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function pc(n){return new db(n)}function BM(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let s=0;s<r.length;s++){let o=r[s],a=n[s];if(o[0]===":")i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function ky(n){return new Promise((e,t)=>{n.pipe(es()).subscribe({next:r=>e(r),error:r=>t(r)})})}function f$(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Di(n[t],e[t]))return!1;return!0}function Di(n,e){let t=n?hb(n):void 0,r=e?hb(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!$M(n[i],e[i]))return!1;return!0}function hb(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function $M(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}else return n===e}function HM(n){return n.length>0?n[n.length-1]:null}function mc(n){return Kg(n)?n:Do(n)?Mt(Promise.resolve(n)):je(n)}function qM(n){return Kg(n)?ky(n):Promise.resolve(n)}var p$={exact:GM,subset:WM},zM={exact:g$,subset:m$,ignored:()=>!0};function MM(n,e,t){return p$[t.paths](n.root,e.root,t.matrixParams)&&zM[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function g$(n,e){return Di(n,e)}function GM(n,e,t){if(!hc(n.segments,e.segments)||!Ay(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!GM(n.children[r],e.children[r],t))return!1;return!0}function m$(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>$M(n[t],e[t]))}function WM(n,e,t){return KM(n,e,e.segments,t)}function KM(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!hc(i,t)||e.hasChildren()||!Ay(i,t,r))}else if(n.segments.length===t.length){if(!hc(n.segments,t)||!Ay(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!WM(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!hc(n.segments,i)||!Ay(n.segments,i,r)||!n.children[Ee]?!1:KM(n.children[Ee],e,s,r)}}function Ay(n,e,t){return e.every((r,i)=>zM[t](n[i].parameters,r.parameters))}var Qr=class{root;queryParams;fragment;_queryParamMap;constructor(e=new Ye([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=pc(this.queryParams),this._queryParamMap}toString(){return v$.serialize(this)}},Ye=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return xy(this)}},Ro=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=pc(this.parameters),this._parameterMap}toString(){return YM(this)}};function y$(n,e){return hc(n,e)&&n.every((t,r)=>Di(t.parameters,e[r].parameters))}function hc(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function _$(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===Ee&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==Ee&&(t=t.concat(e(i,r)))}),t}var wf=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=se({token:n,factory:()=>new ko,providedIn:"root"})}return n})(),ko=class{parse(e){let t=new pb(e);return new Qr(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${af(e.root,!0)}`,r=I$(e.queryParams),i=typeof e.fragment=="string"?`#${w$(e.fragment)}`:"";return`${t}${r}${i}`}},v$=new ko;function xy(n){return n.segments.map(e=>YM(e)).join("/")}function af(n,e){if(!n.hasChildren())return xy(n);if(e){let t=n.children[Ee]?af(n.children[Ee],!1):"",r=[];return Object.entries(n.children).forEach(([i,s])=>{i!==Ee&&r.push(`${i}:${af(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=_$(n,(r,i)=>i===Ee?[af(n.children[Ee],!1)]:[`${i}:${af(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[Ee]!=null?`${xy(n)}/${t[0]}`:`${xy(n)}/(${t.join("//")})`}}function QM(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Dy(n){return QM(n).replace(/%3B/gi,";")}function w$(n){return encodeURI(n)}function fb(n){return QM(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Ry(n){return decodeURIComponent(n)}function PM(n){return Ry(n.replace(/\+/g,"%20"))}function YM(n){return`${fb(n.path)}${E$(n.parameters)}`}function E$(n){return Object.entries(n).map(([e,t])=>`;${fb(e)}=${fb(t)}`).join("")}function I$(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${Dy(t)}=${Dy(i)}`).join("&"):`${Dy(t)}=${Dy(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var b$=/^[^\/()?;#]+/;function ab(n){let e=n.match(b$);return e?e[0]:""}var C$=/^[^\/()?;=#]+/;function T$(n){let e=n.match(C$);return e?e[0]:""}var D$=/^[^=?&#]+/;function S$(n){let e=n.match(D$);return e?e[0]:""}var A$=/^[^&#]+/;function x$(n){let e=n.match(A$);return e?e[0]:""}var pb=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ye([],{}):new Ye([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Ee]=new Ye(e,t)),r}parseSegment(){let e=ab(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new oe(4009,!1);return this.capture(e),new Ro(Ry(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=T$(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=ab(this.remaining);i&&(r=i,this.capture(r))}e[Ry(t)]=Ry(r)}parseQueryParam(e){let t=S$(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let o=x$(this.remaining);o&&(r=o,this.capture(r))}let i=PM(t),s=PM(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=ab(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new oe(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=Ee);let o=this.parseChildren();t[s??Ee]=Object.keys(o).length===1&&o[Ee]?o[Ee]:new Ye([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new oe(4011,!1)}};function JM(n){return n.segments.length>0?new Ye([],{[Ee]:n}):n}function XM(n){let e={};for(let[r,i]of Object.entries(n.children)){let s=XM(i);if(r===Ee&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let t=new Ye(n.segments,e);return R$(t)}function R$(n){if(n.numberOfChildren===1&&n.children[Ee]){let e=n.children[Ee];return new Ye(n.segments.concat(e.segments),e.children)}return n}function No(n){return n instanceof Qr}function ZM(n,e,t=null,r=null,i=new ko){let s=eP(n);return tP(s,e,t,r,i)}function eP(n){let e;function t(s){let o={};for(let c of s.children){let d=t(c);o[c.outlet]=d}let a=new Ye(s.url,o);return s===n&&(e=a),a}let r=t(n.root),i=JM(r);return e??i}function tP(n,e,t,r,i){let s=n;for(;s.parent;)s=s.parent;if(e.length===0)return cb(s,s,s,t,r,i);let o=k$(e);if(o.toRoot())return cb(s,s,new Ye([],{}),t,r,i);let a=N$(o,s,n),c=a.processChildren?lf(a.segmentGroup,a.index,o.commands):rP(a.segmentGroup,a.index,o.commands);return cb(s,a.segmentGroup,c,t,r,i)}function Ny(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function hf(n){return typeof n=="object"&&n!=null&&n.outlets}function OM(n,e,t){n||="\u0275";let r=new Qr;return r.queryParams={[n]:e},t.parse(t.serialize(r)).queryParams[n]}function cb(n,e,t,r,i,s){let o={};for(let[d,h]of Object.entries(r??{}))o[d]=Array.isArray(h)?h.map(p=>OM(d,p,s)):OM(d,h,s);let a;n===e?a=t:a=nP(n,e,t);let c=JM(XM(a));return new Qr(c,o,i)}function nP(n,e,t){let r={};return Object.entries(n.children).forEach(([i,s])=>{s===e?r[i]=t:r[i]=nP(s,e,t)}),new Ye(n.segments,r)}var My=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Ny(r[0]))throw new oe(4003,!1);let i=r.find(hf);if(i&&i!==HM(r))throw new oe(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function k$(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new My(!0,0,n);let e=0,t=!1,r=n.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([c,d])=>{a[c]=typeof d=="string"?d.split("/"):d}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,s]},[]);return new My(t,e,r)}var lu=class{segmentGroup;processChildren;index;constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function N$(n,e,t){if(n.isAbsolute)return new lu(e,!0,0);if(!t)return new lu(e,!1,NaN);if(t.parent===null)return new lu(t,!0,0);let r=Ny(n.commands[0])?0:1,i=t.segments.length-1+r;return M$(t,i,n.numberOfDoubleDots)}function M$(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new oe(4005,!1);i=r.segments.length}return new lu(r,!1,i-s)}function P$(n){return hf(n[0])?n[0].outlets:{[Ee]:n}}function rP(n,e,t){if(n??=new Ye([],{}),n.segments.length===0&&n.hasChildren())return lf(n,e,t);let r=O$(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let s=new Ye(n.segments.slice(0,r.pathIndex),{});return s.children[Ee]=new Ye(n.segments.slice(r.pathIndex),n.children),lf(s,0,i)}else return r.match&&i.length===0?new Ye(n.segments,{}):r.match&&!n.hasChildren()?gb(n,e,t):r.match?lf(n,0,i):gb(n,e,t)}function lf(n,e,t){if(t.length===0)return new Ye(n.segments,{});{let r=P$(t),i={};if(Object.keys(r).some(s=>s!==Ee)&&n.children[Ee]&&n.numberOfChildren===1&&n.children[Ee].segments.length===0){let s=lf(n.children[Ee],e,t);return new Ye(n.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=rP(n.children[s],e,o))}),Object.entries(n.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new Ye(n.segments,i)}}function O$(n,e,t){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;let o=n.segments[i],a=t[r];if(hf(a))break;let c=`${a}`,d=r<t.length-1?t[r+1]:null;if(i>0&&c===void 0)break;if(c&&d&&typeof d=="object"&&d.outlets===void 0){if(!VM(c,d,o))return s;r+=2}else{if(!VM(c,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function gb(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let s=t[i];if(hf(s)){let c=F$(s.outlets);return new Ye(r,c)}if(i===0&&Ny(t[0])){let c=n.segments[e];r.push(new Ro(c.path,FM(t[0]))),i++;continue}let o=hf(s)?s.outlets[Ee]:`${s}`,a=i<t.length-1?t[i+1]:null;o&&a&&Ny(a)?(r.push(new Ro(o,FM(a))),i+=2):(r.push(new Ro(o,{})),i++)}return new Ye(r,{})}function F$(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=gb(new Ye([],{}),0,r))}),e}function FM(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function VM(n,e,t){return n==t.path&&Di(e,t.parameters)}var uf="imperative",hn=(function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n})(hn||{}),lr=class{id;url;constructor(e,t){this.id=e,this.url=t}},gc=class extends lr{type=hn.NavigationStart;navigationTrigger;restoredState;constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Ai=class extends lr{urlAfterRedirects;type=hn.NavigationEnd;constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Bn=(function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n[n.Aborted=4]="Aborted",n})(Bn||{}),ff=(function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n})(ff||{}),Si=class extends lr{reason;code;type=hn.NavigationCancel;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},fs=class extends lr{reason;code;type=hn.NavigationSkipped;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}},du=class extends lr{error;target;type=hn.NavigationError;constructor(e,t,r,i){super(e,t),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},pf=class extends lr{urlAfterRedirects;state;type=hn.RoutesRecognized;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Py=class extends lr{urlAfterRedirects;state;type=hn.GuardsCheckStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Oy=class extends lr{urlAfterRedirects;state;shouldActivate;type=hn.GuardsCheckEnd;constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Fy=class extends lr{urlAfterRedirects;state;type=hn.ResolveStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Vy=class extends lr{urlAfterRedirects;state;type=hn.ResolveEnd;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ly=class{route;type=hn.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Uy=class{route;type=hn.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},jy=class{snapshot;type=hn.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},By=class{snapshot;type=hn.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},$y=class{snapshot;type=hn.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Hy=class{snapshot;type=hn.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var gf=class{},hu=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function V$(n){return!(n instanceof gf)&&!(n instanceof hu)}function L$(n,e){return n.providers&&!n._injector&&(n._injector=$h(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Kr(n){return n.outlet||Ee}function U$(n,e){let t=n.filter(r=>Kr(r)===e);return t.push(...n.filter(r=>Kr(r)!==e)),t}function gu(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var qy=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return gu(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new mu(this.rootInjector)}},mu=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new qy(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(r){return new(r||n)(xe(Pt))};static \u0275prov=se({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),zy=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=mb(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=mb(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=yb(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return yb(e,this._root).map(t=>t.value)}};function mb(n,e){if(n===e.value)return e;for(let t of e.children){let r=mb(n,t);if(r)return r}return null}function yb(n,e){if(n===e.value)return[e];for(let t of e.children){let r=yb(n,t);if(r.length)return r.unshift(e),r}return[]}var cr=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function cu(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var mf=class extends zy{snapshot;constructor(e,t){super(e),this.snapshot=t,bb(this,e)}toString(){return this.snapshot.toString()}};function iP(n){let e=j$(n),t=new wn([new Ro("",{})]),r=new wn({}),i=new wn({}),s=new wn({}),o=new wn(""),a=new ps(t,r,s,o,i,Ee,n,e.root);return a.snapshot=e.root,new mf(new cr(a,[]),e)}function j$(n){let e={},t={},r={},s=new fc([],e,r,"",t,Ee,n,null,{});return new yf("",new cr(s,[]))}var ps=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,r,i,s,o,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(ut(d=>d[vf]))??je(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(ut(e=>pc(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(ut(e=>pc(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Gy(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:z(z({},e.params),n.params),data:z(z({},e.data),n.data),resolve:z(z(z(z({},n.data),e.data),i?.data),n._resolvedData)}:r={params:z({},n.params),data:z({},n.data),resolve:z(z({},n.data),n._resolvedData??{})},i&&oP(i)&&(r.resolve[vf]=i.title),r}var fc=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[vf]}constructor(e,t,r,i,s,o,a,c,d){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=c,this._resolve=d}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=pc(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=pc(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},yf=class extends zy{url;constructor(e,t){super(t),this.url=e,bb(this,t)}toString(){return sP(this._root)}};function bb(n,e){e.value._routerState=n,e.children.forEach(t=>bb(n,t))}function sP(n){let e=n.children.length>0?` { ${n.children.map(sP).join(", ")} } `:"";return`${n.value}${e}`}function lb(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Di(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Di(e.params,t.params)||n.paramsSubject.next(t.params),f$(e.url,t.url)||n.urlSubject.next(t.url),Di(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function _b(n,e){let t=Di(n.params,e.params)&&y$(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||_b(n.parent,e.parent))}function oP(n){return typeof n.title=="string"||n.title===null}var aP=new ae(""),Ef=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=Ee;activateEvents=new St;deactivateEvents=new St;attachEvents=new St;detachEvents=new St;routerOutletData=rM();parentContexts=j(mu);location=j(Bh);changeDetector=j(uc);inputBinder=j(Yy,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new oe(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new oe(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new oe(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new oe(4013,!1);this._activatedRoute=t;let i=this.location,o=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new vb(t,a,i.injector,this.routerOutletData);this.activated=i.createComponent(o,{index:i.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=An({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[Co]})}return n})(),vb=class{route;childContexts;parent;outletData;constructor(e,t,r,i){this.route=e,this.childContexts=t,this.parent=r,this.outletData=i}get(e,t){return e===ps?this.route:e===mu?this.childContexts:e===aP?this.outletData:this.parent.get(e,t)}},Yy=new ae("");var Cb=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=jn({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&Rt(0,"router-outlet")},dependencies:[Ef],encapsulation:2})}return n})();function Tb(n){let e=n.children&&n.children.map(Tb),t=e?ce(z({},n),{children:e}):z({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Ee&&(t.component=Cb),t}function B$(n,e,t){let r=_f(n,e._root,t?t._root:void 0);return new mf(r,e)}function _f(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=$$(n,e,t);return new cr(r,i)}else{if(n.shouldAttach(e.value)){let s=n.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>_f(n,a)),o}}let r=H$(e.value),i=e.children.map(s=>_f(n,s));return new cr(r,i)}}function $$(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return _f(n,r,i);return _f(n,r)})}function H$(n){return new ps(new wn(n.url),new wn(n.params),new wn(n.queryParams),new wn(n.fragment),new wn(n.data),n.outlet,n.component,n)}var fu=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},cP="ngNavigationCancelingError";function Wy(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=No(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=lP(!1,Bn.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function lP(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[cP]=!0,t.cancellationCode=e,t}function q$(n){return uP(n)&&No(n.url)}function uP(n){return!!n&&n[cP]}var z$=(n,e,t,r)=>ut(i=>(new wb(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),wb=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,r,i,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),lb(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=cu(t);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=cu(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){let o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=cu(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=cu(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new Hy(s.value.snapshot))}),e.children.length&&this.forwardEvent(new By(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(lb(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),lb(a.route.value),this.activateChildRoutes(e,null,o.children)}else o.attachRef=null,o.route=i,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}else this.activateChildRoutes(e,null,r)}},Ky=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},uu=class{component;route;constructor(e,t){this.component=e,this.route=t}};function G$(n,e,t){let r=n._root,i=e?e._root:null;return cf(r,i,t,[r.value])}function W$(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function yu(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!Gw(n)?n:e.get(n):r}function cf(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=cu(e);return n.children.forEach(o=>{K$(o,s[o.value.outlet],t,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>df(a,t.getContext(o),i)),i}function K$(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let c=Q$(o,s,s.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new Ky(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?cf(n,e,a?a.children:null,r,i):cf(n,e,t,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new uu(a.outlet.component,o))}else o&&df(e,a,i),i.canActivateChecks.push(new Ky(r)),s.component?cf(n,null,a?a.children:null,r,i):cf(n,null,t,r,i);return i}function Q$(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!hc(n.url,e.url);case"pathParamsOrQueryParamsChange":return!hc(n.url,e.url)||!Di(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!_b(n,e)||!Di(n.queryParams,e.queryParams);case"paramsChange":default:return!_b(n,e)}}function df(n,e,t){let r=cu(n),i=n.value;Object.entries(r).forEach(([s,o])=>{i.component?e?df(o,e.children.getContext(s),t):df(o,null,t):df(o,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new uu(e.outlet.component,i)):t.canDeactivateChecks.push(new uu(null,i)):t.canDeactivateChecks.push(new uu(null,i))}function If(n){return typeof n=="function"}function Y$(n){return typeof n=="boolean"}function J$(n){return n&&If(n.canLoad)}function X$(n){return n&&If(n.canActivate)}function Z$(n){return n&&If(n.canActivateChild)}function eH(n){return n&&If(n.canDeactivate)}function tH(n){return n&&If(n.canMatch)}function dP(n){return n instanceof La||n?.name==="EmptyError"}var Sy=Symbol("INITIAL_VALUE");function pu(){return hi(n=>bw(n.map(e=>e.pipe(Zi(1),Sw(Sy)))).pipe(ut(e=>{for(let t of e)if(t!==!0){if(t===Sy)return Sy;if(t===!1||nH(t))return t}return!0}),di(e=>e!==Sy),Zi(1)))}function nH(n){return No(n)||n instanceof fu}function hP(n){return n.aborted?je(void 0).pipe(Zi(1)):new Me(e=>{let t=()=>{e.next(),e.complete()};return n.addEventListener("abort",t),()=>n.removeEventListener("abort",t)})}function fP(n){return fh(hP(n))}function rH(n,e){return Fn(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return o.length===0&&s.length===0?je(ce(z({},t),{guardsResult:!0})):iH(o,r,i,n).pipe(Fn(a=>a&&Y$(a)?sH(r,s,n,e):je(a)),ut(a=>ce(z({},t),{guardsResult:a})))})}function iH(n,e,t,r){return Mt(n).pipe(Fn(i=>uH(i.component,i.route,t,e,r)),es(i=>i!==!0,!0))}function sH(n,e,t,r){return Mt(e).pipe(Xg(i=>Fl(aH(i.route.parent,r),oH(i.route,r),lH(n,i.path,t),cH(n,i.route,t))),es(i=>i!==!0,!0))}function oH(n,e){return n!==null&&e&&e(new $y(n)),je(!0)}function aH(n,e){return n!==null&&e&&e(new jy(n)),je(!0)}function cH(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return je(!0);let i=r.map(s=>dh(()=>{let o=gu(e)??t,a=yu(s,o),c=X$(a)?a.canActivate(e,n):tn(o,()=>a(e,n));return mc(c).pipe(es())}));return je(i).pipe(pu())}function lH(n,e,t){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>W$(o)).filter(o=>o!==null).map(o=>dh(()=>{let a=o.guards.map(c=>{let d=gu(o.node)??t,h=yu(c,d),p=Z$(h)?h.canActivateChild(r,n):tn(d,()=>h(r,n));return mc(p).pipe(es())});return je(a).pipe(pu())}));return je(s).pipe(pu())}function uH(n,e,t,r,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return je(!0);let o=s.map(a=>{let c=gu(e)??i,d=yu(a,c),h=eH(d)?d.canDeactivate(n,e,t,r):tn(c,()=>d(n,e,t,r));return mc(h).pipe(es())});return je(o).pipe(pu())}function dH(n,e,t,r,i){let s=e.canLoad;if(s===void 0||s.length===0)return je(!0);let o=s.map(a=>{let c=yu(a,n),d=J$(c)?c.canLoad(e,t):tn(n,()=>c(e,t)),h=mc(d);return i?h.pipe(fP(i)):h});return je(o).pipe(pu(),pP(r))}function pP(n){return gw(Vn(e=>{if(typeof e!="boolean")throw Wy(n,e)}),ut(e=>e===!0))}function hH(n,e,t,r,i){let s=e.canMatch;if(!s||s.length===0)return je(!0);let o=s.map(a=>{let c=yu(a,n),d=tH(c)?c.canMatch(e,t):tn(n,()=>c(e,t)),h=mc(d);return i?h.pipe(fP(i)):h});return je(o).pipe(pu(),pP(r))}var dc=class gP extends Error{segmentGroup;constructor(e){super(),this.segmentGroup=e||null,Object.setPrototypeOf(this,gP.prototype)}},Eb=class mP extends Error{urlTree;constructor(e){super(),this.urlTree=e,Object.setPrototypeOf(this,mP.prototype)}};function fH(n){throw new oe(4e3,!1)}function pH(n){throw lP(!1,Bn.GuardRejected)}var gH=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}async lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return r;if(i.numberOfChildren>1||!i.children[Ee])throw fH(`${e.redirectTo}`);i=i.children[Ee]}}async applyRedirectCommands(e,t,r,i,s){let o=await mH(t,i,s);if(o instanceof Qr)throw new Eb(o);let a=this.applyRedirectCreateUrlTree(o,this.urlSerializer.parse(o),e,r);if(o[0]==="/")throw new Eb(a);return a}applyRedirectCreateUrlTree(e,t,r,i){let s=this.createSegmentGroup(e,t.root,r,i);return new Qr(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s[0]===":"){let a=s.substring(1);r[i]=t[a]}else r[i]=s}),r}createSegmentGroup(e,t,r,i){let s=this.createSegments(e,t.segments,r,i),o={};return Object.entries(t.children).forEach(([a,c])=>{o[a]=this.createSegmentGroup(e,c,r,i)}),new Ye(s,o)}createSegments(e,t,r,i){return t.map(s=>s.path[0]===":"?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new oe(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}};function mH(n,e,t){if(typeof n=="string")return Promise.resolve(n);let r=n,{queryParams:i,fragment:s,routeConfig:o,url:a,outlet:c,params:d,data:h,title:p}=e;return ky(mc(tn(t,()=>r({params:d,data:h,queryParams:i,fragment:s,routeConfig:o,url:a,outlet:c,title:p}))))}var Ib={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function yH(n,e,t,r,i,s){let o=yP(n,e,t);return o.matched?(r=L$(e,r),hH(r,e,t,i,s).pipe(ut(a=>a===!0?o:z({},Ib)))):je(o)}function yP(n,e,t){if(e.path==="**")return _H(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?z({},Ib):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||BM)(t,n,e);if(!i)return z({},Ib);let s={};Object.entries(i.posParams??{}).forEach(([a,c])=>{s[a]=c.path});let o=i.consumed.length>0?z(z({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function _H(n){return{matched:!0,parameters:n.length>0?HM(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function LM(n,e,t,r){return t.length>0&&EH(n,t,r)?{segmentGroup:new Ye(e,wH(r,new Ye(t,n.children))),slicedSegments:[]}:t.length===0&&IH(n,t,r)?{segmentGroup:new Ye(n.segments,vH(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new Ye(n.segments,n.children),slicedSegments:t}}function vH(n,e,t,r){let i={};for(let s of t)if(Jy(n,e,s)&&!r[Kr(s)]){let o=new Ye([],{});i[Kr(s)]=o}return z(z({},r),i)}function wH(n,e){let t={};t[Ee]=e;for(let r of n)if(r.path===""&&Kr(r)!==Ee){let i=new Ye([],{});t[Kr(r)]=i}return t}function EH(n,e,t){return t.some(r=>Jy(n,e,r)&&Kr(r)!==Ee)}function IH(n,e,t){return t.some(r=>Jy(n,e,r))}function Jy(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function bH(n,e,t){return e.length===0&&!n.children[t]}var CH=class{};async function TH(n,e,t,r,i,s,o="emptyOnly",a){return new SH(n,e,t,r,i,o,s,a).recognize()}var DH=31,SH=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;abortSignal;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,r,i,s,o,a,c){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.abortSignal=c,this.applyRedirects=new gH(this.urlSerializer,this.urlTree)}noMatchError(e){return new oe(4002,`'${e.segmentGroup}'`)}async recognize(){let e=LM(this.urlTree.root,[],[],this.config).segmentGroup,{children:t,rootSnapshot:r}=await this.match(e),i=new cr(r,t),s=new yf("",i),o=ZM(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}async match(e){let t=new fc([],Object.freeze({}),Object.freeze(z({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),Ee,this.rootComponentType,null,{});try{return{children:await this.processSegmentGroup(this.injector,this.config,e,Ee,t),rootSnapshot:t}}catch(r){if(r instanceof Eb)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof dc?this.noMatchError(r):r}}async processSegmentGroup(e,t,r,i,s){if(r.segments.length===0&&r.hasChildren())return this.processChildren(e,t,r,s);let o=await this.processSegment(e,t,r,r.segments,i,!0,s);return o instanceof cr?[o]:[]}async processChildren(e,t,r,i){let s=[];for(let c of Object.keys(r.children))c==="primary"?s.unshift(c):s.push(c);let o=[];for(let c of s){let d=r.children[c],h=U$(t,c),p=await this.processSegmentGroup(e,h,d,c,i);o.push(...p)}let a=_P(o);return AH(a),a}async processSegment(e,t,r,i,s,o,a){for(let c of t)try{return await this.processSegmentAgainstRoute(c._injector??e,t,c,r,i,s,o,a)}catch(d){if(d instanceof dc||dP(d))continue;throw d}if(bH(r,i,s))return new CH;throw new dc(r)}async processSegmentAgainstRoute(e,t,r,i,s,o,a,c){if(Kr(r)!==o&&(o===Ee||!Jy(i,s,r)))throw new dc(i);if(r.redirectTo===void 0)return this.matchSegmentAgainstRoute(e,i,r,s,o,c);if(this.allowRedirects&&a)return this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,s,o,c);throw new dc(i)}async expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o,a){let{matched:c,parameters:d,consumedSegments:h,positionalParamSegments:p,remainingSegments:y}=yP(t,i,s);if(!c)throw new dc(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>DH&&(this.allowRedirects=!1));let I=new fc(s,d,Object.freeze(z({},this.urlTree.queryParams)),this.urlTree.fragment,UM(i),Kr(i),i.component??i._loadedComponent??null,i,jM(i)),k=Gy(I,a,this.paramsInheritanceStrategy);if(I.params=Object.freeze(k.params),I.data=Object.freeze(k.data),this.abortSignal.aborted)throw new Error(this.abortSignal.reason);let P=await this.applyRedirects.applyRedirectCommands(h,i.redirectTo,p,I,e),M=await this.applyRedirects.lineralizeSegments(i,P);return this.processSegment(e,r,t,M.concat(y),o,!1,a)}async matchSegmentAgainstRoute(e,t,r,i,s,o){if(this.abortSignal.aborted)throw new Error(this.abortSignal.reason);let a=await ky(yH(t,r,i,e,this.urlSerializer,this.abortSignal));if(r.path==="**"&&(t.children={}),!a?.matched)throw new dc(t);e=r._injector??e;let{routes:c}=await this.getChildConfig(e,r,i),d=r._loadedInjector??e,{parameters:h,consumedSegments:p,remainingSegments:y}=a,I=new fc(p,h,Object.freeze(z({},this.urlTree.queryParams)),this.urlTree.fragment,UM(r),Kr(r),r.component??r._loadedComponent??null,r,jM(r)),k=Gy(I,o,this.paramsInheritanceStrategy);I.params=Object.freeze(k.params),I.data=Object.freeze(k.data);let{segmentGroup:P,slicedSegments:M}=LM(t,p,y,c);if(M.length===0&&P.hasChildren()){let ee=await this.processChildren(d,c,P,I);return new cr(I,ee)}if(c.length===0&&M.length===0)return new cr(I,[]);let $=Kr(r)===s,Y=await this.processSegment(d,c,P,M,$?Ee:s,!0,I);return new cr(I,Y instanceof cr?[Y]:[])}async getChildConfig(e,t,r){if(t.children)return{routes:t.children,injector:e};if(t.loadChildren){if(t._loadedRoutes!==void 0)return{routes:t._loadedRoutes,injector:t._loadedInjector};if(this.abortSignal.aborted)throw new Error(this.abortSignal.reason);if(await ky(dH(e,t,r,this.urlSerializer,this.abortSignal))){let s=await this.configLoader.loadChildren(e,t);return t._loadedRoutes=s.routes,t._loadedInjector=s.injector,s}throw pH(t)}return{routes:[],injector:e}}};function AH(n){n.sort((e,t)=>e.value.outlet===Ee?-1:t.value.outlet===Ee?1:e.value.outlet.localeCompare(t.value.outlet))}function xH(n){let e=n.value.routeConfig;return e&&e.path===""}function _P(n){let e=[],t=new Set;for(let r of n){if(!xH(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=_P(r.children);e.push(new cr(r.value,i))}return e.filter(r=>!t.has(r))}function UM(n){return n.data||{}}function jM(n){return n.resolve||{}}var RH=new ae("",{factory:()=>TH});function kH(n,e,t,r,i,s,o){let a=n.get(RH);return Fn(c=>je(c).pipe(hi(d=>a(n,e,t,r,d.extractedUrl,i,s,o)),ut(({state:d,tree:h})=>ce(z({},c),{targetSnapshot:d,urlAfterRedirects:h}))))}function NH(n,e){return Fn(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return je(t);let s=new Set(i.map(c=>c.route)),o=new Set;for(let c of s)if(!o.has(c))for(let d of vP(c))o.add(d);let a=0;return Mt(o).pipe(Xg(c=>s.has(c)?MH(c,r,n,e):(c.data=Gy(c,c.parent,n).resolve,je(void 0))),Vn(()=>a++),Zg(1),Fn(c=>a===o.size?je(t):Wn))})}function vP(n){let e=n.children.map(t=>vP(t)).flat();return[n,...e]}function MH(n,e,t,r){let i=n.routeConfig,s=n._resolve;return i?.title!==void 0&&!oP(i)&&(s[vf]=i.title),dh(()=>(n.data=Gy(n,n.parent,t).resolve,PH(s,n,e,r).pipe(ut(o=>(n._resolvedData=o,n.data=z(z({},n.data),o),null)))))}function PH(n,e,t,r){let i=hb(n);if(i.length===0)return je({});let s={};return Mt(i).pipe(Fn(o=>OH(n[o],e,t,r).pipe(es(),Vn(a=>{if(a instanceof fu)throw Wy(new ko,a);s[o]=a}))),Zg(1),ut(()=>s),hh(o=>dP(o)?Wn:Iw(o)))}function OH(n,e,t,r){let i=gu(e)??r,s=yu(n,i),o=s.resolve?s.resolve(e,t):tn(i,()=>s(e,t));return mc(o)}function ub(n){return hi(e=>{let t=n(e);return t?Mt(t).pipe(ut(()=>e)):je(e)})}var Db=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===Ee);return r}getResolvedTitleForRoute(t){return t.data[vf]}static \u0275fac=function(r){return new(r||n)};static \u0275prov=se({token:n,factory:()=>j(wP),providedIn:"root"})}return n})(),wP=(()=>{class n extends Db{title;constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||n)(xe(NM))};static \u0275prov=se({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),_u=new ae("",{factory:()=>({})}),bf=new ae(""),EP=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=j(qI);async loadComponent(t,r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return Promise.resolve(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=(async()=>{try{let s=await qM(tn(t,()=>r.loadComponent())),o=await CP(bP(s));return this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=o,o}finally{this.componentLoaders.delete(r)}})();return this.componentLoaders.set(r,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Promise.resolve({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let i=(async()=>{try{let s=await IP(r,this.compiler,t,this.onLoadEndListener);return r._loadedRoutes=s.routes,r._loadedInjector=s.injector,s}finally{this.childrenLoaders.delete(r)}})();return this.childrenLoaders.set(r,i),i}static \u0275fac=function(r){return new(r||n)};static \u0275prov=se({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();async function IP(n,e,t,r){let i=await qM(tn(t,()=>n.loadChildren())),s=await CP(bP(i)),o;s instanceof cy||Array.isArray(s)?o=s:o=await e.compileModuleAsync(s),r&&r(n);let a,c,d=!1;return Array.isArray(o)?(c=o,d=!0):(a=o.create(t).injector,c=a.get(bf,[],{optional:!0,self:!0}).flat()),{routes:c.map(Tb),injector:a}}function FH(n){return n&&typeof n=="object"&&"default"in n}function bP(n){return FH(n)?n.default:n}async function CP(n){return n}var Xy=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=se({token:n,factory:()=>j(VH),providedIn:"root"})}return n})(),VH=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static \u0275fac=function(r){return new(r||n)};static \u0275prov=se({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),TP=new ae("");var LH=()=>{},DP=new ae(""),SP=(()=>{class n{currentNavigation=Ae(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=Ae(null);events=new en;transitionAbortWithErrorSubject=new en;configLoader=j(EP);environmentInjector=j(Pt);destroyRef=j(Hr);urlSerializer=j(wf);rootContexts=j(mu);location=j(au);inputBindingEnabled=j(Yy,{optional:!0})!==null;titleStrategy=j(Db);options=j(_u,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=j(Xy);createViewTransition=j(TP,{optional:!0});navigationErrorHandler=j(DP,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>je(void 0);rootComponentType=null;destroyed=!1;constructor(){let t=i=>this.events.next(new Ly(i)),r=i=>this.events.next(new Uy(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;rn(()=>{this.transitions?.next(ce(z({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,id:r}))})}setupNavigations(t){return this.transitions=new wn(null),this.transitions.pipe(di(r=>r!==null),hi(r=>{let i=!1,s=new AbortController;return je(r).pipe(hi(o=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",Bn.SupersededByNewNavigation),Wn;this.currentTransition=r;let a=this.lastSuccessfulNavigation();this.currentNavigation.set({id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,targetBrowserUrl:typeof o.extras.browserUrl=="string"?this.urlSerializer.parse(o.extras.browserUrl):o.extras.browserUrl,trigger:o.source,extras:o.extras,previousNavigation:a?ce(z({},a),{previousNavigation:null}):null,abort:()=>s.abort()});let c=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),d=o.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!c&&d!=="reload")return this.events.next(new fs(o.id,this.urlSerializer.serialize(o.rawUrl),"",ff.IgnoredSameUrlNavigation)),o.resolve(!1),Wn;if(this.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return je(o).pipe(hi(h=>(this.events.next(new gc(h.id,this.urlSerializer.serialize(h.extractedUrl),h.source,h.restoredState)),h.id!==this.navigationId?Wn:Promise.resolve(h))),kH(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy,s.signal),Vn(h=>{r.targetSnapshot=h.targetSnapshot,r.urlAfterRedirects=h.urlAfterRedirects,this.currentNavigation.update(y=>(y.finalUrl=h.urlAfterRedirects,y));let p=new pf(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(p)}));if(c&&this.urlHandlingStrategy.shouldProcessUrl(o.currentRawUrl)){let{id:h,extractedUrl:p,source:y,restoredState:I,extras:k}=o,P=new gc(h,this.urlSerializer.serialize(p),y,I);this.events.next(P);let M=iP(this.rootComponentType).snapshot;return this.currentTransition=r=ce(z({},o),{targetSnapshot:M,urlAfterRedirects:p,extras:ce(z({},k),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update($=>($.finalUrl=p,$)),je(r)}else return this.events.next(new fs(o.id,this.urlSerializer.serialize(o.extractedUrl),"",ff.IgnoredByUrlHandlingStrategy)),o.resolve(!1),Wn}),Vn(o=>{let a=new Py(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(a)}),ut(o=>(this.currentTransition=r=ce(z({},o),{guards:G$(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),r)),rH(this.environmentInjector,o=>this.events.next(o)),Vn(o=>{if(r.guardsResult=o.guardsResult,o.guardsResult&&typeof o.guardsResult!="boolean")throw Wy(this.urlSerializer,o.guardsResult);let a=new Oy(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(a)}),di(o=>o.guardsResult?!0:(this.cancelNavigationTransition(o,"",Bn.GuardRejected),!1)),ub(o=>{if(o.guards.canActivateChecks.length!==0)return je(o).pipe(Vn(a=>{let c=new Fy(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(c)}),hi(a=>{let c=!1;return je(a).pipe(NH(this.paramsInheritanceStrategy,this.environmentInjector),Vn({next:()=>c=!0,complete:()=>{c||this.cancelNavigationTransition(a,"",Bn.NoDataFromResolver)}}))}),Vn(a=>{let c=new Vy(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(c)}))}),ub(o=>{let a=d=>{let h=[];if(d.routeConfig?._loadedComponent)d.component=d.routeConfig?._loadedComponent;else if(d.routeConfig?.loadComponent){let p=gu(d)??this.environmentInjector;h.push(this.configLoader.loadComponent(p,d.routeConfig).then(y=>{d.component=y}))}for(let p of d.children)h.push(...a(p));return h},c=a(o.targetSnapshot.root);return c.length===0?je(o):Mt(Promise.all(c).then(()=>o))}),ub(()=>this.afterPreactivation()),hi(()=>{let{currentSnapshot:o,targetSnapshot:a}=r,c=this.createViewTransition?.(this.environmentInjector,o.root,a.root);return c?Mt(c).pipe(ut(()=>r)):je(r)}),ut(o=>{let a=B$(t.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return this.currentTransition=r=ce(z({},o),{targetRouterState:a}),this.currentNavigation.update(c=>(c.targetRouterState=a,c)),r}),Vn(()=>{this.events.next(new gf)}),z$(this.rootContexts,t.routeReuseStrategy,o=>this.events.next(o),this.inputBindingEnabled),Zi(1),fh(hP(s.signal).pipe(di(()=>!i&&!r.targetRouterState),Vn(()=>{this.cancelNavigationTransition(r,s.signal.reason+"",Bn.Aborted)}))),Vn({next:o=>{i=!0,this.currentNavigation.update(a=>(a.abort=LH,a)),this.lastSuccessfulNavigation.set(rn(this.currentNavigation)),this.events.next(new Ai(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects))),this.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{i=!0}}),fh(this.transitionAbortWithErrorSubject.pipe(Vn(o=>{throw o}))),Dw(()=>{s.abort(),i||this.cancelNavigationTransition(r,"",Bn.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),hh(o=>{if(this.destroyed)return r.resolve(!1),Wn;if(i=!0,uP(o))this.events.next(new Si(r.id,this.urlSerializer.serialize(r.extractedUrl),o.message,o.cancellationCode)),q$(o)?this.events.next(new hu(o.url,o.navigationBehaviorOptions)):r.resolve(!1);else{let a=new du(r.id,this.urlSerializer.serialize(r.extractedUrl),o,r.targetSnapshot??void 0);try{let c=tn(this.environmentInjector,()=>this.navigationErrorHandler?.(a));if(c instanceof fu){let{message:d,cancellationCode:h}=Wy(this.urlSerializer,c);this.events.next(new Si(r.id,this.urlSerializer.serialize(r.extractedUrl),d,h)),this.events.next(new hu(c.redirectTo,c.navigationBehaviorOptions))}else throw this.events.next(a),o}catch(c){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(c)}}return Wn}))}))}cancelNavigationTransition(t,r,i){let s=new Si(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(s),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=rn(this.currentNavigation),i=r?.targetBrowserUrl??r?.extractedUrl;return t.toString()!==i?.toString()&&!r?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||n)};static \u0275prov=se({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function UH(n){return n!==uf}var AP=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=se({token:n,factory:()=>j(jH),providedIn:"root"})}return n})(),Qy=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},jH=(()=>{class n extends Qy{static \u0275fac=(()=>{let t;return function(i){return(t||(t=as(n)))(i||n)}})();static \u0275prov=se({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Sb=(()=>{class n{urlSerializer=j(wf);options=j(_u,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=j(au);urlHandlingStrategy=j(Xy);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new Qr;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:t,initialUrl:r,targetBrowserUrl:i}){let s=t!==void 0?this.urlHandlingStrategy.merge(t,r):r,o=i??s;return o instanceof Qr?this.urlSerializer.serialize(o):o}commitTransition({targetRouterState:t,finalUrl:r,initialUrl:i}){r&&t?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=t):this.rawUrlTree=i}routerState=iP(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:t}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t??this.rawUrlTree)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=se({token:n,factory:()=>j(xP),providedIn:"root"})}return n})(),xP=(()=>{class n extends Sb{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{t(r.url,r.state,"popstate")})})}handleRouterEvent(t,r){t instanceof gc?this.updateStateMemento():t instanceof fs?this.commitTransition(r):t instanceof pf?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof gf?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof Si&&t.code!==Bn.SupersededByNewNavigation&&t.code!==Bn.Redirect?this.restoreHistory(r):t instanceof du?this.restoreHistory(r,!0):t instanceof Ai&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,{extras:r,id:i}){let{replaceUrl:s,state:o}=r;if(this.location.isCurrentPathEqualTo(t)||s){let a=this.browserPageId,c=z(z({},o),this.generateNgRouterState(i,a));this.location.replaceState(t,"",c)}else{let a=z(z({},o),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(t,"",a)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,s=this.currentPageId-i;s!==0?this.location.historyGo(s):this.getCurrentUrlTree()===t.finalUrl&&s===0&&(this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=as(n)))(i||n)}})();static \u0275prov=se({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Ab(n,e){n.events.pipe(di(t=>t instanceof Ai||t instanceof Si||t instanceof du||t instanceof fs),ut(t=>t instanceof Ai||t instanceof fs?0:(t instanceof Si?t.code===Bn.Redirect||t.code===Bn.SupersededByNewNavigation:!1)?2:1),di(t=>t!==2),Zi(1)).subscribe(()=>{e()})}var BH={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},$H={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Cf=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=j(VI);stateManager=j(Sb);options=j(_u,{optional:!0})||{};pendingTasks=j(os);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=j(SP);urlSerializer=j(wf);location=j(au);urlHandlingStrategy=j(Xy);injector=j(Pt);_events=new en;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=j(AP);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=j(bf,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!j(Yy,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new Zt;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,s=rn(this.navigationTransitions.currentNavigation);if(i!==null&&s!==null){if(this.stateManager.handleRouterEvent(r,s),r instanceof Si&&r.code!==Bn.Redirect&&r.code!==Bn.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Ai)this.navigated=!0;else if(r instanceof hu){let o=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c=z({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||UH(i.source)},o);this.scheduleNavigation(a,uf,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}V$(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),uf,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r,i)=>{this.navigateToSyncWithBrowser(t,i,r)})}navigateToSyncWithBrowser(t,r,i){let s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){let c=z({},i);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(s.state=c)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,o,s).catch(c=>{this.disposed||this.injector.get(sr)(c)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return rn(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(Tb),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:c}=r,d=c?this.currentUrlTree.fragment:o,h=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":h=z(z({},this.currentUrlTree.queryParams),s);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=s||null}h!==null&&(h=this.removeEmptyProps(h));let p;try{let y=i?i.snapshot:this.routerState.snapshot.root;p=eP(y)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),p=this.currentUrlTree.root}return tP(p,t,h,d??null,this.urlSerializer)}navigateByUrl(t,r={skipLocationChange:!1}){let i=No(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,uf,null,r)}navigate(t,r={skipLocationChange:!1}){return HH(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.console.warn(Ul(4018,!1)),this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=z({},BH):r===!1?i=z({},$H):i=r,No(t))return MM(this.currentUrlTree,t,i);let s=this.parseUrl(t);return MM(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,s])=>(s!=null&&(r[i]=s),r),{})}scheduleNavigation(t,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let a,c,d;o?(a=o.resolve,c=o.reject,d=o.promise):d=new Promise((p,y)=>{a=p,c=y});let h=this.pendingTasks.add();return Ab(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:s,resolve:a,reject:c,promise:d,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),d.catch(p=>Promise.reject(p))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=se({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function HH(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new oe(4008,!1)}var Zy=(()=>{class n{router;route;tabIndexAttribute;renderer;el;locationStrategy;reactiveHref=Ae(null);get href(){return rn(this.reactiveHref)}set href(t){this.reactiveHref.set(t)}target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new en;applicationErrorHandler=j(sr);options=j(_u,{optional:!0});constructor(t,r,i,s,o,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=s,this.el=o,this.locationStrategy=a,this.reactiveHref.set(j(new fy("href"),{optional:!0}));let c=o.nativeElement.tagName?.toLowerCase();this.isAnchorElement=c==="a"||c==="area"||!!(typeof customElements=="object"&&customElements.get(c)?.observedAttributes?.includes?.("href")),this.isAnchorElement?this.setTabIndexIfNotOnNativeEl("0"):this.subscribeToNavigationEventsIfNecessary()}subscribeToNavigationEventsIfNecessary(){if(this.subscription!==void 0||!this.isAnchorElement)return;let t=this.preserveFragment,r=i=>i==="merge"||i==="preserve";t||=r(this.queryParamsHandling),t||=!this.queryParamsHandling&&!r(this.options?.defaultQueryParamsHandling),t&&(this.subscription=this.router.events.subscribe(i=>{i instanceof Ai&&this.updateHref()}))}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&(this.updateHref(),this.subscribeToNavigationEventsIfNecessary()),this.onChanges.next(this)}routerLinkInput=null;set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(No(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,r,i,s,o){let a=this.urlTree;if(a===null||this.isAnchorElement&&(t!==0||r||i||s||o||typeof this.target=="string"&&this.target!="_self"))return!0;let c={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,c)?.catch(d=>{this.applicationErrorHandler(d)}),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.reactiveHref.set(t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t))??"":null)}applyAttributeValue(t,r){let i=this.renderer,s=this.el.nativeElement;r!==null?i.setAttribute(s,t,r):i.removeAttribute(s,t)}get urlTree(){return this.routerLinkInput===null?null:No(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||n)(Be(Cf),Be(ps),Lh("tabindex"),Be(cs),Be(Ci),Be(ou))};static \u0275dir=An({type:n,selectors:[["","routerLink",""]],hostVars:2,hostBindings:function(r,i){r&1&&Q("click",function(o){return i.onClick(o.button,o.ctrlKey,o.shiftKey,o.altKey,o.metaKey)}),r&2&&Hh("href",i.reactiveHref(),EI)("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",su],skipLocationChange:[2,"skipLocationChange","skipLocationChange",su],replaceUrl:[2,"replaceUrl","replaceUrl",su],routerLink:"routerLink"},features:[Co]})}return n})();var zH=new ae("");function xb(n,...e){return nr([{provide:bf,multi:!0,useValue:n},[],{provide:ps,useFactory:GH},{provide:ly,multi:!0,useFactory:WH},e.map(t=>t.\u0275providers)])}function GH(){return j(Cf).routerState.root}function WH(){let n=j(Ot);return e=>{let t=n.get(So);if(e!==t.components[0])return;let r=n.get(Cf),i=n.get(KH);n.get(QH)===1&&r.initialNavigation(),n.get(YH,null,{optional:!0})?.setUpPreloading(),n.get(zH,null,{optional:!0})?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var KH=new ae("",{factory:()=>new en}),QH=new ae("",{factory:()=>1});var YH=new ae("");var RP=()=>{};var MP=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},JH=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=n[t++],o=n[t++],a=n[t++],c=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let s=n[t++],o=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},e_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let s=n[i],o=i+1<n.length,a=o?n[i+1]:0,c=i+2<n.length,d=c?n[i+2]:0,h=s>>2,p=(s&3)<<4|a>>4,y=(a&15)<<2|d>>6,I=d&63;c||(I=64,o||(y=64)),r.push(t[h],t[p],t[y],t[I])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(MP(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):JH(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let s=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let d=i<n.length?t[n.charAt(i)]:64;++i;let p=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||a==null||d==null||p==null)throw new kb;let y=s<<2|a>>4;if(r.push(y),d!==64){let I=a<<4&240|d>>2;if(r.push(I),p!==64){let k=d<<6&192|p;r.push(k)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},kb=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},XH=function(n){let e=MP(n);return e_.encodeByteArray(e,!0)},Df=function(n){return XH(n).replace(/\./g,"")},t_=function(n){try{return e_.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Mb(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var ZH=()=>Mb().__FIREBASE_DEFAULTS__,e8=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},t8=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&t_(n[1]);return e&&JSON.parse(e)},n_=()=>{try{return RP()||ZH()||e8()||t8()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Pb=n=>{var e,t;return(t=(e=n_())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},PP=n=>{let e=Pb(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},Ob=()=>{var n;return(n=n_())===null||n===void 0?void 0:n.config},Fb=n=>{var e;return(e=n_())===null||e===void 0?void 0:e[`_${n}`]};var yc=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function Mo(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function r_(n){return(await fetch(n,{credentials:"include"})).ok}function OP(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Df(JSON.stringify(t)),Df(JSON.stringify(o)),""].join(".")}var Tf={};function n8(){let n={prod:[],emulator:[]};for(let e of Object.keys(Tf))Tf[e]?n.emulator.push(e):n.prod.push(e);return n}function r8(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}var kP=!1;function i_(n,e){if(typeof window>"u"||typeof document>"u"||!Mo(window.location.host)||Tf[n]===e||Tf[n]||kP)return;Tf[n]=e;function t(y){return`__firebase__banner__${y}`}let r="__firebase__banner",s=n8().prod.length>0;function o(){let y=document.getElementById(r);y&&y.remove()}function a(y){y.style.display="flex",y.style.background="#7faaf0",y.style.position="fixed",y.style.bottom="5px",y.style.left="5px",y.style.padding=".5em",y.style.borderRadius="5px",y.style.alignItems="center"}function c(y,I){y.setAttribute("width","24"),y.setAttribute("id",I),y.setAttribute("height","24"),y.setAttribute("viewBox","0 0 24 24"),y.setAttribute("fill","none"),y.style.marginLeft="-6px"}function d(){let y=document.createElement("span");return y.style.cursor="pointer",y.style.marginLeft="16px",y.style.fontSize="24px",y.innerHTML=" &times;",y.onclick=()=>{kP=!0,o()},y}function h(y,I){y.setAttribute("id",I),y.innerText="Learn more",y.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",y.setAttribute("target","__blank"),y.style.paddingLeft="5px",y.style.textDecoration="underline"}function p(){let y=r8(r),I=t("text"),k=document.getElementById(I)||document.createElement("span"),P=t("learnmore"),M=document.getElementById(P)||document.createElement("a"),$=t("preprendIcon"),Y=document.getElementById($)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(y.created){let ee=y.element;a(ee),h(M,P);let Ce=d();c(Y,$),ee.append(Y,k,M,Ce),document.body.appendChild(ee)}s?(k.innerText="Preview backend disconnected.",Y.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Y.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,k.innerText="Preview backend running in this workspace."),k.setAttribute("id",I)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}function fn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function FP(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(fn())}function i8(){var n;let e=(n=n_())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function VP(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function LP(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function UP(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function jP(){let n=fn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function BP(){return!i8()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Sf(){try{return typeof indexedDB=="object"}catch{return!1}}function $P(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}var s8="FirebaseError",ur=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=s8,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Yr.prototype.create)}},Yr=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?o8(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new ur(i,a,r)}};function o8(n,e){return n.replace(a8,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var a8=/\{\$([^}]+)}/g;function HP(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function xi(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let s=n[i],o=e[i];if(NP(s)&&NP(o)){if(!xi(s,o))return!1}else if(s!==o)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function NP(n){return n!==null&&typeof n=="object"}function Af(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function qP(n,e){let t=new Nb(n,e);return t.subscribe.bind(t)}var Nb=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");c8(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=Rb),i.error===void 0&&(i.error=Rb),i.complete===void 0&&(i.complete=Rb);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function c8(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Rb(){}var Tme=14400*1e3;function an(n){return n&&n._delegate?n._delegate:n}var $n=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var _c="[DEFAULT]";var Vb=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new yc;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(u8(e))try{this.getOrInitializeService({instanceIdentifier:_c})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=_c){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){let e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=_c){return this.instances.has(e)}getOptions(e=_c){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[s,o]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);let o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:l8(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=_c){return this.component?this.component.multipleInstances?e:_c:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function l8(n){return n===_c?void 0:n}function u8(n){return n.instantiationMode==="EAGER"}var s_=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new Vb(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var d8=[],Fe=(function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n})(Fe||{}),h8={debug:Fe.DEBUG,verbose:Fe.VERBOSE,info:Fe.INFO,warn:Fe.WARN,error:Fe.ERROR,silent:Fe.SILENT},f8=Fe.INFO,p8={[Fe.DEBUG]:"log",[Fe.VERBOSE]:"log",[Fe.INFO]:"info",[Fe.WARN]:"warn",[Fe.ERROR]:"error"},g8=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=p8[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Ri=class{constructor(e){this.name=e,this._logLevel=f8,this._logHandler=g8,this._userLogHandler=null,d8.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Fe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?h8[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Fe.DEBUG,...e),this._logHandler(this,Fe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Fe.VERBOSE,...e),this._logHandler(this,Fe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Fe.INFO,...e),this._logHandler(this,Fe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Fe.WARN,...e),this._logHandler(this,Fe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Fe.ERROR,...e),this._logHandler(this,Fe.ERROR,...e)}};var m8=(n,e)=>e.some(t=>n instanceof t),zP,GP;function y8(){return zP||(zP=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function _8(){return GP||(GP=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var WP=new WeakMap,Ub=new WeakMap,KP=new WeakMap,Lb=new WeakMap,Bb=new WeakMap;function v8(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(ki(n.result)),i()},o=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&WP.set(t,n)}).catch(()=>{}),Bb.set(e,n),e}function w8(n){if(Ub.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),i()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});Ub.set(n,e)}var jb={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Ub.get(n);if(e==="objectStoreNames")return n.objectStoreNames||KP.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ki(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function QP(n){jb=n(jb)}function E8(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(o_(this),e,...t);return KP.set(r,e.sort?e.sort():[e]),ki(r)}:_8().includes(n)?function(...e){return n.apply(o_(this),e),ki(WP.get(this))}:function(...e){return ki(n.apply(o_(this),e))}}function I8(n){return typeof n=="function"?E8(n):(n instanceof IDBTransaction&&w8(n),m8(n,y8())?new Proxy(n,jb):n)}function ki(n){if(n instanceof IDBRequest)return v8(n);if(Lb.has(n))return Lb.get(n);let e=I8(n);return e!==n&&(Lb.set(n,e),Bb.set(e,n)),e}var o_=n=>Bb.get(n);function a_(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){let o=indexedDB.open(n,e),a=ki(o);return r&&o.addEventListener("upgradeneeded",c=>{r(ki(o.result),c.oldVersion,c.newVersion,ki(o.transaction),c)}),t&&o.addEventListener("blocked",c=>t(c.oldVersion,c.newVersion,c)),a.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),a}var b8=["get","getKey","getAll","getAllKeys","count"],C8=["put","add","delete","clear"],$b=new Map;function YP(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if($b.get(e))return $b.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=C8.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||b8.includes(t)))return;let s=async function(o,...a){let c=this.transaction(o,i?"readwrite":"readonly"),d=c.store;return r&&(d=d.index(a.shift())),(await Promise.all([d[t](...a),i&&c.done]))[0]};return $b.set(e,s),s}QP(n=>ce(z({},n),{get:(e,t,r)=>YP(e,t)||n.get(e,t,r),has:(e,t)=>!!YP(e,t)||n.has(e,t)}));var qb=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(T8(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function T8(n){let e=n.getComponent();return e?.type==="VERSION"}var zb="@firebase/app",JP="0.13.2";var gs=new Ri("@firebase/app"),D8="@firebase/app-compat",S8="@firebase/analytics-compat",A8="@firebase/analytics",x8="@firebase/app-check-compat",R8="@firebase/app-check",k8="@firebase/auth",N8="@firebase/auth-compat",M8="@firebase/database",P8="@firebase/data-connect",O8="@firebase/database-compat",F8="@firebase/functions",V8="@firebase/functions-compat",L8="@firebase/installations",U8="@firebase/installations-compat",j8="@firebase/messaging",B8="@firebase/messaging-compat",$8="@firebase/performance",H8="@firebase/performance-compat",q8="@firebase/remote-config",z8="@firebase/remote-config-compat",G8="@firebase/storage",W8="@firebase/storage-compat",K8="@firebase/firestore",Q8="@firebase/ai",Y8="@firebase/firestore-compat",J8="firebase",X8="11.10.0";var Gb="[DEFAULT]",Z8={[zb]:"fire-core",[D8]:"fire-core-compat",[A8]:"fire-analytics",[S8]:"fire-analytics-compat",[R8]:"fire-app-check",[x8]:"fire-app-check-compat",[k8]:"fire-auth",[N8]:"fire-auth-compat",[M8]:"fire-rtdb",[P8]:"fire-data-connect",[O8]:"fire-rtdb-compat",[F8]:"fire-fn",[V8]:"fire-fn-compat",[L8]:"fire-iid",[U8]:"fire-iid-compat",[j8]:"fire-fcm",[B8]:"fire-fcm-compat",[$8]:"fire-perf",[H8]:"fire-perf-compat",[q8]:"fire-rc",[z8]:"fire-rc-compat",[G8]:"fire-gcs",[W8]:"fire-gcs-compat",[K8]:"fire-fst",[Y8]:"fire-fst-compat",[Q8]:"fire-vertex","fire-js":"fire-js",[J8]:"fire-js-all"};var xf=new Map,eq=new Map,Wb=new Map;function XP(n,e){try{n.container.addComponent(e)}catch(t){gs.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Jr(n){let e=n.name;if(Wb.has(e))return gs.debug(`There were multiple attempts to register component ${e}.`),!1;Wb.set(e,n);for(let t of xf.values())XP(t,n);for(let t of eq.values())XP(t,n);return!0}function vu(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Cr(n){return n==null?!1:n.settings!==void 0}var tq={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Po=new Yr("app","Firebase",tq);var Kb=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new $n("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Po.create("app-deleted",{appName:this._name})}};var Oo=X8;function Jb(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:Gb,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw Po.create("bad-app-name",{appName:String(i)});if(t||(t=Ob()),!t)throw Po.create("no-options");let s=xf.get(i);if(s){if(xi(t,s.options)&&xi(r,s.config))return s;throw Po.create("duplicate-app",{appName:i})}let o=new s_(i);for(let c of Wb.values())o.addComponent(c);let a=new Kb(t,r,o);return xf.set(i,a),a}function vc(n=Gb){let e=xf.get(n);if(!e&&n===Gb&&Ob())return Jb();if(!e)throw Po.create("no-app",{appName:n});return e}function c_(){return Array.from(xf.values())}function bt(n,e,t){var r;let i=(r=Z8[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),gs.warn(a.join(" "));return}Jr(new $n(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var nq="firebase-heartbeat-database",rq=1,Rf="firebase-heartbeat-store",Hb=null;function nO(){return Hb||(Hb=a_(nq,rq,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Rf)}catch(t){console.warn(t)}}}}).catch(n=>{throw Po.create("idb-open",{originalErrorMessage:n.message})})),Hb}async function iq(n){try{let t=(await nO()).transaction(Rf),r=await t.objectStore(Rf).get(rO(n));return await t.done,r}catch(e){if(e instanceof ur)gs.warn(e.message);else{let t=Po.create("idb-get",{originalErrorMessage:e?.message});gs.warn(t.message)}}}async function ZP(n,e){try{let r=(await nO()).transaction(Rf,"readwrite");await r.objectStore(Rf).put(e,rO(n)),await r.done}catch(t){if(t instanceof ur)gs.warn(t.message);else{let r=Po.create("idb-set",{originalErrorMessage:t?.message});gs.warn(r.message)}}}function rO(n){return`${n.name}!${n.options.appId}`}var sq=1024,oq=30,Qb=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new Yb(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=eO();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>oq){let o=cq(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){gs.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=eO(),{heartbeatsToSend:r,unsentEntries:i}=aq(this._heartbeatsCache.heartbeats),s=Df(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return gs.warn(t),""}}};function eO(){return new Date().toISOString().substring(0,10)}function aq(n,e=sq){let t=[],r=n.slice();for(let i of n){let s=t.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),tO(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),tO(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var Yb=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Sf()?$P().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){let t=await iq(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){let i=await this.read();return ZP(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){let i=await this.read();return ZP(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}};function tO(n){return Df(JSON.stringify({version:2,heartbeats:n})).length}function cq(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function lq(n){Jr(new $n("platform-logger",e=>new qb(e),"PRIVATE")),Jr(new $n("heartbeat",e=>new Qb(e),"PRIVATE")),bt(zb,JP,n),bt(zb,JP,"esm2017"),bt("fire-js","")}lq("");var uq="firebase",dq="11.10.0";bt(uq,dq,"app");function iO(n){n===void 0&&(n=j(Ot));let e=n.get(Wl);return t=>new Me(r=>{let i=e.add(),s=!1;function o(){s||(i(),s=!0)}let a=t.subscribe({next:c=>{r.next(c),o()},complete:()=>{r.complete(),o()},error:c=>{r.error(c),o()}});return a.add(()=>{r.unsubscribe(),o()}),a})}var Fo=new ja("ANGULARFIRE2_VERSION");function kf(n,e,t){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===t);if(s.length===1)return s[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var Eu=(n,e)=>{let t=e?[e]:c_(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},wu=(function(n){return n[n.SILENT=0]="SILENT",n[n.WARN=1]="WARN",n[n.VERBOSE=2]="VERBOSE",n})(wu||{}),sO=GI()&&typeof Zone<"u"?wu.WARN:wu.SILENT;var l_=class{zone;delegate;constructor(e,t=ww){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,s=function(o){i?i.runGuarded(()=>{e.apply(this,[o])}):e.apply(this,[o])};return this.delegate.schedule(s,t,r)}},Vo=(()=>{class n{outsideAngular;insideAngular;constructor(){let t=j(gt);this.outsideAngular=t.runOutsideAngular(()=>new l_(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=t.run(()=>new l_(typeof Zone>"u"?void 0:Zone.current,vw))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=se({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),oO=!1;function hq(n,e){!oO&&(sO>wu.SILENT||GI())&&(oO=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),sO>=e&&console.warn(`Firebase API called outside injection context: ${n.name}`)}function fq(n){let e=j(gt,{optional:!0});return e?e.runOutsideAngular(()=>n()):n()}function wc(n){let e=j(gt,{optional:!0});return e?e.run(()=>n()):n()}var pq=(n,e,t)=>(...r)=>(e&&setTimeout(e,0),tn(t,()=>wc(()=>n.apply(void 0,r)))),Hn=(n,e,t)=>(t||=e?wu.WARN:wu.VERBOSE,function(){let r,i=arguments,s,o,a;try{s=j(Vo),o=j(Wl),a=j(Pt)}catch{return hq(n,t),n.apply(this,i)}for(let d=0;d<arguments.length;d++)typeof i[d]=="function"&&(e&&(r||=wc(()=>o.add())),i[d]=pq(i[d],r,a));let c=fq(()=>n.apply(this,i));return e?c instanceof Me?c.pipe(go(s.outsideAngular),po(s.insideAngular),iO(a)):c instanceof Promise?wc(()=>{let d=o.add();return new Promise((h,p)=>{c.then(y=>tn(a,()=>wc(()=>h(y))),y=>tn(a,()=>wc(()=>p(y)))).finally(d)})}):typeof c=="function"&&r?function(){return setTimeout(r,0),c.apply(this,arguments)}:wc(()=>c):c instanceof Me?c.pipe(go(s.outsideAngular),po(s.insideAngular)):wc(()=>c)});var ms=class{constructor(e){return e}},Ec=class{constructor(){return c_()}};function gq(n){return n&&n.length===1?n[0]:new ms(vc())}var Xb=new ae("angularfire2._apps"),mq={provide:ms,useFactory:gq,deps:[[new or,Xb]]},yq={provide:Ec,deps:[[new or,Xb]]};function _q(n){return(e,t)=>{let r=t.get(cc);bt("angularfire",Fo.full,"core"),bt("angularfire",Fo.full,"app"),bt("angular",qw.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new ms(i)}}function aO(n,...e){return nr([mq,yq,{provide:Xb,useFactory:_q(n),multi:!0,deps:[gt,Ot,Vo,...e]}])}var cO=Hn(Jb,!0);var vq=new Map,wq={activated:!1,tokenObservers:[]},Eq={initialized:!1,enabled:!1};function Xr(n){return vq.get(n)||Object.assign({},wq)}function hO(){return Eq}var Iq="https://content-firebaseappcheck.googleapis.com/v1";var bq="exchangeDebugToken",lO={OFFSET_DURATION:300*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:960*1e3},Tye=1440*60*1e3;var tC=class{constructor(e,t,r,i,s){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(e){this.stop();try{this.pending=new yc,this.pending.promise.catch(t=>{}),await Cq(this.getNextRun(e)),this.pending.resolve(),await this.pending.promise,this.pending=new yc,this.pending.promise.catch(t=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function Cq(n){return new Promise(e=>{setTimeout(e,n)})}var Tq={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},Lo=new Yr("appCheck","AppCheck",Tq);function fO(n){if(!Xr(n).activated)throw Lo.create("use-before-activation",{appName:n.name})}async function pO({url:n,body:e},t){let r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){let p=await i.getHeartbeatsHeader();p&&(r["X-Firebase-Client"]=p)}let s={method:"POST",body:JSON.stringify(e),headers:r},o;try{o=await fetch(n,s)}catch(p){throw Lo.create("fetch-network-error",{originalErrorMessage:p?.message})}if(o.status!==200)throw Lo.create("fetch-status-error",{httpStatus:o.status});let a;try{a=await o.json()}catch(p){throw Lo.create("fetch-parse-error",{originalErrorMessage:p?.message})}let c=a.ttl.match(/^([\d.]+)(s)$/);if(!c||!c[2]||isNaN(Number(c[1])))throw Lo.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});let d=Number(c[1])*1e3,h=Date.now();return{token:a.token,expireTimeMillis:h+d,issuedAtTimeMillis:h}}function gO(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${Iq}/projects/${t}/apps/${r}:${bq}?key=${i}`,body:{debug_token:e}}}var Dq="firebase-app-check-database",Sq=1,nC="firebase-app-check-store";var u_=null;function Aq(){return u_||(u_=new Promise((n,e)=>{try{let t=indexedDB.open(Dq,Sq);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(Lo.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(nC,{keyPath:"compositeKey"})}}}catch(t){e(Lo.create("storage-open",{originalErrorMessage:t?.message}))}}),u_)}function xq(n,e){return Rq(kq(n),e)}async function Rq(n,e){let r=(await Aq()).transaction(nC,"readwrite"),s=r.objectStore(nC).put({compositeKey:n,value:e});return new Promise((o,a)=>{s.onsuccess=c=>{o()},r.onerror=c=>{var d;a(Lo.create("storage-set",{originalErrorMessage:(d=c.target.error)===null||d===void 0?void 0:d.message}))}})}function kq(n){return`${n.options.appId}-${n.name}`}var Nf=new Ri("@firebase/app-check");function Zb(n,e){return Sf()?xq(n,e).catch(t=>{Nf.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function mO(){return hO().enabled}async function yO(){let n=hO();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}var Nq={error:"UNKNOWN_ERROR"};function Mq(n){return e_.encodeString(JSON.stringify(n),!1)}async function rC(n,e=!1,t=!1){let r=n.app;fO(r);let i=Xr(r),s=i.token,o;if(s&&!Mf(s)&&(i.token=void 0,s=void 0),!s){let d=await i.cachedTokenPromise;d&&(Mf(d)?s=d:await Zb(r,void 0))}if(!e&&s&&Mf(s))return{token:s.token};let a=!1;if(mO())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=pO(gO(r,await yO()),n.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),a=!0);let d=await i.exchangeTokenPromise;return await Zb(r,d),i.token=d,{token:d.token}}catch(d){return d.code==="appCheck/throttled"||d.code==="appCheck/initial-throttle"?Nf.warn(d.message):t&&Nf.error(d),eC(d)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),a=!0),s=await Xr(r).exchangeTokenPromise}catch(d){d.code==="appCheck/throttled"||d.code==="appCheck/initial-throttle"?Nf.warn(d.message):t&&Nf.error(d),o=d}let c;return s?o?Mf(s)?c={token:s.token,internalError:o}:c=eC(o):(c={token:s.token},i.token=s,await Zb(r,s)):c=eC(o),a&&Vq(r,c),c}async function Pq(n){let e=n.app;fO(e);let{provider:t}=Xr(e);if(mO()){let r=await yO(),{token:i}=await pO(gO(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=await t.getToken();return{token:r}}}function Oq(n,e,t,r){let{app:i}=n,s=Xr(i),o={next:t,error:r,type:e};if(s.tokenObservers=[...s.tokenObservers,o],s.token&&Mf(s.token)){let a=s.token;Promise.resolve().then(()=>{t({token:a.token}),uO(n)}).catch(()=>{})}s.cachedTokenPromise.then(()=>uO(n))}function _O(n,e){let t=Xr(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function uO(n){let{app:e}=n,t=Xr(e),r=t.tokenRefresher;r||(r=Fq(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function Fq(n){let{app:e}=n;return new tC(async()=>{let t=Xr(e),r;if(t.token?r=await rC(n,!0):r=await rC(n),r.error)throw r.error;if(r.internalError)throw r.internalError},()=>!0,()=>{let t=Xr(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-300*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},lO.RETRIAL_MIN_WAIT,lO.RETRIAL_MAX_WAIT)}function Vq(n,e){let t=Xr(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function Mf(n){return n.expireTimeMillis-Date.now()>0}function eC(n){return{token:Mq(Nq),error:n}}var iC=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=Xr(this.app);for(let t of e)_O(this.app,t.next);return Promise.resolve()}};function Lq(n,e){return new iC(n,e)}function Uq(n){return{getToken:e=>rC(n,e),getLimitedUseToken:()=>Pq(n),addTokenListener:e=>Oq(n,"INTERNAL",e),removeTokenListener:e=>_O(n.app,e)}}var jq="@firebase/app-check",Bq="0.10.1";var $q="app-check",dO="app-check-internal";function Hq(){Jr(new $n($q,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return Lq(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(dO).initialize()})),Jr(new $n(dO,n=>{let e=n.getProvider("app-check").getImmediate();return Uq(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),bt(jq,Bq)}Hq();var qq="app-check";var Iu=class{constructor(){return Eu(qq)}};var zq=["localhost","0.0.0.0","127.0.0.1"],Vye=typeof window<"u"&&zq.includes(window.location.hostname);var vO=()=>{};var IO=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},Gq=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=n[t++],o=n[t++],a=n[t++],c=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let s=n[t++],o=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},bO={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let s=n[i],o=i+1<n.length,a=o?n[i+1]:0,c=i+2<n.length,d=c?n[i+2]:0,h=s>>2,p=(s&3)<<4|a>>4,y=(a&15)<<2|d>>6,I=d&63;c||(I=64,o||(y=64)),r.push(t[h],t[p],t[y],t[I])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(IO(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):Gq(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let s=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let d=i<n.length?t[n.charAt(i)]:64;++i;let p=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||a==null||d==null||p==null)throw new sC;let y=s<<2|a>>4;if(r.push(y),d!==64){let I=a<<4&240|d>>2;if(r.push(I),p!==64){let k=d<<6&192|p;r.push(k)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},sC=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},Wq=function(n){let e=IO(n);return bO.encodeByteArray(e,!0)},Of=function(n){return Wq(n).replace(/\./g,"")},CO=function(n){try{return bO.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function TO(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var Kq=()=>TO().__FIREBASE_DEFAULTS__,Qq=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},Yq=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&CO(n[1]);return e&&JSON.parse(e)},oC=()=>{try{return vO()||Kq()||Qq()||Yq()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Jq=n=>oC()?.emulatorHosts?.[n],DO=n=>{let e=Jq(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},aC=()=>oC()?.config;var d_=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function h_(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function SO(n){return(await fetch(n,{credentials:"include"})).ok}function AO(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=z({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Of(JSON.stringify(t)),Of(JSON.stringify(o)),""].join(".")}var Pf={};function Xq(){let n={prod:[],emulator:[]};for(let e of Object.keys(Pf))Pf[e]?n.emulator.push(e):n.prod.push(e);return n}function Zq(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}var wO=!1;function xO(n,e){if(typeof window>"u"||typeof document>"u"||!h_(window.location.host)||Pf[n]===e||Pf[n]||wO)return;Pf[n]=e;function t(y){return`__firebase__banner__${y}`}let r="__firebase__banner",s=Xq().prod.length>0;function o(){let y=document.getElementById(r);y&&y.remove()}function a(y){y.style.display="flex",y.style.background="#7faaf0",y.style.position="fixed",y.style.bottom="5px",y.style.left="5px",y.style.padding=".5em",y.style.borderRadius="5px",y.style.alignItems="center"}function c(y,I){y.setAttribute("width","24"),y.setAttribute("id",I),y.setAttribute("height","24"),y.setAttribute("viewBox","0 0 24 24"),y.setAttribute("fill","none"),y.style.marginLeft="-6px"}function d(){let y=document.createElement("span");return y.style.cursor="pointer",y.style.marginLeft="16px",y.style.fontSize="24px",y.innerHTML=" &times;",y.onclick=()=>{wO=!0,o()},y}function h(y,I){y.setAttribute("id",I),y.innerText="Learn more",y.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",y.setAttribute("target","__blank"),y.style.paddingLeft="5px",y.style.textDecoration="underline"}function p(){let y=Zq(r),I=t("text"),k=document.getElementById(I)||document.createElement("span"),P=t("learnmore"),M=document.getElementById(P)||document.createElement("a"),$=t("preprendIcon"),Y=document.getElementById($)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(y.created){let ee=y.element;a(ee),h(M,P);let Ce=d();c(Y,$),ee.append(Y,k,M,Ce),document.body.appendChild(ee)}s?(k.innerText="Preview backend disconnected.",Y.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Y.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,k.innerText="Preview backend running in this workspace."),k.setAttribute("id",I)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}function RO(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function ez(){let n=oC()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function kO(){return!ez()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function cC(){try{return typeof indexedDB=="object"}catch{return!1}}function NO(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(t){e(t)}})}var tz="FirebaseError",ys=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=tz,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ff.prototype.create)}},Ff=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?nz(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new ys(i,a,r)}};function nz(n,e){return n.replace(rz,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var rz=/\{\$([^}]+)}/g;function bu(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let s=n[i],o=e[i];if(EO(s)&&EO(o)){if(!bu(s,o))return!1}else if(s!==o)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function EO(n){return n!==null&&typeof n=="object"}var $ye=14400*1e3;function Zr(n){return n&&n._delegate?n._delegate:n}var _s=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Ic="[DEFAULT]";var lC=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new d_;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){let t=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(sz(e))try{this.getOrInitializeService({instanceIdentifier:Ic})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Ic){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){let e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ic){return this.instances.has(e)}getOptions(e=Ic){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[s,o]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,t){let r=this.normalizeInstanceIdentifier(t),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);let s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:iz(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ic){return this.component?this.component.multipleInstances?e:Ic:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function iz(n){return n===Ic?void 0:n}function sz(n){return n.instantiationMode==="EAGER"}var f_=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new lC(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var oz=[],$e=(function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n})($e||{}),az={debug:$e.DEBUG,verbose:$e.VERBOSE,info:$e.INFO,warn:$e.WARN,error:$e.ERROR,silent:$e.SILENT},cz=$e.INFO,lz={[$e.DEBUG]:"log",[$e.VERBOSE]:"log",[$e.INFO]:"info",[$e.WARN]:"warn",[$e.ERROR]:"error"},uz=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=lz[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Cu=class{constructor(e){this.name=e,this._logLevel=cz,this._logHandler=uz,this._userLogHandler=null,oz.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in $e))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?az[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,$e.DEBUG,...e),this._logHandler(this,$e.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,$e.VERBOSE,...e),this._logHandler(this,$e.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,$e.INFO,...e),this._logHandler(this,$e.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,$e.WARN,...e),this._logHandler(this,$e.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,$e.ERROR,...e),this._logHandler(this,$e.ERROR,...e)}};var dC=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(dz(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function dz(n){return n.getComponent()?.type==="VERSION"}var hC="@firebase/app",MO="0.14.6";var vs=new Cu("@firebase/app"),hz="@firebase/app-compat",fz="@firebase/analytics-compat",pz="@firebase/analytics",gz="@firebase/app-check-compat",mz="@firebase/app-check",yz="@firebase/auth",_z="@firebase/auth-compat",vz="@firebase/database",wz="@firebase/data-connect",Ez="@firebase/database-compat",Iz="@firebase/functions",bz="@firebase/functions-compat",Cz="@firebase/installations",Tz="@firebase/installations-compat",Dz="@firebase/messaging",Sz="@firebase/messaging-compat",Az="@firebase/performance",xz="@firebase/performance-compat",Rz="@firebase/remote-config",kz="@firebase/remote-config-compat",Nz="@firebase/storage",Mz="@firebase/storage-compat",Pz="@firebase/firestore",Oz="@firebase/ai",Fz="@firebase/firestore-compat",Vz="firebase",Lz="12.6.0";var fC="[DEFAULT]",Uz={[hC]:"fire-core",[hz]:"fire-core-compat",[pz]:"fire-analytics",[fz]:"fire-analytics-compat",[mz]:"fire-app-check",[gz]:"fire-app-check-compat",[yz]:"fire-auth",[_z]:"fire-auth-compat",[vz]:"fire-rtdb",[wz]:"fire-data-connect",[Ez]:"fire-rtdb-compat",[Iz]:"fire-fn",[bz]:"fire-fn-compat",[Cz]:"fire-iid",[Tz]:"fire-iid-compat",[Dz]:"fire-fcm",[Sz]:"fire-fcm-compat",[Az]:"fire-perf",[xz]:"fire-perf-compat",[Rz]:"fire-rc",[kz]:"fire-rc-compat",[Nz]:"fire-gcs",[Mz]:"fire-gcs-compat",[Pz]:"fire-fst",[Fz]:"fire-fst-compat",[Oz]:"fire-vertex","fire-js":"fire-js",[Vz]:"fire-js-all"};var p_=new Map,jz=new Map,pC=new Map;function PO(n,e){try{n.container.addComponent(e)}catch(t){vs.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Vf(n){let e=n.name;if(pC.has(e))return vs.debug(`There were multiple attempts to register component ${e}.`),!1;pC.set(e,n);for(let t of p_.values())PO(t,n);for(let t of jz.values())PO(t,n);return!0}function LO(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function UO(n){return n==null?!1:n.settings!==void 0}var Bz={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Uo=new Ff("app","Firebase",Bz);var gC=class{constructor(e,t,r){this._isDeleted=!1,this._options=z({},e),this._config=z({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new _s("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Uo.create("app-deleted",{appName:this._name})}};var jO=Lz;function Uf(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=z({name:fC,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw Uo.create("bad-app-name",{appName:String(i)});if(t||(t=aC()),!t)throw Uo.create("no-options");let s=p_.get(i);if(s){if(bu(t,s.options)&&bu(r,s.config))return s;throw Uo.create("duplicate-app",{appName:i})}let o=new f_(i);for(let c of pC.values())o.addComponent(c);let a=new gC(t,r,o);return p_.set(i,a),a}function BO(n=fC){let e=p_.get(n);if(!e&&n===fC&&aC())return Uf();if(!e)throw Uo.create("no-app",{appName:n});return e}function jo(n,e,t){let r=Uz[n]??n;t&&(r+=`-${t}`);let i=r.match(/\s|\//),s=e.match(/\s|\//);if(i||s){let o=[`Unable to register library "${r}" with version "${e}":`];i&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&s&&o.push("and"),s&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),vs.warn(o.join(" "));return}Vf(new _s(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}var $z="firebase-heartbeat-database",Hz=1,Lf="firebase-heartbeat-store",uC=null;function $O(){return uC||(uC=a_($z,Hz,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Lf)}catch(t){console.warn(t)}}}}).catch(n=>{throw Uo.create("idb-open",{originalErrorMessage:n.message})})),uC}async function qz(n){try{let t=(await $O()).transaction(Lf),r=await t.objectStore(Lf).get(HO(n));return await t.done,r}catch(e){if(e instanceof ys)vs.warn(e.message);else{let t=Uo.create("idb-get",{originalErrorMessage:e?.message});vs.warn(t.message)}}}async function OO(n,e){try{let r=(await $O()).transaction(Lf,"readwrite");await r.objectStore(Lf).put(e,HO(n)),await r.done}catch(t){if(t instanceof ys)vs.warn(t.message);else{let r=Uo.create("idb-set",{originalErrorMessage:t?.message});vs.warn(r.message)}}}function HO(n){return`${n.name}!${n.options.appId}`}var zz=1024,Gz=30,mC=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new yC(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{let t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=FO();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>Gz){let i=Kz(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){vs.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";let e=FO(),{heartbeatsToSend:t,unsentEntries:r}=Wz(this._heartbeatsCache.heartbeats),i=Of(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return vs.warn(e),""}}};function FO(){return new Date().toISOString().substring(0,10)}function Wz(n,e=zz){let t=[],r=n.slice();for(let i of n){let s=t.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),VO(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),VO(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var yC=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return cC()?NO().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){let t=await qz(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){let r=await this.read();return OO(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){let r=await this.read();return OO(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}};function VO(n){return Of(JSON.stringify({version:2,heartbeats:n})).length}function Kz(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function Qz(n){Vf(new _s("platform-logger",e=>new dC(e),"PRIVATE")),Vf(new _s("heartbeat",e=>new mC(e),"PRIVATE")),jo(hC,MO,n),jo(hC,MO,"esm2020"),jo("fire-js","")}Qz("");function i2(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var s2=i2,o2=new Yr("auth","Firebase",i2());var w_=new Ri("@firebase/auth");function Yz(n,...e){w_.logLevel<=Fe.WARN&&w_.warn(`Auth (${Oo}): ${n}`,...e)}function m_(n,...e){w_.logLevel<=Fe.ERROR&&w_.error(`Auth (${Oo}): ${n}`,...e)}function Ho(n,...e){throw VC(n,...e)}function Cc(n,...e){return VC(n,...e)}function a2(n,e,t){let r=Object.assign(Object.assign({},s2()),{[e]:t});return new Yr("auth","Firebase",r).create(e,{appName:n.name})}function bc(n){return a2(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function VC(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return o2.create(n,...e)}function ve(n,e,...t){if(!n)throw VC(e,...t)}function ws(n){let e="INTERNAL ASSERTION FAILED: "+n;throw m_(e),new Error(e)}function qo(n,e){n||ws(e)}function EC(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function Jz(){return qO()==="http:"||qO()==="https:"}function qO(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function Xz(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Jz()||LP()||"connection"in navigator)?navigator.onLine:!0}function Zz(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var Tc=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,qo(t>e,"Short delay should be less than long delay!"),this.isMobile=FP()||UP()}get(){return Xz()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function LC(n,e){qo(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var E_=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ws("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ws("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ws("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var eG={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var tG=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],nG=new Tc(3e4,6e4);function UC(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function Tu(n,e,t,r,i={}){return c2(n,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});let a=Af(Object.assign({key:n.config.apiKey},o)).slice(1),c=await n._getAdditionalHeaders();c["Content-Type"]="application/json",n.languageCode&&(c["X-Firebase-Locale"]=n.languageCode);let d=Object.assign({method:e,headers:c},s);return VP()||(d.referrerPolicy="no-referrer"),n.emulatorConfig&&Mo(n.emulatorConfig.host)&&(d.credentials="include"),E_.fetch()(await l2(n,n.config.apiHost,t,a),d)})}async function c2(n,e,t){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},eG),e);try{let i=new IC(n),s=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();let o=await s.json();if("needConfirmation"in o)throw g_(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[c,d]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw g_(n,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw g_(n,"email-already-in-use",o);if(c==="USER_DISABLED")throw g_(n,"user-disabled",o);let h=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw a2(n,h,d);Ho(n,h)}}catch(i){if(i instanceof ur)throw i;Ho(n,"network-request-failed",{message:String(i)})}}async function rG(n,e,t,r,i={}){let s=await Tu(n,e,t,r,i);return"mfaPendingCredential"in s&&Ho(n,"multi-factor-auth-required",{_serverResponse:s}),s}async function l2(n,e,t,r){let i=`${e}${t}?${r}`,s=n,o=s.config.emulator?LC(n.config,i):`${n.config.apiScheme}://${i}`;return tG.includes(t)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o}var IC=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Cc(this.auth,"network-request-failed")),nG.get())})}};function g_(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=Cc(n,e,r);return i.customData._tokenResponse=t,i}async function iG(n,e){return Tu(n,"POST","/v1/accounts:delete",e)}async function I_(n,e){return Tu(n,"POST","/v1/accounts:lookup",e)}function jf(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function jC(n,e=!1){let t=an(n),r=await t.getIdToken(e),i=BC(r);ve(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:jf(_C(i.auth_time)),issuedAtTime:jf(_C(i.iat)),expirationTime:jf(_C(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}}function _C(n){return Number(n)*1e3}function BC(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return m_("JWT malformed, contained fewer than 3 sections"),null;try{let i=t_(t);return i?JSON.parse(i):(m_("Failed to decode base64 JWT payload"),null)}catch(i){return m_("Caught error parsing JWT payload as JSON",i?.toString()),null}}function zO(n){let e=BC(n);return ve(e,"internal-error"),ve(typeof e.exp<"u","internal-error"),ve(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function $f(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof ur&&sG(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function sG({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var bC=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}};var Hf=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=jf(this.lastLoginAt),this.creationTime=jf(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};async function b_(n){var e;let t=n.auth,r=await n.getIdToken(),i=await $f(n,I_(t,{idToken:r}));ve(i?.users.length,t,"internal-error");let s=i.users[0];n._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?u2(s.providerUserInfo):[],a=oG(n.providerData,o),c=n.isAnonymous,d=!(n.email&&s.passwordHash)&&!a?.length,h=c?d:!1,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Hf(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(n,p)}async function $C(n){let e=an(n);await b_(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function oG(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function u2(n){return n.map(e=>{var{providerId:t}=e,r=Ew(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}async function aG(n,e){let t=await c2(n,{},async()=>{let r=Af({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,o=await l2(n,i,"/v1/token",`key=${s}`),a=await n._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let c={method:"POST",headers:a,body:r};return n.emulatorConfig&&Mo(n.emulatorConfig.host)&&(c.credentials="include"),E_.fetch()(o,c)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function cG(n,e){return Tu(n,"POST","/v2/accounts:revokeToken",UC(n,e))}var Bf=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ve(e.idToken,"internal-error"),ve(typeof e.idToken<"u","internal-error"),ve(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):zO(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){ve(e.length!==0,"internal-error");let t=zO(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(ve(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){let{accessToken:r,refreshToken:i,expiresIn:s}=await aG(e,t);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:s}=t,o=new n;return r&&(ve(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(ve(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(ve(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return ws("not implemented")}};function Bo(n,e){ve(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var $o=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,s=Ew(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new bC(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Hf(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){let t=await $f(this,this.stsTokenManager.getToken(this.auth,e));return ve(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return jC(this,e)}reload(){return $C(this)}_assign(e){this!==e&&(ve(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){ve(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await b_(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Cr(this.auth.app))return Promise.reject(bc(this.auth));let e=await this.getIdToken();return await $f(this,iG(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,s,o,a,c,d,h;let p=(r=t.displayName)!==null&&r!==void 0?r:void 0,y=(i=t.email)!==null&&i!==void 0?i:void 0,I=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,k=(o=t.photoURL)!==null&&o!==void 0?o:void 0,P=(a=t.tenantId)!==null&&a!==void 0?a:void 0,M=(c=t._redirectEventId)!==null&&c!==void 0?c:void 0,$=(d=t.createdAt)!==null&&d!==void 0?d:void 0,Y=(h=t.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:ee,emailVerified:Ce,isAnonymous:Je,providerData:pe,stsTokenManager:T}=t;ve(ee&&T,e,"internal-error");let v=Bf.fromJSON(this.name,T);ve(typeof ee=="string",e,"internal-error"),Bo(p,e.name),Bo(y,e.name),ve(typeof Ce=="boolean",e,"internal-error"),ve(typeof Je=="boolean",e,"internal-error"),Bo(I,e.name),Bo(k,e.name),Bo(P,e.name),Bo(M,e.name),Bo($,e.name),Bo(Y,e.name);let E=new n({uid:ee,auth:e,email:y,emailVerified:Ce,displayName:p,isAnonymous:Je,photoURL:k,phoneNumber:I,tenantId:P,stsTokenManager:v,createdAt:$,lastLoginAt:Y});return pe&&Array.isArray(pe)&&(E.providerData=pe.map(C=>Object.assign({},C))),M&&(E._redirectEventId=M),E}static async _fromIdTokenResponse(e,t,r=!1){let i=new Bf;i.updateFromServerResponse(t);let s=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await b_(s),s}static async _fromGetAccountInfoResponse(e,t,r){let i=t.users[0];ve(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?u2(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,a=new Bf;a.updateFromIdToken(r);let c=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Hf(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(c,d),c}};var GO=new Map;function Es(n){qo(n instanceof Function,"Expected a class definition");let e=GO.get(n);return e?(qo(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,GO.set(n,e),e)}var lG=(()=>{class n{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,r){this.storage[t]=r}async _get(t){let r=this.storage[t];return r===void 0?null:r}async _remove(t){delete this.storage[t]}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),CC=lG;function y_(n,e,t){return`firebase:${n}:${e}:${t}`}var C_=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=y_(this.userKey,i.apiKey,s),this.fullPersistenceKey=y_("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){let e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=await I_(this.auth,{idToken:e}).catch(()=>{});return t?$o._fromGetAccountInfoResponse(this.auth,t,e):null}return $o._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;let t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new n(Es(CC),e,r);let i=(await Promise.all(t.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d),s=i[0]||Es(CC),o=y_(r,e.config.apiKey,e.name),a=null;for(let d of t)try{let h=await d._get(o);if(h){let p;if(typeof h=="string"){let y=await I_(e,{idToken:h}).catch(()=>{});if(!y)break;p=await $o._fromGetAccountInfoResponse(e,y,h)}else p=$o._fromJSON(e,h);d!==s&&(a=p),s=d;break}}catch{}let c=i.filter(d=>d._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new n(s,e,r):(s=c[0],a&&await s._set(o,a.toJSON()),await Promise.all(t.map(async d=>{if(d!==s)try{await d._remove(o)}catch{}})),new n(s,e,r))}};function WO(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(p2(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(d2(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(m2(e))return"Blackberry";if(y2(e))return"Webos";if(h2(e))return"Safari";if((e.includes("chrome/")||f2(e))&&!e.includes("edge/"))return"Chrome";if(g2(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function d2(n=fn()){return/firefox\//i.test(n)}function h2(n=fn()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function f2(n=fn()){return/crios\//i.test(n)}function p2(n=fn()){return/iemobile/i.test(n)}function g2(n=fn()){return/android/i.test(n)}function m2(n=fn()){return/blackberry/i.test(n)}function y2(n=fn()){return/webos/i.test(n)}function HC(n=fn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function uG(n=fn()){var e;return HC(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function dG(){return jP()&&document.documentMode===10}function _2(n=fn()){return HC(n)||g2(n)||y2(n)||m2(n)||/windows phone/i.test(n)||p2(n)}function v2(n,e=[]){let t;switch(n){case"Browser":t=WO(fn());break;case"Worker":t=`${WO(fn())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Oo}/${r}`}var TC=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=s=>new Promise((o,a)=>{try{let c=e(s);o(c)}catch(c){a(c)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}};async function hG(n,e={}){return Tu(n,"GET","/v2/passwordPolicy",UC(n,e))}var fG=6,DC=class{constructor(e){var t,r,i,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=o.minPasswordLength)!==null&&t!==void 0?t:fG,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,s,o,a;let c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(t=c.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(s=c.containsUppercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var SC=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new T_(this),this.idTokenSubscription=new T_(this),this.beforeStateQueue=new TC(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=o2,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Es(t)),this._initializationPromise=this.queue(async()=>{var r,i,s;if(!this._deleted&&(this.persistenceManager=await C_.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;let e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{let t=await I_(this,{idToken:e}),r=await $o._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Cr(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}let r=await this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();let o=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=i?._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===a)&&c?.user&&(i=c.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ve(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await b_(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Zz()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Cr(this.app))return Promise.reject(bc(this));let t=e?an(e):null;return t&&ve(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&ve(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Cr(this.app)?Promise.reject(bc(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Cr(this.app)?Promise.reject(bc(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Es(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){let e=await hG(this),t=new DC(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Yr("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){let t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await cG(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){let r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){let t=e&&Es(e)||this._popupRedirectResolver;ve(t,this,"argument-error"),this.redirectPersistenceManager=await C_.create(this,[Es(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let s=typeof t=="function"?t:t.next.bind(t),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(ve(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof t=="function"){let c=e.addObserver(t,r,i);return()=>{o=!0,c()}}else{let c=e.addObserver(t);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ve(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=v2(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);let i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;if(Cr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t?.error&&Yz(`Error while retrieving App Check token: ${t.error}`),t?.token}};function qC(n){return an(n)}var T_=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=qP(t=>this.observer=t)}get next(){return ve(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var zC={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function pG(n){zC=n}function gG(n){return zC.loadJS(n)}function mG(){return zC.gapiScript}function w2(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function GC(n,e){let t=vu(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),s=t.getOptions();if(xi(s,e??{}))return i;Ho(i,"already-initialized")}return t.initialize({options:e})}function yG(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Es);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function WC(n,e,t){let r=qC(n);ve(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,s=E2(e),{host:o,port:a}=_G(e),c=a===null?"":`:${a}`,d={url:`${s}//${o}${c}/`},h=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){ve(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),ve(xi(d,r.config.emulator)&&xi(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=d,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,Mo(o)?(r_(`${s}//${o}${c}`),i_("Auth",!0)):i||vG()}function E2(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function _G(n){let e=E2(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let s=i[1];return{host:s,port:KO(r.substr(s.length+1))}}else{let[s,o]=r.split(":");return{host:s,port:KO(o)}}}function KO(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function vG(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var D_=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ws("not implemented")}_getIdTokenResponse(e){return ws("not implemented")}_linkToIdToken(e,t){return ws("not implemented")}_getReauthenticationResolver(e){return ws("not implemented")}};async function vC(n,e){return rG(n,"POST","/v1/accounts:signInWithIdp",UC(n,e))}var S_=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var AC=class extends S_{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var qf=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){let s=await $o._fromIdTokenResponse(e,r,i),o=QO(r);return new n({user:s,providerId:o,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);let i=QO(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})}};function QO(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var xC=class n extends ur{constructor(e,t,r,i){var s;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function I2(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?xC._fromErrorAndOperation(n,s,e,r):s})}async function wG(n,e,t=!1){let r=await $f(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return qf._forOperation(n,"link",r)}async function EG(n,e,t=!1){let{auth:r}=n;if(Cr(r.app))return Promise.reject(bc(r));let i="reauthenticate";try{let s=await $f(n,I2(r,i,e,n),t);ve(s.idToken,r,"internal-error");let o=BC(s.idToken);ve(o,r,"internal-error");let{sub:a}=o;return ve(n.uid===a,r,"user-mismatch"),qf._forOperation(n,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&Ho(r,"user-mismatch"),s}}async function IG(n,e,t=!1){if(Cr(n.app))return Promise.reject(bc(n));let r="signIn",i=await I2(n,r,e),s=await qf._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(s.user),s}function KC(n,e,t,r){return an(n).onIdTokenChanged(e,t,r)}function QC(n,e,t){return an(n).beforeAuthStateChanged(e,t)}var A_="__sak";var x_=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(A_,"1"),this.storage.removeItem(A_),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var bG=1e3,CG=10,TG=(()=>{class n extends x_{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=_2(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),s=this.localCache[r];i!==s&&t(r,s,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((a,c,d)=>{this.notifyListeners(a,d)});return}let i=t.key;r?this.detachListener():this.stopPolling();let s=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},o=this.storage.getItem(i);dG()&&o!==t.newValue&&t.newValue!==t.oldValue?setTimeout(s,CG):s()}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},bG)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,r){await super._set(t,r),this.localCache[t]=JSON.stringify(r)}async _get(t){let r=await super._get(t);return this.localCache[t]=JSON.stringify(r),r}async _remove(t){await super._remove(t),delete this.localCache[t]}}return n.type="LOCAL",n})(),b2=TG;var DG=(()=>{class n extends x_{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),YC=DG;function SG(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}var AG=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let r=this.receivers.find(s=>s.isListeningto(t));if(r)return r;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}async handleEvent(t){let r=t,{eventId:i,eventType:s,data:o}=r.data,a=this.handlersMap[s];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:s});let c=Array.from(a).map(async h=>h(r.origin,o)),d=await SG(c);r.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:d})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function C2(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var RC=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,c)=>{let d=C2("",20);i.port1.start();let h=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(p){let y=p;if(y.data.eventId===d)switch(y.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(y.data.response);break;default:clearTimeout(h),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:t},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}};function Ni(){return window}function xG(n){Ni().location.href=n}function T2(){return typeof Ni().WorkerGlobalScope<"u"&&typeof Ni().importScripts=="function"}async function RG(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function kG(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function NG(){return T2()?self:null}var D2="firebaseLocalStorageDb",MG=1,R_="firebaseLocalStorage",S2="fbase_key",Dc=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function N_(n,e){return n.transaction([R_],e?"readwrite":"readonly").objectStore(R_)}function PG(){let n=indexedDB.deleteDatabase(D2);return new Dc(n).toPromise()}function kC(){let n=indexedDB.open(D2,MG);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(R_,{keyPath:S2})}catch(i){t(i)}}),n.addEventListener("success",async()=>{let r=n.result;r.objectStoreNames.contains(R_)?e(r):(r.close(),await PG(),e(await kC()))})})}async function YO(n,e,t){let r=N_(n,!0).put({[S2]:e,value:t});return new Dc(r).toPromise()}async function OG(n,e){let t=N_(n,!1).get(e),r=await new Dc(t).toPromise();return r===void 0?null:r.value}function JO(n,e){let t=N_(n,!0).delete(e);return new Dc(t).toPromise()}var FG=800,VG=3,LG=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await kC(),this.db)}async _withRetries(t){let r=0;for(;;)try{let i=await this._openDb();return await t(i)}catch(i){if(r++>VG)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return T2()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=AG._getInstance(NG()),this.receiver._subscribe("keyChanged",async(t,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(t,r)=>["keyChanged"])}async initializeSender(){var t,r;if(this.activeServiceWorker=await RG(),!this.activeServiceWorker)return;this.sender=new RC(this.activeServiceWorker);let i=await this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||kG()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;let t=await kC();return await YO(t,A_,"1"),await JO(t,A_),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,r){return this._withPendingWrite(async()=>(await this._withRetries(i=>YO(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)))}async _get(t){let r=await this._withRetries(i=>OG(i,t));return this.localCache[t]=r,r}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(r=>JO(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){let t=await this._withRetries(s=>{let o=N_(s,!1).getAll();return new Dc(o).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(t.length!==0)for(let{fbase_key:s,value:o}of t)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),r.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),r.push(s));return r}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let s of Array.from(i))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),FG)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),A2=LG;var h_e=w2("rcb"),f_e=new Tc(3e4,6e4);function UG(n,e){return e?Es(e):(ve(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var zf=class extends D_{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return vC(e,this._buildIdpRequest())}_linkToIdToken(e,t){return vC(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return vC(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function jG(n){return IG(n.auth,new zf(n),n.bypassAuthState)}function BG(n){let{auth:e,user:t}=n;return ve(t,e,"internal-error"),EG(t,new zf(n),n.bypassAuthState)}async function $G(n){let{auth:e,user:t}=n;return ve(t,e,"internal-error"),wG(t,new zf(n),n.bypassAuthState)}var NC=class{constructor(e,t,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){let{urlResponse:t,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}let c={auth:this.auth,requestUri:t,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(c))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return jG;case"linkViaPopup":case"linkViaRedirect":return $G;case"reauthViaPopup":case"reauthViaRedirect":return BG;default:Ho(this.auth,"internal-error")}}resolve(e){qo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){qo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var p_e=new Tc(2e3,1e4);var HG="pendingRedirect",__=new Map,MC=class extends NC{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=__.get(this.auth._key());if(!e){try{let r=await qG(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}__.set(this.auth._key(),e)}return this.bypassAuthState||__.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}};async function qG(n,e){let t=WG(e),r=GG(n);if(!await r._isAvailable())return!1;let i=await r._get(t)==="true";return await r._remove(t),i}function zG(n,e){__.set(n._key(),e)}function GG(n){return Es(n._redirectPersistence)}function WG(n){return y_(HG,n.config.apiKey,n.name)}async function KG(n,e,t=!1){if(Cr(n.app))return Promise.reject(bc(n));let r=qC(n),i=UG(r,e),o=await new MC(r,i,t).execute();return o&&!t&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}var QG=600*1e3,PC=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!YG(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!x2(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(Cc(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=QG&&this.cachedEventUids.clear(),this.cachedEventUids.has(XO(e))}saveEventToCache(e){this.cachedEventUids.add(XO(e)),this.lastProcessedEventTime=Date.now()}};function XO(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function x2({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function YG(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return x2(n);default:return!1}}async function JG(n,e={}){return Tu(n,"GET","/v1/projects",e)}var XG=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ZG=/^https?/;async function e7(n){if(n.config.emulator)return;let{authorizedDomains:e}=await JG(n);for(let t of e)try{if(t7(t))return}catch{}Ho(n,"unauthorized-domain")}function t7(n){let e=EC(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let o=new URL(n);return o.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===r}if(!ZG.test(t))return!1;if(XG.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var n7=new Tc(3e4,6e4);function ZO(){let n=Ni().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function r7(n){return new Promise((e,t)=>{var r,i,s;function o(){ZO(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{ZO(),t(Cc(n,"network-request-failed"))},timeout:n7.get()})}if(!((i=(r=Ni().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=Ni().gapi)===null||s===void 0)&&s.load)o();else{let a=w2("iframefcb");return Ni()[a]=()=>{gapi.load?o():t(Cc(n,"network-request-failed"))},gG(`${mG()}?onload=${a}`).catch(c=>t(c))}}).catch(e=>{throw v_=null,e})}var v_=null;function i7(n){return v_=v_||r7(n),v_}var s7=new Tc(5e3,15e3),o7="__/auth/iframe",a7="emulator/auth/iframe",c7={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},l7=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function u7(n){let e=n.config;ve(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?LC(e,a7):`https://${n.config.authDomain}/${o7}`,r={apiKey:e.apiKey,appName:n.name,v:Oo},i=l7.get(n.config.apiHost);i&&(r.eid=i);let s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${t}?${Af(r).slice(1)}`}async function d7(n){let e=await i7(n),t=Ni().gapi;return ve(t,n,"internal-error"),e.open({where:document.body,url:u7(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:c7,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});let o=Cc(n,"network-request-failed"),a=Ni().setTimeout(()=>{s(o)},s7.get());function c(){Ni().clearTimeout(a),i(r)}r.ping(c).then(c,()=>{s(o)})}))}var h7={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},f7=500,p7=600,g7="_blank",m7="http://localhost",k_=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function y7(n,e,t,r=f7,i=p7){let s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",c=Object.assign(Object.assign({},h7),{width:r.toString(),height:i.toString(),top:s,left:o}),d=fn().toLowerCase();t&&(a=f2(d)?g7:t),d2(d)&&(e=e||m7,c.scrollbars="yes");let h=Object.entries(c).reduce((y,[I,k])=>`${y}${I}=${k},`,"");if(uG(d)&&a!=="_self")return _7(e||"",a),new k_(null);let p=window.open(e||"",a,h);ve(p,n,"popup-blocked");try{p.focus()}catch{}return new k_(p)}function _7(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var v7="__/auth/handler",w7="emulator/auth/handler",E7=encodeURIComponent("fac");async function e2(n,e,t,r,i,s){ve(n.config.authDomain,n,"auth-domain-config-required"),ve(n.config.apiKey,n,"invalid-api-key");let o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Oo,eventId:i};if(e instanceof S_){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",HP(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(let[h,p]of Object.entries(s||{}))o[h]=p}if(e instanceof AC){let h=e.getScopes().filter(p=>p!=="");h.length>0&&(o.scopes=h.join(","))}n.tenantId&&(o.tid=n.tenantId);let a=o;for(let h of Object.keys(a))a[h]===void 0&&delete a[h];let c=await n._getAppCheckToken(),d=c?`#${E7}=${encodeURIComponent(c)}`:"";return`${I7(n)}?${Af(a).slice(1)}${d}`}function I7({config:n}){return n.emulator?LC(n,w7):`https://${n.authDomain}/${v7}`}var wC="webStorageSupport",OC=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=YC,this._completeRedirectFn=KG,this._overrideRedirectResult=zG}async _openPopup(e,t,r,i){var s;qo((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let o=await e2(e,t,r,EC(),i);return y7(e,o,C2())}async _openRedirect(e,t,r,i){await this._originValidation(e);let s=await e2(e,t,r,EC(),i);return xG(s),new Promise(()=>{})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(qo(s,"If manager is not set, promise should be"),s)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){let t=await d7(e),r=new PC(e);return t.register("authEvent",i=>(ve(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(wC,{type:wC},i=>{var s;let o=(s=i?.[0])===null||s===void 0?void 0:s[wC];o!==void 0&&t(!!o),Ho(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=e7(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return _2()||h2()||HC()}},R2=OC;var t2="@firebase/auth",n2="1.10.8";var FC=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ve(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function b7(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function C7(n){Jr(new $n("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;ve(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:o,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:v2(n)},d=new SC(r,i,s,c);return yG(d,t),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Jr(new $n("auth-internal",e=>{let t=qC(e.getProvider("auth").getImmediate());return(r=>new FC(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),bt(t2,n2,b7(n)),bt(t2,n2,"esm2017")}var T7=300,D7=Fb("authIdTokenMaxAge")||T7,r2=null,S7=n=>async e=>{let t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>D7)return;let i=t?.token;r2!==i&&(r2=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function JC(n=vc()){let e=vu(n,"auth");if(e.isInitialized())return e.getImmediate();let t=GC(n,{popupRedirectResolver:R2,persistence:[A2,b2,YC]}),r=Fb("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let s=new URL(r,location.origin);if(location.origin===s.origin){let o=S7(s.toString());QC(t,o,()=>o(t.currentUser)),KC(t,a=>o(a))}}let i=Pb("auth");return i&&WC(t,`http://${i}`),t}function A7(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}pG({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let s=Cc("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",A7().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});C7("Browser");var k2="auth",Gf=class{constructor(e){return e}},Wf=class{constructor(){return Eu(k2)}};var XC=new ae("angularfire2.auth-instances");function EW(n,e){let t=kf(k2,n,e);return t&&new Gf(t)}function IW(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Gf(r)}}var bW={provide:Wf,deps:[[new or,XC]]},CW={provide:Gf,useFactory:EW,deps:[[new or,XC],ms]};function N2(n,...e){return bt("angularfire",Fo.full,"auth"),nr([CW,bW,{provide:XC,useFactory:IW(n),multi:!0,deps:[gt,Ot,Vo,Ec,[new or,Iu],...e]}])}var M2=Hn(JC,!0);var P2=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},O2={};var Is,ZC;(function(){var n;function e(T,v){function E(){}E.prototype=v.prototype,T.F=v.prototype,T.prototype=new E,T.prototype.constructor=T,T.D=function(C,b,A){for(var w=Array(arguments.length-2),pt=2;pt<arguments.length;pt++)w[pt-2]=arguments[pt];return v.prototype[b].apply(C,w)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(T,v,E){E||(E=0);let C=Array(16);if(typeof v=="string")for(var b=0;b<16;++b)C[b]=v.charCodeAt(E++)|v.charCodeAt(E++)<<8|v.charCodeAt(E++)<<16|v.charCodeAt(E++)<<24;else for(b=0;b<16;++b)C[b]=v[E++]|v[E++]<<8|v[E++]<<16|v[E++]<<24;v=T.g[0],E=T.g[1],b=T.g[2];let A=T.g[3],w;w=v+(A^E&(b^A))+C[0]+3614090360&4294967295,v=E+(w<<7&4294967295|w>>>25),w=A+(b^v&(E^b))+C[1]+3905402710&4294967295,A=v+(w<<12&4294967295|w>>>20),w=b+(E^A&(v^E))+C[2]+606105819&4294967295,b=A+(w<<17&4294967295|w>>>15),w=E+(v^b&(A^v))+C[3]+3250441966&4294967295,E=b+(w<<22&4294967295|w>>>10),w=v+(A^E&(b^A))+C[4]+4118548399&4294967295,v=E+(w<<7&4294967295|w>>>25),w=A+(b^v&(E^b))+C[5]+1200080426&4294967295,A=v+(w<<12&4294967295|w>>>20),w=b+(E^A&(v^E))+C[6]+2821735955&4294967295,b=A+(w<<17&4294967295|w>>>15),w=E+(v^b&(A^v))+C[7]+4249261313&4294967295,E=b+(w<<22&4294967295|w>>>10),w=v+(A^E&(b^A))+C[8]+1770035416&4294967295,v=E+(w<<7&4294967295|w>>>25),w=A+(b^v&(E^b))+C[9]+2336552879&4294967295,A=v+(w<<12&4294967295|w>>>20),w=b+(E^A&(v^E))+C[10]+4294925233&4294967295,b=A+(w<<17&4294967295|w>>>15),w=E+(v^b&(A^v))+C[11]+2304563134&4294967295,E=b+(w<<22&4294967295|w>>>10),w=v+(A^E&(b^A))+C[12]+1804603682&4294967295,v=E+(w<<7&4294967295|w>>>25),w=A+(b^v&(E^b))+C[13]+4254626195&4294967295,A=v+(w<<12&4294967295|w>>>20),w=b+(E^A&(v^E))+C[14]+2792965006&4294967295,b=A+(w<<17&4294967295|w>>>15),w=E+(v^b&(A^v))+C[15]+1236535329&4294967295,E=b+(w<<22&4294967295|w>>>10),w=v+(b^A&(E^b))+C[1]+4129170786&4294967295,v=E+(w<<5&4294967295|w>>>27),w=A+(E^b&(v^E))+C[6]+3225465664&4294967295,A=v+(w<<9&4294967295|w>>>23),w=b+(v^E&(A^v))+C[11]+643717713&4294967295,b=A+(w<<14&4294967295|w>>>18),w=E+(A^v&(b^A))+C[0]+3921069994&4294967295,E=b+(w<<20&4294967295|w>>>12),w=v+(b^A&(E^b))+C[5]+3593408605&4294967295,v=E+(w<<5&4294967295|w>>>27),w=A+(E^b&(v^E))+C[10]+38016083&4294967295,A=v+(w<<9&4294967295|w>>>23),w=b+(v^E&(A^v))+C[15]+3634488961&4294967295,b=A+(w<<14&4294967295|w>>>18),w=E+(A^v&(b^A))+C[4]+3889429448&4294967295,E=b+(w<<20&4294967295|w>>>12),w=v+(b^A&(E^b))+C[9]+568446438&4294967295,v=E+(w<<5&4294967295|w>>>27),w=A+(E^b&(v^E))+C[14]+3275163606&4294967295,A=v+(w<<9&4294967295|w>>>23),w=b+(v^E&(A^v))+C[3]+4107603335&4294967295,b=A+(w<<14&4294967295|w>>>18),w=E+(A^v&(b^A))+C[8]+1163531501&4294967295,E=b+(w<<20&4294967295|w>>>12),w=v+(b^A&(E^b))+C[13]+2850285829&4294967295,v=E+(w<<5&4294967295|w>>>27),w=A+(E^b&(v^E))+C[2]+4243563512&4294967295,A=v+(w<<9&4294967295|w>>>23),w=b+(v^E&(A^v))+C[7]+1735328473&4294967295,b=A+(w<<14&4294967295|w>>>18),w=E+(A^v&(b^A))+C[12]+2368359562&4294967295,E=b+(w<<20&4294967295|w>>>12),w=v+(E^b^A)+C[5]+4294588738&4294967295,v=E+(w<<4&4294967295|w>>>28),w=A+(v^E^b)+C[8]+2272392833&4294967295,A=v+(w<<11&4294967295|w>>>21),w=b+(A^v^E)+C[11]+1839030562&4294967295,b=A+(w<<16&4294967295|w>>>16),w=E+(b^A^v)+C[14]+4259657740&4294967295,E=b+(w<<23&4294967295|w>>>9),w=v+(E^b^A)+C[1]+2763975236&4294967295,v=E+(w<<4&4294967295|w>>>28),w=A+(v^E^b)+C[4]+1272893353&4294967295,A=v+(w<<11&4294967295|w>>>21),w=b+(A^v^E)+C[7]+4139469664&4294967295,b=A+(w<<16&4294967295|w>>>16),w=E+(b^A^v)+C[10]+3200236656&4294967295,E=b+(w<<23&4294967295|w>>>9),w=v+(E^b^A)+C[13]+681279174&4294967295,v=E+(w<<4&4294967295|w>>>28),w=A+(v^E^b)+C[0]+3936430074&4294967295,A=v+(w<<11&4294967295|w>>>21),w=b+(A^v^E)+C[3]+3572445317&4294967295,b=A+(w<<16&4294967295|w>>>16),w=E+(b^A^v)+C[6]+76029189&4294967295,E=b+(w<<23&4294967295|w>>>9),w=v+(E^b^A)+C[9]+3654602809&4294967295,v=E+(w<<4&4294967295|w>>>28),w=A+(v^E^b)+C[12]+3873151461&4294967295,A=v+(w<<11&4294967295|w>>>21),w=b+(A^v^E)+C[15]+530742520&4294967295,b=A+(w<<16&4294967295|w>>>16),w=E+(b^A^v)+C[2]+3299628645&4294967295,E=b+(w<<23&4294967295|w>>>9),w=v+(b^(E|~A))+C[0]+4096336452&4294967295,v=E+(w<<6&4294967295|w>>>26),w=A+(E^(v|~b))+C[7]+1126891415&4294967295,A=v+(w<<10&4294967295|w>>>22),w=b+(v^(A|~E))+C[14]+2878612391&4294967295,b=A+(w<<15&4294967295|w>>>17),w=E+(A^(b|~v))+C[5]+4237533241&4294967295,E=b+(w<<21&4294967295|w>>>11),w=v+(b^(E|~A))+C[12]+1700485571&4294967295,v=E+(w<<6&4294967295|w>>>26),w=A+(E^(v|~b))+C[3]+2399980690&4294967295,A=v+(w<<10&4294967295|w>>>22),w=b+(v^(A|~E))+C[10]+4293915773&4294967295,b=A+(w<<15&4294967295|w>>>17),w=E+(A^(b|~v))+C[1]+2240044497&4294967295,E=b+(w<<21&4294967295|w>>>11),w=v+(b^(E|~A))+C[8]+1873313359&4294967295,v=E+(w<<6&4294967295|w>>>26),w=A+(E^(v|~b))+C[15]+4264355552&4294967295,A=v+(w<<10&4294967295|w>>>22),w=b+(v^(A|~E))+C[6]+2734768916&4294967295,b=A+(w<<15&4294967295|w>>>17),w=E+(A^(b|~v))+C[13]+1309151649&4294967295,E=b+(w<<21&4294967295|w>>>11),w=v+(b^(E|~A))+C[4]+4149444226&4294967295,v=E+(w<<6&4294967295|w>>>26),w=A+(E^(v|~b))+C[11]+3174756917&4294967295,A=v+(w<<10&4294967295|w>>>22),w=b+(v^(A|~E))+C[2]+718787259&4294967295,b=A+(w<<15&4294967295|w>>>17),w=E+(A^(b|~v))+C[9]+3951481745&4294967295,T.g[0]=T.g[0]+v&4294967295,T.g[1]=T.g[1]+(b+(w<<21&4294967295|w>>>11))&4294967295,T.g[2]=T.g[2]+b&4294967295,T.g[3]=T.g[3]+A&4294967295}r.prototype.v=function(T,v){v===void 0&&(v=T.length);let E=v-this.blockSize,C=this.C,b=this.h,A=0;for(;A<v;){if(b==0)for(;A<=E;)i(this,T,A),A+=this.blockSize;if(typeof T=="string"){for(;A<v;)if(C[b++]=T.charCodeAt(A++),b==this.blockSize){i(this,C),b=0;break}}else for(;A<v;)if(C[b++]=T[A++],b==this.blockSize){i(this,C),b=0;break}}this.h=b,this.o+=v},r.prototype.A=function(){var T=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);T[0]=128;for(var v=1;v<T.length-8;++v)T[v]=0;v=this.o*8;for(var E=T.length-8;E<T.length;++E)T[E]=v&255,v/=256;for(this.v(T),T=Array(16),v=0,E=0;E<4;++E)for(let C=0;C<32;C+=8)T[v++]=this.g[E]>>>C&255;return T};function s(T,v){var E=a;return Object.prototype.hasOwnProperty.call(E,T)?E[T]:E[T]=v(T)}function o(T,v){this.h=v;let E=[],C=!0;for(let b=T.length-1;b>=0;b--){let A=T[b]|0;C&&A==v||(E[b]=A,C=!1)}this.g=E}var a={};function c(T){return-128<=T&&T<128?s(T,function(v){return new o([v|0],v<0?-1:0)}):new o([T|0],T<0?-1:0)}function d(T){if(isNaN(T)||!isFinite(T))return p;if(T<0)return M(d(-T));let v=[],E=1;for(let C=0;T>=E;C++)v[C]=T/E|0,E*=4294967296;return new o(v,0)}function h(T,v){if(T.length==0)throw Error("number format error: empty string");if(v=v||10,v<2||36<v)throw Error("radix out of range: "+v);if(T.charAt(0)=="-")return M(h(T.substring(1),v));if(T.indexOf("-")>=0)throw Error('number format error: interior "-" character');let E=d(Math.pow(v,8)),C=p;for(let A=0;A<T.length;A+=8){var b=Math.min(8,T.length-A);let w=parseInt(T.substring(A,A+b),v);b<8?(b=d(Math.pow(v,b)),C=C.j(b).add(d(w))):(C=C.j(E),C=C.add(d(w)))}return C}var p=c(0),y=c(1),I=c(16777216);n=o.prototype,n.m=function(){if(P(this))return-M(this).m();let T=0,v=1;for(let E=0;E<this.g.length;E++){let C=this.i(E);T+=(C>=0?C:4294967296+C)*v,v*=4294967296}return T},n.toString=function(T){if(T=T||10,T<2||36<T)throw Error("radix out of range: "+T);if(k(this))return"0";if(P(this))return"-"+M(this).toString(T);let v=d(Math.pow(T,6));var E=this;let C="";for(;;){let b=Ce(E,v).g;E=$(E,b.j(v));let A=((E.g.length>0?E.g[0]:E.h)>>>0).toString(T);if(E=b,k(E))return A+C;for(;A.length<6;)A="0"+A;C=A+C}},n.i=function(T){return T<0?0:T<this.g.length?this.g[T]:this.h};function k(T){if(T.h!=0)return!1;for(let v=0;v<T.g.length;v++)if(T.g[v]!=0)return!1;return!0}function P(T){return T.h==-1}n.l=function(T){return T=$(this,T),P(T)?-1:k(T)?0:1};function M(T){let v=T.g.length,E=[];for(let C=0;C<v;C++)E[C]=~T.g[C];return new o(E,~T.h).add(y)}n.abs=function(){return P(this)?M(this):this},n.add=function(T){let v=Math.max(this.g.length,T.g.length),E=[],C=0;for(let b=0;b<=v;b++){let A=C+(this.i(b)&65535)+(T.i(b)&65535),w=(A>>>16)+(this.i(b)>>>16)+(T.i(b)>>>16);C=w>>>16,A&=65535,w&=65535,E[b]=w<<16|A}return new o(E,E[E.length-1]&-2147483648?-1:0)};function $(T,v){return T.add(M(v))}n.j=function(T){if(k(this)||k(T))return p;if(P(this))return P(T)?M(this).j(M(T)):M(M(this).j(T));if(P(T))return M(this.j(M(T)));if(this.l(I)<0&&T.l(I)<0)return d(this.m()*T.m());let v=this.g.length+T.g.length,E=[];for(var C=0;C<2*v;C++)E[C]=0;for(C=0;C<this.g.length;C++)for(let b=0;b<T.g.length;b++){let A=this.i(C)>>>16,w=this.i(C)&65535,pt=T.i(b)>>>16,qn=T.i(b)&65535;E[2*C+2*b]+=w*qn,Y(E,2*C+2*b),E[2*C+2*b+1]+=A*qn,Y(E,2*C+2*b+1),E[2*C+2*b+1]+=w*pt,Y(E,2*C+2*b+1),E[2*C+2*b+2]+=A*pt,Y(E,2*C+2*b+2)}for(T=0;T<v;T++)E[T]=E[2*T+1]<<16|E[2*T];for(T=v;T<2*v;T++)E[T]=0;return new o(E,0)};function Y(T,v){for(;(T[v]&65535)!=T[v];)T[v+1]+=T[v]>>>16,T[v]&=65535,v++}function ee(T,v){this.g=T,this.h=v}function Ce(T,v){if(k(v))throw Error("division by zero");if(k(T))return new ee(p,p);if(P(T))return v=Ce(M(T),v),new ee(M(v.g),M(v.h));if(P(v))return v=Ce(T,M(v)),new ee(M(v.g),v.h);if(T.g.length>30){if(P(T)||P(v))throw Error("slowDivide_ only works with positive integers.");for(var E=y,C=v;C.l(T)<=0;)E=Je(E),C=Je(C);var b=pe(E,1),A=pe(C,1);for(C=pe(C,2),E=pe(E,2);!k(C);){var w=A.add(C);w.l(T)<=0&&(b=b.add(E),A=w),C=pe(C,1),E=pe(E,1)}return v=$(T,b.j(v)),new ee(b,v)}for(b=p;T.l(v)>=0;){for(E=Math.max(1,Math.floor(T.m()/v.m())),C=Math.ceil(Math.log(E)/Math.LN2),C=C<=48?1:Math.pow(2,C-48),A=d(E),w=A.j(v);P(w)||w.l(T)>0;)E-=C,A=d(E),w=A.j(v);k(A)&&(A=y),b=b.add(A),T=$(T,w)}return new ee(b,T)}n.B=function(T){return Ce(this,T).h},n.and=function(T){let v=Math.max(this.g.length,T.g.length),E=[];for(let C=0;C<v;C++)E[C]=this.i(C)&T.i(C);return new o(E,this.h&T.h)},n.or=function(T){let v=Math.max(this.g.length,T.g.length),E=[];for(let C=0;C<v;C++)E[C]=this.i(C)|T.i(C);return new o(E,this.h|T.h)},n.xor=function(T){let v=Math.max(this.g.length,T.g.length),E=[];for(let C=0;C<v;C++)E[C]=this.i(C)^T.i(C);return new o(E,this.h^T.h)};function Je(T){let v=T.g.length+1,E=[];for(let C=0;C<v;C++)E[C]=T.i(C)<<1|T.i(C-1)>>>31;return new o(E,T.h)}function pe(T,v){let E=v>>5;v%=32;let C=T.g.length-E,b=[];for(let A=0;A<C;A++)b[A]=v>0?T.i(A+E)>>>v|T.i(A+E+1)<<32-v:T.i(A+E);return new o(b,T.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,ZC=O2.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=h,Is=O2.Integer=o}).apply(typeof P2<"u"?P2:typeof self<"u"?self:typeof window<"u"?window:{});var M_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},bs={};var eT,TW,Du,tT,Kf,P_,nT,rT,iT;(function(){var n,e=Object.defineProperty;function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof M_=="object"&&M_];for(var g=0;g<u.length;++g){var _=u[g];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var r=t(this);function i(u,g){if(g)e:{var _=r;u=u.split(".");for(var S=0;S<u.length-1;S++){var O=u[S];if(!(O in _))break e;_=_[O]}u=u[u.length-1],S=_[u],g=g(S),g!=S&&g!=null&&e(_,u,{configurable:!0,writable:!0,value:g})}}i("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(u){return u||function(g){var _=[],S;for(S in g)Object.prototype.hasOwnProperty.call(g,S)&&_.push([S,g[S]]);return _}});var s=s||{},o=this||self;function a(u){var g=typeof u;return g=="object"&&u!=null||g=="function"}function c(u,g,_){return u.call.apply(u.bind,arguments)}function d(u,g,_){return d=c,d.apply(null,arguments)}function h(u,g){var _=Array.prototype.slice.call(arguments,1);return function(){var S=_.slice();return S.push.apply(S,arguments),u.apply(this,S)}}function p(u,g){function _(){}_.prototype=g.prototype,u.Z=g.prototype,u.prototype=new _,u.prototype.constructor=u,u.Ob=function(S,O,L){for(var J=Array(arguments.length-2),ge=2;ge<arguments.length;ge++)J[ge-2]=arguments[ge];return g.prototype[O].apply(S,J)}}var y=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function I(u){let g=u.length;if(g>0){let _=Array(g);for(let S=0;S<g;S++)_[S]=u[S];return _}return[]}function k(u,g){for(let S=1;S<arguments.length;S++){let O=arguments[S];var _=typeof O;if(_=_!="object"?_:O?Array.isArray(O)?"array":_:"null",_=="array"||_=="object"&&typeof O.length=="number"){_=u.length||0;let L=O.length||0;u.length=_+L;for(let J=0;J<L;J++)u[_+J]=O[J]}else u.push(O)}}class P{constructor(g,_){this.i=g,this.j=_,this.h=0,this.g=null}get(){let g;return this.h>0?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function M(u){o.setTimeout(()=>{throw u},0)}function $(){var u=T;let g=null;return u.g&&(g=u.g,u.g=u.g.next,u.g||(u.h=null),g.next=null),g}class Y{constructor(){this.h=this.g=null}add(g,_){let S=ee.get();S.set(g,_),this.h?this.h.next=S:this.g=S,this.h=S}}var ee=new P(()=>new Ce,u=>u.reset());class Ce{constructor(){this.next=this.g=this.h=null}set(g,_){this.h=g,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let Je,pe=!1,T=new Y,v=()=>{let u=Promise.resolve(void 0);Je=()=>{u.then(E)}};function E(){for(var u;u=$();){try{u.h.call(u.g)}catch(_){M(_)}var g=ee;g.j(u),g.h<100&&(g.h++,u.next=g.g,g.g=u)}pe=!1}function C(){this.u=this.u,this.C=this.C}C.prototype.u=!1,C.prototype.dispose=function(){this.u||(this.u=!0,this.N())},C.prototype[Symbol.dispose]=function(){this.dispose()},C.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function b(u,g){this.type=u,this.g=this.target=g,this.defaultPrevented=!1}b.prototype.h=function(){this.defaultPrevented=!0};var A=(function(){if(!o.addEventListener||!Object.defineProperty)return!1;var u=!1,g=Object.defineProperty({},"passive",{get:function(){u=!0}});try{let _=()=>{};o.addEventListener("test",_,g),o.removeEventListener("test",_,g)}catch{}return u})();function w(u){return/^[\s\xa0]*$/.test(u)}function pt(u,g){b.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,g)}p(pt,b),pt.prototype.init=function(u,g){let _=this.type=u.type,S=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=g,g=u.relatedTarget,g||(_=="mouseover"?g=u.fromElement:_=="mouseout"&&(g=u.toElement)),this.relatedTarget=g,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&pt.Z.h.call(this)},pt.prototype.h=function(){pt.Z.h.call(this);let u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var qn="closure_listenable_"+(Math.random()*1e6|0),W0=0;function ma(u,g,_,S,O){this.listener=u,this.proxy=null,this.src=g,this.type=_,this.capture=!!S,this.ha=O,this.key=++W0,this.da=this.fa=!1}function ii(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Hs(u,g,_){for(let S in u)g.call(_,u[S],S,u)}function Qp(u,g){for(let _ in u)g.call(void 0,u[_],_,u)}function Yp(u){let g={};for(let _ in u)g[_]=u[_];return g}let kr="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Kt(u,g){let _,S;for(let O=1;O<arguments.length;O++){S=arguments[O];for(_ in S)u[_]=S[_];for(let L=0;L<kr.length;L++)_=kr[L],Object.prototype.hasOwnProperty.call(S,_)&&(u[_]=S[_])}}function tl(u){this.src=u,this.g={},this.h=0}tl.prototype.add=function(u,g,_,S,O){let L=u.toString();u=this.g[L],u||(u=this.g[L]=[],this.h++);let J=Od(u,g,S,O);return J>-1?(g=u[J],_||(g.fa=!1)):(g=new ma(g,this.src,L,!!S,O),g.fa=_,u.push(g)),g};function zi(u,g){let _=g.type;if(_ in u.g){var S=u.g[_],O=Array.prototype.indexOf.call(S,g,void 0),L;(L=O>=0)&&Array.prototype.splice.call(S,O,1),L&&(ii(g),u.g[_].length==0&&(delete u.g[_],u.h--))}}function Od(u,g,_,S){for(let O=0;O<u.length;++O){let L=u[O];if(!L.da&&L.listener==g&&L.capture==!!_&&L.ha==S)return O}return-1}var Gi="closure_lm_"+(Math.random()*1e6|0),Fd={};function Jp(u,g,_,S,O){if(S&&S.once)return rl(u,g,_,S,O);if(Array.isArray(g)){for(let L=0;L<g.length;L++)Jp(u,g[L],_,S,O);return null}return _=al(_),u&&u[qn]?u.J(g,_,a(S)?!!S.capture:!!S,O):ya(u,g,_,!1,S,O)}function ya(u,g,_,S,O,L){if(!g)throw Error("Invalid event type");let J=a(O)?!!O.capture:!!O,ge=ol(u);if(ge||(u[Gi]=ge=new tl(u)),_=ge.add(g,_,S,J,L),_.proxy)return _;if(S=nl(),_.proxy=S,S.src=u,S.listener=_,u.addEventListener)A||(O=J),O===void 0&&(O=!1),u.addEventListener(g.toString(),S,O);else if(u.attachEvent)u.attachEvent(sl(g.toString()),S);else if(u.addListener&&u.removeListener)u.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return _}function nl(){function u(_){return g.call(u.src,u.listener,_)}let g=Xp;return u}function rl(u,g,_,S,O){if(Array.isArray(g)){for(let L=0;L<g.length;L++)rl(u,g[L],_,S,O);return null}return _=al(_),u&&u[qn]?u.K(g,_,a(S)?!!S.capture:!!S,O):ya(u,g,_,!0,S,O)}function il(u,g,_,S,O){if(Array.isArray(g))for(var L=0;L<g.length;L++)il(u,g[L],_,S,O);else S=a(S)?!!S.capture:!!S,_=al(_),u&&u[qn]?(u=u.i,L=String(g).toString(),L in u.g&&(g=u.g[L],_=Od(g,_,S,O),_>-1&&(ii(g[_]),Array.prototype.splice.call(g,_,1),g.length==0&&(delete u.g[L],u.h--)))):u&&(u=ol(u))&&(g=u.g[g.toString()],u=-1,g&&(u=Od(g,_,S,O)),(_=u>-1?g[u]:null)&&_a(_))}function _a(u){if(typeof u!="number"&&u&&!u.da){var g=u.src;if(g&&g[qn])zi(g.i,u);else{var _=u.type,S=u.proxy;g.removeEventListener?g.removeEventListener(_,S,u.capture):g.detachEvent?g.detachEvent(sl(_),S):g.addListener&&g.removeListener&&g.removeListener(S),(_=ol(g))?(zi(_,u),_.h==0&&(_.src=null,g[Gi]=null)):ii(u)}}}function sl(u){return u in Fd?Fd[u]:Fd[u]="on"+u}function Xp(u,g){if(u.da)u=!0;else{g=new pt(g,this);let _=u.listener,S=u.ha||u.src;u.fa&&_a(u),u=_.call(S,g)}return u}function ol(u){return u=u[Gi],u instanceof tl?u:null}var Vd="__closure_events_fn_"+(Math.random()*1e9>>>0);function al(u){return typeof u=="function"?u:(u[Vd]||(u[Vd]=function(g){return u.handleEvent(g)}),u[Vd])}function Qt(){C.call(this),this.i=new tl(this),this.M=this,this.G=null}p(Qt,C),Qt.prototype[qn]=!0,Qt.prototype.removeEventListener=function(u,g,_,S){il(this,u,g,_,S)};function Yt(u,g){var _,S=u.G;if(S)for(_=[];S;S=S.G)_.push(S);if(u=u.M,S=g.type||g,typeof g=="string")g=new b(g,u);else if(g instanceof b)g.target=g.target||u;else{var O=g;g=new b(S,u),Kt(g,O)}O=!0;let L,J;if(_)for(J=_.length-1;J>=0;J--)L=g.g=_[J],O=va(L,S,!0,g)&&O;if(L=g.g=u,O=va(L,S,!0,g)&&O,O=va(L,S,!1,g)&&O,_)for(J=0;J<_.length;J++)L=g.g=_[J],O=va(L,S,!1,g)&&O}Qt.prototype.N=function(){if(Qt.Z.N.call(this),this.i){var u=this.i;for(let g in u.g){let _=u.g[g];for(let S=0;S<_.length;S++)ii(_[S]);delete u.g[g],u.h--}}this.G=null},Qt.prototype.J=function(u,g,_,S){return this.i.add(String(u),g,!1,_,S)},Qt.prototype.K=function(u,g,_,S){return this.i.add(String(u),g,!0,_,S)};function va(u,g,_,S){if(g=u.i.g[String(g)],!g)return!0;g=g.concat();let O=!0;for(let L=0;L<g.length;++L){let J=g[L];if(J&&!J.da&&J.capture==_){let ge=J.listener,l=J.ha||J.src;J.fa&&zi(u.i,J),O=ge.call(l,S)!==!1&&O}}return O&&!S.defaultPrevented}function K0(u,g){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=d(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(g)>2147483647?-1:o.setTimeout(u,g||0)}function cl(u){u.g=K0(()=>{u.g=null,u.i&&(u.i=!1,cl(u))},u.l);let g=u.h;u.h=null,u.m.apply(null,g)}class Ld extends C{constructor(g,_){super(),this.m=g,this.l=_,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:cl(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Wi(u){C.call(this),this.h=u,this.g={}}p(Wi,C);var Jt=[];function cn(u){Hs(u.g,function(g,_){this.g.hasOwnProperty(_)&&_a(g)},u),u.g={}}Wi.prototype.N=function(){Wi.Z.N.call(this),cn(this)},Wi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var qs=o.JSON.stringify,Zp=o.JSON.parse,eg=class{stringify(u){return o.JSON.stringify(u,void 0)}parse(u){return o.JSON.parse(u,void 0)}};function tg(){}function zs(){}var Gs={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function ll(){b.call(this,"d")}p(ll,b);function wa(){b.call(this,"c")}p(wa,b);var Ki={},ng=null;function Ws(){return ng=ng||new Qt}Ki.Ia="serverreachability";function Ud(u){b.call(this,Ki.Ia,u)}p(Ud,b);function Ks(u){let g=Ws();Yt(g,new Ud(g))}Ki.STAT_EVENT="statevent";function Qs(u,g){b.call(this,Ki.STAT_EVENT,u),this.stat=g}p(Qs,b);function Xt(u){let g=Ws();Yt(g,new Qs(g,u))}Ki.Ja="timingevent";function ul(u,g){b.call(this,Ki.Ja,u),this.size=g}p(ul,b);function Xn(u,g){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){u()},g)}function Ys(){this.g=!0}Ys.prototype.ua=function(){this.g=!1};function dl(u,g,_,S,O,L){u.info(function(){if(u.g)if(L){var J="",ge=L.split("&");for(let f=0;f<ge.length;f++){var l=ge[f].split("=");if(l.length>1){let m=l[0];l=l[1];let D=m.split("_");J=D.length>=2&&D[1]=="type"?J+(m+"="+l+"&"):J+(m+"=redacted&")}}}else J=null;else J=L;return"XMLHTTP REQ ("+S+") [attempt "+O+"]: "+g+`
`+_+`
`+J})}function rg(u,g,_,S,O,L,J){u.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+O+"]: "+g+`
`+_+`
`+L+" "+J})}function gr(u,g,_,S){u.info(function(){return"XMLHTTP TEXT ("+g+"): "+vn(u,_)+(S?" "+S:"")})}function ig(u,g){u.info(function(){return"TIMEOUT: "+g})}Ys.prototype.info=function(){};function vn(u,g){if(!u.g)return g;if(!g)return null;try{let L=JSON.parse(g);if(L){for(u=0;u<L.length;u++)if(Array.isArray(L[u])){var _=L[u];if(!(_.length<2)){var S=_[1];if(Array.isArray(S)&&!(S.length<1)){var O=S[0];if(O!="noop"&&O!="stop"&&O!="close")for(let J=1;J<S.length;J++)S[J]=""}}}}return qs(L)}catch{return g}}var Ea={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Js={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Xs;function jd(){}p(jd,tg),jd.prototype.g=function(){return new XMLHttpRequest},Xs=new jd;function Ia(u){return encodeURIComponent(String(u))}function Zs(u){var g=1;u=u.split(":");let _=[];for(;g>0&&u.length;)_.push(u.shift()),g--;return u.length&&_.push(u.join(":")),_}function si(u,g,_,S){this.j=u,this.i=g,this.l=_,this.S=S||1,this.V=new Wi(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new sg}function sg(){this.i=null,this.g="",this.h=!1}var ba={},hl={};function Ca(u,g,_){u.M=1,u.A=Aa(Zn(g)),u.u=_,u.R=!0,Ta(u,null)}function Ta(u,g){u.F=Date.now(),eo(u),u.B=Zn(u.A);var _=u.B,S=u.S;Array.isArray(S)||(S=[String(S)]),dg(_.i,"t",S),u.C=0,_=u.j.L,u.h=new sg,u.g=Tl(u.j,_?g:null,!u.u),u.P>0&&(u.O=new Ld(d(u.Y,u,u.g),u.P)),g=u.V,_=u.g,S=u.ba;var O="readystatechange";Array.isArray(O)||(O&&(Jt[0]=O.toString()),O=Jt);for(let L=0;L<O.length;L++){let J=Jp(_,O[L],S||g.handleEvent,!1,g.h||g);if(!J)break;g.g[J.key]=J}g=u.J?Yp(u.J):{},u.u?(u.v||(u.v="POST"),g["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,g)):(u.v="GET",u.g.ea(u.B,u.v,null,g)),Ks(),dl(u.i,u.v,u.B,u.l,u.S,u.u)}si.prototype.ba=function(u){u=u.target;let g=this.O;g&&Qe(u)==3?g.j():this.Y(u)},si.prototype.Y=function(u){try{if(u==this.g)e:{let ge=Qe(this.g),l=this.g.ya(),f=this.g.ca();if(!(ge<3)&&(ge!=3||this.g&&(this.h.h||this.g.la()||_g(this.g)))){this.K||ge!=4||l==7||(l==8||f<=0?Ks(3):Ks(2)),pl(this);var g=this.g.ca();this.X=g;var _=oi(this);if(this.o=g==200,rg(this.i,this.v,this.B,this.l,this.S,ge,g),this.o){if(this.U&&!this.L){t:{if(this.g){var S,O=this.g;if((S=O.g?O.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(S)){var L=S;break t}}L=null}if(u=L)gr(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,no(this,u);else{this.o=!1,this.m=3,Xt(12),Qi(this),to(this);break e}}if(this.R){u=!0;let m;for(;!this.K&&this.C<_.length;)if(m=og(this,_),m==hl){ge==4&&(this.m=4,Xt(14),u=!1),gr(this.i,this.l,null,"[Incomplete Response]");break}else if(m==ba){this.m=4,Xt(15),gr(this.i,this.l,_,"[Invalid Chunk]"),u=!1;break}else gr(this.i,this.l,m,null),no(this,m);if(Bd(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ge!=4||_.length!=0||this.h.h||(this.m=1,Xt(16),u=!1),this.o=this.o&&u,!u)gr(this.i,this.l,_,"[Invalid Chunked Response]"),Qi(this),to(this);else if(_.length>0&&!this.W){this.W=!0;var J=this.j;J.g==this&&J.aa&&!J.P&&(J.j.info("Great, no buffering proxy detected. Bytes received: "+_.length),Il(J),J.P=!0,Xt(11))}}else gr(this.i,this.l,_,null),no(this,_);ge==4&&Qi(this),this.o&&!this.K&&(ge==4?eh(this.j,this):(this.o=!1,eo(this)))}else Q0(this.g),g==400&&_.indexOf("Unknown SID")>0?(this.m=3,Xt(12)):(this.m=0,Xt(13)),Qi(this),to(this)}}}catch{}finally{}};function oi(u){if(!Bd(u))return u.g.la();let g=_g(u.g);if(g==="")return"";let _="",S=g.length,O=Qe(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return Qi(u),to(u),"";u.h.i=new o.TextDecoder}for(let L=0;L<S;L++)u.h.h=!0,_+=u.h.i.decode(g[L],{stream:!(O&&L==S-1)});return g.length=0,u.h.g+=_,u.C=0,u.h.g}function Bd(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function og(u,g){var _=u.C,S=g.indexOf(`
`,_);return S==-1?hl:(_=Number(g.substring(_,S)),isNaN(_)?ba:(S+=1,S+_>g.length?hl:(g=g.slice(S,S+_),u.C=S+_,g)))}si.prototype.cancel=function(){this.K=!0,Qi(this)};function eo(u){u.T=Date.now()+u.H,fl(u,u.H)}function fl(u,g){if(u.D!=null)throw Error("WatchDog timer not null");u.D=Xn(d(u.aa,u),g)}function pl(u){u.D&&(o.clearTimeout(u.D),u.D=null)}si.prototype.aa=function(){this.D=null;let u=Date.now();u-this.T>=0?(ig(this.i,this.B),this.M!=2&&(Ks(),Xt(17)),Qi(this),this.m=2,to(this)):fl(this,this.T-u)};function to(u){u.j.I==0||u.K||eh(u.j,u)}function Qi(u){pl(u);var g=u.O;g&&typeof g.dispose=="function"&&g.dispose(),u.O=null,cn(u.V),u.g&&(g=u.g,u.g=null,g.abort(),g.dispose())}function no(u,g){try{var _=u.j;if(_.I!=0&&(_.g==u||Da(_.h,u))){if(!u.L&&Da(_.h,u)&&_.I==3){try{var S=_.Ba.g.parse(g)}catch{S=null}if(Array.isArray(S)&&S.length==3){var O=S;if(O[0]==0){e:if(!_.v){if(_.g)if(_.g.F+3e3<u.F)bl(_),Yi(_);else break e;uo(_),Xt(18)}}else _.xa=O[1],0<_.xa-_.K&&O[2]<37500&&_.F&&_.A==0&&!_.C&&(_.C=Xn(d(_.Va,_),6e3));ai(_.h)<=1&&_.ta&&(_.ta=void 0)}else li(_,11)}else if((u.L||_.g==u)&&bl(_),!w(g))for(O=_.Ba.g.parse(g),g=0;g<O.length;g++){let f=O[g],m=f[0];if(!(m<=_.K))if(_.K=m,f=f[1],_.I==2)if(f[0]=="c"){_.M=f[1],_.ba=f[2];let D=f[3];D!=null&&(_.ka=D,_.j.info("VER="+_.ka));let F=f[4];F!=null&&(_.za=F,_.j.info("SVER="+_.za));let U=f[5];U!=null&&typeof U=="number"&&U>0&&(S=1.5*U,_.O=S,_.j.info("backChannelRequestTimeoutMs_="+S)),S=_;let K=u.g;if(K){let We=K.g?K.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(We){var L=S.h;L.g||We.indexOf("spdy")==-1&&We.indexOf("quic")==-1&&We.indexOf("h2")==-1||(L.j=L.l,L.g=new Set,L.h&&($d(L,L.h),L.h=null))}if(S.G){let Dt=K.g?K.g.getResponseHeader("X-HTTP-Session-Id"):null;Dt&&(S.wa=Dt,st(S.J,S.G,Dt))}}_.I=3,_.l&&_.l.ra(),_.aa&&(_.T=Date.now()-u.F,_.j.info("Handshake RTT: "+_.T+"ms")),S=_;var J=u;if(S.na=Cl(S,S.L?S.ba:null,S.W),J.L){Hd(S.h,J);var ge=J,l=S.O;l&&(ge.H=l),ge.D&&(pl(ge),eo(ge)),S.g=J}else El(S);_.i.length>0&&Gn(_)}else f[0]!="stop"&&f[0]!="close"||li(_,7);else _.I==3&&(f[0]=="stop"||f[0]=="close"?f[0]=="stop"?li(_,7):wl(_):f[0]!="noop"&&_.l&&_.l.qa(f),_.A=0)}}Ks(4)}catch{}}var ag=class{constructor(u,g){this.g=u,this.map=g}};function gl(u){this.l=u||10,o.PerformanceNavigationTiming?(u=o.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function ro(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function ai(u){return u.h?1:u.g?u.g.size:0}function Da(u,g){return u.h?u.h==g:u.g?u.g.has(g):!1}function $d(u,g){u.g?u.g.add(g):u.h=g}function Hd(u,g){u.h&&u.h==g?u.h=null:u.g&&u.g.has(g)&&u.g.delete(g)}gl.prototype.cancel=function(){if(this.i=qd(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let u of this.g.values())u.cancel();this.g.clear()}};function qd(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let g=u.i;for(let _ of u.g.values())g=g.concat(_.G);return g}return I(u.i)}var zd=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Gd(u,g){if(u){u=u.split("&");for(let _=0;_<u.length;_++){let S=u[_].indexOf("="),O,L=null;S>=0?(O=u[_].substring(0,S),L=u[_].substring(S+1)):O=u[_],g(O,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function mr(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let g;u instanceof mr?(this.l=u.l,io(this,u.j),this.o=u.o,this.g=u.g,Sa(this,u.u),this.h=u.h,Wd(this,hg(u.i)),this.m=u.m):u&&(g=String(u).match(zd))?(this.l=!1,io(this,g[1]||"",!0),this.o=xa(g[2]||""),this.g=xa(g[3]||"",!0),Sa(this,g[4]),this.h=xa(g[5]||"",!0),Wd(this,g[6]||"",!0),this.m=xa(g[7]||"")):(this.l=!1,this.i=new Mr(null,this.l))}mr.prototype.toString=function(){let u=[];var g=this.j;g&&u.push(er(g,Ra,!0),":");var _=this.g;return(_||g=="file")&&(u.push("//"),(g=this.o)&&u.push(er(g,Ra,!0),"@"),u.push(Ia(_).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.u,_!=null&&u.push(":",String(_))),(_=this.h)&&(this.g&&_.charAt(0)!="/"&&u.push("/"),u.push(er(_,_.charAt(0)=="/"?cg:ml,!0))),(_=this.i.toString())&&u.push("?",_),(_=this.m)&&u.push("#",er(_,yl)),u.join("")},mr.prototype.resolve=function(u){let g=Zn(this),_=!!u.j;_?io(g,u.j):_=!!u.o,_?g.o=u.o:_=!!u.g,_?g.g=u.g:_=u.u!=null;var S=u.h;if(_)Sa(g,u.u);else if(_=!!u.h){if(S.charAt(0)!="/")if(this.g&&!this.h)S="/"+S;else{var O=g.h.lastIndexOf("/");O!=-1&&(S=g.h.slice(0,O+1)+S)}if(O=S,O==".."||O==".")S="";else if(O.indexOf("./")!=-1||O.indexOf("/.")!=-1){S=O.lastIndexOf("/",0)==0,O=O.split("/");let L=[];for(let J=0;J<O.length;){let ge=O[J++];ge=="."?S&&J==O.length&&L.push(""):ge==".."?((L.length>1||L.length==1&&L[0]!="")&&L.pop(),S&&J==O.length&&L.push("")):(L.push(ge),S=!0)}S=L.join("/")}else S=O}return _?g.h=S:_=u.i.toString()!=="",_?Wd(g,hg(u.i)):_=!!u.m,_&&(g.m=u.m),g};function Zn(u){return new mr(u)}function io(u,g,_){u.j=_?xa(g,!0):g,u.j&&(u.j=u.j.replace(/:$/,""))}function Sa(u,g){if(g){if(g=Number(g),isNaN(g)||g<0)throw Error("Bad port number "+g);u.u=g}else u.u=null}function Wd(u,g,_){g instanceof Mr?(u.i=g,ka(u.i,u.l)):(_||(g=er(g,ct)),u.i=new Mr(g,u.l))}function st(u,g,_){u.i.set(g,_)}function Aa(u){return st(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function xa(u,g){return u?g?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function er(u,g,_){return typeof u=="string"?(u=encodeURI(u).replace(g,Nr),_&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Nr(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Ra=/[#\/\?@]/g,ml=/[#\?:]/g,cg=/[#\?]/g,ct=/[#\?@]/g,yl=/#/g;function Mr(u,g){this.h=this.g=null,this.i=u||null,this.j=!!g}function tr(u){u.g||(u.g=new Map,u.h=0,u.i&&Gd(u.i,function(g,_){u.add(decodeURIComponent(g.replace(/\+/g," ")),_)}))}n=Mr.prototype,n.add=function(u,g){tr(this),this.i=null,u=so(this,u);let _=this.g.get(u);return _||this.g.set(u,_=[]),_.push(g),this.h+=1,this};function lg(u,g){tr(u),g=so(u,g),u.g.has(g)&&(u.i=null,u.h-=u.g.get(g).length,u.g.delete(g))}function Kd(u,g){return tr(u),g=so(u,g),u.g.has(g)}n.forEach=function(u,g){tr(this),this.g.forEach(function(_,S){_.forEach(function(O){u.call(g,O,S,this)},this)},this)};function ug(u,g){tr(u);let _=[];if(typeof g=="string")Kd(u,g)&&(_=_.concat(u.g.get(so(u,g))));else for(u=Array.from(u.g.values()),g=0;g<u.length;g++)_=_.concat(u[g]);return _}n.set=function(u,g){return tr(this),this.i=null,u=so(this,u),Kd(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[g]),this.h+=1,this},n.get=function(u,g){return u?(u=ug(this,u),u.length>0?String(u[0]):g):g};function dg(u,g,_){lg(u,g),_.length>0&&(u.i=null,u.g.set(so(u,g),I(_)),u.h+=_.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let u=[],g=Array.from(this.g.keys());for(let S=0;S<g.length;S++){var _=g[S];let O=Ia(_);_=ug(this,_);for(let L=0;L<_.length;L++){let J=O;_[L]!==""&&(J+="="+Ia(_[L])),u.push(J)}}return this.i=u.join("&")};function hg(u){let g=new Mr;return g.i=u.i,u.g&&(g.g=new Map(u.g),g.h=u.h),g}function so(u,g){return g=String(g),u.j&&(g=g.toLowerCase()),g}function ka(u,g){g&&!u.j&&(tr(u),u.i=null,u.g.forEach(function(_,S){let O=S.toLowerCase();S!=O&&(lg(this,S),dg(this,O,_))},u)),u.j=g}function ci(u,g){let _=new Ys;if(o.Image){let S=new Image;S.onload=h(Pr,_,"TestLoadImage: loaded",!0,g,S),S.onerror=h(Pr,_,"TestLoadImage: error",!1,g,S),S.onabort=h(Pr,_,"TestLoadImage: abort",!1,g,S),S.ontimeout=h(Pr,_,"TestLoadImage: timeout",!1,g,S),o.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=u}else g(!1)}function fg(u,g){let _=new Ys,S=new AbortController,O=setTimeout(()=>{S.abort(),Pr(_,"TestPingServer: timeout",!1,g)},1e4);fetch(u,{signal:S.signal}).then(L=>{clearTimeout(O),L.ok?Pr(_,"TestPingServer: ok",!0,g):Pr(_,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(O),Pr(_,"TestPingServer: error",!1,g)})}function Pr(u,g,_,S,O){try{O&&(O.onload=null,O.onerror=null,O.onabort=null,O.ontimeout=null),S(_)}catch{}}function pg(){this.g=new eg}function Or(u){this.i=u.Sb||null,this.h=u.ab||!1}p(Or,tg),Or.prototype.g=function(){return new _l(this.i,this.h)};function _l(u,g){Qt.call(this),this.H=u,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}p(_l,Qt),n=_l.prototype,n.open=function(u,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=g,this.readyState=1,zn(this)},n.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;let g={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(g.body=u),(this.H||o).fetch(new Request(this.D,g)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Na(this)),this.readyState=0},n.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,zn(this)),this.g&&(this.readyState=3,zn(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;gg(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function gg(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}n.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var g=u.value?u.value:new Uint8Array(0);(g=this.B.decode(g,{stream:!u.done}))&&(this.response=this.responseText+=g)}u.done?Na(this):zn(this),this.readyState==3&&gg(this)}},n.Oa=function(u){this.g&&(this.response=this.responseText=u,Na(this))},n.Na=function(u){this.g&&(this.response=u,Na(this))},n.ga=function(){this.g&&Na(this)};function Na(u){u.readyState=4,u.l=null,u.j=null,u.B=null,zn(u)}n.setRequestHeader=function(u,g){this.A.append(u,g)},n.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let u=[],g=this.h.entries();for(var _=g.next();!_.done;)_=_.value,u.push(_[0]+": "+_[1]),_=g.next();return u.join(`\r
`)};function zn(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(_l.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function mg(u){let g="";return Hs(u,function(_,S){g+=S,g+=":",g+=_,g+=`\r
`}),g}function Qd(u,g,_){e:{for(S in _){var S=!1;break e}S=!0}S||(_=mg(_),typeof u=="string"?_!=null&&Ia(_):st(u,g,_))}function ot(u){Qt.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}p(ot,Qt);var vl=/^https?$/i,yg=["POST","PUT"];n=ot.prototype,n.Fa=function(u){this.H=u},n.ea=function(u,g,_,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);g=g?g.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Xs.g(),this.g.onreadystatechange=y(d(this.Ca,this));try{this.B=!0,this.g.open(g,String(u),!0),this.B=!1}catch(L){oo(this,L);return}if(u=_||"",_=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var O in S)_.set(O,S[O]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(let L of S.keys())_.set(L,S.get(L));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(_.keys()).find(L=>L.toLowerCase()=="content-type"),O=o.FormData&&u instanceof o.FormData,!(Array.prototype.indexOf.call(yg,g,void 0)>=0)||S||O||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[L,J]of _)this.g.setRequestHeader(L,J);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(L){oo(this,L)}};function oo(u,g){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=g,u.o=5,ao(u),co(u)}function ao(u){u.A||(u.A=!0,Yt(u,"complete"),Yt(u,"error"))}n.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,Yt(this,"complete"),Yt(this,"abort"),co(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),co(this,!0)),ot.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Yd(this):this.Xa())},n.Xa=function(){Yd(this)};function Yd(u){if(u.h&&typeof s<"u"){if(u.v&&Qe(u)==4)setTimeout(u.Ca.bind(u),0);else if(Yt(u,"readystatechange"),Qe(u)==4){u.h=!1;try{let L=u.ca();e:switch(L){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var _;if(!(_=g)){var S;if(S=L===0){let J=String(u.D).match(zd)[1]||null;!J&&o.self&&o.self.location&&(J=o.self.location.protocol.slice(0,-1)),S=!vl.test(J?J.toLowerCase():"")}_=S}if(_)Yt(u,"complete"),Yt(u,"success");else{u.o=6;try{var O=Qe(u)>2?u.g.statusText:""}catch{O=""}u.l=O+" ["+u.ca()+"]",ao(u)}}finally{co(u)}}}}function co(u,g){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);let _=u.g;u.g=null,g||Yt(u,"ready");try{_.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function Qe(u){return u.g?u.g.readyState:0}n.ca=function(){try{return Qe(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(u){if(this.g){var g=this.g.responseText;return u&&g.indexOf(u)==0&&(g=g.substring(u.length)),Zp(g)}};function _g(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Q0(u){let g={};u=(u.g&&Qe(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<u.length;S++){if(w(u[S]))continue;var _=Zs(u[S]);let O=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();let L=g[O]||[];g[O]=L,L.push(_)}Qp(g,function(S){return S.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function lo(u,g,_){return _&&_.internalChannelParams&&_.internalChannelParams[u]||g}function Jd(u){this.za=0,this.i=[],this.j=new Ys,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=lo("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=lo("baseRetryDelayMs",5e3,u),this.Za=lo("retryDelaySeedMs",1e4,u),this.Ta=lo("forwardChannelMaxRetries",2,u),this.va=lo("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new gl(u&&u.concurrentRequestLimit),this.Ba=new pg,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Jd.prototype,n.ka=8,n.I=1,n.connect=function(u,g,_,S){Xt(0),this.W=u,this.H=g||{},_&&S!==void 0&&(this.H.OSID=_,this.H.OAID=S),this.F=this.X,this.J=Cl(this,null,this.W),Gn(this)};function wl(u){if(Xd(u),u.I==3){var g=u.V++,_=Zn(u.J);if(st(_,"SID",u.M),st(_,"RID",g),st(_,"TYPE","terminate"),Fr(u,_),g=new si(u,u.j,g),g.M=2,g.A=Aa(Zn(_)),_=!1,o.navigator&&o.navigator.sendBeacon)try{_=o.navigator.sendBeacon(g.A.toString(),"")}catch{}!_&&o.Image&&(new Image().src=g.A,_=!0),_||(g.g=Tl(g.j,null),g.g.ea(g.A)),g.F=Date.now(),eo(g)}th(u)}function Yi(u){u.g&&(Il(u),u.g.cancel(),u.g=null)}function Xd(u){Yi(u),u.v&&(o.clearTimeout(u.v),u.v=null),bl(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&o.clearTimeout(u.m),u.m=null)}function Gn(u){if(!ro(u.h)&&!u.m){u.m=!0;var g=u.Ea;Je||v(),pe||(Je(),pe=!0),T.add(g,u),u.D=0}}function vg(u,g){return ai(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=g.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=Xn(d(u.Ea,u,g),ho(u,u.D)),u.D++,!0)}n.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;let O=new si(this,this.j,u),L=this.o;if(this.U&&(L?(L=Yp(L),Kt(L,this.U)):L=this.U),this.u!==null||this.R||(O.J=L,L=null),this.S)e:{for(var g=0,_=0;_<this.i.length;_++){t:{var S=this.i[_];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(g+=S,g>4096){g=_;break e}if(g===4096||_===this.i.length-1){g=_+1;break e}}g=1e3}else g=1e3;g=Zd(this,O,g),_=Zn(this.J),st(_,"RID",u),st(_,"CVER",22),this.G&&st(_,"X-HTTP-Session-Id",this.G),Fr(this,_),L&&(this.R?g="headers="+Ia(mg(L))+"&"+g:this.u&&Qd(_,this.u,L)),$d(this.h,O),this.Ra&&st(_,"TYPE","init"),this.S?(st(_,"$req",g),st(_,"SID","null"),O.U=!0,Ca(O,_,null)):Ca(O,_,g),this.I=2}}else this.I==3&&(u?wg(this,u):this.i.length==0||ro(this.h)||wg(this))};function wg(u,g){var _;g?_=g.l:_=u.V++;let S=Zn(u.J);st(S,"SID",u.M),st(S,"RID",_),st(S,"AID",u.K),Fr(u,S),u.u&&u.o&&Qd(S,u.u,u.o),_=new si(u,u.j,_,u.D+1),u.u===null&&(_.J=u.o),g&&(u.i=g.G.concat(u.i)),g=Zd(u,_,1e3),_.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),$d(u.h,_),Ca(_,S,g)}function Fr(u,g){u.H&&Hs(u.H,function(_,S){st(g,S,_)}),u.l&&Hs({},function(_,S){st(g,S,_)})}function Zd(u,g,_){_=Math.min(u.i.length,_);let S=u.l?d(u.l.Ka,u.l,u):null;e:{var O=u.i;let ge=-1;for(;;){let l=["count="+_];ge==-1?_>0?(ge=O[0].g,l.push("ofs="+ge)):ge=0:l.push("ofs="+ge);let f=!0;for(let m=0;m<_;m++){var L=O[m].g;let D=O[m].map;if(L-=ge,L<0)ge=Math.max(0,O[m].g-100),f=!1;else try{L="req"+L+"_"||"";try{var J=D instanceof Map?D:Object.entries(D);for(let[F,U]of J){let K=U;a(U)&&(K=qs(U)),l.push(L+F+"="+encodeURIComponent(K))}}catch(F){throw l.push(L+"type="+encodeURIComponent("_badmap")),F}}catch{S&&S(D)}}if(f){J=l.join("&");break e}}J=void 0}return u=u.i.splice(0,_),g.G=u,J}function El(u){if(!u.g&&!u.v){u.Y=1;var g=u.Da;Je||v(),pe||(Je(),pe=!0),T.add(g,u),u.A=0}}function uo(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=Xn(d(u.Da,u),ho(u,u.A)),u.A++,!0)}n.Da=function(){if(this.v=null,Ma(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=Xn(d(this.Wa,this),u)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Xt(10),Yi(this),Ma(this))};function Il(u){u.B!=null&&(o.clearTimeout(u.B),u.B=null)}function Ma(u){u.g=new si(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var g=Zn(u.na);st(g,"RID","rpc"),st(g,"SID",u.M),st(g,"AID",u.K),st(g,"CI",u.F?"0":"1"),!u.F&&u.ia&&st(g,"TO",u.ia),st(g,"TYPE","xmlhttp"),Fr(u,g),u.u&&u.o&&Qd(g,u.u,u.o),u.O&&(u.g.H=u.O);var _=u.g;u=u.ba,_.M=1,_.A=Aa(Zn(g)),_.u=null,_.R=!0,Ta(_,u)}n.Va=function(){this.C!=null&&(this.C=null,Yi(this),uo(this),Xt(19))};function bl(u){u.C!=null&&(o.clearTimeout(u.C),u.C=null)}function eh(u,g){var _=null;if(u.g==g){bl(u),Il(u),u.g=null;var S=2}else if(Da(u.h,g))_=g.G,Hd(u.h,g),S=1;else return;if(u.I!=0){if(g.o)if(S==1){_=g.u?g.u.length:0,g=Date.now()-g.F;var O=u.D;S=Ws(),Yt(S,new ul(S,_)),Gn(u)}else El(u);else if(O=g.m,O==3||O==0&&g.X>0||!(S==1&&vg(u,g)||S==2&&uo(u)))switch(_&&_.length>0&&(g=u.h,g.i=g.i.concat(_)),O){case 1:li(u,5);break;case 4:li(u,10);break;case 3:li(u,6);break;default:li(u,2)}}}function ho(u,g){let _=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(_*=2),_*g}function li(u,g){if(u.j.info("Error code "+g),g==2){var _=d(u.bb,u),S=u.Ua;let O=!S;S=new mr(S||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||io(S,"https"),Aa(S),O?ci(S.toString(),_):fg(S.toString(),_)}else Xt(2);u.I=0,u.l&&u.l.pa(g),th(u),Xd(u)}n.bb=function(u){u?(this.j.info("Successfully pinged google.com"),Xt(2)):(this.j.info("Failed to ping google.com"),Xt(1))};function th(u){if(u.I=0,u.ja=[],u.l){let g=qd(u.h);(g.length!=0||u.i.length!=0)&&(k(u.ja,g),k(u.ja,u.i),u.h.i.length=0,I(u.i),u.i.length=0),u.l.oa()}}function Cl(u,g,_){var S=_ instanceof mr?Zn(_):new mr(_);if(S.g!="")g&&(S.g=g+"."+S.g),Sa(S,S.u);else{var O=o.location;S=O.protocol,g=g?g+"."+O.hostname:O.hostname,O=+O.port;let L=new mr(null);S&&io(L,S),g&&(L.g=g),O&&Sa(L,O),_&&(L.h=_),S=L}return _=u.G,g=u.wa,_&&g&&st(S,_,g),st(S,"VER",u.ka),Fr(u,S),S}function Tl(u,g,_){if(g&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return g=u.Aa&&!u.ma?new ot(new Or({ab:_})):new ot(u.ma),g.Fa(u.L),g}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function nh(){}n=nh.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Ji(){}Ji.prototype.g=function(u,g){return new bn(u,g)};function bn(u,g){Qt.call(this),this.g=new Jd(g),this.l=u,this.h=g&&g.messageUrlParams||null,u=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(u?u["X-WebChannel-Content-Type"]=g.messageContentType:u={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.sa&&(u?u["X-WebChannel-Client-Profile"]=g.sa:u={"X-WebChannel-Client-Profile":g.sa}),this.g.U=u,(u=g&&g.Qb)&&!w(u)&&(this.g.u=u),this.A=g&&g.supportsCrossDomainXhr||!1,this.v=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!w(g)&&(this.g.G=g,u=this.h,u!==null&&g in u&&(u=this.h,g in u&&delete u[g])),this.j=new Xi(this)}p(bn,Qt),bn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},bn.prototype.close=function(){wl(this.g)},bn.prototype.o=function(u){var g=this.g;if(typeof u=="string"){var _={};_.__data__=u,u=_}else this.v&&(_={},_.__data__=qs(u),u=_);g.i.push(new ag(g.Ya++,u)),g.I==3&&Gn(g)},bn.prototype.N=function(){this.g.l=null,delete this.j,wl(this.g),delete this.g,bn.Z.N.call(this)};function rh(u){ll.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var g=u.__sm__;if(g){e:{for(let _ in g){u=_;break e}u=void 0}(this.i=u)&&(u=this.i,g=g!==null&&u in g?g[u]:void 0),this.data=g}else this.data=u}p(rh,ll);function ui(){wa.call(this),this.status=1}p(ui,wa);function Xi(u){this.g=u}p(Xi,nh),Xi.prototype.ra=function(){Yt(this.g,"a")},Xi.prototype.qa=function(u){Yt(this.g,new rh(u))},Xi.prototype.pa=function(u){Yt(this.g,new ui)},Xi.prototype.oa=function(){Yt(this.g,"b")},Ji.prototype.createWebChannel=Ji.prototype.g,bn.prototype.send=bn.prototype.o,bn.prototype.open=bn.prototype.m,bn.prototype.close=bn.prototype.close,iT=bs.createWebChannelTransport=function(){return new Ji},rT=bs.getStatEventTarget=function(){return Ws()},nT=bs.Event=Ki,P_=bs.Stat={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ea.NO_ERROR=0,Ea.TIMEOUT=8,Ea.HTTP_ERROR=6,Kf=bs.ErrorCode=Ea,Js.COMPLETE="complete",tT=bs.EventType=Js,zs.EventType=Gs,Gs.OPEN="a",Gs.CLOSE="b",Gs.ERROR="c",Gs.MESSAGE="d",Qt.prototype.listen=Qt.prototype.J,Du=bs.WebChannel=zs,TW=bs.FetchXmlHttpFactory=Or,ot.prototype.listenOnce=ot.prototype.K,ot.prototype.getLastError=ot.prototype.Ha,ot.prototype.getLastErrorCode=ot.prototype.ya,ot.prototype.getStatus=ot.prototype.ca,ot.prototype.getResponseJson=ot.prototype.La,ot.prototype.getResponseText=ot.prototype.la,ot.prototype.send=ot.prototype.ea,ot.prototype.setWithCredentials=ot.prototype.Fa,eT=bs.XhrIo=ot}).apply(typeof M_<"u"?M_:typeof self<"u"?self:typeof window<"u"?window:{});var F2="@firebase/firestore",V2="4.9.2";var pn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};pn.UNAUTHENTICATED=new pn(null),pn.GOOGLE_CREDENTIALS=new pn("google-credentials-uid"),pn.FIRST_PARTY=new pn("first-party-uid"),pn.MOCK_USER=new pn("mock-user");var Ku="12.3.0";var kc=new Cu("@firebase/firestore");function Su(){return kc.logLevel}function ie(n,...e){if(kc.logLevel<=$e.DEBUG){let t=e.map(YD);kc.debug(`Firestore (${Ku}): ${n}`,...t)}}function Ss(n,...e){if(kc.logLevel<=$e.ERROR){let t=e.map(YD);kc.error(`Firestore (${Ku}): ${n}`,...t)}}function Ou(n,...e){if(kc.logLevel<=$e.WARN){let t=e.map(YD);kc.warn(`Firestore (${Ku}): ${n}`,...t)}}function YD(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function de(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,AF(n,r,t)}function AF(n,e,t){let r=`FIRESTORE (${Ku}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Ss(r),new Error(r)}function rt(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||AF(e,i,r)}function Ie(n,e){return n}var H={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},te=class extends ys{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Cs=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var B_=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},uT=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(pn.UNAUTHENTICATED))}shutdown(){}},dT=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},hT=class{constructor(e){this.t=e,this.currentUser=pn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){rt(this.o===void 0,42304);let r=this.i,i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve(),s=new Cs;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Cs,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let c=s;e.enqueueRetryable(async()=>{await c.promise,await i(this.currentUser)})},a=c=>{ie("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(ie("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Cs)}},0),o()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(ie("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(rt(typeof r.accessToken=="string",31837,{l:r}),new B_(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return rt(e===null||typeof e=="string",2055,{h:e}),new pn(e)}},fT=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=pn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},pT=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new fT(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(pn.FIRST_PARTY))}shutdown(){}invalidateToken(){}},$_=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},gT=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,UO(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){rt(this.o===void 0,3512);let r=s=>{s.error!=null&&ie("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.m;return this.m=s.token,ie("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{ie("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.V.getImmediate({optional:!0});s?i(s):ie("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new $_(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(rt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new $_(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function DW(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var ep=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=DW(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%62))}return r}};function Ve(n,e){return n<e?-1:n>e?1:0}function mT(n,e){let t=Math.min(n.length,e.length);for(let r=0;r<t;r++){let i=n.charAt(r),s=e.charAt(r);if(i!==s)return sT(i)===sT(s)?Ve(i,s):sT(i)?1:-1}return Ve(n.length,e.length)}var SW=55296,AW=57343;function sT(n){let e=n.charCodeAt(0);return e>=SW&&e<=AW}function Fu(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var L2="__name__",H_=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&de(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&de(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let s=n.compareSegments(e.get(i),t.get(i));if(s!==0)return s}return Ve(e.length,t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):mT(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Is.fromString(e.substring(4,e.length-2))}},yt=class n extends H_{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new te(H.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},xW=/^[_a-zA-Z][_a-zA-Z0-9]*$/,hr=class n extends H_{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return xW.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===L2}static keyField(){return new n([L2])}static fromServerFormat(e){let t=[],r="",i=0,s=()=>{if(r.length===0)throw new te(H.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},o=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new te(H.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new te(H.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new te(H.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var le=class n{constructor(e){this.path=e}static fromPath(e){return new n(yt.fromString(e))}static fromName(e){return new n(yt.fromString(e).popFirst(5))}static empty(){return new n(yt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&yt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return yt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new yt(e.slice()))}};function xF(n,e,t){if(!t)throw new te(H.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function RW(n,e,t,r){if(e===!0&&r===!0)throw new te(H.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function U2(n){if(!le.isDocumentKey(n))throw new te(H.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function j2(n){if(le.isDocumentKey(n))throw new te(H.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function RF(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function wv(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":de(12329,{type:typeof n})}function Ts(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new te(H.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=wv(n);throw new te(H.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Bt(n,e){let t={typeString:n};return e&&(t.value=e),t}function hp(n,e){if(!RF(n))throw new te(H.INVALID_ARGUMENT,"JSON must be an object");let t;for(let r in e)if(e[r]){let i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}let o=n[r];if(i&&typeof o!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&o!==s.value){t=`Expected '${r}' field to equal '${s.value}'`;break}}if(t)throw new te(H.INVALID_ARGUMENT,t);return!0}var B2=-62135596800,$2=1e6,$t=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*$2);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new te(H.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new te(H.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<B2)throw new te(H.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new te(H.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/$2}_compareTo(e){return this.seconds===e.seconds?Ve(this.nanoseconds,e.nanoseconds):Ve(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:n._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(hp(e,n._jsonSchema))return new n(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-B2;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};$t._jsonSchemaVersion="firestore/timestamp/1.0",$t._jsonSchema={type:Bt("string",$t._jsonSchemaVersion),seconds:Bt("number"),nanoseconds:Bt("number")};var De=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new $t(0,0))}static max(){return new n(new $t(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var tp=-1,yT=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};yT.UNKNOWN_ID=-1;function kW(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=De.fromTimestamp(r===1e9?new $t(t+1,0):new $t(t,r));return new Nc(i,le.empty(),e)}function NW(n){return new Nc(n.readTime,n.key,tp)}var Nc=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(De.min(),le.empty(),tp)}static max(){return new n(De.max(),le.empty(),tp)}};function MW(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=le.comparator(n.documentKey,e.documentKey),t!==0?t:Ve(n.largestBatchId,e.largestBatchId))}var PW="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",_T=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};async function Qu(n){if(n.code!==H.FAILED_PRECONDITION||n.message!==PW)throw n;ie("LocalStore","Unexpectedly lost primary lease")}var G=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&de(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&t()},c=>r(c))}),o=!0,s===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let s=e.length,o=new Array(s),a=0;for(let c=0;c<s;c++){let d=c;t(e[d]).next(h=>{o[d]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,t){return new n((r,i)=>{let s=()=>{e()===!0?t().next(()=>{s()},i):r()};s()})}};function OW(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Yu(n){return n.name==="IndexedDbTransactionError"}var JD=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>r.writeSequenceNumber(i))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.ue&&this.ue(t),t}}n.ce=-1;return n})(),XD=-1;function Ev(n){return n==null}function np(n){return n===0&&1/n==-1/0}function FW(n){return typeof n=="number"&&Number.isInteger(n)&&!np(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var kF="";function VW(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=H2(e)),e=LW(n.get(t),e);return H2(e)}function LW(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let s=n.charAt(i);switch(s){case"\0":t+="";break;case kF:t+="";break;default:t+=s}}return t}function H2(n){return n+kF+""}var UW="remoteDocuments",NF="owner";var MF="mutationQueues";var PF="mutations";var OF="documentMutations",jW="remoteDocumentsV14";var FF="remoteDocumentGlobal";var VF="targets";var LF="targetDocuments";var UF="targetGlobal",jF="collectionParents";var BF="clientMetadata";var $F="bundles";var HF="namedQueries";var BW="indexConfiguration";var $W="indexState";var HW="indexEntries";var qF="documentOverlays";var qW="globals";var zW=[MF,PF,OF,UW,VF,NF,UF,LF,BF,FF,jF,$F,HF],mve=[...zW,qF],GW=[MF,PF,OF,jW,VF,NF,UF,LF,BF,FF,jF,$F,HF,qF],WW=GW,KW=[...WW,BW,$W,HW];var yve=[...KW,qW];function q2(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function ea(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function zF(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Ct=class n{constructor(e,t){this.comparator=e,this.root=t||Mi.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Mi.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Mi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ku(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ku(this.root,e,this.comparator,!1)}getReverseIterator(){return new ku(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ku(this.root,e,this.comparator,!0)}},ku=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Mi=class n{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=s??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new n(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw de(43730,{key:this.key,value:this.value});if(this.right.isRed())throw de(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw de(27949);return e+(this.isRed()?0:1)}};Mi.EMPTY=null,Mi.RED=!0,Mi.BLACK=!1;Mi.EMPTY=new class{constructor(){this.size=0}get key(){throw de(57766)}get value(){throw de(16141)}get color(){throw de(16727)}get left(){throw de(29726)}get right(){throw de(36894)}copy(e,t,r,i,s){return this}insert(e,t,r){return new Mi(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var gn=class n{constructor(e){this.comparator=e,this.data=new Ct(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new q_(this.data.getIterator())}getIteratorFrom(e){return new q_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},q_=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Dr=class n{constructor(e){this.fields=e,e.sort(hr.comparator)}static empty(){return new n([])}unionWith(e){let t=new gn(hr.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Fu(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var z_=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Nn=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=(function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new z_("Invalid base64 string: "+s):s}})(e);return new n(t)}static fromUint8Array(e){let t=(function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s})(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ve(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Nn.EMPTY_BYTE_STRING=new Nn("");var QW=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function As(n){if(rt(!!n,39018),typeof n=="string"){let e=0,t=QW.exec(n);if(rt(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:mt(n.seconds),nanos:mt(n.nanos)}}function mt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function xs(n){return typeof n=="string"?Nn.fromBase64String(n):Nn.fromUint8Array(n)}var GF="server_timestamp",WF="__type__",KF="__previous_value__",QF="__local_write_time__";function ZD(n){return(n?.mapValue?.fields||{})[WF]?.stringValue===GF}function Iv(n){let e=n.mapValue.fields[KF];return ZD(e)?Iv(e):e}function rp(n){let e=As(n.mapValue.fields[QF].timestampValue);return new $t(e.seconds,e.nanos)}var vT=class{constructor(e,t,r,i,s,o,a,c,d,h){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=d,this.isUsingEmulator=h}},G_="(default)",W_=class n{constructor(e,t){this.projectId=e,this.database=t||G_}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===G_}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var eS="__type__",YF="__max__",O_={mapValue:{fields:{__type__:{stringValue:YF}}}},tS="__vector__",Vu="value";function Qo(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?ZD(n)?4:XF(n)?9007199254740991:JF(n)?10:11:de(28295,{value:n})}function Fi(n,e){if(n===e)return!0;let t=Qo(n);if(t!==Qo(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return rp(n).isEqual(rp(e));case 3:return(function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=As(i.timestampValue),a=As(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(i,s){return xs(i.bytesValue).isEqual(xs(s.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(i,s){return mt(i.geoPointValue.latitude)===mt(s.geoPointValue.latitude)&&mt(i.geoPointValue.longitude)===mt(s.geoPointValue.longitude)})(n,e);case 2:return(function(i,s){if("integerValue"in i&&"integerValue"in s)return mt(i.integerValue)===mt(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=mt(i.doubleValue),a=mt(s.doubleValue);return o===a?np(o)===np(a):isNaN(o)&&isNaN(a)}return!1})(n,e);case 9:return Fu(n.arrayValue.values||[],e.arrayValue.values||[],Fi);case 10:case 11:return(function(i,s){let o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(q2(o)!==q2(a))return!1;for(let c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!Fi(o[c],a[c])))return!1;return!0})(n,e);default:return de(52216,{left:n})}}function ip(n,e){return(n.values||[]).find(t=>Fi(t,e))!==void 0}function Lu(n,e){if(n===e)return 0;let t=Qo(n),r=Qo(e);if(t!==r)return Ve(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ve(n.booleanValue,e.booleanValue);case 2:return(function(s,o){let a=mt(s.integerValue||s.doubleValue),c=mt(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1})(n,e);case 3:return z2(n.timestampValue,e.timestampValue);case 4:return z2(rp(n),rp(e));case 5:return mT(n.stringValue,e.stringValue);case 6:return(function(s,o){let a=xs(s),c=xs(o);return a.compareTo(c)})(n.bytesValue,e.bytesValue);case 7:return(function(s,o){let a=s.split("/"),c=o.split("/");for(let d=0;d<a.length&&d<c.length;d++){let h=Ve(a[d],c[d]);if(h!==0)return h}return Ve(a.length,c.length)})(n.referenceValue,e.referenceValue);case 8:return(function(s,o){let a=Ve(mt(s.latitude),mt(o.latitude));return a!==0?a:Ve(mt(s.longitude),mt(o.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return G2(n.arrayValue,e.arrayValue);case 10:return(function(s,o){let a=s.fields||{},c=o.fields||{},d=a[Vu]?.arrayValue,h=c[Vu]?.arrayValue,p=Ve(d?.values?.length||0,h?.values?.length||0);return p!==0?p:G2(d,h)})(n.mapValue,e.mapValue);case 11:return(function(s,o){if(s===O_.mapValue&&o===O_.mapValue)return 0;if(s===O_.mapValue)return 1;if(o===O_.mapValue)return-1;let a=s.fields||{},c=Object.keys(a),d=o.fields||{},h=Object.keys(d);c.sort(),h.sort();for(let p=0;p<c.length&&p<h.length;++p){let y=mT(c[p],h[p]);if(y!==0)return y;let I=Lu(a[c[p]],d[h[p]]);if(I!==0)return I}return Ve(c.length,h.length)})(n.mapValue,e.mapValue);default:throw de(23264,{he:t})}}function z2(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Ve(n,e);let t=As(n),r=As(e),i=Ve(t.seconds,r.seconds);return i!==0?i:Ve(t.nanos,r.nanos)}function G2(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let s=Lu(t[i],r[i]);if(s)return s}return Ve(t.length,r.length)}function Uu(n){return wT(n)}function wT(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){let r=As(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return xs(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return le.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",i=!0;for(let s of t.values||[])i?i=!1:r+=",",r+=wT(s);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){let r=Object.keys(t.fields||{}).sort(),i="{",s=!0;for(let o of r)s?s=!1:i+=",",i+=`${o}:${wT(t.fields[o])}`;return i+"}"})(n.mapValue):de(61005,{value:n})}function L_(n){switch(Qo(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=Iv(n);return e?16+L_(e):16;case 5:return 2*n.stringValue.length;case 6:return xs(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce((i,s)=>i+L_(s),0)})(n.arrayValue);case 10:case 11:return(function(r){let i=0;return ea(r.fields,(s,o)=>{i+=s.length+L_(o)}),i})(n.mapValue);default:throw de(13486,{value:n})}}function W2(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function ET(n){return!!n&&"integerValue"in n}function nS(n){return!!n&&"arrayValue"in n}function K2(n){return!!n&&"nullValue"in n}function Q2(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function U_(n){return!!n&&"mapValue"in n}function JF(n){return(n?.mapValue?.fields||{})[eS]?.stringValue===tS}function Yf(n){if(n.geoPointValue)return{geoPointValue:z({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:z({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return ea(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Yf(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Yf(n.arrayValue.values[t]);return e}return z({},n)}function XF(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===YF}var vve={mapValue:{fields:{[eS]:{stringValue:tS},[Vu]:{arrayValue:{}}}}};var dr=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!U_(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Yf(t)}setAll(e){let t=hr.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){let c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=a.popLast()}o?r[a.lastSegment()]=Yf(o):i.push(a.lastSegment())});let s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){let t=this.field(e.popLast());U_(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Fi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];U_(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){ea(t,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new n(Yf(this.value))}};function ZF(n){let e=[];return ea(n.fields,(t,r)=>{let i=new hr([t]);if(U_(r)){let s=ZF(r.mapValue).fields;if(s.length===0)e.push(i);else for(let o of s)e.push(i.child(o))}else e.push(i)}),new Dr(e)}var ei=class n{constructor(e,t,r,i,s,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new n(e,0,De.min(),De.min(),De.min(),dr.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,De.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,De.min(),De.min(),dr.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,De.min(),De.min(),dr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(De.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=dr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=dr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=De.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var ju=class{constructor(e,t){this.position=e,this.inclusive=t}};function Y2(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let s=e[i],o=n.position[i];if(s.field.isKeyField()?r=le.comparator(le.fromName(o.referenceValue),t.key):r=Lu(o,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function J2(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Fi(n.position[t],e.position[t]))return!1;return!0}var Mc=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function YW(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var K_=class{},jt=class n extends K_{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new bT(e,t,r):t==="array-contains"?new DT(e,r):t==="in"?new ST(e,r):t==="not-in"?new AT(e,r):t==="array-contains-any"?new xT(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new CT(e,r):new TT(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Lu(t,this.value)):t!==null&&Qo(this.value)===Qo(t)&&this.matchesComparison(Lu(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return de(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},ti=class n extends K_{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new n(e,t)}matches(e){return eV(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}};function eV(n){return n.op==="and"}function tV(n){return JW(n)&&eV(n)}function JW(n){for(let e of n.filters)if(e instanceof ti)return!1;return!0}function IT(n){if(n instanceof jt)return n.field.canonicalString()+n.op.toString()+Uu(n.value);if(tV(n))return n.filters.map(e=>IT(e)).join(",");{let e=n.filters.map(t=>IT(t)).join(",");return`${n.op}(${e})`}}function nV(n,e){return n instanceof jt?(function(r,i){return i instanceof jt&&r.op===i.op&&r.field.isEqual(i.field)&&Fi(r.value,i.value)})(n,e):n instanceof ti?(function(r,i){return i instanceof ti&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&nV(o,i.filters[a]),!0):!1})(n,e):void de(19439)}function rV(n){return n instanceof jt?(function(t){return`${t.field.canonicalString()} ${t.op} ${Uu(t.value)}`})(n):n instanceof ti?(function(t){return t.op.toString()+" {"+t.getFilters().map(rV).join(" ,")+"}"})(n):"Filter"}var bT=class extends jt{constructor(e,t,r){super(e,t,r),this.key=le.fromName(r.referenceValue)}matches(e){let t=le.comparator(e.key,this.key);return this.matchesComparison(t)}},CT=class extends jt{constructor(e,t){super(e,"in",t),this.keys=iV("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},TT=class extends jt{constructor(e,t){super(e,"not-in",t),this.keys=iV("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function iV(n,e){return(e.arrayValue?.values||[]).map(t=>le.fromName(t.referenceValue))}var DT=class extends jt{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return nS(t)&&ip(t.arrayValue,this.value)}},ST=class extends jt{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&ip(this.value.arrayValue,t)}},AT=class extends jt{constructor(e,t){super(e,"not-in",t)}matches(e){if(ip(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!ip(this.value.arrayValue,t)}},xT=class extends jt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!nS(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>ip(this.value.arrayValue,r))}};var RT=class{constructor(e,t=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.Te=null}};function X2(n,e=null,t=[],r=[],i=null,s=null,o=null){return new RT(n,e,t,r,i,s,o)}function rS(n){let e=Ie(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>IT(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>(function(s){return s.field.canonicalString()+s.dir})(r)).join(","),Ev(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Uu(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Uu(r)).join(",")),e.Te=t}return e.Te}function iS(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!YW(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!nV(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!J2(n.startAt,e.startAt)&&J2(n.endAt,e.endAt)}function kT(n){return le.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var Yo=class{constructor(e,t=null,r=[],i=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}};function XW(n,e,t,r,i,s,o,a){return new Yo(n,e,t,r,i,s,o,a)}function sS(n){return new Yo(n)}function Z2(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function sV(n){return n.collectionGroup!==null}function Jf(n){let e=Ie(n);if(e.Ie===null){e.Ie=[];let t=new Set;for(let s of e.explicitOrderBy)e.Ie.push(s),t.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new gn(hr.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(d=>{d.isInequality()&&(a=a.add(d.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.Ie.push(new Mc(s,r))}),t.has(hr.keyField().canonicalString())||e.Ie.push(new Mc(hr.keyField(),r))}return e.Ie}function Pi(n){let e=Ie(n);return e.Ee||(e.Ee=ZW(e,Jf(n))),e.Ee}function ZW(n,e){if(n.limitType==="F")return X2(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new Mc(i.field,s)});let t=n.endAt?new ju(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new ju(n.startAt.position,n.startAt.inclusive):null;return X2(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function NT(n,e){let t=n.filters.concat([e]);return new Yo(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function MT(n,e,t){return new Yo(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function bv(n,e){return iS(Pi(n),Pi(e))&&n.limitType===e.limitType}function oV(n){return`${rS(Pi(n))}|lt:${n.limitType}`}function Au(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>rV(i)).join(", ")}]`),Ev(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>(function(o){return`${o.field.canonicalString()} (${o.dir})`})(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Uu(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Uu(i)).join(",")),`Target(${r})`})(Pi(n))}; limitType=${n.limitType})`}function Cv(n,e){return e.isFoundDocument()&&(function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):le.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)})(n,e)&&(function(r,i){for(let s of Jf(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0})(n,e)&&(function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0})(n,e)&&(function(r,i){return!(r.startAt&&!(function(o,a,c){let d=Y2(o,a,c);return o.inclusive?d<=0:d<0})(r.startAt,Jf(r),i)||r.endAt&&!(function(o,a,c){let d=Y2(o,a,c);return o.inclusive?d>=0:d>0})(r.endAt,Jf(r),i))})(n,e)}function eK(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function aV(n){return(e,t)=>{let r=!1;for(let i of Jf(n)){let s=tK(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function tK(n,e,t){let r=n.field.isKeyField()?le.comparator(e.key,t.key):(function(s,o,a){let c=o.data.field(s),d=a.data.field(s);return c!==null&&d!==null?Lu(c,d):de(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return de(19790,{direction:n.dir})}}var Rs=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ea(this.inner,(t,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return zF(this.inner)}size(){return this.innerSize}};var nK=new Ct(le.comparator);function ks(){return nK}var cV=new Ct(le.comparator);function Qf(...n){let e=cV;for(let t of n)e=e.insert(t.key,t);return e}function lV(n){let e=cV;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Sc(){return Xf()}function uV(){return Xf()}function Xf(){return new Rs(n=>n.toString(),(n,e)=>n.isEqual(e))}var rK=new Ct(le.comparator),iK=new gn(le.comparator);function Le(...n){let e=iK;for(let t of n)e=e.add(t);return e}var sK=new gn(Ve);function oK(){return sK}function oS(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:np(e)?"-0":e}}function dV(n){return{integerValue:""+n}}function aK(n,e){return FW(e)?dV(e):oS(n,e)}var Bu=class{constructor(){this._=void 0}};function cK(n,e,t){return n instanceof $u?(function(i,s){let o={fields:{[WF]:{stringValue:GF},[QF]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&ZD(s)&&(s=Iv(s)),s&&(o.fields[KF]=s),{mapValue:o}})(t,e):n instanceof Pc?fV(n,e):n instanceof Oc?pV(n,e):(function(i,s){let o=hV(i,s),a=eF(o)+eF(i.Ae);return ET(o)&&ET(i.Ae)?dV(a):oS(i.serializer,a)})(n,e)}function lK(n,e,t){return n instanceof Pc?fV(n,e):n instanceof Oc?pV(n,e):t}function hV(n,e){return n instanceof Hu?(function(r){return ET(r)||(function(s){return!!s&&"doubleValue"in s})(r)})(e)?e:{integerValue:0}:null}var $u=class extends Bu{},Pc=class extends Bu{constructor(e){super(),this.elements=e}};function fV(n,e){let t=gV(e);for(let r of n.elements)t.some(i=>Fi(i,r))||t.push(r);return{arrayValue:{values:t}}}var Oc=class extends Bu{constructor(e){super(),this.elements=e}};function pV(n,e){let t=gV(e);for(let r of n.elements)t=t.filter(i=>!Fi(i,r));return{arrayValue:{values:t}}}var Hu=class extends Bu{constructor(e,t){super(),this.serializer=e,this.Ae=t}};function eF(n){return mt(n.integerValue||n.doubleValue)}function gV(n){return nS(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function uK(n,e){return n.field.isEqual(e.field)&&(function(r,i){return r instanceof Pc&&i instanceof Pc||r instanceof Oc&&i instanceof Oc?Fu(r.elements,i.elements,Fi):r instanceof Hu&&i instanceof Hu?Fi(r.Ae,i.Ae):r instanceof $u&&i instanceof $u})(n.transform,e.transform)}var PT=class{constructor(e,t){this.version=e,this.transformResults=t}},Ds=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function j_(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var qu=class{};function mV(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new sp(n.key,Ds.none()):new Fc(n.key,n.data,Ds.none());{let t=n.data,r=dr.empty(),i=new gn(hr.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Vi(n.key,r,new Dr(i.toArray()),Ds.none())}}function dK(n,e,t){n instanceof Fc?(function(i,s,o){let a=i.value.clone(),c=nF(i.fieldTransforms,s,o.transformResults);a.setAll(c),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()})(n,e,t):n instanceof Vi?(function(i,s,o){if(!j_(i.precondition,s))return void s.convertToUnknownDocument(o.version);let a=nF(i.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(yV(i)),c.setAll(a),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()})(n,e,t):(function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()})(0,e,t)}function Zf(n,e,t,r){return n instanceof Fc?(function(s,o,a,c){if(!j_(s.precondition,o))return a;let d=s.value.clone(),h=rF(s.fieldTransforms,c,o);return d.setAll(h),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null})(n,e,t,r):n instanceof Vi?(function(s,o,a,c){if(!j_(s.precondition,o))return a;let d=rF(s.fieldTransforms,c,o),h=o.data;return h.setAll(yV(s)),h.setAll(d),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(p=>p.field))})(n,e,t,r):(function(s,o,a){return j_(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a})(n,e,t)}function hK(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),s=hV(r.transform,i||null);s!=null&&(t===null&&(t=dr.empty()),t.set(r.field,s))}return t||null}function tF(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Fu(r,i,(s,o)=>uK(s,o))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var Fc=class extends qu{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Vi=class extends qu{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function yV(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function nF(n,e,t){let r=new Map;rt(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let i=0;i<t.length;i++){let s=n[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,lK(o,a,t[i]))}return r}function rF(n,e,t){let r=new Map;for(let i of n){let s=i.transform,o=t.data.field(i.field);r.set(i.field,cK(s,o,e))}return r}var sp=class extends qu{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},OT=class extends qu{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var FT=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&dK(s,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=Zf(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=Zf(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=uV();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=t.has(i.key)?null:a;let c=mV(o,a);c!==null&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(De.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Le())}isEqual(e){return this.batchId===e.batchId&&Fu(this.mutations,e.mutations,(t,r)=>tF(t,r))&&Fu(this.baseMutations,e.baseMutations,(t,r)=>tF(t,r))}},VT=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){rt(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=(function(){return rK})(),s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new n(e,t,r,i)}};var LT=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var UT=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var Lt,He;function fK(n){switch(n){case H.OK:return de(64938);case H.CANCELLED:case H.UNKNOWN:case H.DEADLINE_EXCEEDED:case H.RESOURCE_EXHAUSTED:case H.INTERNAL:case H.UNAVAILABLE:case H.UNAUTHENTICATED:return!1;case H.INVALID_ARGUMENT:case H.NOT_FOUND:case H.ALREADY_EXISTS:case H.PERMISSION_DENIED:case H.FAILED_PRECONDITION:case H.ABORTED:case H.OUT_OF_RANGE:case H.UNIMPLEMENTED:case H.DATA_LOSS:return!0;default:return de(15467,{code:n})}}function _V(n){if(n===void 0)return Ss("GRPC error has no .code"),H.UNKNOWN;switch(n){case Lt.OK:return H.OK;case Lt.CANCELLED:return H.CANCELLED;case Lt.UNKNOWN:return H.UNKNOWN;case Lt.DEADLINE_EXCEEDED:return H.DEADLINE_EXCEEDED;case Lt.RESOURCE_EXHAUSTED:return H.RESOURCE_EXHAUSTED;case Lt.INTERNAL:return H.INTERNAL;case Lt.UNAVAILABLE:return H.UNAVAILABLE;case Lt.UNAUTHENTICATED:return H.UNAUTHENTICATED;case Lt.INVALID_ARGUMENT:return H.INVALID_ARGUMENT;case Lt.NOT_FOUND:return H.NOT_FOUND;case Lt.ALREADY_EXISTS:return H.ALREADY_EXISTS;case Lt.PERMISSION_DENIED:return H.PERMISSION_DENIED;case Lt.FAILED_PRECONDITION:return H.FAILED_PRECONDITION;case Lt.ABORTED:return H.ABORTED;case Lt.OUT_OF_RANGE:return H.OUT_OF_RANGE;case Lt.UNIMPLEMENTED:return H.UNIMPLEMENTED;case Lt.DATA_LOSS:return H.DATA_LOSS;default:return de(39323,{code:n})}}(He=Lt||(Lt={}))[He.OK=0]="OK",He[He.CANCELLED=1]="CANCELLED",He[He.UNKNOWN=2]="UNKNOWN",He[He.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",He[He.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",He[He.NOT_FOUND=5]="NOT_FOUND",He[He.ALREADY_EXISTS=6]="ALREADY_EXISTS",He[He.PERMISSION_DENIED=7]="PERMISSION_DENIED",He[He.UNAUTHENTICATED=16]="UNAUTHENTICATED",He[He.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",He[He.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",He[He.ABORTED=10]="ABORTED",He[He.OUT_OF_RANGE=11]="OUT_OF_RANGE",He[He.UNIMPLEMENTED=12]="UNIMPLEMENTED",He[He.INTERNAL=13]="INTERNAL",He[He.UNAVAILABLE=14]="UNAVAILABLE",He[He.DATA_LOSS=15]="DATA_LOSS";var pK=null;function gK(){return new TextEncoder}var mK=new Is([4294967295,4294967295],0);function iF(n){let e=gK().encode(n),t=new ZC;return t.update(e),new Uint8Array(t.digest())}function sF(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Is([t,r],0),new Is([i,s],0)]}var jT=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Ac(`Invalid padding: ${t}`);if(r<0)throw new Ac(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ac(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Ac(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Is.fromNumber(this.ge)}ye(e,t,r){let i=e.add(t.multiply(Is.fromNumber(r)));return i.compare(mK)===1&&(i=new Is([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;let t=iF(e),[r,i]=sF(t);for(let s=0;s<this.hashCount;s++){let o=this.ye(r,i,s);if(!this.we(o))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new n(s,i,t);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.ge===0)return;let t=iF(e),[r,i]=sF(t);for(let s=0;s<this.hashCount;s++){let o=this.ye(r,i,s);this.Se(o)}}Se(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},Ac=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Q_=class n{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,op.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(De.min(),i,new Ct(Ve),ks(),Le())}},op=class n{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,Le(),Le(),Le())}};var Nu=class{constructor(e,t,r,i){this.be=e,this.removedTargetIds=t,this.key=r,this.De=i}},Y_=class{constructor(e,t){this.targetId=e,this.Ce=t}},J_=class{constructor(e,t,r=Nn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},X_=class{constructor(){this.ve=0,this.Fe=oF(),this.Me=Nn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Le(),t=Le(),r=Le();return this.Fe.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:de(38017,{changeType:s})}}),new op(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=oF()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,rt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}},BT=class{constructor(e){this.Ge=e,this.ze=new Map,this.je=ks(),this.Je=F_(),this.He=F_(),this.Ye=new Ct(Ve)}Ze(e){for(let t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(let t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,t=>{let r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:de(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach((r,i)=>{this.rt(i)&&t(i)})}st(e){let t=e.targetId,r=e.Ce.count,i=this.ot(t);if(i){let s=i.target;if(kT(s))if(r===0){let o=new le(s.path);this.et(t,o,ei.newNoDocument(o,De.min()))}else rt(r===1,20013,{expectedCount:r});else{let o=this._t(t);if(o!==r){let a=this.ut(e),c=a?this.ct(a,e,o):1;if(c!==0){this.it(t);let d=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,d)}pK?.lt((function(h,p,y,I,k){let P={localCacheCount:h,existenceFilterCount:p.count,databaseId:y.database,projectId:y.projectId},M=p.unchangedNames;return M&&(P.bloomFilter={applied:k===0,hashCount:M?.hashCount??0,bitmapLength:M?.bits?.bitmap?.length??0,padding:M?.bits?.padding??0,mightContain:$=>I?.mightContain($)??!1}),P})(o,e.Ce,this.Ge.ht(),a,c))}}}}ut(e){let t=e.Ce.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t,o,a;try{o=xs(r).toUint8Array()}catch(c){if(c instanceof z_)return Ou("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new jT(o,i,s)}catch(c){return Ou(c instanceof Ac?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.ge===0?null:a}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){let r=this.Ge.getRemoteKeysForTarget(t),i=0;return r.forEach(s=>{let o=this.Ge.ht(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.et(t,s,null),i++)}),i}Tt(e){let t=new Map;this.ze.forEach((s,o)=>{let a=this.ot(o);if(a){if(s.current&&kT(a.target)){let c=new le(a.target.path);this.It(c).has(o)||this.Et(o,c)||this.et(o,c,ei.newNoDocument(c,e))}s.Be&&(t.set(o,s.ke()),s.qe())}});let r=Le();this.He.forEach((s,o)=>{let a=!0;o.forEachWhile(c=>{let d=this.ot(c);return!d||d.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.je.forEach((s,o)=>o.setReadTime(e));let i=new Q_(e,t,this.Ye,this.je,r);return this.je=ks(),this.Je=F_(),this.He=F_(),this.Ye=new Ct(Ve),i}Xe(e,t){if(!this.rt(e))return;let r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;let i=this.nt(e);this.Et(e,t)?i.Qe(t,1):i.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){let t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new X_,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new gn(Ve),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new gn(Ve),this.Je=this.Je.insert(e,t)),t}rt(e){let t=this.ot(e)!==null;return t||ie("WatchChangeAggregator","Detected inactive target",e),t}ot(e){let t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new X_),this.Ge.getRemoteKeysForTarget(e).forEach(t=>{this.et(e,t,null)})}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}};function F_(){return new Ct(le.comparator)}function oF(){return new Ct(le.comparator)}var yK={asc:"ASCENDING",desc:"DESCENDING"},_K={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},vK={and:"AND",or:"OR"},$T=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function HT(n,e){return n.useProto3Json||Ev(e)?e:{value:e}}function Z_(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function vV(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function wK(n,e){return Z_(n,e.toTimestamp())}function Oi(n){return rt(!!n,49232),De.fromTimestamp((function(t){let r=As(t);return new $t(r.seconds,r.nanos)})(n))}function aS(n,e){return qT(n,e).canonicalString()}function qT(n,e){let t=(function(i){return new yt(["projects",i.projectId,"databases",i.database])})(n).child("documents");return e===void 0?t:t.child(e)}function wV(n){let e=yt.fromString(n);return rt(TV(e),10190,{key:e.toString()}),e}function zT(n,e){return aS(n.databaseId,e.path)}function oT(n,e){let t=wV(e);if(t.get(1)!==n.databaseId.projectId)throw new te(H.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new te(H.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new le(IV(t))}function EV(n,e){return aS(n.databaseId,e)}function EK(n){let e=wV(n);return e.length===4?yt.emptyPath():IV(e)}function GT(n){return new yt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function IV(n){return rt(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function aF(n,e,t){return{name:zT(n,e),fields:t.value.mapValue.fields}}function IK(n,e){let t;if("targetChange"in e){e.targetChange;let r=(function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:de(39313,{state:d})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=(function(d,h){return d.useProto3Json?(rt(h===void 0||typeof h=="string",58123),Nn.fromBase64String(h||"")):(rt(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),Nn.fromUint8Array(h||new Uint8Array))})(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&(function(d){let h=d.code===void 0?H.UNKNOWN:_V(d.code);return new te(h,d.message||"")})(o);t=new J_(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=oT(n,r.document.name),s=Oi(r.document.updateTime),o=r.document.createTime?Oi(r.document.createTime):De.min(),a=new dr({mapValue:{fields:r.document.fields}}),c=ei.newFoundDocument(i,s,o,a),d=r.targetIds||[],h=r.removedTargetIds||[];t=new Nu(d,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=oT(n,r.document),s=r.readTime?Oi(r.readTime):De.min(),o=ei.newNoDocument(i,s),a=r.removedTargetIds||[];t=new Nu([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=oT(n,r.document),s=r.removedTargetIds||[];t=new Nu([],s,i,null)}else{if(!("filter"in e))return de(11601,{Rt:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,o=new UT(i,s),a=r.targetId;t=new Y_(a,o)}}return t}function bK(n,e){let t;if(e instanceof Fc)t={update:aF(n,e.key,e.value)};else if(e instanceof sp)t={delete:zT(n,e.key)};else if(e instanceof Vi)t={update:aF(n,e.key,e.data),updateMask:NK(e.fieldMask)};else{if(!(e instanceof OT))return de(16599,{Vt:e.type});t={verify:zT(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>(function(s,o){let a=o.transform;if(a instanceof $u)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Pc)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Oc)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Hu)return{fieldPath:o.field.canonicalString(),increment:a.Ae};throw de(20930,{transform:o.transform})})(0,r))),e.precondition.isNone||(t.currentDocument=(function(i,s){return s.updateTime!==void 0?{updateTime:wK(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:de(27497)})(n,e.precondition)),t}function CK(n,e){return n&&n.length>0?(rt(e!==void 0,14353),n.map(t=>(function(i,s){let o=i.updateTime?Oi(i.updateTime):Oi(s);return o.isEqual(De.min())&&(o=Oi(s)),new PT(o,i.transformResults||[])})(t,e))):[]}function TK(n,e){return{documents:[EV(n,e.path)]}}function DK(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=EV(n,i);let s=(function(d){if(d.length!==0)return CV(ti.create(d,"and"))})(e.filters);s&&(t.structuredQuery.where=s);let o=(function(d){if(d.length!==0)return d.map(h=>(function(y){return{field:xu(y.field),direction:xK(y.dir)}})(h))})(e.orderBy);o&&(t.structuredQuery.orderBy=o);let a=HT(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=(function(d){return{before:d.inclusive,values:d.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(d){return{before:!d.inclusive,values:d.position}})(e.endAt)),{ft:t,parent:i}}function SK(n){let e=EK(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){rt(r===1,65062);let h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];t.where&&(s=(function(p){let y=bV(p);return y instanceof ti&&tV(y)?y.getFilters():[y]})(t.where));let o=[];t.orderBy&&(o=(function(p){return p.map(y=>(function(k){return new Mc(Ru(k.field),(function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(k.direction))})(y))})(t.orderBy));let a=null;t.limit&&(a=(function(p){let y;return y=typeof p=="object"?p.value:p,Ev(y)?null:y})(t.limit));let c=null;t.startAt&&(c=(function(p){let y=!!p.before,I=p.values||[];return new ju(I,y)})(t.startAt));let d=null;return t.endAt&&(d=(function(p){let y=!p.before,I=p.values||[];return new ju(I,y)})(t.endAt)),XW(e,i,o,s,a,"F",c,d)}function AK(n,e){let t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return de(28987,{purpose:i})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function bV(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=Ru(t.unaryFilter.field);return jt.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Ru(t.unaryFilter.field);return jt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=Ru(t.unaryFilter.field);return jt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=Ru(t.unaryFilter.field);return jt.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return de(61313);default:return de(60726)}})(n):n.fieldFilter!==void 0?(function(t){return jt.create(Ru(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return de(58110);default:return de(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return ti.create(t.compositeFilter.filters.map(r=>bV(r)),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return de(1026)}})(t.compositeFilter.op))})(n):de(30097,{filter:n})}function xK(n){return yK[n]}function RK(n){return _K[n]}function kK(n){return vK[n]}function xu(n){return{fieldPath:n.canonicalString()}}function Ru(n){return hr.fromServerFormat(n.fieldPath)}function CV(n){return n instanceof jt?(function(t){if(t.op==="=="){if(Q2(t.value))return{unaryFilter:{field:xu(t.field),op:"IS_NAN"}};if(K2(t.value))return{unaryFilter:{field:xu(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Q2(t.value))return{unaryFilter:{field:xu(t.field),op:"IS_NOT_NAN"}};if(K2(t.value))return{unaryFilter:{field:xu(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:xu(t.field),op:RK(t.op),value:t.value}}})(n):n instanceof ti?(function(t){let r=t.getFilters().map(i=>CV(i));return r.length===1?r[0]:{compositeFilter:{op:kK(t.op),filters:r}}})(n):de(54877,{filter:n})}function NK(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function TV(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var ap=class n{constructor(e,t,r,i,s=De.min(),o=De.min(),a=Nn.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var WT=class{constructor(e){this.yt=e}};function MK(n){let e=SK({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?MT(e,e.limit,"L"):e}var ev=class{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(mt(e.integerValue));else if("doubleValue"in e){let r=mt(e.doubleValue);isNaN(r)?this.Ft(t,13):(this.Ft(t,15),np(r)?t.Mt(0):t.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(t,20),typeof r=="string"&&(r=As(r)),t.xt(`${r.seconds||""}`),t.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(xs(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ft(t,45),t.Mt(r.latitude||0),t.Mt(r.longitude||0)}else"mapValue"in e?XF(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):JF(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):de(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){let r=e.fields||{};this.Ft(t,55);for(let i of Object.keys(r))this.Ot(i,t),this.Ct(r[i],t)}kt(e,t){let r=e.fields||{};this.Ft(t,53);let i=Vu,s=r[i].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(mt(s)),this.Ot(i,t),this.Ct(r[i],t)}Qt(e,t){let r=e.values||[];this.Ft(t,50);for(let i of r)this.Ct(i,t)}Lt(e,t){this.Ft(t,37),le.fromName(e).path.forEach(r=>{this.Ft(t,60),this.Ut(r,t)})}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}};ev.Kt=new ev;var KT=class{constructor(){this.Cn=new QT}addToCollectionParentIndex(e,t){return this.Cn.add(t),G.resolve()}getCollectionParents(e,t){return G.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return G.resolve()}deleteFieldIndex(e,t){return G.resolve()}deleteAllFieldIndexes(e){return G.resolve()}createTargetIndexes(e,t){return G.resolve()}getDocumentsMatchingTarget(e,t){return G.resolve(null)}getIndexType(e,t){return G.resolve(0)}getFieldIndexes(e,t){return G.resolve([])}getNextCollectionGroupToUpdate(e){return G.resolve(null)}getMinOffset(e,t){return G.resolve(Nc.min())}getMinOffsetFromCollectionGroup(e,t){return G.resolve(Nc.min())}updateCollectionGroup(e,t,r){return G.resolve()}updateIndexEntries(e,t){return G.resolve()}},QT=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new gn(yt.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new gn(yt.comparator)).toArray()}};var wve=new Uint8Array(0);var cF={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},DV=41943040,Tr=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};Tr.DEFAULT_COLLECTION_PERCENTILE=10,Tr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Tr.DEFAULT=new Tr(DV,Tr.DEFAULT_COLLECTION_PERCENTILE,Tr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Tr.DISABLED=new Tr(-1,0,0);var cp=class n{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new n(0)}static cr(){return new n(-1)}};var lF="LruGarbageCollector",PK=1048576;function uF([n,e],[t,r]){let i=Ve(n,t);return i===0?Ve(e,r):i}var YT=class{constructor(e){this.Ir=e,this.buffer=new gn(uF),this.Er=0}dr(){return++this.Er}Ar(e){let t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();uF(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},JT=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ie(lF,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Yu(t)?ie(lF,"Ignoring IndexedDB error during garbage collection: ",t):await Qu(t)}await this.Vr(3e5)})}},XT=class{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return G.resolve(JD.ce);let r=new YT(t);return this.mr.forEachTarget(e,i=>r.Ar(i.sequenceNumber)).next(()=>this.mr.pr(e,i=>r.Ar(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ie("LruGarbageCollector","Garbage collection skipped; disabled"),G.resolve(cF)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ie("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),cF):this.yr(e,t))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,i,s,o,a,c,d,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(ie("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,o=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,a=Date.now(),this.removeTargets(e,r,t))).next(p=>(s=p,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(d=Date.now(),Su()<=$e.DEBUG&&ie("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(c-a)+`ms
	Removed ${p} documents in `+(d-c)+`ms
Total Duration: ${d-h}ms`),G.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:p})))}};function OK(n,e){return new XT(n,e)}var ZT=class{constructor(){this.changes=new Rs(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ei.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?G.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var eD=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var tD=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&Zf(r.mutation,i,Dr.empty(),$t.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Le()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Le()){let i=Sc();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=Qf();return s.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){let r=Sc();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Le()))}populateOverlays(e,t,r){let i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,r,i){let s=ks(),o=Xf(),a=(function(){return Xf()})();return t.forEach((c,d)=>{let h=r.get(d.key);i.has(d.key)&&(h===void 0||h.mutation instanceof Vi)?s=s.insert(d.key,d):h!==void 0?(o.set(d.key,h.mutation.getFieldMask()),Zf(h.mutation,d,h.mutation.getFieldMask(),$t.now())):o.set(d.key,Dr.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((d,h)=>o.set(d,h)),t.forEach((d,h)=>a.set(d,new eD(h,o.get(d)??null))),a))}recalculateAndSaveOverlays(e,t){let r=Xf(),i=new Ct((o,a)=>o-a),s=Le();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(let a of o)a.keys().forEach(c=>{let d=t.get(c);if(d===null)return;let h=r.get(c)||Dr.empty();h=a.applyToLocalView(d,h),r.set(c,h);let p=(i.get(a.batchId)||Le()).add(c);i=i.insert(a.batchId,p)})}).next(()=>{let o=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),d=c.key,h=c.value,p=uV();h.forEach(y=>{if(!s.has(y)){let I=mV(t.get(y),r.get(y));I!==null&&p.set(y,I),s=s.add(y)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,p))}return G.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return(function(o){return le.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):sV(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):G.resolve(Sc()),a=tp,c=s;return o.next(d=>G.forEach(d,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),s.get(h)?G.resolve():this.remoteDocumentCache.getEntry(e,h).next(y=>{c=c.insert(h,y)}))).next(()=>this.populateOverlays(e,d,s)).next(()=>this.computeViews(e,c,d,Le())).next(h=>({batchId:a,changes:lV(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new le(t)).next(r=>{let i=Qf();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let s=t.collectionGroup,o=Qf();return this.indexManager.getCollectionParents(e,s).next(a=>G.forEach(a,c=>{let d=(function(p,y){return new Yo(y,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)})(t,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,d,r,i).next(h=>{h.forEach((p,y)=>{o=o.insert(p,y)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((c,d)=>{let h=d.getKey();o.get(h)===null&&(o=o.insert(h,ei.newInvalidDocument(h)))});let a=Qf();return o.forEach((c,d)=>{let h=s.get(c);h!==void 0&&Zf(h.mutation,d,Dr.empty(),$t.now()),Cv(t,d)&&(a=a.insert(c,d))}),a})}};var nD=class{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return G.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:Oi(i.createTime)}})(t)),G.resolve()}getNamedQuery(e,t){return G.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(i){return{name:i.name,query:MK(i.bundledQuery),readTime:Oi(i.readTime)}})(t)),G.resolve()}};var rD=class{constructor(){this.overlays=new Ct(le.comparator),this.qr=new Map}getOverlay(e,t){return G.resolve(this.overlays.get(t))}getOverlays(e,t){let r=Sc();return G.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.St(e,t,s)}),G.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.qr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.qr.delete(r)),G.resolve()}getOverlaysForCollection(e,t,r){let i=Sc(),s=t.length+1,o=new le(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let c=a.getNext().value,d=c.getKey();if(!t.isPrefixOf(d.path))break;d.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return G.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new Ct((d,h)=>d-h),o=this.overlays.getIterator();for(;o.hasNext();){let d=o.getNext().value;if(d.getKey().getCollectionGroup()===t&&d.largestBatchId>r){let h=s.get(d.largestBatchId);h===null&&(h=Sc(),s=s.insert(d.largestBatchId,h)),h.set(d.getKey(),d)}}let a=Sc(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((d,h)=>a.set(d,h)),!(a.size()>=i)););return G.resolve(a)}St(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new LT(t,r));let s=this.qr.get(t);s===void 0&&(s=Le(),this.qr.set(t,s)),this.qr.set(t,s.add(r.key))}};var iD=class{constructor(){this.sessionToken=Nn.EMPTY_BYTE_STRING}getSessionToken(e){return G.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,G.resolve()}};var lp=class{constructor(){this.Qr=new gn(Ut.$r),this.Ur=new gn(Ut.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){let r=new Ut(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Gr(new Ut(e,t))}zr(e,t){e.forEach(r=>this.removeReference(r,t))}jr(e){let t=new le(new yt([])),r=new Ut(t,e),i=new Ut(t,e+1),s=[];return this.Ur.forEachInRange([r,i],o=>{this.Gr(o),s.push(o.key)}),s}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){let t=new le(new yt([])),r=new Ut(t,e),i=new Ut(t,e+1),s=Le();return this.Ur.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let t=new Ut(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},Ut=class{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return le.comparator(e.key,t.key)||Ve(e.Yr,t.Yr)}static Kr(e,t){return Ve(e.Yr,t.Yr)||le.comparator(e.key,t.key)}};var sD=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new gn(Ut.$r)}checkEmpty(e){return G.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new FT(s,t,r,i);this.mutationQueue.push(o);for(let a of i)this.Zr=this.Zr.add(new Ut(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return G.resolve(o)}lookupMutationBatch(e,t){return G.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.ei(r),s=i<0?0:i;return G.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return G.resolve(this.mutationQueue.length===0?XD:this.tr-1)}getAllMutationBatches(e){return G.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new Ut(t,0),i=new Ut(t,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([r,i],o=>{let a=this.Xr(o.Yr);s.push(a)}),G.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new gn(Ve);return t.forEach(i=>{let s=new Ut(i,0),o=new Ut(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,o],a=>{r=r.add(a.Yr)})}),G.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,s=r;le.isDocumentKey(s)||(s=s.child(""));let o=new Ut(new le(s),0),a=new gn(Ve);return this.Zr.forEachWhile(c=>{let d=c.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(a=a.add(c.Yr)),!0)},o),G.resolve(this.ti(a))}ti(e){let t=[];return e.forEach(r=>{let i=this.Xr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){rt(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return G.forEach(t.mutations,i=>{let s=new Ut(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,t){let r=new Ut(t,0),i=this.Zr.firstAfterOrEqual(r);return G.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,G.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){let t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var oD=class{constructor(e){this.ri=e,this.docs=(function(){return new Ct(le.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return G.resolve(r?r.document.mutableCopy():ei.newInvalidDocument(t))}getEntries(e,t){let r=ks();return t.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():ei.newInvalidDocument(i))}),G.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=ks(),o=t.path,a=new le(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:d,value:{document:h}}=c.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||MW(NW(h),r)<=0||(i.has(h.key)||Cv(t,h))&&(s=s.insert(h.key,h.mutableCopy()))}return G.resolve(s)}getAllFromCollectionGroup(e,t,r,i){de(9500)}ii(e,t){return G.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new aD(this)}getSize(e){return G.resolve(this.size)}},aD=class extends ZT{constructor(e){super(),this.Nr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)}),G.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}};var cD=class{constructor(e){this.persistence=e,this.si=new Rs(t=>rS(t),iS),this.lastRemoteSnapshotVersion=De.min(),this.highestTargetId=0,this.oi=0,this._i=new lp,this.targetCount=0,this.ai=cp.ur()}forEachTarget(e,t){return this.si.forEach((r,i)=>t(i)),G.resolve()}getLastRemoteSnapshotVersion(e){return G.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return G.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),G.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),G.resolve()}Pr(e){this.si.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.ai=new cp(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,G.resolve()}updateTargetData(e,t){return this.Pr(t),G.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,G.resolve()}removeTargets(e,t,r){let i=0,s=[];return this.si.forEach((o,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.si.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),G.waitFor(s).next(()=>i)}getTargetCount(e){return G.resolve(this.targetCount)}getTargetData(e,t){let r=this.si.get(t)||null;return G.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),G.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);let i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),G.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),G.resolve()}getMatchingKeysForTargetId(e,t){let r=this._i.Hr(t);return G.resolve(r)}containsKey(e,t){return G.resolve(this._i.containsKey(t))}};var tv=class{constructor(e,t){this.ui={},this.overlays={},this.ci=new JD(0),this.li=!1,this.li=!0,this.hi=new iD,this.referenceDelegate=e(this),this.Pi=new cD(this),this.indexManager=new KT,this.remoteDocumentCache=(function(i){return new oD(i)})(r=>this.referenceDelegate.Ti(r)),this.serializer=new WT(t),this.Ii=new nD(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new rD,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new sD(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){ie("MemoryPersistence","Starting transaction:",e);let i=new lD(this.ci.next());return this.referenceDelegate.Ei(),r(i).next(s=>this.referenceDelegate.di(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ai(e,t){return G.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,t)))}},lD=class extends _T{constructor(e){super(),this.currentSequenceNumber=e}},uD=class n{constructor(e){this.persistence=e,this.Ri=new lp,this.Vi=null}static mi(e){return new n(e)}get fi(){if(this.Vi)return this.Vi;throw de(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),G.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),G.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),G.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach(i=>this.fi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.fi.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}Ei(){this.Vi=new Set}di(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return G.forEach(this.fi,r=>{let i=le.fromPath(r);return this.gi(e,i).next(s=>{s||t.removeEntry(i,De.min())})}).next(()=>(this.Vi=null,t.apply(e)))}updateLimboDocument(e,t){return this.gi(e,t).next(r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())})}Ti(e){return 0}gi(e,t){return G.or([()=>G.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}},nv=class n{constructor(e,t){this.persistence=e,this.pi=new Rs(r=>VW(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=OK(this,t)}static mi(e,t){return new n(e,t)}Ei(){}di(e){return G.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){let t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}wr(e){let t=0;return this.pr(e,r=>{t++}).next(()=>t)}pr(e,t){return G.forEach(this.pi,(r,i)=>this.br(e,r,i).next(s=>s?G.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ii(e,o=>this.br(e,o,t).next(a=>{a||(r++,s.removeEntry(o,De.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),G.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),G.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),G.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),G.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=L_(e.data.value)),t}br(e,t,r){return G.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let i=this.pi.get(t);return G.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var dD=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=i}static As(e,t){let r=Le(),i=Le();for(let s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new n(e,t.fromCache,r,i)}};var hD=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var fD=class{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return kO()?8:OW(RO())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,i){let s={result:null};return this.ys(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ws(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new hD;return this.Ss(e,t,o).next(a=>{if(s.result=a,this.Vs)return this.bs(e,t,o,a.size)})}).next(()=>s.result)}bs(e,t,r,i){return r.documentReadCount<this.fs?(Su()<=$e.DEBUG&&ie("QueryEngine","SDK will not create cache indexes for query:",Au(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),G.resolve()):(Su()<=$e.DEBUG&&ie("QueryEngine","Query:",Au(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(Su()<=$e.DEBUG&&ie("QueryEngine","The SDK decides to create cache indexes for query:",Au(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Pi(t))):G.resolve())}ys(e,t){if(Z2(t))return G.resolve(null);let r=Pi(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=MT(t,null,"F"),r=Pi(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=Le(...s);return this.ps.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let d=this.Ds(t,a);return this.Cs(t,d,o,c.readTime)?this.ys(e,MT(t,null,"F")):this.vs(e,d,t,c)}))})))}ws(e,t,r,i){return Z2(t)||i.isEqual(De.min())?G.resolve(null):this.ps.getDocuments(e,r).next(s=>{let o=this.Ds(t,s);return this.Cs(t,o,r,i)?G.resolve(null):(Su()<=$e.DEBUG&&ie("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Au(t)),this.vs(e,o,t,kW(i,tp)).next(a=>a))})}Ds(e,t){let r=new gn(aV(e));return t.forEach((i,s)=>{Cv(e,s)&&(r=r.add(s))}),r}Cs(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ss(e,t,r){return Su()<=$e.DEBUG&&ie("QueryEngine","Using full collection scan to execute query:",Au(t)),this.ps.getDocumentsMatchingQuery(e,t,Nc.min(),r)}vs(e,t,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}};var cS="LocalStore",FK=3e8,pD=class{constructor(e,t,r,i){this.persistence=e,this.Fs=t,this.serializer=i,this.Ms=new Ct(Ve),this.xs=new Rs(s=>rS(s),iS),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new tD(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}};function VK(n,e,t,r){return new pD(n,e,t,r)}async function SV(n,e){let t=Ie(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.Bs(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{let o=[],a=[],c=Le();for(let d of i){o.push(d.batchId);for(let h of d.mutations)c=c.add(h.key)}for(let d of s){a.push(d.batchId);for(let h of d.mutations)c=c.add(h.key)}return t.localDocuments.getDocuments(r,c).next(d=>({Ls:d,removedBatchIds:o,addedBatchIds:a}))})})}function LK(n,e){let t=Ie(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),s=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(a,c,d,h){let p=d.batch,y=p.keys(),I=G.resolve();return y.forEach(k=>{I=I.next(()=>h.getEntry(c,k)).next(P=>{let M=d.docVersions.get(k);rt(M!==null,48541),P.version.compareTo(M)<0&&(p.applyToRemoteDocument(P,d),P.isValidDocument()&&(P.setReadTime(d.commitVersion),h.addEntry(P)))})}),I.next(()=>a.mutationQueue.removeMutationBatch(c,p))})(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(a){let c=Le();for(let d=0;d<a.mutationResults.length;++d)a.mutationResults[d].transformResults.length>0&&(c=c.add(a.batch.mutations[d].key));return c})(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function AV(n){let e=Ie(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Pi.getLastRemoteSnapshotVersion(t))}function UK(n,e){let t=Ie(n),r=e.snapshotVersion,i=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=t.Ns.newChangeBuffer({trackRemovals:!0});i=t.Ms;let a=[];e.targetChanges.forEach((h,p)=>{let y=i.get(p);if(!y)return;a.push(t.Pi.removeMatchingKeys(s,h.removedDocuments,p).next(()=>t.Pi.addMatchingKeys(s,h.addedDocuments,p)));let I=y.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(p)!==null?I=I.withResumeToken(Nn.EMPTY_BYTE_STRING,De.min()).withLastLimboFreeSnapshotVersion(De.min()):h.resumeToken.approximateByteSize()>0&&(I=I.withResumeToken(h.resumeToken,r)),i=i.insert(p,I),(function(P,M,$){return P.resumeToken.approximateByteSize()===0||M.snapshotVersion.toMicroseconds()-P.snapshotVersion.toMicroseconds()>=FK?!0:$.addedDocuments.size+$.modifiedDocuments.size+$.removedDocuments.size>0})(y,I,h)&&a.push(t.Pi.updateTargetData(s,I))});let c=ks(),d=Le();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(jK(s,o,e.documentUpdates).next(h=>{c=h.ks,d=h.qs})),!r.isEqual(De.min())){let h=t.Pi.getLastRemoteSnapshotVersion(s).next(p=>t.Pi.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(h)}return G.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,c,d)).next(()=>c)}).then(s=>(t.Ms=i,s))}function jK(n,e,t){let r=Le(),i=Le();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=ks();return t.forEach((a,c)=>{let d=s.get(a);c.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(De.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!d.isValidDocument()||c.version.compareTo(d.version)>0||c.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):ie(cS,"Ignoring outdated watch update for ",a,". Current version:",d.version," Watch version:",c.version)}),{ks:o,qs:i}})}function BK(n,e){let t=Ie(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=XD),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function $K(n,e){let t=Ie(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Pi.getTargetData(r,e).next(s=>s?(i=s,G.resolve(i)):t.Pi.allocateTargetId(r).next(o=>(i=new ap(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Pi.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.xs.set(e,r.targetId)),r})}async function gD(n,e,t){let r=Ie(n),i=r.Ms.get(e),s=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Yu(o))throw o;ie(cS,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function dF(n,e,t){let r=Ie(n),i=De.min(),s=Le();return r.persistence.runTransaction("Execute query","readwrite",o=>(function(c,d,h){let p=Ie(c),y=p.xs.get(h);return y!==void 0?G.resolve(p.Ms.get(y)):p.Pi.getTargetData(d,h)})(r,o,Pi(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,a.targetId).next(c=>{s=c})}).next(()=>r.Fs.getDocumentsMatchingQuery(o,e,t?i:De.min(),t?s:Le())).next(a=>(HK(r,eK(e),a),{documents:a,Qs:s})))}function HK(n,e,t){let r=n.Os.get(e)||De.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.Os.set(e,r)}var rv=class{constructor(){this.activeTargetIds=oK()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var mD=class{constructor(){this.Mo=new rv,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new rv,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var yD=class{Oo(e){}shutdown(){}};var hF="ConnectivityMonitor",iv=class{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ie(hF,"Network connectivity changed: AVAILABLE");for(let e of this.qo)e(0)}ko(){ie(hF,"Network connectivity changed: UNAVAILABLE");for(let e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var V_=null;function _D(){return V_===null?V_=(function(){return 268435456+Math.round(2147483648*Math.random())})():V_++,"0x"+V_.toString(16)}var aT="RestConnection",qK={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},vD=class{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===G_?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,t,r,i,s){let o=_D(),a=this.zo(e,t.toUriEncodedString());ie(aT,`Sending RPC '${e}' ${o}:`,a,r);let c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,i,s);let{host:d}=new URL(a),h=h_(d);return this.Jo(e,a,c,r,h).then(p=>(ie(aT,`Received RPC '${e}' ${o}: `,p),p),p=>{throw Ou(aT,`RPC '${e}' ${o} failed with error: `,p,"url: ",a,"request:",r),p})}Ho(e,t,r,i,s,o){return this.Go(e,t,r,i,s)}jo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Ku})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}zo(e,t){let r=qK[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}};var wD=class{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}};var kn="WebChannelConnection",ED=class extends vD{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,i,s){let o=_D();return new Promise((a,c)=>{let d=new eT;d.setWithCredentials(!0),d.listenOnce(tT.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case Kf.NO_ERROR:let p=d.getResponseJson();ie(kn,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(p)),a(p);break;case Kf.TIMEOUT:ie(kn,`RPC '${e}' ${o} timed out`),c(new te(H.DEADLINE_EXCEEDED,"Request time out"));break;case Kf.HTTP_ERROR:let y=d.getStatus();if(ie(kn,`RPC '${e}' ${o} failed with status:`,y,"response text:",d.getResponseText()),y>0){let I=d.getResponseJson();Array.isArray(I)&&(I=I[0]);let k=I?.error;if(k&&k.status&&k.message){let P=(function($){let Y=$.toLowerCase().replace(/_/g,"-");return Object.values(H).indexOf(Y)>=0?Y:H.UNKNOWN})(k.status);c(new te(P,k.message))}else c(new te(H.UNKNOWN,"Server responded with status "+d.getStatus()))}else c(new te(H.UNAVAILABLE,"Connection failed."));break;default:de(9055,{l_:e,streamId:o,h_:d.getLastErrorCode(),P_:d.getLastError()})}}finally{ie(kn,`RPC '${e}' ${o} completed.`)}});let h=JSON.stringify(i);ie(kn,`RPC '${e}' ${o} sending request:`,i),d.send(t,"POST",h,r,15)})}T_(e,t,r){let i=_D(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=iT(),a=rT(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(c.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;let h=s.join("");ie(kn,`Creating RPC '${e}' stream ${i}: ${h}`,c);let p=o.createWebChannel(h,c);this.I_(p);let y=!1,I=!1,k=new wD({Yo:M=>{I?ie(kn,`Not sending because RPC '${e}' stream ${i} is closed:`,M):(y||(ie(kn,`Opening RPC '${e}' stream ${i} transport.`),p.open(),y=!0),ie(kn,`RPC '${e}' stream ${i} sending:`,M),p.send(M))},Zo:()=>p.close()}),P=(M,$,Y)=>{M.listen($,ee=>{try{Y(ee)}catch(Ce){setTimeout(()=>{throw Ce},0)}})};return P(p,Du.EventType.OPEN,()=>{I||(ie(kn,`RPC '${e}' stream ${i} transport opened.`),k.o_())}),P(p,Du.EventType.CLOSE,()=>{I||(I=!0,ie(kn,`RPC '${e}' stream ${i} transport closed`),k.a_(),this.E_(p))}),P(p,Du.EventType.ERROR,M=>{I||(I=!0,Ou(kn,`RPC '${e}' stream ${i} transport errored. Name:`,M.name,"Message:",M.message),k.a_(new te(H.UNAVAILABLE,"The operation could not be completed")))}),P(p,Du.EventType.MESSAGE,M=>{if(!I){let $=M.data[0];rt(!!$,16349);let Y=$,ee=Y?.error||Y[0]?.error;if(ee){ie(kn,`RPC '${e}' stream ${i} received error:`,ee);let Ce=ee.status,Je=(function(v){let E=Lt[v];if(E!==void 0)return _V(E)})(Ce),pe=ee.message;Je===void 0&&(Je=H.INTERNAL,pe="Unknown error status: "+Ce+" with message "+ee.message),I=!0,k.a_(new te(Je,pe)),p.close()}else ie(kn,`RPC '${e}' stream ${i} received:`,$),k.u_($)}}),P(a,nT.STAT_EVENT,M=>{M.stat===P_.PROXY?ie(kn,`RPC '${e}' stream ${i} detected buffering proxy`):M.stat===P_.NOPROXY&&ie(kn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{k.__()},0),k}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(t=>t===e)}};function cT(){return typeof document<"u"?document:null}function Tv(n){return new $T(n,!0)}var sv=class{constructor(e,t,r=1e3,i=1.5,s=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=i,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();let t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,t-r);i>0&&ie("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}};var fF="PersistentStream",ov=class{constructor(e,t,r,i,s,o,a,c){this.Mi=e,this.S_=r,this.b_=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new sv(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===H.RESOURCE_EXHAUSTED?(Ss(t.toString()),Ss("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===H.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;let e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===t&&this.G_(r,i)},r=>{e(()=>{let i=new te(H.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(e,t){let r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.J_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return ie(fF,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget(()=>this.D_===e?t():(ie(fF,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},ID=class extends ov{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();let t=IK(this.serializer,e),r=(function(s){if(!("targetChange"in s))return De.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?De.min():o.readTime?Oi(o.readTime):De.min()})(e);return this.listener.H_(t,r)}Y_(e){let t={};t.database=GT(this.serializer),t.addTarget=(function(s,o){let a,c=o.target;if(a=kT(c)?{documents:TK(s,c)}:{query:DK(s,c).ft},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=vV(s,o.resumeToken);let d=HT(s,o.expectedCount);d!==null&&(a.expectedCount=d)}else if(o.snapshotVersion.compareTo(De.min())>0){a.readTime=Z_(s,o.snapshotVersion.toTimestamp());let d=HT(s,o.expectedCount);d!==null&&(a.expectedCount=d)}return a})(this.serializer,e);let r=AK(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){let t={};t.database=GT(this.serializer),t.removeTarget=e,this.q_(t)}},bD=class extends ov{constructor(e,t,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return rt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,rt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){rt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();let t=CK(e.writeResults,e.commitTime),r=Oi(e.commitTime);return this.listener.na(r,t)}ra(){let e={};e.database=GT(this.serializer),this.q_(e)}ea(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>bK(this.serializer,r))};this.q_(t)}};var CD=class{},TD=class extends CD{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new te(H.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Go(e,qT(t,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===H.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new te(H.UNKNOWN,s.toString())})}Ho(e,t,r,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Ho(e,qT(t,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===H.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new te(H.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}},DD=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ss(t),this.aa=!1):ie("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}};var Vc="RemoteStore",SD=class{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo(o=>{r.enqueueAndForget(async()=>{Uc(this)&&(ie(Vc,"Restarting streams for network reachability change."),await(async function(c){let d=Ie(c);d.Ea.add(4),await fp(d),d.Ra.set("Unknown"),d.Ea.delete(4),await Dv(d)})(this))})}),this.Ra=new DD(r,i)}};async function Dv(n){if(Uc(n))for(let e of n.da)await e(!0)}async function fp(n){for(let e of n.da)await e(!1)}function xV(n,e){let t=Ie(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),hS(t)?dS(t):Ju(t).O_()&&uS(t,e))}function lS(n,e){let t=Ie(n),r=Ju(t);t.Ia.delete(e),r.O_()&&RV(t,e),t.Ia.size===0&&(r.O_()?r.L_():Uc(t)&&t.Ra.set("Unknown"))}function uS(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(De.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Ju(n).Y_(e)}function RV(n,e){n.Va.Ue(e),Ju(n).Z_(e)}function dS(n){n.Va=new BT({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),Ju(n).start(),n.Ra.ua()}function hS(n){return Uc(n)&&!Ju(n).x_()&&n.Ia.size>0}function Uc(n){return Ie(n).Ea.size===0}function kV(n){n.Va=void 0}async function zK(n){n.Ra.set("Online")}async function GK(n){n.Ia.forEach((e,t)=>{uS(n,e)})}async function WK(n,e){kV(n),hS(n)?(n.Ra.ha(e),dS(n)):n.Ra.set("Unknown")}async function KK(n,e,t){if(n.Ra.set("Online"),e instanceof J_&&e.state===2&&e.cause)try{await(async function(i,s){let o=s.cause;for(let a of s.targetIds)i.Ia.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.Ia.delete(a),i.Va.removeTarget(a))})(n,e)}catch(r){ie(Vc,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await av(n,r)}else if(e instanceof Nu?n.Va.Ze(e):e instanceof Y_?n.Va.st(e):n.Va.tt(e),!t.isEqual(De.min()))try{let r=await AV(n.localStore);t.compareTo(r)>=0&&await(function(s,o){let a=s.Va.Tt(o);return a.targetChanges.forEach((c,d)=>{if(c.resumeToken.approximateByteSize()>0){let h=s.Ia.get(d);h&&s.Ia.set(d,h.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,d)=>{let h=s.Ia.get(c);if(!h)return;s.Ia.set(c,h.withResumeToken(Nn.EMPTY_BYTE_STRING,h.snapshotVersion)),RV(s,c);let p=new ap(h.target,c,d,h.sequenceNumber);uS(s,p)}),s.remoteSyncer.applyRemoteEvent(a)})(n,t)}catch(r){ie(Vc,"Failed to raise snapshot:",r),await av(n,r)}}async function av(n,e,t){if(!Yu(e))throw e;n.Ea.add(1),await fp(n),n.Ra.set("Offline"),t||(t=()=>AV(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{ie(Vc,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await Dv(n)})}function NV(n,e){return e().catch(t=>av(n,t,e))}async function Sv(n){let e=Ie(n),t=Jo(e),r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:XD;for(;QK(e);)try{let i=await BK(e.localStore,r);if(i===null){e.Ta.length===0&&t.L_();break}r=i.batchId,YK(e,i)}catch(i){await av(e,i)}MV(e)&&PV(e)}function QK(n){return Uc(n)&&n.Ta.length<10}function YK(n,e){n.Ta.push(e);let t=Jo(n);t.O_()&&t.X_&&t.ea(e.mutations)}function MV(n){return Uc(n)&&!Jo(n).x_()&&n.Ta.length>0}function PV(n){Jo(n).start()}async function JK(n){Jo(n).ra()}async function XK(n){let e=Jo(n);for(let t of n.Ta)e.ea(t.mutations)}async function ZK(n,e,t){let r=n.Ta.shift(),i=VT.from(r,e,t);await NV(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),await Sv(n)}async function eQ(n,e){e&&Jo(n).X_&&await(async function(r,i){if((function(o){return fK(o)&&o!==H.ABORTED})(i.code)){let s=r.Ta.shift();Jo(r).B_(),await NV(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await Sv(r)}})(n,e),MV(n)&&PV(n)}async function pF(n,e){let t=Ie(n);t.asyncQueue.verifyOperationInProgress(),ie(Vc,"RemoteStore received new credentials");let r=Uc(t);t.Ea.add(3),await fp(t),r&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Dv(t)}async function tQ(n,e){let t=Ie(n);e?(t.Ea.delete(2),await Dv(t)):e||(t.Ea.add(2),await fp(t),t.Ra.set("Unknown"))}function Ju(n){return n.ma||(n.ma=(function(t,r,i){let s=Ie(t);return s.sa(),new ID(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(n.datastore,n.asyncQueue,{Xo:zK.bind(null,n),t_:GK.bind(null,n),r_:WK.bind(null,n),H_:KK.bind(null,n)}),n.da.push(async e=>{e?(n.ma.B_(),hS(n)?dS(n):n.Ra.set("Unknown")):(await n.ma.stop(),kV(n))})),n.ma}function Jo(n){return n.fa||(n.fa=(function(t,r,i){let s=Ie(t);return s.sa(),new bD(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:JK.bind(null,n),r_:eQ.bind(null,n),ta:XK.bind(null,n),na:ZK.bind(null,n)}),n.da.push(async e=>{e?(n.fa.B_(),await Sv(n)):(await n.fa.stop(),n.Ta.length>0&&(ie(Vc,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))})),n.fa}var AD=class n{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Cs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){let o=Date.now()+r,a=new n(e,t,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new te(H.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function fS(n,e){if(Ss("AsyncQueue",`${e}: ${n}`),Yu(n))return new te(H.UNAVAILABLE,`${e}: ${n}`);throw n}var cv=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||le.comparator(t.key,r.key):(t,r)=>le.comparator(t.key,r.key),this.keyedMap=Qf(),this.sortedSet=new Ct(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var lv=class{constructor(){this.ga=new Ct(le.comparator)}track(e){let t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):de(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){let e=[];return this.ga.inorderTraversal((t,r)=>{e.push(r)}),e}},zu=class n{constructor(e,t,r,i,s,o,a,c,d){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=d}static fromInitialDocuments(e,t,r,i,s){let o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new n(e,t,cv.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&bv(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var xD=class{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}},RD=class{constructor(){this.queries=gF(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){let i=Ie(t),s=i.queries;i.queries=gF(),s.forEach((o,a)=>{for(let c of a.Sa)c.onError(r)})})(this,new te(H.ABORTED,"Firestore shutting down"))}};function gF(){return new Rs(n=>oV(n),bv)}async function nQ(n,e){let t=Ie(n),r=3,i=e.query,s=t.queries.get(i);s?!s.ba()&&e.Da()&&(r=2):(s=new xD,r=e.Da()?0:1);try{switch(r){case 0:s.wa=await t.onListen(i,!0);break;case 1:s.wa=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(o){let a=fS(o,`Initialization of query '${Au(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,s),s.Sa.push(e),e.va(t.onlineState),s.wa&&e.Fa(s.wa)&&pS(t)}async function rQ(n,e){let t=Ie(n),r=e.query,i=3,s=t.queries.get(r);if(s){let o=s.Sa.indexOf(e);o>=0&&(s.Sa.splice(o,1),s.Sa.length===0?i=e.Da()?0:1:!s.ba()&&e.Da()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function iQ(n,e){let t=Ie(n),r=!1;for(let i of e){let s=i.query,o=t.queries.get(s);if(o){for(let a of o.Sa)a.Fa(i)&&(r=!0);o.wa=i}}r&&pS(t)}function sQ(n,e,t){let r=Ie(n),i=r.queries.get(e);if(i)for(let s of i.Sa)s.onError(t);r.queries.delete(e)}function pS(n){n.Ca.forEach(e=>{e.next()})}var kD,mF;(mF=kD||(kD={})).Ma="default",mF.Cache="cache";var ND=class{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new zu(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;let r=t!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;let t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=zu.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==kD.Cache}};var uv=class{constructor(e){this.key=e}},dv=class{constructor(e){this.key=e}},MD=class{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Le(),this.mutatedKeys=Le(),this.eu=aV(e),this.tu=new cv(this.eu)}get nu(){return this.Ya}ru(e,t){let r=t?t.iu:new lv,i=t?t.tu:this.tu,s=t?t.mutatedKeys:this.mutatedKeys,o=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,d=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let y=i.get(h),I=Cv(this.query,p)?p:null,k=!!y&&this.mutatedKeys.has(y.key),P=!!I&&(I.hasLocalMutations||this.mutatedKeys.has(I.key)&&I.hasCommittedMutations),M=!1;y&&I?y.data.isEqual(I.data)?k!==P&&(r.track({type:3,doc:I}),M=!0):this.su(y,I)||(r.track({type:2,doc:I}),M=!0,(c&&this.eu(I,c)>0||d&&this.eu(I,d)<0)&&(a=!0)):!y&&I?(r.track({type:0,doc:I}),M=!0):y&&!I&&(r.track({type:1,doc:y}),M=!0,(c||d)&&(a=!0)),M&&(I?(o=o.add(I),s=P?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{tu:o,iu:r,Cs:a,mutatedKeys:s}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;let o=e.iu.ya();o.sort((h,p)=>(function(I,k){let P=M=>{switch(M){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return de(20277,{Rt:M})}};return P(I)-P(k)})(h.type,p.type)||this.eu(h.doc,p.doc)),this.ou(r),i=i??!1;let a=t&&!i?this._u():[],c=this.Xa.size===0&&this.current&&!i?1:0,d=c!==this.Za;return this.Za=c,o.length!==0||d?{snapshot:new zu(this.query,e.tu,s,o,e.mutatedKeys,c===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new lv,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(t=>this.Ya=this.Ya.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ya=this.Ya.delete(t)),this.current=e.current)}_u(){if(!this.current)return[];let e=this.Xa;this.Xa=Le(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});let t=[];return e.forEach(r=>{this.Xa.has(r)||t.push(new dv(r))}),this.Xa.forEach(r=>{e.has(r)||t.push(new uv(r))}),t}cu(e){this.Ya=e.Qs,this.Xa=Le();let t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return zu.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}},gS="SyncEngine",PD=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},OD=class{constructor(e){this.key=e,this.hu=!1}},FD=class{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Rs(a=>oV(a),bv),this.Iu=new Map,this.Eu=new Set,this.du=new Ct(le.comparator),this.Au=new Map,this.Ru=new lp,this.Vu={},this.mu=new Map,this.fu=cp.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}};async function oQ(n,e,t=!0){let r=jV(n),i,s=r.Tu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=await OV(r,e,t,!0),i}async function aQ(n,e){let t=jV(n);await OV(t,e,!0,!1)}async function OV(n,e,t,r){let i=await $K(n.localStore,Pi(e)),s=i.targetId,o=n.sharedClientState.addLocalQueryTarget(s,t),a;return r&&(a=await cQ(n,e,s,o==="current",i.resumeToken)),n.isPrimaryClient&&t&&xV(n.remoteStore,i),a}async function cQ(n,e,t,r,i){n.pu=(p,y,I)=>(async function(P,M,$,Y){let ee=M.view.ru($);ee.Cs&&(ee=await dF(P.localStore,M.query,!1).then(({documents:T})=>M.view.ru(T,ee)));let Ce=Y&&Y.targetChanges.get(M.targetId),Je=Y&&Y.targetMismatches.get(M.targetId)!=null,pe=M.view.applyChanges(ee,P.isPrimaryClient,Ce,Je);return _F(P,M.targetId,pe.au),pe.snapshot})(n,p,y,I);let s=await dF(n.localStore,e,!0),o=new MD(e,s.Qs),a=o.ru(s.documents),c=op.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),d=o.applyChanges(a,n.isPrimaryClient,c);_F(n,t,d.au);let h=new PD(e,t,o);return n.Tu.set(e,h),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),d.snapshot}async function lQ(n,e,t){let r=Ie(n),i=r.Tu.get(e),s=r.Iu.get(i.targetId);if(s.length>1)return r.Iu.set(i.targetId,s.filter(o=>!bv(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await gD(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&lS(r.remoteStore,i.targetId),VD(r,i.targetId)}).catch(Qu)):(VD(r,i.targetId),await gD(r.localStore,i.targetId,!0))}async function uQ(n,e){let t=Ie(n),r=t.Tu.get(e),i=t.Iu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),lS(t.remoteStore,r.targetId))}async function dQ(n,e,t){let r=_Q(n);try{let i=await(function(o,a){let c=Ie(o),d=$t.now(),h=a.reduce((I,k)=>I.add(k.key),Le()),p,y;return c.persistence.runTransaction("Locally write mutations","readwrite",I=>{let k=ks(),P=Le();return c.Ns.getEntries(I,h).next(M=>{k=M,k.forEach(($,Y)=>{Y.isValidDocument()||(P=P.add($))})}).next(()=>c.localDocuments.getOverlayedDocuments(I,k)).next(M=>{p=M;let $=[];for(let Y of a){let ee=hK(Y,p.get(Y.key).overlayedDocument);ee!=null&&$.push(new Vi(Y.key,ee,ZF(ee.value.mapValue),Ds.exists(!0)))}return c.mutationQueue.addMutationBatch(I,d,$,a)}).next(M=>{y=M;let $=M.applyToLocalDocumentSet(p,P);return c.documentOverlayCache.saveOverlays(I,M.batchId,$)})}).then(()=>({batchId:y.batchId,changes:lV(p)}))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(o,a,c){let d=o.Vu[o.currentUser.toKey()];d||(d=new Ct(Ve)),d=d.insert(a,c),o.Vu[o.currentUser.toKey()]=d})(r,i.batchId,t),await pp(r,i.changes),await Sv(r.remoteStore)}catch(i){let s=fS(i,"Failed to persist write");t.reject(s)}}async function FV(n,e){let t=Ie(n);try{let r=await UK(t.localStore,e);e.targetChanges.forEach((i,s)=>{let o=t.Au.get(s);o&&(rt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.hu=!0:i.modifiedDocuments.size>0?rt(o.hu,14607):i.removedDocuments.size>0&&(rt(o.hu,42227),o.hu=!1))}),await pp(t,r,e)}catch(r){await Qu(r)}}function yF(n,e,t){let r=Ie(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Tu.forEach((s,o)=>{let a=o.view.va(e);a.snapshot&&i.push(a.snapshot)}),(function(o,a){let c=Ie(o);c.onlineState=a;let d=!1;c.queries.forEach((h,p)=>{for(let y of p.Sa)y.va(a)&&(d=!0)}),d&&pS(c)})(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function hQ(n,e,t){let r=Ie(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Au.get(e),s=i&&i.key;if(s){let o=new Ct(le.comparator);o=o.insert(s,ei.newNoDocument(s,De.min()));let a=Le().add(s),c=new Q_(De.min(),new Map,new Ct(Ve),o,a);await FV(r,c),r.du=r.du.remove(s),r.Au.delete(e),mS(r)}else await gD(r.localStore,e,!1).then(()=>VD(r,e,t)).catch(Qu)}async function fQ(n,e){let t=Ie(n),r=e.batch.batchId;try{let i=await LK(t.localStore,e);LV(t,r,null),VV(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await pp(t,i)}catch(i){await Qu(i)}}async function pQ(n,e,t){let r=Ie(n);try{let i=await(function(o,a){let c=Ie(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let h;return c.mutationQueue.lookupMutationBatch(d,a).next(p=>(rt(p!==null,37113),h=p.keys(),c.mutationQueue.removeMutationBatch(d,p))).next(()=>c.mutationQueue.performConsistencyCheck(d)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(d,h,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,h)).next(()=>c.localDocuments.getDocuments(d,h))})})(r.localStore,e);LV(r,e,t),VV(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await pp(r,i)}catch(i){await Qu(i)}}function VV(n,e){(n.mu.get(e)||[]).forEach(t=>{t.resolve()}),n.mu.delete(e)}function LV(n,e,t){let r=Ie(n),i=r.Vu[r.currentUser.toKey()];if(i){let s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function VD(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach(r=>{n.Ru.containsKey(r)||UV(n,r)})}function UV(n,e){n.Eu.delete(e.path.canonicalString());let t=n.du.get(e);t!==null&&(lS(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),mS(n))}function _F(n,e,t){for(let r of t)r instanceof uv?(n.Ru.addReference(r.key,e),gQ(n,r)):r instanceof dv?(ie(gS,"Document no longer in limbo: "+r.key),n.Ru.removeReference(r.key,e),n.Ru.containsKey(r.key)||UV(n,r.key)):de(19791,{wu:r})}function gQ(n,e){let t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Eu.has(r)||(ie(gS,"New document in limbo: "+t),n.Eu.add(r),mS(n))}function mS(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){let e=n.Eu.values().next().value;n.Eu.delete(e);let t=new le(yt.fromString(e)),r=n.fu.next();n.Au.set(r,new OD(t)),n.du=n.du.insert(t,r),xV(n.remoteStore,new ap(Pi(sS(t.path)),r,"TargetPurposeLimboResolution",JD.ce))}}async function pp(n,e,t){let r=Ie(n),i=[],s=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((a,c)=>{o.push(r.pu(c,e,t).then(d=>{if((d||t)&&r.isPrimaryClient){let h=d?!d.fromCache:t?.targetChanges.get(c.targetId)?.current;r.sharedClientState.updateQueryState(c.targetId,h?"current":"not-current")}if(d){i.push(d);let h=dD.As(c.targetId,d);s.push(h)}}))}),await Promise.all(o),r.Pu.H_(i),await(async function(c,d){let h=Ie(c);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>G.forEach(d,y=>G.forEach(y.Es,I=>h.persistence.referenceDelegate.addReference(p,y.targetId,I)).next(()=>G.forEach(y.ds,I=>h.persistence.referenceDelegate.removeReference(p,y.targetId,I)))))}catch(p){if(!Yu(p))throw p;ie(cS,"Failed to update sequence numbers: "+p)}for(let p of d){let y=p.targetId;if(!p.fromCache){let I=h.Ms.get(y),k=I.snapshotVersion,P=I.withLastLimboFreeSnapshotVersion(k);h.Ms=h.Ms.insert(y,P)}}})(r.localStore,s))}async function mQ(n,e){let t=Ie(n);if(!t.currentUser.isEqual(e)){ie(gS,"User change. New user:",e.toKey());let r=await SV(t.localStore,e);t.currentUser=e,(function(s,o){s.mu.forEach(a=>{a.forEach(c=>{c.reject(new te(H.CANCELLED,o))})}),s.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await pp(t,r.Ls)}}function yQ(n,e){let t=Ie(n),r=t.Au.get(e);if(r&&r.hu)return Le().add(r.key);{let i=Le(),s=t.Iu.get(e);if(!s)return i;for(let o of s){let a=t.Tu.get(o);i=i.unionWith(a.view.nu)}return i}}function jV(n){let e=Ie(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=FV.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=yQ.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=hQ.bind(null,e),e.Pu.H_=iQ.bind(null,e.eventManager),e.Pu.yu=sQ.bind(null,e.eventManager),e}function _Q(n){let e=Ie(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=fQ.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=pQ.bind(null,e),e}var BV=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Tv(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,r){return null}Mu(t,r){return null}vu(t){return VK(this.persistence,new fD,t.initialUser,this.serializer)}Cu(t){return new tv(uD.mi,this.serializer)}Du(t){return new mD}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}return n.provider={build:()=>new n},n})(),LD=class extends BV{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){rt(this.persistence.referenceDelegate instanceof nv,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new JT(r,e.asyncQueue,t)}Cu(e){let t=this.cacheSizeBytes!==void 0?Tr.withCacheSize(this.cacheSizeBytes):Tr.DEFAULT;return new tv(r=>nv.mi(r,t),this.serializer)}};var vQ=(()=>{class n{async initialize(t,r){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>yF(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=mQ.bind(null,this.syncEngine),await tQ(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new RD})()}createDatastore(t){let r=Tv(t.databaseInfo.databaseId),i=(function(o){return new ED(o)})(t.databaseInfo);return(function(o,a,c,d){return new TD(o,a,c,d)})(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return(function(i,s,o,a,c){return new SD(i,s,o,a,c)})(this.localStore,this.datastore,t.asyncQueue,r=>yF(this.syncEngine,r,0),(function(){return iv.v()?new iv:new yD})())}createSyncEngine(t,r){return(function(s,o,a,c,d,h,p){let y=new FD(s,o,a,c,d,h);return p&&(y.gu=!0),y})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}async terminate(){await(async function(r){let i=Ie(r);ie(Vc,"RemoteStore shutting down."),i.Ea.add(5),await fp(i),i.Aa.shutdown(),i.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}return n.provider={build:()=>new n},n})();var UD=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ss("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var Xo="FirestoreClient",jD=class{constructor(e,t,r,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=pn.UNAUTHENTICATED,this.clientId=ep.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{ie(Xo,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(ie(Xo,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Cs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=fS(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}};async function lT(n,e){n.asyncQueue.verifyOperationInProgress(),ie(Xo,"Initializing OfflineComponentProvider");let t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async i=>{r.isEqual(i)||(await SV(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function vF(n,e){n.asyncQueue.verifyOperationInProgress();let t=await wQ(n);ie(Xo,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>pF(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>pF(e.remoteStore,i)),n._onlineComponents=e}async function wQ(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ie(Xo,"Using user provided OfflineComponentProvider");try{await lT(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===H.FAILED_PRECONDITION||i.code===H.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;Ou("Error using user provided cache. Falling back to memory cache: "+t),await lT(n,new BV)}}else ie(Xo,"Using default OfflineComponentProvider"),await lT(n,new LD(void 0));return n._offlineComponents}async function $V(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ie(Xo,"Using user provided OnlineComponentProvider"),await vF(n,n._uninitializedComponentsProvider._online)):(ie(Xo,"Using default OnlineComponentProvider"),await vF(n,new vQ))),n._onlineComponents}function EQ(n){return $V(n).then(e=>e.syncEngine)}async function wF(n){let e=await $V(n),t=e.eventManager;return t.onListen=oQ.bind(null,e.syncEngine),t.onUnlisten=lQ.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=aQ.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=uQ.bind(null,e.syncEngine),t}function HV(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var EF=new Map;var qV="firestore.googleapis.com",IF=!0,hv=class{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new te(H.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=qV,this.ssl=IF}else this.host=e.host,this.ssl=e.ssl??IF;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=DV;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<PK)throw new te(H.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}RW("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=HV(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new te(H.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new te(H.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new te(H.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Gu=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new hv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new te(H.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new te(H.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new hv(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new uT;switch(r.type){case"firstParty":return new pT(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new te(H.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){let r=EF.get(t);r&&(ie("ComponentProvider","Removing Datastore"),EF.delete(t),r.terminate())})(this),Promise.resolve()}};function IQ(n,e,t,r={}){n=Ts(n,Gu);let i=h_(e),s=n._getSettings(),o=ce(z({},s),{emulatorOptions:n._getEmulatorOptions()}),a=`${e}:${t}`;i&&(SO(`https://${a}`),xO("Firestore",!0)),s.host!==qV&&s.host!==a&&Ou("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let c=ce(z({},s),{host:a,ssl:i,emulatorOptions:r});if(!bu(c,o)&&(n._setSettings(c),r.mockUserToken)){let d,h;if(typeof r.mockUserToken=="string")d=r.mockUserToken,h=pn.MOCK_USER;else{d=AO(r.mockUserToken,n._app?.options.projectId);let p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new te(H.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new pn(p)}n._authCredentials=new dT(new B_(d,h))}}var Lc=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},mn=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new zo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}toJSON(){return{type:n._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(hp(t,n._jsonSchema))return new n(e,r||null,new le(yt.fromString(t.referencePath)))}};mn._jsonSchemaVersion="firestore/documentReference/1.0",mn._jsonSchema={type:Bt("string",mn._jsonSchemaVersion),referencePath:Bt("string")};var zo=class n extends Lc{constructor(e,t,r){super(e,t,sS(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new mn(this.firestore,null,new le(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function gp(n,e,...t){if(n=Zr(n),xF("collection","path",e),n instanceof Gu){let r=yt.fromString(e,...t);return j2(r),new zo(n,null,r)}{if(!(n instanceof mn||n instanceof zo))throw new te(H.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(yt.fromString(e,...t));return j2(r),new zo(n.firestore,null,r)}}function Sr(n,e,...t){if(n=Zr(n),arguments.length===1&&(e=ep.newId()),xF("doc","path",e),n instanceof Gu){let r=yt.fromString(e,...t);return U2(r),new mn(n,null,new le(r))}{if(!(n instanceof mn||n instanceof zo))throw new te(H.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(yt.fromString(e,...t));return U2(r),new mn(n.firestore,n instanceof zo?n.converter:null,new le(r))}}var bF="AsyncQueue",fv=class{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new sv(this,"async_queue_retry"),this._c=()=>{let r=cT();r&&ie(bF,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;let t=cT();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;let t=cT();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});let t=new Cs;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Yu(e))throw e;ie(bF,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){let t=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,Ss("INTERNAL UNHANDLED ERROR: ",CF(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);let i=AD.createAndSchedule(this,e,t,r,s=>this.hc(s));return this.tc.push(i),i}uc(){this.nc&&de(47125,{Pc:CF(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(let t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){let t=this.tc.indexOf(e);this.tc.splice(t,1)}};function CF(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}function TF(n){return(function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let s of r)if(s in i&&typeof i[s]=="function")return!0;return!1})(n,["next","error","complete"])}var Zo=class extends Gu{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new fv,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new fv(e),this._firestoreClient=void 0,await e}}};function Av(n,e){let t=typeof n=="object"?n:BO(),r=typeof n=="string"?n:e||G_,i=LO(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let s=DO("firestore");s&&IQ(i,...s)}return i}function zV(n){if(n._terminated)throw new te(H.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||bQ(n),n._firestoreClient}function bQ(n){let e=n._freezeSettings(),t=(function(i,s,o,a){return new vT(i,s,o,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,HV(a.experimentalLongPollingOptions),a.useFetchStreams,a.isUsingEmulator)})(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new jD(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(i){let s=i?._online.build();return{_offline:i?._offline.build(s),_online:s}})(n._componentsProvider))}var Go=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(Nn.fromBase64String(e))}catch(t){throw new te(H.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(Nn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(hp(e,n._jsonSchema))return n.fromBase64String(e.bytes)}};Go._jsonSchemaVersion="firestore/bytes/1.0",Go._jsonSchema={type:Bt("string",Go._jsonSchemaVersion),bytes:Bt("string")};var Wu=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new te(H.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new hr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var up=class{constructor(e){this._methodName=e}};var Wo=class n{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new te(H.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new te(H.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ve(this._lat,e._lat)||Ve(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:n._jsonSchemaVersion}}static fromJSON(e){if(hp(e,n._jsonSchema))return new n(e.latitude,e.longitude)}};Wo._jsonSchemaVersion="firestore/geoPoint/1.0",Wo._jsonSchema={type:Bt("string",Wo._jsonSchemaVersion),latitude:Bt("number"),longitude:Bt("number")};var Ko=class n{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0})(this._values,e._values)}toJSON(){return{type:n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(hp(e,n._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new n(e.vectorValues);throw new te(H.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};Ko._jsonSchemaVersion="firestore/vectorValue/1.0",Ko._jsonSchema={type:Bt("string",Ko._jsonSchemaVersion),vectorValues:Bt("object")};var CQ=/^__.*__$/,BD=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Vi(e,this.data,this.fieldMask,t,this.fieldTransforms):new Fc(e,this.data,t,this.fieldTransforms)}},pv=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Vi(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function GV(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw de(40011,{Ac:n})}}var $D=class n{constructor(e,t,r,i,s,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new n(z(z({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){let t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.gc(e),r}yc(e){let t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return mv(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(GV(this.Ac)&&CQ.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}},HD=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Tv(e)}Cc(e,t,r,i=!1){return new $D({Ac:e,methodName:t,Dc:r,path:hr.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function yS(n){let e=n._freezeSettings(),t=Tv(n._databaseId);return new HD(n._databaseId,!!e.ignoreUndefinedProperties,t)}function TQ(n,e,t,r,i,s={}){let o=n.Cc(s.merge||s.mergeFields?2:0,e,t,i);_S("Data must be an object, but it was:",o,r);let a=WV(r,o),c,d;if(s.merge)c=new Dr(o.fieldMask),d=o.fieldTransforms;else if(s.mergeFields){let h=[];for(let p of s.mergeFields){let y=qD(e,p,t);if(!o.contains(y))throw new te(H.INVALID_ARGUMENT,`Field '${y}' is specified in your field mask but missing from your input data.`);QV(h,y)||h.push(y)}c=new Dr(h),d=o.fieldTransforms.filter(p=>c.covers(p.field))}else c=null,d=o.fieldTransforms;return new BD(new dr(a),c,d)}var gv=class n extends up{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function DQ(n,e,t,r){let i=n.Cc(1,e,t);_S("Data must be an object, but it was:",i,r);let s=[],o=dr.empty();ea(r,(c,d)=>{let h=vS(e,c,t);d=Zr(d);let p=i.yc(h);if(d instanceof gv)s.push(h);else{let y=mp(d,p);y!=null&&(s.push(h),o.set(h,y))}});let a=new Dr(s);return new pv(o,a,i.fieldTransforms)}function SQ(n,e,t,r,i,s){let o=n.Cc(1,e,t),a=[qD(e,r,t)],c=[i];if(s.length%2!=0)throw new te(H.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let y=0;y<s.length;y+=2)a.push(qD(e,s[y])),c.push(s[y+1]);let d=[],h=dr.empty();for(let y=a.length-1;y>=0;--y)if(!QV(d,a[y])){let I=a[y],k=c[y];k=Zr(k);let P=o.yc(I);if(k instanceof gv)d.push(I);else{let M=mp(k,P);M!=null&&(d.push(I),h.set(I,M))}}let p=new Dr(d);return new pv(h,p,o.fieldTransforms)}function AQ(n,e,t,r=!1){return mp(t,n.Cc(r?4:3,e))}function mp(n,e){if(KV(n=Zr(n)))return _S("Unsupported field value:",e,n),WV(n,e);if(n instanceof up)return(function(r,i){if(!GV(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);let s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,i){let s=[],o=0;for(let a of r){let c=mp(a,i.wc(o));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}})(n,e)}return(function(r,i){if((r=Zr(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return aK(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let s=$t.fromDate(r);return{timestampValue:Z_(i.serializer,s)}}if(r instanceof $t){let s=new $t(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Z_(i.serializer,s)}}if(r instanceof Wo)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Go)return{bytesValue:vV(i.serializer,r._byteString)};if(r instanceof mn){let s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:aS(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Ko)return(function(o,a){return{mapValue:{fields:{[eS]:{stringValue:tS},[Vu]:{arrayValue:{values:o.toArray().map(d=>{if(typeof d!="number")throw a.Sc("VectorValues must only contain numeric values.");return oS(a.serializer,d)})}}}}}})(r,i);throw i.Sc(`Unsupported field value: ${wv(r)}`)})(n,e)}function WV(n,e){let t={};return zF(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ea(n,(r,i)=>{let s=mp(i,e.mc(r));s!=null&&(t[r]=s)}),{mapValue:{fields:t}}}function KV(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof $t||n instanceof Wo||n instanceof Go||n instanceof mn||n instanceof up||n instanceof Ko)}function _S(n,e,t){if(!KV(t)||!RF(t)){let r=wv(t);throw r==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+r)}}function qD(n,e,t){if((e=Zr(e))instanceof Wu)return e._internalPath;if(typeof e=="string")return vS(n,e);throw mv("Field path arguments must be of type string or ",n,!1,void 0,t)}var xQ=new RegExp("[~\\*/\\[\\]]");function vS(n,e,t){if(e.search(xQ)>=0)throw mv(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Wu(...e.split("."))._internalPath}catch{throw mv(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function mv(n,e,t,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new te(H.INVALID_ARGUMENT,a+n+c)}function QV(n,e){return n.some(t=>t.isEqual(e))}var yv=class{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new mn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new zD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(wS("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},zD=class extends yv{data(){return super.data()}};function wS(n,e){return typeof e=="string"?vS(n,e):e instanceof Wu?e._internalPath:e._delegate._internalPath}function RQ(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new te(H.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var dp=class{},_v=class extends dp{};function xv(n,e,...t){let r=[];e instanceof dp&&r.push(e),r=r.concat(t),(function(s){let o=s.filter(c=>c instanceof WD).length,a=s.filter(c=>c instanceof GD).length;if(o>1||o>0&&a>0)throw new te(H.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(let i of r)n=i._apply(n);return n}var GD=class n extends _v{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return YV(e._query,t),new Lc(e.firestore,e.converter,NT(e._query,t))}_parse(e){let t=yS(e.firestore);return(function(s,o,a,c,d,h,p){let y;if(d.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new te(H.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){SF(p,h);let k=[];for(let P of p)k.push(DF(c,s,P));y={arrayValue:{values:k}}}else y=DF(c,s,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||SF(p,h),y=AQ(a,o,p,h==="in"||h==="not-in");return jt.create(d,h,y)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};var WD=class n extends dp{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:ti.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:((function(i,s){let o=i,a=s.getFlattenedFilters();for(let c of a)YV(o,c),o=NT(o,c)})(e._query,t),new Lc(e.firestore,e.converter,NT(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var KD=class n extends _v{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=(function(i,s,o){if(i.startAt!==null)throw new te(H.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new te(H.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Mc(s,o)})(e._query,this._field,this._direction);return new Lc(e.firestore,e.converter,(function(i,s){let o=i.explicitOrderBy.concat([s]);return new Yo(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)})(e._query,t))}};function Rv(n,e="asc"){let t=e,r=wS("orderBy",n);return KD._create(r,t)}function DF(n,e,t){if(typeof(t=Zr(t))=="string"){if(t==="")throw new te(H.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!sV(e)&&t.indexOf("/")!==-1)throw new te(H.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(yt.fromString(t));if(!le.isDocumentKey(r))throw new te(H.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return W2(n,new le(r))}if(t instanceof mn)return W2(n,t._key);throw new te(H.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${wv(t)}.`)}function SF(n,e){if(!Array.isArray(n)||n.length===0)throw new te(H.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function YV(n,e){let t=(function(i,s){for(let o of i)for(let a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null})(n.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new te(H.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new te(H.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var QD=class{convertValue(e,t="none"){switch(Qo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return mt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(xs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw de(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return ea(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertVectorValue(e){let t=e.fields?.[Vu].arrayValue?.values?.map(r=>mt(r.doubleValue));return new Ko(t)}convertGeoPoint(e){return new Wo(mt(e.latitude),mt(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=Iv(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(rp(e));default:return null}}convertTimestamp(e){let t=As(e);return new $t(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=yt.fromString(e);rt(TV(r),9688,{name:e});let i=new W_(r.get(1),r.get(3)),s=new le(r.popFirst(5));return i.isEqual(t)||Ss(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}};function kQ(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var xc=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Rc=class n extends yv{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new Mu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(wS("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new te(H.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,t={};return t.type=n._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};Rc._jsonSchemaVersion="firestore/documentSnapshot/1.0",Rc._jsonSchema={type:Bt("string",Rc._jsonSchemaVersion),bundleSource:Bt("string","DocumentSnapshot"),bundleName:Bt("string"),bundle:Bt("string")};var Mu=class extends Rc{data(e={}){return super.data(e)}},Pu=class n{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new xc(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Mu(this._firestore,this._userDataWriter,r.key,r,new xc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new te(H.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{let c=new Mu(i._firestore,i._userDataWriter,a.doc.key,a.doc,new xc(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{let c=new Mu(i._firestore,i._userDataWriter,a.doc.key,a.doc,new xc(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),d=-1,h=-1;return a.type!==0&&(d=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:NQ(a.type),doc:c,oldIndex:d,newIndex:h}})}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new te(H.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=n._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=ep.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let t=[],r=[],i=[];return this.docs.forEach(s=>{s._document!==null&&(t.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function NQ(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return de(61501,{type:n})}}Pu._jsonSchemaVersion="firestore/querySnapshot/1.0",Pu._jsonSchema={type:Bt("string",Pu._jsonSchemaVersion),bundleSource:Bt("string","QuerySnapshot"),bundleName:Bt("string"),bundle:Bt("string")};var vv=class extends QD{constructor(e){super(),this.firestore=e}convertBytes(e){return new Go(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new mn(this.firestore,null,t)}};function Xu(n,e,t){n=Ts(n,mn);let r=Ts(n.firestore,Zo),i=kQ(n.converter,e,t);return ES(r,[TQ(yS(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,Ds.none())])}function yp(n,e,t,...r){n=Ts(n,mn);let i=Ts(n.firestore,Zo),s=yS(i),o;return o=typeof(e=Zr(e))=="string"||e instanceof Wu?SQ(s,"updateDoc",n._key,e,t,r):DQ(s,"updateDoc",n._key,e),ES(i,[o.toMutation(n._key,Ds.exists(!0))])}function _p(n){return ES(Ts(n.firestore,Zo),[new sp(n._key,Ds.none())])}function vp(n,...e){n=Zr(n);let t={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||TF(e[r])||(t=e[r++]);let i={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(TF(e[r])){let c=e[r];e[r]=c.next?.bind(c),e[r+1]=c.error?.bind(c),e[r+2]=c.complete?.bind(c)}let s,o,a;if(n instanceof mn)o=Ts(n.firestore,Zo),a=sS(n._key.path),s={next:c=>{e[r]&&e[r](MQ(o,n,c))},error:e[r+1],complete:e[r+2]};else{let c=Ts(n,Lc);o=Ts(c.firestore,Zo),a=c._query;let d=new vv(o);s={next:h=>{e[r]&&e[r](new Pu(o,d,c,h))},error:e[r+1],complete:e[r+2]},RQ(n._query)}return(function(d,h,p,y){let I=new UD(y),k=new ND(h,I,p);return d.asyncQueue.enqueueAndForget(async()=>nQ(await wF(d),k)),()=>{I.Nu(),d.asyncQueue.enqueueAndForget(async()=>rQ(await wF(d),k))}})(zV(o),a,i,s)}function ES(n,e){return(function(r,i){let s=new Cs;return r.asyncQueue.enqueueAndForget(async()=>dQ(await EQ(r),i,s)),s.promise})(zV(n),e)}function MQ(n,e,t){let r=t.docs.get(e._key),i=new vv(n);return new Rc(n,i,e._key,r,new xc(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(i){Ku=i})(jO),Vf(new _s("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),a=new Zo(new hT(r.getProvider("auth-internal")),new gT(o,r.getProvider("app-check-internal")),(function(d,h){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new te(H.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new W_(d.options.projectId,h)})(o,i),o);return s=z({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),jo(F2,V2,e),jo(F2,V2,"esm2020")})();var JV=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},XV={};var Ns,IS;(function(){var n;function e(T,v){function E(){}E.prototype=v.prototype,T.D=v.prototype,T.prototype=new E,T.prototype.constructor=T,T.C=function(C,b,A){for(var w=Array(arguments.length-2),pt=2;pt<arguments.length;pt++)w[pt-2]=arguments[pt];return v.prototype[b].apply(C,w)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(T,v,E){E||(E=0);var C=Array(16);if(typeof v=="string")for(var b=0;16>b;++b)C[b]=v.charCodeAt(E++)|v.charCodeAt(E++)<<8|v.charCodeAt(E++)<<16|v.charCodeAt(E++)<<24;else for(b=0;16>b;++b)C[b]=v[E++]|v[E++]<<8|v[E++]<<16|v[E++]<<24;v=T.g[0],E=T.g[1],b=T.g[2];var A=T.g[3],w=v+(A^E&(b^A))+C[0]+3614090360&4294967295;v=E+(w<<7&4294967295|w>>>25),w=A+(b^v&(E^b))+C[1]+3905402710&4294967295,A=v+(w<<12&4294967295|w>>>20),w=b+(E^A&(v^E))+C[2]+606105819&4294967295,b=A+(w<<17&4294967295|w>>>15),w=E+(v^b&(A^v))+C[3]+3250441966&4294967295,E=b+(w<<22&4294967295|w>>>10),w=v+(A^E&(b^A))+C[4]+4118548399&4294967295,v=E+(w<<7&4294967295|w>>>25),w=A+(b^v&(E^b))+C[5]+1200080426&4294967295,A=v+(w<<12&4294967295|w>>>20),w=b+(E^A&(v^E))+C[6]+2821735955&4294967295,b=A+(w<<17&4294967295|w>>>15),w=E+(v^b&(A^v))+C[7]+4249261313&4294967295,E=b+(w<<22&4294967295|w>>>10),w=v+(A^E&(b^A))+C[8]+1770035416&4294967295,v=E+(w<<7&4294967295|w>>>25),w=A+(b^v&(E^b))+C[9]+2336552879&4294967295,A=v+(w<<12&4294967295|w>>>20),w=b+(E^A&(v^E))+C[10]+4294925233&4294967295,b=A+(w<<17&4294967295|w>>>15),w=E+(v^b&(A^v))+C[11]+2304563134&4294967295,E=b+(w<<22&4294967295|w>>>10),w=v+(A^E&(b^A))+C[12]+1804603682&4294967295,v=E+(w<<7&4294967295|w>>>25),w=A+(b^v&(E^b))+C[13]+4254626195&4294967295,A=v+(w<<12&4294967295|w>>>20),w=b+(E^A&(v^E))+C[14]+2792965006&4294967295,b=A+(w<<17&4294967295|w>>>15),w=E+(v^b&(A^v))+C[15]+1236535329&4294967295,E=b+(w<<22&4294967295|w>>>10),w=v+(b^A&(E^b))+C[1]+4129170786&4294967295,v=E+(w<<5&4294967295|w>>>27),w=A+(E^b&(v^E))+C[6]+3225465664&4294967295,A=v+(w<<9&4294967295|w>>>23),w=b+(v^E&(A^v))+C[11]+643717713&4294967295,b=A+(w<<14&4294967295|w>>>18),w=E+(A^v&(b^A))+C[0]+3921069994&4294967295,E=b+(w<<20&4294967295|w>>>12),w=v+(b^A&(E^b))+C[5]+3593408605&4294967295,v=E+(w<<5&4294967295|w>>>27),w=A+(E^b&(v^E))+C[10]+38016083&4294967295,A=v+(w<<9&4294967295|w>>>23),w=b+(v^E&(A^v))+C[15]+3634488961&4294967295,b=A+(w<<14&4294967295|w>>>18),w=E+(A^v&(b^A))+C[4]+3889429448&4294967295,E=b+(w<<20&4294967295|w>>>12),w=v+(b^A&(E^b))+C[9]+568446438&4294967295,v=E+(w<<5&4294967295|w>>>27),w=A+(E^b&(v^E))+C[14]+3275163606&4294967295,A=v+(w<<9&4294967295|w>>>23),w=b+(v^E&(A^v))+C[3]+4107603335&4294967295,b=A+(w<<14&4294967295|w>>>18),w=E+(A^v&(b^A))+C[8]+1163531501&4294967295,E=b+(w<<20&4294967295|w>>>12),w=v+(b^A&(E^b))+C[13]+2850285829&4294967295,v=E+(w<<5&4294967295|w>>>27),w=A+(E^b&(v^E))+C[2]+4243563512&4294967295,A=v+(w<<9&4294967295|w>>>23),w=b+(v^E&(A^v))+C[7]+1735328473&4294967295,b=A+(w<<14&4294967295|w>>>18),w=E+(A^v&(b^A))+C[12]+2368359562&4294967295,E=b+(w<<20&4294967295|w>>>12),w=v+(E^b^A)+C[5]+4294588738&4294967295,v=E+(w<<4&4294967295|w>>>28),w=A+(v^E^b)+C[8]+2272392833&4294967295,A=v+(w<<11&4294967295|w>>>21),w=b+(A^v^E)+C[11]+1839030562&4294967295,b=A+(w<<16&4294967295|w>>>16),w=E+(b^A^v)+C[14]+4259657740&4294967295,E=b+(w<<23&4294967295|w>>>9),w=v+(E^b^A)+C[1]+2763975236&4294967295,v=E+(w<<4&4294967295|w>>>28),w=A+(v^E^b)+C[4]+1272893353&4294967295,A=v+(w<<11&4294967295|w>>>21),w=b+(A^v^E)+C[7]+4139469664&4294967295,b=A+(w<<16&4294967295|w>>>16),w=E+(b^A^v)+C[10]+3200236656&4294967295,E=b+(w<<23&4294967295|w>>>9),w=v+(E^b^A)+C[13]+681279174&4294967295,v=E+(w<<4&4294967295|w>>>28),w=A+(v^E^b)+C[0]+3936430074&4294967295,A=v+(w<<11&4294967295|w>>>21),w=b+(A^v^E)+C[3]+3572445317&4294967295,b=A+(w<<16&4294967295|w>>>16),w=E+(b^A^v)+C[6]+76029189&4294967295,E=b+(w<<23&4294967295|w>>>9),w=v+(E^b^A)+C[9]+3654602809&4294967295,v=E+(w<<4&4294967295|w>>>28),w=A+(v^E^b)+C[12]+3873151461&4294967295,A=v+(w<<11&4294967295|w>>>21),w=b+(A^v^E)+C[15]+530742520&4294967295,b=A+(w<<16&4294967295|w>>>16),w=E+(b^A^v)+C[2]+3299628645&4294967295,E=b+(w<<23&4294967295|w>>>9),w=v+(b^(E|~A))+C[0]+4096336452&4294967295,v=E+(w<<6&4294967295|w>>>26),w=A+(E^(v|~b))+C[7]+1126891415&4294967295,A=v+(w<<10&4294967295|w>>>22),w=b+(v^(A|~E))+C[14]+2878612391&4294967295,b=A+(w<<15&4294967295|w>>>17),w=E+(A^(b|~v))+C[5]+4237533241&4294967295,E=b+(w<<21&4294967295|w>>>11),w=v+(b^(E|~A))+C[12]+1700485571&4294967295,v=E+(w<<6&4294967295|w>>>26),w=A+(E^(v|~b))+C[3]+2399980690&4294967295,A=v+(w<<10&4294967295|w>>>22),w=b+(v^(A|~E))+C[10]+4293915773&4294967295,b=A+(w<<15&4294967295|w>>>17),w=E+(A^(b|~v))+C[1]+2240044497&4294967295,E=b+(w<<21&4294967295|w>>>11),w=v+(b^(E|~A))+C[8]+1873313359&4294967295,v=E+(w<<6&4294967295|w>>>26),w=A+(E^(v|~b))+C[15]+4264355552&4294967295,A=v+(w<<10&4294967295|w>>>22),w=b+(v^(A|~E))+C[6]+2734768916&4294967295,b=A+(w<<15&4294967295|w>>>17),w=E+(A^(b|~v))+C[13]+1309151649&4294967295,E=b+(w<<21&4294967295|w>>>11),w=v+(b^(E|~A))+C[4]+4149444226&4294967295,v=E+(w<<6&4294967295|w>>>26),w=A+(E^(v|~b))+C[11]+3174756917&4294967295,A=v+(w<<10&4294967295|w>>>22),w=b+(v^(A|~E))+C[2]+718787259&4294967295,b=A+(w<<15&4294967295|w>>>17),w=E+(A^(b|~v))+C[9]+3951481745&4294967295,T.g[0]=T.g[0]+v&4294967295,T.g[1]=T.g[1]+(b+(w<<21&4294967295|w>>>11))&4294967295,T.g[2]=T.g[2]+b&4294967295,T.g[3]=T.g[3]+A&4294967295}r.prototype.u=function(T,v){v===void 0&&(v=T.length);for(var E=v-this.blockSize,C=this.B,b=this.h,A=0;A<v;){if(b==0)for(;A<=E;)i(this,T,A),A+=this.blockSize;if(typeof T=="string"){for(;A<v;)if(C[b++]=T.charCodeAt(A++),b==this.blockSize){i(this,C),b=0;break}}else for(;A<v;)if(C[b++]=T[A++],b==this.blockSize){i(this,C),b=0;break}}this.h=b,this.o+=v},r.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var v=1;v<T.length-8;++v)T[v]=0;var E=8*this.o;for(v=T.length-8;v<T.length;++v)T[v]=E&255,E/=256;for(this.u(T),T=Array(16),v=E=0;4>v;++v)for(var C=0;32>C;C+=8)T[E++]=this.g[v]>>>C&255;return T};function s(T,v){var E=a;return Object.prototype.hasOwnProperty.call(E,T)?E[T]:E[T]=v(T)}function o(T,v){this.h=v;for(var E=[],C=!0,b=T.length-1;0<=b;b--){var A=T[b]|0;C&&A==v||(E[b]=A,C=!1)}this.g=E}var a={};function c(T){return-128<=T&&128>T?s(T,function(v){return new o([v|0],0>v?-1:0)}):new o([T|0],0>T?-1:0)}function d(T){if(isNaN(T)||!isFinite(T))return p;if(0>T)return M(d(-T));for(var v=[],E=1,C=0;T>=E;C++)v[C]=T/E|0,E*=4294967296;return new o(v,0)}function h(T,v){if(T.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(T.charAt(0)=="-")return M(h(T.substring(1),v));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var E=d(Math.pow(v,8)),C=p,b=0;b<T.length;b+=8){var A=Math.min(8,T.length-b),w=parseInt(T.substring(b,b+A),v);8>A?(A=d(Math.pow(v,A)),C=C.j(A).add(d(w))):(C=C.j(E),C=C.add(d(w)))}return C}var p=c(0),y=c(1),I=c(16777216);n=o.prototype,n.m=function(){if(P(this))return-M(this).m();for(var T=0,v=1,E=0;E<this.g.length;E++){var C=this.i(E);T+=(0<=C?C:4294967296+C)*v,v*=4294967296}return T},n.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(k(this))return"0";if(P(this))return"-"+M(this).toString(T);for(var v=d(Math.pow(T,6)),E=this,C="";;){var b=Ce(E,v).g;E=$(E,b.j(v));var A=((0<E.g.length?E.g[0]:E.h)>>>0).toString(T);if(E=b,k(E))return A+C;for(;6>A.length;)A="0"+A;C=A+C}},n.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function k(T){if(T.h!=0)return!1;for(var v=0;v<T.g.length;v++)if(T.g[v]!=0)return!1;return!0}function P(T){return T.h==-1}n.l=function(T){return T=$(this,T),P(T)?-1:k(T)?0:1};function M(T){for(var v=T.g.length,E=[],C=0;C<v;C++)E[C]=~T.g[C];return new o(E,~T.h).add(y)}n.abs=function(){return P(this)?M(this):this},n.add=function(T){for(var v=Math.max(this.g.length,T.g.length),E=[],C=0,b=0;b<=v;b++){var A=C+(this.i(b)&65535)+(T.i(b)&65535),w=(A>>>16)+(this.i(b)>>>16)+(T.i(b)>>>16);C=w>>>16,A&=65535,w&=65535,E[b]=w<<16|A}return new o(E,E[E.length-1]&-2147483648?-1:0)};function $(T,v){return T.add(M(v))}n.j=function(T){if(k(this)||k(T))return p;if(P(this))return P(T)?M(this).j(M(T)):M(M(this).j(T));if(P(T))return M(this.j(M(T)));if(0>this.l(I)&&0>T.l(I))return d(this.m()*T.m());for(var v=this.g.length+T.g.length,E=[],C=0;C<2*v;C++)E[C]=0;for(C=0;C<this.g.length;C++)for(var b=0;b<T.g.length;b++){var A=this.i(C)>>>16,w=this.i(C)&65535,pt=T.i(b)>>>16,qn=T.i(b)&65535;E[2*C+2*b]+=w*qn,Y(E,2*C+2*b),E[2*C+2*b+1]+=A*qn,Y(E,2*C+2*b+1),E[2*C+2*b+1]+=w*pt,Y(E,2*C+2*b+1),E[2*C+2*b+2]+=A*pt,Y(E,2*C+2*b+2)}for(C=0;C<v;C++)E[C]=E[2*C+1]<<16|E[2*C];for(C=v;C<2*v;C++)E[C]=0;return new o(E,0)};function Y(T,v){for(;(T[v]&65535)!=T[v];)T[v+1]+=T[v]>>>16,T[v]&=65535,v++}function ee(T,v){this.g=T,this.h=v}function Ce(T,v){if(k(v))throw Error("division by zero");if(k(T))return new ee(p,p);if(P(T))return v=Ce(M(T),v),new ee(M(v.g),M(v.h));if(P(v))return v=Ce(T,M(v)),new ee(M(v.g),v.h);if(30<T.g.length){if(P(T)||P(v))throw Error("slowDivide_ only works with positive integers.");for(var E=y,C=v;0>=C.l(T);)E=Je(E),C=Je(C);var b=pe(E,1),A=pe(C,1);for(C=pe(C,2),E=pe(E,2);!k(C);){var w=A.add(C);0>=w.l(T)&&(b=b.add(E),A=w),C=pe(C,1),E=pe(E,1)}return v=$(T,b.j(v)),new ee(b,v)}for(b=p;0<=T.l(v);){for(E=Math.max(1,Math.floor(T.m()/v.m())),C=Math.ceil(Math.log(E)/Math.LN2),C=48>=C?1:Math.pow(2,C-48),A=d(E),w=A.j(v);P(w)||0<w.l(T);)E-=C,A=d(E),w=A.j(v);k(A)&&(A=y),b=b.add(A),T=$(T,w)}return new ee(b,T)}n.A=function(T){return Ce(this,T).h},n.and=function(T){for(var v=Math.max(this.g.length,T.g.length),E=[],C=0;C<v;C++)E[C]=this.i(C)&T.i(C);return new o(E,this.h&T.h)},n.or=function(T){for(var v=Math.max(this.g.length,T.g.length),E=[],C=0;C<v;C++)E[C]=this.i(C)|T.i(C);return new o(E,this.h|T.h)},n.xor=function(T){for(var v=Math.max(this.g.length,T.g.length),E=[],C=0;C<v;C++)E[C]=this.i(C)^T.i(C);return new o(E,this.h^T.h)};function Je(T){for(var v=T.g.length+1,E=[],C=0;C<v;C++)E[C]=T.i(C)<<1|T.i(C-1)>>>31;return new o(E,T.h)}function pe(T,v){var E=v>>5;v%=32;for(var C=T.g.length-E,b=[],A=0;A<C;A++)b[A]=0<v?T.i(A+E)>>>v|T.i(A+E+1)<<32-v:T.i(A+E);return new o(b,T.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,IS=XV.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=h,Ns=XV.Integer=o}).apply(typeof JV<"u"?JV:typeof self<"u"?self:typeof window<"u"?window:{});var kv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ms={};var bS,PQ,Zu,CS,wp,Nv,TS,DS,SS;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,f,m){return l==Array.prototype||l==Object.prototype||(l[f]=m.value),l};function t(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof kv=="object"&&kv];for(var f=0;f<l.length;++f){var m=l[f];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}var r=t(this);function i(l,f){if(f)e:{var m=r;l=l.split(".");for(var D=0;D<l.length-1;D++){var F=l[D];if(!(F in m))break e;m=m[F]}l=l[l.length-1],D=m[l],f=f(D),f!=D&&f!=null&&e(m,l,{configurable:!0,writable:!0,value:f})}}function s(l,f){l instanceof String&&(l+="");var m=0,D=!1,F={next:function(){if(!D&&m<l.length){var U=m++;return{value:f(U,l[U]),done:!1}}return D=!0,{done:!0,value:void 0}}};return F[Symbol.iterator]=function(){return F},F}i("Array.prototype.values",function(l){return l||function(){return s(this,function(f,m){return m})}});var o=o||{},a=this||self;function c(l){var f=typeof l;return f=f!="object"?f:l?Array.isArray(l)?"array":f:"null",f=="array"||f=="object"&&typeof l.length=="number"}function d(l){var f=typeof l;return f=="object"&&l!=null||f=="function"}function h(l,f,m){return l.call.apply(l.bind,arguments)}function p(l,f,m){if(!l)throw Error();if(2<arguments.length){var D=Array.prototype.slice.call(arguments,2);return function(){var F=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(F,D),l.apply(f,F)}}return function(){return l.apply(f,arguments)}}function y(l,f,m){return y=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,y.apply(null,arguments)}function I(l,f){var m=Array.prototype.slice.call(arguments,1);return function(){var D=m.slice();return D.push.apply(D,arguments),l.apply(this,D)}}function k(l,f){function m(){}m.prototype=f.prototype,l.aa=f.prototype,l.prototype=new m,l.prototype.constructor=l,l.Qb=function(D,F,U){for(var K=Array(arguments.length-2),We=2;We<arguments.length;We++)K[We-2]=arguments[We];return f.prototype[F].apply(D,K)}}function P(l){let f=l.length;if(0<f){let m=Array(f);for(let D=0;D<f;D++)m[D]=l[D];return m}return[]}function M(l,f){for(let m=1;m<arguments.length;m++){let D=arguments[m];if(c(D)){let F=l.length||0,U=D.length||0;l.length=F+U;for(let K=0;K<U;K++)l[F+K]=D[K]}else l.push(D)}}class ${constructor(f,m){this.i=f,this.j=m,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function Y(l){return/^[\s\xa0]*$/.test(l)}function ee(){var l=a.navigator;return l&&(l=l.userAgent)?l:""}function Ce(l){return Ce[" "](l),l}Ce[" "]=function(){};var Je=ee().indexOf("Gecko")!=-1&&!(ee().toLowerCase().indexOf("webkit")!=-1&&ee().indexOf("Edge")==-1)&&!(ee().indexOf("Trident")!=-1||ee().indexOf("MSIE")!=-1)&&ee().indexOf("Edge")==-1;function pe(l,f,m){for(let D in l)f.call(m,l[D],D,l)}function T(l,f){for(let m in l)f.call(void 0,l[m],m,l)}function v(l){let f={};for(let m in l)f[m]=l[m];return f}let E="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function C(l,f){let m,D;for(let F=1;F<arguments.length;F++){D=arguments[F];for(m in D)l[m]=D[m];for(let U=0;U<E.length;U++)m=E[U],Object.prototype.hasOwnProperty.call(D,m)&&(l[m]=D[m])}}function b(l){var f=1;l=l.split(":");let m=[];for(;0<f&&l.length;)m.push(l.shift()),f--;return l.length&&m.push(l.join(":")),m}function A(l){a.setTimeout(()=>{throw l},0)}function w(){var l=Hs;let f=null;return l.g&&(f=l.g,l.g=l.g.next,l.g||(l.h=null),f.next=null),f}class pt{constructor(){this.h=this.g=null}add(f,m){let D=qn.get();D.set(f,m),this.h?this.h.next=D:this.g=D,this.h=D}}var qn=new $(()=>new W0,l=>l.reset());class W0{constructor(){this.next=this.g=this.h=null}set(f,m){this.h=f,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let ma,ii=!1,Hs=new pt,Qp=()=>{let l=a.Promise.resolve(void 0);ma=()=>{l.then(Yp)}};var Yp=()=>{for(var l;l=w();){try{l.h.call(l.g)}catch(m){A(m)}var f=qn;f.j(l),100>f.h&&(f.h++,l.next=f.g,f.g=l)}ii=!1};function kr(){this.s=this.s,this.C=this.C}kr.prototype.s=!1,kr.prototype.ma=function(){this.s||(this.s=!0,this.N())},kr.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Kt(l,f){this.type=l,this.g=this.target=f,this.defaultPrevented=!1}Kt.prototype.h=function(){this.defaultPrevented=!0};var tl=(function(){if(!a.addEventListener||!Object.defineProperty)return!1;var l=!1,f=Object.defineProperty({},"passive",{get:function(){l=!0}});try{let m=()=>{};a.addEventListener("test",m,f),a.removeEventListener("test",m,f)}catch{}return l})();function zi(l,f){if(Kt.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var m=this.type=l.type,D=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=f,f=l.relatedTarget){if(Je){e:{try{Ce(f.nodeName);var F=!0;break e}catch{}F=!1}F||(f=null)}}else m=="mouseover"?f=l.fromElement:m=="mouseout"&&(f=l.toElement);this.relatedTarget=f,D?(this.clientX=D.clientX!==void 0?D.clientX:D.pageX,this.clientY=D.clientY!==void 0?D.clientY:D.pageY,this.screenX=D.screenX||0,this.screenY=D.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:Od[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&zi.aa.h.call(this)}}k(zi,Kt);var Od={2:"touch",3:"pen",4:"mouse"};zi.prototype.h=function(){zi.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var Gi="closure_listenable_"+(1e6*Math.random()|0),Fd=0;function Jp(l,f,m,D,F){this.listener=l,this.proxy=null,this.src=f,this.type=m,this.capture=!!D,this.ha=F,this.key=++Fd,this.da=this.fa=!1}function ya(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function nl(l){this.src=l,this.g={},this.h=0}nl.prototype.add=function(l,f,m,D,F){var U=l.toString();l=this.g[U],l||(l=this.g[U]=[],this.h++);var K=il(l,f,D,F);return-1<K?(f=l[K],m||(f.fa=!1)):(f=new Jp(f,this.src,U,!!D,F),f.fa=m,l.push(f)),f};function rl(l,f){var m=f.type;if(m in l.g){var D=l.g[m],F=Array.prototype.indexOf.call(D,f,void 0),U;(U=0<=F)&&Array.prototype.splice.call(D,F,1),U&&(ya(f),l.g[m].length==0&&(delete l.g[m],l.h--))}}function il(l,f,m,D){for(var F=0;F<l.length;++F){var U=l[F];if(!U.da&&U.listener==f&&U.capture==!!m&&U.ha==D)return F}return-1}var _a="closure_lm_"+(1e6*Math.random()|0),sl={};function Xp(l,f,m,D,F){if(D&&D.once)return al(l,f,m,D,F);if(Array.isArray(f)){for(var U=0;U<f.length;U++)Xp(l,f[U],m,D,F);return null}return m=Wi(m),l&&l[Gi]?l.K(f,m,d(D)?!!D.capture:!!D,F):ol(l,f,m,!1,D,F)}function ol(l,f,m,D,F,U){if(!f)throw Error("Invalid event type");var K=d(F)?!!F.capture:!!F,We=cl(l);if(We||(l[_a]=We=new nl(l)),m=We.add(f,m,D,K,U),m.proxy)return m;if(D=Vd(),m.proxy=D,D.src=l,D.listener=m,l.addEventListener)tl||(F=K),F===void 0&&(F=!1),l.addEventListener(f.toString(),D,F);else if(l.attachEvent)l.attachEvent(va(f.toString()),D);else if(l.addListener&&l.removeListener)l.addListener(D);else throw Error("addEventListener and attachEvent are unavailable.");return m}function Vd(){function l(m){return f.call(l.src,l.listener,m)}let f=K0;return l}function al(l,f,m,D,F){if(Array.isArray(f)){for(var U=0;U<f.length;U++)al(l,f[U],m,D,F);return null}return m=Wi(m),l&&l[Gi]?l.L(f,m,d(D)?!!D.capture:!!D,F):ol(l,f,m,!0,D,F)}function Qt(l,f,m,D,F){if(Array.isArray(f))for(var U=0;U<f.length;U++)Qt(l,f[U],m,D,F);else D=d(D)?!!D.capture:!!D,m=Wi(m),l&&l[Gi]?(l=l.i,f=String(f).toString(),f in l.g&&(U=l.g[f],m=il(U,m,D,F),-1<m&&(ya(U[m]),Array.prototype.splice.call(U,m,1),U.length==0&&(delete l.g[f],l.h--)))):l&&(l=cl(l))&&(f=l.g[f.toString()],l=-1,f&&(l=il(f,m,D,F)),(m=-1<l?f[l]:null)&&Yt(m))}function Yt(l){if(typeof l!="number"&&l&&!l.da){var f=l.src;if(f&&f[Gi])rl(f.i,l);else{var m=l.type,D=l.proxy;f.removeEventListener?f.removeEventListener(m,D,l.capture):f.detachEvent?f.detachEvent(va(m),D):f.addListener&&f.removeListener&&f.removeListener(D),(m=cl(f))?(rl(m,l),m.h==0&&(m.src=null,f[_a]=null)):ya(l)}}}function va(l){return l in sl?sl[l]:sl[l]="on"+l}function K0(l,f){if(l.da)l=!0;else{f=new zi(f,this);var m=l.listener,D=l.ha||l.src;l.fa&&Yt(l),l=m.call(D,f)}return l}function cl(l){return l=l[_a],l instanceof nl?l:null}var Ld="__closure_events_fn_"+(1e9*Math.random()>>>0);function Wi(l){return typeof l=="function"?l:(l[Ld]||(l[Ld]=function(f){return l.handleEvent(f)}),l[Ld])}function Jt(){kr.call(this),this.i=new nl(this),this.M=this,this.F=null}k(Jt,kr),Jt.prototype[Gi]=!0,Jt.prototype.removeEventListener=function(l,f,m,D){Qt(this,l,f,m,D)};function cn(l,f){var m,D=l.F;if(D)for(m=[];D;D=D.F)m.push(D);if(l=l.M,D=f.type||f,typeof f=="string")f=new Kt(f,l);else if(f instanceof Kt)f.target=f.target||l;else{var F=f;f=new Kt(D,l),C(f,F)}if(F=!0,m)for(var U=m.length-1;0<=U;U--){var K=f.g=m[U];F=qs(K,D,!0,f)&&F}if(K=f.g=l,F=qs(K,D,!0,f)&&F,F=qs(K,D,!1,f)&&F,m)for(U=0;U<m.length;U++)K=f.g=m[U],F=qs(K,D,!1,f)&&F}Jt.prototype.N=function(){if(Jt.aa.N.call(this),this.i){var l=this.i,f;for(f in l.g){for(var m=l.g[f],D=0;D<m.length;D++)ya(m[D]);delete l.g[f],l.h--}}this.F=null},Jt.prototype.K=function(l,f,m,D){return this.i.add(String(l),f,!1,m,D)},Jt.prototype.L=function(l,f,m,D){return this.i.add(String(l),f,!0,m,D)};function qs(l,f,m,D){if(f=l.i.g[String(f)],!f)return!0;f=f.concat();for(var F=!0,U=0;U<f.length;++U){var K=f[U];if(K&&!K.da&&K.capture==m){var We=K.listener,Dt=K.ha||K.src;K.fa&&rl(l.i,K),F=We.call(Dt,D)!==!1&&F}}return F&&!D.defaultPrevented}function Zp(l,f,m){if(typeof l=="function")m&&(l=y(l,m));else if(l&&typeof l.handleEvent=="function")l=y(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:a.setTimeout(l,f||0)}function eg(l){l.g=Zp(()=>{l.g=null,l.i&&(l.i=!1,eg(l))},l.l);let f=l.h;l.h=null,l.m.apply(null,f)}class tg extends kr{constructor(f,m){super(),this.m=f,this.l=m,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:eg(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function zs(l){kr.call(this),this.h=l,this.g={}}k(zs,kr);var Gs=[];function ll(l){pe(l.g,function(f,m){this.g.hasOwnProperty(m)&&Yt(f)},l),l.g={}}zs.prototype.N=function(){zs.aa.N.call(this),ll(this)},zs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var wa=a.JSON.stringify,Ki=a.JSON.parse,ng=class{stringify(l){return a.JSON.stringify(l,void 0)}parse(l){return a.JSON.parse(l,void 0)}};function Ws(){}Ws.prototype.h=null;function Ud(l){return l.h||(l.h=l.i())}function Ks(){}var Qs={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Xt(){Kt.call(this,"d")}k(Xt,Kt);function ul(){Kt.call(this,"c")}k(ul,Kt);var Xn={},Ys=null;function dl(){return Ys=Ys||new Jt}Xn.La="serverreachability";function rg(l){Kt.call(this,Xn.La,l)}k(rg,Kt);function gr(l){let f=dl();cn(f,new rg(f))}Xn.STAT_EVENT="statevent";function ig(l,f){Kt.call(this,Xn.STAT_EVENT,l),this.stat=f}k(ig,Kt);function vn(l){let f=dl();cn(f,new ig(f,l))}Xn.Ma="timingevent";function Ea(l,f){Kt.call(this,Xn.Ma,l),this.size=f}k(Ea,Kt);function Js(l,f){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){l()},f)}function Xs(){this.g=!0}Xs.prototype.xa=function(){this.g=!1};function jd(l,f,m,D,F,U){l.info(function(){if(l.g)if(U)for(var K="",We=U.split("&"),Dt=0;Dt<We.length;Dt++){var Ke=We[Dt].split("=");if(1<Ke.length){var Cn=Ke[0];Ke=Ke[1];var Tn=Cn.split("_");K=2<=Tn.length&&Tn[1]=="type"?K+(Cn+"="+Ke+"&"):K+(Cn+"=redacted&")}}else K=null;else K=U;return"XMLHTTP REQ ("+D+") [attempt "+F+"]: "+f+`
`+m+`
`+K})}function Ia(l,f,m,D,F,U,K){l.info(function(){return"XMLHTTP RESP ("+D+") [ attempt "+F+"]: "+f+`
`+m+`
`+U+" "+K})}function Zs(l,f,m,D){l.info(function(){return"XMLHTTP TEXT ("+f+"): "+sg(l,m)+(D?" "+D:"")})}function si(l,f){l.info(function(){return"TIMEOUT: "+f})}Xs.prototype.info=function(){};function sg(l,f){if(!l.g)return f;if(!f)return null;try{var m=JSON.parse(f);if(m){for(l=0;l<m.length;l++)if(Array.isArray(m[l])){var D=m[l];if(!(2>D.length)){var F=D[1];if(Array.isArray(F)&&!(1>F.length)){var U=F[0];if(U!="noop"&&U!="stop"&&U!="close")for(var K=1;K<F.length;K++)F[K]=""}}}}return wa(m)}catch{return f}}var ba={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},hl={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ca;function Ta(){}k(Ta,Ws),Ta.prototype.g=function(){return new XMLHttpRequest},Ta.prototype.i=function(){return{}},Ca=new Ta;function oi(l,f,m,D){this.j=l,this.i=f,this.l=m,this.R=D||1,this.U=new zs(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Bd}function Bd(){this.i=null,this.g="",this.h=!1}var og={},eo={};function fl(l,f,m){l.L=1,l.v=yl(Nr(f)),l.m=m,l.P=!0,pl(l,null)}function pl(l,f){l.F=Date.now(),no(l),l.A=Nr(l.v);var m=l.A,D=l.R;Array.isArray(D)||(D=[String(D)]),pg(m.i,"t",D),l.C=0,m=l.j.J,l.h=new Bd,l.g=g(l.j,m?f:null,!l.m),0<l.O&&(l.M=new tg(y(l.Y,l,l.g),l.O)),f=l.U,m=l.g,D=l.ca;var F="readystatechange";Array.isArray(F)||(F&&(Gs[0]=F.toString()),F=Gs);for(var U=0;U<F.length;U++){var K=Xp(m,F[U],D||f.handleEvent,!1,f.h||f);if(!K)break;f.g[K.key]=K}f=l.H?v(l.H):{},l.m?(l.u||(l.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,f)):(l.u="GET",l.g.ea(l.A,l.u,null,f)),gr(),jd(l.i,l.u,l.A,l.l,l.R,l.m)}oi.prototype.ca=function(l){l=l.target;let f=this.M;f&&Gn(l)==3?f.j():this.Y(l)},oi.prototype.Y=function(l){try{if(l==this.g)e:{let Tn=Gn(this.g);var f=this.g.Ba();let Dl=this.g.Z();if(!(3>Tn)&&(Tn!=3||this.g&&(this.h.h||this.g.oa()||vg(this.g)))){this.J||Tn!=4||f==7||(f==8||0>=Dl?gr(3):gr(2)),gl(this);var m=this.g.Z();this.X=m;t:if(to(this)){var D=vg(this.g);l="";var F=D.length,U=Gn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ai(this),ro(this);var K="";break t}this.h.i=new a.TextDecoder}for(f=0;f<F;f++)this.h.h=!0,l+=this.h.i.decode(D[f],{stream:!(U&&f==F-1)});D.length=0,this.h.g+=l,this.C=0,K=this.h.g}else K=this.g.oa();if(this.o=m==200,Ia(this.i,this.u,this.A,this.l,this.R,Tn,m),this.o){if(this.T&&!this.K){t:{if(this.g){var We,Dt=this.g;if((We=Dt.g?Dt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Y(We)){var Ke=We;break t}}Ke=null}if(m=Ke)Zs(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Da(this,m);else{this.o=!1,this.s=3,vn(12),ai(this),ro(this);break e}}if(this.P){m=!0;let Vr;for(;!this.J&&this.C<K.length;)if(Vr=Qi(this,K),Vr==eo){Tn==4&&(this.s=4,vn(14),m=!1),Zs(this.i,this.l,null,"[Incomplete Response]");break}else if(Vr==og){this.s=4,vn(15),Zs(this.i,this.l,K,"[Invalid Chunk]"),m=!1;break}else Zs(this.i,this.l,Vr,null),Da(this,Vr);if(to(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Tn!=4||K.length!=0||this.h.h||(this.s=1,vn(16),m=!1),this.o=this.o&&m,!m)Zs(this.i,this.l,K,"[Invalid Chunked Response]"),ai(this),ro(this);else if(0<K.length&&!this.W){this.W=!0;var Cn=this.j;Cn.g==this&&Cn.ba&&!Cn.M&&(Cn.j.info("Great, no buffering proxy detected. Bytes received: "+K.length),Tl(Cn),Cn.M=!0,vn(11))}}else Zs(this.i,this.l,K,null),Da(this,K);Tn==4&&ai(this),this.o&&!this.J&&(Tn==4?bn(this.j,this):(this.o=!1,no(this)))}else wg(this.g),m==400&&0<K.indexOf("Unknown SID")?(this.s=3,vn(12)):(this.s=0,vn(13)),ai(this),ro(this)}}}catch{}finally{}};function to(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function Qi(l,f){var m=l.C,D=f.indexOf(`
`,m);return D==-1?eo:(m=Number(f.substring(m,D)),isNaN(m)?og:(D+=1,D+m>f.length?eo:(f=f.slice(D,D+m),l.C=D+m,f)))}oi.prototype.cancel=function(){this.J=!0,ai(this)};function no(l){l.S=Date.now()+l.I,ag(l,l.I)}function ag(l,f){if(l.B!=null)throw Error("WatchDog timer not null");l.B=Js(y(l.ba,l),f)}function gl(l){l.B&&(a.clearTimeout(l.B),l.B=null)}oi.prototype.ba=function(){this.B=null;let l=Date.now();0<=l-this.S?(si(this.i,this.A),this.L!=2&&(gr(),vn(17)),ai(this),this.s=2,ro(this)):ag(this,this.S-l)};function ro(l){l.j.G==0||l.J||bn(l.j,l)}function ai(l){gl(l);var f=l.M;f&&typeof f.ma=="function"&&f.ma(),l.M=null,ll(l.U),l.g&&(f=l.g,l.g=null,f.abort(),f.ma())}function Da(l,f){try{var m=l.j;if(m.G!=0&&(m.g==l||Gd(m.h,l))){if(!l.K&&Gd(m.h,l)&&m.G==3){try{var D=m.Da.g.parse(f)}catch{D=null}if(Array.isArray(D)&&D.length==3){var F=D;if(F[0]==0){e:if(!m.u){if(m.g)if(m.g.F+3e3<l.F)Ji(m),uo(m);else break e;Cl(m),vn(18)}}else m.za=F[1],0<m.za-m.T&&37500>F[2]&&m.F&&m.v==0&&!m.C&&(m.C=Js(y(m.Za,m),6e3));if(1>=zd(m.h)&&m.ca){try{m.ca()}catch{}m.ca=void 0}}else ui(m,11)}else if((l.K||m.g==l)&&Ji(m),!Y(f))for(F=m.Da.g.parse(f),f=0;f<F.length;f++){let Ke=F[f];if(m.T=Ke[0],Ke=Ke[1],m.G==2)if(Ke[0]=="c"){m.K=Ke[1],m.ia=Ke[2];let Cn=Ke[3];Cn!=null&&(m.la=Cn,m.j.info("VER="+m.la));let Tn=Ke[4];Tn!=null&&(m.Aa=Tn,m.j.info("SVER="+m.Aa));let Dl=Ke[5];Dl!=null&&typeof Dl=="number"&&0<Dl&&(D=1.5*Dl,m.L=D,m.j.info("backChannelRequestTimeoutMs_="+D)),D=m;let Vr=l.g;if(Vr){let Eg=Vr.g?Vr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Eg){var U=D.h;U.g||Eg.indexOf("spdy")==-1&&Eg.indexOf("quic")==-1&&Eg.indexOf("h2")==-1||(U.j=U.l,U.g=new Set,U.h&&(mr(U,U.h),U.h=null))}if(D.D){let Y0=Vr.g?Vr.g.getResponseHeader("X-HTTP-Session-Id"):null;Y0&&(D.ya=Y0,ct(D.I,D.D,Y0))}}m.G=3,m.l&&m.l.ua(),m.ba&&(m.R=Date.now()-l.F,m.j.info("Handshake RTT: "+m.R+"ms")),D=m;var K=l;if(D.qa=u(D,D.J?D.ia:null,D.W),K.K){Zn(D.h,K);var We=K,Dt=D.L;Dt&&(We.I=Dt),We.B&&(gl(We),no(We)),D.g=K}else th(D);0<m.i.length&&Ma(m)}else Ke[0]!="stop"&&Ke[0]!="close"||ui(m,7);else m.G==3&&(Ke[0]=="stop"||Ke[0]=="close"?Ke[0]=="stop"?ui(m,7):El(m):Ke[0]!="noop"&&m.l&&m.l.ta(Ke),m.v=0)}}gr(4)}catch{}}var $d=class{constructor(l,f){this.g=l,this.map=f}};function Hd(l){this.l=l||10,a.PerformanceNavigationTiming?(l=a.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function qd(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function zd(l){return l.h?1:l.g?l.g.size:0}function Gd(l,f){return l.h?l.h==f:l.g?l.g.has(f):!1}function mr(l,f){l.g?l.g.add(f):l.h=f}function Zn(l,f){l.h&&l.h==f?l.h=null:l.g&&l.g.has(f)&&l.g.delete(f)}Hd.prototype.cancel=function(){if(this.i=io(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let l of this.g.values())l.cancel();this.g.clear()}};function io(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let f=l.i;for(let m of l.g.values())f=f.concat(m.D);return f}return P(l.i)}function Sa(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(c(l)){for(var f=[],m=l.length,D=0;D<m;D++)f.push(l[D]);return f}f=[],m=0;for(D in l)f[m++]=l[D];return f}function Wd(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(c(l)||typeof l=="string"){var f=[];l=l.length;for(var m=0;m<l;m++)f.push(m);return f}f=[],m=0;for(let D in l)f[m++]=D;return f}}}function st(l,f){if(l.forEach&&typeof l.forEach=="function")l.forEach(f,void 0);else if(c(l)||typeof l=="string")Array.prototype.forEach.call(l,f,void 0);else for(var m=Wd(l),D=Sa(l),F=D.length,U=0;U<F;U++)f.call(void 0,D[U],m&&m[U],l)}var Aa=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function xa(l,f){if(l){l=l.split("&");for(var m=0;m<l.length;m++){var D=l[m].indexOf("="),F=null;if(0<=D){var U=l[m].substring(0,D);F=l[m].substring(D+1)}else U=l[m];f(U,F?decodeURIComponent(F.replace(/\+/g," ")):"")}}}function er(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof er){this.h=l.h,Ra(this,l.j),this.o=l.o,this.g=l.g,ml(this,l.s),this.l=l.l;var f=l.i,m=new ka;m.i=f.i,f.g&&(m.g=new Map(f.g),m.h=f.h),cg(this,m),this.m=l.m}else l&&(f=String(l).match(Aa))?(this.h=!1,Ra(this,f[1]||"",!0),this.o=Mr(f[2]||""),this.g=Mr(f[3]||"",!0),ml(this,f[4]),this.l=Mr(f[5]||"",!0),cg(this,f[6]||"",!0),this.m=Mr(f[7]||"")):(this.h=!1,this.i=new ka(null,this.h))}er.prototype.toString=function(){var l=[],f=this.j;f&&l.push(tr(f,Kd,!0),":");var m=this.g;return(m||f=="file")&&(l.push("//"),(f=this.o)&&l.push(tr(f,Kd,!0),"@"),l.push(encodeURIComponent(String(m)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m=this.s,m!=null&&l.push(":",String(m))),(m=this.l)&&(this.g&&m.charAt(0)!="/"&&l.push("/"),l.push(tr(m,m.charAt(0)=="/"?dg:ug,!0))),(m=this.i.toString())&&l.push("?",m),(m=this.m)&&l.push("#",tr(m,so)),l.join("")};function Nr(l){return new er(l)}function Ra(l,f,m){l.j=m?Mr(f,!0):f,l.j&&(l.j=l.j.replace(/:$/,""))}function ml(l,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);l.s=f}else l.s=null}function cg(l,f,m){f instanceof ka?(l.i=f,_l(l.i,l.h)):(m||(f=tr(f,hg)),l.i=new ka(f,l.h))}function ct(l,f,m){l.i.set(f,m)}function yl(l){return ct(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function Mr(l,f){return l?f?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function tr(l,f,m){return typeof l=="string"?(l=encodeURI(l).replace(f,lg),m&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function lg(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var Kd=/[#\/\?@]/g,ug=/[#\?:]/g,dg=/[#\?]/g,hg=/[#\?@]/g,so=/#/g;function ka(l,f){this.h=this.g=null,this.i=l||null,this.j=!!f}function ci(l){l.g||(l.g=new Map,l.h=0,l.i&&xa(l.i,function(f,m){l.add(decodeURIComponent(f.replace(/\+/g," ")),m)}))}n=ka.prototype,n.add=function(l,f){ci(this),this.i=null,l=Or(this,l);var m=this.g.get(l);return m||this.g.set(l,m=[]),m.push(f),this.h+=1,this};function fg(l,f){ci(l),f=Or(l,f),l.g.has(f)&&(l.i=null,l.h-=l.g.get(f).length,l.g.delete(f))}function Pr(l,f){return ci(l),f=Or(l,f),l.g.has(f)}n.forEach=function(l,f){ci(this),this.g.forEach(function(m,D){m.forEach(function(F){l.call(f,F,D,this)},this)},this)},n.na=function(){ci(this);let l=Array.from(this.g.values()),f=Array.from(this.g.keys()),m=[];for(let D=0;D<f.length;D++){let F=l[D];for(let U=0;U<F.length;U++)m.push(f[D])}return m},n.V=function(l){ci(this);let f=[];if(typeof l=="string")Pr(this,l)&&(f=f.concat(this.g.get(Or(this,l))));else{l=Array.from(this.g.values());for(let m=0;m<l.length;m++)f=f.concat(l[m])}return f},n.set=function(l,f){return ci(this),this.i=null,l=Or(this,l),Pr(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[f]),this.h+=1,this},n.get=function(l,f){return l?(l=this.V(l),0<l.length?String(l[0]):f):f};function pg(l,f,m){fg(l,f),0<m.length&&(l.i=null,l.g.set(Or(l,f),P(m)),l.h+=m.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let l=[],f=Array.from(this.g.keys());for(var m=0;m<f.length;m++){var D=f[m];let U=encodeURIComponent(String(D)),K=this.V(D);for(D=0;D<K.length;D++){var F=U;K[D]!==""&&(F+="="+encodeURIComponent(String(K[D]))),l.push(F)}}return this.i=l.join("&")};function Or(l,f){return f=String(f),l.j&&(f=f.toLowerCase()),f}function _l(l,f){f&&!l.j&&(ci(l),l.i=null,l.g.forEach(function(m,D){var F=D.toLowerCase();D!=F&&(fg(this,D),pg(this,F,m))},l)),l.j=f}function gg(l,f){let m=new Xs;if(a.Image){let D=new Image;D.onload=I(zn,m,"TestLoadImage: loaded",!0,f,D),D.onerror=I(zn,m,"TestLoadImage: error",!1,f,D),D.onabort=I(zn,m,"TestLoadImage: abort",!1,f,D),D.ontimeout=I(zn,m,"TestLoadImage: timeout",!1,f,D),a.setTimeout(function(){D.ontimeout&&D.ontimeout()},1e4),D.src=l}else f(!1)}function Na(l,f){let m=new Xs,D=new AbortController,F=setTimeout(()=>{D.abort(),zn(m,"TestPingServer: timeout",!1,f)},1e4);fetch(l,{signal:D.signal}).then(U=>{clearTimeout(F),U.ok?zn(m,"TestPingServer: ok",!0,f):zn(m,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(F),zn(m,"TestPingServer: error",!1,f)})}function zn(l,f,m,D,F){try{F&&(F.onload=null,F.onerror=null,F.onabort=null,F.ontimeout=null),D(m)}catch{}}function mg(){this.g=new ng}function Qd(l,f,m){let D=m||"";try{st(l,function(F,U){let K=F;d(F)&&(K=wa(F)),f.push(D+U+"="+encodeURIComponent(K))})}catch(F){throw f.push(D+"type="+encodeURIComponent("_badmap")),F}}function ot(l){this.l=l.Ub||null,this.j=l.eb||!1}k(ot,Ws),ot.prototype.g=function(){return new vl(this.l,this.j)},ot.prototype.i=(function(l){return function(){return l}})({});function vl(l,f){Jt.call(this),this.D=l,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}k(vl,Jt),n=vl.prototype,n.open=function(l,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=f,this.readyState=1,ao(this)},n.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(f.body=l),(this.D||a).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,oo(this)),this.readyState=0},n.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,ao(this)),this.g&&(this.readyState=3,ao(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;yg(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function yg(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}n.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var f=l.value?l.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!l.done}))&&(this.response=this.responseText+=f)}l.done?oo(this):ao(this),this.readyState==3&&yg(this)}},n.Ra=function(l){this.g&&(this.response=this.responseText=l,oo(this))},n.Qa=function(l){this.g&&(this.response=l,oo(this))},n.ga=function(){this.g&&oo(this)};function oo(l){l.readyState=4,l.l=null,l.j=null,l.v=null,ao(l)}n.setRequestHeader=function(l,f){this.u.append(l,f)},n.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let l=[],f=this.h.entries();for(var m=f.next();!m.done;)m=m.value,l.push(m[0]+": "+m[1]),m=f.next();return l.join(`\r
`)};function ao(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(vl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function Yd(l){let f="";return pe(l,function(m,D){f+=D,f+=":",f+=m,f+=`\r
`}),f}function co(l,f,m){e:{for(D in m){var D=!1;break e}D=!0}D||(m=Yd(m),typeof l=="string"?m!=null&&encodeURIComponent(String(m)):ct(l,f,m))}function Qe(l){Jt.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}k(Qe,Jt);var _g=/^https?$/i,Q0=["POST","PUT"];n=Qe.prototype,n.Ha=function(l){this.J=l},n.ea=function(l,f,m,D){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);f=f?f.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ca.g(),this.v=this.o?Ud(this.o):Ud(Ca),this.g.onreadystatechange=y(this.Ea,this);try{this.B=!0,this.g.open(f,String(l),!0),this.B=!1}catch(U){lo(this,U);return}if(l=m||"",m=new Map(this.headers),D)if(Object.getPrototypeOf(D)===Object.prototype)for(var F in D)m.set(F,D[F]);else if(typeof D.keys=="function"&&typeof D.get=="function")for(let U of D.keys())m.set(U,D.get(U));else throw Error("Unknown input type for opt_headers: "+String(D));D=Array.from(m.keys()).find(U=>U.toLowerCase()=="content-type"),F=a.FormData&&l instanceof a.FormData,!(0<=Array.prototype.indexOf.call(Q0,f,void 0))||D||F||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[U,K]of m)this.g.setRequestHeader(U,K);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Xd(this),this.u=!0,this.g.send(l),this.u=!1}catch(U){lo(this,U)}};function lo(l,f){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=f,l.m=5,Jd(l),Yi(l)}function Jd(l){l.A||(l.A=!0,cn(l,"complete"),cn(l,"error"))}n.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,cn(this,"complete"),cn(this,"abort"),Yi(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Yi(this,!0)),Qe.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?wl(this):this.bb())},n.bb=function(){wl(this)};function wl(l){if(l.h&&typeof o<"u"&&(!l.v[1]||Gn(l)!=4||l.Z()!=2)){if(l.u&&Gn(l)==4)Zp(l.Ea,0,l);else if(cn(l,"readystatechange"),Gn(l)==4){l.h=!1;try{let K=l.Z();e:switch(K){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var m;if(!(m=f)){var D;if(D=K===0){var F=String(l.D).match(Aa)[1]||null;!F&&a.self&&a.self.location&&(F=a.self.location.protocol.slice(0,-1)),D=!_g.test(F?F.toLowerCase():"")}m=D}if(m)cn(l,"complete"),cn(l,"success");else{l.m=6;try{var U=2<Gn(l)?l.g.statusText:""}catch{U=""}l.l=U+" ["+l.Z()+"]",Jd(l)}}finally{Yi(l)}}}}function Yi(l,f){if(l.g){Xd(l);let m=l.g,D=l.v[0]?()=>{}:null;l.g=null,l.v=null,f||cn(l,"ready");try{m.onreadystatechange=D}catch{}}}function Xd(l){l.I&&(a.clearTimeout(l.I),l.I=null)}n.isActive=function(){return!!this.g};function Gn(l){return l.g?l.g.readyState:0}n.Z=function(){try{return 2<Gn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(l){if(this.g){var f=this.g.responseText;return l&&f.indexOf(l)==0&&(f=f.substring(l.length)),Ki(f)}};function vg(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function wg(l){let f={};l=(l.g&&2<=Gn(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let D=0;D<l.length;D++){if(Y(l[D]))continue;var m=b(l[D]);let F=m[0];if(m=m[1],typeof m!="string")continue;m=m.trim();let U=f[F]||[];f[F]=U,U.push(m)}T(f,function(D){return D.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Fr(l,f,m){return m&&m.internalChannelParams&&m.internalChannelParams[l]||f}function Zd(l){this.Aa=0,this.i=[],this.j=new Xs,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Fr("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Fr("baseRetryDelayMs",5e3,l),this.cb=Fr("retryDelaySeedMs",1e4,l),this.Wa=Fr("forwardChannelMaxRetries",2,l),this.wa=Fr("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new Hd(l&&l.concurrentRequestLimit),this.Da=new mg,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Zd.prototype,n.la=8,n.G=1,n.connect=function(l,f,m,D){vn(0),this.W=l,this.H=f||{},m&&D!==void 0&&(this.H.OSID=m,this.H.OAID=D),this.F=this.X,this.I=u(this,null,this.W),Ma(this)};function El(l){if(Il(l),l.G==3){var f=l.U++,m=Nr(l.I);if(ct(m,"SID",l.K),ct(m,"RID",f),ct(m,"TYPE","terminate"),ho(l,m),f=new oi(l,l.j,f),f.L=2,f.v=yl(Nr(m)),m=!1,a.navigator&&a.navigator.sendBeacon)try{m=a.navigator.sendBeacon(f.v.toString(),"")}catch{}!m&&a.Image&&(new Image().src=f.v,m=!0),m||(f.g=g(f.j,null),f.g.ea(f.v)),f.F=Date.now(),no(f)}Xi(l)}function uo(l){l.g&&(Tl(l),l.g.cancel(),l.g=null)}function Il(l){uo(l),l.u&&(a.clearTimeout(l.u),l.u=null),Ji(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&a.clearTimeout(l.s),l.s=null)}function Ma(l){if(!qd(l.h)&&!l.s){l.s=!0;var f=l.Ga;ma||Qp(),ii||(ma(),ii=!0),Hs.add(f,l),l.B=0}}function bl(l,f){return zd(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=f.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=Js(y(l.Ga,l,f),rh(l,l.B)),l.B++,!0)}n.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;let F=new oi(this,this.j,l),U=this.o;if(this.S&&(U?(U=v(U),C(U,this.S)):U=this.S),this.m!==null||this.O||(F.H=U,U=null),this.P)e:{for(var f=0,m=0;m<this.i.length;m++){t:{var D=this.i[m];if("__data__"in D.map&&(D=D.map.__data__,typeof D=="string")){D=D.length;break t}D=void 0}if(D===void 0)break;if(f+=D,4096<f){f=m;break e}if(f===4096||m===this.i.length-1){f=m+1;break e}}f=1e3}else f=1e3;f=li(this,F,f),m=Nr(this.I),ct(m,"RID",l),ct(m,"CVER",22),this.D&&ct(m,"X-HTTP-Session-Id",this.D),ho(this,m),U&&(this.O?f="headers="+encodeURIComponent(String(Yd(U)))+"&"+f:this.m&&co(m,this.m,U)),mr(this.h,F),this.Ua&&ct(m,"TYPE","init"),this.P?(ct(m,"$req",f),ct(m,"SID","null"),F.T=!0,fl(F,m,null)):fl(F,m,f),this.G=2}}else this.G==3&&(l?eh(this,l):this.i.length==0||qd(this.h)||eh(this))};function eh(l,f){var m;f?m=f.l:m=l.U++;let D=Nr(l.I);ct(D,"SID",l.K),ct(D,"RID",m),ct(D,"AID",l.T),ho(l,D),l.m&&l.o&&co(D,l.m,l.o),m=new oi(l,l.j,m,l.B+1),l.m===null&&(m.H=l.o),f&&(l.i=f.D.concat(l.i)),f=li(l,m,1e3),m.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),mr(l.h,m),fl(m,D,f)}function ho(l,f){l.H&&pe(l.H,function(m,D){ct(f,D,m)}),l.l&&st({},function(m,D){ct(f,D,m)})}function li(l,f,m){m=Math.min(l.i.length,m);var D=l.l?y(l.l.Na,l.l,l):null;e:{var F=l.i;let U=-1;for(;;){let K=["count="+m];U==-1?0<m?(U=F[0].g,K.push("ofs="+U)):U=0:K.push("ofs="+U);let We=!0;for(let Dt=0;Dt<m;Dt++){let Ke=F[Dt].g,Cn=F[Dt].map;if(Ke-=U,0>Ke)U=Math.max(0,F[Dt].g-100),We=!1;else try{Qd(Cn,K,"req"+Ke+"_")}catch{D&&D(Cn)}}if(We){D=K.join("&");break e}}}return l=l.i.splice(0,m),f.D=l,D}function th(l){if(!l.g&&!l.u){l.Y=1;var f=l.Fa;ma||Qp(),ii||(ma(),ii=!0),Hs.add(f,l),l.v=0}}function Cl(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=Js(y(l.Fa,l),rh(l,l.v)),l.v++,!0)}n.Fa=function(){if(this.u=null,nh(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=Js(y(this.ab,this),l)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,vn(10),uo(this),nh(this))};function Tl(l){l.A!=null&&(a.clearTimeout(l.A),l.A=null)}function nh(l){l.g=new oi(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var f=Nr(l.qa);ct(f,"RID","rpc"),ct(f,"SID",l.K),ct(f,"AID",l.T),ct(f,"CI",l.F?"0":"1"),!l.F&&l.ja&&ct(f,"TO",l.ja),ct(f,"TYPE","xmlhttp"),ho(l,f),l.m&&l.o&&co(f,l.m,l.o),l.L&&(l.g.I=l.L);var m=l.g;l=l.ia,m.L=1,m.v=yl(Nr(f)),m.m=null,m.P=!0,pl(m,l)}n.Za=function(){this.C!=null&&(this.C=null,uo(this),Cl(this),vn(19))};function Ji(l){l.C!=null&&(a.clearTimeout(l.C),l.C=null)}function bn(l,f){var m=null;if(l.g==f){Ji(l),Tl(l),l.g=null;var D=2}else if(Gd(l.h,f))m=f.D,Zn(l.h,f),D=1;else return;if(l.G!=0){if(f.o)if(D==1){m=f.m?f.m.length:0,f=Date.now()-f.F;var F=l.B;D=dl(),cn(D,new Ea(D,m)),Ma(l)}else th(l);else if(F=f.s,F==3||F==0&&0<f.X||!(D==1&&bl(l,f)||D==2&&Cl(l)))switch(m&&0<m.length&&(f=l.h,f.i=f.i.concat(m)),F){case 1:ui(l,5);break;case 4:ui(l,10);break;case 3:ui(l,6);break;default:ui(l,2)}}}function rh(l,f){let m=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(m*=2),m*f}function ui(l,f){if(l.j.info("Error code "+f),f==2){var m=y(l.fb,l),D=l.Xa;let F=!D;D=new er(D||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Ra(D,"https"),yl(D),F?gg(D.toString(),m):Na(D.toString(),m)}else vn(2);l.G=0,l.l&&l.l.sa(f),Xi(l),Il(l)}n.fb=function(l){l?(this.j.info("Successfully pinged google.com"),vn(2)):(this.j.info("Failed to ping google.com"),vn(1))};function Xi(l){if(l.G=0,l.ka=[],l.l){let f=io(l.h);(f.length!=0||l.i.length!=0)&&(M(l.ka,f),M(l.ka,l.i),l.h.i.length=0,P(l.i),l.i.length=0),l.l.ra()}}function u(l,f,m){var D=m instanceof er?Nr(m):new er(m);if(D.g!="")f&&(D.g=f+"."+D.g),ml(D,D.s);else{var F=a.location;D=F.protocol,f=f?f+"."+F.hostname:F.hostname,F=+F.port;var U=new er(null);D&&Ra(U,D),f&&(U.g=f),F&&ml(U,F),m&&(U.l=m),D=U}return m=l.D,f=l.ya,m&&f&&ct(D,m,f),ct(D,"VER",l.la),ho(l,D),D}function g(l,f,m){if(f&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=l.Ca&&!l.pa?new Qe(new ot({eb:m})):new Qe(l.pa),f.Ha(l.J),f}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function _(){}n=_.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function S(){}S.prototype.g=function(l,f){return new O(l,f)};function O(l,f){Jt.call(this),this.g=new Zd(f),this.l=l,this.h=f&&f.messageUrlParams||null,l=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(l?l["X-WebChannel-Content-Type"]=f.messageContentType:l={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(l?l["X-WebChannel-Client-Profile"]=f.va:l={"X-WebChannel-Client-Profile":f.va}),this.g.S=l,(l=f&&f.Sb)&&!Y(l)&&(this.g.m=l),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!Y(f)&&(this.g.D=f,l=this.h,l!==null&&f in l&&(l=this.h,f in l&&delete l[f])),this.j=new ge(this)}k(O,Jt),O.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},O.prototype.close=function(){El(this.g)},O.prototype.o=function(l){var f=this.g;if(typeof l=="string"){var m={};m.__data__=l,l=m}else this.u&&(m={},m.__data__=wa(l),l=m);f.i.push(new $d(f.Ya++,l)),f.G==3&&Ma(f)},O.prototype.N=function(){this.g.l=null,delete this.j,El(this.g),delete this.g,O.aa.N.call(this)};function L(l){Xt.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var f=l.__sm__;if(f){e:{for(let m in f){l=m;break e}l=void 0}(this.i=l)&&(l=this.i,f=f!==null&&l in f?f[l]:void 0),this.data=f}else this.data=l}k(L,Xt);function J(){ul.call(this),this.status=1}k(J,ul);function ge(l){this.g=l}k(ge,_),ge.prototype.ua=function(){cn(this.g,"a")},ge.prototype.ta=function(l){cn(this.g,new L(l))},ge.prototype.sa=function(l){cn(this.g,new J)},ge.prototype.ra=function(){cn(this.g,"b")},S.prototype.createWebChannel=S.prototype.g,O.prototype.send=O.prototype.o,O.prototype.open=O.prototype.m,O.prototype.close=O.prototype.close,SS=Ms.createWebChannelTransport=function(){return new S},DS=Ms.getStatEventTarget=function(){return dl()},TS=Ms.Event=Xn,Nv=Ms.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ba.NO_ERROR=0,ba.TIMEOUT=8,ba.HTTP_ERROR=6,wp=Ms.ErrorCode=ba,hl.COMPLETE="complete",CS=Ms.EventType=hl,Ks.EventType=Qs,Qs.OPEN="a",Qs.CLOSE="b",Qs.ERROR="c",Qs.MESSAGE="d",Jt.prototype.listen=Jt.prototype.K,Zu=Ms.WebChannel=Ks,PQ=Ms.FetchXmlHttpFactory=ot,Qe.prototype.listenOnce=Qe.prototype.L,Qe.prototype.getLastError=Qe.prototype.Ka,Qe.prototype.getLastErrorCode=Qe.prototype.Ba,Qe.prototype.getStatus=Qe.prototype.Z,Qe.prototype.getResponseJson=Qe.prototype.Oa,Qe.prototype.getResponseText=Qe.prototype.oa,Qe.prototype.send=Qe.prototype.ea,Qe.prototype.setWithCredentials=Qe.prototype.Ha,bS=Ms.XhrIo=Qe}).apply(typeof kv<"u"?kv:typeof self<"u"?self:typeof window<"u"?window:{});var ZV="@firebase/firestore",eL="4.8.0";var yn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};yn.UNAUTHENTICATED=new yn(null),yn.GOOGLE_CREDENTIALS=new yn("google-credentials-uid"),yn.FIRST_PARTY=new yn("first-party-uid"),yn.MOCK_USER=new yn("mock-user");var wd="11.10.0";var qc=new Ri("@firebase/firestore");function ed(){return qc.logLevel}function re(n,...e){if(qc.logLevel<=Fe.DEBUG){let t=e.map(wx);qc.debug(`Firestore (${wd}): ${n}`,...t)}}function Fs(n,...e){if(qc.logLevel<=Fe.ERROR){let t=e.map(wx);qc.error(`Firestore (${wd}): ${n}`,...t)}}function oa(n,...e){if(qc.logLevel<=Fe.WARN){let t=e.map(wx);qc.warn(`Firestore (${wd}): ${n}`,...t)}}function wx(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function he(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,WL(n,r,t)}function WL(n,e,t){let r=`FIRESTORE (${wd}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Fs(r),new Error(r)}function it(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||WL(e,i,r)}function be(n,e){return n}var q={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},ne=class extends ur{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Ps=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var Uv=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},NS=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(yn.UNAUTHENTICATED))}shutdown(){}},MS=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},PS=class{constructor(e){this.t=e,this.currentUser=yn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){it(this.o===void 0,42304);let r=this.i,i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve(),s=new Ps;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Ps,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let c=s;e.enqueueRetryable(async()=>{await c.promise,await i(this.currentUser)})},a=c=>{re("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(re("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Ps)}},0),o()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(re("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(it(typeof r.accessToken=="string",31837,{l:r}),new Uv(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return it(e===null||typeof e=="string",2055,{h:e}),new yn(e)}},OS=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=yn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},FS=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new OS(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(yn.FIRST_PARTY))}shutdown(){}invalidateToken(){}},jv=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},VS=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Cr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){it(this.o===void 0,3512);let r=s=>{s.error!=null&&re("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.m;return this.m=s.token,re("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{re("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.V.getImmediate({optional:!0});s?i(s):re("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new jv(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(it(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new jv(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function OQ(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}function KL(){return new TextEncoder}var Dp=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=OQ(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%62))}return r}};function Ne(n,e){return n<e?-1:n>e?1:0}function LS(n,e){let t=0;for(;t<n.length&&t<e.length;){let r=n.codePointAt(t),i=e.codePointAt(t);if(r!==i){if(r<128&&i<128)return Ne(r,i);{let s=KL(),o=FQ(s.encode(tL(n,t)),s.encode(tL(e,t)));return o!==0?o:Ne(r,i)}}t+=r>65535?2:1}return Ne(n.length,e.length)}function tL(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function FQ(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return Ne(n[t],e[t]);return Ne(n.length,e.length)}function cd(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var nL="__name__",Bv=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&he(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&he(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let s=n.compareSegments(e.get(i),t.get(i));if(s!==0)return s}return Ne(e.length,t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):LS(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ns.fromString(e.substring(4,e.length-2))}},vt=class n extends Bv{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new ne(q.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},VQ=/^[_a-zA-Z][_a-zA-Z0-9]*$/,pr=class n extends Bv{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return VQ.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===nL}static keyField(){return new n([nL])}static fromServerFormat(e){let t=[],r="",i=0,s=()=>{if(r.length===0)throw new ne(q.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},o=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new ne(q.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new ne(q.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new ne(q.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var ue=class n{constructor(e){this.path=e}static fromPath(e){return new n(vt.fromString(e))}static fromName(e){return new n(vt.fromString(e).popFirst(5))}static empty(){return new n(vt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&vt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return vt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new vt(e.slice()))}};function QL(n,e,t){if(!t)throw new ne(q.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function LQ(n,e,t,r){if(e===!0&&r===!0)throw new ne(q.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function rL(n){if(!ue.isDocumentKey(n))throw new ne(q.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function iL(n){if(ue.isDocumentKey(n))throw new ne(q.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function YL(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function _0(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":he(12329,{type:typeof n})}function ta(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ne(q.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=_0(n);throw new ne(q.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Gt(n,e){let t={typeString:n};return e&&(t.value=e),t}function Vp(n,e){if(!YL(n))throw new ne(q.INVALID_ARGUMENT,"JSON must be an object");let t;for(let r in e)if(e[r]){let i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}let o=n[r];if(i&&typeof o!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&o!==s.value){t=`Expected '${r}' field to equal '${s.value}'`;break}}if(t)throw new ne(q.INVALID_ARGUMENT,t);return!0}var sL=-62135596800,oL=1e6,Wt=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*oL);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ne(q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ne(q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<sL)throw new ne(q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ne(q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/oL}_compareTo(e){return this.seconds===e.seconds?Ne(this.nanoseconds,e.nanoseconds):Ne(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:n._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Vp(e,n._jsonSchema))return new n(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-sL;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};Wt._jsonSchemaVersion="firestore/timestamp/1.0",Wt._jsonSchema={type:Gt("string",Wt._jsonSchemaVersion),seconds:Gt("number"),nanoseconds:Gt("number")};var Se=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new Wt(0,0))}static max(){return new n(new Wt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Sp=-1,US=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};US.UNKNOWN_ID=-1;function UQ(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Se.fromTimestamp(r===1e9?new Wt(t+1,0):new Wt(t,r));return new zc(i,ue.empty(),e)}function jQ(n){return new zc(n.readTime,n.key,Sp)}var zc=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(Se.min(),ue.empty(),Sp)}static max(){return new n(Se.max(),ue.empty(),Sp)}};function BQ(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=ue.comparator(n.documentKey,e.documentKey),t!==0?t:Ne(n.largestBatchId,e.largestBatchId))}var $Q="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",jS=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};async function Ed(n){if(n.code!==q.FAILED_PRECONDITION||n.message!==$Q)throw n;re("LocalStore","Unexpectedly lost primary lease")}var W=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&he(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&t()},c=>r(c))}),o=!0,s===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let s=e.length,o=new Array(s),a=0;for(let c=0;c<s;c++){let d=c;t(e[d]).next(h=>{o[d]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,t){return new n((r,i)=>{let s=()=>{e()===!0?t().next(()=>{s()},i):r()};s()})}};function HQ(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Id(n){return n.name==="IndexedDbTransactionError"}var Ex=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this._e(i),this.ae=i=>r.writeSequenceNumber(i))}_e(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.ae&&this.ae(t),t}}n.ue=-1;return n})(),Ix=-1;function v0(n){return n==null}function Ap(n){return n===0&&1/n==-1/0}function qQ(n){return typeof n=="number"&&Number.isInteger(n)&&!Ap(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var JL="";function zQ(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=aL(e)),e=GQ(n.get(t),e);return aL(e)}function GQ(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let s=n.charAt(i);switch(s){case"\0":t+="";break;case JL:t+="";break;default:t+=s}}return t}function aL(n){return n+JL+""}var WQ="remoteDocuments",XL="owner";var ZL="mutationQueues";var eU="mutations";var tU="documentMutations",KQ="remoteDocumentsV14";var nU="remoteDocumentGlobal";var rU="targets";var iU="targetDocuments";var sU="targetGlobal",oU="collectionParents";var aU="clientMetadata";var cU="bundles";var lU="namedQueries";var QQ="indexConfiguration";var YQ="indexState";var JQ="indexEntries";var uU="documentOverlays";var XQ="globals";var ZQ=[ZL,eU,tU,WQ,rU,XL,sU,iU,aU,nU,oU,cU,lU],Vve=[...ZQ,uU],eY=[ZL,eU,tU,KQ,rU,XL,sU,iU,aU,nU,oU,cU,lU,uU],tY=eY,nY=[...tY,QQ,YQ,JQ];var Lve=[...nY,XQ];function cL(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function ha(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function dU(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Tt=class n{constructor(e,t){this.comparator=e,this.root=t||Li.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Li.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Li.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new id(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new id(this.root,e,this.comparator,!1)}getReverseIterator(){return new id(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new id(this.root,e,this.comparator,!0)}},id=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Li=class n{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=s??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new n(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw he(43730,{key:this.key,value:this.value});if(this.right.isRed())throw he(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw he(27949);return e+(this.isRed()?0:1)}};Li.EMPTY=null,Li.RED=!0,Li.BLACK=!1;Li.EMPTY=new class{constructor(){this.size=0}get key(){throw he(57766)}get value(){throw he(16141)}get color(){throw he(16727)}get left(){throw he(29726)}get right(){throw he(36894)}copy(e,t,r,i,s){return this}insert(e,t,r){return new Li(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var _n=class n{constructor(e){this.comparator=e,this.data=new Tt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new $v(this.data.getIterator())}getIteratorFrom(e){return new $v(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},$v=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var xr=class n{constructor(e){this.fields=e,e.sort(pr.comparator)}static empty(){return new n([])}unionWith(e){let t=new _n(pr.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return cd(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var Hv=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Pn=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=(function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Hv("Invalid base64 string: "+s):s}})(e);return new n(t)}static fromUint8Array(e){let t=(function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s})(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ne(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Pn.EMPTY_BYTE_STRING=new Pn("");var rY=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Vs(n){if(it(!!n,39018),typeof n=="string"){let e=0,t=rY.exec(n);if(it(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:_t(n.seconds),nanos:_t(n.nanos)}}function _t(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Ls(n){return typeof n=="string"?Pn.fromBase64String(n):Pn.fromUint8Array(n)}var hU="server_timestamp",fU="__type__",pU="__previous_value__",gU="__local_write_time__";function bx(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[fU])===null||t===void 0?void 0:t.stringValue)===hU}function w0(n){let e=n.mapValue.fields[pU];return bx(e)?w0(e):e}function xp(n){let e=Vs(n.mapValue.fields[gU].timestampValue);return new Wt(e.seconds,e.nanos)}var BS=class{constructor(e,t,r,i,s,o,a,c,d,h){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=d,this.isUsingEmulator=h}},qv="(default)",zv=class n{constructor(e,t){this.projectId=e,this.database=t||qv}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===qv}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var Cx="__type__",mU="__max__",Mv={mapValue:{fields:{__type__:{stringValue:mU}}}},Tx="__vector__",ld="value";function aa(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?bx(n)?4:_U(n)?9007199254740991:yU(n)?10:11:he(28295,{value:n})}function Bi(n,e){if(n===e)return!0;let t=aa(n);if(t!==aa(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return xp(n).isEqual(xp(e));case 3:return(function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=Vs(i.timestampValue),a=Vs(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(i,s){return Ls(i.bytesValue).isEqual(Ls(s.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(i,s){return _t(i.geoPointValue.latitude)===_t(s.geoPointValue.latitude)&&_t(i.geoPointValue.longitude)===_t(s.geoPointValue.longitude)})(n,e);case 2:return(function(i,s){if("integerValue"in i&&"integerValue"in s)return _t(i.integerValue)===_t(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=_t(i.doubleValue),a=_t(s.doubleValue);return o===a?Ap(o)===Ap(a):isNaN(o)&&isNaN(a)}return!1})(n,e);case 9:return cd(n.arrayValue.values||[],e.arrayValue.values||[],Bi);case 10:case 11:return(function(i,s){let o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(cL(o)!==cL(a))return!1;for(let c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!Bi(o[c],a[c])))return!1;return!0})(n,e);default:return he(52216,{left:n})}}function Rp(n,e){return(n.values||[]).find(t=>Bi(t,e))!==void 0}function ud(n,e){if(n===e)return 0;let t=aa(n),r=aa(e);if(t!==r)return Ne(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ne(n.booleanValue,e.booleanValue);case 2:return(function(s,o){let a=_t(s.integerValue||s.doubleValue),c=_t(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1})(n,e);case 3:return lL(n.timestampValue,e.timestampValue);case 4:return lL(xp(n),xp(e));case 5:return LS(n.stringValue,e.stringValue);case 6:return(function(s,o){let a=Ls(s),c=Ls(o);return a.compareTo(c)})(n.bytesValue,e.bytesValue);case 7:return(function(s,o){let a=s.split("/"),c=o.split("/");for(let d=0;d<a.length&&d<c.length;d++){let h=Ne(a[d],c[d]);if(h!==0)return h}return Ne(a.length,c.length)})(n.referenceValue,e.referenceValue);case 8:return(function(s,o){let a=Ne(_t(s.latitude),_t(o.latitude));return a!==0?a:Ne(_t(s.longitude),_t(o.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return uL(n.arrayValue,e.arrayValue);case 10:return(function(s,o){var a,c,d,h;let p=s.fields||{},y=o.fields||{},I=(a=p[ld])===null||a===void 0?void 0:a.arrayValue,k=(c=y[ld])===null||c===void 0?void 0:c.arrayValue,P=Ne(((d=I?.values)===null||d===void 0?void 0:d.length)||0,((h=k?.values)===null||h===void 0?void 0:h.length)||0);return P!==0?P:uL(I,k)})(n.mapValue,e.mapValue);case 11:return(function(s,o){if(s===Mv.mapValue&&o===Mv.mapValue)return 0;if(s===Mv.mapValue)return 1;if(o===Mv.mapValue)return-1;let a=s.fields||{},c=Object.keys(a),d=o.fields||{},h=Object.keys(d);c.sort(),h.sort();for(let p=0;p<c.length&&p<h.length;++p){let y=LS(c[p],h[p]);if(y!==0)return y;let I=ud(a[c[p]],d[h[p]]);if(I!==0)return I}return Ne(c.length,h.length)})(n.mapValue,e.mapValue);default:throw he(23264,{le:t})}}function lL(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Ne(n,e);let t=Vs(n),r=Vs(e),i=Ne(t.seconds,r.seconds);return i!==0?i:Ne(t.nanos,r.nanos)}function uL(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let s=ud(t[i],r[i]);if(s)return s}return Ne(t.length,r.length)}function dd(n){return $S(n)}function $S(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){let r=Vs(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Ls(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return ue.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",i=!0;for(let s of t.values||[])i?i=!1:r+=",",r+=$S(s);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){let r=Object.keys(t.fields||{}).sort(),i="{",s=!0;for(let o of r)s?s=!1:i+=",",i+=`${o}:${$S(t.fields[o])}`;return i+"}"})(n.mapValue):he(61005,{value:n})}function Fv(n){switch(aa(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=w0(n);return e?16+Fv(e):16;case 5:return 2*n.stringValue.length;case 6:return Ls(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce((i,s)=>i+Fv(s),0)})(n.arrayValue);case 10:case 11:return(function(r){let i=0;return ha(r.fields,(s,o)=>{i+=s.length+Fv(o)}),i})(n.mapValue);default:throw he(13486,{value:n})}}function dL(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function HS(n){return!!n&&"integerValue"in n}function Dx(n){return!!n&&"arrayValue"in n}function hL(n){return!!n&&"nullValue"in n}function fL(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Vv(n){return!!n&&"mapValue"in n}function yU(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[Cx])===null||t===void 0?void 0:t.stringValue)===Tx}function Ip(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return ha(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Ip(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Ip(n.arrayValue.values[t]);return e}return Object.assign({},n)}function _U(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===mU}var jve={mapValue:{fields:{[Cx]:{stringValue:Tx},[ld]:{arrayValue:{}}}}};var fr=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Vv(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ip(t)}setAll(e){let t=pr.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){let c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=a.popLast()}o?r[a.lastSegment()]=Ip(o):i.push(a.lastSegment())});let s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){let t=this.field(e.popLast());Vv(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Bi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Vv(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){ha(t,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new n(Ip(this.value))}};function vU(n){let e=[];return ha(n.fields,(t,r)=>{let i=new pr([t]);if(Vv(r)){let s=vU(r.mapValue).fields;if(s.length===0)e.push(i);else for(let o of s)e.push(i.child(o))}else e.push(i)}),new xr(e)}var ni=class n{constructor(e,t,r,i,s,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new n(e,0,Se.min(),Se.min(),Se.min(),fr.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,Se.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,Se.min(),Se.min(),fr.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,Se.min(),Se.min(),fr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Se.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=fr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=fr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Se.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var hd=class{constructor(e,t){this.position=e,this.inclusive=t}};function pL(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let s=e[i],o=n.position[i];if(s.field.isKeyField()?r=ue.comparator(ue.fromName(o.referenceValue),t.key):r=ud(o,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function gL(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Bi(n.position[t],e.position[t]))return!1;return!0}var Gc=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function iY(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var Gv=class{},zt=class n extends Gv{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new zS(e,t,r):t==="array-contains"?new KS(e,r):t==="in"?new QS(e,r):t==="not-in"?new YS(e,r):t==="array-contains-any"?new JS(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new GS(e,r):new WS(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(ud(t,this.value)):t!==null&&aa(this.value)===aa(t)&&this.matchesComparison(ud(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return he(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},ri=class n extends Gv{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new n(e,t)}matches(e){return wU(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}};function wU(n){return n.op==="and"}function EU(n){return sY(n)&&wU(n)}function sY(n){for(let e of n.filters)if(e instanceof ri)return!1;return!0}function qS(n){if(n instanceof zt)return n.field.canonicalString()+n.op.toString()+dd(n.value);if(EU(n))return n.filters.map(e=>qS(e)).join(",");{let e=n.filters.map(t=>qS(t)).join(",");return`${n.op}(${e})`}}function IU(n,e){return n instanceof zt?(function(r,i){return i instanceof zt&&r.op===i.op&&r.field.isEqual(i.field)&&Bi(r.value,i.value)})(n,e):n instanceof ri?(function(r,i){return i instanceof ri&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&IU(o,i.filters[a]),!0):!1})(n,e):void he(19439)}function bU(n){return n instanceof zt?(function(t){return`${t.field.canonicalString()} ${t.op} ${dd(t.value)}`})(n):n instanceof ri?(function(t){return t.op.toString()+" {"+t.getFilters().map(bU).join(" ,")+"}"})(n):"Filter"}var zS=class extends zt{constructor(e,t,r){super(e,t,r),this.key=ue.fromName(r.referenceValue)}matches(e){let t=ue.comparator(e.key,this.key);return this.matchesComparison(t)}},GS=class extends zt{constructor(e,t){super(e,"in",t),this.keys=CU("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},WS=class extends zt{constructor(e,t){super(e,"not-in",t),this.keys=CU("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function CU(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>ue.fromName(r.referenceValue))}var KS=class extends zt{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return Dx(t)&&Rp(t.arrayValue,this.value)}},QS=class extends zt{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&Rp(this.value.arrayValue,t)}},YS=class extends zt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Rp(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Rp(this.value.arrayValue,t)}},JS=class extends zt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!Dx(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Rp(this.value.arrayValue,r))}};var XS=class{constructor(e,t=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.Pe=null}};function mL(n,e=null,t=[],r=[],i=null,s=null,o=null){return new XS(n,e,t,r,i,s,o)}function Sx(n){let e=be(n);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>qS(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>(function(s){return s.field.canonicalString()+s.dir})(r)).join(","),v0(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>dd(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>dd(r)).join(",")),e.Pe=t}return e.Pe}function Ax(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!iY(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!IU(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!gL(n.startAt,e.startAt)&&gL(n.endAt,e.endAt)}function ZS(n){return ue.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var ca=class{constructor(e,t=null,r=[],i=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}};function oY(n,e,t,r,i,s,o,a){return new ca(n,e,t,r,i,s,o,a)}function xx(n){return new ca(n)}function yL(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function TU(n){return n.collectionGroup!==null}function bp(n){let e=be(n);if(e.Te===null){e.Te=[];let t=new Set;for(let s of e.explicitOrderBy)e.Te.push(s),t.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new _n(pr.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(d=>{d.isInequality()&&(a=a.add(d.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.Te.push(new Gc(s,r))}),t.has(pr.keyField().canonicalString())||e.Te.push(new Gc(pr.keyField(),r))}return e.Te}function Ui(n){let e=be(n);return e.Ie||(e.Ie=aY(e,bp(n))),e.Ie}function aY(n,e){if(n.limitType==="F")return mL(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new Gc(i.field,s)});let t=n.endAt?new hd(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new hd(n.startAt.position,n.startAt.inclusive):null;return mL(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function eA(n,e){let t=n.filters.concat([e]);return new ca(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function tA(n,e,t){return new ca(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function E0(n,e){return Ax(Ui(n),Ui(e))&&n.limitType===e.limitType}function DU(n){return`${Sx(Ui(n))}|lt:${n.limitType}`}function td(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>bU(i)).join(", ")}]`),v0(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>(function(o){return`${o.field.canonicalString()} (${o.dir})`})(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>dd(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>dd(i)).join(",")),`Target(${r})`})(Ui(n))}; limitType=${n.limitType})`}function I0(n,e){return e.isFoundDocument()&&(function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):ue.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)})(n,e)&&(function(r,i){for(let s of bp(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0})(n,e)&&(function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0})(n,e)&&(function(r,i){return!(r.startAt&&!(function(o,a,c){let d=pL(o,a,c);return o.inclusive?d<=0:d<0})(r.startAt,bp(r),i)||r.endAt&&!(function(o,a,c){let d=pL(o,a,c);return o.inclusive?d>=0:d>0})(r.endAt,bp(r),i))})(n,e)}function cY(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function SU(n){return(e,t)=>{let r=!1;for(let i of bp(n)){let s=lY(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function lY(n,e,t){let r=n.field.isKeyField()?ue.comparator(e.key,t.key):(function(s,o,a){let c=o.data.field(s),d=a.data.field(s);return c!==null&&d!==null?ud(c,d):he(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return he(19790,{direction:n.dir})}}var Us=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ha(this.inner,(t,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return dU(this.inner)}size(){return this.innerSize}};var uY=new Tt(ue.comparator);function js(){return uY}var AU=new Tt(ue.comparator);function Ep(...n){let e=AU;for(let t of n)e=e.insert(t.key,t);return e}function xU(n){let e=AU;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function jc(){return Cp()}function RU(){return Cp()}function Cp(){return new Us(n=>n.toString(),(n,e)=>n.isEqual(e))}var dY=new Tt(ue.comparator),hY=new _n(ue.comparator);function Ue(...n){let e=hY;for(let t of n)e=e.add(t);return e}var fY=new _n(Ne);function pY(){return fY}function Rx(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ap(e)?"-0":e}}function kU(n){return{integerValue:""+n}}function gY(n,e){return qQ(e)?kU(e):Rx(n,e)}var fd=class{constructor(){this._=void 0}};function mY(n,e,t){return n instanceof Wc?(function(i,s){let o={fields:{[fU]:{stringValue:hU},[gU]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&bx(s)&&(s=w0(s)),s&&(o.fields[pU]=s),{mapValue:o}})(t,e):n instanceof Kc?MU(n,e):n instanceof Qc?PU(n,e):(function(i,s){let o=NU(i,s),a=_L(o)+_L(i.Ee);return HS(o)&&HS(i.Ee)?kU(a):Rx(i.serializer,a)})(n,e)}function yY(n,e,t){return n instanceof Kc?MU(n,e):n instanceof Qc?PU(n,e):t}function NU(n,e){return n instanceof pd?(function(r){return HS(r)||(function(s){return!!s&&"doubleValue"in s})(r)})(e)?e:{integerValue:0}:null}var Wc=class extends fd{},Kc=class extends fd{constructor(e){super(),this.elements=e}};function MU(n,e){let t=OU(e);for(let r of n.elements)t.some(i=>Bi(i,r))||t.push(r);return{arrayValue:{values:t}}}var Qc=class extends fd{constructor(e){super(),this.elements=e}};function PU(n,e){let t=OU(e);for(let r of n.elements)t=t.filter(i=>!Bi(i,r));return{arrayValue:{values:t}}}var pd=class extends fd{constructor(e,t){super(),this.serializer=e,this.Ee=t}};function _L(n){return _t(n.integerValue||n.doubleValue)}function OU(n){return Dx(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}var nA=class{constructor(e,t){this.field=e,this.transform=t}};function _Y(n,e){return n.field.isEqual(e.field)&&(function(r,i){return r instanceof Kc&&i instanceof Kc||r instanceof Qc&&i instanceof Qc?cd(r.elements,i.elements,Bi):r instanceof pd&&i instanceof pd?Bi(r.Ee,i.Ee):r instanceof Wc&&i instanceof Wc})(n.transform,e.transform)}var rA=class{constructor(e,t){this.version=e,this.transformResults=t}},Os=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Lv(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var gd=class{};function FU(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new kp(n.key,Os.none()):new Yc(n.key,n.data,Os.none());{let t=n.data,r=fr.empty(),i=new _n(pr.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new $i(n.key,r,new xr(i.toArray()),Os.none())}}function vY(n,e,t){n instanceof Yc?(function(i,s,o){let a=i.value.clone(),c=wL(i.fieldTransforms,s,o.transformResults);a.setAll(c),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()})(n,e,t):n instanceof $i?(function(i,s,o){if(!Lv(i.precondition,s))return void s.convertToUnknownDocument(o.version);let a=wL(i.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(VU(i)),c.setAll(a),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()})(n,e,t):(function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()})(0,e,t)}function Tp(n,e,t,r){return n instanceof Yc?(function(s,o,a,c){if(!Lv(s.precondition,o))return a;let d=s.value.clone(),h=EL(s.fieldTransforms,c,o);return d.setAll(h),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null})(n,e,t,r):n instanceof $i?(function(s,o,a,c){if(!Lv(s.precondition,o))return a;let d=EL(s.fieldTransforms,c,o),h=o.data;return h.setAll(VU(s)),h.setAll(d),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(p=>p.field))})(n,e,t,r):(function(s,o,a){return Lv(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a})(n,e,t)}function wY(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),s=NU(r.transform,i||null);s!=null&&(t===null&&(t=fr.empty()),t.set(r.field,s))}return t||null}function vL(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&cd(r,i,(s,o)=>_Y(s,o))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var Yc=class extends gd{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},$i=class extends gd{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function VU(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function wL(n,e,t){let r=new Map;it(n.length===t.length,32656,{Ae:t.length,Re:n.length});for(let i=0;i<t.length;i++){let s=n[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,yY(o,a,t[i]))}return r}function EL(n,e,t){let r=new Map;for(let i of n){let s=i.transform,o=t.data.field(i.field);r.set(i.field,mY(s,o,e))}return r}var kp=class extends gd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},iA=class extends gd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var sA=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&vY(s,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=Tp(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=Tp(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=RU();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=t.has(i.key)?null:a;let c=FU(o,a);c!==null&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(Se.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Ue())}isEqual(e){return this.batchId===e.batchId&&cd(this.mutations,e.mutations,(t,r)=>vL(t,r))&&cd(this.baseMutations,e.baseMutations,(t,r)=>vL(t,r))}},oA=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){it(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let i=(function(){return dY})(),s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new n(e,t,r,i)}};var aA=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var cA=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var Ht,qe;function EY(n){switch(n){case q.OK:return he(64938);case q.CANCELLED:case q.UNKNOWN:case q.DEADLINE_EXCEEDED:case q.RESOURCE_EXHAUSTED:case q.INTERNAL:case q.UNAVAILABLE:case q.UNAUTHENTICATED:return!1;case q.INVALID_ARGUMENT:case q.NOT_FOUND:case q.ALREADY_EXISTS:case q.PERMISSION_DENIED:case q.FAILED_PRECONDITION:case q.ABORTED:case q.OUT_OF_RANGE:case q.UNIMPLEMENTED:case q.DATA_LOSS:return!0;default:return he(15467,{code:n})}}function LU(n){if(n===void 0)return Fs("GRPC error has no .code"),q.UNKNOWN;switch(n){case Ht.OK:return q.OK;case Ht.CANCELLED:return q.CANCELLED;case Ht.UNKNOWN:return q.UNKNOWN;case Ht.DEADLINE_EXCEEDED:return q.DEADLINE_EXCEEDED;case Ht.RESOURCE_EXHAUSTED:return q.RESOURCE_EXHAUSTED;case Ht.INTERNAL:return q.INTERNAL;case Ht.UNAVAILABLE:return q.UNAVAILABLE;case Ht.UNAUTHENTICATED:return q.UNAUTHENTICATED;case Ht.INVALID_ARGUMENT:return q.INVALID_ARGUMENT;case Ht.NOT_FOUND:return q.NOT_FOUND;case Ht.ALREADY_EXISTS:return q.ALREADY_EXISTS;case Ht.PERMISSION_DENIED:return q.PERMISSION_DENIED;case Ht.FAILED_PRECONDITION:return q.FAILED_PRECONDITION;case Ht.ABORTED:return q.ABORTED;case Ht.OUT_OF_RANGE:return q.OUT_OF_RANGE;case Ht.UNIMPLEMENTED:return q.UNIMPLEMENTED;case Ht.DATA_LOSS:return q.DATA_LOSS;default:return he(39323,{code:n})}}(qe=Ht||(Ht={}))[qe.OK=0]="OK",qe[qe.CANCELLED=1]="CANCELLED",qe[qe.UNKNOWN=2]="UNKNOWN",qe[qe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",qe[qe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",qe[qe.NOT_FOUND=5]="NOT_FOUND",qe[qe.ALREADY_EXISTS=6]="ALREADY_EXISTS",qe[qe.PERMISSION_DENIED=7]="PERMISSION_DENIED",qe[qe.UNAUTHENTICATED=16]="UNAUTHENTICATED",qe[qe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",qe[qe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",qe[qe.ABORTED=10]="ABORTED",qe[qe.OUT_OF_RANGE=11]="OUT_OF_RANGE",qe[qe.UNIMPLEMENTED=12]="UNIMPLEMENTED",qe[qe.INTERNAL=13]="INTERNAL",qe[qe.UNAVAILABLE=14]="UNAVAILABLE",qe[qe.DATA_LOSS=15]="DATA_LOSS";var IL=null;var IY=new Ns([4294967295,4294967295],0);function bL(n){let e=KL().encode(n),t=new IS;return t.update(e),new Uint8Array(t.digest())}function CL(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Ns([t,r],0),new Ns([i,s],0)]}var lA=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Bc(`Invalid padding: ${t}`);if(r<0)throw new Bc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Bc(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Bc(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=Ns.fromNumber(this.fe)}pe(e,t,r){let i=e.add(t.multiply(Ns.fromNumber(r)));return i.compare(IY)===1&&(i=new Ns([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;let t=bL(e),[r,i]=CL(t);for(let s=0;s<this.hashCount;s++){let o=this.pe(r,i,s);if(!this.ye(o))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new n(s,i,t);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.fe===0)return;let t=bL(e),[r,i]=CL(t);for(let s=0;s<this.hashCount;s++){let o=this.pe(r,i,s);this.we(o)}}we(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},Bc=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Wv=class n{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,Np.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(Se.min(),i,new Tt(Ne),js(),Ue())}},Np=class n{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,Ue(),Ue(),Ue())}};var sd=class{constructor(e,t,r,i){this.Se=e,this.removedTargetIds=t,this.key=r,this.be=i}},Kv=class{constructor(e,t){this.targetId=e,this.De=t}},Qv=class{constructor(e,t,r=Pn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},Yv=class{constructor(){this.ve=0,this.Ce=TL(),this.Fe=Pn.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=Ue(),t=Ue(),r=Ue();return this.Ce.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:he(38017,{changeType:s})}}),new Np(this.Fe,this.Me,e,t,r)}ke(){this.xe=!1,this.Ce=TL()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,it(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}},uA=class{constructor(e){this.We=e,this.Ge=new Map,this.ze=js(),this.je=Pv(),this.Je=Pv(),this.He=new Tt(Ne)}Ye(e){for(let t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(let t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,t=>{let r=this.tt(t);switch(e.state){case 0:this.nt(t)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),r.Be(e.resumeToken));break;default:he(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach((r,i)=>{this.nt(i)&&t(i)})}it(e){let t=e.targetId,r=e.De.count,i=this.st(t);if(i){let s=i.target;if(ZS(s))if(r===0){let o=new ue(s.path);this.Xe(t,o,ni.newNoDocument(o,Se.min()))}else it(r===1,20013,{expectedCount:r});else{let o=this.ot(t);if(o!==r){let a=this._t(e),c=a?this.ut(a,e,o):1;if(c!==0){this.rt(t);let d=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,d)}IL?.ct((function(h,p,y,I,k){var P,M,$,Y,ee,Ce;let Je={localCacheCount:h,existenceFilterCount:p.count,databaseId:y.database,projectId:y.projectId},pe=p.unchangedNames;return pe&&(Je.bloomFilter={applied:k===0,hashCount:(P=pe?.hashCount)!==null&&P!==void 0?P:0,bitmapLength:(Y=($=(M=pe?.bits)===null||M===void 0?void 0:M.bitmap)===null||$===void 0?void 0:$.length)!==null&&Y!==void 0?Y:0,padding:(Ce=(ee=pe?.bits)===null||ee===void 0?void 0:ee.padding)!==null&&Ce!==void 0?Ce:0,mightContain:T=>{var v;return(v=I?.mightContain(T))!==null&&v!==void 0&&v}}),Je})(o,e.De,this.We.lt(),a,c))}}}}_t(e){let t=e.De.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t,o,a;try{o=Ls(r).toUint8Array()}catch(c){if(c instanceof Hv)return oa("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new lA(o,i,s)}catch(c){return oa(c instanceof Bc?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.fe===0?null:a}ut(e,t,r){return t.De.count===r-this.ht(e,t.targetId)?0:2}ht(e,t){let r=this.We.getRemoteKeysForTarget(t),i=0;return r.forEach(s=>{let o=this.We.lt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Xe(t,s,null),i++)}),i}Pt(e){let t=new Map;this.Ge.forEach((s,o)=>{let a=this.st(o);if(a){if(s.current&&ZS(a.target)){let c=new ue(a.target.path);this.Tt(c).has(o)||this.It(o,c)||this.Xe(o,c,ni.newNoDocument(c,e))}s.Ne&&(t.set(o,s.Le()),s.ke())}});let r=Ue();this.Je.forEach((s,o)=>{let a=!0;o.forEachWhile(c=>{let d=this.st(c);return!d||d.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ze.forEach((s,o)=>o.setReadTime(e));let i=new Wv(e,t,this.He,this.ze,r);return this.ze=js(),this.je=Pv(),this.Je=Pv(),this.He=new Tt(Ne),i}Ze(e,t){if(!this.nt(e))return;let r=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,r),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,r){if(!this.nt(e))return;let i=this.tt(e);this.It(e,t)?i.qe(t,1):i.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),r&&(this.ze=this.ze.insert(t,r))}removeTarget(e){this.Ge.delete(e)}ot(e){let t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new Yv,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new _n(Ne),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new _n(Ne),this.je=this.je.insert(e,t)),t}nt(e){let t=this.st(e)!==null;return t||re("WatchChangeAggregator","Detected inactive target",e),t}st(e){let t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new Yv),this.We.getRemoteKeysForTarget(e).forEach(t=>{this.Xe(e,t,null)})}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}};function Pv(){return new Tt(ue.comparator)}function TL(){return new Tt(ue.comparator)}var bY={asc:"ASCENDING",desc:"DESCENDING"},CY={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},TY={and:"AND",or:"OR"},dA=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function hA(n,e){return n.useProto3Json||v0(e)?e:{value:e}}function Jv(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function UU(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function DY(n,e){return Jv(n,e.toTimestamp())}function ji(n){return it(!!n,49232),Se.fromTimestamp((function(t){let r=Vs(t);return new Wt(r.seconds,r.nanos)})(n))}function kx(n,e){return fA(n,e).canonicalString()}function fA(n,e){let t=(function(i){return new vt(["projects",i.projectId,"databases",i.database])})(n).child("documents");return e===void 0?t:t.child(e)}function jU(n){let e=vt.fromString(n);return it(zU(e),10190,{key:e.toString()}),e}function pA(n,e){return kx(n.databaseId,e.path)}function AS(n,e){let t=jU(e);if(t.get(1)!==n.databaseId.projectId)throw new ne(q.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ne(q.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ue($U(t))}function BU(n,e){return kx(n.databaseId,e)}function SY(n){let e=jU(n);return e.length===4?vt.emptyPath():$U(e)}function gA(n){return new vt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function $U(n){return it(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function DL(n,e,t){return{name:pA(n,e),fields:t.value.mapValue.fields}}function AY(n,e){let t;if("targetChange"in e){e.targetChange;let r=(function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:he(39313,{state:d})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=(function(d,h){return d.useProto3Json?(it(h===void 0||typeof h=="string",58123),Pn.fromBase64String(h||"")):(it(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),Pn.fromUint8Array(h||new Uint8Array))})(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&(function(d){let h=d.code===void 0?q.UNKNOWN:LU(d.code);return new ne(h,d.message||"")})(o);t=new Qv(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=AS(n,r.document.name),s=ji(r.document.updateTime),o=r.document.createTime?ji(r.document.createTime):Se.min(),a=new fr({mapValue:{fields:r.document.fields}}),c=ni.newFoundDocument(i,s,o,a),d=r.targetIds||[],h=r.removedTargetIds||[];t=new sd(d,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=AS(n,r.document),s=r.readTime?ji(r.readTime):Se.min(),o=ni.newNoDocument(i,s),a=r.removedTargetIds||[];t=new sd([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=AS(n,r.document),s=r.removedTargetIds||[];t=new sd([],s,i,null)}else{if(!("filter"in e))return he(11601,{At:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,o=new cA(i,s),a=r.targetId;t=new Kv(a,o)}}return t}function xY(n,e){let t;if(e instanceof Yc)t={update:DL(n,e.key,e.value)};else if(e instanceof kp)t={delete:pA(n,e.key)};else if(e instanceof $i)t={update:DL(n,e.key,e.data),updateMask:LY(e.fieldMask)};else{if(!(e instanceof iA))return he(16599,{Rt:e.type});t={verify:pA(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>(function(s,o){let a=o.transform;if(a instanceof Wc)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Kc)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Qc)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof pd)return{fieldPath:o.field.canonicalString(),increment:a.Ee};throw he(20930,{transform:o.transform})})(0,r))),e.precondition.isNone||(t.currentDocument=(function(i,s){return s.updateTime!==void 0?{updateTime:DY(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:he(27497)})(n,e.precondition)),t}function RY(n,e){return n&&n.length>0?(it(e!==void 0,14353),n.map(t=>(function(i,s){let o=i.updateTime?ji(i.updateTime):ji(s);return o.isEqual(Se.min())&&(o=ji(s)),new rA(o,i.transformResults||[])})(t,e))):[]}function kY(n,e){return{documents:[BU(n,e.path)]}}function NY(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=BU(n,i);let s=(function(d){if(d.length!==0)return qU(ri.create(d,"and"))})(e.filters);s&&(t.structuredQuery.where=s);let o=(function(d){if(d.length!==0)return d.map(h=>(function(y){return{field:nd(y.field),direction:OY(y.dir)}})(h))})(e.orderBy);o&&(t.structuredQuery.orderBy=o);let a=hA(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=(function(d){return{before:d.inclusive,values:d.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(d){return{before:!d.inclusive,values:d.position}})(e.endAt)),{Vt:t,parent:i}}function MY(n){let e=SY(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){it(r===1,65062);let h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];t.where&&(s=(function(p){let y=HU(p);return y instanceof ri&&EU(y)?y.getFilters():[y]})(t.where));let o=[];t.orderBy&&(o=(function(p){return p.map(y=>(function(k){return new Gc(rd(k.field),(function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(k.direction))})(y))})(t.orderBy));let a=null;t.limit&&(a=(function(p){let y;return y=typeof p=="object"?p.value:p,v0(y)?null:y})(t.limit));let c=null;t.startAt&&(c=(function(p){let y=!!p.before,I=p.values||[];return new hd(I,y)})(t.startAt));let d=null;return t.endAt&&(d=(function(p){let y=!p.before,I=p.values||[];return new hd(I,y)})(t.endAt)),oY(e,i,o,s,a,"F",c,d)}function PY(n,e){let t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return he(28987,{purpose:i})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function HU(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=rd(t.unaryFilter.field);return zt.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=rd(t.unaryFilter.field);return zt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=rd(t.unaryFilter.field);return zt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=rd(t.unaryFilter.field);return zt.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return he(61313);default:return he(60726)}})(n):n.fieldFilter!==void 0?(function(t){return zt.create(rd(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return he(58110);default:return he(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return ri.create(t.compositeFilter.filters.map(r=>HU(r)),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return he(1026)}})(t.compositeFilter.op))})(n):he(30097,{filter:n})}function OY(n){return bY[n]}function FY(n){return CY[n]}function VY(n){return TY[n]}function nd(n){return{fieldPath:n.canonicalString()}}function rd(n){return pr.fromServerFormat(n.fieldPath)}function qU(n){return n instanceof zt?(function(t){if(t.op==="=="){if(fL(t.value))return{unaryFilter:{field:nd(t.field),op:"IS_NAN"}};if(hL(t.value))return{unaryFilter:{field:nd(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(fL(t.value))return{unaryFilter:{field:nd(t.field),op:"IS_NOT_NAN"}};if(hL(t.value))return{unaryFilter:{field:nd(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:nd(t.field),op:FY(t.op),value:t.value}}})(n):n instanceof ri?(function(t){let r=t.getFilters().map(i=>qU(i));return r.length===1?r[0]:{compositeFilter:{op:VY(t.op),filters:r}}})(n):he(54877,{filter:n})}function LY(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function zU(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Mp=class n{constructor(e,t,r,i,s=Se.min(),o=Se.min(),a=Pn.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var mA=class{constructor(e){this.gt=e}};function UY(n){let e=MY({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?tA(e,e.limit,"L"):e}var Xv=class{constructor(){}bt(e,t){this.Dt(e,t),t.vt()}Dt(e,t){if("nullValue"in e)this.Ct(t,5);else if("booleanValue"in e)this.Ct(t,10),t.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(t,15),t.Ft(_t(e.integerValue));else if("doubleValue"in e){let r=_t(e.doubleValue);isNaN(r)?this.Ct(t,13):(this.Ct(t,15),Ap(r)?t.Ft(0):t.Ft(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ct(t,20),typeof r=="string"&&(r=Vs(r)),t.Mt(`${r.seconds||""}`),t.Ft(r.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,t),this.Ot(t);else if("bytesValue"in e)this.Ct(t,30),t.Nt(Ls(e.bytesValue)),this.Ot(t);else if("referenceValue"in e)this.Bt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ct(t,45),t.Ft(r.latitude||0),t.Ft(r.longitude||0)}else"mapValue"in e?_U(e)?this.Ct(t,Number.MAX_SAFE_INTEGER):yU(e)?this.Lt(e.mapValue,t):(this.kt(e.mapValue,t),this.Ot(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Ot(t)):he(19022,{Qt:e})}xt(e,t){this.Ct(t,25),this.$t(e,t)}$t(e,t){t.Mt(e)}kt(e,t){let r=e.fields||{};this.Ct(t,55);for(let i of Object.keys(r))this.xt(i,t),this.Dt(r[i],t)}Lt(e,t){var r,i;let s=e.fields||{};this.Ct(t,53);let o=ld,a=((i=(r=s[o].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.Ct(t,15),t.Ft(_t(a)),this.xt(o,t),this.Dt(s[o],t)}qt(e,t){let r=e.values||[];this.Ct(t,50);for(let i of r)this.Dt(i,t)}Bt(e,t){this.Ct(t,37),ue.fromName(e).path.forEach(r=>{this.Ct(t,60),this.$t(r,t)})}Ct(e,t){e.Ft(t)}Ot(e){e.Ft(2)}};Xv.Ut=new Xv;var yA=class{constructor(){this.Dn=new _A}addToCollectionParentIndex(e,t){return this.Dn.add(t),W.resolve()}getCollectionParents(e,t){return W.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return W.resolve()}deleteFieldIndex(e,t){return W.resolve()}deleteAllFieldIndexes(e){return W.resolve()}createTargetIndexes(e,t){return W.resolve()}getDocumentsMatchingTarget(e,t){return W.resolve(null)}getIndexType(e,t){return W.resolve(0)}getFieldIndexes(e,t){return W.resolve([])}getNextCollectionGroupToUpdate(e){return W.resolve(null)}getMinOffset(e,t){return W.resolve(zc.min())}getMinOffsetFromCollectionGroup(e,t){return W.resolve(zc.min())}updateCollectionGroup(e,t,r){return W.resolve()}updateIndexEntries(e,t){return W.resolve()}},_A=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new _n(vt.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new _n(vt.comparator)).toArray()}};var Bve=new Uint8Array(0);var SL={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},GU=41943040,Ar=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};Ar.DEFAULT_COLLECTION_PERCENTILE=10,Ar.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ar.DEFAULT=new Ar(GU,Ar.DEFAULT_COLLECTION_PERCENTILE,Ar.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ar.DISABLED=new Ar(-1,0,0);var Pp=class n{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new n(0)}static ur(){return new n(-1)}};var AL="LruGarbageCollector",jY=1048576;function xL([n,e],[t,r]){let i=Ne(n,t);return i===0?Ne(e,r):i}var vA=class{constructor(e){this.Tr=e,this.buffer=new _n(xL),this.Ir=0}dr(){return++this.Ir}Er(e){let t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();xL(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},wA=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){re(AL,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Id(t)?re(AL,"Ignoring IndexedDB error during garbage collection: ",t):await Ed(t)}await this.Rr(3e5)})}},EA=class{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return W.resolve(Ex.ue);let r=new vA(t);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(re("LruGarbageCollector","Garbage collection skipped; disabled"),W.resolve(SL)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(re("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),SL):this.pr(e,t))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let r,i,s,o,a,c,d,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(re("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,o=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,a=Date.now(),this.removeTargets(e,r,t))).next(p=>(s=p,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(d=Date.now(),ed()<=Fe.DEBUG&&re("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(c-a)+`ms
	Removed ${p} documents in `+(d-c)+`ms
Total Duration: ${d-h}ms`),W.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:p})))}};function BY(n,e){return new EA(n,e)}var IA=class{constructor(){this.changes=new Us(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ni.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?W.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var bA=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var CA=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&Tp(r.mutation,i,xr.empty(),Wt.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Ue()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Ue()){let i=jc();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=Ep();return s.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){let r=jc();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Ue()))}populateOverlays(e,t,r){let i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,r,i){let s=js(),o=Cp(),a=(function(){return Cp()})();return t.forEach((c,d)=>{let h=r.get(d.key);i.has(d.key)&&(h===void 0||h.mutation instanceof $i)?s=s.insert(d.key,d):h!==void 0?(o.set(d.key,h.mutation.getFieldMask()),Tp(h.mutation,d,h.mutation.getFieldMask(),Wt.now())):o.set(d.key,xr.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((d,h)=>o.set(d,h)),t.forEach((d,h)=>{var p;return a.set(d,new bA(h,(p=o.get(d))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,t){let r=Cp(),i=new Tt((o,a)=>o-a),s=Ue();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(let a of o)a.keys().forEach(c=>{let d=t.get(c);if(d===null)return;let h=r.get(c)||xr.empty();h=a.applyToLocalView(d,h),r.set(c,h);let p=(i.get(a.batchId)||Ue()).add(c);i=i.insert(a.batchId,p)})}).next(()=>{let o=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),d=c.key,h=c.value,p=RU();h.forEach(y=>{if(!s.has(y)){let I=FU(t.get(y),r.get(y));I!==null&&p.set(y,I),s=s.add(y)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,p))}return W.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return(function(o){return ue.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):TU(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):W.resolve(jc()),a=Sp,c=s;return o.next(d=>W.forEach(d,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),s.get(h)?W.resolve():this.remoteDocumentCache.getEntry(e,h).next(y=>{c=c.insert(h,y)}))).next(()=>this.populateOverlays(e,d,s)).next(()=>this.computeViews(e,c,d,Ue())).next(h=>({batchId:a,changes:xU(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ue(t)).next(r=>{let i=Ep();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let s=t.collectionGroup,o=Ep();return this.indexManager.getCollectionParents(e,s).next(a=>W.forEach(a,c=>{let d=(function(p,y){return new ca(y,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)})(t,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,d,r,i).next(h=>{h.forEach((p,y)=>{o=o.insert(p,y)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((c,d)=>{let h=d.getKey();o.get(h)===null&&(o=o.insert(h,ni.newInvalidDocument(h)))});let a=Ep();return o.forEach((c,d)=>{let h=s.get(c);h!==void 0&&Tp(h.mutation,d,xr.empty(),Wt.now()),I0(t,d)&&(a=a.insert(c,d))}),a})}};var TA=class{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return W.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:ji(i.createTime)}})(t)),W.resolve()}getNamedQuery(e,t){return W.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,(function(i){return{name:i.name,query:UY(i.bundledQuery),readTime:ji(i.readTime)}})(t)),W.resolve()}};var DA=class{constructor(){this.overlays=new Tt(ue.comparator),this.kr=new Map}getOverlay(e,t){return W.resolve(this.overlays.get(t))}getOverlays(e,t){let r=jc();return W.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.wt(e,t,s)}),W.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.kr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.kr.delete(r)),W.resolve()}getOverlaysForCollection(e,t,r){let i=jc(),s=t.length+1,o=new ue(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let c=a.getNext().value,d=c.getKey();if(!t.isPrefixOf(d.path))break;d.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return W.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new Tt((d,h)=>d-h),o=this.overlays.getIterator();for(;o.hasNext();){let d=o.getNext().value;if(d.getKey().getCollectionGroup()===t&&d.largestBatchId>r){let h=s.get(d.largestBatchId);h===null&&(h=jc(),s=s.insert(d.largestBatchId,h)),h.set(d.getKey(),d)}}let a=jc(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((d,h)=>a.set(d,h)),!(a.size()>=i)););return W.resolve(a)}wt(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new aA(t,r));let s=this.kr.get(t);s===void 0&&(s=Ue(),this.kr.set(t,s)),this.kr.set(t,s.add(r.key))}};var SA=class{constructor(){this.sessionToken=Pn.EMPTY_BYTE_STRING}getSessionToken(e){return W.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,W.resolve()}};var Op=class{constructor(){this.qr=new _n(qt.Qr),this.$r=new _n(qt.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){let r=new qt(e,t);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Wr(new qt(e,t))}Gr(e,t){e.forEach(r=>this.removeReference(r,t))}zr(e){let t=new ue(new vt([])),r=new qt(t,e),i=new qt(t,e+1),s=[];return this.$r.forEachInRange([r,i],o=>{this.Wr(o),s.push(o.key)}),s}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){let t=new ue(new vt([])),r=new qt(t,e),i=new qt(t,e+1),s=Ue();return this.$r.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let t=new qt(e,0),r=this.qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},qt=class{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return ue.comparator(e.key,t.key)||Ne(e.Hr,t.Hr)}static Ur(e,t){return Ne(e.Hr,t.Hr)||ue.comparator(e.key,t.key)}};var AA=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new _n(qt.Qr)}checkEmpty(e){return W.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let s=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new sA(s,t,r,i);this.mutationQueue.push(o);for(let a of i)this.Yr=this.Yr.add(new qt(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return W.resolve(o)}lookupMutationBatch(e,t){return W.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.Xr(r),s=i<0?0:i;return W.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return W.resolve(this.mutationQueue.length===0?Ix:this.er-1)}getAllMutationBatches(e){return W.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new qt(t,0),i=new qt(t,Number.POSITIVE_INFINITY),s=[];return this.Yr.forEachInRange([r,i],o=>{let a=this.Zr(o.Hr);s.push(a)}),W.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new _n(Ne);return t.forEach(i=>{let s=new qt(i,0),o=new qt(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([s,o],a=>{r=r.add(a.Hr)})}),W.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,s=r;ue.isDocumentKey(s)||(s=s.child(""));let o=new qt(new ue(s),0),a=new _n(Ne);return this.Yr.forEachWhile(c=>{let d=c.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(a=a.add(c.Hr)),!0)},o),W.resolve(this.ei(a))}ei(e){let t=[];return e.forEach(r=>{let i=this.Zr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){it(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return W.forEach(t.mutations,i=>{let s=new qt(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,t){let r=new qt(t,0),i=this.Yr.firstAfterOrEqual(r);return W.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,W.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){let t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var xA=class{constructor(e){this.ni=e,this.docs=(function(){return new Tt(ue.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.ni(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return W.resolve(r?r.document.mutableCopy():ni.newInvalidDocument(t))}getEntries(e,t){let r=js();return t.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():ni.newInvalidDocument(i))}),W.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=js(),o=t.path,a=new ue(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:d,value:{document:h}}=c.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||BQ(jQ(h),r)<=0||(i.has(h.key)||I0(t,h))&&(s=s.insert(h.key,h.mutableCopy()))}return W.resolve(s)}getAllFromCollectionGroup(e,t,r,i){he(9500)}ri(e,t){return W.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new RA(this)}getSize(e){return W.resolve(this.size)}},RA=class extends IA{constructor(e){super(),this.Or=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Or.addEntry(e,i)):this.Or.removeEntry(r)}),W.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}};var kA=class{constructor(e){this.persistence=e,this.ii=new Us(t=>Sx(t),Ax),this.lastRemoteSnapshotVersion=Se.min(),this.highestTargetId=0,this.si=0,this.oi=new Op,this.targetCount=0,this._i=Pp.ar()}forEachTarget(e,t){return this.ii.forEach((r,i)=>t(i)),W.resolve()}getLastRemoteSnapshotVersion(e){return W.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return W.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),W.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.si&&(this.si=t),W.resolve()}hr(e){this.ii.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this._i=new Pp(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,W.resolve()}updateTargetData(e,t){return this.hr(t),W.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,W.resolve()}removeTargets(e,t,r){let i=0,s=[];return this.ii.forEach((o,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.ii.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),W.waitFor(s).next(()=>i)}getTargetCount(e){return W.resolve(this.targetCount)}getTargetData(e,t){let r=this.ii.get(t)||null;return W.resolve(r)}addMatchingKeys(e,t,r){return this.oi.Kr(t,r),W.resolve()}removeMatchingKeys(e,t,r){this.oi.Gr(t,r);let i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),W.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),W.resolve()}getMatchingKeysForTargetId(e,t){let r=this.oi.Jr(t);return W.resolve(r)}containsKey(e,t){return W.resolve(this.oi.containsKey(t))}};var Zv=class{constructor(e,t){this.ai={},this.overlays={},this.ui=new Ex(0),this.ci=!1,this.ci=!0,this.li=new SA,this.referenceDelegate=e(this),this.hi=new kA(this),this.indexManager=new yA,this.remoteDocumentCache=(function(i){return new xA(i)})(r=>this.referenceDelegate.Pi(r)),this.serializer=new mA(t),this.Ti=new TA(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new DA,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ai[e.toKey()];return r||(r=new AA(t,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,r){re("MemoryPersistence","Starting transaction:",e);let i=new NA(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(s=>this.referenceDelegate.di(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ei(e,t){return W.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,t)))}},NA=class extends jS{constructor(e){super(),this.currentSequenceNumber=e}},MA=class n{constructor(e){this.persistence=e,this.Ai=new Op,this.Ri=null}static Vi(e){return new n(e)}get mi(){if(this.Ri)return this.Ri;throw he(60996)}addReference(e,t,r){return this.Ai.addReference(r,t),this.mi.delete(r.toString()),W.resolve()}removeReference(e,t,r){return this.Ai.removeReference(r,t),this.mi.add(r.toString()),W.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),W.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach(i=>this.mi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.mi.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}Ii(){this.Ri=new Set}di(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return W.forEach(this.mi,r=>{let i=ue.fromPath(r);return this.fi(e,i).next(s=>{s||t.removeEntry(i,Se.min())})}).next(()=>(this.Ri=null,t.apply(e)))}updateLimboDocument(e,t){return this.fi(e,t).next(r=>{r?this.mi.delete(t.toString()):this.mi.add(t.toString())})}Pi(e){return 0}fi(e,t){return W.or([()=>W.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}},e0=class n{constructor(e,t){this.persistence=e,this.gi=new Us(r=>zQ(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=BY(this,t)}static Vi(e,t){return new n(e,t)}Ii(){}di(e){return W.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){let t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}yr(e){let t=0;return this.gr(e,r=>{t++}).next(()=>t)}gr(e,t){return W.forEach(this.gi,(r,i)=>this.Sr(e,r,i).next(s=>s?W.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ri(e,o=>this.Sr(e,o,t).next(a=>{a||(r++,s.removeEntry(o,Se.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),W.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),W.resolve()}removeReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),W.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),W.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Fv(e.data.value)),t}Sr(e,t,r){return W.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let i=this.gi.get(t);return W.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var PA=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Is=r,this.ds=i}static Es(e,t){let r=Ue(),i=Ue();for(let s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new n(e,t.fromCache,r,i)}};var OA=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var FA=class{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return BP()?8:HQ(fn())>0?6:4})()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,r,i){let s={result:null};return this.ps(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ys(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new OA;return this.ws(e,t,o).next(a=>{if(s.result=a,this.Rs)return this.Ss(e,t,o,a.size)})}).next(()=>s.result)}Ss(e,t,r,i){return r.documentReadCount<this.Vs?(ed()<=Fe.DEBUG&&re("QueryEngine","SDK will not create cache indexes for query:",td(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),W.resolve()):(ed()<=Fe.DEBUG&&re("QueryEngine","Query:",td(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?(ed()<=Fe.DEBUG&&re("QueryEngine","The SDK decides to create cache indexes for query:",td(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ui(t))):W.resolve())}ps(e,t){if(yL(t))return W.resolve(null);let r=Ui(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=tA(t,null,"F"),r=Ui(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=Ue(...s);return this.gs.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let d=this.bs(t,a);return this.Ds(t,d,o,c.readTime)?this.ps(e,tA(t,null,"F")):this.vs(e,d,t,c)}))})))}ys(e,t,r,i){return yL(t)||i.isEqual(Se.min())?W.resolve(null):this.gs.getDocuments(e,r).next(s=>{let o=this.bs(t,s);return this.Ds(t,o,r,i)?W.resolve(null):(ed()<=Fe.DEBUG&&re("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),td(t)),this.vs(e,o,t,UQ(i,Sp)).next(a=>a))})}bs(e,t){let r=new _n(SU(e));return t.forEach((i,s)=>{I0(e,s)&&(r=r.add(s))}),r}Ds(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}ws(e,t,r){return ed()<=Fe.DEBUG&&re("QueryEngine","Using full collection scan to execute query:",td(t)),this.gs.getDocumentsMatchingQuery(e,t,zc.min(),r)}vs(e,t,r,i){return this.gs.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}};var Nx="LocalStore",$Y=3e8,VA=class{constructor(e,t,r,i){this.persistence=e,this.Cs=t,this.serializer=i,this.Fs=new Tt(Ne),this.Ms=new Us(s=>Sx(s),Ax),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new CA(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Fs))}};function HY(n,e,t,r){return new VA(n,e,t,r)}async function WU(n,e){let t=be(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.Ns(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{let o=[],a=[],c=Ue();for(let d of i){o.push(d.batchId);for(let h of d.mutations)c=c.add(h.key)}for(let d of s){a.push(d.batchId);for(let h of d.mutations)c=c.add(h.key)}return t.localDocuments.getDocuments(r,c).next(d=>({Bs:d,removedBatchIds:o,addedBatchIds:a}))})})}function qY(n,e){let t=be(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),s=t.Os.newChangeBuffer({trackRemovals:!0});return(function(a,c,d,h){let p=d.batch,y=p.keys(),I=W.resolve();return y.forEach(k=>{I=I.next(()=>h.getEntry(c,k)).next(P=>{let M=d.docVersions.get(k);it(M!==null,48541),P.version.compareTo(M)<0&&(p.applyToRemoteDocument(P,d),P.isValidDocument()&&(P.setReadTime(d.commitVersion),h.addEntry(P)))})}),I.next(()=>a.mutationQueue.removeMutationBatch(c,p))})(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(a){let c=Ue();for(let d=0;d<a.mutationResults.length;++d)a.mutationResults[d].transformResults.length>0&&(c=c.add(a.batch.mutations[d].key));return c})(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function KU(n){let e=be(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.hi.getLastRemoteSnapshotVersion(t))}function zY(n,e){let t=be(n),r=e.snapshotVersion,i=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=t.Os.newChangeBuffer({trackRemovals:!0});i=t.Fs;let a=[];e.targetChanges.forEach((h,p)=>{let y=i.get(p);if(!y)return;a.push(t.hi.removeMatchingKeys(s,h.removedDocuments,p).next(()=>t.hi.addMatchingKeys(s,h.addedDocuments,p)));let I=y.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(p)!==null?I=I.withResumeToken(Pn.EMPTY_BYTE_STRING,Se.min()).withLastLimboFreeSnapshotVersion(Se.min()):h.resumeToken.approximateByteSize()>0&&(I=I.withResumeToken(h.resumeToken,r)),i=i.insert(p,I),(function(P,M,$){return P.resumeToken.approximateByteSize()===0||M.snapshotVersion.toMicroseconds()-P.snapshotVersion.toMicroseconds()>=$Y?!0:$.addedDocuments.size+$.modifiedDocuments.size+$.removedDocuments.size>0})(y,I,h)&&a.push(t.hi.updateTargetData(s,I))});let c=js(),d=Ue();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(GY(s,o,e.documentUpdates).next(h=>{c=h.Ls,d=h.ks})),!r.isEqual(Se.min())){let h=t.hi.getLastRemoteSnapshotVersion(s).next(p=>t.hi.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(h)}return W.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,c,d)).next(()=>c)}).then(s=>(t.Fs=i,s))}function GY(n,e,t){let r=Ue(),i=Ue();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=js();return t.forEach((a,c)=>{let d=s.get(a);c.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(Se.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!d.isValidDocument()||c.version.compareTo(d.version)>0||c.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):re(Nx,"Ignoring outdated watch update for ",a,". Current version:",d.version," Watch version:",c.version)}),{Ls:o,ks:i}})}function WY(n,e){let t=be(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Ix),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function KY(n,e){let t=be(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.hi.getTargetData(r,e).next(s=>s?(i=s,W.resolve(i)):t.hi.allocateTargetId(r).next(o=>(i=new Mp(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.hi.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.Fs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(r.targetId,r),t.Ms.set(e,r.targetId)),r})}async function LA(n,e,t){let r=be(n),i=r.Fs.get(e),s=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Id(o))throw o;re(Nx,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(i.target)}function RL(n,e,t){let r=be(n),i=Se.min(),s=Ue();return r.persistence.runTransaction("Execute query","readwrite",o=>(function(c,d,h){let p=be(c),y=p.Ms.get(h);return y!==void 0?W.resolve(p.Fs.get(y)):p.hi.getTargetData(d,h)})(r,o,Ui(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(o,a.targetId).next(c=>{s=c})}).next(()=>r.Cs.getDocumentsMatchingQuery(o,e,t?i:Se.min(),t?s:Ue())).next(a=>(QY(r,cY(e),a),{documents:a,qs:s})))}function QY(n,e,t){let r=n.xs.get(e)||Se.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.xs.set(e,r)}var t0=class{constructor(){this.activeTargetIds=pY()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var UA=class{constructor(){this.Fo=new t0,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,r){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new t0,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var jA=class{xo(e){}shutdown(){}};var kL="ConnectivityMonitor",n0=class{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){re(kL,"Network connectivity changed: AVAILABLE");for(let e of this.ko)e(0)}Lo(){re(kL,"Network connectivity changed: UNAVAILABLE");for(let e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Ov=null;function BA(){return Ov===null?Ov=(function(){return 268435456+Math.round(2147483648*Math.random())})():Ov++,"0x"+Ov.toString(16)}var xS="RestConnection",YY={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},$A=class{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===qv?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,t,r,i,s){let o=BA(),a=this.Go(e,t.toUriEncodedString());re(xS,`Sending RPC '${e}' ${o}:`,a,r);let c={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(c,i,s);let{host:d}=new URL(a),h=Mo(d);return this.jo(e,a,c,r,h).then(p=>(re(xS,`Received RPC '${e}' ${o}: `,p),p),p=>{throw oa(xS,`RPC '${e}' ${o} failed with error: `,p,"url: ",a,"request:",r),p})}Jo(e,t,r,i,s,o){return this.Wo(e,t,r,i,s)}zo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+wd})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}Go(e,t){let r=YY[e];return`${this.$o}/v1/${t}:${r}`}terminate(){}};var HA=class{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}};var Mn="WebChannelConnection",qA=class extends $A{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,r,i,s){let o=BA();return new Promise((a,c)=>{let d=new bS;d.setWithCredentials(!0),d.listenOnce(CS.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case wp.NO_ERROR:let p=d.getResponseJson();re(Mn,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(p)),a(p);break;case wp.TIMEOUT:re(Mn,`RPC '${e}' ${o} timed out`),c(new ne(q.DEADLINE_EXCEEDED,"Request time out"));break;case wp.HTTP_ERROR:let y=d.getStatus();if(re(Mn,`RPC '${e}' ${o} failed with status:`,y,"response text:",d.getResponseText()),y>0){let I=d.getResponseJson();Array.isArray(I)&&(I=I[0]);let k=I?.error;if(k&&k.status&&k.message){let P=(function($){let Y=$.toLowerCase().replace(/_/g,"-");return Object.values(q).indexOf(Y)>=0?Y:q.UNKNOWN})(k.status);c(new ne(P,k.message))}else c(new ne(q.UNKNOWN,"Server responded with status "+d.getStatus()))}else c(new ne(q.UNAVAILABLE,"Connection failed."));break;default:he(9055,{c_:e,streamId:o,l_:d.getLastErrorCode(),h_:d.getLastError()})}}finally{re(Mn,`RPC '${e}' ${o} completed.`)}});let h=JSON.stringify(i);re(Mn,`RPC '${e}' ${o} sending request:`,i),d.send(t,"POST",h,r,15)})}P_(e,t,r){let i=BA(),s=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=SS(),a=DS(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(c.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(c.useFetchStreams=!0),this.zo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;let h=s.join("");re(Mn,`Creating RPC '${e}' stream ${i}: ${h}`,c);let p=o.createWebChannel(h,c);this.T_(p);let y=!1,I=!1,k=new HA({Ho:M=>{I?re(Mn,`Not sending because RPC '${e}' stream ${i} is closed:`,M):(y||(re(Mn,`Opening RPC '${e}' stream ${i} transport.`),p.open(),y=!0),re(Mn,`RPC '${e}' stream ${i} sending:`,M),p.send(M))},Yo:()=>p.close()}),P=(M,$,Y)=>{M.listen($,ee=>{try{Y(ee)}catch(Ce){setTimeout(()=>{throw Ce},0)}})};return P(p,Zu.EventType.OPEN,()=>{I||(re(Mn,`RPC '${e}' stream ${i} transport opened.`),k.s_())}),P(p,Zu.EventType.CLOSE,()=>{I||(I=!0,re(Mn,`RPC '${e}' stream ${i} transport closed`),k.__(),this.I_(p))}),P(p,Zu.EventType.ERROR,M=>{I||(I=!0,oa(Mn,`RPC '${e}' stream ${i} transport errored. Name:`,M.name,"Message:",M.message),k.__(new ne(q.UNAVAILABLE,"The operation could not be completed")))}),P(p,Zu.EventType.MESSAGE,M=>{var $;if(!I){let Y=M.data[0];it(!!Y,16349);let ee=Y,Ce=ee?.error||(($=ee[0])===null||$===void 0?void 0:$.error);if(Ce){re(Mn,`RPC '${e}' stream ${i} received error:`,Ce);let Je=Ce.status,pe=(function(E){let C=Ht[E];if(C!==void 0)return LU(C)})(Je),T=Ce.message;pe===void 0&&(pe=q.INTERNAL,T="Unknown error status: "+Je+" with message "+Ce.message),I=!0,k.__(new ne(pe,T)),p.close()}else re(Mn,`RPC '${e}' stream ${i} received:`,Y),k.a_(Y)}}),P(a,TS.STAT_EVENT,M=>{M.stat===Nv.PROXY?re(Mn,`RPC '${e}' stream ${i} detected buffering proxy`):M.stat===Nv.NOPROXY&&re(Mn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{k.o_()},0),k}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(t=>t===e)}};function RS(){return typeof document<"u"?document:null}function b0(n){return new dA(n,!0)}var r0=class{constructor(e,t,r=1e3,i=1.5,s=6e4){this.Fi=e,this.timerId=t,this.d_=r,this.E_=i,this.A_=s,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();let t=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,t-r);i>0&&re("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}};var NL="PersistentStream",i0=class{constructor(e,t,r,i,s,o,a,c){this.Fi=e,this.w_=r,this.S_=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new r0(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===q.RESOURCE_EXHAUSTED?(Fs(t.toString()),Fs("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===q.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(t)}U_(){}auth(){this.state=1;let e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===t&&this.W_(r,i)},r=>{e(()=>{let i=new ne(q.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(e,t){let r=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>++this.C_==1?this.j_(i):this.onNext(i))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return re(NL,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget(()=>this.b_===e?t():(re(NL,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},zA=class extends i0{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();let t=AY(this.serializer,e),r=(function(s){if(!("targetChange"in s))return Se.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?Se.min():o.readTime?ji(o.readTime):Se.min()})(e);return this.listener.J_(t,r)}H_(e){let t={};t.database=gA(this.serializer),t.addTarget=(function(s,o){let a,c=o.target;if(a=ZS(c)?{documents:kY(s,c)}:{query:NY(s,c).Vt},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=UU(s,o.resumeToken);let d=hA(s,o.expectedCount);d!==null&&(a.expectedCount=d)}else if(o.snapshotVersion.compareTo(Se.min())>0){a.readTime=Jv(s,o.snapshotVersion.toTimestamp());let d=hA(s,o.expectedCount);d!==null&&(a.expectedCount=d)}return a})(this.serializer,e);let r=PY(this.serializer,e);r&&(t.labels=r),this.k_(t)}Y_(e){let t={};t.database=gA(this.serializer),t.removeTarget=e,this.k_(t)}},GA=class extends i0{constructor(e,t,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return it(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,it(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){it(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();let t=RY(e.writeResults,e.commitTime),r=ji(e.commitTime);return this.listener.ta(r,t)}na(){let e={};e.database=gA(this.serializer),this.k_(e)}X_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>xY(this.serializer,r))};this.k_(t)}};var WA=class{},KA=class extends WA{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new ne(q.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Wo(e,fA(t,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new ne(q.UNKNOWN,s.toString())})}Jo(e,t,r,i,s){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Jo(e,fA(t,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ne(q.UNKNOWN,o.toString())})}terminate(){this.ra=!0,this.connection.terminate()}},QA=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Fs(t),this._a=!1):re("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}};var Jc="RemoteStore",YA=class{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=s,this.Ea.xo(o=>{r.enqueueAndForget(async()=>{Zc(this)&&(re(Jc,"Restarting streams for network reachability change."),await(async function(c){let d=be(c);d.Ia.add(4),await Lp(d),d.Aa.set("Unknown"),d.Ia.delete(4),await C0(d)})(this))})}),this.Aa=new QA(r,i)}};async function C0(n){if(Zc(n))for(let e of n.da)await e(!0)}async function Lp(n){for(let e of n.da)await e(!1)}function QU(n,e){let t=be(n);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),Fx(t)?Ox(t):bd(t).x_()&&Px(t,e))}function Mx(n,e){let t=be(n),r=bd(t);t.Ta.delete(e),r.x_()&&YU(t,e),t.Ta.size===0&&(r.x_()?r.B_():Zc(t)&&t.Aa.set("Unknown"))}function Px(n,e){if(n.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Se.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}bd(n).H_(e)}function YU(n,e){n.Ra.$e(e),bd(n).Y_(e)}function Ox(n){n.Ra=new uA({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Ta.get(e)||null,lt:()=>n.datastore.serializer.databaseId}),bd(n).start(),n.Aa.aa()}function Fx(n){return Zc(n)&&!bd(n).M_()&&n.Ta.size>0}function Zc(n){return be(n).Ia.size===0}function JU(n){n.Ra=void 0}async function JY(n){n.Aa.set("Online")}async function XY(n){n.Ta.forEach((e,t)=>{Px(n,e)})}async function ZY(n,e){JU(n),Fx(n)?(n.Aa.la(e),Ox(n)):n.Aa.set("Unknown")}async function eJ(n,e,t){if(n.Aa.set("Online"),e instanceof Qv&&e.state===2&&e.cause)try{await(async function(i,s){let o=s.cause;for(let a of s.targetIds)i.Ta.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.Ta.delete(a),i.Ra.removeTarget(a))})(n,e)}catch(r){re(Jc,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await s0(n,r)}else if(e instanceof sd?n.Ra.Ye(e):e instanceof Kv?n.Ra.it(e):n.Ra.et(e),!t.isEqual(Se.min()))try{let r=await KU(n.localStore);t.compareTo(r)>=0&&await(function(s,o){let a=s.Ra.Pt(o);return a.targetChanges.forEach((c,d)=>{if(c.resumeToken.approximateByteSize()>0){let h=s.Ta.get(d);h&&s.Ta.set(d,h.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,d)=>{let h=s.Ta.get(c);if(!h)return;s.Ta.set(c,h.withResumeToken(Pn.EMPTY_BYTE_STRING,h.snapshotVersion)),YU(s,c);let p=new Mp(h.target,c,d,h.sequenceNumber);Px(s,p)}),s.remoteSyncer.applyRemoteEvent(a)})(n,t)}catch(r){re(Jc,"Failed to raise snapshot:",r),await s0(n,r)}}async function s0(n,e,t){if(!Id(e))throw e;n.Ia.add(1),await Lp(n),n.Aa.set("Offline"),t||(t=()=>KU(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{re(Jc,"Retrying IndexedDB access"),await t(),n.Ia.delete(1),await C0(n)})}function XU(n,e){return e().catch(t=>s0(n,t,e))}async function T0(n){let e=be(n),t=la(e),r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:Ix;for(;tJ(e);)try{let i=await WY(e.localStore,r);if(i===null){e.Pa.length===0&&t.B_();break}r=i.batchId,nJ(e,i)}catch(i){await s0(e,i)}ZU(e)&&ej(e)}function tJ(n){return Zc(n)&&n.Pa.length<10}function nJ(n,e){n.Pa.push(e);let t=la(n);t.x_()&&t.Z_&&t.X_(e.mutations)}function ZU(n){return Zc(n)&&!la(n).M_()&&n.Pa.length>0}function ej(n){la(n).start()}async function rJ(n){la(n).na()}async function iJ(n){let e=la(n);for(let t of n.Pa)e.X_(t.mutations)}async function sJ(n,e,t){let r=n.Pa.shift(),i=oA.from(r,e,t);await XU(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),await T0(n)}async function oJ(n,e){e&&la(n).Z_&&await(async function(r,i){if((function(o){return EY(o)&&o!==q.ABORTED})(i.code)){let s=r.Pa.shift();la(r).N_(),await XU(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await T0(r)}})(n,e),ZU(n)&&ej(n)}async function ML(n,e){let t=be(n);t.asyncQueue.verifyOperationInProgress(),re(Jc,"RemoteStore received new credentials");let r=Zc(t);t.Ia.add(3),await Lp(t),r&&t.Aa.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),await C0(t)}async function aJ(n,e){let t=be(n);e?(t.Ia.delete(2),await C0(t)):e||(t.Ia.add(2),await Lp(t),t.Aa.set("Unknown"))}function bd(n){return n.Va||(n.Va=(function(t,r,i){let s=be(t);return s.ia(),new zA(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(n.datastore,n.asyncQueue,{Zo:JY.bind(null,n),e_:XY.bind(null,n),n_:ZY.bind(null,n),J_:eJ.bind(null,n)}),n.da.push(async e=>{e?(n.Va.N_(),Fx(n)?Ox(n):n.Aa.set("Unknown")):(await n.Va.stop(),JU(n))})),n.Va}function la(n){return n.ma||(n.ma=(function(t,r,i){let s=be(t);return s.ia(),new GA(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:rJ.bind(null,n),n_:oJ.bind(null,n),ea:iJ.bind(null,n),ta:sJ.bind(null,n)}),n.da.push(async e=>{e?(n.ma.N_(),await T0(n)):(await n.ma.stop(),n.Pa.length>0&&(re(Jc,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))})),n.ma}var JA=class n{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Ps,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){let o=Date.now()+r,a=new n(e,t,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ne(q.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Vx(n,e){if(Fs("AsyncQueue",`${e}: ${n}`),Id(n))return new ne(q.UNAVAILABLE,`${e}: ${n}`);throw n}var o0=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||ue.comparator(t.key,r.key):(t,r)=>ue.comparator(t.key,r.key),this.keyedMap=Ep(),this.sortedSet=new Tt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var a0=class{constructor(){this.fa=new Tt(ue.comparator)}track(e){let t=e.doc.key,r=this.fa.get(t);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(t,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(t):e.type===1&&r.type===2?this.fa=this.fa.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):he(63341,{At:e,ga:r}):this.fa=this.fa.insert(t,e)}pa(){let e=[];return this.fa.inorderTraversal((t,r)=>{e.push(r)}),e}},md=class n{constructor(e,t,r,i,s,o,a,c,d){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=d}static fromInitialDocuments(e,t,r,i,s){let o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new n(e,t,o0.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&E0(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var XA=class{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}},ZA=class{constructor(){this.queries=PL(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,r){let i=be(t),s=i.queries;i.queries=PL(),s.forEach((o,a)=>{for(let c of a.wa)c.onError(r)})})(this,new ne(q.ABORTED,"Firestore shutting down"))}};function PL(){return new Us(n=>DU(n),E0)}async function cJ(n,e){let t=be(n),r=3,i=e.query,s=t.queries.get(i);s?!s.Sa()&&e.ba()&&(r=2):(s=new XA,r=e.ba()?0:1);try{switch(r){case 0:s.ya=await t.onListen(i,!0);break;case 1:s.ya=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(o){let a=Vx(o,`Initialization of query '${td(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,s),s.wa.push(e),e.va(t.onlineState),s.ya&&e.Ca(s.ya)&&Lx(t)}async function lJ(n,e){let t=be(n),r=e.query,i=3,s=t.queries.get(r);if(s){let o=s.wa.indexOf(e);o>=0&&(s.wa.splice(o,1),s.wa.length===0?i=e.ba()?0:1:!s.Sa()&&e.ba()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function uJ(n,e){let t=be(n),r=!1;for(let i of e){let s=i.query,o=t.queries.get(s);if(o){for(let a of o.wa)a.Ca(i)&&(r=!0);o.ya=i}}r&&Lx(t)}function dJ(n,e,t){let r=be(n),i=r.queries.get(e);if(i)for(let s of i.wa)s.onError(t);r.queries.delete(e)}function Lx(n){n.Da.forEach(e=>{e.next()})}var ex,OL;(OL=ex||(ex={})).Fa="default",OL.Cache="cache";var tx=class{constructor(e,t,r){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new md(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;let r=t!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;let t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=md.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==ex.Cache}};var c0=class{constructor(e){this.key=e}},l0=class{constructor(e){this.key=e}},nx=class{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=Ue(),this.mutatedKeys=Ue(),this.Xa=SU(e),this.eu=new o0(this.Xa)}get tu(){return this.Ha}nu(e,t){let r=t?t.ru:new a0,i=t?t.eu:this.eu,s=t?t.mutatedKeys:this.mutatedKeys,o=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,d=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let y=i.get(h),I=I0(this.query,p)?p:null,k=!!y&&this.mutatedKeys.has(y.key),P=!!I&&(I.hasLocalMutations||this.mutatedKeys.has(I.key)&&I.hasCommittedMutations),M=!1;y&&I?y.data.isEqual(I.data)?k!==P&&(r.track({type:3,doc:I}),M=!0):this.iu(y,I)||(r.track({type:2,doc:I}),M=!0,(c&&this.Xa(I,c)>0||d&&this.Xa(I,d)<0)&&(a=!0)):!y&&I?(r.track({type:0,doc:I}),M=!0):y&&!I&&(r.track({type:1,doc:y}),M=!0,(c||d)&&(a=!0)),M&&(I?(o=o.add(I),s=P?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{eu:o,ru:r,Ds:a,mutatedKeys:s}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let s=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;let o=e.ru.pa();o.sort((h,p)=>(function(I,k){let P=M=>{switch(M){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return he(20277,{At:M})}};return P(I)-P(k)})(h.type,p.type)||this.Xa(h.doc,p.doc)),this.su(r),i=i!=null&&i;let a=t&&!i?this.ou():[],c=this.Za.size===0&&this.current&&!i?1:0,d=c!==this.Ya;return this.Ya=c,o.length!==0||d?{snapshot:new md(this.query,e.eu,s,o,e.mutatedKeys,c===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:a}:{_u:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new a0,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(t=>this.Ha=this.Ha.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ha=this.Ha.delete(t)),this.current=e.current)}ou(){if(!this.current)return[];let e=this.Za;this.Za=Ue(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});let t=[];return e.forEach(r=>{this.Za.has(r)||t.push(new l0(r))}),this.Za.forEach(r=>{e.has(r)||t.push(new c0(r))}),t}uu(e){this.Ha=e.qs,this.Za=Ue();let t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return md.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}},Ux="SyncEngine",rx=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},ix=class{constructor(e){this.key=e,this.lu=!1}},sx=class{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.hu={},this.Pu=new Us(a=>DU(a),E0),this.Tu=new Map,this.Iu=new Set,this.du=new Tt(ue.comparator),this.Eu=new Map,this.Au=new Op,this.Ru={},this.Vu=new Map,this.mu=Pp.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}};async function hJ(n,e,t=!0){let r=oj(n),i,s=r.Pu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.cu()):i=await tj(r,e,t,!0),i}async function fJ(n,e){let t=oj(n);await tj(t,e,!0,!1)}async function tj(n,e,t,r){let i=await KY(n.localStore,Ui(e)),s=i.targetId,o=n.sharedClientState.addLocalQueryTarget(s,t),a;return r&&(a=await pJ(n,e,s,o==="current",i.resumeToken)),n.isPrimaryClient&&t&&QU(n.remoteStore,i),a}async function pJ(n,e,t,r,i){n.gu=(p,y,I)=>(async function(P,M,$,Y){let ee=M.view.nu($);ee.Ds&&(ee=await RL(P.localStore,M.query,!1).then(({documents:T})=>M.view.nu(T,ee)));let Ce=Y&&Y.targetChanges.get(M.targetId),Je=Y&&Y.targetMismatches.get(M.targetId)!=null,pe=M.view.applyChanges(ee,P.isPrimaryClient,Ce,Je);return VL(P,M.targetId,pe._u),pe.snapshot})(n,p,y,I);let s=await RL(n.localStore,e,!0),o=new nx(e,s.qs),a=o.nu(s.documents),c=Np.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),d=o.applyChanges(a,n.isPrimaryClient,c);VL(n,t,d._u);let h=new rx(e,t,o);return n.Pu.set(e,h),n.Tu.has(t)?n.Tu.get(t).push(e):n.Tu.set(t,[e]),d.snapshot}async function gJ(n,e,t){let r=be(n),i=r.Pu.get(e),s=r.Tu.get(i.targetId);if(s.length>1)return r.Tu.set(i.targetId,s.filter(o=>!E0(o,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await LA(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&Mx(r.remoteStore,i.targetId),ox(r,i.targetId)}).catch(Ed)):(ox(r,i.targetId),await LA(r.localStore,i.targetId,!0))}async function mJ(n,e){let t=be(n),r=t.Pu.get(e),i=t.Tu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Mx(t.remoteStore,r.targetId))}async function yJ(n,e,t){let r=CJ(n);try{let i=await(function(o,a){let c=be(o),d=Wt.now(),h=a.reduce((I,k)=>I.add(k.key),Ue()),p,y;return c.persistence.runTransaction("Locally write mutations","readwrite",I=>{let k=js(),P=Ue();return c.Os.getEntries(I,h).next(M=>{k=M,k.forEach(($,Y)=>{Y.isValidDocument()||(P=P.add($))})}).next(()=>c.localDocuments.getOverlayedDocuments(I,k)).next(M=>{p=M;let $=[];for(let Y of a){let ee=wY(Y,p.get(Y.key).overlayedDocument);ee!=null&&$.push(new $i(Y.key,ee,vU(ee.value.mapValue),Os.exists(!0)))}return c.mutationQueue.addMutationBatch(I,d,$,a)}).next(M=>{y=M;let $=M.applyToLocalDocumentSet(p,P);return c.documentOverlayCache.saveOverlays(I,M.batchId,$)})}).then(()=>({batchId:y.batchId,changes:xU(p)}))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(o,a,c){let d=o.Ru[o.currentUser.toKey()];d||(d=new Tt(Ne)),d=d.insert(a,c),o.Ru[o.currentUser.toKey()]=d})(r,i.batchId,t),await Up(r,i.changes),await T0(r.remoteStore)}catch(i){let s=Vx(i,"Failed to persist write");t.reject(s)}}async function nj(n,e){let t=be(n);try{let r=await zY(t.localStore,e);e.targetChanges.forEach((i,s)=>{let o=t.Eu.get(s);o&&(it(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.lu=!0:i.modifiedDocuments.size>0?it(o.lu,14607):i.removedDocuments.size>0&&(it(o.lu,42227),o.lu=!1))}),await Up(t,r,e)}catch(r){await Ed(r)}}function FL(n,e,t){let r=be(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Pu.forEach((s,o)=>{let a=o.view.va(e);a.snapshot&&i.push(a.snapshot)}),(function(o,a){let c=be(o);c.onlineState=a;let d=!1;c.queries.forEach((h,p)=>{for(let y of p.wa)y.va(a)&&(d=!0)}),d&&Lx(c)})(r.eventManager,e),i.length&&r.hu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function _J(n,e,t){let r=be(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Eu.get(e),s=i&&i.key;if(s){let o=new Tt(ue.comparator);o=o.insert(s,ni.newNoDocument(s,Se.min()));let a=Ue().add(s),c=new Wv(Se.min(),new Map,new Tt(Ne),o,a);await nj(r,c),r.du=r.du.remove(s),r.Eu.delete(e),jx(r)}else await LA(r.localStore,e,!1).then(()=>ox(r,e,t)).catch(Ed)}async function vJ(n,e){let t=be(n),r=e.batch.batchId;try{let i=await qY(t.localStore,e);ij(t,r,null),rj(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await Up(t,i)}catch(i){await Ed(i)}}async function wJ(n,e,t){let r=be(n);try{let i=await(function(o,a){let c=be(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let h;return c.mutationQueue.lookupMutationBatch(d,a).next(p=>(it(p!==null,37113),h=p.keys(),c.mutationQueue.removeMutationBatch(d,p))).next(()=>c.mutationQueue.performConsistencyCheck(d)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(d,h,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,h)).next(()=>c.localDocuments.getDocuments(d,h))})})(r.localStore,e);ij(r,e,t),rj(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await Up(r,i)}catch(i){await Ed(i)}}function rj(n,e){(n.Vu.get(e)||[]).forEach(t=>{t.resolve()}),n.Vu.delete(e)}function ij(n,e,t){let r=be(n),i=r.Ru[r.currentUser.toKey()];if(i){let s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Ru[r.currentUser.toKey()]=i}}function ox(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Tu.get(e))n.Pu.delete(r),t&&n.hu.pu(r,t);n.Tu.delete(e),n.isPrimaryClient&&n.Au.zr(e).forEach(r=>{n.Au.containsKey(r)||sj(n,r)})}function sj(n,e){n.Iu.delete(e.path.canonicalString());let t=n.du.get(e);t!==null&&(Mx(n.remoteStore,t),n.du=n.du.remove(e),n.Eu.delete(t),jx(n))}function VL(n,e,t){for(let r of t)r instanceof c0?(n.Au.addReference(r.key,e),EJ(n,r)):r instanceof l0?(re(Ux,"Document no longer in limbo: "+r.key),n.Au.removeReference(r.key,e),n.Au.containsKey(r.key)||sj(n,r.key)):he(19791,{yu:r})}function EJ(n,e){let t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Iu.has(r)||(re(Ux,"New document in limbo: "+t),n.Iu.add(r),jx(n))}function jx(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){let e=n.Iu.values().next().value;n.Iu.delete(e);let t=new ue(vt.fromString(e)),r=n.mu.next();n.Eu.set(r,new ix(t)),n.du=n.du.insert(t,r),QU(n.remoteStore,new Mp(Ui(xx(t.path)),r,"TargetPurposeLimboResolution",Ex.ue))}}async function Up(n,e,t){let r=be(n),i=[],s=[],o=[];r.Pu.isEmpty()||(r.Pu.forEach((a,c)=>{o.push(r.gu(c,e,t).then(d=>{var h;if((d||t)&&r.isPrimaryClient){let p=d?!d.fromCache:(h=t?.targetChanges.get(c.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(c.targetId,p?"current":"not-current")}if(d){i.push(d);let p=PA.Es(c.targetId,d);s.push(p)}}))}),await Promise.all(o),r.hu.J_(i),await(async function(c,d){let h=be(c);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>W.forEach(d,y=>W.forEach(y.Is,I=>h.persistence.referenceDelegate.addReference(p,y.targetId,I)).next(()=>W.forEach(y.ds,I=>h.persistence.referenceDelegate.removeReference(p,y.targetId,I)))))}catch(p){if(!Id(p))throw p;re(Nx,"Failed to update sequence numbers: "+p)}for(let p of d){let y=p.targetId;if(!p.fromCache){let I=h.Fs.get(y),k=I.snapshotVersion,P=I.withLastLimboFreeSnapshotVersion(k);h.Fs=h.Fs.insert(y,P)}}})(r.localStore,s))}async function IJ(n,e){let t=be(n);if(!t.currentUser.isEqual(e)){re(Ux,"User change. New user:",e.toKey());let r=await WU(t.localStore,e);t.currentUser=e,(function(s,o){s.Vu.forEach(a=>{a.forEach(c=>{c.reject(new ne(q.CANCELLED,o))})}),s.Vu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Up(t,r.Bs)}}function bJ(n,e){let t=be(n),r=t.Eu.get(e);if(r&&r.lu)return Ue().add(r.key);{let i=Ue(),s=t.Tu.get(e);if(!s)return i;for(let o of s){let a=t.Pu.get(o);i=i.unionWith(a.view.tu)}return i}}function oj(n){let e=be(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=nj.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=bJ.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=_J.bind(null,e),e.hu.J_=uJ.bind(null,e.eventManager),e.hu.pu=dJ.bind(null,e.eventManager),e}function CJ(n){let e=be(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=vJ.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=wJ.bind(null,e),e}var aj=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=b0(t.databaseInfo.databaseId),this.sharedClientState=this.bu(t),this.persistence=this.Du(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Cu(t,this.localStore),this.indexBackfillerScheduler=this.Fu(t,this.localStore)}Cu(t,r){return null}Fu(t,r){return null}vu(t){return HY(this.persistence,new FA,t.initialUser,this.serializer)}Du(t){return new Zv(MA.Vi,this.serializer)}bu(t){return new UA}async terminate(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}return n.provider={build:()=>new n},n})(),ax=class extends aj{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){it(this.persistence.referenceDelegate instanceof e0,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new wA(r,e.asyncQueue,t)}Du(e){let t=this.cacheSizeBytes!==void 0?Ar.withCacheSize(this.cacheSizeBytes):Ar.DEFAULT;return new Zv(r=>e0.Vi(r,t),this.serializer)}};var TJ=(()=>{class n{async initialize(t,r){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>FL(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=IJ.bind(null,this.syncEngine),await aJ(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new ZA})()}createDatastore(t){let r=b0(t.databaseInfo.databaseId),i=(function(o){return new qA(o)})(t.databaseInfo);return(function(o,a,c,d){return new KA(o,a,c,d)})(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return(function(i,s,o,a,c){return new YA(i,s,o,a,c)})(this.localStore,this.datastore,t.asyncQueue,r=>FL(this.syncEngine,r,0),(function(){return n0.C()?new n0:new jA})())}createSyncEngine(t,r){return(function(s,o,a,c,d,h,p){let y=new sx(s,o,a,c,d,h);return p&&(y.fu=!0),y})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}async terminate(){var t,r;await(async function(s){let o=be(s);re(Jc,"RemoteStore shutting down."),o.Ia.add(5),await Lp(o),o.Ea.shutdown(),o.Aa.set("Unknown")})(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()}}return n.provider={build:()=>new n},n})();var cx=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Fs("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var ua="FirestoreClient",lx=class{constructor(e,t,r,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=yn.UNAUTHENTICATED,this.clientId=Dp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{re(ua,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(re(ua,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Ps;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=Vx(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}};async function kS(n,e){n.asyncQueue.verifyOperationInProgress(),re(ua,"Initializing OfflineComponentProvider");let t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async i=>{r.isEqual(i)||(await WU(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>{oa("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then(()=>{re("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{oa("Terminating Firestore due to IndexedDb database deletion failed",i)})}),n._offlineComponents=e}async function LL(n,e){n.asyncQueue.verifyOperationInProgress();let t=await DJ(n);re(ua,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>ML(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>ML(e.remoteStore,i)),n._onlineComponents=e}async function DJ(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){re(ua,"Using user provided OfflineComponentProvider");try{await kS(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===q.FAILED_PRECONDITION||i.code===q.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;oa("Error using user provided cache. Falling back to memory cache: "+t),await kS(n,new aj)}}else re(ua,"Using default OfflineComponentProvider"),await kS(n,new ax(void 0));return n._offlineComponents}async function cj(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(re(ua,"Using user provided OnlineComponentProvider"),await LL(n,n._uninitializedComponentsProvider._online)):(re(ua,"Using default OnlineComponentProvider"),await LL(n,new TJ))),n._onlineComponents}function SJ(n){return cj(n).then(e=>e.syncEngine)}async function UL(n){let e=await cj(n),t=e.eventManager;return t.onListen=hJ.bind(null,e.syncEngine),t.onUnlisten=gJ.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=fJ.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=mJ.bind(null,e.syncEngine),t}function lj(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var jL=new Map;var uj="firestore.googleapis.com",BL=!0,u0=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new ne(q.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=uj,this.ssl=BL}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:BL;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=GU;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<jY)throw new ne(q.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}LQ("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=lj((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new ne(q.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new ne(q.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new ne(q.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},yd=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new u0({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ne(q.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ne(q.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new u0(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new NS;switch(r.type){case"firstParty":return new FS(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ne(q.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){let r=jL.get(t);r&&(re("ComponentProvider","Removing Datastore"),jL.delete(t),r.terminate())})(this),Promise.resolve()}};function dj(n,e,t,r={}){var i;n=ta(n,yd);let s=Mo(e),o=n._getSettings(),a=Object.assign(Object.assign({},o),{emulatorOptions:n._getEmulatorOptions()}),c=`${e}:${t}`;s&&(r_(`https://${c}`),i_("Firestore",!0)),o.host!==uj&&o.host!==c&&oa("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let d=Object.assign(Object.assign({},o),{host:c,ssl:s,emulatorOptions:r});if(!xi(d,a)&&(n._setSettings(d),r.mockUserToken)){let h,p;if(typeof r.mockUserToken=="string")h=r.mockUserToken,p=yn.MOCK_USER;else{h=OP(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let y=r.mockUserToken.sub||r.mockUserToken.user_id;if(!y)throw new ne(q.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new yn(y)}n._authCredentials=new MS(new Uv(h,p))}}var Xc=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},In=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new na(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}toJSON(){return{type:n._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(Vp(t,n._jsonSchema))return new n(e,r||null,new ue(vt.fromString(t.referencePath)))}};In._jsonSchemaVersion="firestore/documentReference/1.0",In._jsonSchema={type:Gt("string",In._jsonSchemaVersion),referencePath:Gt("string")};var na=class n extends Xc{constructor(e,t,r){super(e,t,xx(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new In(this.firestore,null,new ue(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function hj(n,e,...t){if(n=an(n),QL("collection","path",e),n instanceof yd){let r=vt.fromString(e,...t);return iL(r),new na(n,null,r)}{if(!(n instanceof In||n instanceof na))throw new ne(q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(vt.fromString(e,...t));return iL(r),new na(n.firestore,null,r)}}function Bx(n,e,...t){if(n=an(n),arguments.length===1&&(e=Dp.newId()),QL("doc","path",e),n instanceof yd){let r=vt.fromString(e,...t);return rL(r),new In(n,null,new ue(r))}{if(!(n instanceof In||n instanceof na))throw new ne(q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(vt.fromString(e,...t));return rL(r),new In(n.firestore,n instanceof na?n.converter:null,new ue(r))}}var $L="AsyncQueue",d0=class{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new r0(this,"async_queue_retry"),this.oc=()=>{let r=RS();r&&re($L,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;let t=RS();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;let t=RS();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});let t=new Ps;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Id(e))throw e;re($L,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){let t=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,Fs("INTERNAL UNHANDLED ERROR: ",HL(r)),r}).then(r=>(this.nc=!1,r))));return this._c=t,t}enqueueAfterDelay(e,t,r){this.ac(),this.sc.indexOf(e)>-1&&(t=0);let i=JA.createAndSchedule(this,e,t,r,s=>this.lc(s));return this.ec.push(i),i}ac(){this.tc&&he(47125,{hc:HL(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(let t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){let t=this.ec.indexOf(e);this.ec.splice(t,1)}};function HL(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}function qL(n){return(function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let s of r)if(s in i&&typeof i[s]=="function")return!0;return!1})(n,["next","error","complete"])}var da=class extends yd{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new d0,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new d0(e),this._firestoreClient=void 0,await e}}};function fj(n,e){let t=typeof n=="object"?n:vc(),r=typeof n=="string"?n:e||qv,i=vu(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let s=PP("firestore");s&&dj(i,...s)}return i}function pj(n){if(n._terminated)throw new ne(q.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||AJ(n),n._firestoreClient}function AJ(n){var e,t,r;let i=n._freezeSettings(),s=(function(a,c,d,h){return new BS(a,c,d,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,lj(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)})(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new lx(n._authCredentials,n._appCheckCredentials,n._queue,s,n._componentsProvider&&(function(a){let c=a?._online.build();return{_offline:a?._offline.build(c),_online:c}})(n._componentsProvider))}var ra=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(Pn.fromBase64String(e))}catch(t){throw new ne(q.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(Pn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Vp(e,n._jsonSchema))return n.fromBase64String(e.bytes)}};ra._jsonSchemaVersion="firestore/bytes/1.0",ra._jsonSchema={type:Gt("string",ra._jsonSchemaVersion),bytes:Gt("string")};var _d=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ne(q.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new pr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var vd=class{constructor(e){this._methodName=e}};var ia=class n{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ne(q.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ne(q.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ne(this._lat,e._lat)||Ne(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:n._jsonSchemaVersion}}static fromJSON(e){if(Vp(e,n._jsonSchema))return new n(e.latitude,e.longitude)}};ia._jsonSchemaVersion="firestore/geoPoint/1.0",ia._jsonSchema={type:Gt("string",ia._jsonSchemaVersion),latitude:Gt("number"),longitude:Gt("number")};var sa=class n{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0})(this._values,e._values)}toJSON(){return{type:n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Vp(e,n._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new n(e.vectorValues);throw new ne(q.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};sa._jsonSchemaVersion="firestore/vectorValue/1.0",sa._jsonSchema={type:Gt("string",sa._jsonSchemaVersion),vectorValues:Gt("object")};var xJ=/^__.*__$/,ux=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new $i(e,this.data,this.fieldMask,t,this.fieldTransforms):new Yc(e,this.data,t,this.fieldTransforms)}},h0=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new $i(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function gj(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw he(40011,{Ec:n})}}var dx=class n{constructor(e,t,r,i,s,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Ac(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.fc(e),i}gc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return p0(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(gj(this.Ec)&&xJ.test(e))throw this.wc('Document fields cannot begin and end with "__"')}},hx=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||b0(e)}Dc(e,t,r,i=!1){return new dx({Ec:e,methodName:t,bc:r,path:pr.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function $x(n){let e=n._freezeSettings(),t=b0(n._databaseId);return new hx(n._databaseId,!!e.ignoreUndefinedProperties,t)}function RJ(n,e,t,r,i,s={}){let o=n.Dc(s.merge||s.mergeFields?2:0,e,t,i);Hx("Data must be an object, but it was:",o,r);let a=mj(r,o),c,d;if(s.merge)c=new xr(o.fieldMask),d=o.fieldTransforms;else if(s.mergeFields){let h=[];for(let p of s.mergeFields){let y=px(e,p,t);if(!o.contains(y))throw new ne(q.INVALID_ARGUMENT,`Field '${y}' is specified in your field mask but missing from your input data.`);_j(h,y)||h.push(y)}c=new xr(h),d=o.fieldTransforms.filter(p=>c.covers(p.field))}else c=null,d=o.fieldTransforms;return new ux(new fr(a),c,d)}var f0=class n extends vd{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};var fx=class n extends vd{_toFieldTransform(e){return new nA(e.path,new Wc)}isEqual(e){return e instanceof n}};function kJ(n,e,t,r){let i=n.Dc(1,e,t);Hx("Data must be an object, but it was:",i,r);let s=[],o=fr.empty();ha(r,(c,d)=>{let h=qx(e,c,t);d=an(d);let p=i.gc(h);if(d instanceof f0)s.push(h);else{let y=jp(d,p);y!=null&&(s.push(h),o.set(h,y))}});let a=new xr(s);return new h0(o,a,i.fieldTransforms)}function NJ(n,e,t,r,i,s){let o=n.Dc(1,e,t),a=[px(e,r,t)],c=[i];if(s.length%2!=0)throw new ne(q.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let y=0;y<s.length;y+=2)a.push(px(e,s[y])),c.push(s[y+1]);let d=[],h=fr.empty();for(let y=a.length-1;y>=0;--y)if(!_j(d,a[y])){let I=a[y],k=c[y];k=an(k);let P=o.gc(I);if(k instanceof f0)d.push(I);else{let M=jp(k,P);M!=null&&(d.push(I),h.set(I,M))}}let p=new xr(d);return new h0(h,p,o.fieldTransforms)}function MJ(n,e,t,r=!1){return jp(t,n.Dc(r?4:3,e))}function jp(n,e){if(yj(n=an(n)))return Hx("Unsupported field value:",e,n),mj(n,e);if(n instanceof vd)return(function(r,i){if(!gj(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);let s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(r,i){let s=[],o=0;for(let a of r){let c=jp(a,i.yc(o));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}})(n,e)}return(function(r,i){if((r=an(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return gY(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let s=Wt.fromDate(r);return{timestampValue:Jv(i.serializer,s)}}if(r instanceof Wt){let s=new Wt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Jv(i.serializer,s)}}if(r instanceof ia)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ra)return{bytesValue:UU(i.serializer,r._byteString)};if(r instanceof In){let s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.wc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:kx(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof sa)return(function(o,a){return{mapValue:{fields:{[Cx]:{stringValue:Tx},[ld]:{arrayValue:{values:o.toArray().map(d=>{if(typeof d!="number")throw a.wc("VectorValues must only contain numeric values.");return Rx(a.serializer,d)})}}}}}})(r,i);throw i.wc(`Unsupported field value: ${_0(r)}`)})(n,e)}function mj(n,e){let t={};return dU(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ha(n,(r,i)=>{let s=jp(i,e.Vc(r));s!=null&&(t[r]=s)}),{mapValue:{fields:t}}}function yj(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Wt||n instanceof ia||n instanceof ra||n instanceof In||n instanceof vd||n instanceof sa)}function Hx(n,e,t){if(!yj(t)||!YL(t)){let r=_0(t);throw r==="an object"?e.wc(n+" a custom object"):e.wc(n+" "+r)}}function px(n,e,t){if((e=an(e))instanceof _d)return e._internalPath;if(typeof e=="string")return qx(n,e);throw p0("Field path arguments must be of type string or ",n,!1,void 0,t)}var PJ=new RegExp("[~\\*/\\[\\]]");function qx(n,e,t){if(e.search(PJ)>=0)throw p0(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new _d(...e.split("."))._internalPath}catch{throw p0(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function p0(n,e,t,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new ne(q.INVALID_ARGUMENT,a+n+c)}function _j(n,e){return n.some(t=>t.isEqual(e))}var g0=class{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new In(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new gx(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(zx("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},gx=class extends g0{data(){return super.data()}};function zx(n,e){return typeof e=="string"?qx(n,e):e instanceof _d?e._internalPath:e._delegate._internalPath}function OJ(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ne(q.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Fp=class{},m0=class extends Fp{};function vj(n,e,...t){let r=[];e instanceof Fp&&r.push(e),r=r.concat(t),(function(s){let o=s.filter(c=>c instanceof yx).length,a=s.filter(c=>c instanceof mx).length;if(o>1||o>0&&a>0)throw new ne(q.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(let i of r)n=i._apply(n);return n}var mx=class n extends m0{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return Ej(e._query,t),new Xc(e.firestore,e.converter,eA(e._query,t))}_parse(e){let t=$x(e.firestore);return(function(s,o,a,c,d,h,p){let y;if(d.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new ne(q.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){GL(p,h);let k=[];for(let P of p)k.push(zL(c,s,P));y={arrayValue:{values:k}}}else y=zL(c,s,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||GL(p,h),y=MJ(a,o,p,h==="in"||h==="not-in");return zt.create(d,h,y)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};var yx=class n extends Fp{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:ri.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:((function(i,s){let o=i,a=s.getFlattenedFilters();for(let c of a)Ej(o,c),o=eA(o,c)})(e._query,t),new Xc(e.firestore,e.converter,eA(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var _x=class n extends m0{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=(function(i,s,o){if(i.startAt!==null)throw new ne(q.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new ne(q.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Gc(s,o)})(e._query,this._field,this._direction);return new Xc(e.firestore,e.converter,(function(i,s){let o=i.explicitOrderBy.concat([s]);return new ca(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)})(e._query,t))}};function wj(n,e="asc"){let t=e,r=zx("orderBy",n);return _x._create(r,t)}function zL(n,e,t){if(typeof(t=an(t))=="string"){if(t==="")throw new ne(q.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!TU(e)&&t.indexOf("/")!==-1)throw new ne(q.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(vt.fromString(t));if(!ue.isDocumentKey(r))throw new ne(q.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return dL(n,new ue(r))}if(t instanceof In)return dL(n,t._key);throw new ne(q.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${_0(t)}.`)}function GL(n,e){if(!Array.isArray(n)||n.length===0)throw new ne(q.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Ej(n,e){let t=(function(i,s){for(let o of i)for(let a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null})(n.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new ne(q.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ne(q.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var vx=class{convertValue(e,t="none"){switch(aa(e)){case 0:return null;case 1:return e.booleanValue;case 2:return _t(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ls(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw he(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return ha(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertVectorValue(e){var t,r,i;let s=(i=(r=(t=e.fields)===null||t===void 0?void 0:t[ld].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>_t(o.doubleValue));return new sa(s)}convertGeoPoint(e){return new ia(_t(e.latitude),_t(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=w0(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(xp(e));default:return null}}convertTimestamp(e){let t=Vs(e);return new Wt(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=vt.fromString(e);it(zU(r),9688,{name:e});let i=new zv(r.get(1),r.get(3)),s=new ue(r.popFirst(5));return i.isEqual(t)||Fs(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}};function FJ(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var $c=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Hc=class n extends g0{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new od(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(zx("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ne(q.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,t={};return t.type=n._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};Hc._jsonSchemaVersion="firestore/documentSnapshot/1.0",Hc._jsonSchema={type:Gt("string",Hc._jsonSchemaVersion),bundleSource:Gt("string","DocumentSnapshot"),bundleName:Gt("string"),bundle:Gt("string")};var od=class extends Hc{data(e={}){return super.data(e)}},ad=class n{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new $c(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new od(this._firestore,this._userDataWriter,r.key,r,new $c(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ne(q.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{let c=new od(i._firestore,i._userDataWriter,a.doc.key,a.doc,new $c(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{let c=new od(i._firestore,i._userDataWriter,a.doc.key,a.doc,new $c(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),d=-1,h=-1;return a.type!==0&&(d=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:VJ(a.type),doc:c,oldIndex:d,newIndex:h}})}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ne(q.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=n._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Dp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let t=[],r=[],i=[];return this.docs.forEach(s=>{s._document!==null&&(t.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function VJ(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return he(61501,{type:n})}}ad._jsonSchemaVersion="firestore/querySnapshot/1.0",ad._jsonSchema={type:Gt("string",ad._jsonSchemaVersion),bundleSource:Gt("string","QuerySnapshot"),bundleName:Gt("string"),bundle:Gt("string")};var y0=class extends vx{constructor(e){super(),this.firestore=e}convertBytes(e){return new ra(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new In(this.firestore,null,t)}};function Ij(n,e,t,...r){n=ta(n,In);let i=ta(n.firestore,da),s=$x(i),o;return o=typeof(e=an(e))=="string"||e instanceof _d?NJ(s,"updateDoc",n._key,e,t,r):kJ(s,"updateDoc",n._key,e),Gx(i,[o.toMutation(n._key,Os.exists(!0))])}function bj(n){return Gx(ta(n.firestore,da),[new kp(n._key,Os.none())])}function Cj(n,e){let t=ta(n.firestore,da),r=Bx(n),i=FJ(n.converter,e);return Gx(t,[RJ($x(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,Os.exists(!1))]).then(()=>r)}function Tj(n,...e){var t,r,i;n=an(n);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||qL(e[o])||(s=e[o++]);let a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(qL(e[o])){let p=e[o];e[o]=(t=p.next)===null||t===void 0?void 0:t.bind(p),e[o+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[o+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let c,d,h;if(n instanceof In)d=ta(n.firestore,da),h=xx(n._key.path),c={next:p=>{e[o]&&e[o](LJ(d,n,p))},error:e[o+1],complete:e[o+2]};else{let p=ta(n,Xc);d=ta(p.firestore,da),h=p._query;let y=new y0(d);c={next:I=>{e[o]&&e[o](new ad(d,y,p,I))},error:e[o+1],complete:e[o+2]},OJ(n._query)}return(function(y,I,k,P){let M=new cx(P),$=new tx(I,M,k);return y.asyncQueue.enqueueAndForget(async()=>cJ(await UL(y),$)),()=>{M.Ou(),y.asyncQueue.enqueueAndForget(async()=>lJ(await UL(y),$))}})(pj(d),h,a,c)}function Gx(n,e){return(function(r,i){let s=new Ps;return r.asyncQueue.enqueueAndForget(async()=>yJ(await SJ(r),i,s)),s.promise})(pj(n),e)}function LJ(n,e,t){let r=t.docs.get(e._key),i=new y0(n);return new Hc(n,i,e._key,r,new $c(t.hasPendingWrites,t.fromCache),e.converter)}function Cd(){return new fx("serverTimestamp")}(function(e,t=!0){(function(i){wd=i})(Oo),Jr(new $n("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),a=new da(new PS(r.getProvider("auth-internal")),new VS(o,r.getProvider("app-check-internal")),(function(d,h){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new ne(q.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new zv(d.options.projectId,h)})(o,i),o);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),bt(ZV,eL,e),bt(ZV,eL,"esm2017")})();var Bs=class{constructor(e){return e}},Dj="firestore",Wx=class{constructor(){return Eu(Dj)}};var Kx=new ae("angularfire2.firestore-instances");function UJ(n,e){let t=kf(Dj,n,e);return t&&new Bs(t)}function jJ(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Bs(r)}}var BJ={provide:Wx,deps:[[new or,Kx]]},$J={provide:Bs,useFactory:UJ,deps:[[new or,Kx],ms]};function Sj(n,...e){return bt("angularfire",Fo.full,"fst"),nr([$J,BJ,{provide:Kx,useFactory:jJ(n),multi:!0,deps:[gt,Ot,Vo,Ec,[new or,Wf],[new or,Iu],...e]}])}var D0=Hn(Cj,!0,2);var Bp=Hn(hj,!0,2);var S0=Hn(bj,!0,2);var Td=Hn(Bx,!0,2);var Aj=Hn(fj,!0);var A0=Hn(Tj,!0);var x0=Hn(wj,!0,2),R0=Hn(vj,!0,2);var k0=Hn(Ij,!0,2);var Dd={production:!0,firebase:{apiKey:"AIzaSyA3FfYeMQ9WiWHlNKU1wsaMt8v3TOuNn_I",authDomain:"homeneeds-21223.firebaseapp.com",projectId:"homeneeds-21223",storageBucket:"homeneeds-21223.firebasestorage.app",messagingSenderId:"278167644572",appId:"1:278167644572:web:c5ca2a5c3e4da71fda4059",measurementId:"G-HXX054VJJ6"},apiUrl:"https://home-needs-psi.vercel.app"};var Vj=(()=>{class n{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,r){this._renderer=t,this._elementRef=r}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(r){return new(r||n)(Be(cs),Be(Ci))};static \u0275dir=An({type:n})}return n})(),e1=(()=>{class n extends Vj{static \u0275fac=(()=>{let t;return function(i){return(t||(t=as(n)))(i||n)}})();static \u0275dir=An({type:n,features:[us]})}return n})(),F0=new ae("");var HJ={provide:F0,useExisting:is(()=>Hi),multi:!0};function qJ(){let n=Er()?Er().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var zJ=new ae(""),Hi=(()=>{class n extends Vj{_compositionMode;_composing=!1;constructor(t,r,i){super(t,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!qJ())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(r){return new(r||n)(Be(cs),Be(Ci),Be(zJ,8))};static \u0275dir=An({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&Q("input",function(o){return i._handleInput(o.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(o){return i._compositionEnd(o.target.value)})},standalone:!1,features:[ru([HJ]),us]})}return n})();var GJ=new ae(""),WJ=new ae("");function Lj(n){return n!=null}function Uj(n){return Do(n)?Mt(n):n}function jj(n){let e={};return n.forEach(t=>{e=t!=null?z(z({},e),t):e}),Object.keys(e).length===0?null:e}function Bj(n,e){return e.map(t=>t(n))}function KJ(n){return!n.validate}function $j(n){return n.map(e=>KJ(e)?e:t=>e.validate(t))}function QJ(n){if(!n)return null;let e=n.filter(Lj);return e.length==0?null:function(t){return jj(Bj(t,e))}}function Hj(n){return n!=null?QJ($j(n)):null}function YJ(n){if(!n)return null;let e=n.filter(Lj);return e.length==0?null:function(t){let r=Bj(t,e).map(Uj);return Cw(r).pipe(ut(jj))}}function qj(n){return n!=null?YJ($j(n)):null}function xj(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function JJ(n){return n._rawValidators}function XJ(n){return n._rawAsyncValidators}function Qx(n){return n?Array.isArray(n)?n:[n]:[]}function M0(n,e){return Array.isArray(n)?n.includes(e):n===e}function Rj(n,e){let t=Qx(e);return Qx(n).forEach(i=>{M0(t,i)||t.push(i)}),t}function kj(n,e){return Qx(e).filter(t=>!M0(n,t))}var P0=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Hj(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=qj(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},Yx=class extends P0{name;get formDirective(){return null}get path(){return null}},Gp=class extends P0{_parent=null;name=null;valueAccessor=null},Jx=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}};var fa=(()=>{class n extends Jx{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(Be(Gp,2))};static \u0275dir=An({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&xn("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[us]})}return n})();var $p="VALID",N0="INVALID",Sd="PENDING",Hp="DISABLED",el=class{},O0=class extends el{value;source;constructor(e,t){super(),this.value=e,this.source=t}},qp=class extends el{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}},zp=class extends el{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}},Ad=class extends el{status;source;constructor(e,t){super(),this.status=e,this.source=t}};var Xx=class extends el{source;constructor(e){super(),this.source=e}};function ZJ(n){return(V0(n)?n.validators:n)||null}function eX(n){return Array.isArray(n)?Hj(n):n||null}function tX(n,e){return(V0(e)?e.asyncValidators:n)||null}function nX(n){return Array.isArray(n)?qj(n):n||null}function V0(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}var Zx=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return rn(this.statusReactive)}set status(e){rn(()=>this.statusReactive.set(e))}_status=nt(()=>this.statusReactive());statusReactive=Ae(void 0);get valid(){return this.status===$p}get invalid(){return this.status===N0}get pending(){return this.status==Sd}get disabled(){return this.status===Hp}get enabled(){return this.status!==Hp}errors;get pristine(){return rn(this.pristineReactive)}set pristine(e){rn(()=>this.pristineReactive.set(e))}_pristine=nt(()=>this.pristineReactive());pristineReactive=Ae(!0);get dirty(){return!this.pristine}get touched(){return rn(this.touchedReactive)}set touched(e){rn(()=>this.touchedReactive.set(e))}_touched=nt(()=>this.touchedReactive());touchedReactive=Ae(!1);get untouched(){return!this.touched}_events=new en;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(Rj(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Rj(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(kj(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(kj(e,this._rawAsyncValidators))}hasValidator(e){return M0(this._rawValidators,e)}hasAsyncValidator(e){return M0(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(ce(z({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new zp(!0,r))}markAllAsDirty(e={}){this.markAsDirty({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsDirty(e))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new zp(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(ce(z({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new qp(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new qp(!0,r))}markAsPending(e={}){this.status=Sd;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Ad(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(ce(z({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Hp,this.errors=null,this._forEachChild(i=>{i.disable(ce(z({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new O0(this.value,r)),this._events.next(new Ad(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(ce(z({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=$p,this._forEachChild(r=>{r.enable(ce(z({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(ce(z({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===$p||this.status===Sd)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new O0(this.value,t)),this._events.next(new Ad(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(ce(z({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Hp:$p}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=Sd,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1,shouldHaveEmitted:e!==!1};let r=Uj(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new Ad(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new St,this.statusChanges=new St}_calculateStatus(){return this._allControlsDisabled()?Hp:this.errors?N0:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Sd)?Sd:this._anyControlsHaveStatus(N0)?N0:$p}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new qp(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new zp(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){V0(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=eX(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=nX(this._rawAsyncValidators)}};var zj=new ae("",{factory:()=>t1}),t1="always";function rX(n,e){return[...e.path,n]}function iX(n,e,t=t1){oX(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),aX(n,e),lX(n,e),cX(n,e),sX(n,e)}function Nj(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function sX(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function oX(n,e){let t=JJ(n);e.validator!==null?n.setValidators(xj(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=XJ(n);e.asyncValidator!==null?n.setAsyncValidators(xj(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();Nj(e._rawValidators,i),Nj(e._rawAsyncValidators,i)}function aX(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&Gj(n,e)})}function cX(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&Gj(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function Gj(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function lX(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function uX(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function dX(n){return Object.getPrototypeOf(n.constructor)===e1}function hX(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(s=>{s.constructor===Hi?t=s:dX(s)?r=s:i=s}),i||r||t||null}function Mj(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function Pj(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var fX=class extends Zx{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,r){super(ZJ(t),tX(r,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),V0(t)&&(t.nonNullable||t.initialValueIsDefault)&&(Pj(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),t.overwriteDefaultValue&&(this.defaultValue=this.value),this._pendingChange=!1,t?.emitEvent!==!1&&this._events.next(new Xx(this))}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Mj(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Mj(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){Pj(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var pX={provide:Gp,useExisting:is(()=>$s)},Oj=Promise.resolve(),$s=(()=>{class n extends Gp{_changeDetectorRef;callSetDisabledState;control=new fX;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new St;constructor(t,r,i,s,o,a){super(),this._changeDetectorRef=o,this.callSetDisabledState=a,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=hX(this,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),uX(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){iX(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){Oj.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&su(r);Oj.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?rX(t,this._parent):[t]}static \u0275fac=function(r){return new(r||n)(Be(Yx,9),Be(GJ,10),Be(WJ,10),Be(F0,10),Be(uc,8),Be(zj,8))};static \u0275dir=An({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[ru([pX]),us,Co]})}return n})();var gX={provide:F0,useExisting:is(()=>pa),multi:!0};function Wj(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function mX(n){return n.split(":")[0]}var pa=(()=>{class n extends e1{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;appRefInjector=j(So).injector;destroyRef=j(Hr);cdr=j(uc);_queuedWrite=!1;_writeValueAfterRender(){this._queuedWrite||this.appRefInjector.destroyed||(this._queuedWrite=!0,ny({write:()=>{this.destroyRef.destroyed||(this._queuedWrite=!1,this.writeValue(this.value))}},{injector:this.appRefInjector}))}writeValue(t){this.cdr.markForCheck(),this.value=t;let r=this._getOptionId(t),i=Wj(r,t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){let r=mX(t);return this._optionMap.has(r)?this._optionMap.get(r):t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=as(n)))(i||n)}})();static \u0275dir=An({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&Q("change",function(o){return i.onChange(o.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[ru([gX]),us]})}return n})(),xd=(()=>{class n{_element;_renderer;_select;id;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(Wj(this.id,t)),this._select._writeValueAfterRender())}set value(t){this._setElementValue(t),this._select&&this._select._writeValueAfterRender()}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select._writeValueAfterRender())}static \u0275fac=function(r){return new(r||n)(Be(Ci),Be(cs),Be(pa,9))};static \u0275dir=An({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})(),yX={provide:F0,useExisting:is(()=>Kj),multi:!0};function Fj(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function _X(n){return n.split(":")[0]}var Kj=(()=>{class n extends e1{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){this.value=t;let r;if(Array.isArray(t)){let i=t.map(s=>this._getOptionId(s));r=(s,o)=>{s._setSelected(i.indexOf(o.toString())>-1)}}else r=(i,s)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{let i=[],s=r.selectedOptions;if(s!==void 0){let o=s;for(let a=0;a<o.length;a++){let c=o[a],d=this._getOptionValue(c.value);i.push(d)}}else{let o=r.options;for(let a=0;a<o.length;a++){let c=o[a];if(c.selected){let d=this._getOptionValue(c.value);i.push(d)}}}this.value=i,t(i)}}_registerOption(t){let r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){let r=_X(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=as(n)))(i||n)}})();static \u0275dir=An({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&Q("change",function(o){return i.onChange(o.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[ru([yX]),us]})}return n})(),Rd=(()=>{class n{_element;_renderer;_select;id;_value;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(Fj(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(Fj(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||n)(Be(Ci),Be(cs),Be(Kj,9))};static \u0275dir=An({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})();var vX=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=ls({type:n});static \u0275inj=gi({})}return n})();var ga=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:zj,useValue:t.callSetDisabledState??t1}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=ls({type:n});static \u0275inj=gi({imports:[vX]})}return n})();var wX="firebase",EX="12.6.0";jo(wX,EX,"app");var qi=class n{firestore;TASKS_COLLECTION="overview_tasks";tasksSignal=Ae([]);tasks=nt(()=>this.tasksSignal());unsubTasks=null;constructor(){let e=Uf(Dd.firebase);this.firestore=Av(e),this.initRealtimeData()}initRealtimeData(){let e=xv(gp(this.firestore,this.TASKS_COLLECTION),Rv("createdAt","desc"));this.unsubTasks=vp(e,t=>{let r=t.docs.map(i=>{let s=i.data(),o=s.dueDate&&typeof s.dueDate.toDate=="function"?s.dueDate.toDate():s.dueDate?new Date(s.dueDate):null,a=s.createdAt&&typeof s.createdAt.toDate=="function"?s.createdAt.toDate():new Date;return ce(z({},s),{dueDate:o,createdAt:a})});this.tasksSignal.set(r)})}async createTask(e){let t=`task_${Date.now()}_${Math.random().toString(36).substr(2,5)}`;await Xu(Sr(this.firestore,this.TASKS_COLLECTION,t),ce(z({},e),{id:t,createdAt:new Date}))}async updateTask(e,t){await yp(Sr(this.firestore,this.TASKS_COLLECTION,e),t)}async deleteTask(e){await _p(Sr(this.firestore,this.TASKS_COLLECTION,e))}ngOnDestroy(){this.unsubTasks&&this.unsubTasks()}static \u0275fac=function(t){return new(t||n)};static \u0275prov=se({token:n,factory:n.\u0275fac,providedIn:"root"})};var Wp=["bg-red-500","bg-orange-500","bg-amber-500","bg-green-500","bg-emerald-500","bg-teal-500","bg-cyan-500","bg-blue-500","bg-indigo-500","bg-violet-500","bg-purple-500","bg-fuchsia-500","bg-pink-500","bg-rose-500","bg-slate-500"],Qj=[{id:"groceries",label:"Groceries",color:"bg-amber-400",textColor:"text-amber-400"},{id:"chores",label:"Chores",color:"bg-blue-400",textColor:"text-blue-400"},{id:"repairs",label:"Repairs",color:"bg-purple-500",textColor:"text-purple-400"},{id:"other",label:"Other",color:"bg-slate-400",textColor:"text-slate-400"}];var Rr=class n{dialog=Ae(null);confirm(e,t="Confirm"){return new Promise(r=>{this.dialog.set({message:e,title:t,type:"confirm",confirmText:"Confirm",cancelText:"Cancel",resolve:r})})}alert(e,t="Alert"){return new Promise(r=>{this.dialog.set({message:e,title:t,type:"info",confirmText:"OK",resolve:r})})}close(e){let t=this.dialog();t&&(t.resolve(e),this.dialog.set(null))}static \u0275fac=function(t){return new(t||n)};static \u0275prov=se({token:n,factory:n.\u0275fac,providedIn:"root"})};var kd=class n{firestore=j(Bs);COLLECTION="assignees";assigneesSignal=Ae([]);assignees=nt(()=>this.assigneesSignal());constructor(){this.subscribeToAssignees()}subscribeToAssignees(){let e=R0(Bp(this.firestore,this.COLLECTION),x0("name"));A0(e,t=>{let r=t.docs.map(i=>z({id:i.id},i.data()));this.assigneesSignal.set(r)},t=>{console.error("Error fetching assignees:",t)})}async createAssignee(e,t){let r=e.charAt(0).toUpperCase();await D0(Bp(this.firestore,this.COLLECTION),{name:e,color:t,initial:r})}async updateAssignee(e,t){t.name&&(t.initial=t.name.charAt(0).toUpperCase()),await k0(Td(this.firestore,this.COLLECTION,e),t)}async deleteAssignee(e){await S0(Td(this.firestore,this.COLLECTION,e))}getAssignee(e){return this.assigneesSignal().find(t=>t.id===e)}static \u0275fac=function(t){return new(t||n)};static \u0275prov=se({token:n,factory:n.\u0275fac,providedIn:"root"})};var IX=(n,e)=>e.id;function bX(n,e){if(n&1){let t=Oe();x(0,"button",17),Q("click",function(){let i=X(t).$implicit,s=B();return Z(s.assigneeColor=i)}),R()}if(n&2){let t=e.$implicit,r=B();ft(t),xn("ring-slate-400",r.assigneeColor===t)("ring-transparent",r.assigneeColor!==t)}}function CX(n,e){if(n&1){let t=Oe();x(0,"button",18),Q("click",function(){X(t);let i=B();return Z(i.resetForm())}),N(1," Cancel "),R()}}function TX(n,e){if(n&1){let t=Oe();x(0,"div",15)(1,"div",19)(2,"div",20),N(3),R(),x(4,"span",21),N(5),R()(),x(6,"div",22)(7,"button",23),Q("click",function(){let i=X(t).$implicit,s=B();return Z(s.editAssignee(i))}),x(8,"span",24),N(9,"edit"),R()(),x(10,"button",25),Q("click",function(){let i=X(t).$implicit,s=B();return Z(s.deleteAssignee(i.id))}),x(11,"span",24),N(12,"delete"),R()()()()}if(n&2){let t=e.$implicit;V(2),ft(t.color),V(),lt(" ",t.initial," "),V(2),Re(t.name)}}function DX(n,e){n&1&&(x(0,"div",16),N(1,"No assignees yet"),R())}var U0=class n{close=new St;assigneeService=j(kd);overviewService=j(qi);dialogService=j(Rr);assignees=this.assigneeService.assignees;assigneeColors=Wp;editingAssignee=null;assigneeName="";assigneeColor=Wp[0];onClose(){this.close.emit()}resetForm(){this.editingAssignee=null,this.assigneeName="",this.assigneeColor=this.assigneeColors[0]}editAssignee(e){this.editingAssignee=e,this.assigneeName=e.name,this.assigneeColor=e.color}async saveAssignee(){this.assigneeName.trim()&&(this.editingAssignee?await this.assigneeService.updateAssignee(this.editingAssignee.id,{name:this.assigneeName,color:this.assigneeColor}):await this.assigneeService.createAssignee(this.assigneeName,this.assigneeColor),this.resetForm())}async deleteAssignee(e){if(this.overviewService.tasks().filter(r=>r.assigneeId===e).length>0){await this.dialogService.alert("Cannot delete assignee with active tasks.");return}await this.dialogService.confirm("Delete this assignee?","Confirm")&&await this.assigneeService.deleteAssignee(e)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=jn({type:n,selectors:[["app-assignee-management"]],outputs:{close:"close"},decls:22,vars:5,consts:[[1,"fixed","inset-0","z-[60]","flex","items-center","justify-center","p-4","bg-black/50","backdrop-blur-sm","animate-in","fade-in","duration-200"],[1,"bg-white","dark:bg-surface-dark","w-full","max-w-sm","rounded-2xl","shadow-xl","overflow-hidden","animate-in","zoom-in-95","duration-200","border","border-slate-200","dark:border-border-dark","flex","flex-col","max-h-[80vh]"],[1,"p-4","border-b","border-slate-100","dark:border-border-dark","flex","justify-between","items-center","bg-slate-50/50","dark:bg-black/20"],[1,"font-bold","text-lg","text-slate-900","dark:text-white"],[1,"p-1","rounded-full","hover:bg-slate-200","dark:hover:bg-border-dark","transition-colors",3,"click"],[1,"material-symbols-outlined"],[1,"flex-1","overflow-y-auto","p-4","space-y-3"],[1,"bg-slate-50","dark:bg-black/20","p-3","rounded-xl","space-y-3"],["type","text","placeholder","Name (e.g. Alex)",1,"w-full","h-10","px-3","rounded-lg","bg-white","dark:bg-surface-dark","border","border-slate-200","dark:border-border-dark","text-sm","focus:border-primary","focus:ring-1","focus:ring-primary","outline-none","text-slate-900","dark:text-white",3,"ngModelChange","ngModel"],[1,"flex","flex-wrap","gap-2"],[1,"size-6","rounded-full","transition-transform","hover:scale-110","ring-2","ring-offset-1","dark:ring-offset-surface-dark",3,"class","ring-slate-400","ring-transparent"],[1,"flex","justify-end","gap-2"],[1,"text-xs","text-slate-500","font-bold","hover:text-slate-700","dark:hover:text-slate-300","px-2"],[1,"h-8","px-4","bg-primary","text-slate-900","rounded-lg","text-xs","font-bold","hover:bg-primary-hover","disabled:opacity-50","disabled:cursor-not-allowed","transition-colors",3,"click","disabled"],[1,"space-y-2"],[1,"flex","items-center","justify-between","p-2","rounded-lg","hover:bg-slate-50","dark:hover:bg-white/5","group","border","border-transparent","hover:border-slate-100","dark:hover:border-border-dark","transition-all"],[1,"text-center","py-6","text-slate-400","text-sm"],[1,"size-6","rounded-full","transition-transform","hover:scale-110","ring-2","ring-offset-1","dark:ring-offset-surface-dark",3,"click"],[1,"text-xs","text-slate-500","font-bold","hover:text-slate-700","dark:hover:text-slate-300","px-2",3,"click"],[1,"flex","items-center","gap-3"],[1,"size-8","rounded-full","flex","items-center","justify-center","text-xs","font-bold","text-white","shadow-sm"],[1,"text-sm","font-bold","text-slate-900","dark:text-white"],[1,"flex","gap-1","opacity-0","group-hover:opacity-100","transition-opacity"],[1,"size-7","rounded","bg-white","dark:bg-black/20","border","border-slate-200","dark:border-border-dark","flex","items-center","justify-center","text-slate-500","hover:text-primary","transition-colors",3,"click"],[1,"material-symbols-outlined","text-[14px]"],[1,"size-7","rounded","bg-white","dark:bg-black/20","border","border-slate-200","dark:border-border-dark","flex","items-center","justify-center","text-slate-500","hover:text-red-500","transition-colors",3,"click"]],template:function(t,r){t&1&&(x(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),N(4,"Manage Assignees"),R(),x(5,"button",4),Q("click",function(){return r.onClose()}),x(6,"span",5),N(7,"close"),R()()(),x(8,"div",6)(9,"div",7)(10,"input",8),on("ngModelChange",function(s){return dn(r.assigneeName,s)||(r.assigneeName=s),s}),R(),x(11,"div",9),wt(12,bX,1,6,"button",10,tu),R(),x(14,"div",11),ye(15,CX,2,0,"button",12),x(16,"button",13),Q("click",function(){return r.saveAssignee()}),N(17),R()()(),x(18,"div",14),wt(19,TX,13,4,"div",15,IX,!1,DX,2,0,"div",16),R()()()()),t&2&&(V(10),sn("ngModel",r.assigneeName),V(2),Et(r.assigneeColors),V(3),_e(r.editingAssignee?15:-1),V(),Ge("disabled",!r.assigneeName.trim()),V(),lt(" ",r.editingAssignee?"Update":"Add"," "),V(2),Et(r.assignees()))},dependencies:[br,ga,Hi,fa,$s],encapsulation:2})};var Kp=[{id:"produce",name:"Produce",icon:"nutrition",color:"text-green-500",isDefault:!0,createdAt:new Date},{id:"dairy",name:"Dairy & Eggs",icon:"water_drop",color:"text-blue-400",isDefault:!0,createdAt:new Date},{id:"pantry",name:"Pantry",icon:"soup_kitchen",color:"text-orange-400",isDefault:!0,createdAt:new Date},{id:"baby",name:"Baby Needs",icon:"child_care",color:"text-pink-500",isDefault:!0,createdAt:new Date},{id:"other",name:"Other",icon:"category",color:"text-slate-400",isDefault:!0,createdAt:new Date}],Yj=["nutrition","water_drop","soup_kitchen","category","local_dining","bakery_dining","icecream","liquor","coffee","lunch_dining","restaurant","fastfood","ramen_dining","set_meal","egg","cake","cookie","local_pizza","kebab_dining","rice_bowl"],Jj=["text-green-500","text-blue-400","text-orange-400","text-slate-400","text-red-500","text-purple-500","text-pink-500","text-yellow-500","text-teal-500","text-indigo-500","text-cyan-500","text-lime-500"];var n1=[{name:"Red Apples",category:"produce",imageUrl:"https://images.pexels.com/photos/102104/pexels-photo-102104.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Bananas",category:"produce",imageUrl:"https://images.pexels.com/photos/2872755/pexels-photo-2872755.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Oranges",category:"produce",imageUrl:"https://images.pexels.com/photos/327098/pexels-photo-327098.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Strawberries",category:"produce",imageUrl:"https://images.pexels.com/photos/46174/strawberries-berries-fruit-freshness-46174.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Blueberries",category:"produce",imageUrl:"https://images.pexels.com/photos/1153655/pexels-photo-1153655.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Grapes",category:"produce",imageUrl:"https://images.pexels.com/photos/60021/grapes-wine-fruit-vines-60021.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Lemons",category:"produce",imageUrl:"https://images.pexels.com/photos/1414110/pexels-photo-1414110.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Limes",category:"produce",imageUrl:"https://images.pexels.com/photos/1435736/pexels-photo-1435736.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Watermelon",category:"produce",imageUrl:"https://images.pexels.com/photos/1313267/pexels-photo-1313267.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Pineapple",category:"produce",imageUrl:"https://images.pexels.com/photos/947879/pexels-photo-947879.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Mangoes",category:"produce",imageUrl:"https://images.pexels.com/photos/918643/pexels-photo-918643.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Avocados",category:"produce",imageUrl:"https://images.pexels.com/photos/557659/pexels-photo-557659.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Peaches",category:"produce",imageUrl:"https://images.pexels.com/photos/1028599/pexels-photo-1028599.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Pears",category:"produce",imageUrl:"https://images.pexels.com/photos/568471/pexels-photo-568471.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Cherries",category:"produce",imageUrl:"https://images.pexels.com/photos/175727/pexels-photo-175727.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Kiwi",category:"produce",imageUrl:"https://images.pexels.com/photos/51312/kiwi-fruit-vitamins-healthy-eating-51312.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Raspberries",category:"produce",imageUrl:"https://images.pexels.com/photos/892808/pexels-photo-892808.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Pomegranate",category:"produce",imageUrl:"https://images.pexels.com/photos/65256/pomegranate-open-cores-fruit-65256.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Grapefruit",category:"produce",imageUrl:"https://images.pexels.com/photos/1171170/pexels-photo-1171170.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Coconut",category:"produce",imageUrl:"https://images.pexels.com/photos/1030973/pexels-photo-1030973.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Broccoli",category:"produce",imageUrl:"https://images.pexels.com/photos/47347/broccoli-vegetable-food-healthy-47347.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Carrots",category:"produce",imageUrl:"https://images.pexels.com/photos/143133/pexels-photo-143133.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Spinach",category:"produce",imageUrl:"https://images.pexels.com/photos/2325843/pexels-photo-2325843.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Tomatoes",category:"produce",imageUrl:"https://images.pexels.com/photos/1367242/pexels-photo-1367242.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Cucumbers",category:"produce",imageUrl:"https://images.pexels.com/photos/37528/cucumber-salad-food-healthy-37528.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Bell Peppers",category:"produce",imageUrl:"https://images.pexels.com/photos/128536/pexels-photo-128536.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Onions",category:"produce",imageUrl:"https://images.pexels.com/photos/144206/pexels-photo-144206.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Garlic",category:"produce",imageUrl:"https://images.pexels.com/photos/1392585/pexels-photo-1392585.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Potatoes",category:"produce",imageUrl:"https://images.pexels.com/photos/144248/potatoes-vegetables-erdfrucht-bio-144248.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Sweet Potatoes",category:"produce",imageUrl:"https://images.pexels.com/photos/2284166/pexels-photo-2284166.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Lettuce",category:"produce",imageUrl:"https://images.pexels.com/photos/1199562/pexels-photo-1199562.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Cabbage",category:"produce",imageUrl:"https://images.pexels.com/photos/2518893/pexels-photo-2518893.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Cauliflower",category:"produce",imageUrl:"https://images.pexels.com/photos/6316515/pexels-photo-6316515.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Zucchini",category:"produce",imageUrl:"https://images.pexels.com/photos/128420/pexels-photo-128420.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Eggplant",category:"produce",imageUrl:"https://images.pexels.com/photos/321551/pexels-photo-321551.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Green Beans",category:"produce",imageUrl:"https://images.pexels.com/photos/63286/peas-green-beans-vegetables-63286.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Asparagus",category:"produce",imageUrl:"https://images.pexels.com/photos/351679/pexels-photo-351679.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Celery",category:"produce",imageUrl:"https://images.pexels.com/photos/2893635/pexels-photo-2893635.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Mushrooms",category:"produce",imageUrl:"https://images.pexels.com/photos/36438/mushrooms-brown-mushrooms-cook-eat.jpg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Corn",category:"produce",imageUrl:"https://images.pexels.com/photos/547263/pexels-photo-547263.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Ginger",category:"produce",imageUrl:"https://images.pexels.com/photos/161556/ginger-plant-asia-rhizome-161556.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Fresh Basil",category:"produce",imageUrl:"https://images.pexels.com/photos/1171182/pexels-photo-1171182.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Green Onions",category:"produce",imageUrl:"https://images.pexels.com/photos/4197447/pexels-photo-4197447.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Red Cabbage",category:"produce",imageUrl:"https://images.pexels.com/photos/6316517/pexels-photo-6316517.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Radishes",category:"produce",imageUrl:"https://images.pexels.com/photos/244393/pexels-photo-244393.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1}];var r1=[{name:"Whole Milk",category:"dairy",imageUrl:"https://images.pexels.com/photos/248412/pexels-photo-248412.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"2% Reduced Fat Milk",category:"dairy",imageUrl:"https://images.pexels.com/photos/2198626/pexels-photo-2198626.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Skim Milk",category:"dairy",imageUrl:"https://images.pexels.com/photos/725998/pexels-photo-725998.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Heavy Cream",category:"dairy",imageUrl:"https://images.pexels.com/photos/357573/pexels-photo-357573.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Half & Half",category:"dairy",imageUrl:"https://images.pexels.com/photos/416528/pexels-photo-416528.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Almond Milk",category:"dairy",imageUrl:"https://images.pexels.com/photos/3735180/pexels-photo-3735180.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Oat Milk",category:"dairy",imageUrl:"https://images.pexels.com/photos/5946627/pexels-photo-5946627.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Coconut Milk",category:"dairy",imageUrl:"https://images.pexels.com/photos/4202490/pexels-photo-4202490.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Large Eggs",category:"dairy",imageUrl:"https://images.pexels.com/photos/162712/egg-white-food-protein-162712.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Organic Free Range Eggs",category:"dairy",imageUrl:"https://images.pexels.com/photos/6941041/pexels-photo-6941041.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Egg Whites",category:"dairy",imageUrl:"https://images.pexels.com/photos/4110008/pexels-photo-4110008.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Brown Eggs",category:"dairy",imageUrl:"https://images.pexels.com/photos/4045570/pexels-photo-4045570.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Cheddar Cheese",category:"dairy",imageUrl:"https://images.pexels.com/photos/821365/pexels-photo-821365.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Mozzarella",category:"dairy",imageUrl:"https://images.pexels.com/photos/4109943/pexels-photo-4109943.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Parmesan",category:"dairy",imageUrl:"https://images.pexels.com/photos/4187779/pexels-photo-4187779.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Swiss Cheese",category:"dairy",imageUrl:"https://images.pexels.com/photos/773253/pexels-photo-773253.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Cream Cheese",category:"dairy",imageUrl:"https://images.pexels.com/photos/4397919/pexels-photo-4397919.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Feta Cheese",category:"dairy",imageUrl:"https://images.pexels.com/photos/4197908/pexels-photo-4197908.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Blue Cheese",category:"dairy",imageUrl:"https://images.pexels.com/photos/4198018/pexels-photo-4198018.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Goat Cheese",category:"dairy",imageUrl:"https://images.pexels.com/photos/4198041/pexels-photo-4198041.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Brie",category:"dairy",imageUrl:"https://images.pexels.com/photos/6287530/pexels-photo-6287530.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Cottage Cheese",category:"dairy",imageUrl:"https://images.pexels.com/photos/5946609/pexels-photo-5946609.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Ricotta",category:"dairy",imageUrl:"https://images.pexels.com/photos/6287535/pexels-photo-6287535.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Shredded Cheese",category:"dairy",imageUrl:"https://images.pexels.com/photos/4198024/pexels-photo-4198024.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"String Cheese",category:"dairy",imageUrl:"https://images.pexels.com/photos/4198020/pexels-photo-4198020.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Butter",category:"dairy",imageUrl:"https://images.pexels.com/photos/531334/pexels-photo-531334.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Unsalted Butter",category:"dairy",imageUrl:"https://images.pexels.com/photos/4110003/pexels-photo-4110003.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Margarine",category:"dairy",imageUrl:"https://images.pexels.com/photos/4397916/pexels-photo-4397916.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Greek Yogurt",category:"dairy",imageUrl:"https://images.pexels.com/photos/1435706/pexels-photo-1435706.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Plain Yogurt",category:"dairy",imageUrl:"https://images.pexels.com/photos/3669638/pexels-photo-3669638.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Flavored Yogurt",category:"dairy",imageUrl:"https://images.pexels.com/photos/4051580/pexels-photo-4051580.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Yogurt Drinks",category:"dairy",imageUrl:"https://images.pexels.com/photos/3625372/pexels-photo-3625372.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Sour Cream",category:"dairy",imageUrl:"https://images.pexels.com/photos/4397923/pexels-photo-4397923.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Whipped Cream",category:"dairy",imageUrl:"https://images.pexels.com/photos/3026806/pexels-photo-3026806.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1}];var i1=[{name:"Spaghetti",category:"pantry",imageUrl:"https://images.pexels.com/photos/4518844/pexels-photo-4518844.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Penne Pasta",category:"pantry",imageUrl:"https://images.pexels.com/photos/1437267/pexels-photo-1437267.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Macaroni",category:"pantry",imageUrl:"https://images.pexels.com/photos/4518710/pexels-photo-4518710.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Jasmine Rice",category:"pantry",imageUrl:"https://images.pexels.com/photos/4110251/pexels-photo-4110251.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Brown Rice",category:"pantry",imageUrl:"https://images.pexels.com/photos/4110377/pexels-photo-4110377.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Quinoa",category:"pantry",imageUrl:"https://images.pexels.com/photos/6740535/pexels-photo-6740535.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Oatmeal",category:"pantry",imageUrl:"https://images.pexels.com/photos/216951/pexels-photo-216951.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Bread Crumbs",category:"pantry",imageUrl:"https://images.pexels.com/photos/4110476/pexels-photo-4110476.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Canned Tomatoes",category:"pantry",imageUrl:"https://images.pexels.com/photos/5945755/pexels-photo-5945755.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Tomato Sauce",category:"pantry",imageUrl:"https://images.pexels.com/photos/4198012/pexels-photo-4198012.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Tomato Paste",category:"pantry",imageUrl:"https://images.pexels.com/photos/5945757/pexels-photo-5945757.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Black Beans",category:"pantry",imageUrl:"https://images.pexels.com/photos/4198019/pexels-photo-4198019.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Kidney Beans",category:"pantry",imageUrl:"https://images.pexels.com/photos/4198015/pexels-photo-4198015.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Chickpeas",category:"pantry",imageUrl:"https://images.pexels.com/photos/4198017/pexels-photo-4198017.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Canned Corn",category:"pantry",imageUrl:"https://images.pexels.com/photos/7469406/pexels-photo-7469406.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Canned Tuna",category:"pantry",imageUrl:"https://images.pexels.com/photos/5718026/pexels-photo-5718026.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Chicken Broth",category:"pantry",imageUrl:"https://images.pexels.com/photos/5938358/pexels-photo-5938358.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Vegetable Broth",category:"pantry",imageUrl:"https://images.pexels.com/photos/5938356/pexels-photo-5938356.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Coconut Milk (Canned)",category:"pantry",imageUrl:"https://images.pexels.com/photos/4202490/pexels-photo-4202490.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Olive Oil",category:"pantry",imageUrl:"https://images.pexels.com/photos/1022385/pexels-photo-1022385.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Vegetable Oil",category:"pantry",imageUrl:"https://images.pexels.com/photos/4202482/pexels-photo-4202482.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Coconut Oil",category:"pantry",imageUrl:"https://images.pexels.com/photos/4202486/pexels-photo-4202486.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Balsamic Vinegar",category:"pantry",imageUrl:"https://images.pexels.com/photos/4198037/pexels-photo-4198037.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Apple Cider Vinegar",category:"pantry",imageUrl:"https://images.pexels.com/photos/6957100/pexels-photo-6957100.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Soy Sauce",category:"pantry",imageUrl:"https://images.pexels.com/photos/4518578/pexels-photo-4518578.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"All-Purpose Flour",category:"pantry",imageUrl:"https://images.pexels.com/photos/5765/flour-powder-wheat-jar.jpg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Whole Wheat Flour",category:"pantry",imageUrl:"https://images.pexels.com/photos/4110256/pexels-photo-4110256.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Sugar",category:"pantry",imageUrl:"https://images.pexels.com/photos/2523650/pexels-photo-2523650.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Brown Sugar",category:"pantry",imageUrl:"https://images.pexels.com/photos/4110521/pexels-photo-4110521.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Powdered Sugar",category:"pantry",imageUrl:"https://images.pexels.com/photos/5946613/pexels-photo-5946613.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Baking Soda",category:"pantry",imageUrl:"https://images.pexels.com/photos/5946608/pexels-photo-5946608.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Baking Powder",category:"pantry",imageUrl:"https://images.pexels.com/photos/5946610/pexels-photo-5946610.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Vanilla Extract",category:"pantry",imageUrl:"https://images.pexels.com/photos/5946611/pexels-photo-5946611.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Cocoa Powder",category:"pantry",imageUrl:"https://images.pexels.com/photos/65882/chocolate-dark-coffee-confiserie-65882.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Chocolate Chips",category:"pantry",imageUrl:"https://images.pexels.com/photos/918327/pexels-photo-918327.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Yeast",category:"pantry",imageUrl:"https://images.pexels.com/photos/5946612/pexels-photo-5946612.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Honey",category:"pantry",imageUrl:"https://images.pexels.com/photos/302163/pexels-photo-302163.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Maple Syrup",category:"pantry",imageUrl:"https://images.pexels.com/photos/7474239/pexels-photo-7474239.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Peanut Butter",category:"pantry",imageUrl:"https://images.pexels.com/photos/5469076/pexels-photo-5469076.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Almond Butter",category:"pantry",imageUrl:"https://images.pexels.com/photos/5469079/pexels-photo-5469079.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Jam/Jelly",category:"pantry",imageUrl:"https://images.pexels.com/photos/1638927/pexels-photo-1638927.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Nutella",category:"pantry",imageUrl:"https://images.pexels.com/photos/4110533/pexels-photo-4110533.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Salt",category:"pantry",imageUrl:"https://images.pexels.com/photos/3296398/pexels-photo-3296398.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Black Pepper",category:"pantry",imageUrl:"https://images.pexels.com/photos/4198056/pexels-photo-4198056.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Garlic Powder",category:"pantry",imageUrl:"https://images.pexels.com/photos/4198051/pexels-photo-4198051.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Onion Powder",category:"pantry",imageUrl:"https://images.pexels.com/photos/4198053/pexels-photo-4198053.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Paprika",category:"pantry",imageUrl:"https://images.pexels.com/photos/4198054/pexels-photo-4198054.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Cumin",category:"pantry",imageUrl:"https://images.pexels.com/photos/4198060/pexels-photo-4198060.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Cinnamon",category:"pantry",imageUrl:"https://images.pexels.com/photos/4198055/pexels-photo-4198055.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Italian Seasoning",category:"pantry",imageUrl:"https://images.pexels.com/photos/4198057/pexels-photo-4198057.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Chili Powder",category:"pantry",imageUrl:"https://images.pexels.com/photos/4198059/pexels-photo-4198059.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Oregano",category:"pantry",imageUrl:"https://images.pexels.com/photos/4198062/pexels-photo-4198062.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Bay Leaves",category:"pantry",imageUrl:"https://images.pexels.com/photos/4198064/pexels-photo-4198064.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Ketchup",category:"pantry",imageUrl:"https://images.pexels.com/photos/5945565/pexels-photo-5945565.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Mustard",category:"pantry",imageUrl:"https://images.pexels.com/photos/5945566/pexels-photo-5945566.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Mayonnaise",category:"pantry",imageUrl:"https://images.pexels.com/photos/4397921/pexels-photo-4397921.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Hot Sauce",category:"pantry",imageUrl:"https://images.pexels.com/photos/4198048/pexels-photo-4198048.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"BBQ Sauce",category:"pantry",imageUrl:"https://images.pexels.com/photos/4198047/pexels-photo-4198047.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Worcestershire Sauce",category:"pantry",imageUrl:"https://images.pexels.com/photos/4198044/pexels-photo-4198044.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Almonds",category:"pantry",imageUrl:"https://images.pexels.com/photos/1013420/pexels-photo-1013420.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Walnuts",category:"pantry",imageUrl:"https://images.pexels.com/photos/4202493/pexels-photo-4202493.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Cashews",category:"pantry",imageUrl:"https://images.pexels.com/photos/4202491/pexels-photo-4202491.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Raisins",category:"pantry",imageUrl:"https://images.pexels.com/photos/4198033/pexels-photo-4198033.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Dried Cranberries",category:"pantry",imageUrl:"https://images.pexels.com/photos/4198031/pexels-photo-4198031.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Cereal",category:"pantry",imageUrl:"https://images.pexels.com/photos/135525/pexels-photo-135525.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Granola",category:"pantry",imageUrl:"https://images.pexels.com/photos/3872433/pexels-photo-3872433.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Crackers",category:"pantry",imageUrl:"https://images.pexels.com/photos/4110452/pexels-photo-4110452.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Tortilla Chips",category:"pantry",imageUrl:"https://images.pexels.com/photos/5737254/pexels-photo-5737254.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Popcorn",category:"pantry",imageUrl:"https://images.pexels.com/photos/33129/popcorn-movie-party-entertainment.jpg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Coffee",category:"pantry",imageUrl:"https://images.pexels.com/photos/585753/pexels-photo-585753.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Tea",category:"pantry",imageUrl:"https://images.pexels.com/photos/227908/pexels-photo-227908.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Hot Chocolate Mix",category:"pantry",imageUrl:"https://images.pexels.com/photos/5946618/pexels-photo-5946618.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1}];var s1=[{name:"Diapers (Newborn)",category:"baby",imageUrl:"https://placehold.co/200x200/E6E6FA/555555?text=Newborn+Diapers",isInCart:!1,isChecked:!1},{name:"Diapers (Size 1)",category:"baby",imageUrl:"https://placehold.co/200x200/E6E6FA/555555?text=Size+1+Diapers",isInCart:!1,isChecked:!1},{name:"Diapers (Size 2)",category:"baby",imageUrl:"https://placehold.co/200x200/E6E6FA/555555?text=Size+2+Diapers",isInCart:!1,isChecked:!1},{name:"Diapers (Size 3)",category:"baby",imageUrl:"https://placehold.co/200x200/E6E6FA/555555?text=Size+3+Diapers",isInCart:!1,isChecked:!1},{name:"Baby Wipes",category:"baby",imageUrl:"https://placehold.co/200x200/F0FFFF/555555?text=Baby+Wipes",isInCart:!1,isChecked:!1},{name:"Diaper Rash Cream",category:"baby",imageUrl:"https://images.pexels.com/photos/6941883/pexels-photo-6941883.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Diaper Disposal Bags",category:"baby",imageUrl:"https://images.pexels.com/photos/4239013/pexels-photo-4239013.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Baby Formula",category:"baby",imageUrl:"https://images.pexels.com/photos/6941096/pexels-photo-6941096.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Baby Cereal",category:"baby",imageUrl:"https://images.pexels.com/photos/6941098/pexels-photo-6941098.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Baby Food Pouches",category:"baby",imageUrl:"https://images.pexels.com/photos/6941099/pexels-photo-6941099.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Baby Food Jars",category:"baby",imageUrl:"https://images.pexels.com/photos/6941100/pexels-photo-6941100.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Baby Snacks",category:"baby",imageUrl:"https://images.pexels.com/photos/6941101/pexels-photo-6941101.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Baby Puffs",category:"baby",imageUrl:"https://images.pexels.com/photos/6941102/pexels-photo-6941102.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Teething Biscuits",category:"baby",imageUrl:"https://images.pexels.com/photos/6941103/pexels-photo-6941103.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Baby Water",category:"baby",imageUrl:"https://images.pexels.com/photos/1000084/pexels-photo-1000084.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Baby Bottles",category:"baby",imageUrl:"https://placehold.co/200x200/FFFACD/555555?text=Baby+Bottles",isInCart:!1,isChecked:!1},{name:"Bottle Nipples",category:"baby",imageUrl:"https://placehold.co/200x200/FFFACD/555555?text=Bottle+Nipples",isInCart:!1,isChecked:!1},{name:"Sippy Cups",category:"baby",imageUrl:"https://images.pexels.com/photos/3663068/pexels-photo-3663068.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Baby Spoons",category:"baby",imageUrl:"https://images.pexels.com/photos/6941885/pexels-photo-6941885.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Baby Bowls",category:"baby",imageUrl:"https://images.pexels.com/photos/6941886/pexels-photo-6941886.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Baby Bibs",category:"baby",imageUrl:"https://placehold.co/200x200/FFE4E1/555555?text=Baby+Bibs",isInCart:!1,isChecked:!1},{name:"Bottle Brush",category:"baby",imageUrl:"https://images.pexels.com/photos/6941887/pexels-photo-6941887.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Bottle Sterilizer",category:"baby",imageUrl:"https://images.pexels.com/photos/6941888/pexels-photo-6941888.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Baby Shampoo",category:"baby",imageUrl:"https://images.pexels.com/photos/3993398/pexels-photo-3993398.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Baby Body Wash",category:"baby",imageUrl:"https://images.pexels.com/photos/3993399/pexels-photo-3993399.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Baby Lotion",category:"baby",imageUrl:"https://images.pexels.com/photos/6941889/pexels-photo-6941889.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Baby Oil",category:"baby",imageUrl:"https://images.pexels.com/photos/6941890/pexels-photo-6941890.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Baby Powder",category:"baby",imageUrl:"https://images.pexels.com/photos/6941891/pexels-photo-6941891.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Baby Sunscreen",category:"baby",imageUrl:"https://images.pexels.com/photos/6941892/pexels-photo-6941892.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Baby Nail Clippers",category:"baby",imageUrl:"https://images.pexels.com/photos/6941893/pexels-photo-6941893.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Baby Thermometer",category:"baby",imageUrl:"https://images.pexels.com/photos/6941894/pexels-photo-6941894.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Nasal Aspirator",category:"baby",imageUrl:"https://images.pexels.com/photos/6941895/pexels-photo-6941895.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Baby Cotton Balls",category:"baby",imageUrl:"https://images.pexels.com/photos/4465124/pexels-photo-4465124.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Baby Q-Tips",category:"baby",imageUrl:"https://images.pexels.com/photos/4465125/pexels-photo-4465125.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Baby Tylenol",category:"baby",imageUrl:"https://images.pexels.com/photos/6941900/pexels-photo-6941900.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Baby Ibuprofen",category:"baby",imageUrl:"https://images.pexels.com/photos/6941901/pexels-photo-6941901.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Gripe Water",category:"baby",imageUrl:"https://images.pexels.com/photos/6941902/pexels-photo-6941902.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Gas Drops",category:"baby",imageUrl:"https://images.pexels.com/photos/6941903/pexels-photo-6941903.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Teething Gel",category:"baby",imageUrl:"https://images.pexels.com/photos/6941904/pexels-photo-6941904.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Saline Drops",category:"baby",imageUrl:"https://images.pexels.com/photos/6941905/pexels-photo-6941905.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Vitamin D Drops",category:"baby",imageUrl:"https://images.pexels.com/photos/6941906/pexels-photo-6941906.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Pacifiers",category:"baby",imageUrl:"https://placehold.co/200x200/FFB6C1/555555?text=Pacifiers",isInCart:!1,isChecked:!1},{name:"Teething Toys",category:"baby",imageUrl:"https://placehold.co/200x200/FFB6C1/555555?text=Teething+Toys",isInCart:!1,isChecked:!1},{name:"Baby Blanket",category:"baby",imageUrl:"https://placehold.co/200x200/FFE4E1/555555?text=Baby+Blanket",isInCart:!1,isChecked:!1},{name:"Swaddle Wrap",category:"baby",imageUrl:"https://placehold.co/200x200/FFE4E1/555555?text=Swaddle+Wrap",isInCart:!1,isChecked:!1},{name:"Burp Cloths",category:"baby",imageUrl:"https://placehold.co/200x200/FFE4E1/555555?text=Burp+Cloths",isInCart:!1,isChecked:!1},{name:"Baby Detergent",category:"baby",imageUrl:"https://images.pexels.com/photos/4239091/pexels-photo-4239091.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Stain Remover",category:"baby",imageUrl:"https://images.pexels.com/photos/4239092/pexels-photo-4239092.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Fabric Softener",category:"baby",imageUrl:"https://images.pexels.com/photos/4239093/pexels-photo-4239093.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1}];var Nd=class n{firestore;GROCERIES_COLLECTION="groceries";CATEGORIES_COLLECTION="categories";unsubGroceries=null;unsubCategories=null;groceriesSignal=Ae([]);categoriesSignal=Ae([...Kp]);searchQuerySignal=Ae("");selectedCategorySignal=Ae("all");sortBySignal=Ae("name");isLoadingSignal=Ae(!0);errorSignal=Ae(null);isSeededSignal=Ae(!1);categories=nt(()=>this.categoriesSignal());categoryIds=nt(()=>this.categoriesSignal().map(e=>e.id));isLoading=nt(()=>this.isLoadingSignal());groceries=nt(()=>{let e=this.groceriesSignal(),t=this.searchQuerySignal().toLowerCase(),r=this.selectedCategorySignal(),i=this.sortBySignal();return t&&(e=e.filter(s=>s.name.toLowerCase().includes(t))),r==="cart"?e=e.filter(s=>s.isInCart):r!=="all"&&(e=e.filter(s=>s.category===r)),e=[...e].sort((s,o)=>{switch(i){case"name":return s.name.localeCompare(o.name);case"category":return s.category.localeCompare(o.category);case"date":return new Date(o.createdAt).getTime()-new Date(s.createdAt).getTime();default:return 0}}),e});cartItems=nt(()=>this.groceriesSignal().filter(e=>e.isInCart));checkedItems=nt(()=>this.cartItems().filter(e=>e.isChecked));uncheckedItems=nt(()=>this.cartItems().filter(e=>!e.isChecked));searchQuery=nt(()=>this.searchQuerySignal());selectedCategory=nt(()=>this.selectedCategorySignal());sortBy=nt(()=>this.sortBySignal());error=nt(()=>this.errorSignal());groceriesByCategory=nt(()=>{let e=this.groceries(),t=this.categoriesSignal(),r={};return t.forEach(i=>{r[i.id]=[]}),e.forEach(i=>{r[i.category]?r[i.category].push(i):r.other&&r.other.push(i)}),r});constructor(){let e=Uf(Dd.firebase);this.firestore=Av(e),this.initializeFirestoreListeners(),this.checkAndMigrateData()}initializeFirestoreListeners(){let e=xv(gp(this.firestore,this.GROCERIES_COLLECTION),Rv("name"));this.unsubGroceries=vp(e,r=>{let i=r.docs.map(s=>{let o=s.data();return ce(z({id:s.id},o),{createdAt:o.createdAt?.toDate?o.createdAt.toDate():new Date(o.createdAt),updatedAt:o.updatedAt?.toDate?o.updatedAt.toDate():new Date(o.updatedAt)})});this.groceriesSignal.set(i),this.isLoadingSignal.set(!1),i.length===0&&!this.isSeededSignal()&&this.seedInitialData()},r=>{console.error("Error loading groceries:",r),this.errorSignal.set(r.message),this.isLoadingSignal.set(!1)});let t=gp(this.firestore,this.CATEGORIES_COLLECTION);this.unsubCategories=vp(t,r=>{if(r.empty)Kp.forEach(i=>this.saveCategoryToFirestore(i)),this.categoriesSignal.set([...Kp]);else{let i=r.docs.map(a=>{let c=a.data();return ce(z({id:a.id},c),{createdAt:c.createdAt?.toDate?c.createdAt.toDate():new Date(c.createdAt)})}),s=i.map(a=>a.id),o=Kp.filter(a=>!s.includes(a.id));o.length>0?(o.forEach(a=>this.saveCategoryToFirestore(a)),this.categoriesSignal.set([...i,...o])):this.categoriesSignal.set(i)}},r=>{console.error("Error loading categories:",r)})}async seedInitialData(){if(this.isSeededSignal())return;this.isSeededSignal.set(!0),console.log("Seeding initial grocery data...");let e=[...n1,...r1,...i1,...s1],t=e.map(r=>this.create(r));await Promise.all(t),console.log(`Seeded ${e.length} grocery items`)}async saveCategoryToFirestore(e){let t=Sr(this.firestore,this.CATEGORIES_COLLECTION,e.id);await Xu(t,ce(z({},e),{createdAt:e.createdAt}))}async createCategory(e){let t=ce(z({},e),{id:this.generateCategoryId(e.name),isDefault:!1,createdAt:new Date});return await this.saveCategoryToFirestore(t),t}getCategory(e){return this.categoriesSignal().find(t=>t.id===e)}async updateCategory(e,t){let r=this.getCategory(e);if(!r||r.isDefault)return;let i=Sr(this.firestore,this.CATEGORIES_COLLECTION,e);return await yp(i,t),z(z({},r),t)}deleteCategory(e){let t=this.getCategory(e);if(!t)return{success:!1,error:"Category not found"};if(t.isDefault)return{success:!1,error:"Cannot delete default categories"};let r=this.groceriesSignal().filter(s=>s.category===e);if(r.length>0)return{success:!1,error:`Cannot delete category "${t.name}" because it has ${r.length} item(s). Please move or delete the items first.`};let i=Sr(this.firestore,this.CATEGORIES_COLLECTION,e);return _p(i),{success:!0}}getItemCountInCategory(e){return this.groceriesSignal().filter(t=>t.category===e).length}getCategoryLabel(e){return this.getCategory(e)?.name||e}getCategoryIcon(e){return this.getCategory(e)?.icon||"category"}getCategoryColor(e){return this.getCategory(e)?.color||"text-slate-400"}setSearchQuery(e){this.searchQuerySignal.set(e)}setCategory(e){this.selectedCategorySignal.set(e)}setSortBy(e){this.sortBySignal.set(e)}async create(e){let t=ce(z({},e),{id:this.generateId(),createdAt:new Date,updatedAt:new Date}),r=Sr(this.firestore,this.GROCERIES_COLLECTION,t.id);return await Xu(r,t),t}async update(e,t){let r=this.groceriesSignal().find(s=>s.id===e);if(!r)return;let i=Sr(this.firestore,this.GROCERIES_COLLECTION,e);return await yp(i,ce(z({},t),{updatedAt:new Date})),ce(z(z({},r),t),{updatedAt:new Date})}async delete(e){let t=Sr(this.firestore,this.GROCERIES_COLLECTION,e);return await _p(t),!0}getById(e){return this.groceriesSignal().find(t=>t.id===e)}async addToCart(e){await this.update(e,{isInCart:!0})}async removeFromCart(e){await this.update(e,{isInCart:!1,isChecked:!1})}async toggleChecked(e){let t=this.getById(e);t&&await this.update(e,{isChecked:!t.isChecked})}async clearCart(){let t=this.cartItems().map(r=>this.update(r.id,{isInCart:!1,isChecked:!1}));await Promise.all(t)}async resetToSeedData(){let t=this.groceriesSignal().map(r=>this.delete(r.id));await Promise.all(t),this.isSeededSignal.set(!1)}HISTORY_COLLECTION="shopping_history";async saveToHistory(){let e=this.cartItems();if(e.length===0)return;let t=`history_${Date.now()}`,r=Sr(this.firestore,this.HISTORY_COLLECTION,t),i={id:t,date:new Date,itemCount:e.length,items:e.map(s=>({id:s.id,name:s.name,category:s.category,checked:s.isChecked})),completed:!0};await Xu(r,i)}generateId(){return`grocery_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}generateCategoryId(e){return`cat_${e.toLowerCase().replace(/\s+/g,"_")}_${Date.now()}`}checkAndMigrateData(){localStorage.getItem("homeneeds_seed_version")!=="v12"&&(console.log("Migrating data to v12..."),this.migrateMissingSeedData().then(()=>{localStorage.setItem("homeneeds_seed_version","v12")}))}async migrateMissingSeedData(){console.log("Checking for missing seed items...");let e=this.groceriesSignal(),r=[...n1,...r1,...i1,...s1].filter(i=>!e.some(s=>s.name===i.name));r.length>0?(console.log(`Adding ${r.length} missing items...`),await Promise.all(r.map(i=>this.create(i)))):console.log("All seed items are present.")}ngOnDestroy(){this.unsubGroceries&&this.unsubGroceries(),this.unsubCategories&&this.unsubCategories()}static \u0275fac=function(t){return new(t||n)};static \u0275prov=se({token:n,factory:n.\u0275fac,providedIn:"root"})};var B0=(n,e)=>e.id;function SX(n,e){if(n&1&&Rt(0,"img",38),n&2){let t=B().$implicit;Ge("src",t.imageUrl,Qn)}}function AX(n,e){if(n&1&&(x(0,"span",40)(1,"span",46),N(2,"alarm"),R(),N(3),zh(4,"date"),R()),n&2){let t=B().$implicit;V(3),lt(" ",Gh(4,1,t.dueDate,"MMM d, h:mm a")," ")}}function xX(n,e){if(n&1&&(x(0,"div",48),N(1),R()),n&2){let t=e;ft(t.color),Ge("title","Assigned to "+t.name),V(),lt(" ",t.initial," ")}}function RX(n,e){if(n&1&&ye(0,xX,2,4,"div",47),n&2){let t,r=B(4);_e((t=r.getAssigneeById(e))?0:-1,t)}}function kX(n,e){if(n&1&&(x(0,"span",41),N(1),R()),n&2){let t=B().$implicit;V(),Re(t.description)}}function NX(n,e){if(n&1){let t=Oe();x(0,"div",31)(1,"span",32),N(2,"drag_indicator"),R(),x(3,"label",33)(4,"input",34),Q("change",function(){let i=X(t).$implicit,s=B(3);return Z(s.toggleComplete(i))}),R(),x(5,"span",35),N(6,"check"),R()(),x(7,"div",36),Q("click",function(){let i=X(t).$implicit,s=B(3);return Z(s.edit(i))}),x(8,"div",37),ye(9,SX,1,1,"img",38),x(10,"span",39),N(11),R(),ye(12,AX,5,4,"span",40),ye(13,RX,1,1),R(),ye(14,kX,2,1,"span",41),R(),x(15,"div",42)(16,"button",43),Q("click",function(){let i=X(t).$implicit,s=B(3);return Z(s.edit(i))}),x(17,"span",44),N(18,"edit"),R()(),x(19,"button",45),Q("click",function(){let i=X(t).$implicit,s=B(3);return Z(s.delete(i.id))}),x(20,"span",44),N(21,"delete"),R()()()()}if(n&2){let t,r=e.$implicit;xn("opacity-50",r.isCompleted),V(4),Ge("checked",r.isCompleted),V(5),_e(r.imageUrl?9:-1),V(),xn("line-through",r.isCompleted)("text-slate-500",r.isCompleted),V(),lt(" ",r.title," "),V(),_e(r.dueDate?12:-1),V(),_e((t=r.assigneeId)?13:-1,t),V(),_e(r.description?14:-1)}}function MX(n,e){if(n&1&&(x(0,"section",24)(1,"div",25)(2,"h3",26),Rt(3,"span",27),N(4),R(),x(5,"span",28),N(6),R()(),x(7,"div",29),wt(8,NX,22,12,"div",30,B0),R()()),n&2){let t=B().$implicit,r=B();Ge("id","section-"+t.id),V(3),ft(t.color),V(),lt(" ",t.label," "),V(),ft(t.color+" "+t.textColor+" bg-opacity-10"),V(),lt(" ",r.groupedTasks()[t.id].length," Items "),V(2),Et(r.groupedTasks()[t.id])}}function PX(n,e){if(n&1&&ye(0,MX,10,7,"section",24),n&2){let t=e.$implicit,r=B();_e(r.groupedTasks()[t.id]&&r.groupedTasks()[t.id].length>0?0:-1)}}function OX(n,e){n&1&&(x(0,"div",20)(1,"span",49),N(2,"task_alt"),R(),x(3,"h3",50),N(4,"All caught up!"),R(),x(5,"p",51),N(6,"Create a task to get started."),R()())}function FX(n,e){n&1&&(x(0,"span",77),N(1,"check"),R())}function VX(n,e){if(n&1){let t=Oe();x(0,"button",75),Q("click",function(){let i=X(t).$implicit,s=B(3);return Z(s.selectCategory(i.id))}),Rt(1,"span",76),N(2),ye(3,FX,2,0,"span",77),R()}if(n&2){let t=e.$implicit,r=B(3);V(),ft(t.color),V(),lt(" ",t.label," "),V(),_e(r.taskCategory===t.id?3:-1)}}function LX(n,e){if(n&1&&(x(0,"div",63),wt(1,VX,4,4,"button",74,B0),R()),n&2){let t=B(2);V(),Et(t.categories)}}function UX(n,e){if(n&1&&(x(0,"option",69),N(1),R()),n&2){let t=e.$implicit;Ge("value",t.id),V(),Re(t.name)}}function jX(n,e){if(n&1){let t=Oe();x(0,"div",23)(1,"div",52)(2,"div",53)(3,"h3",54),N(4),R(),x(5,"button",55),Q("click",function(){X(t);let i=B();return Z(i.toggleAddModal(!1))}),x(6,"span",56),N(7,"close"),R()()(),x(8,"div",57)(9,"div")(10,"label",58),N(11,"Task Title"),R(),x(12,"input",59),on("ngModelChange",function(i){X(t);let s=B();return dn(s.taskTitle,i)||(s.taskTitle=i),Z(i)}),R()(),x(13,"div")(14,"label",58),N(15,"Category"),R(),x(16,"div",60)(17,"button",61),Q("click",function(){X(t);let i=B();return Z(i.toggleCategoryDropdown())}),x(18,"span"),N(19),R(),x(20,"span",62),N(21,"expand_more"),R()(),ye(22,LX,3,0,"div",63),R()(),x(23,"div")(24,"div",64)(25,"label",65),N(26,"Assignee"),R(),x(27,"button",66),Q("click",function(){X(t);let i=B();return Z(i.openManageAssignees())}),N(28,"Manage"),R()(),x(29,"select",67),on("ngModelChange",function(i){X(t);let s=B();return dn(s.taskAssigneeId,i)||(s.taskAssigneeId=i),Z(i)}),x(30,"option",68),N(31,"Unassigned"),R(),wt(32,UX,2,2,"option",69,B0),R()(),x(34,"div")(35,"label",58),N(36,"Due Date"),R(),x(37,"input",70),on("ngModelChange",function(i){X(t);let s=B();return dn(s.taskDueDate,i)||(s.taskDueDate=i),Z(i)}),R()()(),x(38,"div",71)(39,"button",72),Q("click",function(){X(t);let i=B();return Z(i.toggleAddModal(!1))}),N(40,"Cancel"),R(),x(41,"button",73),Q("click",function(){X(t);let i=B();return Z(i.saveTask())}),N(42,"Save Task"),R()()()()}if(n&2){let t=B();V(4),Re(t.editingTask?"Edit Task":"New Task"),V(8),sn("ngModel",t.taskTitle),V(7),Re(t.getSelectedCategoryLabel()),V(3),_e(t.showCategoryDropdown?22:-1),V(7),sn("ngModel",t.taskAssigneeId),V(3),Et(t.assignees()),V(5),sn("ngModel",t.taskDueDate)}}function BX(n,e){if(n&1){let t=Oe();x(0,"app-assignee-management",78),Q("close",function(){X(t);let i=B();return Z(i.closeAssigneeModal())}),R()}}var j0=class n{overviewService=j(qi);dialogService=j(Rr);assigneeService=j(kd);groceryService=j(Nd);tasks=this.overviewService.tasks;assignees=this.assigneeService.assignees;categories=Qj;assigneeColors=Wp;groupedTasks=nt(()=>{let e=this.tasks(),t={};return this.categories.forEach(r=>t[r.id]=[]),t.other=[],e.forEach(r=>{let i=r.category;t[i]?t[i].push(r):t.other.push(r)}),t});totalPending=nt(()=>this.tasks().filter(e=>!e.isCompleted).length);activeCategoriesCount=nt(()=>{let e=this.groupedTasks();return Object.values(e).filter(t=>t.length>0).length});showAddModal=!1;editingTask=null;taskTitle="";taskCategory="groceries";taskDueDate="";taskAssigneeId="";showCategoryDropdown=!1;showAssigneeModal=!1;constructor(){}toggleAddModal(e){this.showAddModal=e,e||this.resetForm()}resetForm(){this.editingTask=null,this.taskTitle="",this.taskCategory="groceries",this.taskDueDate="",this.taskAssigneeId="",this.showCategoryDropdown=!1}toggleCategoryDropdown(){this.showCategoryDropdown=!this.showCategoryDropdown}selectCategory(e){this.taskCategory=e,this.showCategoryDropdown=!1}getSelectedCategoryLabel(){return this.categories.find(e=>e.id===this.taskCategory)?.label||"Select Category"}async saveTask(){if(!this.taskTitle.trim())return;let e={title:this.taskTitle,category:this.taskCategory,assigneeId:this.taskAssigneeId||void 0,isCompleted:!1,dueDate:this.taskDueDate?new Date(this.taskDueDate):null};this.editingTask?await this.overviewService.updateTask(this.editingTask.id,{title:this.taskTitle,category:this.taskCategory,assigneeId:this.taskAssigneeId||void 0,dueDate:this.taskDueDate?new Date(this.taskDueDate):null}):await this.overviewService.createTask(e),this.toggleAddModal(!1)}async toggleComplete(e){let t=!e.isCompleted;if(await this.overviewService.updateTask(e.id,{isCompleted:t}),t&&e.category==="groceries"){let r=this.groceryService.groceries().find(i=>i.name===e.title);r&&r.isInCart&&await this.groceryService.update(r.id,{isInCart:!1,isChecked:!1})}}async delete(e){if(await this.dialogService.confirm("Delete this task?","Delete Task")){let t=this.tasks().find(r=>r.id===e);if(await this.overviewService.deleteTask(e),t&&t.category==="groceries"){let r=this.groceryService.groceries().find(i=>i.name===t.title);r&&r.isInCart&&await this.groceryService.update(r.id,{isInCart:!1,isChecked:!1})}}}edit(e){this.editingTask=e,this.taskTitle=e.title,this.taskCategory=e.category,this.taskAssigneeId=e.assigneeId||"",this.taskDueDate=e.dueDate?new Date(e.dueDate.getTime()-e.dueDate.getTimezoneOffset()*6e4).toISOString().slice(0,16):"",this.showAddModal=!0}openManageAssignees(){this.showAssigneeModal=!0}closeAssigneeModal(){this.showAssigneeModal=!1}getAssigneeById(e){if(e)return this.assignees().find(t=>t.id===e)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=jn({type:n,selectors:[["app-overview"]],hostAttrs:[1,"flex-1","h-screen","flex","flex-col","overflow-hidden"],decls:39,vars:5,consts:[["id","overview-page",1,"flex-1","flex","flex-col","h-screen","overflow-y-auto","relative","bg-slate-50","dark:bg-background-dark"],[1,"px-8","pt-8","pb-4","w-full","z-10","flex","flex-col","gap-4","sticky","top-0","bg-slate-50/90","dark:bg-background-dark/90","backdrop-blur-sm"],[1,"flex","flex-col","w-full","group"],[1,"flex","w-full","items-center","rounded-full","h-14","bg-white","dark:bg-surface-dark","shadow-sm","border","border-slate-200","dark:border-border-dark","focus-within:border-primary","focus-within:ring-1","focus-within:ring-primary","transition-all","duration-300","px-6"],[1,"material-symbols-outlined","text-slate-400","dark:text-text-muted","group-focus-within:text-primary","transition-colors"],["id","overview-search-input","placeholder","Search for items to buy, fix, or clean...",1,"w-full","bg-transparent","border-none","focus:ring-0","text-base","font-medium","text-slate-900","dark:text-white","placeholder:text-slate-400","dark:placeholder:text-text-muted-darker","ml-3"],[1,"bg-primary","hover:bg-primary-hover","text-slate-900","p-2","rounded-full","transition-colors","flex","items-center","justify-center",3,"click"],[1,"material-symbols-outlined","text-[20px]","font-bold"],[1,"flex","items-center","gap-3","px-2"],[1,"text-xs","uppercase","font-bold","text-slate-500","dark:text-text-muted","tracking-wider"],["id","filter-chips",1,"flex","gap-2","text-slate-600","dark:text-slate-400","text-sm"],[1,"px-3","py-1","bg-white","dark:bg-surface-dark","rounded-full","border","border-slate-200","dark:border-border-dark","cursor-pointer","hover:border-primary"],[1,"flex-1","overflow-y-auto","px-8","pb-20","scroll-smooth"],[1,"w-full","flex","flex-col","gap-10"],[1,"flex","flex-wrap","justify-between","items-end","gap-4","mt-4","border-b","border-border-dark","pb-6"],[1,"text-4xl","font-black","text-slate-900","dark:text-white","tracking-tight","mb-2"],[1,"text-slate-500","dark:text-text-muted"],[1,"flex","gap-3"],[1,"flex","items-center","gap-2","px-5","py-2.5","rounded-full","bg-primary","text-slate-900","font-bold","text-sm","hover:bg-primary-hover","transition-colors","shadow-lg","shadow-primary/20",3,"click"],[1,"material-symbols-outlined","text-sm"],[1,"text-center","py-20","animate-in","fade-in","zoom-in-50","duration-500"],[1,"absolute","bottom-10","right-10","w-16","h-16","bg-primary","hover:bg-primary-hover","rounded-full","shadow-2xl","shadow-primary/20","text-slate-900","flex","items-center","justify-center","transition-transform","hover:scale-105","active:scale-95","z-40",3,"click"],[1,"material-symbols-outlined",2,"font-size","32px"],[1,"fixed","inset-0","z-50","flex","items-center","justify-center","p-4","bg-black/50","backdrop-blur-sm","animate-in","fade-in","duration-200"],[3,"id"],[1,"flex","items-center","justify-between","mb-5"],[1,"text-2xl","font-bold","text-slate-900","dark:text-white","flex","items-center","gap-3"],[1,"w-2","h-8","rounded-full","block"],[1,"text-xs","font-bold","px-3","py-1","rounded-full","bg-opacity-10"],[1,"grid","grid-cols-1","gap-3"],[1,"group","flex","items-center","gap-3","p-4","rounded-xl","bg-white","dark:bg-surface-dark","border","border-transparent","dark:border-border-dark","hover:border-primary/30","transition-all","duration-200","shadow-sm","hover:shadow-md","dark:shadow-none","relative","overflow-hidden","active:scale-[0.99]","active:shadow-inner",3,"opacity-50"],[1,"group","flex","items-center","gap-3","p-4","rounded-xl","bg-white","dark:bg-surface-dark","border","border-transparent","dark:border-border-dark","hover:border-primary/30","transition-all","duration-200","shadow-sm","hover:shadow-md","dark:shadow-none","relative","overflow-hidden","active:scale-[0.99]","active:shadow-inner"],[1,"material-symbols-outlined","text-slate-300","dark:text-border-dark","group-hover:text-slate-400","dark:group-hover:text-slate-500","cursor-grab","select-none","transition-colors"],[1,"relative","flex","items-center","p-2","rounded-full","cursor-pointer"],["type","checkbox",1,"peer","h-6","w-6","cursor-pointer","appearance-none","rounded-full","border-2","border-slate-400","dark:border-slate-500","transition-all","checked:border-primary","checked:bg-primary",3,"change","checked"],[1,"material-symbols-outlined","absolute","inset-0","flex","items-center","justify-center","text-white","text-[18px]","opacity-0","peer-checked:opacity-100","pointer-events-none","transition-opacity"],[1,"flex","flex-col","flex-1","min-w-0","cursor-pointer",3,"click"],[1,"flex","items-center","gap-3"],["alt","",1,"size-8","rounded-lg","object-cover","bg-slate-100","dark:bg-black/20","border","border-slate-200","dark:border-border-dark","shrink-0",3,"src"],[1,"text-base","font-bold","text-slate-900","dark:text-white","group-hover:text-primary","transition-colors","truncate"],[1,"hidden","sm:inline-flex","items-center","gap-1","px-2","py-0.5","rounded-md","text-[10px]","font-bold","uppercase","tracking-wider","bg-slate-100","text-slate-500","dark:bg-slate-800","dark:text-slate-400"],[1,"text-sm","text-slate-500","dark:text-text-muted-darker","truncate"],[1,"flex","items-center","gap-1","sm:gap-2","opacity-100","sm:opacity-0","group-hover:opacity-100","transition-opacity","z-20"],["title","Edit",1,"p-2","text-slate-400","hover:text-white","hover:bg-border-dark","rounded-full","transition-colors",3,"click"],[1,"material-symbols-outlined","text-[20px]"],["title","Delete",1,"p-2","text-slate-400","hover:text-rose-400","hover:bg-border-dark","rounded-full","transition-colors",3,"click"],[1,"material-symbols-outlined","text-[12px]"],[1,"size-6","rounded-full","flex","items-center","justify-center","text-[10px]","font-bold","text-white","ring-2","ring-white","dark:ring-surface-dark","ml-1",3,"title","class"],[1,"size-6","rounded-full","flex","items-center","justify-center","text-[10px]","font-bold","text-white","ring-2","ring-white","dark:ring-surface-dark","ml-1",3,"title"],[1,"material-symbols-outlined","text-6xl","text-slate-300","dark:text-slate-600"],[1,"mt-4","text-xl","font-bold","text-slate-500","dark:text-slate-400"],[1,"text-slate-400","dark:text-slate-500"],[1,"bg-white","dark:bg-surface-dark","w-full","max-w-md","rounded-2xl","shadow-xl","overflow-hidden","animate-in","zoom-in-95","duration-200","border","border-slate-200","dark:border-border-dark"],[1,"p-4","border-b","border-slate-100","dark:border-border-dark","flex","justify-between","items-center"],[1,"font-bold","text-lg","text-slate-900","dark:text-white"],[1,"p-1","rounded-full","hover:bg-slate-100","dark:hover:bg-border-dark","transition-colors",3,"click"],[1,"material-symbols-outlined"],[1,"p-6","space-y-4"],[1,"block","text-sm","font-medium","text-slate-700","dark:text-slate-300","mb-1"],["type","text","placeholder","e.g. Buy Milk",1,"w-full","px-4","py-2","rounded-lg","bg-slate-50","dark:bg-black/20","border","border-slate-200","dark:border-border-dark","focus:border-primary","focus:ring-1","focus:ring-primary","outline-none","text-slate-900","dark:text-white",3,"ngModelChange","ngModel"],[1,"relative"],[1,"w-full","px-4","py-2","rounded-lg","bg-slate-50","dark:bg-black/20","border","border-slate-200","dark:border-border-dark","focus:border-primary","focus:ring-1","focus:ring-primary","outline-none","text-slate-900","dark:text-white","text-left","flex","justify-between","items-center",3,"click"],[1,"material-symbols-outlined","text-slate-500"],[1,"absolute","top-full","left-0","right-0","mt-1","bg-white","dark:bg-surface-dark","border","border-slate-200","dark:border-border-dark","rounded-lg","shadow-xl","z-50","overflow-hidden","animate-in","fade-in","zoom-in-95","duration-100","max-h-48","overflow-y-auto"],[1,"flex","justify-between","items-center","mb-1"],[1,"block","text-sm","font-medium","text-slate-700","dark:text-slate-300"],[1,"text-xs","text-primary","font-bold","hover:underline",3,"click"],[1,"w-full","px-4","py-2","rounded-lg","bg-slate-50","dark:bg-black/20","border","border-slate-200","dark:border-border-dark","focus:border-primary","focus:ring-1","focus:ring-primary","outline-none","text-slate-900","dark:text-white",3,"ngModelChange","ngModel"],["value",""],[3,"value"],["type","datetime-local",1,"w-full","px-4","py-2","rounded-lg","bg-slate-50","dark:bg-black/20","border","border-slate-200","dark:border-border-dark","focus:border-primary","focus:ring-1","focus:ring-primary","outline-none","text-slate-900","dark:text-white",3,"ngModelChange","ngModel"],[1,"p-4","bg-slate-50","dark:bg-black/20","flex","justify-end","gap-3"],[1,"px-4","py-2","rounded-lg","text-slate-600","dark:text-slate-400","font-medium","hover:bg-slate-200","dark:hover:bg-border-dark","transition-colors",3,"click"],[1,"px-4","py-2","rounded-lg","bg-primary","text-slate-900","font-bold","hover:bg-primary-hover","transition-colors","shadow-lg","shadow-primary/20",3,"click"],[1,"w-full","px-4","py-3","text-left","text-slate-700","dark:text-white","hover:bg-slate-50","dark:hover:bg-border-dark","transition-colors","flex","items-center","gap-2"],[1,"w-full","px-4","py-3","text-left","text-slate-700","dark:text-white","hover:bg-slate-50","dark:hover:bg-border-dark","transition-colors","flex","items-center","gap-2",3,"click"],[1,"w-3","h-3","rounded-full"],[1,"material-symbols-outlined","ml-auto","text-primary","text-sm"],[3,"close"]],template:function(t,r){t&1&&(x(0,"main",0)(1,"div",1)(2,"label",2)(3,"div",3)(4,"span",4),N(5,"search"),R(),Rt(6,"input",5),x(7,"button",6),Q("click",function(){return r.toggleAddModal(!0)}),x(8,"span",7),N(9,"add"),R()()()(),x(10,"div",8)(11,"span",9),N(12,"Filter by Due Date:"),R(),x(13,"div",10)(14,"span",11),N(15,"All"),R(),x(16,"span",11),N(17,"Today"),R()()()(),x(18,"div",12)(19,"div",13)(20,"div",14)(21,"div")(22,"h2",15),N(23,"My Lists"),R(),x(24,"p",16),N(25),R()(),x(26,"div",17)(27,"button",18),Q("click",function(){return r.toggleAddModal(!0)}),x(28,"span",19),N(29,"add_task"),R(),N(30," New Task "),R()()(),wt(31,PX,1,1,null,null,B0),ye(33,OX,7,0,"div",20),R()(),x(34,"button",21),Q("click",function(){return r.toggleAddModal(!0)}),x(35,"span",22),N(36,"add"),R()(),ye(37,jX,43,6,"div",23),ye(38,BX,1,0,"app-assignee-management"),R()),t&2&&(V(25),dy("You have ",r.totalPending()," pending items across ",r.activeCategoriesCount()," categories."),V(6),Et(r.categories),V(2),_e(r.activeCategoriesCount()===0&&(!r.groupedTasks().other||r.groupedTasks().other.length===0)?33:-1),V(4),_e(r.showAddModal?37:-1),V(),_e(r.showAssigneeModal?38:-1))},dependencies:[br,ga,xd,Rd,Hi,pa,fa,$s,U0,ef],encapsulation:2})};var Md=class n{MAX_WIDTH=400;MAX_HEIGHT=400;QUALITY=.7;async compressImage(e){return new Promise((t,r)=>{let i=new FileReader;i.onload=s=>{let o=new Image;o.onload=()=>{try{let a=document.createElement("canvas"),{width:c,height:d}=o;c>d?c>this.MAX_WIDTH&&(d=Math.round(d*this.MAX_WIDTH/c),c=this.MAX_WIDTH):d>this.MAX_HEIGHT&&(c=Math.round(c*this.MAX_HEIGHT/d),d=this.MAX_HEIGHT),a.width=c,a.height=d;let h=a.getContext("2d");if(!h){r(new Error("Could not get canvas context"));return}h.drawImage(o,0,0,c,d);let p=a.toDataURL("image/jpeg",this.QUALITY);t(p)}catch(a){r(a)}},o.onerror=()=>{r(new Error("Failed to load image"))},o.src=s.target?.result},i.onerror=()=>{r(new Error("Failed to read file"))},i.readAsDataURL(e)})}isValidImageFile(e){return["image/jpeg","image/png","image/gif","image/webp"].includes(e.type)}formatFileSize(e){return e<1024?e+" B":e<1024*1024?(e/1024).toFixed(1)+" KB":(e/(1024*1024)).toFixed(1)+" MB"}static \u0275fac=function(t){return new(t||n)};static \u0275prov=se({token:n,factory:n.\u0275fac,providedIn:"root"})};var $0=(n,e)=>e.id,$X=(n,e)=>e.value;function HX(n,e){if(n&1){let t=Oe();x(0,"button",40),Q("click",function(){let i=X(t).$implicit,s=B(2);return Z(s.onSortChange(i.value))}),N(1),R()}if(n&2){let t=e.$implicit,r=B(2);xn("bg-primary-10",r.sortBy()===t.value)("text-primary",r.sortBy()===t.value)("text-slate-700",r.sortBy()!==t.value)("dark:text-slate-300",r.sortBy()!==t.value),V(),lt(" ",t.label," ")}}function qX(n,e){if(n&1&&(x(0,"div",10),wt(1,HX,2,9,"button",39,$X),R()),n&2){let t=B();V(),Et(t.sortOptions)}}function zX(n,e){if(n&1&&(x(0,"div",15)(1,"div",41)(2,"div",42)(3,"span",43),N(4,"error"),R()(),x(5,"div",44)(6,"h3",45),N(7,"Connection Error"),R(),x(8,"div",46)(9,"p"),N(10),R(),x(11,"p",47),N(12,"Please check your Firestore Security Rules or Auth configuration."),R()()()()()),n&2){let t=B();V(10),Re(t.error())}}function GX(n,e){if(n&1){let t=Oe();x(0,"div",48)(1,"button",49),Q("click",function(i){X(t);let s=B().$implicit;return B().startEditCategory(s),Z(i.stopPropagation())}),x(2,"span",50),N(3,"edit"),R()(),x(4,"button",51),Q("click",function(i){X(t);let s=B().$implicit;return B().deleteCategory(s.id),Z(i.stopPropagation())}),x(5,"span",50),N(6,"close"),R()()()}}function WX(n,e){if(n&1){let t=Oe();x(0,"div",30)(1,"button",28),Q("click",function(){let i=X(t).$implicit,s=B();return Z(s.onCategoryChange(i.id))}),x(2,"span",29),N(3),R(),x(4,"p"),N(5),R(),ye(6,GX,7,0,"div",48),R()()}if(n&2){let t=e.$implicit,r=B();V(),ft(r.selectedCategory()===t.id?"flex h-9 shrink-0 items-center justify-center gap-x-2 rounded-lg bg-slate-900 dark:bg-white px-4 pr-2 hover:opacity-90 transition-opacity":"flex h-9 shrink-0 items-center justify-center gap-x-2 rounded-lg bg-white dark:bg-surface-dark border border-slate-200 dark:border-border-dark px-4 pr-2 hover:bg-slate-50 dark:hover:bg-border-dark transition-colors"),V(),ft(t.color),V(),Re(t.icon),V(),ft(r.selectedCategory()===t.id?"text-white dark:text-slate-900 text-sm font-bold":"text-slate-600 dark:text-slate-300 text-sm font-medium"),V(),lt(" ",t.name," "),V(),_e(t.isDefault?-1:6)}}function KX(n,e){if(n&1){let t=Oe();x(0,"img",66),Q("error",function(i){X(t);let s=B(4);return Z(s.handleImageError(i))}),R()}if(n&2){let t=B().$implicit;Ge("alt",t.name)("src",t.imageUrl,Qn)}}function QX(n,e){n&1&&(x(0,"div",60)(1,"span",67),N(2,"grocery"),R()())}function YX(n,e){if(n&1){let t=Oe();x(0,"span",68),N(1,"In Cart"),R(),x(2,"button",69),Q("click",function(){X(t);let i=B().$implicit,s=B(3);return Z(s.removeFromCart(i.id))}),x(3,"span",32),N(4,"remove_shopping_cart"),R()()}}function JX(n,e){if(n&1){let t=Oe();x(0,"button",70),Q("click",function(){X(t);let i=B().$implicit,s=B(3);return Z(s.addToCart(i.id))}),x(1,"span",4),N(2,"add_shopping_cart"),R()()}}function XX(n,e){if(n&1){let t=Oe();x(0,"div",57)(1,"div",2)(2,"div",58),ye(3,KX,1,2,"img",59)(4,QX,3,0,"div",60),R(),x(5,"div")(6,"h4",61),N(7),R()()(),x(8,"div",62),ye(9,YX,5,0)(10,JX,3,0,"button",63),x(11,"button",64),Q("click",function(){let i=X(t).$implicit,s=B(3);return Z(s.startEdit(i))}),x(12,"span",32),N(13,"edit"),R()(),x(14,"button",65),Q("click",function(){let i=X(t).$implicit,s=B(3);return Z(s.deleteItem(i.id))}),x(15,"span",32),N(16,"delete"),R()()()()}if(n&2){let t=e.$implicit;V(3),_e(t.imageUrl?3:4),V(4),Re(t.name),V(2),_e(t.isInCart?9:10)}}function ZX(n,e){if(n&1&&(x(0,"section",52)(1,"div",53)(2,"h3",54)(3,"span",19),N(4),R(),N(5),R(),x(6,"span",55),N(7),R()(),x(8,"div",56),wt(9,XX,17,3,"div",57,$0),R()()),n&2){let t=B().$implicit,r=B();Ge("id","section-"+t.id),V(3),ft(t.color),V(),Re(t.icon),V(),lt(" ",t.name," "),V(2),lt("",r.getItemCount(t.id)," items"),V(2),Et(r.groceriesByCategory()[t.id])}}function eZ(n,e){if(n&1&&ye(0,ZX,11,6,"section",52),n&2){let t=e.$implicit,r=B();_e(r.groceriesByCategory()[t.id]&&r.groceriesByCategory()[t.id].length>0?0:-1)}}function tZ(n,e){if(n&1){let t=Oe();x(0,"button",76),Q("click",function(){X(t);let i=B(2);return Z(i.onCategoryChange("all"))}),N(1," Browse all items "),R()}}function nZ(n,e){if(n&1&&(x(0,"div",34)(1,"div",71)(2,"span",72),N(3,"search_off"),R()(),x(4,"h3",73),N(5,"No items found"),R(),x(6,"p",74),N(7," We couldn't find any items matching your current filters. "),R(),ye(8,tZ,2,0,"button",75),R()),n&2){let t=B();V(8),_e(t.selectedCategory()!=="all"?8:-1)}}function rZ(n,e){if(n&1&&(x(0,"span",37),N(1),R()),n&2){let t=B();V(),Re(t.getTotalCartItems())}}function iZ(n,e){n&1&&(x(0,"div",83)(1,"span",98),N(2,"progress_activity"),R(),x(3,"span",99),N(4,"Compressing..."),R()())}function sZ(n,e){if(n&1){let t=Oe();x(0,"img",100),Q("error",function(i){X(t);let s=B(2);return Z(s.handleImageError(i))}),R()}if(n&2){let t=B(2);Ge("src",t.editItemImageUrl,Qn)}}function oZ(n,e){n&1&&(x(0,"span",85),N(1,"image"),R())}function aZ(n,e){if(n&1){let t=Oe();x(0,"button",101),Q("click",function(){X(t);let i=B(2);return Z(i.removeImage())}),x(1,"span",50),N(2,"close"),R()()}}function cZ(n,e){if(n&1&&(x(0,"option",94),N(1),R()),n&2){let t=e.$implicit;Ge("value",t.id),V(),Re(t.name)}}function lZ(n,e){if(n&1){let t=Oe();x(0,"div",77),Q("click",function(){X(t);let i=B();return Z(i.cancelEdit())}),x(1,"div",78),Q("click",function(i){return X(t),Z(i.stopPropagation())}),x(2,"h3",79),N(3),R(),x(4,"div",80)(5,"div",81)(6,"div",8)(7,"div",82),ye(8,iZ,5,0,"div",83)(9,sZ,1,1,"img",84)(10,oZ,2,0,"span",85),R(),ye(11,aZ,3,0,"button",86),R(),x(12,"label",87)(13,"input",88),Q("change",function(i){X(t);let s=B();return Z(s.onImageFileSelected(i))}),R(),x(14,"span",89)(15,"span",32),N(16,"upload"),R(),N(17),R()(),x(18,"p",90),N(19,"Images are compressed automatically"),R()(),x(20,"div")(21,"label",91),N(22,"Item Name"),R(),x(23,"input",92),on("ngModelChange",function(i){X(t);let s=B();return dn(s.editItemName,i)||(s.editItemName=i),Z(i)}),R()(),x(24,"div")(25,"label",91),N(26,"Category"),R(),x(27,"select",93),on("ngModelChange",function(i){X(t);let s=B();return dn(s.editItemCategory,i)||(s.editItemCategory=i),Z(i)}),wt(28,cZ,2,2,"option",94,$0),R()()(),x(30,"div",95)(31,"button",96),Q("click",function(){X(t);let i=B();return Z(i.cancelEdit())}),N(32,"Cancel"),R(),x(33,"button",97),Q("click",function(){X(t);let i=B();return Z(i.saveEdit())}),N(34,"Save"),R()()()()}if(n&2){let t=B();V(3),Re(t.editingItem?"Edit Item":"Add Item"),V(5),_e(t.isUploadingImage?8:t.editItemImageUrl?9:10),V(3),_e(t.editItemImageUrl&&!t.isUploadingImage?11:-1),V(2),Ge("disabled",t.isUploadingImage),V(4),lt(" ",t.editItemImageUrl?"Change Image":"Upload Image"," "),V(6),sn("ngModel",t.editItemName),V(4),sn("ngModel",t.editItemCategory),V(),Et(t.categories()),V(5),Ge("disabled",t.isUploadingImage)}}function uZ(n,e){if(n&1){let t=Oe();x(0,"button",28),Q("click",function(){let i=X(t).$implicit,s=B(2);return Z(s.editCategoryIcon=i)}),x(1,"span",19),N(2),R()()}if(n&2){let t=e.$implicit,r=B(2);ft(r.editCategoryIcon===t?"size-10 rounded-lg bg-primary text-white flex items-center justify-center":"size-10 rounded-lg bg-white dark:bg-surface-dark border border-slate-200 dark:border-border-dark flex items-center justify-center hover:border-primary transition-colors"),V(2),Re(t)}}function dZ(n,e){if(n&1){let t=Oe();x(0,"button",28),Q("click",function(){let i=X(t).$implicit,s=B(2);return Z(s.editCategoryColor=i)}),x(1,"span",19),N(2,"circle"),R()()}if(n&2){let t=e.$implicit,r=B(2);ft(r.editCategoryColor===t?"size-10 rounded-lg bg-white dark:bg-surface-dark border-2 border-primary flex items-center justify-center":"size-10 rounded-lg bg-white dark:bg-surface-dark border border-slate-200 dark:border-border-dark flex items-center justify-center hover:border-primary transition-colors"),V(),ft(t)}}function hZ(n,e){if(n&1){let t=Oe();x(0,"div",77),Q("click",function(){X(t);let i=B();return Z(i.closeCategoryModal())}),x(1,"div",78),Q("click",function(i){return X(t),Z(i.stopPropagation())}),x(2,"h3",79),N(3),R(),x(4,"div",80)(5,"div",102)(6,"div",103)(7,"span",104),N(8),R(),x(9,"span",105),N(10),R()()(),x(11,"div")(12,"label",91),N(13,"Category Name"),R(),x(14,"input",106),on("ngModelChange",function(i){X(t);let s=B();return dn(s.editCategoryName,i)||(s.editCategoryName=i),Z(i)}),R()(),x(15,"div")(16,"label",107),N(17,"Icon"),R(),x(18,"div",108),wt(19,uZ,3,3,"button",109,tu),R()(),x(21,"div")(22,"label",107),N(23,"Color"),R(),x(24,"div",110),wt(25,dZ,3,4,"button",109,tu),R()()(),x(27,"div",95)(28,"button",96),Q("click",function(){X(t);let i=B();return Z(i.closeCategoryModal())}),N(29,"Cancel"),R(),x(30,"button",111),Q("click",function(){X(t);let i=B();return Z(i.saveCategory())}),N(31,"Save"),R()()()()}if(n&2){let t=B();V(3),Re(t.editingCategory?"Edit Category":"Add Category"),V(4),ft(t.editCategoryColor),V(),Re(t.editCategoryIcon),V(2),Re(t.editCategoryName||"Category Name"),V(4),sn("ngModel",t.editCategoryName),V(5),Et(t.availableIcons),V(6),Et(t.availableColors)}}var H0=class n{groceryService=j(Nd);imageService=j(Md);dialogService=j(Rr);overviewService=j(qi);groceries=this.groceryService.groceries;groceriesByCategory=this.groceryService.groceriesByCategory;cartItems=this.groceryService.cartItems;checkedItems=this.groceryService.checkedItems;uncheckedItems=this.groceryService.uncheckedItems;searchQuery=this.groceryService.searchQuery;selectedCategory=this.groceryService.selectedCategory;sortBy=this.groceryService.sortBy;categories=this.groceryService.categories;categoryIds=this.groceryService.categoryIds;error=this.groceryService.error;isLoading=this.groceryService.isLoading;availableIcons=Yj;availableColors=Jj;newItemName="";showAddModal=!1;isAddingFromSidebar=!1;editingItem=null;editItemName="";editItemCategory="other";editItemImageUrl="";isUploadingImage=!1;showMobileCart=!1;toggleMobileCart(){this.showMobileCart=!this.showMobileCart}showCategoryModal=!1;editingCategory=null;editCategoryName="";editCategoryIcon="category";editCategoryColor="text-slate-400";sortOptions=[{value:"name",label:"Name"},{value:"category",label:"Category"},{value:"date",label:"Date Added"}];showSortDropdown=!1;openAddCategoryModal(){this.editingCategory=null,this.editCategoryName="",this.editCategoryIcon="category",this.editCategoryColor="text-slate-400",this.showCategoryModal=!0}startEditCategory(e){e.isDefault||(this.editingCategory=e,this.editCategoryName=e.name,this.editCategoryIcon=e.icon,this.editCategoryColor=e.color,this.showCategoryModal=!0)}async saveCategory(){this.editCategoryName.trim()&&(this.editingCategory?await this.groceryService.updateCategory(this.editingCategory.id,{name:this.editCategoryName.trim(),icon:this.editCategoryIcon,color:this.editCategoryColor}):await this.groceryService.createCategory({name:this.editCategoryName.trim(),icon:this.editCategoryIcon,color:this.editCategoryColor}),this.closeCategoryModal())}async deleteCategory(e){let t=this.groceryService.getCategory(e);if(!t||t.isDefault)return;let r=this.groceryService.getItemCountInCategory(e);if(r>0){await this.dialogService.alert(`Cannot delete category "${t.name}" because it has ${r} item(s). Please move or delete the items first.`);return}if(await this.dialogService.confirm(`Delete category "${t.name}"?`,"Delete Category")){let i=this.groceryService.deleteCategory(e);!i.success&&i.error&&await this.dialogService.alert(i.error)}}closeCategoryModal(){this.editingCategory=null,this.editCategoryName="",this.editCategoryIcon="category",this.editCategoryColor="text-slate-400",this.showCategoryModal=!1}async onImageFileSelected(e){let t=e.target,r=t.files?.[0];if(r){if(!this.imageService.isValidImageFile(r)){await this.dialogService.alert("Please select a valid image file (JPEG, PNG, GIF, or WebP)");return}this.isUploadingImage=!0;try{let i=await this.imageService.compressImage(r);this.editItemImageUrl=i}catch(i){console.error("Error compressing image:",i),await this.dialogService.alert("Failed to process image. Please try again.")}finally{this.isUploadingImage=!1,t.value=""}}}removeImage(){this.editItemImageUrl=""}onSearch(e){let t=e.target;this.groceryService.setSearchQuery(t.value)}onCategoryChange(e){this.groceryService.setCategory(e)}onSortChange(e){this.groceryService.setSortBy(e),this.showSortDropdown=!1}toggleSortDropdown(){this.showSortDropdown=!this.showSortDropdown}async addItem(){this.newItemName.trim()&&(await this.groceryService.create({name:this.newItemName.trim(),category:"other",isInCart:!1,isChecked:!1}),this.newItemName="")}async addItemWithCategory(e,t){e.trim()&&await this.groceryService.create({name:e.trim(),category:t,isInCart:!1,isChecked:!1})}deleteItem(e){this.groceryService.delete(e)}startEdit(e){this.editingItem=e,this.editItemName=e.name,this.editItemCategory=e.category,this.editItemImageUrl=e.imageUrl||"",this.showAddModal=!0}openAddModal(e=!1){this.isAddingFromSidebar=e,this.editingItem=null,this.editItemName="",this.editItemCategory="other",this.editItemImageUrl="",this.showAddModal=!0}async saveEdit(){this.editItemName.trim()&&(this.editingItem?await this.groceryService.update(this.editingItem.id,{name:this.editItemName.trim(),category:this.editItemCategory,imageUrl:this.editItemImageUrl.trim()||void 0}):(await this.groceryService.create({name:this.editItemName.trim(),category:this.editItemCategory,imageUrl:this.editItemImageUrl.trim()||void 0,isInCart:this.isAddingFromSidebar,isChecked:!1}),this.isAddingFromSidebar&&this.createOverviewTask(this.editItemName.trim(),this.editItemImageUrl.trim()||void 0)),this.cancelEdit())}cancelEdit(){this.editingItem=null,this.editItemName="",this.editItemCategory="other",this.editItemImageUrl="",this.showAddModal=!1}async addToCart(e){await this.groceryService.addToCart(e);let t=this.groceries().find(r=>r.id===e);t&&this.createOverviewTask(t.name,t.imageUrl)}async removeFromCart(e){let t=this.groceries().find(r=>r.id===e);await this.groceryService.removeFromCart(e),t&&this.removeOverviewTask(t.name)}async toggleChecked(e){await this.groceryService.toggleChecked(e)}async clearCart(){let e=this.cartItems();await this.groceryService.clearCart();for(let t of e)this.removeOverviewTask(t.name)}async checkout(){if(this.cartItems().length!==0&&await this.dialogService.confirm("Complete shopping trip and save to history?","Checkout"))try{await this.groceryService.saveToHistory(),await this.groceryService.clearCart()}catch(e){console.error("Checkout failed",e),await this.dialogService.alert("Failed to save history. Please check your connection.")}}getCategoryLabel(e){return this.groceryService.getCategoryLabel(e)}getCategoryIcon(e){return this.groceryService.getCategoryIcon(e)}getCategoryColor(e){return this.groceryService.getCategoryColor(e)}getItemCount(e){return this.groceriesByCategory()[e]?.length||0}getTotalCartItems(){return this.cartItems().length}getProgress(){let e=this.cartItems().length;return e===0?0:this.checkedItems().length/e*100}isDefaultCategory(e){return this.groceryService.getCategory(e)?.isDefault??!1}handleImageError(e){let t=e.target;t.src="https://placehold.co/200x200/cccccc/ffffff?text=No+Image"}async resetData(){await this.dialogService.confirm("This will reset all grocery data to the default seed data. Continue?","Reset Data")&&await this.groceryService.resetToSeedData()}createOverviewTask(e,t){let r=new Date;r.setDate(r.getDate()+3),this.overviewService.createTask({title:e,category:"groceries",isCompleted:!1,dueDate:r,imageUrl:t})}async removeOverviewTask(e){let r=this.overviewService.tasks().find(i=>i.title===e&&i.category==="groceries");r&&await this.overviewService.deleteTask(r.id)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=jn({type:n,selectors:[["app-groceries"]],hostAttrs:[1,"flex-1","h-screen","flex","flex-col","overflow-hidden"],decls:65,vars:16,consts:[["id","groceries-page",1,"flex","flex-col","h-screen","w-full","overflow-hidden"],["id","groceries-header",1,"flex","items-center","justify-between","whitespace-nowrap","border-b","border-solid","border-[#e5e7eb]","dark:border-border-dark","bg-white","dark:bg-background-dark","px-6","py-3","shrink-0","z-20"],[1,"flex","items-center","gap-4"],[1,"size-8","bg-primary","rounded-lg","flex","items-center","justify-center","text-white"],[1,"material-symbols-outlined","text-[20px]"],[1,"text-slate-900","dark:text-white","text-xl","font-bold","leading-tight","tracking-[-0.015em]"],[1,"flex","flex-1","justify-end","gap-6","items-center"],[1,"flex","gap-2"],[1,"relative"],["id","btn-sort",1,"flex","size-10","cursor-pointer","items-center","justify-center","overflow-hidden","rounded-lg","bg-slate-100","dark:bg-border-dark","text-slate-900","dark:text-white","hover:bg-slate-200","dark:hover:bg-[#3b4754]","transition-colors",3,"click"],[1,"absolute","right-0","top-12","w-40","bg-white","dark:bg-surface-dark","border","border-slate-200","dark:border-border-dark","rounded-lg","shadow-xl","z-50","overflow-hidden"],["id","btn-reset","title","Reset to seed data",1,"flex","size-10","cursor-pointer","items-center","justify-center","overflow-hidden","rounded-lg","bg-slate-100","dark:bg-border-dark","text-slate-900","dark:text-white","hover:bg-red-500","hover:text-white","transition-colors",3,"click"],[1,"flex","flex-1","min-h-0"],["id","groceries-main-content",1,"flex-1","min-w-0","overflow-y-auto","bg-background-light","dark:bg-background-dark","relative"],[1,"w-full","mx-auto","px-6","py-8","flex","flex-col","gap-6"],[1,"bg-red-50","dark:bg-red-900/20","border-l-4","border-red-500","p-4","rounded-r-lg"],[1,"flex","flex-col","md:flex-row","gap-4"],[1,"flex-1","relative","group"],[1,"absolute","left-4","top-1/2","-translate-y-1/2","text-slate-400"],[1,"material-symbols-outlined"],["id","groceries-search-input","placeholder","Search for items (e.g. Avocado, Milk)...","type","text",1,"w-full","h-12","pl-12","pr-4","bg-white","dark:bg-surface-dark","border","border-slate-200","dark:border-border-dark","rounded-xl","text-slate-900","dark:text-white","placeholder:text-slate-400","focus:outline-none","focus:ring-2","focus:ring-primary","focus:border-transparent","transition-all","shadow-sm",3,"input","value"],[1,"md:w-[350px]","relative","flex","gap-2"],[1,"flex-1","relative"],["id","groceries-quick-add-input","placeholder","Quick add item...","type","text",1,"w-full","h-12","pl-4","pr-12","bg-white","dark:bg-surface-dark","border","border-slate-200","dark:border-border-dark","rounded-xl","text-slate-900","dark:text-white","placeholder:text-slate-400","focus:outline-none","focus:ring-2","focus:ring-primary","focus:border-transparent","transition-all","shadow-sm",3,"ngModelChange","keyup.enter","ngModel"],["id","btn-quick-add",1,"absolute","right-2","top-2","size-8","bg-primary/10","hover:bg-primary/20","text-primary","rounded-lg","flex","items-center","justify-center","transition-colors",3,"click"],["id","btn-add-custom",1,"h-12","px-4","bg-primary","text-white","rounded-xl","flex","items-center","justify-center","gap-2","hover:bg-blue-600","transition-colors","shadow-lg","shadow-blue-500/20","whitespace-nowrap",3,"click"],[1,"hidden","sm:inline","font-semibold","text-sm"],["id","groceries-filter-chips",1,"flex","gap-3","overflow-x-auto","pb-2","scrollbar-hide","items-center"],[3,"click"],[1,"material-symbols-outlined","text-[16px]"],[1,"relative","group","shrink-0"],[1,"flex","h-9","shrink-0","items-center","justify-center","gap-x-2","rounded-lg","border-2","border-dashed","border-slate-300","dark:border-slate-600","px-4","hover:border-primary","hover:text-primary","transition-colors","text-slate-400",3,"click"],[1,"material-symbols-outlined","text-[18px]"],[1,"text-sm","font-medium"],[1,"flex","flex-col","items-center","justify-center","py-20","text-center","animate-in","fade-in","duration-300"],[1,"h-12"],["id","btn-mobile-cart",1,"xl:hidden","fixed","bottom-6","right-6","size-14","bg-primary","text-white","rounded-full","shadow-xl","shadow-blue-500/40","flex","items-center","justify-center","z-50",3,"click"],[1,"absolute","top-0","right-0","size-5","bg-red-500","rounded-full","border-2","border-background-light","dark:border-background-dark","text-[10px]","font-bold","flex","items-center","justify-center"],[1,"fixed","inset-0","bg-black/50","flex","items-center","justify-center","z-50"],[1,"w-full","px-4","py-2","text-left","text-sm","hover:bg-slate-100","dark:hover:bg-border-dark","transition-colors",3,"bg-primary-10","text-primary","text-slate-700","dark:text-slate-300"],[1,"w-full","px-4","py-2","text-left","text-sm","hover:bg-slate-100","dark:hover:bg-border-dark","transition-colors",3,"click"],[1,"flex"],[1,"flex-shrink-0"],[1,"material-symbols-outlined","text-red-500"],[1,"ml-3"],[1,"text-sm","font-medium","text-red-800","dark:text-red-200"],[1,"mt-2","text-sm","text-red-700","dark:text-red-300"],[1,"mt-1","font-semibold"],[1,"flex","items-center","gap-1","ml-1"],[1,"size-5","flex","items-center","justify-center","rounded","hover:bg-black/10","dark:hover:bg-white/10",3,"click"],[1,"material-symbols-outlined","text-[14px]"],[1,"size-5","flex","items-center","justify-center","rounded","hover:bg-red-500/20","text-red-500",3,"click"],[3,"id"],[1,"flex","items-center","justify-between","mb-4"],[1,"text-lg","font-bold","text-slate-900","dark:text-white","flex","items-center","gap-2"],[1,"text-xs","font-medium","text-slate-500","bg-slate-100","dark:bg-border-dark","px-2","py-1","rounded"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],[1,"group","bg-white","dark:bg-surface-dark","p-4","rounded-xl","border","border-slate-200","dark:border-border-dark","hover:border-primary/50","dark:hover:border-primary/50","transition-colors","shadow-sm","flex","items-center","justify-between"],[1,"size-12","rounded-lg","bg-slate-50","dark:bg-black/20","overflow-hidden","flex-shrink-0"],[1,"w-full","h-full","object-cover",3,"alt","src"],[1,"w-full","h-full","flex","items-center","justify-center"],[1,"font-semibold","text-slate-900","dark:text-white"],[1,"flex","items-center","gap-2"],["title","Add to cart",1,"size-9","bg-primary","text-white","rounded-lg","flex","items-center","justify-center","hover:bg-blue-600","transition-colors","shadow-lg","shadow-blue-500/20"],["title","Edit",1,"p-2","text-slate-400","hover:text-primary","rounded-full","hover:bg-slate-100","dark:hover:bg-border-dark","transition-colors",3,"click"],["title","Delete",1,"p-2","text-slate-400","hover:text-red-500","rounded-full","hover:bg-slate-100","dark:hover:bg-border-dark","transition-colors",3,"click"],[1,"w-full","h-full","object-cover",3,"error","alt","src"],[1,"material-symbols-outlined","text-slate-400"],[1,"text-xs","text-green-500","font-medium"],["title","Remove from cart",1,"p-2","text-slate-400","hover:text-red-500","rounded-full","hover:bg-slate-100","dark:hover:bg-border-dark","transition-colors",3,"click"],["title","Add to cart",1,"size-9","bg-primary","text-white","rounded-lg","flex","items-center","justify-center","hover:bg-blue-600","transition-colors","shadow-lg","shadow-blue-500/20",3,"click"],[1,"size-24","rounded-full","bg-slate-100","dark:bg-black/20","flex","items-center","justify-center","mb-4"],[1,"material-symbols-outlined","text-4xl","text-slate-300"],[1,"text-lg","font-bold","text-slate-900","dark:text-white"],[1,"text-slate-500","dark:text-slate-400","mt-2","max-w-xs","mx-auto"],[1,"mt-6","text-primary","font-medium","hover:underline"],[1,"mt-6","text-primary","font-medium","hover:underline",3,"click"],[1,"fixed","inset-0","bg-black/50","flex","items-center","justify-center","z-50",3,"click"],[1,"bg-white","dark:bg-surface-dark","rounded-2xl","p-6","w-full","max-w-md","shadow-2xl",3,"click"],[1,"text-lg","font-bold","text-slate-900","dark:text-white","mb-4"],[1,"space-y-4"],[1,"flex","flex-col","items-center","gap-3"],[1,"size-24","rounded-xl","bg-slate-100","dark:bg-black/20","overflow-hidden","flex","items-center","justify-center"],[1,"flex","flex-col","items-center"],["alt","Preview",1,"w-full","h-full","object-cover",3,"src"],[1,"material-symbols-outlined","text-4xl","text-slate-400"],[1,"absolute","-top-2","-right-2","size-6","bg-red-500","text-white","rounded-full","flex","items-center","justify-center","hover:bg-red-600","transition-colors","shadow-lg"],[1,"cursor-pointer"],["type","file","accept","image/jpeg,image/png,image/gif,image/webp",1,"hidden",3,"change","disabled"],[1,"flex","items-center","gap-2","px-4","py-2","bg-slate-100","dark:bg-border-dark","text-slate-600","dark:text-slate-300","rounded-lg","hover:bg-slate-200","dark:hover:bg-slate-600","transition-colors","text-sm","font-medium"],[1,"text-xs","text-slate-400"],[1,"block","text-sm","font-medium","text-slate-700","dark:text-slate-300","mb-1"],["type","text","placeholder","Enter item name...",1,"w-full","h-12","px-4","bg-white","dark:bg-background-dark","border","border-slate-200","dark:border-border-dark","rounded-xl","text-slate-900","dark:text-white","focus:outline-none","focus:ring-2","focus:ring-primary",3,"ngModelChange","ngModel"],[1,"w-full","h-12","px-4","bg-white","dark:bg-background-dark","border","border-slate-200","dark:border-border-dark","rounded-xl","text-slate-900","dark:text-white","focus:outline-none","focus:ring-2","focus:ring-primary",3,"ngModelChange","ngModel"],[3,"value"],[1,"flex","gap-3","mt-6"],[1,"flex-1","h-10","rounded-lg","border","border-slate-200","dark:border-border-dark","text-slate-600","dark:text-slate-300","font-semibold","text-sm","hover:bg-slate-50","dark:hover:bg-border-dark","transition-colors",3,"click"],[1,"flex-1","h-10","rounded-lg","bg-primary","text-white","font-semibold","text-sm","hover:bg-blue-600","shadow-lg","shadow-blue-500/20","transition-colors","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],[1,"material-symbols-outlined","text-2xl","text-primary","animate-spin"],[1,"text-xs","text-slate-400","mt-1"],["alt","Preview",1,"w-full","h-full","object-cover",3,"error","src"],[1,"absolute","-top-2","-right-2","size-6","bg-red-500","text-white","rounded-full","flex","items-center","justify-center","hover:bg-red-600","transition-colors","shadow-lg",3,"click"],[1,"flex","justify-center"],[1,"flex","items-center","gap-3","px-6","py-3","rounded-xl","bg-slate-100","dark:bg-black/20"],[1,"material-symbols-outlined","text-2xl"],[1,"font-bold","text-slate-900","dark:text-white"],["type","text","placeholder","e.g., Frozen Foods, Beverages...",1,"w-full","h-12","px-4","bg-white","dark:bg-background-dark","border","border-slate-200","dark:border-border-dark","rounded-xl","text-slate-900","dark:text-white","focus:outline-none","focus:ring-2","focus:ring-primary",3,"ngModelChange","ngModel"],[1,"block","text-sm","font-medium","text-slate-700","dark:text-slate-300","mb-2"],[1,"flex","flex-wrap","gap-2","max-h-24","overflow-y-auto","p-2","bg-slate-50","dark:bg-black/20","rounded-xl"],[3,"class"],[1,"flex","flex-wrap","gap-2","p-2","bg-slate-50","dark:bg-black/20","rounded-xl"],[1,"flex-1","h-10","rounded-lg","bg-primary","text-white","font-semibold","text-sm","hover:bg-blue-600","shadow-lg","shadow-blue-500/20","transition-colors",3,"click"]],template:function(t,r){t&1&&(x(0,"div",0)(1,"header",1)(2,"div",2)(3,"div",3)(4,"span",4),N(5,"shopping_basket"),R()(),x(6,"h2",5),N(7,"Groceries"),R()(),x(8,"div",6)(9,"div",7)(10,"div",8)(11,"button",9),Q("click",function(){return r.toggleSortDropdown()}),x(12,"span",4),N(13,"sort"),R()(),ye(14,qX,3,0,"div",10),R(),x(15,"button",11),Q("click",function(){return r.resetData()}),x(16,"span",4),N(17,"restart_alt"),R()()()()(),x(18,"div",12)(19,"main",13)(20,"div",14),ye(21,zX,13,1,"div",15),x(22,"div",16)(23,"div",17)(24,"div",18)(25,"span",19),N(26,"search"),R()(),x(27,"input",20),Q("input",function(s){return r.onSearch(s)}),R()(),x(28,"div",21)(29,"div",22)(30,"input",23),on("ngModelChange",function(s){return dn(r.newItemName,s)||(r.newItemName=s),s}),Q("keyup.enter",function(){return r.addItem()}),R(),x(31,"button",24),Q("click",function(){return r.addItem()}),x(32,"span",4),N(33,"add"),R()()(),x(34,"button",25),Q("click",function(){return r.openAddModal()}),x(35,"span",4),N(36,"add_circle"),R(),x(37,"span",26),N(38,"New"),R()()()(),x(39,"div",27)(40,"button",28),Q("click",function(){return r.onCategoryChange("all")}),x(41,"p"),N(42," All Items "),R()(),x(43,"button",28),Q("click",function(){return r.onCategoryChange("cart")}),x(44,"span",29),N(45,"shopping_cart"),R(),x(46,"p"),N(47," Shopping List "),R()(),wt(48,WX,7,9,"div",30,$0),x(50,"button",31),Q("click",function(){return r.openAddCategoryModal()}),x(51,"span",32),N(52,"add"),R(),x(53,"span",33),N(54,"Add Category"),R()()(),wt(55,eZ,1,1,null,null,$0),ye(57,nZ,9,1,"div",34),Rt(58,"div",35),R()(),x(59,"button",36),Q("click",function(){return r.toggleMobileCart()}),x(60,"span",19),N(61,"shopping_cart"),R(),ye(62,rZ,2,1,"span",37),R()(),ye(63,lZ,35,8,"div",38),ye(64,hZ,32,6,"div",38),R()),t&2&&(V(14),_e(r.showSortDropdown?14:-1),V(7),_e(r.error()?21:-1),V(6),Ge("value",r.searchQuery()),V(3),sn("ngModel",r.newItemName),V(10),ft(r.selectedCategory()==="all"?"flex h-9 shrink-0 items-center justify-center gap-x-2 rounded-lg bg-slate-900 dark:bg-white px-4 hover:opacity-90 transition-opacity":"flex h-9 shrink-0 items-center justify-center gap-x-2 rounded-lg bg-white dark:bg-surface-dark border border-slate-200 dark:border-border-dark px-4 hover:bg-slate-50 dark:hover:bg-border-dark transition-colors"),V(),ft(r.selectedCategory()==="all"?"text-white dark:text-slate-900 text-sm font-bold":"text-slate-600 dark:text-slate-300 text-sm font-medium"),V(2),ft(r.selectedCategory()==="cart"?"flex h-9 shrink-0 items-center justify-center gap-x-2 rounded-lg bg-slate-900 dark:bg-white px-4 hover:opacity-90 transition-opacity":"flex h-9 shrink-0 items-center justify-center gap-x-2 rounded-lg bg-white dark:bg-surface-dark border border-slate-200 dark:border-border-dark px-4 hover:bg-slate-50 dark:hover:bg-border-dark transition-colors"),V(3),ft(r.selectedCategory()==="cart"?"text-white dark:text-slate-900 text-sm font-bold":"text-slate-600 dark:text-slate-300 text-sm font-medium"),V(2),Et(r.categories()),V(7),Et(r.categories()),V(2),_e(r.groceries().length===0&&!r.isLoading()?57:-1),V(5),_e(r.getTotalCartItems()>0?62:-1),V(),_e(r.showAddModal?63:-1),V(),_e(r.showCategoryModal?64:-1))},dependencies:[br,ga,xd,Rd,Hi,pa,fa,$s],styles:["#groceries-page[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex:1;height:100%;overflow:hidden}#groceries-main-content[_ngcontent-%COMP%]{flex:1;overflow-y:auto;overflow-x:hidden}#groceries-main-content[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}#groceries-main-content[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:transparent}#groceries-main-content[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:#9ca3af66;border-radius:4px}#groceries-main-content[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background-color:#9ca3af99}#shopping-list-sidebar[_ngcontent-%COMP%]{max-height:100%;height:100%}#cart-items-container[_ngcontent-%COMP%]{flex:1 1 0%;min-height:0;max-height:calc(100vh - 280px);overflow-y:auto}#cart-items-container[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}#cart-items-container[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:transparent}#cart-items-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:#9ca3af80;border-radius:3px}#cart-items-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background-color:#9ca3afb3}"]})};var Pd=class n{firestore=j(Bs);usersCollection=Bp(this.firestore,"users");users=Ae([]);currentUser=Ae(null);loading=Ae(!0);error=Ae(null);constructor(){this.subscribeToUsers(),this.restoreSession()}subscribeToUsers(){let e=R0(this.usersCollection,x0("name"));A0(e,t=>{let r=t.docs.map(i=>{let s=i.data();return ce(z({id:i.id},s),{lastActive:s.lastActive?.toDate?s.lastActive.toDate():s.lastActive,createdAt:s.createdAt?.toDate?s.createdAt.toDate():s.createdAt})});this.users.set(r),this.updateCurrentUserReference(r),this.loading.set(!1)},t=>{console.error("Error fetching users",t),this.error.set(t.message),this.loading.set(!1)})}restoreSession(){localStorage.getItem("currentUserId")&&this.users().length>0&&this.updateCurrentUserReference(this.users())}updateCurrentUserReference(e){let t=localStorage.getItem("currentUserId");if(t){let r=e.find(i=>i.id===t);r&&(this.currentUser.set(r),r.status!=="active"&&this.updateUser(r.id,{status:"active",lastActive:Cd()}))}}async login(e){localStorage.setItem("currentUserId",e.id),this.currentUser.set(e),await this.updateUser(e.id,{status:"active",lastActive:Cd()})}async logout(){let e=this.currentUser();e&&await this.updateUser(e.id,{status:"offline",lastActive:Cd()}),localStorage.removeItem("currentUserId"),this.currentUser.set(null)}async createUser(e){await D0(this.usersCollection,ce(z({},e),{status:e.status||"pending",lastActive:Cd(),createdAt:Cd()}))}async updateUser(e,t){await k0(Td(this.firestore,"users",e),t)}async deleteUser(e){await S0(Td(this.firestore,"users",e))}static \u0275fac=function(t){return new(t||n)};static \u0275prov=se({token:n,factory:n.\u0275fac,providedIn:"root"})};var Xj=[{value:"admin",label:"Admin",colorClass:"bg-primary/10 text-primary border-primary/20"},{value:"member",label:"Member",colorClass:"bg-surface-dark text-slate-300 border-border-dark"},{value:"guest",label:"Guest",colorClass:"bg-surface-dark text-text-muted border-border-dark"}];var Zj=(n,e)=>e.value,fZ=(n,e)=>e.id;function pZ(n,e){if(n&1&&(x(0,"option",22),N(1),R()),n&2){let t=e.$implicit;Ge("value",t.value),V(),Re(t.label)}}function gZ(n,e){if(n&1&&(x(0,"div",43),N(1),R()),n&2){let t=B().$implicit;V(),Re(t.name.charAt(0).toUpperCase())}}function mZ(n,e){if(n&1){let t=Oe();x(0,"tr",36)(1,"td",41)(2,"div",5)(3,"div",42),ye(4,gZ,2,1,"div",43),R(),x(5,"div",44)(6,"span",45),N(7),R()()()(),x(8,"td",41)(9,"span",46),N(10),R()(),x(11,"td",41)(12,"div",47),Rt(13,"div",48),x(14,"span",49),N(15),R()()(),x(16,"td",41)(17,"span",50),N(18),zh(19,"date"),R()(),x(20,"td",51)(21,"div",52)(22,"button",53),Q("click",function(){let i=X(t).$implicit,s=B();return Z(s.openLoginModal(i))}),x(23,"span",9),N(24,"login"),R()(),x(25,"button",54),Q("click",function(){let i=X(t).$implicit,s=B();return Z(s.openEditModal(i))}),x(26,"span",9),N(27,"edit"),R()(),x(28,"button",55),Q("click",function(){let i=X(t).$implicit,s=B();return Z(s.deleteUser(i))}),x(29,"span",9),N(30,"delete"),R()()()()()}if(n&2){let t,r,i,s=e.$implicit,o=B();V(3),uy("background-image",s.avatarUrl?"url("+s.avatarUrl+")":""),V(),_e(s.avatarUrl?-1:4),V(3),Re(s.name),V(2),ft(o.getRoleClass(s.role)),V(),lt(" ",o.getRoleLabel(s.role)," "),V(3),ft(o.getStatusColor(s.status)),V(),xn("text-primary",s.status==="pending")("text-white",s.status!=="pending"),V(),lt(" ",o.getStatusLabel(s.status)," "),V(3),lt(" ",s.lastActive?Gh(19,19,s.lastActive,"short"):"Never"," "),V(4),Ge("title",((t=o.currentUser())==null?null:t.id)===s.id?"Currently Logged In":"Switch to User")("disabled",((r=o.currentUser())==null?null:r.id)===s.id),V(),xn("text-primary",((i=o.currentUser())==null?null:i.id)===s.id)}}function yZ(n,e){n&1&&(x(0,"tr")(1,"td",56)(2,"span",57),N(3,"person_off"),R(),x(4,"p"),N(5,"No users found matching your criteria."),R()()())}function _Z(n,e){if(n&1&&Rt(0,"img",65),n&2){let t=B(2);Ge("src",t.formAvatarUrl,Qn)}}function vZ(n,e){n&1&&(x(0,"span",66),N(1,"person"),R())}function wZ(n,e){if(n&1){let t=Oe();x(0,"button",80),Q("click",function(i){X(t);let s=B(2);return Z(s.removeAvatar(i))}),x(1,"span",81),N(2,"close"),R()()}}function EZ(n,e){if(n&1&&(x(0,"option",22),N(1),R()),n&2){let t=e.$implicit;Ge("value",t.value),V(),Re(t.label)}}function IZ(n,e){if(n&1){let t=Oe();x(0,"div")(1,"label",73),N(2,"Status"),R(),x(3,"select",76),on("ngModelChange",function(i){X(t);let s=B(2);return dn(s.formStatus,i)||(s.formStatus=i),Z(i)}),x(4,"option",24),N(5,"Active"),R(),x(6,"option",26),N(7,"Inactive"),R(),x(8,"option",25),N(9,"Pending"),R(),x(10,"option",28),N(11,"Away"),R(),x(12,"option",27),N(13,"Offline"),R()()()}if(n&2){let t=B(2);V(3),sn("ngModel",t.formStatus)}}function bZ(n,e){if(n&1){let t=Oe();x(0,"div",40)(1,"div",58)(2,"div",59)(3,"h3",60),N(4),R(),x(5,"button",61),Q("click",function(){X(t);let i=B();return Z(i.closeModal())}),x(6,"span",7),N(7,"close"),R()()(),x(8,"div",62)(9,"div",63)(10,"div",64),Q("click",function(){X(t);let i=HI(23);return Z(i.click())}),ye(11,_Z,1,1,"img",65)(12,vZ,2,0,"span",66),x(13,"div",67)(14,"span",68),N(15,"upload"),R()(),ye(16,wZ,3,0,"button",69),R(),x(17,"div",44)(18,"span",70),N(19,"Profile Photo"),R(),x(20,"span",71),N(21,"Click to upload"),R()(),x(22,"input",72,0),Q("change",function(i){X(t);let s=B();return Z(s.onAvatarSelected(i))}),R()(),x(24,"div")(25,"label",73),N(26,"Full Name"),R(),x(27,"input",74),on("ngModelChange",function(i){X(t);let s=B();return dn(s.formName,i)||(s.formName=i),Z(i)}),R()(),x(28,"div")(29,"label",73),N(30),R(),x(31,"input",75),on("ngModelChange",function(i){X(t);let s=B();return dn(s.formPassword,i)||(s.formPassword=i),Z(i)}),R()(),x(32,"div")(33,"label",73),N(34,"Role"),R(),x(35,"select",76),on("ngModelChange",function(i){X(t);let s=B();return dn(s.formRole,i)||(s.formRole=i),Z(i)}),wt(36,EZ,2,2,"option",22,Zj),R()(),ye(38,IZ,14,1,"div"),R(),x(39,"div",77)(40,"button",78),Q("click",function(){X(t);let i=B();return Z(i.closeModal())}),N(41,"Cancel"),R(),x(42,"button",79),Q("click",function(){X(t);let i=B();return Z(i.saveUser())}),N(43,"Save User"),R()()()()}if(n&2){let t=B();V(4),Re(t.editingUser?"Edit User":"New User"),V(7),_e(t.formAvatarUrl?11:12),V(5),_e(t.formAvatarUrl?16:-1),V(11),sn("ngModel",t.formName),V(3),Re(t.editingUser?"New Password (Optional)":"Password"),V(),sn("ngModel",t.formPassword),Ge("placeholder",t.editingUser?"Leave blank to keep current":"Enter password"),V(4),sn("ngModel",t.formRole),V(),Et(t.userRoles),V(2),_e(t.editingUser?38:-1)}}function CZ(n,e){if(n&1&&(x(0,"p",86),N(1),R()),n&2){let t=B(2);V(),Re(t.loginError)}}function TZ(n,e){if(n&1){let t=Oe();x(0,"div",40)(1,"div",82)(2,"div",59)(3,"h3",60),N(4),R(),x(5,"button",61),Q("click",function(){X(t);let i=B();return Z(i.closeLoginModal())}),x(6,"span",7),N(7,"close"),R()()(),x(8,"div",62)(9,"div",83)(10,"div",84),Rt(11,"img",65),R()(),x(12,"div")(13,"label",73),N(14,"Password"),R(),x(15,"input",85),on("ngModelChange",function(i){X(t);let s=B();return dn(s.loginPasswordInput,i)||(s.loginPasswordInput=i),Z(i)}),Q("keyup.enter",function(){X(t);let i=B();return Z(i.attemptLogin())}),R(),ye(16,CZ,2,1,"p",86),R()(),x(17,"div",77)(18,"button",78),Q("click",function(){X(t);let i=B();return Z(i.closeLoginModal())}),N(19,"Cancel"),R(),x(20,"button",79),Q("click",function(){X(t);let i=B();return Z(i.attemptLogin())}),N(21,"Login"),R()()()()}if(n&2){let t=B();V(4),lt("Login as ",t.loginTargetUser==null?null:t.loginTargetUser.name),V(7),Ge("src",(t.loginTargetUser==null?null:t.loginTargetUser.avatarUrl)||"https://ui-avatars.com/api/?name="+(t.loginTargetUser==null?null:t.loginTargetUser.name)+"&background=random",Qn),V(4),sn("ngModel",t.loginPasswordInput),V(),_e(t.loginError?16:-1)}}var q0=class n{userService=j(Pd);dialogService=j(Rr);imageService=j(Md);users=this.userService.users;currentUser=this.userService.currentUser;userRoles=Xj;showLoginModal=!1;loginTargetUser=null;loginPasswordInput="";loginError="";openLoginModal(e){this.loginTargetUser=e,this.loginPasswordInput="",this.loginError="",this.showLoginModal=!0}closeLoginModal(){this.showLoginModal=!1}async attemptLogin(){if(!this.loginTargetUser)return;if((this.loginTargetUser.password||"")!==this.loginPasswordInput){this.loginError="Incorrect password";return}try{await this.userService.login(this.loginTargetUser)}finally{this.closeLoginModal()}}searchQuery=Ae("");roleFilter=Ae("All");statusFilter=Ae("All");filteredUsers=nt(()=>{let e=this.users(),t=this.searchQuery().toLowerCase(),r=this.roleFilter(),i=this.statusFilter();return t&&(e=e.filter(s=>s.name.toLowerCase().includes(t))),r!=="All"&&(e=e.filter(s=>s.role===r)),i!=="All"&&(e=e.filter(s=>s.status===i)),e});showModal=!1;editingUser=null;formName="";formPassword="";formRole="member";formStatus="active";formAvatarUrl="";openAddModal(){this.editingUser=null,this.resetForm(),this.showModal=!0}openEditModal(e){this.editingUser=e,this.formName=e.name,this.formRole=e.role,this.formStatus=e.status,this.formAvatarUrl=e.avatarUrl||"",this.showModal=!0}closeModal(){this.showModal=!1}resetForm(){this.formName="",this.formPassword="",this.formRole="member",this.formStatus="active",this.formAvatarUrl=""}removeAvatar(e){e.stopPropagation(),this.formAvatarUrl=""}async saveUser(){if(this.formName.trim())try{if(this.editingUser){let e={name:this.formName,role:this.formRole,status:this.formStatus,avatarUrl:this.formAvatarUrl};this.formPassword&&(e.password=this.formPassword),await this.userService.updateUser(this.editingUser.id,e)}else await this.userService.createUser({name:this.formName,password:this.formPassword,role:this.formRole,status:"pending",avatarUrl:this.formAvatarUrl||`https://ui-avatars.com/api/?name=${this.formName}&background=random`})}finally{this.closeModal()}}async deleteUser(e){await this.dialogService.confirm(`Delete user ${e.name}?`,"Delete User")&&await this.userService.deleteUser(e.id)}getRoleLabel(e){return this.userRoles.find(t=>t.value===e)?.label||e}getRoleClass(e){return this.userRoles.find(t=>t.value===e)?.colorClass||"bg-gray-100 text-gray-800"}getStatusColor(e){switch(e){case"active":return"bg-emerald-500 shadow-[0_0_8px_rgba(16,185,129,0.5)]";case"away":return"bg-amber-500 shadow-[0_0_8px_rgba(245,158,11,0.5)]";case"offline":return"bg-gray-500";case"pending":return"border-2 border-primary/50 border-t-transparent animate-spin";default:return"bg-gray-400"}}getStatusLabel(e){return e==="pending"?"Invited":e.charAt(0).toUpperCase()+e.slice(1)}async onAvatarSelected(e){let t=e.target.files?.[0];t&&(this.formAvatarUrl=await this.imageService.compressImage(t))}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=jn({type:n,selectors:[["app-users"]],decls:78,vars:7,consts:[["fileInput",""],[1,"flex-1","flex","flex-col","h-full","overflow-hidden","bg-background-light","dark:bg-background-dark","relative"],[1,"flex","items-center","justify-between","px-8","py-5","border-b","border-border-dark","bg-background-dark","sticky","top-0","z-10"],[1,"flex","flex-col","gap-1"],[1,"text-white","text-2xl","font-bold","leading-tight","tracking-tight"],[1,"flex","items-center","gap-4"],[1,"size-10","rounded-full","bg-surface-dark","hover:bg-border-dark","flex","items-center","justify-center","text-text-muted","hover:text-white","transition-colors"],[1,"material-symbols-outlined"],[1,"bg-primary","hover:bg-primary-hover","text-white","h-10","px-5","rounded-lg","text-sm","font-bold","flex","items-center","gap-2","transition-all","shadow-lg","shadow-primary/20",3,"click"],[1,"material-symbols-outlined","text-[20px]"],[1,"flex-1","overflow-y-auto","p-8"],[1,"max-w-[1200px]","mx-auto","flex","flex-col","gap-6"],[1,"text-text-muted","text-base","max-w-2xl"],[1,"flex","flex-col","sm:flex-row","gap-4","justify-between","items-start","sm:items-center","bg-surface-dark","p-4","rounded-xl","border","border-border-dark"],[1,"relative","w-full","sm:max-w-md","group"],[1,"absolute","inset-y-0","left-0","pl-3","flex","items-center","pointer-events-none"],[1,"material-symbols-outlined","text-text-muted","group-focus-within:text-primary","transition-colors"],["placeholder","Search users by name...","type","text",1,"block","w-full","pl-10","pr-3","py-2.5","border","border-border-dark","rounded-lg","leading-5","bg-background-dark","text-white","placeholder-text-muted","focus:outline-none","focus:ring-1","focus:ring-primary","focus:border-primary","sm:text-sm","transition-all",3,"ngModelChange","ngModel"],[1,"flex","gap-3","w-full","sm:w-auto"],[1,"relative"],[1,"appearance-none","bg-background-dark","border","border-border-dark","text-white","text-sm","rounded-lg","focus:ring-primary","focus:border-primary","block","w-full","pl-3","pr-10","py-2.5","cursor-pointer","hover:border-slate-600","transition-colors",3,"ngModelChange","ngModel"],["value","All"],[3,"value"],[1,"pointer-events-none","absolute","inset-y-0","right-0","flex","items-center","px-2","text-text-muted"],["value","active"],["value","pending"],["value","inactive"],["value","offline"],["value","away"],[1,"bg-surface-dark","rounded-xl","border","border-border-dark","overflow-hidden","shadow-sm"],[1,"overflow-x-auto"],[1,"w-full","text-left","border-collapse"],[1,"border-b","border-border-dark","bg-surface-dark"],[1,"py-4","px-6","text-xs","font-semibold","uppercase","tracking-wider","text-text-muted"],[1,"py-4","px-6","text-xs","font-semibold","uppercase","tracking-wider","text-text-muted","text-right"],[1,"divide-y","divide-border-dark"],[1,"hover:bg-slate-800","transition-colors","group"],[1,"px-6","py-4","border-t","border-border-dark","bg-surface-dark","flex","items-center","justify-between"],[1,"text-sm","text-text-muted"],[1,"font-medium","text-white"],[1,"fixed","inset-0","z-50","flex","items-center","justify-center","p-4","bg-black/50","backdrop-blur-sm","animate-in","fade-in","duration-200"],[1,"py-4","px-6","whitespace-nowrap"],[1,"bg-center","bg-no-repeat","bg-cover","rounded-full","size-10","border","border-border-dark","bg-surface-dark","relative","overflow-hidden"],[1,"absolute","inset-0","flex","items-center","justify-center","text-xs","font-bold","text-text-muted","bg-border-dark"],[1,"flex","flex-col"],[1,"text-white","text-sm","font-semibold"],[1,"inline-flex","items-center","px-2.5","py-0.5","rounded-full","text-xs","font-medium","border"],[1,"flex","items-center","gap-2"],[1,"h-2","w-2","rounded-full"],[1,"text-sm"],[1,"text-text-muted","text-sm"],[1,"py-4","px-6","whitespace-nowrap","text-right"],[1,"flex","items-center","justify-end","gap-2","opacity-0","group-hover:opacity-100","transition-opacity"],[1,"p-2","text-text-muted","hover:text-white","hover:bg-border-dark","rounded-lg","transition-colors",3,"click","title","disabled"],["title","Edit User",1,"p-2","text-text-muted","hover:text-white","hover:bg-border-dark","rounded-lg","transition-colors",3,"click"],["title","Delete User",1,"p-2","text-text-muted","hover:text-red-400","hover:bg-border-dark","rounded-lg","transition-colors",3,"click"],["colspan","5",1,"py-12","text-center","text-text-muted"],[1,"material-symbols-outlined","text-4xl","mb-2","opacity-50"],[1,"bg-surface-dark","border","border-border-dark","w-full","max-w-md","rounded-xl","shadow-2xl","overflow-hidden","animate-in","zoom-in-95","duration-200"],[1,"p-6","border-b","border-border-dark","flex","justify-between","items-center","bg-background-dark"],[1,"font-bold","text-lg","text-white"],[1,"p-1","rounded-full","hover:bg-border-dark","text-text-muted","hover:text-white","transition-colors",3,"click"],[1,"p-6","space-y-4"],[1,"flex","items-center","gap-4","pb-2","border-b","border-border-dark"],[1,"relative","size-14","rounded-full","bg-background-dark","border","border-border-dark","overflow-hidden","flex","items-center","justify-center","group","cursor-pointer",3,"click"],[1,"w-full","h-full","object-cover",3,"src"],[1,"material-symbols-outlined","text-text-muted","text-2xl"],[1,"absolute","inset-0","bg-black/50","flex","items-center","justify-center","opacity-0","group-hover:opacity-100","transition-opacity"],[1,"material-symbols-outlined","text-white","text-sm"],["title","Remove Photo",1,"absolute","top-0","right-0","bg-red-500","rounded-full","p-0.5","text-white","z-20","hover:bg-red-600","transition-colors","shadow-sm","flex","items-center","justify-center","transform","translate-x-1/4","-translate-y-1/4"],[1,"text-xs","font-semibold","uppercase","text-text-muted"],[1,"text-xs","text-text-muted"],["type","file","accept","image/*",1,"hidden",3,"change"],[1,"block","text-xs","font-semibold","uppercase","text-text-muted","mb-1.5"],["type","text","placeholder","e.g. Alex Johnson",1,"w-full","bg-background-dark","border","border-border-dark","rounded-lg","px-4","py-2.5","text-white","focus:outline-none","focus:border-primary","focus:ring-1","focus:ring-primary","transition-all",3,"ngModelChange","ngModel"],["type","password",1,"w-full","bg-background-dark","border","border-border-dark","rounded-lg","px-4","py-2.5","text-white","focus:outline-none","focus:border-primary","focus:ring-1","focus:ring-primary","transition-all",3,"ngModelChange","ngModel","placeholder"],[1,"w-full","bg-background-dark","border","border-border-dark","rounded-lg","px-4","py-2.5","text-white","focus:outline-none","focus:border-primary","focus:ring-1","focus:ring-primary","transition-all","appearance-none",3,"ngModelChange","ngModel"],[1,"p-4","bg-background-dark","border-t","border-border-dark","flex","justify-end","gap-3"],[1,"px-5","py-2.5","rounded-lg","border","border-border-dark","text-text-muted","font-bold","text-sm","hover:text-white","hover:border-white","transition-colors",3,"click"],[1,"px-5","py-2.5","rounded-lg","bg-primary","text-white","font-bold","text-sm","hover:bg-primary-hover","transition-colors","shadow-lg","shadow-primary/20",3,"click"],["title","Remove Photo",1,"absolute","top-0","right-0","bg-red-500","rounded-full","p-0.5","text-white","z-20","hover:bg-red-600","transition-colors","shadow-sm","flex","items-center","justify-center","transform","translate-x-1/4","-translate-y-1/4",3,"click"],[1,"material-symbols-outlined","text-[10px]","font-bold"],[1,"bg-surface-dark","border","border-border-dark","w-full","max-w-sm","rounded-xl","shadow-2xl","overflow-hidden","animate-in","zoom-in-95","duration-200"],[1,"flex","justify-center","mb-4"],[1,"relative","size-20","rounded-full","border-2","border-border-dark","overflow-hidden"],["type","password","placeholder","Enter password","autofocus","",1,"w-full","bg-background-dark","border","border-border-dark","rounded-lg","px-4","py-2.5","text-white","focus:outline-none","focus:border-primary","focus:ring-1","focus:ring-primary","transition-all",3,"ngModelChange","keyup.enter","ngModel"],[1,"text-red-400","text-xs","mt-1"]],template:function(t,r){t&1&&(x(0,"div",1)(1,"header",2)(2,"div",3)(3,"h2",4),N(4,"User Management"),R()(),x(5,"div",5)(6,"button",6)(7,"span",7),N(8,"notifications"),R()(),x(9,"button",8),Q("click",function(){return r.openAddModal()}),x(10,"span",9),N(11,"add"),R(),x(12,"span"),N(13,"Add New User"),R()()()(),x(14,"div",10)(15,"div",11)(16,"p",12),N(17," Manage access and roles for your household members. You can invite new family members, assign tasks, and control permissions. "),R(),x(18,"div",13)(19,"div",14)(20,"div",15)(21,"span",16),N(22,"search"),R()(),x(23,"input",17),Q("ngModelChange",function(s){return r.searchQuery.set(s)}),R()(),x(24,"div",18)(25,"div",19)(26,"select",20),Q("ngModelChange",function(s){return r.roleFilter.set(s)}),x(27,"option",21),N(28,"All Roles"),R(),wt(29,pZ,2,2,"option",22,Zj),R(),x(31,"div",23)(32,"span",9),N(33,"expand_more"),R()()(),x(34,"div",19)(35,"select",20),Q("ngModelChange",function(s){return r.statusFilter.set(s)}),x(36,"option",21),N(37,"All Status"),R(),x(38,"option",24),N(39,"Active"),R(),x(40,"option",25),N(41,"Pending"),R(),x(42,"option",26),N(43,"Inactive"),R(),x(44,"option",27),N(45,"Offline"),R(),x(46,"option",28),N(47,"Away"),R()(),x(48,"div",23)(49,"span",9),N(50,"expand_more"),R()()()()(),x(51,"div",29)(52,"div",30)(53,"table",31)(54,"thead")(55,"tr",32)(56,"th",33),N(57,"User"),R(),x(58,"th",33),N(59,"Role"),R(),x(60,"th",33),N(61,"Status"),R(),x(62,"th",33),N(63,"Last Active"),R(),x(64,"th",34),N(65,"Actions"),R()()(),x(66,"tbody",35),wt(67,mZ,31,22,"tr",36,fZ,!1,yZ,6,0,"tr"),R()()(),x(70,"div",37)(71,"p",38),N(72,"Showing "),x(73,"span",39),N(74),R(),N(75," users"),R()()()()(),ye(76,bZ,44,9,"div",40),ye(77,TZ,22,4,"div",40),R()),t&2&&(V(23),Ge("ngModel",r.searchQuery()),V(3),Ge("ngModel",r.roleFilter()),V(3),Et(r.userRoles),V(6),Ge("ngModel",r.statusFilter()),V(32),Et(r.filteredUsers()),V(7),Re(r.filteredUsers().length),V(2),_e(r.showModal?76:-1),V(),_e(r.showLoginModal?77:-1))},dependencies:[br,ga,xd,Rd,Hi,pa,fa,$s,ef],encapsulation:2})};var e4=[{path:"",redirectTo:"overview",pathMatch:"full"},{path:"overview",component:j0},{path:"groceries",component:H0},{path:"users",component:q0}];var t4={providers:[ME(),xb(e4),aO(()=>cO(Dd.firebase)),Sj(()=>Aj()),N2(()=>M2())]};function DZ(n,e){if(n&1&&(Ti(0,"h3",4),N(1),Ao()),n&2){let t=B();V(),Re(t.title)}}function SZ(n,e){if(n&1){let t=Oe();Ti(0,"button",9),nu("click",function(){X(t);let i=B(2);return Z(i.cancel())}),N(1),Ao()}if(n&2){let t=B();V(),lt(" ",t.cancelText||"Cancel"," ")}}function AZ(n,e){if(n&1){let t=Oe();Ti(0,"div",0)(1,"div",1),nu("click",function(){let i=X(t),s=B();return Z(i.type==="confirm"?s.cancel():s.confirm())}),Ao(),Ti(2,"div",2)(3,"div",3),ye(4,DZ,2,1,"h3",4),Ti(5,"p",5),N(6),Ao()(),Ti(7,"div",6),ye(8,SZ,2,1,"button",7),Ti(9,"button",8),nu("click",function(){X(t);let i=B();return Z(i.confirm())}),N(10),Ao()()()()}if(n&2){let t=e;V(4),_e(t.title?4:-1),V(2),Re(t.message),V(2),_e(t.type==="confirm"?8:-1),V(),xn("bg-rose-500",t.type==="error")("bg-primary",t.type!=="error"),V(),lt(" ",t.confirmText||"OK"," ")}}var z0=class n{dialogService=j(Rr);confirm(){this.dialogService.close(!0)}cancel(){this.dialogService.close(!1)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=jn({type:n,selectors:[["app-dialog"]],decls:1,vars:1,consts:[[1,"fixed","inset-0","z-[100]","flex","items-center","justify-center","p-4","bg-black/50","backdrop-blur-sm","animate-in","fade-in","duration-200"],[1,"absolute","inset-0",3,"click"],[1,"relative","bg-white","dark:bg-surface-dark","w-full","max-w-sm","rounded-2xl","shadow-xl","overflow-hidden","animate-in","zoom-in-95","duration-200","border","border-slate-200","dark:border-border-dark"],[1,"p-6"],[1,"text-xl","font-bold","text-slate-900","dark:text-white","mb-2"],[1,"text-slate-600","dark:text-slate-300","leading-relaxed"],[1,"p-4","bg-slate-50","dark:bg-black/20","flex","justify-end","gap-3"],[1,"px-4","py-2","rounded-lg","text-slate-600","dark:text-slate-400","font-bold","hover:bg-slate-200","dark:hover:bg-border-dark","transition-colors"],[1,"px-5","py-2","rounded-lg","text-slate-900","font-bold","hover:brightness-110","transition-all","shadow-lg","active:scale-95",3,"click"],[1,"px-4","py-2","rounded-lg","text-slate-600","dark:text-slate-400","font-bold","hover:bg-slate-200","dark:hover:bg-border-dark","transition-colors",3,"click"]],template:function(t,r){if(t&1&&ye(0,AZ,11,8,"div",0),t&2){let i;_e((i=r.dialogService.dialog())?0:-1,i)}},dependencies:[br],encapsulation:2})};var xZ=(n,e)=>e.id;function RZ(n,e){n&1&&(x(0,"div",42)(1,"span",44),N(2,"lock"),R()())}function kZ(n,e){if(n&1){let t=Oe();x(0,"button",39),Q("click",function(){let i=X(t).$implicit,s=B(3);return Z(s.selectUser(i))}),x(1,"div",40),Rt(2,"img",41),ye(3,RZ,3,0,"div",42),R(),x(4,"span",43),N(5),R()()}if(n&2){let t=e.$implicit;V(2),Ge("src",t.avatarUrl||"https://ui-avatars.com/api/?name="+t.name+"&background=random",Qn),V(),_e(t.password?3:-1),V(2),Re(t.name)}}function NZ(n,e){if(n&1&&(x(0,"div",36),wt(1,kZ,6,3,"button",38,xZ),R()),n&2){let t=B(2);V(),Et(t.users())}}function MZ(n,e){if(n&1&&(x(0,"p",50),N(1),R()),n&2){let t=B(3);V(),Re(t.loginError())}}function PZ(n,e){if(n&1){let t=Oe();x(0,"div",37)(1,"div",45)(2,"div",46),Rt(3,"img",41),R(),x(4,"h3",47),N(5),R()(),x(6,"div",48)(7,"div")(8,"input",49),Q("input",function(i){X(t);let s=B(2);return Z(s.passwordInput.set(i.target.value))})("keyup.enter",function(){X(t);let i=B(2);return Z(i.verifyLogin())}),R(),ye(9,MZ,2,1,"p",50),R(),x(10,"button",51),Q("click",function(){X(t);let i=B(2);return Z(i.verifyLogin())}),N(11,"Login"),R(),x(12,"button",52),Q("click",function(){X(t);let i=B(2);return Z(i.cancelPassword())}),N(13,"Back"),R()()()}if(n&2){let t,r,i=B(2);V(3),Ge("src",((t=i.selectedUser())==null?null:t.avatarUrl)||"https://ui-avatars.com/api/?name="+((t=i.selectedUser())==null?null:t.name)+"&background=random",Qn),V(2),Re((r=i.selectedUser())==null?null:r.name),V(3),Ge("value",i.passwordInput()),V(),_e(i.loginError()?9:-1)}}function OZ(n,e){if(n&1&&(x(0,"div",31)(1,"div",32)(2,"div",33)(3,"h1",34),N(4,"Welcome Back"),R(),x(5,"p",35),N(6,"Who is using HomeNeeds?"),R()(),ye(7,NZ,3,0,"div",36)(8,PZ,14,4,"div",37),R()()),n&2){let t=B();V(7),_e(t.loginStep()==="select"?7:8)}}var G0=class n{title=Ae("frontend");overviewService=j(qi);userService=j(Pd);users=this.userService.users;currentUser=this.userService.currentUser;loading=this.userService.loading;loginStep=Ae("select");selectedUser=Ae(null);passwordInput=Ae("");loginError=Ae("");pendingItemsCount=nt(()=>this.overviewService.tasks().filter(e=>!e.isCompleted).length);selectUser(e){e.password?(this.selectedUser.set(e),this.loginStep.set("password"),this.passwordInput.set(""),this.loginError.set("")):this.userService.login(e)}cancelPassword(){this.loginStep.set("select"),this.selectedUser.set(null)}async verifyLogin(){let e=this.selectedUser();e&&(e.password===this.passwordInput()?(await this.userService.login(e),this.loginStep.set("select"),this.selectedUser.set(null)):this.loginError.set("Incorrect password"))}logout(){this.userService.logout()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=jn({type:n,selectors:[["app-root"]],hostAttrs:[1,"w-full","h-screen","flex","overflow-hidden"],decls:55,vars:5,consts:[["id","app-sidebar",1,"w-80","h-screen","flex-shrink-0","border-r","border-slate-200","dark:border-border-dark","bg-white","dark:bg-background-dark","flex","flex-col","justify-between","p-6"],[1,"flex","flex-col","mb-8"],[1,"flex","items-center","gap-2","mb-1"],[1,"material-symbols-outlined","text-primary",2,"font-size","32px"],[1,"text-2xl","font-extrabold","tracking-tight"],[1,"text-sm","text-slate-500","dark:text-text-muted"],["id","main-nav",1,"flex","flex-col","gap-2"],["id","nav-overview","routerLink","/overview","routerLinkActive","bg-primary/10 text-primary-hover dark:text-primary",1,"flex","items-center","gap-3","px-4","py-3","rounded-full","hover:bg-slate-100","dark:hover:bg-surface-dark","text-slate-600","dark:text-text-muted","transition-colors","group"],[1,"material-symbols-outlined","filled"],[1,"font-bold","text-sm"],["id","nav-groceries","routerLink","/groceries","routerLinkActive","bg-primary/10 text-primary-hover dark:text-primary",1,"flex","items-center","gap-3","px-4","py-3","rounded-full","hover:bg-slate-100","dark:hover:bg-surface-dark","text-slate-600","dark:text-text-muted","transition-colors","group"],[1,"material-symbols-outlined","group-hover:text-slate-900","dark:group-hover:text-white","transition-colors"],[1,"font-medium","text-sm","group-hover:text-slate-900","dark:group-hover:text-white","transition-colors"],["id","nav-users","routerLink","/users","routerLinkActive","bg-primary/10 text-primary-hover dark:text-primary",1,"flex","items-center","gap-3","px-4","py-3","rounded-full","hover:bg-slate-100","dark:hover:bg-surface-dark","text-slate-600","dark:text-text-muted","transition-colors","group"],["id","nav-logout",1,"flex","w-full","items-center","gap-3","px-4","py-3","rounded-full","hover:bg-slate-100","dark:hover:bg-surface-dark","text-slate-600","dark:text-text-muted","transition-colors","group","text-left","mt-auto",3,"click"],[1,"material-symbols-outlined","group-hover:text-red-500","dark:group-hover:text-red-400","transition-colors"],[1,"font-medium","text-sm","group-hover:text-red-500","dark:group-hover:text-red-400","transition-colors"],[1,"flex","flex-col","gap-4","mt-8"],["id","stats-card",1,"p-5","rounded-2xl","bg-surface-dark/40","border","border-border-dark","backdrop-blur-sm"],[1,"flex","justify-between","items-start","mb-2"],[1,"material-symbols-outlined","text-text-muted"],[1,"text-xs","font-bold","text-primary","bg-primary/10","px-2","py-1","rounded-full"],[1,"text-3xl","font-black","text-white","leading-tight","mb-1"],[1,"text-xs","text-text-muted","font-medium"],["id","user-profile",1,"flex","items-center","gap-3","p-4","rounded-full","bg-surface-dark","cursor-pointer","hover:bg-border-dark","transition-colors"],["alt","User avatar",1,"w-8","h-8","rounded-full","object-cover",3,"src"],[1,"flex","flex-col"],[1,"text-sm","font-bold","text-white","leading-none"],[1,"text-[10px]","text-text-muted","capitalize"],[1,"material-symbols-outlined","text-text-muted","ml-auto","text-sm"],[1,"flex-1","h-screen","flex","flex-col","overflow-hidden"],[1,"fixed","inset-0","z-[100]","bg-[#111317]","flex","items-center","justify-center","p-4"],[1,"max-w-4xl","w-full","flex","flex-col","items-center","gap-12","animate-in","fade-in","zoom-in","duration-300"],[1,"text-center","space-y-2"],[1,"text-4xl","font-bold","text-white","tracking-tight"],[1,"text-[#9ea7b7]","text-lg"],[1,"flex","flex-wrap","justify-center","gap-8"],[1,"bg-[#1a202e]","border","border-[#292e38]","rounded-2xl","p-8","w-full","max-w-sm","shadow-2xl","animate-in","zoom-in-95","duration-200"],[1,"group","flex","flex-col","items-center","gap-4","transition-transform","hover:scale-105","outline-none","focus:scale-105"],[1,"group","flex","flex-col","items-center","gap-4","transition-transform","hover:scale-105","outline-none","focus:scale-105",3,"click"],[1,"size-24","rounded-full","border-2","border-[#292e38]","group-hover:border-[#2060df]","overflow-hidden","transition-colors","relative"],[1,"w-full","h-full","object-cover",3,"src"],[1,"absolute","inset-0","bg-black/40","flex","items-center","justify-center","opacity-0","group-hover:opacity-100","transition-opacity"],[1,"text-lg","font-medium","text-[#9ea7b7]","group-hover:text-white","transition-colors"],[1,"material-symbols-outlined","text-white"],[1,"flex","flex-col","items-center","gap-4","mb-6"],[1,"size-16","rounded-full","border","border-[#292e38]","overflow-hidden"],[1,"text-white","font-bold","text-xl"],[1,"space-y-4"],["type","password","placeholder","Enter Password","autofocus","",1,"w-full","bg-[#111317]","border","border-[#292e38]","rounded-lg","px-4","py-3","text-white","focus:outline-none","focus:border-[#2060df]","focus:ring-1","focus:ring-[#2060df]","transition-all","text-center","placeholder-[#586173]",3,"input","keyup.enter","value"],[1,"text-red-400","text-xs","mt-2","text-center"],[1,"w-full","py-3","rounded-lg","bg-[#2060df]","text-white","font-bold","hover:bg-[#2060df]/90","transition-colors",3,"click"],[1,"w-full","py-3","rounded-lg","border","border-[#3b4250]","text-[#9ea7b7]","font-bold","hover:text-white","hover:border-white","transition-colors",3,"click"]],template:function(t,r){if(t&1&&(x(0,"aside",0)(1,"div")(2,"div",1)(3,"div",2)(4,"span",3),N(5,"checklist"),R(),x(6,"h1",4),N(7,"HomeNeeds"),R()(),x(8,"p",5),N(9,"Manage your home effortlessly"),R()(),x(10,"nav",6)(11,"a",7)(12,"span",8),N(13,"dashboard"),R(),x(14,"span",9),N(15,"Overview"),R()(),x(16,"a",10)(17,"span",11),N(18,"shopping_cart"),R(),x(19,"span",12),N(20,"Groceries"),R()(),x(21,"a",13)(22,"span",11),N(23,"group"),R(),x(24,"span",12),N(25,"Users"),R()(),x(26,"button",14),Q("click",function(){return r.logout()}),x(27,"span",15),N(28,"logout"),R(),x(29,"span",16),N(30,"Log Out"),R()()()(),x(31,"div",17)(32,"div",18)(33,"div",19)(34,"span",20),N(35,"pending_actions"),R(),x(36,"span",21),N(37,"Today"),R()(),x(38,"p",22),N(39),R(),x(40,"p",23),N(41,"Items Pending"),R()(),x(42,"div",24),Rt(43,"img",25),x(44,"div",26)(45,"span",27),N(46),R(),x(47,"span",28),N(48),R()(),x(49,"span",29),N(50,"expand_more"),R()()()(),x(51,"div",30),Rt(52,"router-outlet"),R(),Rt(53,"app-dialog"),ye(54,OZ,9,1,"div",31)),t&2){let i,s,o;V(39),Re(r.pendingItemsCount()),V(4),Ge("src",((i=r.currentUser())==null?null:i.avatarUrl)||"https://ui-avatars.com/api/?name=Guest&background=random",Qn),V(3),Re(((s=r.currentUser())==null?null:s.name)||"Guest"),V(2),Re(((o=r.currentUser())==null?null:o.role)||"Visitor"),V(6),_e(!r.currentUser()&&!r.loading()?54:-1)}},dependencies:[Ef,Zy,z0],encapsulation:2})};ob(G0,t4).catch(n=>console.error(n));
