var S3=Object.defineProperty,D3=Object.defineProperties;var A3=Object.getOwnPropertyDescriptors;var OR=Object.getOwnPropertySymbols;var x3=Object.prototype.hasOwnProperty,R3=Object.prototype.propertyIsEnumerable;var FR=(n,e,t)=>e in n?S3(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,B=(n,e)=>{for(var t in e||={})x3.call(e,t)&&FR(n,t,e[t]);if(OR)for(var t of OR(e))R3.call(e,t)&&FR(n,t,e[t]);return n},ie=(n,e)=>D3(n,A3(e));var On=null,fm=!1,dI=1,k3=null,qn=Symbol("SIGNAL");function ge(n){let e=On;return On=n,e}function gm(){return On}var lu={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function $h(n){if(fm)throw new Error("");if(On===null)return;On.consumerOnSignalRead(n);let e=On.producersTail;if(e!==void 0&&e.producer===n)return;let t,r=On.recomputing;if(r&&(t=e!==void 0?e.nextProducer:On.producers,t!==void 0&&t.producer===n)){On.producersTail=t,t.lastReadVersion=n.version;return}let i=n.consumersTail;if(i!==void 0&&i.consumer===On&&(!r||P3(i,On)))return;let s=du(On),o={producer:n,consumer:On,nextProducer:t,prevConsumer:i,lastReadVersion:n.version,nextConsumer:void 0};On.producersTail=o,e!==void 0?e.nextProducer=o:On.producers=o,s&&jR(n,o)}function VR(){dI++}function hI(n){if(!(du(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===dI)){if(!n.producerMustRecompute(n)&&!zh(n)){uI(n);return}n.producerRecomputeValue(n),uI(n)}}function fI(n){if(n.consumers===void 0)return;let e=fm;fm=!0;try{for(let t=n.consumers;t!==void 0;t=t.nextConsumer){let r=t.consumer;r.dirty||N3(r)}}finally{fm=e}}function pI(){return On?.consumerAllowSignalWrites!==!1}function N3(n){n.dirty=!0,fI(n),n.consumerMarkedDirty?.(n)}function uI(n){n.dirty=!1,n.lastCleanEpoch=dI}function uu(n){return n&&LR(n),ge(n)}function LR(n){n.producersTail=void 0,n.recomputing=!0}function Hh(n,e){ge(e),n&&UR(n)}function UR(n){n.recomputing=!1;let e=n.producersTail,t=e!==void 0?e.nextProducer:n.producers;if(t!==void 0){if(du(n))do t=gI(t);while(t!==void 0);e!==void 0?e.nextProducer=void 0:n.producers=void 0}}function zh(n){for(let e=n.producers;e!==void 0;e=e.nextProducer){let t=e.producer,r=e.lastReadVersion;if(r!==t.version||(hI(t),r!==t.version))return!0}return!1}function pc(n){if(du(n)){let e=n.producers;for(;e!==void 0;)e=gI(e)}n.producers=void 0,n.producersTail=void 0,n.consumers=void 0,n.consumersTail=void 0}function jR(n,e){let t=n.consumersTail,r=du(n);if(t!==void 0?(e.nextConsumer=t.nextConsumer,t.nextConsumer=e):(e.nextConsumer=void 0,n.consumers=e),e.prevConsumer=t,n.consumersTail=e,!r)for(let i=n.producers;i!==void 0;i=i.nextProducer)jR(i.producer,i)}function gI(n){let e=n.producer,t=n.nextProducer,r=n.nextConsumer,i=n.prevConsumer;if(n.nextConsumer=void 0,n.prevConsumer=void 0,r!==void 0?r.prevConsumer=i:e.consumersTail=i,i!==void 0)i.nextConsumer=r;else if(e.consumers=r,!du(e)){let s=e.producers;for(;s!==void 0;)s=gI(s)}return t}function du(n){return n.consumerIsAlwaysLive||n.consumers!==void 0}function mI(n){k3?.(n)}function P3(n,e){let t=e.producersTail;if(t!==void 0){let r=e.producers;do{if(r===n)return!0;if(r===t)break;r=r.nextProducer}while(r!==void 0)}return!1}function yI(n,e){return Object.is(n,e)}function mm(n,e){let t=Object.create(M3);t.computation=n,e!==void 0&&(t.equal=e);let r=()=>{if(hI(t),$h(t),t.value===pm)throw t.error;return t.value};return r[qn]=t,mI(t),r}var cI=Symbol("UNSET"),lI=Symbol("COMPUTING"),pm=Symbol("ERRORED"),M3=ie(B({},lu),{value:cI,dirty:!0,error:null,equal:yI,kind:"computed",producerMustRecompute(n){return n.value===cI||n.value===lI},producerRecomputeValue(n){if(n.value===lI)throw new Error("");let e=n.value;n.value=lI;let t=uu(n),r,i=!1;try{r=n.computation(),ge(null),i=e!==cI&&e!==pm&&r!==pm&&n.equal(e,r)}catch(s){r=pm,n.error=s}finally{Hh(n,t)}if(i){n.value=e;return}n.value=r,n.version++}});function O3(){throw new Error}var BR=O3;function $R(n){BR(n)}function _I(n){BR=n}var F3=null;function vI(n,e){let t=Object.create(ym);t.value=n,e!==void 0&&(t.equal=e);let r=()=>HR(t);return r[qn]=t,mI(t),[r,o=>qh(t,o),o=>zR(t,o)]}function HR(n){return $h(n),n.value}function qh(n,e){pI()||$R(n),n.equal(n.value,e)||(n.value=e,V3(n))}function zR(n,e){pI()||$R(n),qh(n,e(n.value))}var ym=ie(B({},lu),{equal:yI,value:void 0,kind:"signal"});function V3(n){n.version++,VR(),fI(n),F3?.(n)}function wI(n){let e=ge(null);try{return n()}finally{ge(e)}}var II=ie(B({},lu),{consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!0,dirty:!0,kind:"effect"});function bI(n){if(n.dirty=!1,n.version>0&&!zh(n))return;n.version++;let e=uu(n);try{n.cleanup(),n.fn()}finally{Hh(n,e)}}function ke(n){return typeof n=="function"}function hu(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var _m=hu(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function gc(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var mt=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let s of t)s.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(ke(r))try{r()}catch(s){e=s instanceof _m?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{qR(s)}catch(o){e=e??[],o instanceof _m?e=[...e,...o.errors]:e.push(o)}}if(e)throw new _m(e)}}add(e){var t;if(e&&e!==this)if(this.closed)qR(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&gc(t,e)}remove(e){let{_finalizers:t}=this;t&&gc(t,e),e instanceof n&&e._removeParent(this)}};mt.EMPTY=(()=>{let n=new mt;return n.closed=!0,n})();var EI=mt.EMPTY;function vm(n){return n instanceof mt||n&&"closed"in n&&ke(n.remove)&&ke(n.add)&&ke(n.unsubscribe)}function qR(n){ke(n)?n():n.unsubscribe()}var ai={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var fu={setTimeout(n,e,...t){let{delegate:r}=fu;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=fu;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function wm(n){fu.setTimeout(()=>{let{onUnhandledError:e}=ai;if(e)e(n);else throw n})}function Gh(){}var GR=CI("C",void 0,void 0);function WR(n){return CI("E",void 0,n)}function KR(n){return CI("N",n,void 0)}function CI(n,e,t){return{kind:n,value:e,error:t}}var mc=null;function pu(n){if(ai.useDeprecatedSynchronousErrorHandling){let e=!mc;if(e&&(mc={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=mc;if(mc=null,t)throw r}}else n()}function QR(n){ai.useDeprecatedSynchronousErrorHandling&&mc&&(mc.errorThrown=!0,mc.error=n)}var yc=class extends mt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,vm(e)&&e.add(this)):this.destination=j3}static create(e,t,r){return new qo(e,t,r)}next(e){this.isStopped?SI(KR(e),this):this._next(e)}error(e){this.isStopped?SI(WR(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?SI(GR,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},L3=Function.prototype.bind;function TI(n,e){return L3.call(n,e)}var DI=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){Im(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){Im(r)}else Im(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Im(t)}}},qo=class extends yc{constructor(e,t,r){super();let i;if(ke(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let s;this&&ai.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&TI(e.next,s),error:e.error&&TI(e.error,s),complete:e.complete&&TI(e.complete,s)}):i=e}this.destination=new DI(i)}};function Im(n){ai.useDeprecatedSynchronousErrorHandling?QR(n):wm(n)}function U3(n){throw n}function SI(n,e){let{onStoppedNotification:t}=ai;t&&fu.setTimeout(()=>t(n,e))}var j3={closed:!0,next:Gh,error:U3,complete:Gh};var gu=typeof Symbol=="function"&&Symbol.observable||"@@observable";function ci(n){return n}function AI(...n){return xI(n)}function xI(n){return n.length===0?ci:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var Se=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let s=$3(t)?t:new qo(t,r,i);return pu(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=YR(r),new r((i,s)=>{let o=new qo({next:a=>{try{t(a)}catch(c){s(c),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[gu](){return this}pipe(...t){return xI(t)(this)}toPromise(t){return t=YR(t),new t((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return n.create=e=>new n(e),n})();function YR(n){var e;return(e=n??ai.Promise)!==null&&e!==void 0?e:Promise}function B3(n){return n&&ke(n.next)&&ke(n.error)&&ke(n.complete)}function $3(n){return n&&n instanceof yc||B3(n)&&vm(n)}function H3(n){return ke(n?.lift)}function nt(n){return e=>{if(H3(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Xe(n,e,t,r,i){return new RI(n,e,t,r,i)}var RI=class extends yc{constructor(e,t,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};var mu={schedule(n){let e=requestAnimationFrame,t=cancelAnimationFrame,{delegate:r}=mu;r&&(e=r.requestAnimationFrame,t=r.cancelAnimationFrame);let i=e(s=>{t=void 0,n(s)});return new mt(()=>t?.(i))},requestAnimationFrame(...n){let{delegate:e}=mu;return(e?.requestAnimationFrame||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){let{delegate:e}=mu;return(e?.cancelAnimationFrame||cancelAnimationFrame)(...n)},delegate:void 0};var JR=hu(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var me=(()=>{class n extends Se{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new bm(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new JR}next(t){pu(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){pu(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){pu(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:s}=this;return r||i?EI:(this.currentObservers=null,s.push(t),new mt(()=>{this.currentObservers=null,gc(s,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:s}=this;r?t.error(i):s&&t.complete()}asObservable(){let t=new Se;return t.source=this,t}}return n.create=(e,t)=>new bm(e,t),n})(),bm=class extends me{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:EI}};var ct=class extends me{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var kI={now(){return(kI.delegate||Date).now()},delegate:void 0};var Em=class extends mt{constructor(e,t){super()}schedule(e,t=0){return this}};var Wh={setInterval(n,e,...t){let{delegate:r}=Wh;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=Wh;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var Go=class extends Em{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,s=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(s,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,r=0){return Wh.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&Wh.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,gc(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var yu=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};yu.now=kI.now;var Wo=class extends yu{constructor(e,t=yu.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var Ko=new Wo(Go),NI=Ko;var Cm=class extends Go{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var Tm=class extends Wo{};var PI=new Tm(Cm);var Sm=class extends Go{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,r=0){return r!==null&&r>0?super.requestAsyncId(e,t,r):(e.actions.push(this),e._scheduled||(e._scheduled=mu.requestAnimationFrame(()=>e.flush(void 0))))}recycleAsyncId(e,t,r=0){var i;if(r!=null?r>0:this.delay>0)return super.recycleAsyncId(e,t,r);let{actions:s}=e;t!=null&&t===e._scheduled&&((i=s[s.length-1])===null||i===void 0?void 0:i.id)!==t&&(mu.cancelAnimationFrame(t),e._scheduled=void 0)}};var Dm=class extends Wo{flush(e){this._active=!0;let t;e?t=e.id:(t=this._scheduled,this._scheduled=void 0);let{actions:r}=this,i;e=e||r.shift();do if(i=e.execute(e.state,e.delay))break;while((e=r[0])&&e.id===t&&r.shift());if(this._active=!1,i){for(;(e=r[0])&&e.id===t&&r.shift();)e.unsubscribe();throw i}}};var Am=new Dm(Sm);var Fn=new Se(n=>n.complete());function xm(n){return n&&ke(n.schedule)}function MI(n){return n[n.length-1]}function Rm(n){return ke(MI(n))?n.pop():void 0}function Bi(n){return xm(MI(n))?n.pop():void 0}function XR(n,e){return typeof MI(n)=="number"?n.pop():e}function OI(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function ek(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{l(r.next(h))}catch(p){o(p)}}function c(h){try{l(r.throw(h))}catch(p){o(p)}}function l(h){h.done?s(h.value):i(h.value).then(a,c)}l((r=r.apply(n,e||[])).next())})}function ZR(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function _c(n){return this instanceof _c?(this.v=n,this):new _c(n)}function tk(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(b){return function(k){return Promise.resolve(k).then(b,p)}}function a(b,k){r[b]&&(i[b]=function(O){return new Promise(function(N,H){s.push([b,O,N,H])>1||c(b,O)})},k&&(i[b]=k(i[b])))}function c(b,k){try{l(r[b](k))}catch(O){m(s[0][3],O)}}function l(b){b.value instanceof _c?Promise.resolve(b.value.v).then(h,p):m(s[0][2],b)}function h(b){c("next",b)}function p(b){c("throw",b)}function m(b,k){b(k),s.shift(),s.length&&c(s[0][0],s[0][1])}}function nk(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof ZR=="function"?ZR(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(s){t[s]=n[s]&&function(o){return new Promise(function(a,c){o=n[s](o),i(a,c,o.done,o.value)})}}function i(s,o,a,c){Promise.resolve(c).then(function(l){s({value:l,done:a})},o)}}var km=n=>n&&typeof n.length=="number"&&typeof n!="function";function Nm(n){return ke(n?.then)}function Pm(n){return ke(n[gu])}function Mm(n){return Symbol.asyncIterator&&ke(n?.[Symbol.asyncIterator])}function Om(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function z3(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Fm=z3();function Vm(n){return ke(n?.[Fm])}function Lm(n){return tk(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield _c(t.read());if(i)return yield _c(void 0);yield yield _c(r)}}finally{t.releaseLock()}})}function Um(n){return ke(n?.getReader)}function Tt(n){if(n instanceof Se)return n;if(n!=null){if(Pm(n))return q3(n);if(km(n))return G3(n);if(Nm(n))return W3(n);if(Mm(n))return rk(n);if(Vm(n))return K3(n);if(Um(n))return Q3(n)}throw Om(n)}function q3(n){return new Se(e=>{let t=n[gu]();if(ke(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function G3(n){return new Se(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function W3(n){return new Se(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,wm)})}function K3(n){return new Se(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function rk(n){return new Se(e=>{Y3(n,e).catch(t=>e.error(t))})}function Q3(n){return rk(Lm(n))}function Y3(n,e){var t,r,i,s;return ek(this,void 0,void 0,function*(){try{for(t=nk(n);r=yield t.next(),!r.done;){let o=r.value;if(e.next(o),e.closed)return}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=t.return)&&(yield s.call(t))}finally{if(i)throw i.error}}e.complete()})}function nr(n,e,t,r=0,i=!1){let s=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(s),!i)return s}function Qo(n,e=0){return nt((t,r)=>{t.subscribe(Xe(r,i=>nr(r,n,()=>r.next(i),e),()=>nr(r,n,()=>r.complete(),e),i=>nr(r,n,()=>r.error(i),e)))})}function Yo(n,e=0){return nt((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function ik(n,e){return Tt(n).pipe(Yo(e),Qo(e))}function sk(n,e){return Tt(n).pipe(Yo(e),Qo(e))}function ok(n,e){return new Se(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function ak(n,e){return new Se(t=>{let r;return nr(t,e,()=>{r=n[Fm](),nr(t,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){t.error(o);return}s?t.complete():t.next(i)},0,!0)}),()=>ke(r?.return)&&r.return()})}function jm(n,e){if(!n)throw new Error("Iterable cannot be null");return new Se(t=>{nr(t,e,()=>{let r=n[Symbol.asyncIterator]();nr(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function ck(n,e){return jm(Lm(n),e)}function lk(n,e){if(n!=null){if(Pm(n))return ik(n,e);if(km(n))return ok(n,e);if(Nm(n))return sk(n,e);if(Mm(n))return jm(n,e);if(Vm(n))return ak(n,e);if(Um(n))return ck(n,e)}throw Om(n)}function De(n,e){return e?lk(n,e):Tt(n)}function de(...n){let e=Bi(n);return De(n,e)}function Mr(n,e){let t=ke(n)?n:()=>n,r=i=>i.error(t());return new Se(e?i=>e.schedule(r,0,i):r)}function Kh(n){return!!n&&(n instanceof Se||ke(n.lift)&&ke(n.subscribe))}var xs=hu(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function Bm(n,e){let t=typeof e=="object";return new Promise((r,i)=>{let s=new qo({next:o=>{r(o),s.unsubscribe()},error:i,complete:()=>{t?r(e.defaultValue):i(new xs)}});n.subscribe(s)})}function uk(n){return n instanceof Date&&!isNaN(n)}function ye(n,e){return nt((t,r)=>{let i=0;t.subscribe(Xe(r,s=>{r.next(n.call(e,s,i++))}))})}var{isArray:J3}=Array;function X3(n,e){return J3(e)?n(...e):n(e)}function $m(n){return ye(e=>X3(n,e))}var{isArray:Z3}=Array,{getPrototypeOf:e9,prototype:t9,keys:n9}=Object;function Hm(n){if(n.length===1){let e=n[0];if(Z3(e))return{args:e,keys:null};if(r9(e)){let t=n9(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function r9(n){return n&&typeof n=="object"&&e9(n)===t9}function zm(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function FI(...n){let e=Bi(n),t=Rm(n),{args:r,keys:i}=Hm(n);if(r.length===0)return De([],e);let s=new Se(i9(r,e,i?o=>zm(i,o):ci));return t?s.pipe($m(t)):s}function i9(n,e,t=ci){return r=>{dk(e,()=>{let{length:i}=n,s=new Array(i),o=i,a=i;for(let c=0;c<i;c++)dk(e,()=>{let l=De(n[c],e),h=!1;l.subscribe(Xe(r,p=>{s[c]=p,h||(h=!0,a--),a||r.next(t(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}function dk(n,e,t){n?nr(t,n,e):e()}function hk(n,e,t,r,i,s,o,a){let c=[],l=0,h=0,p=!1,m=()=>{p&&!c.length&&!l&&e.complete()},b=O=>l<r?k(O):c.push(O),k=O=>{s&&e.next(O),l++;let N=!1;Tt(t(O,h++)).subscribe(Xe(e,H=>{i?.(H),s?b(H):e.next(H)},()=>{N=!0},void 0,()=>{if(N)try{for(l--;c.length&&l<r;){let H=c.shift();o?nr(e,o,()=>k(H)):k(H)}m()}catch(H){e.error(H)}}))};return n.subscribe(Xe(e,b,()=>{p=!0,m()})),()=>{a?.()}}function Vn(n,e,t=1/0){return ke(e)?Vn((r,i)=>ye((s,o)=>e(r,s,i,o))(Tt(n(r,i))),t):(typeof e=="number"&&(t=e),nt((r,i)=>hk(r,i,n,t)))}function Jo(n=1/0){return Vn(ci,n)}function fk(){return Jo(1)}function _u(...n){return fk()(De(n,Bi(n)))}function Qh(n){return new Se(e=>{Tt(n()).subscribe(e)})}function $i(...n){let e=Rm(n),{args:t,keys:r}=Hm(n),i=new Se(s=>{let{length:o}=t;if(!o){s.complete();return}let a=new Array(o),c=o,l=o;for(let h=0;h<o;h++){let p=!1;Tt(t[h]).subscribe(Xe(s,m=>{p||(p=!0,l--),a[h]=m},()=>c--,void 0,()=>{(!c||!p)&&(l||s.next(r?zm(r,a):a),s.complete())}))}});return e?i.pipe($m(e)):i}function qm(n=0,e,t=NI){let r=-1;return e!=null&&(xm(e)?t=e:r=e),new Se(i=>{let s=uk(n)?+n-t.now():n;s<0&&(s=0);let o=0;return t.schedule(function(){i.closed||(i.next(o++),0<=r?this.schedule(void 0,r):i.complete())},s)})}function VI(n=0,e=Ko){return n<0&&(n=0),qm(n,n,e)}function Yh(...n){let e=Bi(n),t=XR(n,1/0),r=n;return r.length?r.length===1?Tt(r[0]):Jo(t)(De(r,e)):Fn}function pr(n,e){return nt((t,r)=>{let i=0;t.subscribe(Xe(r,s=>n.call(e,s,i++)&&r.next(s)))})}function pk(n){return nt((e,t)=>{let r=!1,i=null,s=null,o=!1,a=()=>{if(s?.unsubscribe(),s=null,r){r=!1;let l=i;i=null,t.next(l)}o&&t.complete()},c=()=>{s=null,o&&t.complete()};e.subscribe(Xe(t,l=>{r=!0,i=l,s||Tt(n(l)).subscribe(s=Xe(t,a,c))},()=>{o=!0,(!r||!s||s.closed)&&t.complete()}))})}function Gm(n,e=Ko){return pk(()=>qm(n,e))}function Rs(n){return nt((e,t)=>{let r=null,i=!1,s;r=e.subscribe(Xe(t,void 0,void 0,o=>{s=Tt(n(o,Rs(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}function Jh(n,e){return ke(e)?Vn(n,e,1):Vn(n,1)}function LI(n){return nt((e,t)=>{let r=!1;e.subscribe(Xe(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Ln(n){return n<=0?()=>Fn:nt((e,t)=>{let r=0;e.subscribe(Xe(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function gk(n=s9){return nt((e,t)=>{let r=!1;e.subscribe(Xe(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function s9(){return new xs}function vu(n){return nt((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function ks(n,e){let t=arguments.length>=2;return r=>r.pipe(n?pr((i,s)=>n(i,s,r)):ci,Ln(1),t?LI(e):gk(()=>new xs))}function Wm(n){return n<=0?()=>Fn:nt((e,t)=>{let r=[];e.subscribe(Xe(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function vc(...n){let e=Bi(n);return nt((t,r)=>{(e?_u(n,t,e):_u(n,t)).subscribe(r)})}function Gn(n,e){return nt((t,r)=>{let i=null,s=0,o=!1,a=()=>o&&!i&&r.complete();t.subscribe(Xe(r,c=>{i?.unsubscribe();let l=0,h=s++;Tt(n(c,h)).subscribe(i=Xe(r,p=>r.next(e?e(c,p,h,l++):p),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function li(n){return nt((e,t)=>{Tt(n).subscribe(Xe(t,()=>t.complete(),Gh)),!t.closed&&e.subscribe(t)})}function vt(n,e,t){let r=ke(n)||e||t?{next:n,error:e,complete:t}:n;return r?nt((i,s)=>{var o;(o=r.subscribe)===null||o===void 0||o.call(r);let a=!0;i.subscribe(Xe(s,c=>{var l;(l=r.next)===null||l===void 0||l.call(r,c),s.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),s.complete()},c=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,c),s.error(c)},()=>{var c,l;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):ci}var UI;function Km(){return UI}function Hi(n){let e=UI;return UI=n,e}var mk=Symbol("NotFound");function wu(n){return n===mk||n?.name==="\u0275NotFound"}var Ic=class{full;major;minor;patch;constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},ZI=new Ic("21.0.5");var ty="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",ce=class extends Error{code;constructor(e,t){super(bu(e,t)),this.code=e}};function o9(n){return`NG0${Math.abs(n)}`}function bu(n,e){return`${o9(n)}${e?": "+e:""}`}var Os=globalThis;function lt(n){for(let e in n)if(n[e]===lt)return e;throw Error("")}function Ik(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Ps(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(Ps).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let r=t.indexOf(`
`);return r>=0?t.slice(0,r):t}function ny(n,e){return n?e?`${n} ${e}`:n:e||""}var a9=lt({__forward_ref__:lt});function qi(n){return n.__forward_ref__=qi,n.toString=function(){return Ps(this())},n}function kn(n){return eb(n)?n():n}function eb(n){return typeof n=="function"&&n.hasOwnProperty(a9)&&n.__forward_ref__===qi}function X(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function rr(n){return{providers:n.providers||[],imports:n.imports||[]}}function sf(n){return c9(n,ry)}function tb(n){return sf(n)!==null}function c9(n,e){return n.hasOwnProperty(e)&&n[e]||null}function l9(n){let e=n?.[ry]??null;return e||null}function BI(n){return n&&n.hasOwnProperty(Ym)?n[Ym]:null}var ry=lt({\u0275prov:lt}),Ym=lt({\u0275inj:lt}),re=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=X({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function nb(n){return n&&!!n.\u0275providers}var rb=lt({\u0275cmp:lt}),ib=lt({\u0275dir:lt}),sb=lt({\u0275pipe:lt}),ob=lt({\u0275mod:lt}),Zh=lt({\u0275fac:lt}),Tc=lt({__NG_ELEMENT_ID__:lt}),yk=lt({__NG_ENV_ID__:lt});function ab(n){return n[ob]||null}function Fs(n){return n[rb]||null}function cb(n){return n[ib]||null}function bk(n){return n[sb]||null}function Sc(n){return typeof n=="string"?n:n==null?"":String(n)}function Ek(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():Sc(n)}var Ck=lt({ngErrorCode:lt}),u9=lt({ngErrorMessage:lt}),d9=lt({ngTokenPath:lt});function lb(n,e){return Tk("",-200,e)}function iy(n,e){throw new ce(-201,!1)}function Tk(n,e,t){let r=new ce(e,n);return r[Ck]=e,r[u9]=n,t&&(r[d9]=t),r}function h9(n){return n[Ck]}var $I;function Sk(){return $I}function Wn(n){let e=$I;return $I=n,e}function ub(n,e,t){let r=sf(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&8)return null;if(e!==void 0)return e;iy(n,"Injector")}var f9={},wc=f9,HI="__NG_DI_FLAG__",zI=class{injector;constructor(e){this.injector=e}retrieve(e,t){let r=bc(t)||0;try{return this.injector.get(e,r&8?null:wc,r)}catch(i){if(wu(i))return i;throw i}}};function p9(n,e=0){let t=Km();if(t===void 0)throw new ce(-203,!1);if(t===null)return ub(n,void 0,e);{let r=g9(e),i=t.retrieve(n,r);if(wu(i)){if(r.optional)return null;throw i}return i}}function Fe(n,e=0){return(Sk()||p9)(kn(n),e)}function M(n,e){return Fe(n,bc(e))}function bc(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function g9(n){return{optional:!!(n&8),host:!!(n&1),self:!!(n&2),skipSelf:!!(n&4)}}function qI(n){let e=[];for(let t=0;t<n.length;t++){let r=kn(n[t]);if(Array.isArray(r)){if(r.length===0)throw new ce(900,!1);let i,s=0;for(let o=0;o<r.length;o++){let a=r[o],c=m9(a);typeof c=="number"?c===-1?i=a.token:s|=c:i=a}e.push(Fe(i,s))}else e.push(Fe(r))}return e}function Dk(n,e){return n[HI]=e,n.prototype[HI]=e,n}function m9(n){return n[HI]}function Xo(n,e){let t=n.hasOwnProperty(Zh);return t?n[Zh]:null}function Ak(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],s=e[r];if(t&&(i=t(i),s=t(s)),s!==i)return!1}return!0}function xk(n){return n.flat(Number.POSITIVE_INFINITY)}function sy(n,e){n.forEach(t=>Array.isArray(t)?sy(t,e):e(t))}function db(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function of(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function Rk(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let s=i-2;n[i]=n[s],i--}n[e]=t,n[e+1]=r}}function oy(n,e,t){let r=Eu(n,e);return r>=0?n[r|1]=t:(r=~r,Rk(n,r,e,t)),r}function ay(n,e){let t=Eu(n,e);if(t>=0)return n[t|1]}function Eu(n,e){return y9(n,e,1)}function y9(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let s=r+(i-r>>1),o=n[s<<t];if(e===o)return s<<t;o>e?i=s:r=s+1}return~(i<<t)}var ta={},Kn=[],Dc=new re(""),hb=new re("",-1),fb=new re(""),ef=class{get(e,t=wc){if(t===wc){let i=Tk("",-201);throw i.name="\u0275NotFound",i}return t}};function gr(n){return{\u0275providers:n}}function kk(n){return gr([{provide:Dc,multi:!0,useValue:n}])}function Nk(...n){return{\u0275providers:pb(!0,n),\u0275fromNgModule:!0}}function pb(n,...e){let t=[],r=new Set,i,s=o=>{t.push(o)};return sy(e,o=>{let a=o;Jm(a,s,[],r)&&(i||=[],i.push(a))}),i!==void 0&&Pk(i,s),t}function Pk(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];gb(i,s=>{e(s,r)})}}function Jm(n,e,t,r){if(n=kn(n),!n)return!1;let i=null,s=BI(n),o=!s&&Fs(n);if(!s&&!o){let c=n.ngModule;if(s=BI(c),s)i=c;else return!1}else{if(o&&!o.standalone)return!1;i=n}let a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){let c=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let l of c)Jm(l,e,t,r)}}else if(s){if(s.imports!=null&&!a){r.add(i);let l;try{sy(s.imports,h=>{Jm(h,e,t,r)&&(l||=[],l.push(h))})}finally{}l!==void 0&&Pk(l,e)}if(!a){let l=Xo(i)||(()=>new i);e({provide:i,useFactory:l,deps:Kn},i),e({provide:fb,useValue:i,multi:!0},i),e({provide:Dc,useValue:()=>Fe(i),multi:!0},i)}let c=s.providers;if(c!=null&&!a){let l=n;gb(c,h=>{e(h,l)})}}else return!1;return i!==n&&n.providers!==void 0}function gb(n,e){for(let t of n)nb(t)&&(t=t.\u0275providers),Array.isArray(t)?gb(t,e):e(t)}var _9=lt({provide:String,useValue:lt});function Mk(n){return n!==null&&typeof n=="object"&&_9 in n}function v9(n){return!!(n&&n.useExisting)}function w9(n){return!!(n&&n.useFactory)}function Ec(n){return typeof n=="function"}function Ok(n){return!!n.useClass}var af=new re(""),Qm={},_k={},jI;function Cu(){return jI===void 0&&(jI=new ef),jI}var Mt=class{},Cc=class extends Mt{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,WI(e,o=>this.processProvider(o)),this.records.set(hb,Iu(void 0,this)),i.has("environment")&&this.records.set(Mt,Iu(void 0,this));let s=this.records.get(af);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(fb,Kn,{self:!0}))}retrieve(e,t){let r=bc(t)||0;try{return this.get(e,wc,r)}catch(i){if(wu(i))return i;throw i}}destroy(){Xh(this),this._destroyed=!0;let e=ge(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),ge(e)}}onDestroy(e){return Xh(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){Xh(this);let t=Hi(this),r=Wn(void 0),i;try{return e()}finally{Hi(t),Wn(r)}}get(e,t=wc,r){if(Xh(this),e.hasOwnProperty(yk))return e[yk](this);let i=bc(r),s,o=Hi(this),a=Wn(void 0);try{if(!(i&4)){let l=this.records.get(e);if(l===void 0){let h=T9(e)&&sf(e);h&&this.injectableDefInScope(h)?l=Iu(GI(e),Qm):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l,i)}let c=i&2?Cu():this.parent;return t=i&8&&t===wc?null:t,c.get(e,t)}catch(c){let l=h9(c);throw l===-200||l===-201?new ce(l,null):c}finally{Wn(a),Hi(o)}}resolveInjectorInitializers(){let e=ge(null),t=Hi(this),r=Wn(void 0),i;try{let s=this.get(Dc,Kn,{self:!0});for(let o of s)o()}finally{Hi(t),Wn(r),ge(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(Ps(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=kn(e);let t=Ec(e)?e:kn(e&&e.provide),r=b9(e);if(!Ec(e)&&e.multi===!0){let i=this.records.get(t);i||(i=Iu(void 0,Qm,!0),i.factory=()=>qI(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t,r){let i=ge(null);try{if(t.value===_k)throw lb(Ps(e));return t.value===Qm&&(t.value=_k,t.value=t.factory(void 0,r)),typeof t.value=="object"&&t.value&&C9(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{ge(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=kn(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function GI(n){let e=sf(n),t=e!==null?e.factory:Xo(n);if(t!==null)return t;if(n instanceof re)throw new ce(204,!1);if(n instanceof Function)return I9(n);throw new ce(204,!1)}function I9(n){if(n.length>0)throw new ce(204,!1);let t=l9(n);return t!==null?()=>t.factory(n):()=>new n}function b9(n){if(Mk(n))return Iu(void 0,n.useValue);{let e=mb(n);return Iu(e,Qm)}}function mb(n,e,t){let r;if(Ec(n)){let i=kn(n);return Xo(i)||GI(i)}else if(Mk(n))r=()=>kn(n.useValue);else if(w9(n))r=()=>n.useFactory(...qI(n.deps||[]));else if(v9(n))r=(i,s)=>Fe(kn(n.useExisting),s!==void 0&&s&8?8:void 0);else{let i=kn(n&&(n.useClass||n.provide));if(E9(n))r=()=>new i(...qI(n.deps));else return Xo(i)||GI(i)}return r}function Xh(n){if(n.destroyed)throw new ce(205,!1)}function Iu(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function E9(n){return!!n.deps}function C9(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function T9(n){return typeof n=="function"||typeof n=="object"&&n.ngMetadataName==="InjectionToken"}function WI(n,e){for(let t of n)Array.isArray(t)?WI(t,e):t&&nb(t)?WI(t.\u0275providers,e):e(t)}function fn(n,e){let t;n instanceof Cc?(Xh(n),t=n):t=new zI(n);let r,i=Hi(t),s=Wn(void 0);try{return e()}finally{Hi(i),Wn(s)}}function Fk(){return Sk()!==void 0||Km()!=null}var ui=0,_e=1,Ce=2,hn=3,Or=4,Fr=5,Tu=6,Su=7,jt=8,Vs=9,Gi=10,Et=11,Du=12,yb=13,Ac=14,mr=15,na=16,xc=17,Wi=18,cf=19,_b=20,Ns=21,cy=22,Zo=23,yr=24,Rc=25,kc=26,Bt=27,Vk=1,vb=6,ra=7,lf=8,Nc=9,Ot=10;function Ki(n){return Array.isArray(n)&&typeof n[Vk]=="object"}function di(n){return Array.isArray(n)&&n[Vk]===!0}function wb(n){return(n.flags&4)!==0}function ia(n){return n.componentOffset>-1}function uf(n){return(n.flags&1)===1}function Qi(n){return!!n.template}function Au(n){return(n[Ce]&512)!==0}function Pc(n){return(n[Ce]&256)===256}var Lk="svg",Uk="math";function Vr(n){for(;Array.isArray(n);)n=n[ui];return n}function Ib(n,e){return Vr(e[n])}function hi(n,e){return Vr(e[n.index])}function df(n,e){return n.data[e]}function bb(n,e){return n[e]}function Eb(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function Lr(n,e){let t=e[n];return Ki(t)?t:t[ui]}function jk(n){return(n[Ce]&4)===4}function ly(n){return(n[Ce]&128)===128}function Bk(n){return di(n[hn])}function Ur(n,e){return e==null?null:n[e]}function Cb(n){n[xc]=0}function Tb(n){n[Ce]&1024||(n[Ce]|=1024,ly(n)&&Mc(n))}function $k(n,e){for(;n>0;)e=e[Ac],n--;return e}function hf(n){return!!(n[Ce]&9216||n[yr]?.dirty)}function uy(n){n[Gi].changeDetectionScheduler?.notify(8),n[Ce]&64&&(n[Ce]|=1024),hf(n)&&Mc(n)}function Mc(n){n[Gi].changeDetectionScheduler?.notify(0);let e=ea(n);for(;e!==null&&!(e[Ce]&8192||(e[Ce]|=8192,!ly(e)));)e=ea(e)}function Sb(n,e){if(Pc(n))throw new ce(911,!1);n[Ns]===null&&(n[Ns]=[]),n[Ns].push(e)}function Hk(n,e){if(n[Ns]===null)return;let t=n[Ns].indexOf(e);t!==-1&&n[Ns].splice(t,1)}function ea(n){let e=n[hn];return di(e)?e[hn]:e}function Db(n){return n[Su]??=[]}function Ab(n){return n.cleanup??=[]}function zk(n,e,t,r){let i=Db(e);i.push(t),n.firstCreatePass&&Ab(n).push(r,i.length-1)}var Ve={lFrame:sN(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var KI=!1;function qk(){return Ve.lFrame.elementDepthCount}function Gk(){Ve.lFrame.elementDepthCount++}function xb(){Ve.lFrame.elementDepthCount--}function Rb(){return Ve.bindingsEnabled}function Wk(){return Ve.skipHydrationRootTNode!==null}function kb(n){return Ve.skipHydrationRootTNode===n}function Nb(){Ve.skipHydrationRootTNode=null}function Oe(){return Ve.lFrame.lView}function $t(){return Ve.lFrame.tView}function ee(n){return Ve.lFrame.contextLView=n,n[jt]}function te(n){return Ve.lFrame.contextLView=null,n}function _n(){let n=Pb();for(;n!==null&&n.type===64;)n=n.parent;return n}function Pb(){return Ve.lFrame.currentTNode}function Kk(){let n=Ve.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function xu(n,e){let t=Ve.lFrame;t.currentTNode=n,t.isParent=e}function Mb(){return Ve.lFrame.isParent}function Qk(){Ve.lFrame.isParent=!1}function Yk(){return Ve.lFrame.contextLView}function Ob(){return KI}function tf(n){let e=KI;return KI=n,e}function Jk(){let n=Ve.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function Xk(){return Ve.lFrame.bindingIndex}function Zk(n){return Ve.lFrame.bindingIndex=n}function Oc(){return Ve.lFrame.bindingIndex++}function dy(n){let e=Ve.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function eN(){return Ve.lFrame.inI18n}function tN(n,e){let t=Ve.lFrame;t.bindingIndex=t.bindingRootIndex=n,hy(e)}function nN(){return Ve.lFrame.currentDirectiveIndex}function hy(n){Ve.lFrame.currentDirectiveIndex=n}function rN(n){let e=Ve.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function Fb(){return Ve.lFrame.currentQueryIndex}function fy(n){Ve.lFrame.currentQueryIndex=n}function S9(n){let e=n[_e];return e.type===2?e.declTNode:e.type===1?n[Fr]:null}function Vb(n,e,t){if(t&4){let i=e,s=n;for(;i=i.parent,i===null&&!(t&1);)if(i=S9(s),i===null||(s=s[Ac],i.type&10))break;if(i===null)return!1;e=i,n=s}let r=Ve.lFrame=iN();return r.currentTNode=e,r.lView=n,!0}function py(n){let e=iN(),t=n[_e];Ve.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function iN(){let n=Ve.lFrame,e=n===null?null:n.child;return e===null?sN(n):e}function sN(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function oN(){let n=Ve.lFrame;return Ve.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var Lb=oN;function gy(){let n=oN();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function aN(n){return(Ve.lFrame.contextLView=$k(n,Ve.lFrame.contextLView))[jt]}function Yi(){return Ve.lFrame.selectedIndex}function sa(n){Ve.lFrame.selectedIndex=n}function my(){let n=Ve.lFrame;return df(n.tView,n.selectedIndex)}function cN(){return Ve.lFrame.currentNamespace}var lN=!0;function yy(){return lN}function _y(n){lN=n}function QI(n,e=null,t=null,r){let i=Ub(n,e,t,r);return i.resolveInjectorInitializers(),i}function Ub(n,e=null,t=null,r,i=new Set){let s=[t||Kn,Nk(n)];return r=r||(typeof n=="object"?void 0:Ps(n)),new Cc(s,e||Cu(),r||null,i)}var wt=class n{static THROW_IF_NOT_FOUND=wc;static NULL=new ef;static create(e,t){if(Array.isArray(e))return QI({name:""},t,e,"");{let r=e.name??"";return QI({name:r},e.parent,e.providers,r)}}static \u0275prov=X({token:n,providedIn:"any",factory:()=>Fe(hb)});static __NG_ELEMENT_ID__=-1},It=new re(""),Qn=(()=>{class n{static __NG_ELEMENT_ID__=D9;static __NG_ENV_ID__=t=>t}return n})(),Xm=class extends Qn{_lView;constructor(e){super(),this._lView=e}get destroyed(){return Pc(this._lView)}onDestroy(e){let t=this._lView;return Sb(t,e),()=>Hk(t,e)}};function D9(){return new Xm(Oe())}var uN=!1,Ls=(()=>{class n{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new ct(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new Se(t=>{t.next(!1),t.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=X({token:n,providedIn:"root",factory:()=>new n})}return n})(),YI=class extends me{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,Fk()&&(this.destroyRef=M(Qn,{optional:!0})??void 0,this.pendingTasks=M(Ls,{optional:!0})??void 0)}emit(e){let t=ge(null);try{super.next(e)}finally{ge(t)}}subscribe(e,t,r){let i=e,s=t||(()=>null),o=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),s=c.error?.bind(c),o=c.complete?.bind(c)}this.__isAsync&&(s=this.wrapInTimeout(s),i&&(i=this.wrapInTimeout(i)),o&&(o=this.wrapInTimeout(o)));let a=super.subscribe({next:i,error:s,complete:o});return e instanceof mt&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(t)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},We=YI;function Zm(...n){}function jb(n){let e,t;function r(){n=Zm;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function Bb(n){return queueMicrotask(()=>n()),()=>{n=Zm}}var $b="isAngularZone",nf=$b+"_ID",A9=0,it=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new We(!1);onMicrotaskEmpty=new We(!1);onStable=new We(!1);onError=new We(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:s=uN}=e;if(typeof Zone>"u")throw new ce(908,!1);Zone.assertZonePatched();let o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!i&&r,o.shouldCoalesceRunChangeDetection=i,o.callbackScheduled=!1,o.scheduleInRootZone=s,k9(o)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get($b)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new ce(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new ce(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,x9,Zm,Zm);try{return s.runTask(o,t,r)}finally{s.cancelTask(o)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},x9={};function Hb(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function R9(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){jb(()=>{n.callbackScheduled=!1,JI(n),n.isCheckStableRunning=!0,Hb(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),JI(n)}function k9(n){let e=()=>{R9(n)},t=A9++;n._inner=n._inner.fork({name:"angular",properties:{[$b]:!0,[nf]:t,[nf+t]:!0},onInvokeTask:(r,i,s,o,a,c)=>{if(N9(c))return r.invokeTask(s,o,a,c);try{return vk(n),r.invokeTask(s,o,a,c)}finally{(n.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),wk(n)}},onInvoke:(r,i,s,o,a,c,l)=>{try{return vk(n),r.invoke(s,o,a,c,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!P9(c)&&e(),wk(n)}},onHasTask:(r,i,s,o)=>{r.hasTask(s,o),i===s&&(o.change=="microTask"?(n._hasPendingMicrotasks=o.microTask,JI(n),Hb(n)):o.change=="macroTask"&&(n.hasPendingMacrotasks=o.macroTask))},onHandleError:(r,i,s,o)=>(r.handleError(s,o),n.runOutsideAngular(()=>n.onError.emit(o)),!1)})}function JI(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function vk(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function wk(n){n._nesting--,Hb(n)}var rf=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new We;onMicrotaskEmpty=new We;onStable=new We;onError=new We;run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function N9(n){return dN(n,"__ignore_ng_zone__")}function P9(n){return dN(n,"__scheduler_tick__")}function dN(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var zi=class{_console=console;handleError(e){this._console.error("ERROR",e)}},_r=new re("",{factory:()=>{let n=M(it),e=M(Mt),t;return r=>{n.runOutsideAngular(()=>{e.destroyed&&!t?setTimeout(()=>{throw r}):(t??=e.get(zi),t.handleError(r))})}}}),hN={provide:Dc,useValue:()=>{let n=M(zi,{optional:!0})},multi:!0},M9=new re("",{factory:()=>{let n=M(It).defaultView;if(!n)return;let e=M(_r),t=s=>{e(s.reason),s.preventDefault()},r=s=>{s.error?e(s.error):e(new Error(s.message,{cause:s})),s.preventDefault()},i=()=>{n.addEventListener("unhandledrejection",t),n.addEventListener("error",r)};typeof Zone<"u"?Zone.root.run(i):i(),M(Qn).onDestroy(()=>{n.removeEventListener("error",r),n.removeEventListener("unhandledrejection",t)})}});function zb(){return gr([kk(()=>void M(M9))])}function he(n,e){let[t,r,i]=vI(n,e?.equal),s=t,o=s[qn];return s.set=r,s.update=i,s.asReadonly=fN.bind(s),s}function fN(){let n=this[qn];if(n.readonlyFn===void 0){let e=()=>this();e[qn]=n,n.readonlyFn=e}return n.readonlyFn}var ff=(()=>{class n{view;node;constructor(t,r){this.view=t,this.node=r}static __NG_ELEMENT_ID__=O9}return n})();function O9(){return new ff(Oe(),_n())}var Ms=class{},pf=new re("",{factory:()=>!0});var qb=new re(""),Ru=(()=>{class n{internalPendingTasks=M(Ls);scheduler=M(Ms);errorHandler=M(_r);add(){let t=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(t)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(t))}}run(t){let r=this.add();t().catch(this.errorHandler).finally(r)}static \u0275prov=X({token:n,providedIn:"root",factory:()=>new n})}return n})(),vy=(()=>{class n{static \u0275prov=X({token:n,providedIn:"root",factory:()=>new XI})}return n})(),XI=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let t=e.zone,r=this.queues.get(t);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let r=this.queues.get(t);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[t,r]of this.queues)t===null?e||=this.flushQueue(r):e||=t.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let t=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,t=!0,r.run());return t}},ey=class{[qn];constructor(e){this[qn]=e}destroy(){this[qn].destroy()}};function vr(n,e){let t=e?.injector??M(wt),r=e?.manualCleanup!==!0?t.get(Qn):null,i,s=t.get(ff,null,{optional:!0}),o=t.get(Ms);return s!==null?(i=L9(s.view,o,n),r instanceof Xm&&r._lView===s.view&&(r=null)):i=U9(n,t.get(vy),o),i.injector=t,r!==null&&(i.onDestroyFns=[r.onDestroy(()=>i.destroy())]),new ey(i)}var pN=ie(B({},II),{cleanupFns:void 0,zone:null,onDestroyFns:null,run(){let n=tf(!1);try{bI(this)}finally{tf(n)}},cleanup(){if(!this.cleanupFns?.length)return;let n=ge(null);try{for(;this.cleanupFns.length;)this.cleanupFns.pop()()}finally{this.cleanupFns=[],ge(n)}}}),F9=ie(B({},pN),{consumerMarkedDirty(){this.scheduler.schedule(this),this.notifier.notify(12)},destroy(){if(pc(this),this.onDestroyFns!==null)for(let n of this.onDestroyFns)n();this.cleanup(),this.scheduler.remove(this)}}),V9=ie(B({},pN),{consumerMarkedDirty(){this.view[Ce]|=8192,Mc(this.view),this.notifier.notify(13)},destroy(){if(pc(this),this.onDestroyFns!==null)for(let n of this.onDestroyFns)n();this.cleanup(),this.view[Zo]?.delete(this)}});function L9(n,e,t){let r=Object.create(V9);return r.view=n,r.zone=typeof Zone<"u"?Zone.current:null,r.notifier=e,r.fn=gN(r,t),n[Zo]??=new Set,n[Zo].add(r),r.consumerMarkedDirty(r),r}function U9(n,e,t){let r=Object.create(F9);return r.fn=gN(r,n),r.scheduler=e,r.notifier=t,r.zone=typeof Zone<"u"?Zone.current:null,r.scheduler.add(r),r.notifier.notify(12),r}function gN(n,e){return()=>{e(t=>(n.cleanupFns??=[]).push(t))}}function qt(n){return wI(n)}function Fu(n){return{toString:n}.toString()}var wy="__parameters__";function W9(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function K9(n,e,t){return Fu(()=>{let r=W9(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;let o=new i(...s);return a.annotation=o,a;function a(c,l,h){let p=c.hasOwnProperty(wy)?c[wy]:Object.defineProperty(c,wy,{value:[]})[wy];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(o),c}}return i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var Ir=Dk(K9("Optional"),8);function Q9(n){return typeof n=="function"}function zN(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}var Ay=class{previousValue;currentValue;firstChange;constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}},jr=(()=>{let n=()=>qN;return n.ngInherit=!0,n})();function qN(n){return n.type.prototype.ngOnChanges&&(n.setInput=J9),Y9}function Y9(){let n=WN(this),e=n?.current;if(e){let t=n.previous;if(t===ta)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function J9(n,e,t,r,i){let s=this.declaredInputs[r],o=WN(n)||X9(n,{previous:ta,current:null}),a=o.current||(o.current={}),c=o.previous,l=c[s];a[s]=new Ay(l&&l.currentValue,t,c===ta),zN(n,e,i,t)}var GN="__ngSimpleChanges__";function WN(n){return n[GN]||null}function X9(n,e){return n[GN]=e}var mN=[];var ut=function(n,e=null,t){for(let r=0;r<mN.length;r++){let i=mN[r];i(n,e,t)}},Ze=(function(n){return n[n.TemplateCreateStart=0]="TemplateCreateStart",n[n.TemplateCreateEnd=1]="TemplateCreateEnd",n[n.TemplateUpdateStart=2]="TemplateUpdateStart",n[n.TemplateUpdateEnd=3]="TemplateUpdateEnd",n[n.LifecycleHookStart=4]="LifecycleHookStart",n[n.LifecycleHookEnd=5]="LifecycleHookEnd",n[n.OutputStart=6]="OutputStart",n[n.OutputEnd=7]="OutputEnd",n[n.BootstrapApplicationStart=8]="BootstrapApplicationStart",n[n.BootstrapApplicationEnd=9]="BootstrapApplicationEnd",n[n.BootstrapComponentStart=10]="BootstrapComponentStart",n[n.BootstrapComponentEnd=11]="BootstrapComponentEnd",n[n.ChangeDetectionStart=12]="ChangeDetectionStart",n[n.ChangeDetectionEnd=13]="ChangeDetectionEnd",n[n.ChangeDetectionSyncStart=14]="ChangeDetectionSyncStart",n[n.ChangeDetectionSyncEnd=15]="ChangeDetectionSyncEnd",n[n.AfterRenderHooksStart=16]="AfterRenderHooksStart",n[n.AfterRenderHooksEnd=17]="AfterRenderHooksEnd",n[n.ComponentStart=18]="ComponentStart",n[n.ComponentEnd=19]="ComponentEnd",n[n.DeferBlockStateStart=20]="DeferBlockStateStart",n[n.DeferBlockStateEnd=21]="DeferBlockStateEnd",n[n.DynamicComponentStart=22]="DynamicComponentStart",n[n.DynamicComponentEnd=23]="DynamicComponentEnd",n[n.HostBindingsUpdateStart=24]="HostBindingsUpdateStart",n[n.HostBindingsUpdateEnd=25]="HostBindingsUpdateEnd",n})(Ze||{});function Z9(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){let o=qN(e);(t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o)}i&&(t.preOrderHooks??=[]).push(0-n,i),s&&((t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s))}function KN(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:h}=s;o&&(n.contentHooks??=[]).push(-t,o),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),h!=null&&(n.destroyHooks??=[]).push(t,h)}}function Ey(n,e,t){QN(n,e,3,t)}function Cy(n,e,t,r){(n[Ce]&3)===t&&QN(n,e,t,r)}function Gb(n,e){let t=n[Ce];(t&3)===e&&(t&=16383,t+=1,n[Ce]=t)}function QN(n,e,t,r){let i=r!==void 0?n[xc]&65535:0,s=r??-1,o=e.length-1,a=0;for(let c=i;c<o;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(n[xc]+=65536),(a<s||s==-1)&&(e5(n,t,e,c),n[xc]=(n[xc]&4294901760)+c+2),c++}function yN(n,e){ut(Ze.LifecycleHookStart,n,e);let t=ge(null);try{e.call(n)}finally{ge(t),ut(Ze.LifecycleHookEnd,n,e)}}function e5(n,e,t,r){let i=t[r]<0,s=t[r+1],o=i?-t[r]:t[r],a=n[o];i?n[Ce]>>14<n[xc]>>16&&(n[Ce]&3)===e&&(n[Ce]+=16384,yN(a,s)):yN(a,s)}var Nu=-1,Vc=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,r,i){this.factory=e,this.name=i,this.canSeeViewProviders=t,this.injectImpl=r}};function t5(n){return(n.flags&8)!==0}function n5(n){return(n.flags&16)!==0}function r5(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let s=t[r++],o=t[r++],a=t[r++];n.setAttribute(e,o,a,s)}else{let s=i,o=t[++r];i5(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),r++}}return r}function YN(n){return n===3||n===4||n===6}function i5(n){return n.charCodeAt(0)===64}function Pu(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?_N(n,t,i,null,e[++r]):_N(n,t,i,null,null))}}return n}function _N(n,e,t,r,i){let s=0,o=n.length;if(e===-1)o=-1;else for(;s<n.length;){let a=n[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<n.length;){let a=n[s];if(typeof a=="number")break;if(a===t){i!==null&&(n[s+1]=i);return}s++,i!==null&&s++}o!==-1&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),i!==null&&n.splice(s++,0,i)}function JN(n){return n!==Nu}function xy(n){return n&32767}function s5(n){return n>>16}function Ry(n,e){let t=s5(n),r=e;for(;t>0;)r=r[Ac],t--;return r}var rE=!0;function ky(n){let e=rE;return rE=n,e}var o5=256,XN=o5-1,ZN=5,a5=0,Ji={};function c5(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(Tc)&&(r=t[Tc]),r==null&&(r=t[Tc]=a5++);let i=r&XN,s=1<<i;e.data[n+(i>>ZN)]|=s}function Ny(n,e){let t=eP(n,e);if(t!==-1)return t;let r=e[_e];r.firstCreatePass&&(n.injectorIndex=e.length,Wb(r.data,n),Wb(e,null),Wb(r.blueprint,null));let i=kE(n,e),s=n.injectorIndex;if(JN(i)){let o=xy(i),a=Ry(i,e),c=a[_e].data;for(let l=0;l<8;l++)e[s+l]=a[o+l]|c[o+l]}return e[s+8]=i,s}function Wb(n,e){n.push(0,0,0,0,0,0,0,0,e)}function eP(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function kE(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=sP(i),r===null)return Nu;if(t++,i=i[Ac],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return Nu}function iE(n,e,t){c5(n,e,t)}function l5(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let r=t.length,i=0;for(;i<r;){let s=t[i];if(YN(s))break;if(s===0)i=i+2;else if(typeof s=="number")for(i++;i<r&&typeof t[i]=="string";)i++;else{if(s===e)return t[i+1];i=i+2}}}return null}function tP(n,e,t){if(t&8||n!==void 0)return n;iy(e,"NodeInjector")}function nP(n,e,t,r){if(t&8&&r===void 0&&(r=null),(t&3)===0){let i=n[Vs],s=Wn(void 0);try{return i?i.get(e,r,t&8):ub(e,r,t&8)}finally{Wn(s)}}return tP(r,e,t)}function rP(n,e,t,r=0,i){if(n!==null){if(e[Ce]&2048&&!(r&2)){let o=f5(n,e,t,r,Ji);if(o!==Ji)return o}let s=iP(n,e,t,r,Ji);if(s!==Ji)return s}return nP(e,t,r,i)}function iP(n,e,t,r,i){let s=d5(t);if(typeof s=="function"){if(!Vb(e,n,r))return r&1?tP(i,t,r):nP(e,t,r,i);try{let o;if(o=s(r),o==null&&!(r&8))iy(t);else return o}finally{Lb()}}else if(typeof s=="number"){let o=null,a=eP(n,e),c=Nu,l=r&1?e[mr][Fr]:null;for((a===-1||r&4)&&(c=a===-1?kE(n,e):e[a+8],c===Nu||!wN(r,!1)?a=-1:(o=e[_e],a=xy(c),e=Ry(c,e)));a!==-1;){let h=e[_e];if(vN(s,a,h.data)){let p=u5(a,e,t,o,r,l);if(p!==Ji)return p}c=e[a+8],c!==Nu&&wN(r,e[_e].data[a+8]===l)&&vN(s,a,e)?(o=h,a=xy(c),e=Ry(c,e)):a=-1}}return i}function u5(n,e,t,r,i,s){let o=e[_e],a=o.data[n+8],c=r==null?ia(a)&&rE:r!=o&&(a.type&3)!==0,l=i&1&&s===a,h=Ty(a,o,t,c,l);return h!==null?_f(e,o,h,a,i):Ji}function Ty(n,e,t,r,i){let s=n.providerIndexes,o=e.data,a=s&1048575,c=n.directiveStart,l=n.directiveEnd,h=s>>20,p=r?a:a+h,m=i?a+h:l;for(let b=p;b<m;b++){let k=o[b];if(b<c&&t===k||b>=c&&k.type===t)return b}if(i){let b=o[c];if(b&&Qi(b)&&b.type===t)return c}return null}function _f(n,e,t,r,i){let s=n[t],o=e.data;if(s instanceof Vc){let a=s;if(a.resolving){let b=Ek(o[t]);throw lb(b)}let c=ky(a.canSeeViewProviders);a.resolving=!0;let l=o[t].type||o[t],h,p=a.injectImpl?Wn(a.injectImpl):null,m=Vb(n,r,0);try{s=n[t]=a.factory(void 0,i,o,n,r),e.firstCreatePass&&t>=r.directiveStart&&Z9(t,o[t],e)}finally{p!==null&&Wn(p),ky(c),a.resolving=!1,Lb()}}return s}function d5(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(Tc)?n[Tc]:void 0;return typeof e=="number"?e>=0?e&XN:h5:e}function vN(n,e,t){let r=1<<n;return!!(t[e+(n>>ZN)]&r)}function wN(n,e){return!(n&2)&&!(n&1&&e)}var Fc=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return rP(this._tNode,this._lView,e,bc(r),t)}};function h5(){return new Fc(_n(),Oe())}function js(n){return Fu(()=>{let e=n.prototype.constructor,t=e[Zh]||sE(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let s=i[Zh]||sE(i);if(s&&s!==t)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function sE(n){return eb(n)?()=>{let e=sE(kn(n));return e&&e()}:Xo(n)}function f5(n,e,t,r,i){let s=n,o=e;for(;s!==null&&o!==null&&o[Ce]&2048&&!Au(o);){let a=iP(s,o,t,r|2,Ji);if(a!==Ji)return a;let c=s.parent;if(!c){let l=o[_b];if(l){let h=l.get(t,Ji,r);if(h!==Ji)return h}c=sP(o),o=o[Ac]}s=c}return i}function sP(n){let e=n[_e],t=e.type;return t===2?e.declTNode:t===1?n[Fr]:null}function Cf(n){return l5(_n(),n)}function p5(){return Vu(_n(),Oe())}function Vu(n,e){return new Ht(hi(n,e))}var Ht=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=p5}return n})();function g5(n){return n instanceof Ht?n.nativeElement:n}function m5(){return this._results[Symbol.iterator]()}var Py=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new me}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;let r=xk(e);(this._changesDetected=!Ak(this._results,r,t))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=m5};function oP(n){return(n.flags&128)===128}var NE=(function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n})(NE||{}),aP=new Map,y5=0;function _5(){return y5++}function v5(n){aP.set(n[cf],n)}function oE(n){aP.delete(n[cf])}var IN="__ngContext__";function Mu(n,e){Ki(e)?(n[IN]=e[cf],v5(e)):n[IN]=e}function cP(n){return uP(n[Du])}function lP(n){return uP(n[Or])}function uP(n){for(;n!==null&&!di(n);)n=n[Or];return n}var w5;function PE(n){w5=n}var Lu=new re("",{factory:()=>I5}),I5="ng";var Wy=new re(""),Bs=new re("",{providedIn:"platform",factory:()=>"unknown"});var Ky=new re("",{factory:()=>M(It).body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var dP="r";var hP="di";var fP=!1,pP=new re("",{factory:()=>fP});var b5=(n,e,t,r)=>{};function E5(n,e,t,r){b5(n,e,t,r)}function ME(n){return(n.flags&32)===32}var C5=()=>null;function gP(n,e,t=!1){return C5(n,e,t)}function mP(n,e){let t=n.contentQueries;if(t!==null){let r=ge(null);try{for(let i=0;i<t.length;i+=2){let s=t[i],o=t[i+1];if(o!==-1){let a=n.data[o];fy(s),a.contentQueries(2,e[o],o)}}}finally{ge(r)}}}function aE(n,e,t){fy(0);let r=ge(null);try{e(n,t)}finally{ge(r)}}function yP(n,e,t){if(wb(e)){let r=ge(null);try{let i=e.directiveStart,s=e.directiveEnd;for(let o=i;o<s;o++){let a=n.data[o];if(a.contentQueries){let c=t[o];a.contentQueries(1,c,o)}}}finally{ge(r)}}}var gi=(function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n[n.ExperimentalIsolatedShadowDom=4]="ExperimentalIsolatedShadowDom",n})(gi||{});var Iy;function T5(){if(Iy===void 0&&(Iy=null,Os.trustedTypes))try{Iy=Os.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Iy}function bN(n){return T5()?.createScriptURL(n)||n}var My=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${ty})`}};function Tf(n){return n instanceof My?n.changingThisBreaksApplicationSecurity:n}function OE(n,e){let t=_P(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${ty})`)}return t===e}function _P(n){return n instanceof My&&n.getTypeName()||null}var S5=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function vP(n){return n=String(n),n.match(S5)?n:"unsafe:"+n}function D5(n,e){return n.createText(e)}function A5(n,e,t){n.setValue(e,t)}function wP(n,e,t){return n.createElement(e,t)}function Oy(n,e,t,r,i){n.insertBefore(e,t,r,i)}function IP(n,e,t){n.appendChild(e,t)}function EN(n,e,t,r,i){r!==null?Oy(n,e,t,r,i):IP(n,e,t)}function bP(n,e,t,r){n.removeChild(null,e,t,r)}function x5(n,e,t){n.setAttribute(e,"style",t)}function R5(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function EP(n,e,t){let{mergedAttrs:r,classes:i,styles:s}=t;r!==null&&r5(n,e,r),i!==null&&R5(n,e,i),s!==null&&x5(n,e,s)}var Qy=(function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n})(Qy||{});function ir(n){let e=TP();return e?e.sanitize(Qy.URL,n)||"":OE(n,"URL")?Tf(n):vP(Sc(n))}function CP(n){let e=TP();if(e)return bN(e.sanitize(Qy.RESOURCE_URL,n)||"");if(OE(n,"ResourceURL"))return bN(Tf(n));throw new ce(904,!1)}function k5(n,e){return e==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||e==="href"&&(n==="base"||n==="link")?CP:ir}function FE(n,e,t){return k5(e,t)(n)}function TP(){let n=Oe();return n&&n[Gi].sanitizer}function SP(n){return n instanceof Function?n():n}function N5(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let s=e.length;if(i+s===r||n.charCodeAt(i+s)<=32)return i}t=i+1}}var DP="ng-template";function P5(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&N5(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(VE(n))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&typeof(s=e[i])=="string";)if(s.toLowerCase()===t)return!0}return!1}function VE(n){return n.type===4&&n.value!==DP}function M5(n,e,t){let r=n.type===4&&!t?DP:n.value;return e===r}function O5(n,e,t){let r=4,i=n.attrs,s=i!==null?L5(i):0,o=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!o&&!fi(r)&&!fi(c))return!1;if(o&&fi(c))continue;o=!1,r=c|r&1;continue}if(!o)if(r&4){if(r=2|r&1,c!==""&&!M5(n,c,t)||c===""&&e.length===1){if(fi(r))return!1;o=!0}}else if(r&8){if(i===null||!P5(n,i,c,t)){if(fi(r))return!1;o=!0}}else{let l=e[++a],h=F5(c,i,VE(n),t);if(h===-1){if(fi(r))return!1;o=!0;continue}if(l!==""){let p;if(h>s?p="":p=i[h+1].toLowerCase(),r&2&&l!==p){if(fi(r))return!1;o=!0}}}}return fi(r)||o}function fi(n){return(n&1)===0}function F5(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let s=!1;for(;i<e.length;){let o=e[i];if(o===n)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return U5(e,n)}function V5(n,e,t=!1){for(let r=0;r<e.length;r++)if(O5(n,e[r],t))return!0;return!1}function L5(n){for(let e=0;e<n.length;e++){let t=n[e];if(YN(t))return e}return n.length}function U5(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function CN(n,e){return n?":not("+e.trim()+")":e}function j5(n){let e=n[0],t=1,r=2,i="",s=!1;for(;t<n.length;){let o=n[t];if(typeof o=="string")if(r&2){let a=n[++t];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+o:r&4&&(i+=" "+o);else i!==""&&!fi(o)&&(e+=CN(s,i),i=""),r=o,s=s||!fi(r);t++}return i!==""&&(e+=CN(s,i)),e}function B5(n){return n.map(j5).join(",")}function $5(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let s=n[r];if(typeof s=="string")i===2?s!==""&&e.push(s,n[++r]):i===8&&t.push(s);else{if(!fi(i))break;i=s}r++}return t.length&&e.push(1,...t),e}var sr={};function LE(n,e,t,r,i,s,o,a,c,l,h){let p=Bt+r,m=p+i,b=H5(p,m),k=typeof l=="function"?l():l;return b[_e]={type:n,blueprint:b,template:t,queries:null,viewQuery:a,declTNode:e,data:b.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:c,consts:k,incompleteFirstPass:!1,ssrId:h}}function H5(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:sr);return t}function z5(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=LE(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function UE(n,e,t,r,i,s,o,a,c,l,h){let p=e.blueprint.slice();return p[ui]=i,p[Ce]=r|4|128|8|64|1024,(l!==null||n&&n[Ce]&2048)&&(p[Ce]|=2048),Cb(p),p[hn]=p[Ac]=n,p[jt]=t,p[Gi]=o||n&&n[Gi],p[Et]=a||n&&n[Et],p[Vs]=c||n&&n[Vs]||null,p[Fr]=s,p[cf]=_5(),p[Tu]=h,p[_b]=l,p[mr]=e.type==2?n[mr]:p,p}function q5(n,e,t){let r=hi(e,n),i=z5(t),s=n[Gi].rendererFactory,o=jE(n,UE(n,i,null,AP(t),r,e,null,s.createRenderer(r,t),null,null,null));return n[e.index]=o}function AP(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function xP(n,e,t,r){if(t===0)return-1;let i=e.length;for(let s=0;s<t;s++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function jE(n,e){return n[Du]?n[yb][Or]=e:n[Du]=e,n[yb]=e,e}function F(n=1){RP($t(),Oe(),Yi()+n,!1)}function RP(n,e,t,r){if(!r)if((e[Ce]&3)===3){let s=n.preOrderCheckHooks;s!==null&&Ey(e,s,t)}else{let s=n.preOrderHooks;s!==null&&Cy(e,s,0,t)}sa(t)}var Yy=(function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n})(Yy||{});function cE(n,e,t,r){let i=ge(null);try{let[s,o,a]=n.inputs[t],c=null;(o&Yy.SignalBased)!==0&&(c=e[s][qn]),c!==null&&c.transformFn!==void 0?r=c.transformFn(r):a!==null&&(r=a.call(e,r)),n.setInput!==null?n.setInput(e,c,r,t,s):zN(e,c,s,r)}finally{ge(i)}}var Xi=(function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n})(Xi||{}),G5;function BE(n,e){return G5(n,e)}var Lc=new Set,Jy=(function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n})(Jy||{}),$c=new re(""),TN=new Set;function aa(n){TN.has(n)||(TN.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var $E=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=X({token:n,providedIn:"root",factory:()=>new n})}return n})(),kP=[0,1,2,3],NP=(()=>{class n{ngZone=M(it);scheduler=M(Ms);errorHandler=M(zi,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){M($c,{optional:!0})}execute(){let t=this.sequences.size>0;t&&ut(Ze.AfterRenderHooksStart),this.executing=!0;for(let r of kP)for(let i of this.sequences)if(!(i.erroredOrDestroyed||!i.hooks[r]))try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let s=i.hooks[r];return s(i.pipelinedValue)},i.snapshot))}catch(s){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(s)}this.executing=!1;for(let r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(let r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),t&&ut(Ze.AfterRenderHooksEnd)}register(t){let{view:r}=t;r!==void 0?((r[Rc]??=[]).push(t),Mc(r),r[Ce]|=8192):this.executing?this.deferredRegistrations.add(t):this.addSequence(t)}addSequence(t){this.sequences.add(t),this.scheduler.notify(7)}unregister(t){this.executing&&this.sequences.has(t)?(t.erroredOrDestroyed=!0,t.pipelinedValue=void 0,t.once=!0):(this.sequences.delete(t),this.deferredRegistrations.delete(t))}maybeTrace(t,r){return r?r.run(Jy.AFTER_NEXT_RENDER,t):t()}static \u0275prov=X({token:n,providedIn:"root",factory:()=>new n})}return n})(),Fy=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,t,r,i,s,o=null){this.impl=e,this.hooks=t,this.view=r,this.once=i,this.snapshot=o,this.unregisterOnDestroy=s?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let e=this.view?.[Rc];e&&(this.view[Rc]=e.filter(t=>t!==this))}};function Hc(n,e){let t=e?.injector??M(wt);return aa("NgAfterNextRender"),K5(n,t,e,!0)}function W5(n){return n instanceof Function?[void 0,void 0,n,void 0]:[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function K5(n,e,t,r){let i=e.get($E);i.impl??=e.get(NP);let s=e.get($c,null,{optional:!0}),o=t?.manualCleanup!==!0?e.get(Qn):null,a=e.get(ff,null,{optional:!0}),c=new Fy(i.impl,W5(n),a?.view,r,o,s?.snapshot(null));return i.impl.register(c),c}var PP=new re("",{factory:()=>({queue:new Set,isScheduled:!1,scheduler:null,injector:M(Mt)})});function MP(n,e,t){let r=n.get(PP);if(Array.isArray(e))for(let i of e)r.queue.add(i),t?.detachedLeaveAnimationFns?.push(i);else r.queue.add(e),t?.detachedLeaveAnimationFns?.push(e);r.scheduler&&r.scheduler(n)}function Q5(n,e){let t=n.get(PP);if(e.detachedLeaveAnimationFns){for(let r of e.detachedLeaveAnimationFns)t.queue.delete(r);e.detachedLeaveAnimationFns=void 0}}function Y5(n,e){for(let[t,r]of e)MP(n,r.animateFns)}function SN(n,e,t,r){let i=n?.[kc]?.enter;e!==null&&i&&i.has(t.index)&&Y5(r,i)}function ku(n,e,t,r,i,s,o,a){if(i!=null){let c,l=!1;di(i)?c=i:Ki(i)&&(l=!0,i=i[ui]);let h=Vr(i);n===0&&r!==null?(SN(a,r,s,t),o==null?IP(e,r,h):Oy(e,r,h,o||null,!0)):n===1&&r!==null?(SN(a,r,s,t),Oy(e,r,h,o||null,!0)):n===2?DN(a,s,t,p=>{bP(e,h,l,p)}):n===3&&DN(a,s,t,()=>{e.destroyNode(h)}),c!=null&&l6(e,n,t,c,s,r,o)}}function J5(n,e){OP(n,e),e[ui]=null,e[Fr]=null}function X5(n,e,t,r,i,s){r[ui]=i,r[Fr]=e,Zy(n,r,t,1,i,s)}function OP(n,e){e[Gi].changeDetectionScheduler?.notify(9),Zy(n,e,e[Et],2,null,null)}function Z5(n){let e=n[Du];if(!e)return Kb(n[_e],n);for(;e;){let t=null;if(Ki(e))t=e[Du];else{let r=e[Ot];r&&(t=r)}if(!t){for(;e&&!e[Or]&&e!==n;)Ki(e)&&Kb(e[_e],e),e=e[hn];e===null&&(e=n),Ki(e)&&Kb(e[_e],e),t=e&&e[Or]}e=t}}function HE(n,e){let t=n[Nc],r=t.indexOf(e);t.splice(r,1)}function Xy(n,e){if(Pc(e))return;let t=e[Et];t.destroyNode&&Zy(n,e,t,3,null,null),Z5(e)}function Kb(n,e){if(Pc(e))return;let t=ge(null);try{e[Ce]&=-129,e[Ce]|=256,e[yr]&&pc(e[yr]),n6(n,e),t6(n,e),e[_e].type===1&&e[Et].destroy();let r=e[na];if(r!==null&&di(e[hn])){r!==e[hn]&&HE(r,e);let i=e[Wi];i!==null&&i.detachView(n)}oE(e)}finally{ge(t)}}function DN(n,e,t,r){let i=n?.[kc];if(i==null||i.leave==null||!i.leave.has(e.index))return r(!1);n&&Lc.add(n),MP(t,()=>{if(i.leave&&i.leave.has(e.index)){let o=i.leave.get(e.index),a=[];if(o){for(let c=0;c<o.animateFns.length;c++){let l=o.animateFns[c],{promise:h}=l();a.push(h)}i.detachedLeaveAnimationFns=void 0}i.running=Promise.allSettled(a),e6(n,r)}else n&&Lc.delete(n),r(!1)},i)}function e6(n,e){let t=n[kc]?.running;if(t){t.then(()=>{n[kc].running=void 0,Lc.delete(n),e(!0)});return}e(!1)}function t6(n,e){let t=n.cleanup,r=e[Su];if(t!==null)for(let o=0;o<t.length-1;o+=2)if(typeof t[o]=="string"){let a=t[o+3];a>=0?r[a]():r[-a].unsubscribe(),o+=2}else{let a=r[t[o+1]];t[o].call(a)}r!==null&&(e[Su]=null);let i=e[Ns];if(i!==null){e[Ns]=null;for(let o=0;o<i.length;o++){let a=i[o];a()}}let s=e[Zo];if(s!==null){e[Zo]=null;for(let o of s)o.destroy()}}function n6(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof Vc)){let s=t[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=i[s[o]],c=s[o+1];ut(Ze.LifecycleHookStart,a,c);try{c.call(a)}finally{ut(Ze.LifecycleHookEnd,a,c)}}else{ut(Ze.LifecycleHookStart,i,s);try{s.call(i)}finally{ut(Ze.LifecycleHookEnd,i,s)}}}}}function r6(n,e,t){return i6(n,e.parent,t)}function i6(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[ui];if(ia(r)){let{encapsulation:i}=n.data[r.directiveStart+r.componentOffset];if(i===gi.None||i===gi.Emulated)return null}return hi(r,t)}function s6(n,e,t){return a6(n,e,t)}function o6(n,e,t){return n.type&40?hi(n,t):null}var a6=o6,AN;function zE(n,e,t,r){let i=r6(n,r,e),s=e[Et],o=r.parent||e[Fr],a=s6(o,r,e);if(i!=null)if(Array.isArray(t))for(let c=0;c<t.length;c++)EN(s,i,t[c],a,!1);else EN(s,i,t,a,!1);AN!==void 0&&AN(s,r,e,t,i)}function mf(n,e){if(e!==null){let t=e.type;if(t&3)return hi(e,n);if(t&4)return lE(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return mf(n,r);{let i=n[e.index];return di(i)?lE(-1,i):Vr(i)}}else{if(t&128)return mf(n,e.next);if(t&32)return BE(e,n)()||Vr(n[e.index]);{let r=FP(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=ea(n[mr]);return mf(i,r)}else return mf(n,e.next)}}}return null}function FP(n,e){if(e!==null){let r=n[mr][Fr],i=e.projection;return r.projection[i]}return null}function lE(n,e){let t=Ot+n+1;if(t<e.length){let r=e[t],i=r[_e].firstChild;if(i!==null)return mf(r,i)}return e[ra]}function qE(n,e,t,r,i,s,o){for(;t!=null;){let a=r[Vs];if(t.type===128){t=t.next;continue}let c=r[t.index],l=t.type;if(o&&e===0&&(c&&Mu(Vr(c),r),t.flags|=2),!ME(t))if(l&8)qE(n,e,t.child,r,i,s,!1),ku(e,n,a,i,c,t,s,r);else if(l&32){let h=BE(t,r),p;for(;p=h();)ku(e,n,a,i,p,t,s,r);ku(e,n,a,i,c,t,s,r)}else l&16?c6(n,e,r,t,i,s):ku(e,n,a,i,c,t,s,r);t=o?t.projectionNext:t.next}}function Zy(n,e,t,r,i,s){qE(t,r,n.firstChild,e,i,s,!1)}function c6(n,e,t,r,i,s){let o=t[mr],c=o[Fr].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let h=c[l];ku(e,n,t[Vs],i,h,r,s,t)}else{let l=c,h=o[hn];oP(r)&&(l.flags|=128),qE(n,e,l,h,i,s,!0)}}function l6(n,e,t,r,i,s,o){let a=r[ra],c=Vr(r);a!==c&&ku(e,n,t,s,a,i,o);for(let l=Ot;l<r.length;l++){let h=r[l];Zy(h[_e],h,n,e,s,a)}}function u6(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let s=r.indexOf("-")===-1?void 0:Xi.DashCase;i==null?n.removeStyle(t,r,s):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=Xi.Important),n.setStyle(t,r,i,s))}}function VP(n,e,t,r,i){let s=Yi(),o=r&2;try{sa(-1),o&&e.length>Bt&&RP(n,e,Bt,!1);let a=o?Ze.TemplateUpdateStart:Ze.TemplateCreateStart;ut(a,i,t),t(r,i)}finally{sa(s);let a=o?Ze.TemplateUpdateEnd:Ze.TemplateCreateEnd;ut(a,i,t)}}function GE(n,e,t){y6(n,e,t),(t.flags&64)===64&&_6(n,e,t)}function e_(n,e,t=hi){let r=e.localNames;if(r!==null){let i=e.index+1;for(let s=0;s<r.length;s+=2){let o=r[s+1],a=o===-1?t(e,n):n[o];n[i++]=a}}}function d6(n,e,t,r){let s=r.get(pP,fP)||t===gi.ShadowDom||t===gi.ExperimentalIsolatedShadowDom,o=n.selectRootElement(e,s);return h6(o),o}function h6(n){f6(n)}var f6=()=>null;function p6(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function LP(n,e,t,r,i,s){let o=e[_e];if(WE(n,o,e,t,r)){ia(n)&&m6(e,n.index);return}n.type&3&&(t=p6(t)),g6(n,e,t,r,i,s)}function g6(n,e,t,r,i,s){if(n.type&3){let o=hi(n,e);r=s!=null?s(r,n.value||"",t):r,i.setProperty(o,t,r)}else n.type&12}function m6(n,e){let t=Lr(e,n);t[Ce]&16||(t[Ce]|=64)}function y6(n,e,t){let r=t.directiveStart,i=t.directiveEnd;ia(t)&&q5(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||Ny(t,e);let s=t.initialInputs;for(let o=r;o<i;o++){let a=n.data[o],c=_f(e,n,o,t);if(Mu(c,e),s!==null&&b6(e,o-r,c,a,t,s),Qi(a)){let l=Lr(t.index,e);l[jt]=_f(e,n,o,t)}}}function _6(n,e,t){let r=t.directiveStart,i=t.directiveEnd,s=t.index,o=nN();try{sa(s);for(let a=r;a<i;a++){let c=n.data[a],l=e[a];hy(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&v6(c,l)}}finally{sa(-1),hy(o)}}function v6(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function UP(n,e){let t=n.directiveRegistry,r=null;if(t)for(let i=0;i<t.length;i++){let s=t[i];V5(e,s.selectors,!1)&&(r??=[],Qi(s)?r.unshift(s):r.push(s))}return r}function w6(n,e,t,r,i,s){let o=hi(n,e);I6(e[Et],o,s,n.value,t,r,i)}function I6(n,e,t,r,i,s,o){if(s==null)n.removeAttribute(e,i,t);else{let a=o==null?Sc(s):o(s,r||"",i);n.setAttribute(e,i,a,t)}}function b6(n,e,t,r,i,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;a+=2){let c=o[a],l=o[a+1];cE(r,t,c,l)}}function jP(n,e,t,r,i){let s=Bt+t,o=e[_e],a=i(o,e,n,r,t);e[s]=a,xu(n,!0);let c=n.type===2;return c?(EP(e[Et],a,n),(qk()===0||uf(n))&&Mu(a,e),Gk()):Mu(a,e),yy()&&(!c||!ME(n))&&zE(o,e,a,n),n}function BP(n){let e=n;return Mb()?Qk():(e=e.parent,xu(e,!1)),e}function E6(n,e){let t=n[Vs];if(!t)return;let r;try{r=t.get(_r,null)}catch{r=null}r?.(e)}function WE(n,e,t,r,i){let s=n.inputs?.[r],o=n.hostDirectiveInputs?.[r],a=!1;if(o)for(let c=0;c<o.length;c+=2){let l=o[c],h=o[c+1],p=e.data[l];cE(p,t[l],h,i),a=!0}if(s)for(let c of s){let l=t[c],h=e.data[c];cE(h,l,r,i),a=!0}return a}function C6(n,e){let t=Lr(e,n),r=t[_e];T6(r,t);let i=t[ui];i!==null&&t[Tu]===null&&(t[Tu]=gP(i,t[Vs])),ut(Ze.ComponentStart);try{KE(r,t,t[jt])}finally{ut(Ze.ComponentEnd,t[jt])}}function T6(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function KE(n,e,t){py(e);try{let r=n.viewQuery;r!==null&&aE(1,r,t);let i=n.template;i!==null&&VP(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[Wi]?.finishViewCreation(n),n.staticContentQueries&&mP(n,e),n.staticViewQueries&&aE(2,n.viewQuery,t);let s=n.components;s!==null&&S6(e,s)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[Ce]&=-5,gy()}}function S6(n,e){for(let t=0;t<e.length;t++)C6(n,e[t])}function t_(n,e,t,r){let i=ge(null);try{let s=e.tView,a=n[Ce]&4096?4096:16,c=UE(n,s,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=n[e.index];c[na]=l;let h=n[Wi];return h!==null&&(c[Wi]=h.createEmbeddedView(s)),KE(s,c,t),c}finally{ge(i)}}function vf(n,e){return!e||e.firstChild===null||oP(n)}function wf(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let s=e[t.index];s!==null&&r.push(Vr(s)),di(s)&&$P(s,r);let o=t.type;if(o&8)wf(n,e,t.child,r);else if(o&32){let a=BE(t,e),c;for(;c=a();)r.push(c)}else if(o&16){let a=FP(e,t);if(Array.isArray(a))r.push(...a);else{let c=ea(e[mr]);wf(c[_e],c,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function $P(n,e){for(let t=Ot;t<n.length;t++){let r=n[t],i=r[_e].firstChild;i!==null&&wf(r[_e],r,i,e)}n[ra]!==n[ui]&&e.push(n[ra])}function HP(n){if(n[Rc]!==null){for(let e of n[Rc])e.impl.addSequence(e);n[Rc].length=0}}var zP=[];function D6(n){return n[yr]??A6(n)}function A6(n){let e=zP.pop()??Object.create(R6);return e.lView=n,e}function x6(n){n.lView[yr]!==n&&(n.lView=null,zP.push(n))}var R6=ie(B({},lu),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{Mc(n.lView)},consumerOnSignalRead(){this.lView[yr]=this}});function k6(n){let e=n[yr]??Object.create(N6);return e.lView=n,e}var N6=ie(B({},lu),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=ea(n.lView);for(;e&&!qP(e[_e]);)e=ea(e);e&&Tb(e)},consumerOnSignalRead(){this.lView[yr]=this}});function qP(n){return n.type!==2}function GP(n){if(n[Zo]===null)return;let e=!0;for(;e;){let t=!1;for(let r of n[Zo])r.dirty&&(t=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=t&&!!(n[Ce]&8192)}}var P6=100;function WP(n,e=0){let r=n[Gi].rendererFactory,i=!1;i||r.begin?.();try{M6(n,e)}finally{i||r.end?.()}}function M6(n,e){let t=Ob();try{tf(!0),uE(n,e);let r=0;for(;hf(n);){if(r===P6)throw new ce(103,!1);r++,uE(n,1)}}finally{tf(t)}}function O6(n,e,t,r){if(Pc(e))return;let i=e[Ce],s=!1,o=!1;py(e);let a=!0,c=null,l=null;s||(qP(n)?(l=D6(e),c=uu(l)):gm()===null?(a=!1,l=k6(e),c=uu(l)):e[yr]&&(pc(e[yr]),e[yr]=null));try{Cb(e),Zk(n.bindingStartIndex),t!==null&&VP(n,e,t,2,r);let h=(i&3)===3;if(!s)if(h){let b=n.preOrderCheckHooks;b!==null&&Ey(e,b,null)}else{let b=n.preOrderHooks;b!==null&&Cy(e,b,0,null),Gb(e,0)}if(o||F6(e),GP(e),KP(e,0),n.contentQueries!==null&&mP(n,e),!s)if(h){let b=n.contentCheckHooks;b!==null&&Ey(e,b)}else{let b=n.contentHooks;b!==null&&Cy(e,b,1),Gb(e,1)}L6(n,e);let p=n.components;p!==null&&YP(e,p,0);let m=n.viewQuery;if(m!==null&&aE(2,m,r),!s)if(h){let b=n.viewCheckHooks;b!==null&&Ey(e,b)}else{let b=n.viewHooks;b!==null&&Cy(e,b,2),Gb(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[cy]){for(let b of e[cy])b();e[cy]=null}s||(HP(e),e[Ce]&=-73)}catch(h){throw s||Mc(e),h}finally{l!==null&&(Hh(l,c),a&&x6(l)),gy()}}function KP(n,e){for(let t=cP(n);t!==null;t=lP(t))for(let r=Ot;r<t.length;r++){let i=t[r];QP(i,e)}}function F6(n){for(let e=cP(n);e!==null;e=lP(e)){if(!(e[Ce]&2))continue;let t=e[Nc];for(let r=0;r<t.length;r++){let i=t[r];Tb(i)}}}function V6(n,e,t){ut(Ze.ComponentStart);let r=Lr(e,n);try{QP(r,t)}finally{ut(Ze.ComponentEnd,r[jt])}}function QP(n,e){ly(n)&&uE(n,e)}function uE(n,e){let r=n[_e],i=n[Ce],s=n[yr],o=!!(e===0&&i&16);if(o||=!!(i&64&&e===0),o||=!!(i&1024),o||=!!(s?.dirty&&zh(s)),o||=!1,s&&(s.dirty=!1),n[Ce]&=-9217,o)O6(r,n,r.template,n[jt]);else if(i&8192){let a=ge(null);try{GP(n),KP(n,1);let c=r.components;c!==null&&YP(n,c,1),HP(n)}finally{ge(a)}}}function YP(n,e,t){for(let r=0;r<e.length;r++)V6(n,e[r],t)}function L6(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)sa(~i);else{let s=i,o=t[++r],a=t[++r];tN(o,s);let c=e[s];ut(Ze.HostBindingsUpdateStart,c);try{a(2,c)}finally{ut(Ze.HostBindingsUpdateEnd,c)}}}}finally{sa(-1)}}function QE(n,e){let t=Ob()?64:1088;for(n[Gi].changeDetectionScheduler?.notify(e);n;){n[Ce]|=t;let r=ea(n);if(Au(n)&&!r)return n;n=r}return null}function JP(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function XP(n,e){let t=Ot+e;if(t<n.length)return n[t]}function n_(n,e,t,r=!0){let i=e[_e];if(U6(i,e,n,t),r){let o=lE(t,n),a=e[Et],c=a.parentNode(n[ra]);c!==null&&X5(i,n[Fr],a,e,c,o)}let s=e[Tu];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function ZP(n,e){let t=If(n,e);return t!==void 0&&Xy(t[_e],t),t}function If(n,e){if(n.length<=Ot)return;let t=Ot+e,r=n[t];if(r){let i=r[na];i!==null&&i!==n&&HE(i,r),e>0&&(n[t-1][Or]=r[Or]);let s=of(n,Ot+e);J5(r[_e],r);let o=s[Wi];o!==null&&o.detachView(s[_e]),r[hn]=null,r[Or]=null,r[Ce]&=-129}return r}function U6(n,e,t,r){let i=Ot+r,s=t.length;r>0&&(t[i-1][Or]=e),r<s-Ot?(e[Or]=t[i],db(t,Ot+r,e)):(t.push(e),e[Or]=null),e[hn]=t;let o=e[na];o!==null&&t!==o&&eM(o,e);let a=e[Wi];a!==null&&a.insertView(n),uy(e),e[Ce]|=128}function eM(n,e){let t=n[Nc],r=e[hn];if(Ki(r))n[Ce]|=2;else{let i=r[hn][mr];e[mr]!==i&&(n[Ce]|=2)}t===null?n[Nc]=[e]:t.push(e)}var oa=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,t=e[_e];return wf(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t}get context(){return this._lView[jt]}set context(e){this._lView[jt]=e}get destroyed(){return Pc(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[hn];if(di(e)){let t=e[lf],r=t?t.indexOf(this):-1;r>-1&&(If(e,r),of(t,r))}this._attachedToViewContainer=!1}Xy(this._lView[_e],this._lView)}onDestroy(e){Sb(this._lView,e)}markForCheck(){QE(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[Ce]&=-129}reattach(){uy(this._lView),this._lView[Ce]|=128}detectChanges(){this._lView[Ce]|=1024,WP(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ce(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Au(this._lView),t=this._lView[na];t!==null&&!e&&HE(t,this._lView),OP(this._lView[_e],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new ce(902,!1);this._appRef=e;let t=Au(this._lView),r=this._lView[na];r!==null&&!t&&eM(r,this._lView),uy(this._lView)}};var Us=(()=>{class n{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=j6;constructor(t,r,i){this._declarationLView=t,this._declarationTContainer=r,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,r){return this.createEmbeddedViewImpl(t,r)}createEmbeddedViewImpl(t,r,i){let s=t_(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:r,dehydratedView:i});return new oa(s)}}return n})();function j6(){return YE(_n(),Oe())}function YE(n,e){return n.type&4?new Us(e,n,Vu(n,e)):null}function Sf(n,e,t,r,i){let s=n.data[e];if(s===null)s=B6(n,e,t,r,i),eN()&&(s.flags|=32);else if(s.type&64){s.type=t,s.value=r,s.attrs=i;let o=Kk();s.injectorIndex=o===null?-1:o.injectorIndex}return xu(s,!0),s}function B6(n,e,t,r,i){let s=Pb(),o=Mb(),a=o?s:s&&s.parent,c=n.data[e]=H6(n,a,t,e,r,i);return $6(n,c,s,o),c}function $6(n,e,t,r){n.firstChild===null&&(n.firstChild=e),t!==null&&(r?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function H6(n,e,t,r,i,s){let o=e?e.injectorIndex:-1,a=0;return Wk()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,fieldIndex:-1,customControlIndex:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function z6(n){let e=n[vb]??[],r=n[hn][Et],i=[];for(let s of e)s.data[hP]!==void 0?i.push(s):q6(s,r);n[vb]=i}function q6(n,e){let t=0,r=n.firstChild;if(r){let i=n.data[dP];for(;t<i;){let s=r.nextSibling;bP(e,r,!1),r=s,t++}}}var G6=()=>null,W6=()=>null;function dE(n,e){return G6(n,e)}function tM(n,e,t){return W6(n,e,t)}var nM=class{},r_=class{},hE=class{resolveComponentFactory(e){throw new ce(917,!1)}},Df=class{static NULL=new hE},wr=class{},mi=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>K6()}return n})();function K6(){let n=Oe(),e=_n(),t=Lr(e.index,n);return(Ki(t)?t:n)[Et]}var rM=(()=>{class n{static \u0275prov=X({token:n,providedIn:"root",factory:()=>null})}return n})();var Sy={},fE=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){let i=this.injector.get(e,Sy,r);return i!==Sy||t===Sy?i:this.parentInjector.get(e,t,r)}};function Vy(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)i=ny(i,a);else if(s==2){let c=a,l=e[++o];r=ny(r,c+": "+l+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function je(n,e=0){let t=Oe();if(t===null)return Fe(n,e);let r=_n();return rP(r,t,kn(n),e)}function iM(n,e,t,r,i){let s=r===null?null:{"":-1},o=i(n,t);if(o!==null){let a=o,c=null,l=null;for(let h of o)if(h.resolveHostDirectives!==null){[a,c,l]=h.resolveHostDirectives(o);break}J6(n,e,t,a,s,c,l)}s!==null&&r!==null&&Q6(t,r,s)}function Q6(n,e,t){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let s=t[e[i+1]];if(s==null)throw new ce(-301,!1);r.push(e[i],s)}}function Y6(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function J6(n,e,t,r,i,s,o){let a=r.length,c=null;for(let m=0;m<a;m++){let b=r[m];c===null&&Qi(b)&&(c=b,Y6(n,t,m)),iE(Ny(t,e),n,b.type)}r$(t,n.data.length,a),c?.viewProvidersResolver&&c.viewProvidersResolver(c);for(let m=0;m<a;m++){let b=r[m];b.providersResolver&&b.providersResolver(b)}let l=!1,h=!1,p=xP(n,e,a,null);a>0&&(t.directiveToIndex=new Map);for(let m=0;m<a;m++){let b=r[m];if(t.mergedAttrs=Pu(t.mergedAttrs,b.hostAttrs),Z6(n,t,e,p,b),n$(p,b,i),o!==null&&o.has(b)){let[O,N]=o.get(b);t.directiveToIndex.set(b.type,[p,O+t.directiveStart,N+t.directiveStart])}else(s===null||!s.has(b))&&t.directiveToIndex.set(b.type,p);b.contentQueries!==null&&(t.flags|=4),(b.hostBindings!==null||b.hostAttrs!==null||b.hostVars!==0)&&(t.flags|=64);let k=b.type.prototype;!l&&(k.ngOnChanges||k.ngOnInit||k.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),l=!0),!h&&(k.ngOnChanges||k.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),h=!0),p++}X6(n,t,s)}function X6(n,e,t){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=n.data[r];if(t===null||!t.has(i))xN(0,e,i,r),xN(1,e,i,r),kN(e,r,!1);else{let s=t.get(i);RN(0,e,s,r),RN(1,e,s,r),kN(e,r,!0)}}}function xN(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let s in i)if(i.hasOwnProperty(s)){let o;n===0?o=e.inputs??={}:o=e.outputs??={},o[s]??=[],o[s].push(r),sM(e,s)}}function RN(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let s in i)if(i.hasOwnProperty(s)){let o=i[s],a;n===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[o]??=[],a[o].push(r,s),sM(e,o)}}function sM(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function kN(n,e,t){let{attrs:r,inputs:i,hostDirectiveInputs:s}=n;if(r===null||!t&&i===null||t&&s===null||VE(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let o=null,a=0;for(;a<r.length;){let c=r[a];if(c===0){a+=4;continue}else if(c===5){a+=2;continue}else if(typeof c=="number")break;if(!t&&i.hasOwnProperty(c)){let l=i[c];for(let h of l)if(h===e){o??=[],o.push(c,r[a+1]);break}}else if(t&&s.hasOwnProperty(c)){let l=s[c];for(let h=0;h<l.length;h+=2)if(l[h]===e){o??=[],o.push(l[h+1],r[a+1]);break}}a+=2}n.initialInputs??=[],n.initialInputs.push(o)}function Z6(n,e,t,r,i){n.data[r]=i;let s=i.factory||(i.factory=Xo(i.type,!0)),o=new Vc(s,Qi(i),je,null);n.blueprint[r]=o,t[r]=o,e$(n,e,r,xP(n,t,i.hostVars,sr),i)}function e$(n,e,t,r,i){let s=i.hostBindings;if(s){let o=n.hostBindingOpCodes;o===null&&(o=n.hostBindingOpCodes=[]);let a=~e.index;t$(o)!=a&&o.push(a),o.push(t,r,s)}}function t$(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function n$(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Qi(e)&&(t[""]=n)}}function r$(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function oM(n,e,t,r,i,s,o,a){let c=e[_e],l=c.consts,h=Ur(l,o),p=Sf(c,n,t,r,h);return s&&iM(c,e,p,Ur(l,a),i),p.mergedAttrs=Pu(p.mergedAttrs,p.attrs),p.attrs!==null&&Vy(p,p.attrs,!1),p.mergedAttrs!==null&&Vy(p,p.mergedAttrs,!0),c.queries!==null&&c.queries.elementStart(c,p),p}function aM(n,e){KN(n,e),wb(e)&&n.queries.elementEnd(e)}function i$(n,e,t,r,i,s){let o=e.consts,a=Ur(o,i),c=Sf(e,n,t,r,a);if(c.mergedAttrs=Pu(c.mergedAttrs,c.attrs),s!=null){let l=Ur(o,s);c.localNames=[];for(let h=0;h<l.length;h+=2)c.localNames.push(l[h],-1)}return c.attrs!==null&&Vy(c,c.attrs,!1),c.mergedAttrs!==null&&Vy(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function s$(n,e,t){return n[e]=t}function Zi(n,e,t){if(t===sr)return!1;let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function cM(n,e,t,r){let i=Zi(n,e,t);return Zi(n,e+1,r)||i}function Dy(n,e,t){return function r(i){let s=ia(n)?Lr(n.index,e):e;QE(s,5);let o=e[jt],a=NN(e,o,t,i),c=r.__ngNextListenerFn__;for(;c;)a=NN(e,o,c,i)&&a,c=c.__ngNextListenerFn__;return a}}function NN(n,e,t,r){let i=ge(null);try{return ut(Ze.OutputStart,e,t),t(r)!==!1}catch(s){return E6(n,s),!1}finally{ut(Ze.OutputEnd,e,t),ge(i)}}function lM(n,e,t,r,i,s,o,a){let c=uf(n),l=!1,h=null;if(!r&&c&&(h=a$(e,t,s,n.index)),h!==null){let p=h.__ngLastListenerFn__||h;p.__ngNextListenerFn__=o,h.__ngLastListenerFn__=o,l=!0}else{let p=hi(n,t),m=r?r(p):p;E5(t,m,s,a);let b=i.listen(m,s,a);if(!o$(s)){let k=r?O=>r(Vr(O[n.index])):n.index;uM(k,e,t,s,a,b,!1)}}return l}function o$(n){return n.startsWith("animation")||n.startsWith("transition")}function a$(n,e,t,r){let i=n.cleanup;if(i!=null)for(let s=0;s<i.length-1;s+=2){let o=i[s];if(o===t&&i[s+1]===r){let a=e[Su],c=i[s+2];return a&&a.length>c?a[c]:null}typeof o=="string"&&(s+=2)}return null}function uM(n,e,t,r,i,s,o){let a=e.firstCreatePass?Ab(e):null,c=Db(t),l=c.length;c.push(i,s),a&&a.push(r,n,l,(l+1)*(o?-1:1))}function PN(n,e,t,r,i,s){let o=e[t],a=e[_e],l=a.data[t].outputs[r],p=o[l].subscribe(s);uM(n.index,a,e,i,s,p,!0)}var pE=Symbol("BINDING");var Ly=class extends Df{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=Fs(e);return new Uc(t,this.ngModule)}};function c$(n){return Object.keys(n).map(e=>{let[t,r,i]=n[e],s={propName:t,templateName:e,isSignal:(r&Yy.SignalBased)!==0};return i&&(s.transform=i),s})}function l$(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function u$(n,e,t){let r=e instanceof Mt?e:e?.injector;return r&&n.getStandaloneInjector!==null&&(r=n.getStandaloneInjector(r)||r),r?new fE(t,r):t}function d$(n){let e=n.get(wr,null);if(e===null)throw new ce(407,!1);let t=n.get(rM,null),r=n.get(Ms,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:r,ngReflect:!1}}function h$(n,e){let t=dM(n);return wP(e,t,t==="svg"?Lk:t==="math"?Uk:null)}function dM(n){return(n.selectors[0][0]||"div").toLowerCase()}var Uc=class extends r_{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=c$(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=l$(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=B5(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,r,i,s,o){ut(Ze.DynamicComponentStart);let a=ge(null);try{let c=this.componentDef,l=f$(r,c,o,s),h=u$(c,i||this.ngModule,e),p=d$(h),m=p.rendererFactory.createRenderer(null,c),b=r?d6(m,r,c.encapsulation,h):h$(c,m),k=o?.some(MN)||s?.some(H=>typeof H!="function"&&H.bindings.some(MN)),O=UE(null,l,null,512|AP(c),null,null,p,m,h,null,gP(b,h,!0));O[Bt]=b,py(O);let N=null;try{let H=oM(Bt,O,2,"#host",()=>l.directiveRegistry,!0,0);EP(m,b,H),Mu(b,O),GE(l,O,H),yP(l,H,O),aM(l,H),t!==void 0&&g$(H,this.ngContentSelectors,t),N=Lr(H.index,O),O[jt]=N[jt],KE(l,O,null)}catch(H){throw N!==null&&oE(N),oE(O),H}finally{ut(Ze.DynamicComponentEnd),gy()}return new Uy(this.componentType,O,!!k)}finally{ge(a)}}};function f$(n,e,t,r){let i=n?["ng-version","21.0.5"]:$5(e.selectors[0]),s=null,o=null,a=0;if(t)for(let h of t)a+=h[pE].requiredVars,h.create&&(h.targetIdx=0,(s??=[]).push(h)),h.update&&(h.targetIdx=0,(o??=[]).push(h));if(r)for(let h=0;h<r.length;h++){let p=r[h];if(typeof p!="function")for(let m of p.bindings){a+=m[pE].requiredVars;let b=h+1;m.create&&(m.targetIdx=b,(s??=[]).push(m)),m.update&&(m.targetIdx=b,(o??=[]).push(m))}}let c=[e];if(r)for(let h of r){let p=typeof h=="function"?h:h.type,m=cb(p);c.push(m)}return LE(0,null,p$(s,o),1,a,c,null,null,null,[i],null)}function p$(n,e){return!n&&!e?null:t=>{if(t&1&&n)for(let r of n)r.create();if(t&2&&e)for(let r of e)r.update()}}function MN(n){let e=n[pE].kind;return e==="input"||e==="twoWay"}var Uy=class extends nM{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t,r){super(),this._rootLView=t,this._hasInputBindings=r,this._tNode=df(t[_e],Bt),this.location=Vu(this._tNode,t),this.instance=Lr(this._tNode.index,t)[jt],this.hostView=this.changeDetectorRef=new oa(t,void 0),this.componentType=e}setInput(e,t){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let i=this._rootLView,s=WE(r,i[_e],i,e,t);this.previousInputValues.set(e,t);let o=Lr(r.index,i);QE(o,1)}get injector(){return new Fc(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function g$(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let s=t[i];r.push(s!=null&&s.length?Array.from(s):null)}}var es=(()=>{class n{static __NG_ELEMENT_ID__=m$}return n})();function m$(){let n=_n();return fM(n,Oe())}var y$=es,hM=class extends y${_lContainer;_hostTNode;_hostLView;constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Vu(this._hostTNode,this._hostLView)}get injector(){return new Fc(this._hostTNode,this._hostLView)}get parentInjector(){let e=kE(this._hostTNode,this._hostLView);if(JN(e)){let t=Ry(e,this._hostLView),r=xy(e),i=t[_e].data[r+8];return new Fc(i,t)}else return new Fc(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=ON(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-Ot}createEmbeddedView(e,t,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let o=dE(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},s,o);return this.insertImpl(a,i,vf(this._hostTNode,o)),a}createComponent(e,t,r,i,s,o,a){let c=e&&!Q9(e),l;if(c)l=t;else{let N=t||{};l=N.index,r=N.injector,i=N.projectableNodes,s=N.environmentInjector||N.ngModuleRef,o=N.directives,a=N.bindings}let h=c?e:new Uc(Fs(e)),p=r||this.parentInjector;if(!s&&h.ngModule==null){let H=(c?p:this.parentInjector).get(Mt,null);H&&(s=H)}let m=Fs(h.componentType??{}),b=dE(this._lContainer,m?.id??null),k=b?.firstChild??null,O=h.create(p,i,k,s,o,a);return this.insertImpl(O.hostView,l,vf(this._hostTNode,b)),O}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(Bk(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[hn],l=new hM(c,c[Fr],c[hn]);l.detach(l.indexOf(e))}}let s=this._adjustIndex(t),o=this._lContainer;return n_(o,i,s,r),e.attachToViewContainerRef(),db(Qb(o),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=ON(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=If(this._lContainer,t);r&&(of(Qb(this._lContainer),t),Xy(r[_e],r))}detach(e){let t=this._adjustIndex(e,-1),r=If(this._lContainer,t);return r&&of(Qb(this._lContainer),t)!=null?new oa(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function ON(n){return n[lf]}function Qb(n){return n[lf]||(n[lf]=[])}function fM(n,e){let t,r=e[n.index];return di(r)?t=r:(t=JP(r,e,null,n),e[n.index]=t,jE(e,t)),v$(t,e,n,r),new hM(t,n,e)}function _$(n,e){let t=n[Et],r=t.createComment(""),i=hi(e,n),s=t.parentNode(i);return Oy(t,s,r,t.nextSibling(i),!1),r}var v$=b$,w$=()=>!1;function I$(n,e,t){return w$(n,e,t)}function b$(n,e,t,r){if(n[ra])return;let i;t.type&8?i=Vr(r):i=_$(e,t),n[ra]=i}var gE=class n{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},mE=class n{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){let t=e.queries;if(t!==null){let r=e.contentQueries!==null?e.contentQueries[0]:t.length,i=[];for(let s=0;s<r;s++){let o=t.getByIndex(s),a=this.queries[o.indexInDeclarationView];i.push(a.clone())}return new n(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)JE(e,t).matches!==null&&this.queries[t].setDirty()}},yE=class{flags;read;predicate;constructor(e,t,r=null){this.flags=t,this.read=r,typeof e=="string"?this.predicate=R$(e):this.predicate=e}},_E=class n{queries;constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){let i=t!==null?t.length:0,s=this.getByIndex(r).embeddedTView(e,i);s&&(s.indexInDeclarationView=r,t!==null?t.push(s):t=[s])}return t!==null?new n(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},vE=class n{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,t=-1){this.metadata=e,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new n(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==t;)r=r.parent;return t===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let s=r[i];this.matchTNodeWithReadOption(e,t,E$(t,s)),this.matchTNodeWithReadOption(e,t,Ty(t,e,s,!1,!1))}else r===Us?t.type&4&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,Ty(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===Ht||i===es||i===Us&&t.type&4)this.addMatch(t.index,-2);else{let s=Ty(t,e,i,!1,!1);s!==null&&this.addMatch(t.index,s)}else this.addMatch(t.index,r)}}addMatch(e,t){this.matches===null?this.matches=[e,t]:this.matches.push(e,t)}};function E$(n,e){let t=n.localNames;if(t!==null){for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1]}return null}function C$(n,e){return n.type&11?Vu(n,e):n.type&4?YE(n,e):null}function T$(n,e,t,r){return t===-1?C$(e,n):t===-2?S$(n,e,r):_f(n,n[_e],t,e)}function S$(n,e,t){if(t===Ht)return Vu(e,n);if(t===Us)return YE(e,n);if(t===es)return fM(e,n)}function pM(n,e,t,r){let i=e[Wi].queries[r];if(i.matches===null){let s=n.data,o=t.matches,a=[];for(let c=0;o!==null&&c<o.length;c+=2){let l=o[c];if(l<0)a.push(null);else{let h=s[l];a.push(T$(e,h,o[c+1],t.metadata.read))}}i.matches=a}return i.matches}function wE(n,e,t,r){let i=n.queries.getByIndex(t),s=i.matches;if(s!==null){let o=pM(n,e,i,t);for(let a=0;a<s.length;a+=2){let c=s[a];if(c>0)r.push(o[a/2]);else{let l=s[a+1],h=e[-c];for(let p=Ot;p<h.length;p++){let m=h[p];m[na]===m[hn]&&wE(m[_e],m,l,r)}if(h[Nc]!==null){let p=h[Nc];for(let m=0;m<p.length;m++){let b=p[m];wE(b[_e],b,l,r)}}}}}return r}function D$(n,e){return n[Wi].queries[e].queryList}function A$(n,e,t){let r=new Py((t&4)===4);return zk(n,e,r,r.destroy),(e[Wi]??=new mE).queries.push(new gE(r))-1}function x$(n,e,t,r){let i=$t();if(i.firstCreatePass){let s=_n();k$(i,new yE(e,t,r),s.index),N$(i,n),(t&2)===2&&(i.staticContentQueries=!0)}return A$(i,Oe(),t)}function R$(n){return n.split(",").map(e=>e.trim())}function k$(n,e,t){n.queries===null&&(n.queries=new _E),n.queries.track(new vE(e,t))}function N$(n,e){let t=n.contentQueries||(n.contentQueries=[]),r=t.length?t[t.length-1]:-1;e!==r&&t.push(n.queries.length-1,e)}function JE(n,e){return n.queries.getByIndex(e)}function P$(n,e){let t=n[_e],r=JE(t,e);return r.crossesNgTemplate?wE(t,n,e,[]):pM(t,n,r,e)}var jc=class{},i_=class{};var jy=class extends jc{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new Ly(this);constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t;let s=ab(e);this._bootstrapComponents=SP(s.bootstrap),this._r3Injector=Ub(e,t,[{provide:jc,useValue:this},{provide:Df,useValue:this.componentFactoryResolver},...r],Ps(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},By=class extends i_{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new jy(this.moduleType,e,[])}};var bf=class extends jc{injector;componentFactoryResolver=new Ly(this);instance=null;constructor(e){super();let t=new Cc([...e.providers,{provide:jc,useValue:this},{provide:Df,useValue:this.componentFactoryResolver}],e.parent||Cu(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Af(n,e,t=null){return new bf({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var M$=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=pb(!1,t.type),i=r.length>0?Af([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=X({token:n,providedIn:"environment",factory:()=>new n(Fe(Mt))})}return n})();function Gt(n){return Fu(()=>{let e=gM(n),t=ie(B({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===NE.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(M$).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||gi.Emulated,styles:n.styles||Kn,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&aa("NgStandalone"),mM(t);let r=n.dependencies;return t.directiveDefs=FN(r,O$),t.pipeDefs=FN(r,bk),t.id=L$(t),t})}function O$(n){return Fs(n)||cb(n)}function br(n){return Fu(()=>({type:n.type,bootstrap:n.bootstrap||Kn,declarations:n.declarations||Kn,imports:n.imports||Kn,exports:n.exports||Kn,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function F$(n,e){if(n==null)return ta;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],s,o,a,c;Array.isArray(i)?(a=i[0],s=i[1],o=i[2]??s,c=i[3]||null):(s=i,o=i,a=Yy.None,c=null),t[s]=[r,a,c],e[s]=o}return t}function V$(n){if(n==null)return ta;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function Rt(n){return Fu(()=>{let e=gM(n);return mM(e),e})}function XE(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone??!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function gM(n){let e={};return{type:n.type,providersResolver:null,viewProvidersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||ta,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||Kn,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:F$(n.inputs,e),outputs:V$(n.outputs),debugInfo:null}}function mM(n){n.features?.forEach(e=>e(n))}function FN(n,e){return n?()=>{let t=typeof n=="function"?n():n,r=[];for(let i of t){let s=e(i);s!==null&&r.push(s)}return r}:null}function L$(n){let e=0,t=typeof n.consts=="function"?"":n.consts,r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let s of r.join("|"))e=Math.imul(31,e)+s.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function U$(n){return Object.getPrototypeOf(n.prototype).constructor}function ts(n){let e=U$(n.type),t=!0,r=[n];for(;e;){let i;if(Qi(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new ce(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let o=n;o.inputs=Yb(n.inputs),o.declaredInputs=Yb(n.declaredInputs),o.outputs=Yb(n.outputs);let a=i.hostBindings;a&&z$(n,a);let c=i.viewQuery,l=i.contentQueries;if(c&&$$(n,c),l&&H$(n,l),j$(n,i),Ik(n.outputs,i.outputs),Qi(i)&&i.data.animation){let h=n.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let s=i.features;if(s)for(let o=0;o<s.length;o++){let a=s[o];a&&a.ngInherit&&a(n),a===ts&&(t=!1)}}e=Object.getPrototypeOf(e)}B$(r)}function j$(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t])}}function B$(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Pu(i.hostAttrs,t=Pu(t,i.hostAttrs))}}function Yb(n){return n===ta?{}:n===Kn?[]:n}function $$(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function H$(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,s)=>{e(r,i,s),t(r,i,s)}:n.contentQueries=e}function z$(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function yM(n,e,t,r,i,s,o,a){if(t.firstCreatePass){n.mergedAttrs=Pu(n.mergedAttrs,n.attrs);let h=n.tView=LE(2,n,i,s,o,t.directiveRegistry,t.pipeRegistry,null,t.schemas,t.consts,null);t.queries!==null&&(t.queries.template(t,n),h.queries=t.queries.embeddedTView(n))}a&&(n.flags|=a),xu(n,!1);let c=G$(t,e,n,r);yy()&&zE(t,e,c,n),Mu(c,e);let l=JP(c,e,c,n);e[r+Bt]=l,jE(e,l),I$(l,n,e)}function q$(n,e,t,r,i,s,o,a,c,l,h){let p=t+Bt,m;return e.firstCreatePass?(m=Sf(e,p,4,o||null,a||null),Rb()&&iM(e,n,m,Ur(e.consts,l),UP),KN(e,m)):m=e.data[p],yM(m,n,e,t,r,i,s,c),uf(m)&&GE(e,n,m),l!=null&&e_(n,m,h),m}function $y(n,e,t,r,i,s,o,a,c,l,h){let p=t+Bt,m;if(e.firstCreatePass){if(m=Sf(e,p,4,o||null,a||null),l!=null){let b=Ur(e.consts,l);m.localNames=[];for(let k=0;k<b.length;k+=2)m.localNames.push(b[k],-1)}}else m=e.data[p];return yM(m,n,e,t,r,i,s,c),l!=null&&e_(n,m,h),m}function s_(n,e,t,r,i,s,o,a){let c=Oe(),l=$t(),h=Ur(l.consts,s);return q$(c,l,n,e,t,r,i,h,void 0,o,a),s_}var G$=W$;function W$(n,e,t,r){return _y(!0),e[Et].createComment("")}var ZE=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();function _M(n){return typeof n=="function"&&n[qn]!==void 0}function eC(n){return _M(n)&&typeof n.set=="function"}var tC=new re("");function ca(n){return!!n&&typeof n.then=="function"}function nC(n){return!!n&&typeof n.subscribe=="function"}var vM=new re("");var rC=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r});appInits=M(vM,{optional:!0})??[];injector=M(wt);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let s=fn(this.injector,i);if(ca(s))t.push(s);else if(nC(s)){let o=new Promise((a,c)=>{s.subscribe({complete:a,error:c})});t.push(o)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),o_=new re("");function wM(){_I(()=>{let n="";throw new ce(600,n)})}function IM(n){return n.isBoundToModule}var K$=10;var yi=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=M(_r);afterRenderManager=M($E);zonelessEnabled=M(pf);rootEffectScheduler=M(vy);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new me;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=M(Ls);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(ye(t=>!t))}constructor(){M($c,{optional:!0})}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}_injector=M(Mt);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,r){return this.bootstrapImpl(t,r)}bootstrapImpl(t,r,i=wt.NULL){return this._injector.get(it).run(()=>{ut(Ze.BootstrapComponentStart);let o=t instanceof r_;if(!this._injector.get(rC).done){let k="";throw new ce(405,k)}let c;o?c=t:c=this._injector.get(Df).resolveComponentFactory(t),this.componentTypes.push(c.componentType);let l=IM(c)?void 0:this._injector.get(jc),h=r||c.selector,p=c.create(i,[],h,l),m=p.location.nativeElement,b=p.injector.get(tC,null);return b?.registerApplication(m),p.onDestroy(()=>{this.detachView(p.hostView),yf(this.components,p),b?.unregisterApplication(m)}),this._loadComponent(p),ut(Ze.BootstrapComponentEnd,p),p})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){ut(Ze.ChangeDetectionStart),this.tracingSnapshot!==null?this.tracingSnapshot.run(Jy.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw ut(Ze.ChangeDetectionEnd),new ce(101,!1);let t=ge(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,ge(t),this.afterTick.next(),ut(Ze.ChangeDetectionEnd)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(wr,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<K$;){ut(Ze.ChangeDetectionSyncStart);try{this.synchronizeOnce()}finally{ut(Ze.ChangeDetectionSyncEnd)}}}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let t=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!hf(i))continue;let s=r&&!this.zonelessEnabled?0:1;WP(i,s),t=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}t||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>hf(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;yf(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(t),this._injector.get(o_,[]).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>yf(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new ce(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function yf(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function zc(n,e,t,r){let i=Oe(),s=Oc();if(Zi(i,s,e)){let o=$t(),a=my();w6(a,i,n,e,t,r)}return zc}var cde=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";var IE=class{destroy(e){}updateValue(e,t){}swap(e,t){let r=Math.min(e,t),i=Math.max(e,t),s=this.detach(i);if(i-r>1){let o=this.detach(r);this.attach(r,s),this.attach(i,o)}else this.attach(r,s)}move(e,t){this.attach(t,this.detach(e))}};function Jb(n,e,t,r,i){return n===t&&Object.is(e,r)?1:Object.is(i(n,e),i(t,r))?-1:0}function Q$(n,e,t,r){let i,s,o=0,a=n.length-1,c=void 0;if(Array.isArray(e)){ge(r);let l=e.length-1;for(ge(null);o<=a&&o<=l;){let h=n.at(o),p=e[o],m=Jb(o,h,o,p,t);if(m!==0){m<0&&n.updateValue(o,p),o++;continue}let b=n.at(a),k=e[l],O=Jb(a,b,l,k,t);if(O!==0){O<0&&n.updateValue(a,k),a--,l--;continue}let N=t(o,h),H=t(a,b),Q=t(o,p);if(Object.is(Q,H)){let Z=t(l,k);Object.is(Z,N)?(n.swap(o,a),n.updateValue(a,k),l--,a--):n.move(a,o),n.updateValue(o,p),o++;continue}if(i??=new Hy,s??=LN(n,o,a,t),bE(n,i,o,Q))n.updateValue(o,p),o++,a++;else if(s.has(Q))i.set(N,n.detach(o)),a--;else{let Z=n.create(o,e[o]);n.attach(o,Z),o++,a++}}for(;o<=l;)VN(n,i,t,o,e[o]),o++}else if(e!=null){ge(r);let l=e[Symbol.iterator]();ge(null);let h=l.next();for(;!h.done&&o<=a;){let p=n.at(o),m=h.value,b=Jb(o,p,o,m,t);if(b!==0)b<0&&n.updateValue(o,m),o++,h=l.next();else{i??=new Hy,s??=LN(n,o,a,t);let k=t(o,m);if(bE(n,i,o,k))n.updateValue(o,m),o++,a++,h=l.next();else if(!s.has(k))n.attach(o,n.create(o,m)),o++,a++,h=l.next();else{let O=t(o,p);i.set(O,n.detach(o)),a--}}}for(;!h.done;)VN(n,i,t,n.length,h.value),h=l.next()}for(;o<=a;)n.destroy(n.detach(a--));i?.forEach(l=>{n.destroy(l)})}function bE(n,e,t,r){return e!==void 0&&e.has(r)?(n.attach(t,e.get(r)),e.delete(r),!0):!1}function VN(n,e,t,r,i){if(bE(n,e,r,t(r,i)))n.updateValue(r,i);else{let s=n.create(r,i);n.attach(r,s)}}function LN(n,e,t,r){let i=new Set;for(let s=e;s<=t;s++)i.add(r(s,n.at(s)));return i}var Hy=class{kvMap=new Map;_vMap=void 0;has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let t=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(t)?(this.kvMap.set(e,this._vMap.get(t)),this._vMap.delete(t)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,t){if(this.kvMap.has(e)){let r=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,t)}else this.kvMap.set(e,t)}forEach(e){for(let[t,r]of this.kvMap)if(e(r,t),this._vMap!==void 0){let i=this._vMap;for(;i.has(r);)r=i.get(r),e(r,t)}}};function le(n,e,t,r,i,s,o,a){aa("NgControlFlow");let c=Oe(),l=$t(),h=Ur(l.consts,s);return $y(c,l,n,e,t,r,i,h,256,o,a),iC}function iC(n,e,t,r,i,s,o,a){aa("NgControlFlow");let c=Oe(),l=$t(),h=Ur(l.consts,s);return $y(c,l,n,e,t,r,i,h,512,o,a),iC}function ue(n,e){aa("NgControlFlow");let t=Oe(),r=Oc(),i=t[r]!==sr?t[r]:-1,s=i!==-1?zy(t,Bt+i):void 0,o=0;if(Zi(t,r,n)){let a=ge(null);try{if(s!==void 0&&ZP(s,o),n!==-1){let c=Bt+n,l=zy(t,c),h=SE(t[_e],c),p=tM(l,h,t),m=t_(t,h,e,{dehydratedView:p});n_(l,m,o,vf(h,p))}}finally{ge(a)}}else if(s!==void 0){let a=XP(s,o);a!==void 0&&(a[jt]=e)}}var EE=class{lContainer;$implicit;$index;constructor(e,t,r){this.lContainer=e,this.$implicit=t,this.$index=r}get $count(){return this.lContainer.length-Ot}};function Uu(n,e){return e}var CE=class{hasEmptyBlock;trackByFn;liveCollection;constructor(e,t,r){this.hasEmptyBlock=e,this.trackByFn=t,this.liveCollection=r}};function kt(n,e,t,r,i,s,o,a,c,l,h,p,m){aa("NgControlFlow");let b=Oe(),k=$t(),O=c!==void 0,N=Oe(),H=a?o.bind(N[mr][jt]):o,Q=new CE(O,H);N[Bt+n]=Q,$y(b,k,n+1,e,t,r,i,Ur(k.consts,s),256),O&&$y(b,k,n+2,c,l,h,p,Ur(k.consts,m),512)}var TE=class extends IE{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(e,t,r){super(),this.lContainer=e,this.hostLView=t,this.templateTNode=r}get length(){return this.lContainer.length-Ot}at(e){return this.getLView(e)[jt].$implicit}attach(e,t){let r=t[Tu];this.needsIndexUpdate||=e!==this.length,n_(this.lContainer,t,e,vf(this.templateTNode,r)),Y$(this.lContainer,e)}detach(e){return this.needsIndexUpdate||=e!==this.length-1,J$(this.lContainer,e),X$(this.lContainer,e)}create(e,t){let r=dE(this.lContainer,this.templateTNode.tView.ssrId);return t_(this.hostLView,this.templateTNode,new EE(this.lContainer,t,e),{dehydratedView:r})}destroy(e){Xy(e[_e],e)}updateValue(e,t){this.getLView(e)[jt].$implicit=t}reset(){this.needsIndexUpdate=!1}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[jt].$index=e}getLView(e){return Z$(this.lContainer,e)}};function Nt(n){let e=ge(null),t=Yi();try{let r=Oe(),i=r[_e],s=r[t],o=t+1,a=zy(r,o);if(s.liveCollection===void 0){let l=SE(i,o);s.liveCollection=new TE(a,r,l)}else s.liveCollection.reset();let c=s.liveCollection;if(Q$(c,n,s.trackByFn,e),c.updateIndexes(),s.hasEmptyBlock){let l=Oc(),h=c.length===0;if(Zi(r,l,h)){let p=t+2,m=zy(r,p);if(h){let b=SE(i,p),k=tM(m,b,r),O=t_(r,b,void 0,{dehydratedView:k});n_(m,O,0,vf(b,k))}else i.firstUpdatePass&&z6(m),ZP(m,0)}}}finally{ge(e)}}function zy(n,e){return n[e]}function Y$(n,e){if(n.length<=Ot)return;let t=Ot+e,r=n[t],i=r?r[kc]:void 0;if(r&&i&&i.detachedLeaveAnimationFns&&i.detachedLeaveAnimationFns.length>0){let s=r[Vs];Q5(s,i),Lc.delete(r),i.detachedLeaveAnimationFns=void 0}}function J$(n,e){if(n.length<=Ot)return;let t=Ot+e,r=n[t],i=r?r[kc]:void 0;i&&i.leave&&i.leave.size>0&&(i.detachedLeaveAnimationFns=[])}function X$(n,e){return If(n,e)}function Z$(n,e){return XP(n,e)}function SE(n,e){return df(n,e)}function Le(n,e,t){let r=Oe(),i=Oc();if(Zi(r,i,e)){let s=$t(),o=my();LP(o,r,n,e,r[Et],t)}return Le}function DE(n,e,t,r,i){WE(e,n,t,i?"class":"style",r)}function x(n,e,t,r){let i=Oe(),s=i[_e],o=n+Bt,a=s.firstCreatePass?oM(o,i,2,e,UP,Rb(),t,r):s.data[o];if(jP(a,i,n,e,bM),uf(a)){let c=i[_e];GE(c,i,a),yP(c,a,i)}return r!=null&&e_(i,a),x}function R(){let n=$t(),e=_n(),t=BP(e);return n.firstCreatePass&&aM(n,t),kb(t)&&Nb(),xb(),t.classesWithoutHost!=null&&t5(t)&&DE(n,t,Oe(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&n5(t)&&DE(n,t,Oe(),t.stylesWithoutHost,!1),R}function Pt(n,e,t,r){return x(n,e,t,r),R(),Pt}function vn(n,e,t,r){let i=Oe(),s=i[_e],o=n+Bt,a=s.firstCreatePass?i$(o,s,2,e,t,r):s.data[o];return jP(a,i,n,e,bM),r!=null&&e_(i,a),vn}function Un(){let n=_n(),e=BP(n);return kb(e)&&Nb(),xb(),Un}function ju(n,e,t,r){return vn(n,e,t,r),Un(),ju}var bM=(n,e,t,r,i)=>(_y(!0),wP(e[Et],r,cN()));function Be(){return Oe()}var gf=void 0;function eH(n){let e=Math.floor(Math.abs(n)),t=n.toString().replace(/^[^.]*\.?/,"").length;return e===1&&t===0?1:5}var tH=["en",[["a","p"],["AM","PM"]],[["AM","PM"]],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],gf,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],gf,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm\u202Fa","h:mm:ss\u202Fa","h:mm:ss\u202Fa z","h:mm:ss\u202Fa zzzz"],["{1}, {0}",gf,gf,gf],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",eH],Xb={};function Er(n){let e=nH(n),t=UN(e);if(t)return t;let r=e.split("-")[0];if(t=UN(r),t)return t;if(r==="en")return tH;throw new ce(701,!1)}function UN(n){return n in Xb||(Xb[n]=Os.ng&&Os.ng.common&&Os.ng.common.locales&&Os.ng.common.locales[n]),Xb[n]}var zt=(function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n})(zt||{});function nH(n){return n.toLowerCase().replace(/_/g,"-")}var xf="en-US";var rH=xf;function EM(n){typeof n=="string"&&(rH=n.toLowerCase().replace(/_/g,"-"))}function Y(n,e,t){let r=Oe(),i=$t(),s=_n();return CM(i,r,r[Et],s,n,e,t),Y}function Bu(n,e,t){let r=Oe(),i=$t(),s=_n();return(s.type&3||t)&&lM(s,i,r,t,r[Et],n,e,Dy(s,r,e)),Bu}function CM(n,e,t,r,i,s,o){let a=!0,c=null;if((r.type&3||o)&&(c??=Dy(r,e,s),lM(r,n,e,o,t,i,s,c)&&(a=!1)),a){let l=r.outputs?.[i],h=r.hostDirectiveOutputs?.[i];if(h&&h.length)for(let p=0;p<h.length;p+=2){let m=h[p],b=h[p+1];c??=Dy(r,e,s),PN(r,e,m,b,i,c)}if(l&&l.length)for(let p of l)c??=Dy(r,e,s),PN(r,e,p,i,i,c)}}function $(n=1){return aN(n)}function a_(n,e,t,r){return x$(n,e,t,r),a_}function c_(n){let e=Oe(),t=$t(),r=Fb();fy(r+1);let i=JE(t,r);if(n.dirty&&jk(e)===((i.metadata.flags&2)===2)){if(i.matches===null)n.reset([]);else{let s=P$(e,r);n.reset(s,g5),n.notifyOnChanges()}return!0}return!1}function l_(){return D$(Oe(),Fb())}function sC(n){let e=Yk();return bb(e,Bt+n)}function by(n,e){return n<<17|e<<2}function Bc(n){return n>>17&32767}function iH(n){return(n&2)==2}function sH(n,e){return n&131071|e<<17}function AE(n){return n|2}function Ou(n){return(n&131068)>>2}function Zb(n,e){return n&-131069|e<<2}function oH(n){return(n&1)===1}function xE(n){return n|1}function aH(n,e,t,r,i,s){let o=s?e.classBindings:e.styleBindings,a=Bc(o),c=Ou(o);n[r]=t;let l=!1,h;if(Array.isArray(t)){let p=t;h=p[1],(h===null||Eu(p,h)>0)&&(l=!0)}else h=t;if(i)if(c!==0){let m=Bc(n[a+1]);n[r+1]=by(m,a),m!==0&&(n[m+1]=Zb(n[m+1],r)),n[a+1]=sH(n[a+1],r)}else n[r+1]=by(a,0),a!==0&&(n[a+1]=Zb(n[a+1],r)),a=r;else n[r+1]=by(c,0),a===0?a=r:n[c+1]=Zb(n[c+1],r),c=r;l&&(n[r+1]=AE(n[r+1])),jN(n,h,r,!0),jN(n,h,r,!1),cH(e,h,n,r,s),o=by(a,c),s?e.classBindings=o:e.styleBindings=o}function cH(n,e,t,r,i){let s=i?n.residualClasses:n.residualStyles;s!=null&&typeof e=="string"&&Eu(s,e)>=0&&(t[r+1]=xE(t[r+1]))}function jN(n,e,t,r){let i=n[t+1],s=e===null,o=r?Bc(i):Ou(i),a=!1;for(;o!==0&&(a===!1||s);){let c=n[o],l=n[o+1];lH(c,e)&&(a=!0,n[o+1]=r?xE(l):AE(l)),o=r?Bc(l):Ou(l)}a&&(n[t+1]=r?AE(i):xE(i))}function lH(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?Eu(n,e)>=0:!1}var pi={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function uH(n){return n.substring(pi.key,pi.keyEnd)}function dH(n){return hH(n),TM(n,SM(n,0,pi.textEnd))}function TM(n,e){let t=pi.textEnd;return t===e?-1:(e=pi.keyEnd=fH(n,pi.key=e,t),SM(n,e,t))}function hH(n){pi.key=0,pi.keyEnd=0,pi.value=0,pi.valueEnd=0,pi.textEnd=n.length}function SM(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function fH(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}function qc(n,e,t){return DM(n,e,t,!1),qc}function Wt(n,e){return DM(n,e,null,!0),Wt}function dt(n){gH(IH,pH,n,!0)}function pH(n,e){for(let t=dH(e);t>=0;t=TM(e,t))oy(n,uH(e),!0)}function DM(n,e,t,r){let i=Oe(),s=$t(),o=dy(2);if(s.firstUpdatePass&&xM(s,n,o,r),e!==sr&&Zi(i,o,e)){let a=s.data[Yi()];RM(s,a,i,i[Et],n,i[o+1]=EH(e,t),r,o)}}function gH(n,e,t,r){let i=$t(),s=dy(2);i.firstUpdatePass&&xM(i,null,s,r);let o=Oe();if(t!==sr&&Zi(o,s,t)){let a=i.data[Yi()];if(kM(a,r)&&!AM(i,s)){let c=r?a.classesWithoutHost:a.stylesWithoutHost;c!==null&&(t=ny(c,t||"")),DE(i,a,o,t,r)}else bH(i,a,o,o[Et],o[s+1],o[s+1]=wH(n,e,t),r,s)}}function AM(n,e){return e>=n.expandoStartIndex}function xM(n,e,t,r){let i=n.data;if(i[t+1]===null){let s=i[Yi()],o=AM(n,t);kM(s,r)&&e===null&&!o&&(e=!1),e=mH(i,s,e,r),aH(i,s,e,t,o,r)}}function mH(n,e,t,r){let i=rN(n),s=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=eE(null,n,e,t,r),t=Ef(t,e.attrs,r),s=null);else{let o=e.directiveStylingLast;if(o===-1||n[o]!==i)if(t=eE(i,n,e,t,r),s===null){let c=yH(n,e,r);c!==void 0&&Array.isArray(c)&&(c=eE(null,n,e,c[1],r),c=Ef(c,e.attrs,r),_H(n,e,r,c))}else s=vH(n,e,r)}return s!==void 0&&(r?e.residualClasses=s:e.residualStyles=s),t}function yH(n,e,t){let r=t?e.classBindings:e.styleBindings;if(Ou(r)!==0)return n[Bc(r)]}function _H(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[Bc(i)]=r}function vH(n,e,t){let r,i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++){let o=n[s].hostAttrs;r=Ef(r,o,t)}return Ef(r,e.attrs,t)}function eE(n,e,t,r,i){let s=null,o=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<o&&(s=e[a],r=Ef(r,s.hostAttrs,i),s!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function Ef(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let s=0;s<e.length;s++){let o=e[s];typeof o=="number"?i=o:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),oy(n,o,t?!0:e[++s]))}return n===void 0?null:n}function wH(n,e,t){if(t==null||t==="")return Kn;let r=[],i=Tf(t);if(Array.isArray(i))for(let s=0;s<i.length;s++)n(r,i[s],!0);else if(typeof i=="object")for(let s in i)i.hasOwnProperty(s)&&n(r,s,i[s]);else typeof i=="string"&&e(r,i);return r}function IH(n,e,t){let r=String(e);r!==""&&!r.includes(" ")&&oy(n,r,t)}function bH(n,e,t,r,i,s,o,a){i===sr&&(i=Kn);let c=0,l=0,h=0<i.length?i[0]:null,p=0<s.length?s[0]:null;for(;h!==null||p!==null;){let m=c<i.length?i[c+1]:void 0,b=l<s.length?s[l+1]:void 0,k=null,O;h===p?(c+=2,l+=2,m!==b&&(k=p,O=b)):p===null||h!==null&&h<p?(c+=2,k=h):(l+=2,k=p,O=b),k!==null&&RM(n,e,t,r,k,O,o,a),h=c<i.length?i[c]:null,p=l<s.length?s[l]:null}}function RM(n,e,t,r,i,s,o,a){if(!(e.type&3))return;let c=n.data,l=c[a+1],h=oH(l)?BN(c,e,t,i,Ou(l),o):void 0;if(!qy(h)){qy(s)||iH(l)&&(s=BN(c,null,t,i,a,o));let p=Ib(Yi(),t);u6(r,o,p,i,s)}}function BN(n,e,t,r,i,s){let o=e===null,a;for(;i>0;){let c=n[i],l=Array.isArray(c),h=l?c[1]:c,p=h===null,m=t[i+1];m===sr&&(m=p?Kn:void 0);let b=p?ay(m,r):h===r?m:void 0;if(l&&!qy(b)&&(b=ay(c,r)),qy(b)&&(a=b,o))return a;let k=n[i+1];i=o?Bc(k):Ou(k)}if(e!==null){let c=s?e.residualClasses:e.residualStyles;c!=null&&(a=ay(c,r))}return a}function qy(n){return n!==void 0}function EH(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=Ps(Tf(n)))),n}function kM(n,e){return(n.flags&(e?8:16))!==0}function P(n,e=""){let t=Oe(),r=$t(),i=n+Bt,s=r.firstCreatePass?Sf(r,i,1,e,null):r.data[i],o=CH(r,t,s,e,n);t[i]=o,yy()&&zE(r,t,o,s),xu(s,!1)}var CH=(n,e,t,r,i)=>(_y(!0),D5(e[Et],r));function TH(n,e,t,r=""){return Zi(n,Oc(),t)?e+Sc(t)+r:sr}function SH(n,e,t,r,i,s=""){let o=Xk(),a=cM(n,o,t,i);return dy(2),a?e+Sc(t)+r+Sc(i)+s:sr}function Ne(n){return st("",n),Ne}function st(n,e,t){let r=Oe(),i=TH(r,n,e,t);return i!==sr&&NM(r,Yi(),i),st}function u_(n,e,t,r,i){let s=Oe(),o=SH(s,n,e,t,r,i);return o!==sr&&NM(s,Yi(),o),u_}function NM(n,e,t){let r=Ib(e,n);A5(n[Et],r,t)}function pn(n,e,t){eC(e)&&(e=e());let r=Oe(),i=Oc();if(Zi(r,i,e)){let s=$t(),o=my();LP(o,r,n,e,r[Et],t)}return pn}function wn(n,e){let t=eC(n);return t&&n.set(e),t}function gn(n,e){let t=Oe(),r=$t(),i=_n();return CM(r,t,t[Et],i,n,e),gn}function $N(n,e,t){let r=$t();r.firstCreatePass&&PM(e,r.data,r.blueprint,Qi(n),t)}function PM(n,e,t,r,i){if(n=kn(n),Array.isArray(n))for(let s=0;s<n.length;s++)PM(n[s],e,t,r,i);else{let s=$t(),o=Oe(),a=_n(),c=Ec(n)?n:kn(n.provide),l=mb(n),h=a.providerIndexes&1048575,p=a.directiveStart,m=a.providerIndexes>>20;if(Ec(n)||!n.multi){let b=new Vc(l,i,je,null),k=nE(c,e,i?h:h+m,p);k===-1?(iE(Ny(a,o),s,c),tE(s,n,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(b),o.push(b)):(t[k]=b,o[k]=b)}else{let b=nE(c,e,h+m,p),k=nE(c,e,h,h+m),O=b>=0&&t[b],N=k>=0&&t[k];if(i&&!N||!i&&!O){iE(Ny(a,o),s,c);let H=xH(i?AH:DH,t.length,i,r,l,n);!i&&N&&(t[k].providerFactory=H),tE(s,n,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(H),o.push(H)}else{let H=MM(t[i?k:b],l,!i&&r);tE(s,n,b>-1?b:k,H)}!i&&r&&N&&t[k].componentProviders++}}}function tE(n,e,t,r){let i=Ec(e),s=Ok(e);if(i||s){let c=(s?kn(e.useClass):e).prototype.ngOnDestroy;if(c){let l=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let h=l.indexOf(t);h===-1?l.push(t,[r,c]):l[h+1].push(r,c)}else l.push(t,c)}}}function MM(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function nE(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function DH(n,e,t,r,i){return RE(this.multi,[])}function AH(n,e,t,r,i){let s=this.multi,o;if(this.providerFactory){let a=this.providerFactory.componentProviders,c=_f(r,r[_e],this.providerFactory.index,i);o=c.slice(0,a),RE(s,o);for(let l=a;l<c.length;l++)o.push(c[l])}else o=[],RE(s,o);return o}function RE(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function xH(n,e,t,r,i,s){let o=new Vc(n,t,je,null);return o.multi=[],o.index=e,o.componentProviders=0,MM(o,i,r&&!t),o}function Br(n,e){return t=>{t.providersResolver=(r,i)=>$N(r,i?i(n):n,!1),e&&(t.viewProvidersResolver=(r,i)=>$N(r,i?i(e):e,!0))}}function RH(n,e){let t=n[e];return t===sr?void 0:t}function kH(n,e,t,r,i,s,o){let a=e+t;return cM(n,a,i,s)?s$(n,a+2,o?r.call(o,i,s):r(i,s)):RH(n,a+2)}function Rf(n,e){let t=$t(),r,i=n+Bt;t.firstCreatePass?(r=NH(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];let s=r.factory||(r.factory=Xo(r.type,!0)),o,a=Wn(je);try{let c=ky(!1),l=s();return ky(c),Eb(t,Oe(),i,l),l}finally{Wn(a)}}function NH(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function kf(n,e,t,r){let i=n+Bt,s=Oe(),o=bb(s,i);return PH(s,i)?kH(s,Jk(),e,o.transform,t,r,o):o.transform(t,r)}function PH(n,e){return n[_e].data[e].pure}var Gy=class{ngModuleFactory;componentFactories;constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},oC=(()=>{class n{compileModuleSync(t){return new By(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=ab(t),s=SP(i.declarations).reduce((o,a)=>{let c=Fs(a);return c&&o.push(new Uc(c)),o},[]);return new Gy(r,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var OM=(()=>{class n{applicationErrorHandler=M(_r);appRef=M(yi);taskService=M(Ls);ngZone=M(it);zonelessEnabled=M(pf);tracing=M($c,{optional:!0});zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new mt;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(nf):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(M(qb,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()}))}notify(t){if(!this.zonelessEnabled&&t===5)return;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2;break}case 12:{this.appRef.dirtyFlags|=16;break}case 13:{this.appRef.dirtyFlags|=2;break}case 11:break;case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?Bb:jb;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(nf+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(t),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,Bb(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function FM(){return[{provide:Ms,useExisting:OM},{provide:it,useClass:rf},{provide:pf,useValue:!0}]}function MH(){return typeof $localize<"u"&&$localize.locale||xf}var Nf=new re("",{factory:()=>M(Nf,{optional:!0,skipSelf:!0})||MH()});function He(n,e){return mm(n,e?.equal)}var LM=Symbol("InputSignalNode#UNSET"),ZH=ie(B({},ym),{transformFn:void 0,applyValueToInputSignal(n,e){qh(n,e)}});function UM(n,e){let t=Object.create(ZH);t.value=n,t.transformFn=e?.transform;function r(){if($h(t),t.value===LM){let i=null;throw new ce(-950,i)}return t.value}return r[qn]=t,r}var h_=class{attributeName;constructor(e){this.attributeName=e}__NG_ELEMENT_ID__=()=>Cf(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}};function VM(n,e){return UM(n,e)}function ez(n){return UM(LM,n)}var jM=(VM.required=ez,VM);var aC=new re(""),tz=new re("");function Pf(n){return!n.moduleRef}function nz(n){let e=Pf(n)?n.r3Injector:n.moduleRef.injector,t=e.get(it);return t.run(()=>{Pf(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(_r),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:r})}),Pf(n)){let s=()=>e.destroy(),o=n.platformInjector.get(aC);o.add(s),e.onDestroy(()=>{i.unsubscribe(),o.delete(s)})}else{let s=()=>n.moduleRef.destroy(),o=n.platformInjector.get(aC);o.add(s),n.moduleRef.onDestroy(()=>{yf(n.allPlatformModules,n.moduleRef),i.unsubscribe(),o.delete(s)})}return iz(r,t,()=>{let s=e.get(Ls),o=s.add(),a=e.get(rC);return a.runInitializers(),a.donePromise.then(()=>{let c=e.get(Nf,xf);if(EM(c||xf),!e.get(tz,!0))return Pf(n)?e.get(yi):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(Pf(n)){let h=e.get(yi);return n.rootComponent!==void 0&&h.bootstrap(n.rootComponent),h}else return rz?.(n.moduleRef,n.allPlatformModules),n.moduleRef}).finally(()=>void s.remove(o))})})}var rz;function iz(n,e,t){try{let r=t();return ca(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n(r)),r}}var d_=null;function sz(n=[],e){return wt.create({name:e,providers:[{provide:af,useValue:"platform"},{provide:aC,useValue:new Set([()=>d_=null])},...n]})}function oz(n=[]){if(d_)return d_;let e=sz(n);return d_=e,wM(),az(e),e}function az(n){let e=n.get(Wy,null);fn(n,()=>{e?.forEach(t=>t())})}function cC(){return!1}var $r=(()=>{class n{static __NG_ELEMENT_ID__=cz}return n})();function cz(n){return lz(_n(),Oe(),(n&16)===16)}function lz(n,e,t){if(ia(n)&&!t){let r=Lr(n.index,e);return new oa(r,r)}else if(n.type&175){let r=e[mr];return new oa(r,e)}return null}function BM(n){let{rootComponent:e,appProviders:t,platformProviders:r,platformRef:i}=n;ut(Ze.BootstrapApplicationStart);try{let s=i?.injector??oz(r),o=[FM(),hN,...t||[]],a=new bf({providers:o,parent:s,debugName:"",runEnvironmentInitializers:!1});return nz({r3Injector:a.injector,platformInjector:s,rootComponent:e})}catch(s){return Promise.reject(s)}finally{ut(Ze.BootstrapApplicationEnd)}}function or(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function $M(n,e=NaN){return!isNaN(parseFloat(n))&&!isNaN(Number(n))?Number(n):e}function HM(n,e){let t=Fs(n),r=e.elementInjector||Cu();return new Uc(t).create(r,e.projectableNodes,e.hostElement,e.environmentInjector,e.directives,e.bindings)}var zM=null;function Hr(){return zM}function lC(n){zM??=n}var Mf=class{},f_=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:()=>M(qM),providedIn:"platform"})}return n})();var qM=(()=>{class n extends f_{_location;_history;_doc=M(It);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Hr().getBaseHref(this._doc)}onPopState(t){let r=Hr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=Hr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function KM(n,e){return n?e?n.endsWith("/")?e.startsWith("/")?n+e.slice(1):n+e:e.startsWith("/")?n+e:`${n}/${e}`:n:e}function GM(n){let e=n.search(/#|\?|$/);return n[e-1]==="/"?n.slice(0,e-1)+n.slice(e):n}function la(n){return n&&n[0]!=="?"?`?${n}`:n}var $u=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:()=>M(dz),providedIn:"root"})}return n})(),uz=new re(""),dz=(()=>{class n extends $u{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??M(It).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return KM(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+la(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){let o=this.prepareExternalUrl(i+la(s));this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){let o=this.prepareExternalUrl(i+la(s));this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(Fe(f_),Fe(uz,8))};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Hu=(()=>{class n{_subject=new me;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=pz(GM(WM(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+la(r))}normalize(t){return n.stripTrailingSlash(fz(this._basePath,WM(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+la(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+la(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=la;static joinWithSlash=KM;static stripTrailingSlash=GM;static \u0275fac=function(r){return new(r||n)(Fe($u))};static \u0275prov=X({token:n,factory:()=>hz(),providedIn:"root"})}return n})();function hz(){return new Hu(Fe($u))}function fz(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function WM(n){return n.replace(/\/index.html$/,"")}function pz(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var jn=(function(n){return n[n.Format=0]="Format",n[n.Standalone=1]="Standalone",n})(jn||{}),yt=(function(n){return n[n.Narrow=0]="Narrow",n[n.Abbreviated=1]="Abbreviated",n[n.Wide=2]="Wide",n[n.Short=3]="Short",n})(yt||{}),ar=(function(n){return n[n.Short=0]="Short",n[n.Medium=1]="Medium",n[n.Long=2]="Long",n[n.Full=3]="Full",n})(ar||{}),Hs={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function YM(n){return Er(n)[zt.LocaleId]}function JM(n,e,t){let r=Er(n),i=[r[zt.DayPeriodsFormat],r[zt.DayPeriodsStandalone]],s=zr(i,e);return zr(s,t)}function XM(n,e,t){let r=Er(n),i=[r[zt.DaysFormat],r[zt.DaysStandalone]],s=zr(i,e);return zr(s,t)}function ZM(n,e,t){let r=Er(n),i=[r[zt.MonthsFormat],r[zt.MonthsStandalone]],s=zr(i,e);return zr(s,t)}function eO(n,e){let r=Er(n)[zt.Eras];return zr(r,e)}function Of(n,e){let t=Er(n);return zr(t[zt.DateFormat],e)}function Ff(n,e){let t=Er(n);return zr(t[zt.TimeFormat],e)}function Vf(n,e){let r=Er(n)[zt.DateTimeFormat];return zr(r,e)}function Lf(n,e){let t=Er(n),r=t[zt.NumberSymbols][e];if(typeof r>"u"){if(e===Hs.CurrencyDecimal)return t[zt.NumberSymbols][Hs.Decimal];if(e===Hs.CurrencyGroup)return t[zt.NumberSymbols][Hs.Group]}return r}function tO(n){if(!n[zt.ExtraData])throw new ce(2303,!1)}function nO(n){let e=Er(n);return tO(e),(e[zt.ExtraData][2]||[]).map(r=>typeof r=="string"?uC(r):[uC(r[0]),uC(r[1])])}function rO(n,e,t){let r=Er(n);tO(r);let i=[r[zt.ExtraData][0],r[zt.ExtraData][1]],s=zr(i,e)||[];return zr(s,t)||[]}function zr(n,e){for(let t=e;t>-1;t--)if(typeof n[t]<"u")return n[t];throw new ce(2304,!1)}function uC(n){let[e,t]=n.split(":");return{hours:+e,minutes:+t}}var mz=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,p_={},yz=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;function iO(n,e,t,r){let i=Sz(n);e=$s(t,e)||e;let o=[],a;for(;e;)if(a=yz.exec(e),a){o=o.concat(a.slice(1));let h=o.pop();if(!h)break;e=h}else{o.push(e);break}let c=i.getTimezoneOffset();r&&(c=oO(r,c),i=Tz(i,r));let l="";return o.forEach(h=>{let p=Ez(h);l+=p?p(i,t,c):h==="''"?"'":h.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),l}function v_(n,e,t){let r=new Date(0);return r.setFullYear(n,e,t),r.setHours(0,0,0),r}function $s(n,e){let t=YM(n);if(p_[t]??={},p_[t][e])return p_[t][e];let r="";switch(e){case"shortDate":r=Of(n,ar.Short);break;case"mediumDate":r=Of(n,ar.Medium);break;case"longDate":r=Of(n,ar.Long);break;case"fullDate":r=Of(n,ar.Full);break;case"shortTime":r=Ff(n,ar.Short);break;case"mediumTime":r=Ff(n,ar.Medium);break;case"longTime":r=Ff(n,ar.Long);break;case"fullTime":r=Ff(n,ar.Full);break;case"short":let i=$s(n,"shortTime"),s=$s(n,"shortDate");r=g_(Vf(n,ar.Short),[i,s]);break;case"medium":let o=$s(n,"mediumTime"),a=$s(n,"mediumDate");r=g_(Vf(n,ar.Medium),[o,a]);break;case"long":let c=$s(n,"longTime"),l=$s(n,"longDate");r=g_(Vf(n,ar.Long),[c,l]);break;case"full":let h=$s(n,"fullTime"),p=$s(n,"fullDate");r=g_(Vf(n,ar.Full),[h,p]);break}return r&&(p_[t][e]=r),r}function g_(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,r){return e!=null&&r in e?e[r]:t})),n}function _i(n,e,t="-",r,i){let s="";(n<0||i&&n<=0)&&(i?n=-n+1:(n=-n,s=t));let o=String(n);for(;o.length<e;)o="0"+o;return r&&(o=o.slice(o.length-e)),s+o}function _z(n,e){return _i(n,3).substring(0,e)}function Kt(n,e,t=0,r=!1,i=!1){return function(s,o){let a=vz(n,s);if((t>0||a>-t)&&(a+=t),n===3)a===0&&t===-12&&(a=12);else if(n===6)return _z(a,e);let c=Lf(o,Hs.MinusSign);return _i(a,e,c,r,i)}}function vz(n,e){switch(n){case 0:return e.getFullYear();case 1:return e.getMonth();case 2:return e.getDate();case 3:return e.getHours();case 4:return e.getMinutes();case 5:return e.getSeconds();case 6:return e.getMilliseconds();case 7:return e.getDay();default:throw new ce(2301,!1)}}function bt(n,e,t=jn.Format,r=!1){return function(i,s){return wz(i,s,n,e,t,r)}}function wz(n,e,t,r,i,s){switch(t){case 2:return ZM(e,i,r)[n.getMonth()];case 1:return XM(e,i,r)[n.getDay()];case 0:let o=n.getHours(),a=n.getMinutes();if(s){let l=nO(e),h=rO(e,i,r),p=l.findIndex(m=>{if(Array.isArray(m)){let[b,k]=m,O=o>=b.hours&&a>=b.minutes,N=o<k.hours||o===k.hours&&a<k.minutes;if(b.hours<k.hours){if(O&&N)return!0}else if(O||N)return!0}else if(m.hours===o&&m.minutes===a)return!0;return!1});if(p!==-1)return h[p]}return JM(e,i,r)[o<12?0:1];case 3:return eO(e,r)[n.getFullYear()<=0?0:1];default:let c=t;throw new ce(2302,!1)}}function m_(n){return function(e,t,r){let i=-1*r,s=Lf(t,Hs.MinusSign),o=i>0?Math.floor(i/60):Math.ceil(i/60);switch(n){case 0:return(i>=0?"+":"")+_i(o,2,s)+_i(Math.abs(i%60),2,s);case 1:return"GMT"+(i>=0?"+":"")+_i(o,1,s);case 2:return"GMT"+(i>=0?"+":"")+_i(o,2,s)+":"+_i(Math.abs(i%60),2,s);case 3:return r===0?"Z":(i>=0?"+":"")+_i(o,2,s)+":"+_i(Math.abs(i%60),2,s);default:throw new ce(2310,!1)}}}var Iz=0,__=4;function bz(n){let e=v_(n,Iz,1).getDay();return v_(n,0,1+(e<=__?__:__+7)-e)}function sO(n){let e=n.getDay(),t=e===0?-3:__-e;return v_(n.getFullYear(),n.getMonth(),n.getDate()+t)}function dC(n,e=!1){return function(t,r){let i;if(e){let s=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,o=t.getDate();i=1+Math.floor((o+s)/7)}else{let s=sO(t),o=bz(s.getFullYear()),a=s.getTime()-o.getTime();i=1+Math.round(a/6048e5)}return _i(i,n,Lf(r,Hs.MinusSign))}}function y_(n,e=!1){return function(t,r){let s=sO(t).getFullYear();return _i(s,n,Lf(r,Hs.MinusSign),e)}}var hC={};function Ez(n){if(hC[n])return hC[n];let e;switch(n){case"G":case"GG":case"GGG":e=bt(3,yt.Abbreviated);break;case"GGGG":e=bt(3,yt.Wide);break;case"GGGGG":e=bt(3,yt.Narrow);break;case"y":e=Kt(0,1,0,!1,!0);break;case"yy":e=Kt(0,2,0,!0,!0);break;case"yyy":e=Kt(0,3,0,!1,!0);break;case"yyyy":e=Kt(0,4,0,!1,!0);break;case"Y":e=y_(1);break;case"YY":e=y_(2,!0);break;case"YYY":e=y_(3);break;case"YYYY":e=y_(4);break;case"M":case"L":e=Kt(1,1,1);break;case"MM":case"LL":e=Kt(1,2,1);break;case"MMM":e=bt(2,yt.Abbreviated);break;case"MMMM":e=bt(2,yt.Wide);break;case"MMMMM":e=bt(2,yt.Narrow);break;case"LLL":e=bt(2,yt.Abbreviated,jn.Standalone);break;case"LLLL":e=bt(2,yt.Wide,jn.Standalone);break;case"LLLLL":e=bt(2,yt.Narrow,jn.Standalone);break;case"w":e=dC(1);break;case"ww":e=dC(2);break;case"W":e=dC(1,!0);break;case"d":e=Kt(2,1);break;case"dd":e=Kt(2,2);break;case"c":case"cc":e=Kt(7,1);break;case"ccc":e=bt(1,yt.Abbreviated,jn.Standalone);break;case"cccc":e=bt(1,yt.Wide,jn.Standalone);break;case"ccccc":e=bt(1,yt.Narrow,jn.Standalone);break;case"cccccc":e=bt(1,yt.Short,jn.Standalone);break;case"E":case"EE":case"EEE":e=bt(1,yt.Abbreviated);break;case"EEEE":e=bt(1,yt.Wide);break;case"EEEEE":e=bt(1,yt.Narrow);break;case"EEEEEE":e=bt(1,yt.Short);break;case"a":case"aa":case"aaa":e=bt(0,yt.Abbreviated);break;case"aaaa":e=bt(0,yt.Wide);break;case"aaaaa":e=bt(0,yt.Narrow);break;case"b":case"bb":case"bbb":e=bt(0,yt.Abbreviated,jn.Standalone,!0);break;case"bbbb":e=bt(0,yt.Wide,jn.Standalone,!0);break;case"bbbbb":e=bt(0,yt.Narrow,jn.Standalone,!0);break;case"B":case"BB":case"BBB":e=bt(0,yt.Abbreviated,jn.Format,!0);break;case"BBBB":e=bt(0,yt.Wide,jn.Format,!0);break;case"BBBBB":e=bt(0,yt.Narrow,jn.Format,!0);break;case"h":e=Kt(3,1,-12);break;case"hh":e=Kt(3,2,-12);break;case"H":e=Kt(3,1);break;case"HH":e=Kt(3,2);break;case"m":e=Kt(4,1);break;case"mm":e=Kt(4,2);break;case"s":e=Kt(5,1);break;case"ss":e=Kt(5,2);break;case"S":e=Kt(6,1);break;case"SS":e=Kt(6,2);break;case"SSS":e=Kt(6,3);break;case"Z":case"ZZ":case"ZZZ":e=m_(0);break;case"ZZZZZ":e=m_(3);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=m_(1);break;case"OOOO":case"ZZZZ":case"zzzz":e=m_(2);break;default:return null}return hC[n]=e,e}function oO(n,e){n=n.replace(/:/g,"");let t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function Cz(n,e){return n=new Date(n.getTime()),n.setMinutes(n.getMinutes()+e),n}function Tz(n,e,t){let i=n.getTimezoneOffset(),s=oO(e,i);return Cz(n,-1*(s-i))}function Sz(n){if(QM(n))return n;if(typeof n=="number"&&!isNaN(n))return new Date(n);if(typeof n=="string"){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){let[i,s=1,o=1]=n.split("-").map(a=>+a);return v_(i,s-1,o)}let t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let r;if(r=n.match(mz))return Dz(r)}let e=new Date(n);if(!QM(e))throw new ce(2311,!1);return e}function Dz(n){let e=new Date(0),t=0,r=0,i=n[8]?e.setUTCFullYear:e.setFullYear,s=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),r=Number(n[9]+n[11])),i.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));let o=Number(n[4]||0)-t,a=Number(n[5]||0)-r,c=Number(n[6]||0),l=Math.floor(parseFloat("0."+(n[7]||0))*1e3);return s.call(e,o,a,c,l),e}function QM(n){return n instanceof Date&&!isNaN(n.valueOf())}function Az(n,e){return new ce(2100,!1)}var xz="mediumDate",aO=new re(""),cO=new re(""),Uf=(()=>{class n{locale;defaultTimezone;defaultOptions;constructor(t,r,i){this.locale=t,this.defaultTimezone=r,this.defaultOptions=i}transform(t,r,i,s){if(t==null||t===""||t!==t)return null;try{let o=r??this.defaultOptions?.dateFormat??xz,a=i??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return iO(t,o,s||this.locale,a)}catch(o){throw Az(n,o.message)}}static \u0275fac=function(r){return new(r||n)(je(Nf,16),je(aO,24),je(cO,24))};static \u0275pipe=XE({name:"date",type:n,pure:!0})}return n})();var cr=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=br({type:n});static \u0275inj=rr({})}return n})();function fC(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,s]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}var jf=class{};var pC="browser";function lO(n){return n===pC}var Bf=class{_doc;constructor(e){this._doc=e}manager},w_=(()=>{class n extends Bf{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i,s){return t.addEventListener(r,i,s),()=>this.removeEventListener(t,r,i,s)}removeEventListener(t,r,i,s){return t.removeEventListener(r,i,s)}static \u0275fac=function(r){return new(r||n)(Fe(It))};static \u0275prov=X({token:n,factory:n.\u0275fac})}return n})(),E_=new re(""),vC=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,r){this._zone=r,t.forEach(o=>{o.manager=this});let i=t.filter(o=>!(o instanceof w_));this._plugins=i.slice().reverse();let s=t.find(o=>o instanceof w_);s&&this._plugins.push(s)}addEventListener(t,r,i,s){return this._findPluginFor(r).addEventListener(t,r,i,s)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(s=>s.supports(t)),!r)throw new ce(5101,!1);return this._eventNameToPlugin.set(t,r),r}static \u0275fac=function(r){return new(r||n)(Fe(E_),Fe(it))};static \u0275prov=X({token:n,factory:n.\u0275fac})}return n})(),mC="ng-app-id";function uO(n){for(let e of n)e.remove()}function dO(n,e){let t=e.createElement("style");return t.textContent=n,t}function kz(n,e,t,r){let i=n.head?.querySelectorAll(`style[${mC}="${e}"],link[${mC}="${e}"]`);if(i)for(let s of i)s.removeAttribute(mC),s instanceof HTMLLinkElement?r.set(s.href.slice(s.href.lastIndexOf("/")+1),{usage:0,elements:[s]}):s.textContent&&t.set(s.textContent,{usage:0,elements:[s]})}function _C(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var wC=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(t,r,i,s={}){this.doc=t,this.appId=r,this.nonce=i,kz(t,r,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,r){for(let i of t)this.addUsage(i,this.inline,dO);r?.forEach(i=>this.addUsage(i,this.external,_C))}removeStyles(t,r){for(let i of t)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(t,r,i){let s=r.get(t);s?s.usage++:r.set(t,{usage:1,elements:[...this.hosts].map(o=>this.addElement(o,i(t,this.doc)))})}removeUsage(t,r){let i=r.get(t);i&&(i.usage--,i.usage<=0&&(uO(i.elements),r.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])uO(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(t,dO(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(t,_C(r,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,r){return this.nonce&&r.setAttribute("nonce",this.nonce),t.appendChild(r)}static \u0275fac=function(r){return new(r||n)(Fe(It),Fe(Lu),Fe(Ky,8),Fe(Bs))};static \u0275prov=X({token:n,factory:n.\u0275fac})}return n})(),yC={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},IC=/%COMP%/g;var fO="%COMP%",Nz=`_nghost-${fO}`,Pz=`_ngcontent-${fO}`,Mz=!0,Oz=new re("",{factory:()=>Mz});function Fz(n){return Pz.replace(IC,n)}function Vz(n){return Nz.replace(IC,n)}function pO(n,e){return e.map(t=>t.replace(IC,n))}var bC=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,r,i,s,o,a,c=null,l=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.ngZone=a,this.nonce=c,this.tracingService=l,this.platformIsServer=!1,this.defaultRenderer=new $f(t,o,a,this.platformIsServer,this.tracingService)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(t,r);return i instanceof b_?i.applyToHost(t):i instanceof Hf&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,s=i.get(r.id);if(!s){let o=this.doc,a=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.platformIsServer,m=this.tracingService;switch(r.encapsulation){case gi.Emulated:s=new b_(c,l,r,this.appId,h,o,a,p,m);break;case gi.ShadowDom:return new I_(c,t,r,o,a,this.nonce,p,m,l);case gi.ExperimentalIsolatedShadowDom:return new I_(c,t,r,o,a,this.nonce,p,m);default:s=new Hf(c,l,r,h,o,a,p,m);break}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(r){return new(r||n)(Fe(vC),Fe(wC),Fe(Lu),Fe(Oz),Fe(It),Fe(it),Fe(Ky),Fe($c,8))};static \u0275prov=X({token:n,factory:n.\u0275fac})}return n})(),$f=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,r,i,s){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.tracingService=s}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(yC[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(hO(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(hO(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new ce(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let s=yC[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=yC[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Xi.DashCase|Xi.Important)?e.style.setProperty(t,r,i&Xi.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Xi.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r,i){if(typeof e=="string"&&(e=Hr().getGlobalEventTarget(this.doc,e),!e))throw new ce(5102,!1);let s=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(s=this.tracingService.wrapEventListener(e,t,s)),this.eventManager.addEventListener(e,t,s,i)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;e(t)===!1&&t.preventDefault()}}};function hO(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var I_=class extends $f{hostEl;sharedStylesHost;shadowRoot;constructor(e,t,r,i,s,o,a,c,l){super(e,i,s,a,c),this.hostEl=t,this.sharedStylesHost=l,this.shadowRoot=t.attachShadow({mode:"open"}),this.sharedStylesHost&&this.sharedStylesHost.addHost(this.shadowRoot);let h=r.styles;h=pO(r.id,h);for(let m of h){let b=document.createElement("style");o&&b.setAttribute("nonce",o),b.textContent=m,this.shadowRoot.appendChild(b)}let p=r.getExternalStyles?.();if(p)for(let m of p){let b=_C(m,i);o&&b.setAttribute("nonce",o),this.shadowRoot.appendChild(b)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost&&this.sharedStylesHost.removeHost(this.shadowRoot)}},Hf=class extends $f{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,r,i,s,o,a,c,l){super(e,s,o,a,c),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i;let h=r.styles;this.styles=l?pO(l,h):h,this.styleUrls=r.getExternalStyles?.(l)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&Lc.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},b_=class extends Hf{contentAttr;hostAttr;constructor(e,t,r,i,s,o,a,c,l){let h=i+"-"+r.id;super(e,t,r,s,o,a,c,l,h),this.contentAttr=Fz(h),this.hostAttr=Vz(h)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}};var C_=class n extends Mf{supportsDOMEvents=!0;static makeCurrent(){lC(new n)}onAndCancel(e,t,r,i){return e.addEventListener(t,r,i),()=>{e.removeEventListener(t,r,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=Lz();return t==null?null:Uz(t)}resetBaseElement(){zf=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return fC(document.cookie,e)}},zf=null;function Lz(){return zf=zf||document.head.querySelector("base"),zf?zf.getAttribute("href"):null}function Uz(n){return new URL(n,document.baseURI).pathname}var jz=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:n.\u0275fac})}return n})(),gO=["alt","control","meta","shift"],Bz={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},$z={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},mO=(()=>{class n extends Bf{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i,s){let o=n.parseEventName(r),a=n.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Hr().onAndCancel(t,o.domEventName,a,s))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let s=n._normalizeKey(r.pop()),o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),gO.forEach(l=>{let h=r.indexOf(l);h>-1&&(r.splice(h,1),o+=l+".")}),o+=s,r.length!=0||s.length===0)return null;let c={};return c.domEventName=i,c.fullKey=o,c}static matchEventFullKeyCode(t,r){let i=Bz[t.key]||t.key,s="";return r.indexOf("code.")>-1&&(i=t.code,s="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),gO.forEach(o=>{if(o!==i){let a=$z[o];a(t)&&(s+=o+".")}}),s+=i,s===r)}static eventCallback(t,r,i){return s=>{n.matchEventFullKeyCode(s,t)&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(r){return new(r||n)(Fe(It))};static \u0275prov=X({token:n,factory:n.\u0275fac})}return n})();function EC(n,e,t){let r=B({rootComponent:n,platformRef:t?.platformRef},Hz(e));return BM(r)}function Hz(n){return{appProviders:[...Kz,...n?.providers??[]],platformProviders:Wz}}function zz(){C_.makeCurrent()}function qz(){return new zi}function Gz(){return PE(document),document}var Wz=[{provide:Bs,useValue:pC},{provide:Wy,useValue:zz,multi:!0},{provide:It,useFactory:Gz}];var Kz=[{provide:af,useValue:"root"},{provide:zi,useFactory:qz},{provide:E_,useClass:w_,multi:!0},{provide:E_,useClass:mO,multi:!0},bC,wC,vC,{provide:wr,useExisting:bC},{provide:jf,useClass:jz},[]];var yO=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(r){return new(r||n)(Fe(It))};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Ae="primary",rp=Symbol("RouteTitle"),AC=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Yc(n){return new AC(n)}function SO(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let s=0;s<r.length;s++){let o=r[s],a=n[s];if(o[0]===":")i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function R_(n){return new Promise((e,t)=>{n.pipe(ks()).subscribe({next:r=>e(r),error:r=>t(r)})})}function Yz(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!ns(n[t],e[t]))return!1;return!0}function ns(n,e){let t=n?xC(n):void 0,r=e?xC(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!DO(n[i],e[i]))return!1;return!0}function xC(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function DO(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}else return n===e}function AO(n){return n.length>0?n[n.length-1]:null}function Xc(n){return Kh(n)?n:ca(n)?De(Promise.resolve(n)):de(n)}function xO(n){return Kh(n)?R_(n):Promise.resolve(n)}var Jz={exact:kO,subset:NO},RO={exact:Xz,subset:Zz,ignored:()=>!0};function _O(n,e,t){return Jz[t.paths](n.root,e.root,t.matrixParams)&&RO[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function Xz(n,e){return ns(n,e)}function kO(n,e,t){if(!Kc(n.segments,e.segments)||!D_(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!kO(n.children[r],e.children[r],t))return!1;return!0}function Zz(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>DO(n[t],e[t]))}function NO(n,e,t){return PO(n,e,e.segments,t)}function PO(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!Kc(i,t)||e.hasChildren()||!D_(i,t,r))}else if(n.segments.length===t.length){if(!Kc(n.segments,t)||!D_(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!NO(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!Kc(n.segments,i)||!D_(n.segments,i,r)||!n.children[Ae]?!1:PO(n.children[Ae],e,s,r)}}function D_(n,e,t){return e.every((r,i)=>RO[t](n[i].parameters,r.parameters))}var wi=class{root;queryParams;fragment;_queryParamMap;constructor(e=new at([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Yc(this.queryParams),this._queryParamMap}toString(){return n8.serialize(this)}},at=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return A_(this)}},ua=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Yc(this.parameters),this._parameterMap}toString(){return OO(this)}};function e8(n,e){return Kc(n,e)&&n.every((t,r)=>ns(t.parameters,e[r].parameters))}function Kc(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function t8(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===Ae&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==Ae&&(t=t.concat(e(i,r)))}),t}var ip=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:()=>new da,providedIn:"root"})}return n})(),da=class{parse(e){let t=new kC(e);return new wi(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${qf(e.root,!0)}`,r=s8(e.queryParams),i=typeof e.fragment=="string"?`#${r8(e.fragment)}`:"";return`${t}${r}${i}`}},n8=new da;function A_(n){return n.segments.map(e=>OO(e)).join("/")}function qf(n,e){if(!n.hasChildren())return A_(n);if(e){let t=n.children[Ae]?qf(n.children[Ae],!1):"",r=[];return Object.entries(n.children).forEach(([i,s])=>{i!==Ae&&r.push(`${i}:${qf(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=t8(n,(r,i)=>i===Ae?[qf(n.children[Ae],!1)]:[`${i}:${qf(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[Ae]!=null?`${A_(n)}/${t[0]}`:`${A_(n)}/(${t.join("//")})`}}function MO(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function T_(n){return MO(n).replace(/%3B/gi,";")}function r8(n){return encodeURI(n)}function RC(n){return MO(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function x_(n){return decodeURIComponent(n)}function vO(n){return x_(n.replace(/\+/g,"%20"))}function OO(n){return`${RC(n.path)}${i8(n.parameters)}`}function i8(n){return Object.entries(n).map(([e,t])=>`;${RC(e)}=${RC(t)}`).join("")}function s8(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${T_(t)}=${T_(i)}`).join("&"):`${T_(t)}=${T_(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var o8=/^[^\/()?;#]+/;function CC(n){let e=n.match(o8);return e?e[0]:""}var a8=/^[^\/()?;=#]+/;function c8(n){let e=n.match(a8);return e?e[0]:""}var l8=/^[^=?&#]+/;function u8(n){let e=n.match(l8);return e?e[0]:""}var d8=/^[^&#]+/;function h8(n){let e=n.match(d8);return e?e[0]:""}var kC=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new at([],{}):new at([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Ae]=new at(e,t)),r}parseSegment(){let e=CC(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new ce(4009,!1);return this.capture(e),new ua(x_(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=c8(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=CC(this.remaining);i&&(r=i,this.capture(r))}e[x_(t)]=x_(r)}parseQueryParam(e){let t=u8(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let o=h8(this.remaining);o&&(r=o,this.capture(r))}let i=vO(t),s=vO(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=CC(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new ce(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=Ae);let o=this.parseChildren();t[s??Ae]=Object.keys(o).length===1&&o[Ae]?o[Ae]:new at([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new ce(4011,!1)}};function FO(n){return n.segments.length>0?new at([],{[Ae]:n}):n}function VO(n){let e={};for(let[r,i]of Object.entries(n.children)){let s=VO(i);if(r===Ae&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let t=new at(n.segments,e);return f8(t)}function f8(n){if(n.numberOfChildren===1&&n.children[Ae]){let e=n.children[Ae];return new at(n.segments.concat(e.segments),e.children)}return n}function ha(n){return n instanceof wi}function LO(n,e,t=null,r=null,i=new da){let s=UO(n);return jO(s,e,t,r,i)}function UO(n){let e;function t(s){let o={};for(let c of s.children){let l=t(c);o[c.outlet]=l}let a=new at(s.url,o);return s===n&&(e=a),a}let r=t(n.root),i=FO(r);return e??i}function jO(n,e,t,r,i){let s=n;for(;s.parent;)s=s.parent;if(e.length===0)return TC(s,s,s,t,r,i);let o=p8(e);if(o.toRoot())return TC(s,s,new at([],{}),t,r,i);let a=g8(o,s,n),c=a.processChildren?Wf(a.segmentGroup,a.index,o.commands):$O(a.segmentGroup,a.index,o.commands);return TC(s,a.segmentGroup,c,t,r,i)}function k_(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Yf(n){return typeof n=="object"&&n!=null&&n.outlets}function wO(n,e,t){n||="\u0275";let r=new wi;return r.queryParams={[n]:e},t.parse(t.serialize(r)).queryParams[n]}function TC(n,e,t,r,i,s){let o={};for(let[l,h]of Object.entries(r??{}))o[l]=Array.isArray(h)?h.map(p=>wO(l,p,s)):wO(l,h,s);let a;n===e?a=t:a=BO(n,e,t);let c=FO(VO(a));return new wi(c,o,i)}function BO(n,e,t){let r={};return Object.entries(n.children).forEach(([i,s])=>{s===e?r[i]=t:r[i]=BO(s,e,t)}),new at(n.segments,r)}var N_=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&k_(r[0]))throw new ce(4003,!1);let i=r.find(Yf);if(i&&i!==AO(r))throw new ce(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function p8(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new N_(!0,0,n);let e=0,t=!1,r=n.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,s]},[]);return new N_(t,e,r)}var qu=class{segmentGroup;processChildren;index;constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function g8(n,e,t){if(n.isAbsolute)return new qu(e,!0,0);if(!t)return new qu(e,!1,NaN);if(t.parent===null)return new qu(t,!0,0);let r=k_(n.commands[0])?0:1,i=t.segments.length-1+r;return m8(t,i,n.numberOfDoubleDots)}function m8(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new ce(4005,!1);i=r.segments.length}return new qu(r,!1,i-s)}function y8(n){return Yf(n[0])?n[0].outlets:{[Ae]:n}}function $O(n,e,t){if(n??=new at([],{}),n.segments.length===0&&n.hasChildren())return Wf(n,e,t);let r=_8(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let s=new at(n.segments.slice(0,r.pathIndex),{});return s.children[Ae]=new at(n.segments.slice(r.pathIndex),n.children),Wf(s,0,i)}else return r.match&&i.length===0?new at(n.segments,{}):r.match&&!n.hasChildren()?NC(n,e,t):r.match?Wf(n,0,i):NC(n,e,t)}function Wf(n,e,t){if(t.length===0)return new at(n.segments,{});{let r=y8(t),i={};if(Object.keys(r).some(s=>s!==Ae)&&n.children[Ae]&&n.numberOfChildren===1&&n.children[Ae].segments.length===0){let s=Wf(n.children[Ae],e,t);return new at(n.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=$O(n.children[s],e,o))}),Object.entries(n.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new at(n.segments,i)}}function _8(n,e,t){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;let o=n.segments[i],a=t[r];if(Yf(a))break;let c=`${a}`,l=r<t.length-1?t[r+1]:null;if(i>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!bO(c,l,o))return s;r+=2}else{if(!bO(c,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function NC(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let s=t[i];if(Yf(s)){let c=v8(s.outlets);return new at(r,c)}if(i===0&&k_(t[0])){let c=n.segments[e];r.push(new ua(c.path,IO(t[0]))),i++;continue}let o=Yf(s)?s.outlets[Ae]:`${s}`,a=i<t.length-1?t[i+1]:null;o&&a&&k_(a)?(r.push(new ua(o,IO(a))),i+=2):(r.push(new ua(o,{})),i++)}return new at(r,{})}function v8(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=NC(new at([],{}),0,r))}),e}function IO(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function bO(n,e,t){return n==t.path&&ns(e,t.parameters)}var Kf="imperative",In=(function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n})(In||{}),Tr=class{id;url;constructor(e,t){this.id=e,this.url=t}},Jc=class extends Tr{type=In.NavigationStart;navigationTrigger;restoredState;constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Ii=class extends Tr{urlAfterRedirects;type=In.NavigationEnd;constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Yn=(function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n[n.Aborted=4]="Aborted",n})(Yn||{}),Jf=(function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n})(Jf||{}),rs=class extends Tr{reason;code;type=In.NavigationCancel;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},zs=class extends Tr{reason;code;type=In.NavigationSkipped;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}},Wu=class extends Tr{error;target;type=In.NavigationError;constructor(e,t,r,i){super(e,t),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Xf=class extends Tr{urlAfterRedirects;state;type=In.RoutesRecognized;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},P_=class extends Tr{urlAfterRedirects;state;type=In.GuardsCheckStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},M_=class extends Tr{urlAfterRedirects;state;shouldActivate;type=In.GuardsCheckEnd;constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},O_=class extends Tr{urlAfterRedirects;state;type=In.ResolveStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},F_=class extends Tr{urlAfterRedirects;state;type=In.ResolveEnd;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},V_=class{route;type=In.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},L_=class{route;type=In.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},U_=class{snapshot;type=In.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},j_=class{snapshot;type=In.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},B_=class{snapshot;type=In.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},$_=class{snapshot;type=In.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var Zf=class{},Ku=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function w8(n){return!(n instanceof Zf)&&!(n instanceof Ku)}function I8(n,e){return n.providers&&!n._injector&&(n._injector=Af(n.providers,e,`Route: ${n.path}`)),n._injector??e}function vi(n){return n.outlet||Ae}function b8(n,e){let t=n.filter(r=>vi(r)===e);return t.push(...n.filter(r=>vi(r)!==e)),t}function Ju(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var H_=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return Ju(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new Xu(this.rootInjector)}},Xu=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new H_(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(r){return new(r||n)(Fe(Mt))};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),z_=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=PC(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=PC(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=MC(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return MC(e,this._root).map(t=>t.value)}};function PC(n,e){if(n===e.value)return e;for(let t of e.children){let r=PC(n,t);if(r)return r}return null}function MC(n,e){if(n===e.value)return[e];for(let t of e.children){let r=MC(n,t);if(r.length)return r.unshift(e),r}return[]}var Cr=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function zu(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var ep=class extends z_{snapshot;constructor(e,t){super(e),this.snapshot=t,jC(this,e)}toString(){return this.snapshot.toString()}};function HO(n){let e=E8(n),t=new ct([new ua("",{})]),r=new ct({}),i=new ct({}),s=new ct({}),o=new ct(""),a=new qs(t,r,s,o,i,Ae,n,e.root);return a.snapshot=e.root,new ep(new Cr(a,[]),e)}function E8(n){let e={},t={},r={},s=new Qc([],e,r,"",t,Ae,n,null,{});return new tp("",new Cr(s,[]))}var qs=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,r,i,s,o,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(ye(l=>l[rp]))??de(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(ye(e=>Yc(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(ye(e=>Yc(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function q_(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:B(B({},e.params),n.params),data:B(B({},e.data),n.data),resolve:B(B(B(B({},n.data),e.data),i?.data),n._resolvedData)}:r={params:B({},n.params),data:B({},n.data),resolve:B(B({},n.data),n._resolvedData??{})},i&&qO(i)&&(r.resolve[rp]=i.title),r}var Qc=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[rp]}constructor(e,t,r,i,s,o,a,c,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Yc(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Yc(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},tp=class extends z_{url;constructor(e,t){super(t),this.url=e,jC(this,t)}toString(){return zO(this._root)}};function jC(n,e){e.value._routerState=n,e.children.forEach(t=>jC(n,t))}function zO(n){let e=n.children.length>0?` { ${n.children.map(zO).join(", ")} } `:"";return`${n.value}${e}`}function SC(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,ns(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),ns(e.params,t.params)||n.paramsSubject.next(t.params),Yz(e.url,t.url)||n.urlSubject.next(t.url),ns(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function OC(n,e){let t=ns(n.params,e.params)&&e8(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||OC(n.parent,e.parent))}function qO(n){return typeof n.title=="string"||n.title===null}var GO=new re(""),sp=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=Ae;activateEvents=new We;deactivateEvents=new We;attachEvents=new We;detachEvents=new We;routerOutletData=jM();parentContexts=M(Xu);location=M(es);changeDetector=M($r);inputBinder=M(Q_,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new ce(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new ce(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new ce(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new ce(4013,!1);this._activatedRoute=t;let i=this.location,o=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new FC(t,a,i.injector,this.routerOutletData);this.activated=i.createComponent(o,{index:i.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=Rt({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[jr]})}return n})(),FC=class{route;childContexts;parent;outletData;constructor(e,t,r,i){this.route=e,this.childContexts=t,this.parent=r,this.outletData=i}get(e,t){return e===qs?this.route:e===Xu?this.childContexts:e===GO?this.outletData:this.parent.get(e,t)}},Q_=new re("");var BC=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=Gt({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&Pt(0,"router-outlet")},dependencies:[sp],encapsulation:2})}return n})();function $C(n){let e=n.children&&n.children.map($C),t=e?ie(B({},n),{children:e}):B({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Ae&&(t.component=BC),t}function C8(n,e,t){let r=np(n,e._root,t?t._root:void 0);return new ep(r,e)}function np(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=T8(n,e,t);return new Cr(r,i)}else{if(n.shouldAttach(e.value)){let s=n.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>np(n,a)),o}}let r=S8(e.value),i=e.children.map(s=>np(n,s));return new Cr(r,i)}}function T8(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return np(n,r,i);return np(n,r)})}function S8(n){return new qs(new ct(n.url),new ct(n.params),new ct(n.queryParams),new ct(n.fragment),new ct(n.data),n.outlet,n.component,n)}var Qu=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},WO="ngNavigationCancelingError";function G_(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=ha(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=KO(!1,Yn.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function KO(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[WO]=!0,t.cancellationCode=e,t}function D8(n){return QO(n)&&ha(n.url)}function QO(n){return!!n&&n[WO]}var A8=(n,e,t,r)=>ye(i=>(new VC(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),VC=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,r,i,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),SC(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=zu(t);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=zu(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){let o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=zu(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=zu(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new $_(s.value.snapshot))}),e.children.length&&this.forwardEvent(new j_(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(SC(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),SC(a.route.value),this.activateChildRoutes(e,null,o.children)}else o.attachRef=null,o.route=i,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}else this.activateChildRoutes(e,null,r)}},W_=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Gu=class{component;route;constructor(e,t){this.component=e,this.route=t}};function x8(n,e,t){let r=n._root,i=e?e._root:null;return Gf(r,i,t,[r.value])}function R8(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function Zu(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!tb(n)?n:e.get(n):r}function Gf(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=zu(e);return n.children.forEach(o=>{k8(o,s[o.value.outlet],t,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>Qf(a,t.getContext(o),i)),i}function k8(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let c=N8(o,s,s.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new W_(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?Gf(n,e,a?a.children:null,r,i):Gf(n,e,t,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Gu(a.outlet.component,o))}else o&&Qf(e,a,i),i.canActivateChecks.push(new W_(r)),s.component?Gf(n,null,a?a.children:null,r,i):Gf(n,null,t,r,i);return i}function N8(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!Kc(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Kc(n.url,e.url)||!ns(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!OC(n,e)||!ns(n.queryParams,e.queryParams);case"paramsChange":default:return!OC(n,e)}}function Qf(n,e,t){let r=zu(n),i=n.value;Object.entries(r).forEach(([s,o])=>{i.component?e?Qf(o,e.children.getContext(s),t):Qf(o,null,t):Qf(o,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new Gu(e.outlet.component,i)):t.canDeactivateChecks.push(new Gu(null,i)):t.canDeactivateChecks.push(new Gu(null,i))}function op(n){return typeof n=="function"}function P8(n){return typeof n=="boolean"}function M8(n){return n&&op(n.canLoad)}function O8(n){return n&&op(n.canActivate)}function F8(n){return n&&op(n.canActivateChild)}function V8(n){return n&&op(n.canDeactivate)}function L8(n){return n&&op(n.canMatch)}function YO(n){return n instanceof xs||n?.name==="EmptyError"}var S_=Symbol("INITIAL_VALUE");function Yu(){return Gn(n=>FI(n.map(e=>e.pipe(Ln(1),vc(S_)))).pipe(ye(e=>{for(let t of e)if(t!==!0){if(t===S_)return S_;if(t===!1||U8(t))return t}return!0}),pr(e=>e!==S_),Ln(1)))}function U8(n){return ha(n)||n instanceof Qu}function JO(n){return n.aborted?de(void 0).pipe(Ln(1)):new Se(e=>{let t=()=>{e.next(),e.complete()};return n.addEventListener("abort",t),()=>n.removeEventListener("abort",t)})}function XO(n){return li(JO(n))}function j8(n,e){return Vn(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return o.length===0&&s.length===0?de(ie(B({},t),{guardsResult:!0})):B8(o,r,i,n).pipe(Vn(a=>a&&P8(a)?$8(r,s,n,e):de(a)),ye(a=>ie(B({},t),{guardsResult:a})))})}function B8(n,e,t,r){return De(n).pipe(Vn(i=>W8(i.component,i.route,t,e,r)),ks(i=>i!==!0,!0))}function $8(n,e,t,r){return De(e).pipe(Jh(i=>_u(z8(i.route.parent,r),H8(i.route,r),G8(n,i.path,t),q8(n,i.route,t))),ks(i=>i!==!0,!0))}function H8(n,e){return n!==null&&e&&e(new B_(n)),de(!0)}function z8(n,e){return n!==null&&e&&e(new U_(n)),de(!0)}function q8(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return de(!0);let i=r.map(s=>Qh(()=>{let o=Ju(e)??t,a=Zu(s,o),c=O8(a)?a.canActivate(e,n):fn(o,()=>a(e,n));return Xc(c).pipe(ks())}));return de(i).pipe(Yu())}function G8(n,e,t){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>R8(o)).filter(o=>o!==null).map(o=>Qh(()=>{let a=o.guards.map(c=>{let l=Ju(o.node)??t,h=Zu(c,l),p=F8(h)?h.canActivateChild(r,n):fn(l,()=>h(r,n));return Xc(p).pipe(ks())});return de(a).pipe(Yu())}));return de(s).pipe(Yu())}function W8(n,e,t,r,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return de(!0);let o=s.map(a=>{let c=Ju(e)??i,l=Zu(a,c),h=V8(l)?l.canDeactivate(n,e,t,r):fn(c,()=>l(n,e,t,r));return Xc(h).pipe(ks())});return de(o).pipe(Yu())}function K8(n,e,t,r,i){let s=e.canLoad;if(s===void 0||s.length===0)return de(!0);let o=s.map(a=>{let c=Zu(a,n),l=M8(c)?c.canLoad(e,t):fn(n,()=>c(e,t)),h=Xc(l);return i?h.pipe(XO(i)):h});return de(o).pipe(Yu(),ZO(r))}function ZO(n){return AI(vt(e=>{if(typeof e!="boolean")throw G_(n,e)}),ye(e=>e===!0))}function Q8(n,e,t,r,i){let s=e.canMatch;if(!s||s.length===0)return de(!0);let o=s.map(a=>{let c=Zu(a,n),l=L8(c)?c.canMatch(e,t):fn(n,()=>c(e,t)),h=Xc(l);return i?h.pipe(XO(i)):h});return de(o).pipe(Yu(),ZO(r))}var Wc=class e2 extends Error{segmentGroup;constructor(e){super(),this.segmentGroup=e||null,Object.setPrototypeOf(this,e2.prototype)}},LC=class t2 extends Error{urlTree;constructor(e){super(),this.urlTree=e,Object.setPrototypeOf(this,t2.prototype)}};function Y8(n){throw new ce(4e3,!1)}function J8(n){throw KO(!1,Yn.GuardRejected)}var X8=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}async lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return r;if(i.numberOfChildren>1||!i.children[Ae])throw Y8(`${e.redirectTo}`);i=i.children[Ae]}}async applyRedirectCommands(e,t,r,i,s){let o=await Z8(t,i,s);if(o instanceof wi)throw new LC(o);let a=this.applyRedirectCreateUrlTree(o,this.urlSerializer.parse(o),e,r);if(o[0]==="/")throw new LC(a);return a}applyRedirectCreateUrlTree(e,t,r,i){let s=this.createSegmentGroup(e,t.root,r,i);return new wi(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s[0]===":"){let a=s.substring(1);r[i]=t[a]}else r[i]=s}),r}createSegmentGroup(e,t,r,i){let s=this.createSegments(e,t.segments,r,i),o={};return Object.entries(t.children).forEach(([a,c])=>{o[a]=this.createSegmentGroup(e,c,r,i)}),new at(s,o)}createSegments(e,t,r,i){return t.map(s=>s.path[0]===":"?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new ce(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}};function Z8(n,e,t){if(typeof n=="string")return Promise.resolve(n);let r=n,{queryParams:i,fragment:s,routeConfig:o,url:a,outlet:c,params:l,data:h,title:p}=e;return R_(Xc(fn(t,()=>r({params:l,data:h,queryParams:i,fragment:s,routeConfig:o,url:a,outlet:c,title:p}))))}var UC={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function eq(n,e,t,r,i,s){let o=n2(n,e,t);return o.matched?(r=I8(e,r),Q8(r,e,t,i,s).pipe(ye(a=>a===!0?o:B({},UC)))):de(o)}function n2(n,e,t){if(e.path==="**")return tq(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?B({},UC):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||SO)(t,n,e);if(!i)return B({},UC);let s={};Object.entries(i.posParams??{}).forEach(([a,c])=>{s[a]=c.path});let o=i.consumed.length>0?B(B({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function tq(n){return{matched:!0,parameters:n.length>0?AO(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function EO(n,e,t,r){return t.length>0&&iq(n,t,r)?{segmentGroup:new at(e,rq(r,new at(t,n.children))),slicedSegments:[]}:t.length===0&&sq(n,t,r)?{segmentGroup:new at(n.segments,nq(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new at(n.segments,n.children),slicedSegments:t}}function nq(n,e,t,r){let i={};for(let s of t)if(Y_(n,e,s)&&!r[vi(s)]){let o=new at([],{});i[vi(s)]=o}return B(B({},r),i)}function rq(n,e){let t={};t[Ae]=e;for(let r of n)if(r.path===""&&vi(r)!==Ae){let i=new at([],{});t[vi(r)]=i}return t}function iq(n,e,t){return t.some(r=>Y_(n,e,r)&&vi(r)!==Ae)}function sq(n,e,t){return t.some(r=>Y_(n,e,r))}function Y_(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function oq(n,e,t){return e.length===0&&!n.children[t]}var aq=class{};async function cq(n,e,t,r,i,s,o="emptyOnly",a){return new uq(n,e,t,r,i,o,s,a).recognize()}var lq=31,uq=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;abortSignal;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,r,i,s,o,a,c){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.abortSignal=c,this.applyRedirects=new X8(this.urlSerializer,this.urlTree)}noMatchError(e){return new ce(4002,`'${e.segmentGroup}'`)}async recognize(){let e=EO(this.urlTree.root,[],[],this.config).segmentGroup,{children:t,rootSnapshot:r}=await this.match(e),i=new Cr(r,t),s=new tp("",i),o=LO(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}async match(e){let t=new Qc([],Object.freeze({}),Object.freeze(B({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),Ae,this.rootComponentType,null,{});try{return{children:await this.processSegmentGroup(this.injector,this.config,e,Ae,t),rootSnapshot:t}}catch(r){if(r instanceof LC)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Wc?this.noMatchError(r):r}}async processSegmentGroup(e,t,r,i,s){if(r.segments.length===0&&r.hasChildren())return this.processChildren(e,t,r,s);let o=await this.processSegment(e,t,r,r.segments,i,!0,s);return o instanceof Cr?[o]:[]}async processChildren(e,t,r,i){let s=[];for(let c of Object.keys(r.children))c==="primary"?s.unshift(c):s.push(c);let o=[];for(let c of s){let l=r.children[c],h=b8(t,c),p=await this.processSegmentGroup(e,h,l,c,i);o.push(...p)}let a=r2(o);return dq(a),a}async processSegment(e,t,r,i,s,o,a){for(let c of t)try{return await this.processSegmentAgainstRoute(c._injector??e,t,c,r,i,s,o,a)}catch(l){if(l instanceof Wc||YO(l))continue;throw l}if(oq(r,i,s))return new aq;throw new Wc(r)}async processSegmentAgainstRoute(e,t,r,i,s,o,a,c){if(vi(r)!==o&&(o===Ae||!Y_(i,s,r)))throw new Wc(i);if(r.redirectTo===void 0)return this.matchSegmentAgainstRoute(e,i,r,s,o,c);if(this.allowRedirects&&a)return this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,s,o,c);throw new Wc(i)}async expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o,a){let{matched:c,parameters:l,consumedSegments:h,positionalParamSegments:p,remainingSegments:m}=n2(t,i,s);if(!c)throw new Wc(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>lq&&(this.allowRedirects=!1));let b=new Qc(s,l,Object.freeze(B({},this.urlTree.queryParams)),this.urlTree.fragment,CO(i),vi(i),i.component??i._loadedComponent??null,i,TO(i)),k=q_(b,a,this.paramsInheritanceStrategy);if(b.params=Object.freeze(k.params),b.data=Object.freeze(k.data),this.abortSignal.aborted)throw new Error(this.abortSignal.reason);let O=await this.applyRedirects.applyRedirectCommands(h,i.redirectTo,p,b,e),N=await this.applyRedirects.lineralizeSegments(i,O);return this.processSegment(e,r,t,N.concat(m),o,!1,a)}async matchSegmentAgainstRoute(e,t,r,i,s,o){if(this.abortSignal.aborted)throw new Error(this.abortSignal.reason);let a=await R_(eq(t,r,i,e,this.urlSerializer,this.abortSignal));if(r.path==="**"&&(t.children={}),!a?.matched)throw new Wc(t);e=r._injector??e;let{routes:c}=await this.getChildConfig(e,r,i),l=r._loadedInjector??e,{parameters:h,consumedSegments:p,remainingSegments:m}=a,b=new Qc(p,h,Object.freeze(B({},this.urlTree.queryParams)),this.urlTree.fragment,CO(r),vi(r),r.component??r._loadedComponent??null,r,TO(r)),k=q_(b,o,this.paramsInheritanceStrategy);b.params=Object.freeze(k.params),b.data=Object.freeze(k.data);let{segmentGroup:O,slicedSegments:N}=EO(t,p,m,c);if(N.length===0&&O.hasChildren()){let Z=await this.processChildren(l,c,O,b);return new Cr(b,Z)}if(c.length===0&&N.length===0)return new Cr(b,[]);let H=vi(r)===s,Q=await this.processSegment(l,c,O,N,H?Ae:s,!0,b);return new Cr(b,Q instanceof Cr?[Q]:[])}async getChildConfig(e,t,r){if(t.children)return{routes:t.children,injector:e};if(t.loadChildren){if(t._loadedRoutes!==void 0)return{routes:t._loadedRoutes,injector:t._loadedInjector};if(this.abortSignal.aborted)throw new Error(this.abortSignal.reason);if(await R_(K8(e,t,r,this.urlSerializer,this.abortSignal))){let s=await this.configLoader.loadChildren(e,t);return t._loadedRoutes=s.routes,t._loadedInjector=s.injector,s}throw J8(t)}return{routes:[],injector:e}}};function dq(n){n.sort((e,t)=>e.value.outlet===Ae?-1:t.value.outlet===Ae?1:e.value.outlet.localeCompare(t.value.outlet))}function hq(n){let e=n.value.routeConfig;return e&&e.path===""}function r2(n){let e=[],t=new Set;for(let r of n){if(!hq(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=r2(r.children);e.push(new Cr(r.value,i))}return e.filter(r=>!t.has(r))}function CO(n){return n.data||{}}function TO(n){return n.resolve||{}}var fq=new re("",{factory:()=>cq});function pq(n,e,t,r,i,s,o){let a=n.get(fq);return Vn(c=>de(c).pipe(Gn(l=>a(n,e,t,r,l.extractedUrl,i,s,o)),ye(({state:l,tree:h})=>ie(B({},c),{targetSnapshot:l,urlAfterRedirects:h}))))}function gq(n,e){return Vn(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return de(t);let s=new Set(i.map(c=>c.route)),o=new Set;for(let c of s)if(!o.has(c))for(let l of i2(c))o.add(l);let a=0;return De(o).pipe(Jh(c=>s.has(c)?mq(c,r,n,e):(c.data=q_(c,c.parent,n).resolve,de(void 0))),vt(()=>a++),Wm(1),Vn(c=>a===o.size?de(t):Fn))})}function i2(n){let e=n.children.map(t=>i2(t)).flat();return[n,...e]}function mq(n,e,t,r){let i=n.routeConfig,s=n._resolve;return i?.title!==void 0&&!qO(i)&&(s[rp]=i.title),Qh(()=>(n.data=q_(n,n.parent,t).resolve,yq(s,n,e,r).pipe(ye(o=>(n._resolvedData=o,n.data=B(B({},n.data),o),null)))))}function yq(n,e,t,r){let i=xC(n);if(i.length===0)return de({});let s={};return De(i).pipe(Vn(o=>_q(n[o],e,t,r).pipe(ks(),vt(a=>{if(a instanceof Qu)throw G_(new da,a);s[o]=a}))),Wm(1),ye(()=>s),Rs(o=>YO(o)?Fn:Mr(o)))}function _q(n,e,t,r){let i=Ju(e)??r,s=Zu(n,i),o=s.resolve?s.resolve(e,t):fn(i,()=>s(e,t));return Xc(o)}function DC(n){return Gn(e=>{let t=n(e);return t?De(t).pipe(ye(()=>e)):de(e)})}var HC=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===Ae);return r}getResolvedTitleForRoute(t){return t.data[rp]}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:()=>M(s2),providedIn:"root"})}return n})(),s2=(()=>{class n extends HC{title;constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||n)(Fe(yO))};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),ed=new re("",{factory:()=>({})}),ap=new re(""),o2=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=M(oC);async loadComponent(t,r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return Promise.resolve(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=(async()=>{try{let s=await xO(fn(t,()=>r.loadComponent())),o=await l2(c2(s));return this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=o,o}finally{this.componentLoaders.delete(r)}})();return this.componentLoaders.set(r,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Promise.resolve({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let i=(async()=>{try{let s=await a2(r,this.compiler,t,this.onLoadEndListener);return r._loadedRoutes=s.routes,r._loadedInjector=s.injector,s}finally{this.childrenLoaders.delete(r)}})();return this.childrenLoaders.set(r,i),i}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();async function a2(n,e,t,r){let i=await xO(fn(t,()=>n.loadChildren())),s=await l2(c2(i)),o;s instanceof i_||Array.isArray(s)?o=s:o=await e.compileModuleAsync(s),r&&r(n);let a,c,l=!1;return Array.isArray(o)?(c=o,l=!0):(a=o.create(t).injector,c=a.get(ap,[],{optional:!0,self:!0}).flat()),{routes:c.map($C),injector:a}}function vq(n){return n&&typeof n=="object"&&"default"in n}function c2(n){return vq(n)?n.default:n}async function l2(n){return n}var J_=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:()=>M(wq),providedIn:"root"})}return n})(),wq=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),u2=new re("");var Iq=()=>{},d2=new re(""),h2=(()=>{class n{currentNavigation=he(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=he(null);events=new me;transitionAbortWithErrorSubject=new me;configLoader=M(o2);environmentInjector=M(Mt);destroyRef=M(Qn);urlSerializer=M(ip);rootContexts=M(Xu);location=M(Hu);inputBindingEnabled=M(Q_,{optional:!0})!==null;titleStrategy=M(HC);options=M(ed,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=M(J_);createViewTransition=M(u2,{optional:!0});navigationErrorHandler=M(d2,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>de(void 0);rootComponentType=null;destroyed=!1;constructor(){let t=i=>this.events.next(new V_(i)),r=i=>this.events.next(new L_(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;qt(()=>{this.transitions?.next(ie(B({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,id:r}))})}setupNavigations(t){return this.transitions=new ct(null),this.transitions.pipe(pr(r=>r!==null),Gn(r=>{let i=!1,s=new AbortController;return de(r).pipe(Gn(o=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",Yn.SupersededByNewNavigation),Fn;this.currentTransition=r;let a=this.lastSuccessfulNavigation();this.currentNavigation.set({id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,targetBrowserUrl:typeof o.extras.browserUrl=="string"?this.urlSerializer.parse(o.extras.browserUrl):o.extras.browserUrl,trigger:o.source,extras:o.extras,previousNavigation:a?ie(B({},a),{previousNavigation:null}):null,abort:()=>s.abort()});let c=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),l=o.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!c&&l!=="reload")return this.events.next(new zs(o.id,this.urlSerializer.serialize(o.rawUrl),"",Jf.IgnoredSameUrlNavigation)),o.resolve(!1),Fn;if(this.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return de(o).pipe(Gn(h=>(this.events.next(new Jc(h.id,this.urlSerializer.serialize(h.extractedUrl),h.source,h.restoredState)),h.id!==this.navigationId?Fn:Promise.resolve(h))),pq(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy,s.signal),vt(h=>{r.targetSnapshot=h.targetSnapshot,r.urlAfterRedirects=h.urlAfterRedirects,this.currentNavigation.update(m=>(m.finalUrl=h.urlAfterRedirects,m));let p=new Xf(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(p)}));if(c&&this.urlHandlingStrategy.shouldProcessUrl(o.currentRawUrl)){let{id:h,extractedUrl:p,source:m,restoredState:b,extras:k}=o,O=new Jc(h,this.urlSerializer.serialize(p),m,b);this.events.next(O);let N=HO(this.rootComponentType).snapshot;return this.currentTransition=r=ie(B({},o),{targetSnapshot:N,urlAfterRedirects:p,extras:ie(B({},k),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update(H=>(H.finalUrl=p,H)),de(r)}else return this.events.next(new zs(o.id,this.urlSerializer.serialize(o.extractedUrl),"",Jf.IgnoredByUrlHandlingStrategy)),o.resolve(!1),Fn}),vt(o=>{let a=new P_(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(a)}),ye(o=>(this.currentTransition=r=ie(B({},o),{guards:x8(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),r)),j8(this.environmentInjector,o=>this.events.next(o)),vt(o=>{if(r.guardsResult=o.guardsResult,o.guardsResult&&typeof o.guardsResult!="boolean")throw G_(this.urlSerializer,o.guardsResult);let a=new M_(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(a)}),pr(o=>o.guardsResult?!0:(this.cancelNavigationTransition(o,"",Yn.GuardRejected),!1)),DC(o=>{if(o.guards.canActivateChecks.length!==0)return de(o).pipe(vt(a=>{let c=new O_(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(c)}),Gn(a=>{let c=!1;return de(a).pipe(gq(this.paramsInheritanceStrategy,this.environmentInjector),vt({next:()=>c=!0,complete:()=>{c||this.cancelNavigationTransition(a,"",Yn.NoDataFromResolver)}}))}),vt(a=>{let c=new F_(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(c)}))}),DC(o=>{let a=l=>{let h=[];if(l.routeConfig?._loadedComponent)l.component=l.routeConfig?._loadedComponent;else if(l.routeConfig?.loadComponent){let p=Ju(l)??this.environmentInjector;h.push(this.configLoader.loadComponent(p,l.routeConfig).then(m=>{l.component=m}))}for(let p of l.children)h.push(...a(p));return h},c=a(o.targetSnapshot.root);return c.length===0?de(o):De(Promise.all(c).then(()=>o))}),DC(()=>this.afterPreactivation()),Gn(()=>{let{currentSnapshot:o,targetSnapshot:a}=r,c=this.createViewTransition?.(this.environmentInjector,o.root,a.root);return c?De(c).pipe(ye(()=>r)):de(r)}),ye(o=>{let a=C8(t.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return this.currentTransition=r=ie(B({},o),{targetRouterState:a}),this.currentNavigation.update(c=>(c.targetRouterState=a,c)),r}),vt(()=>{this.events.next(new Zf)}),A8(this.rootContexts,t.routeReuseStrategy,o=>this.events.next(o),this.inputBindingEnabled),Ln(1),li(JO(s.signal).pipe(pr(()=>!i&&!r.targetRouterState),vt(()=>{this.cancelNavigationTransition(r,s.signal.reason+"",Yn.Aborted)}))),vt({next:o=>{i=!0,this.currentNavigation.update(a=>(a.abort=Iq,a)),this.lastSuccessfulNavigation.set(qt(this.currentNavigation)),this.events.next(new Ii(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects))),this.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{i=!0}}),li(this.transitionAbortWithErrorSubject.pipe(vt(o=>{throw o}))),vu(()=>{s.abort(),i||this.cancelNavigationTransition(r,"",Yn.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),Rs(o=>{if(this.destroyed)return r.resolve(!1),Fn;if(i=!0,QO(o))this.events.next(new rs(r.id,this.urlSerializer.serialize(r.extractedUrl),o.message,o.cancellationCode)),D8(o)?this.events.next(new Ku(o.url,o.navigationBehaviorOptions)):r.resolve(!1);else{let a=new Wu(r.id,this.urlSerializer.serialize(r.extractedUrl),o,r.targetSnapshot??void 0);try{let c=fn(this.environmentInjector,()=>this.navigationErrorHandler?.(a));if(c instanceof Qu){let{message:l,cancellationCode:h}=G_(this.urlSerializer,c);this.events.next(new rs(r.id,this.urlSerializer.serialize(r.extractedUrl),l,h)),this.events.next(new Ku(c.redirectTo,c.navigationBehaviorOptions))}else throw this.events.next(a),o}catch(c){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(c)}}return Fn}))}))}cancelNavigationTransition(t,r,i){let s=new rs(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(s),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=qt(this.currentNavigation),i=r?.targetBrowserUrl??r?.extractedUrl;return t.toString()!==i?.toString()&&!r?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function bq(n){return n!==Kf}var f2=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:()=>M(Eq),providedIn:"root"})}return n})(),K_=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},Eq=(()=>{class n extends K_{static \u0275fac=(()=>{let t;return function(i){return(t||(t=js(n)))(i||n)}})();static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),zC=(()=>{class n{urlSerializer=M(ip);options=M(ed,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=M(Hu);urlHandlingStrategy=M(J_);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new wi;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:t,initialUrl:r,targetBrowserUrl:i}){let s=t!==void 0?this.urlHandlingStrategy.merge(t,r):r,o=i??s;return o instanceof wi?this.urlSerializer.serialize(o):o}commitTransition({targetRouterState:t,finalUrl:r,initialUrl:i}){r&&t?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=t):this.rawUrlTree=i}routerState=HO(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:t}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t??this.rawUrlTree)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:()=>M(p2),providedIn:"root"})}return n})(),p2=(()=>{class n extends zC{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{t(r.url,r.state,"popstate")})})}handleRouterEvent(t,r){t instanceof Jc?this.updateStateMemento():t instanceof zs?this.commitTransition(r):t instanceof Xf?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof Zf?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof rs&&t.code!==Yn.SupersededByNewNavigation&&t.code!==Yn.Redirect?this.restoreHistory(r):t instanceof Wu?this.restoreHistory(r,!0):t instanceof Ii&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,{extras:r,id:i}){let{replaceUrl:s,state:o}=r;if(this.location.isCurrentPathEqualTo(t)||s){let a=this.browserPageId,c=B(B({},o),this.generateNgRouterState(i,a));this.location.replaceState(t,"",c)}else{let a=B(B({},o),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(t,"",a)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,s=this.currentPageId-i;s!==0?this.location.historyGo(s):this.getCurrentUrlTree()===t.finalUrl&&s===0&&(this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=js(n)))(i||n)}})();static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function qC(n,e){n.events.pipe(pr(t=>t instanceof Ii||t instanceof rs||t instanceof Wu||t instanceof zs),ye(t=>t instanceof Ii||t instanceof zs?0:(t instanceof rs?t.code===Yn.Redirect||t.code===Yn.SupersededByNewNavigation:!1)?2:1),pr(t=>t!==2),Ln(1)).subscribe(()=>{e()})}var Cq={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Tq={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},td=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=M(ZE);stateManager=M(zC);options=M(ed,{optional:!0})||{};pendingTasks=M(Ls);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=M(h2);urlSerializer=M(ip);location=M(Hu);urlHandlingStrategy=M(J_);injector=M(Mt);_events=new me;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=M(f2);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=M(ap,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!M(Q_,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new mt;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,s=qt(this.navigationTransitions.currentNavigation);if(i!==null&&s!==null){if(this.stateManager.handleRouterEvent(r,s),r instanceof rs&&r.code!==Yn.Redirect&&r.code!==Yn.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Ii)this.navigated=!0;else if(r instanceof Ku){let o=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c=B({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||bq(i.source)},o);this.scheduleNavigation(a,Kf,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}w8(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Kf,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r,i)=>{this.navigateToSyncWithBrowser(t,i,r)})}navigateToSyncWithBrowser(t,r,i){let s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){let c=B({},i);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(s.state=c)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,o,s).catch(c=>{this.disposed||this.injector.get(_r)(c)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return qt(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map($C),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:c}=r,l=c?this.currentUrlTree.fragment:o,h=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":h=B(B({},this.currentUrlTree.queryParams),s);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=s||null}h!==null&&(h=this.removeEmptyProps(h));let p;try{let m=i?i.snapshot:this.routerState.snapshot.root;p=UO(m)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),p=this.currentUrlTree.root}return jO(p,t,h,l??null,this.urlSerializer)}navigateByUrl(t,r={skipLocationChange:!1}){let i=ha(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,Kf,null,r)}navigate(t,r={skipLocationChange:!1}){return Sq(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.console.warn(bu(4018,!1)),this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=B({},Cq):r===!1?i=B({},Tq):i=r,ha(t))return _O(this.currentUrlTree,t,i);let s=this.parseUrl(t);return _O(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,s])=>(s!=null&&(r[i]=s),r),{})}scheduleNavigation(t,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let a,c,l;o?(a=o.resolve,c=o.reject,l=o.promise):l=new Promise((p,m)=>{a=p,c=m});let h=this.pendingTasks.add();return qC(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:s,resolve:a,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(p=>Promise.reject(p))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Sq(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new ce(4008,!1)}var nd=(()=>{class n{router;route;tabIndexAttribute;renderer;el;locationStrategy;reactiveHref=he(null);get href(){return qt(this.reactiveHref)}set href(t){this.reactiveHref.set(t)}target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new me;applicationErrorHandler=M(_r);options=M(ed,{optional:!0});constructor(t,r,i,s,o,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=s,this.el=o,this.locationStrategy=a,this.reactiveHref.set(M(new h_("href"),{optional:!0}));let c=o.nativeElement.tagName?.toLowerCase();this.isAnchorElement=c==="a"||c==="area"||!!(typeof customElements=="object"&&customElements.get(c)?.observedAttributes?.includes?.("href")),this.isAnchorElement?this.setTabIndexIfNotOnNativeEl("0"):this.subscribeToNavigationEventsIfNecessary()}subscribeToNavigationEventsIfNecessary(){if(this.subscription!==void 0||!this.isAnchorElement)return;let t=this.preserveFragment,r=i=>i==="merge"||i==="preserve";t||=r(this.queryParamsHandling),t||=!this.queryParamsHandling&&!r(this.options?.defaultQueryParamsHandling),t&&(this.subscription=this.router.events.subscribe(i=>{i instanceof Ii&&this.updateHref()}))}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&(this.updateHref(),this.subscribeToNavigationEventsIfNecessary()),this.onChanges.next(this)}routerLinkInput=null;set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(ha(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,r,i,s,o){let a=this.urlTree;if(a===null||this.isAnchorElement&&(t!==0||r||i||s||o||typeof this.target=="string"&&this.target!="_self"))return!0;let c={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,c)?.catch(l=>{this.applicationErrorHandler(l)}),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.reactiveHref.set(t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t))??"":null)}applyAttributeValue(t,r){let i=this.renderer,s=this.el.nativeElement;r!==null?i.setAttribute(s,t,r):i.removeAttribute(s,t)}get urlTree(){return this.routerLinkInput===null?null:ha(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||n)(je(td),je(qs),Cf("tabindex"),je(mi),je(Ht),je($u))};static \u0275dir=Rt({type:n,selectors:[["","routerLink",""]],hostVars:2,hostBindings:function(r,i){r&1&&Y("click",function(o){return i.onClick(o.button,o.ctrlKey,o.shiftKey,o.altKey,o.metaKey)}),r&2&&zc("href",i.reactiveHref(),FE)("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",or],skipLocationChange:[2,"skipLocationChange","skipLocationChange",or],replaceUrl:[2,"replaceUrl","replaceUrl",or],routerLink:"routerLink"},features:[jr]})}return n})(),GC=(()=>{class n{router;element;renderer;cdr;links;classes=[];routerEventsSubscription;linkInputChangesSubscription;_isActive=!1;get isActive(){return this._isActive}routerLinkActiveOptions={exact:!1};ariaCurrentWhenActive;isActiveChange=new We;link=M(nd,{optional:!0});constructor(t,r,i,s){this.router=t,this.element=r,this.renderer=i,this.cdr=s,this.routerEventsSubscription=t.events.subscribe(o=>{o instanceof Ii&&this.update()})}ngAfterContentInit(){de(this.links.changes,de(null)).pipe(Jo()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();let t=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=De(t).pipe(Jo()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(t){let r=Array.isArray(t)?t:t.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(t){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{let t=this.hasActiveLinks();this.classes.forEach(r=>{t?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),t&&this.ariaCurrentWhenActive!==void 0?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==t&&(this._isActive=t,this.cdr.markForCheck(),this.isActiveChange.emit(t))})}isLinkActive(t){let r=Aq(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>{let s=i.urlTree;return s?t.isActive(s,r):!1}}hasActiveLinks(){let t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.links.some(t)}static \u0275fac=function(r){return new(r||n)(je(td),je(Ht),je(mi),je($r))};static \u0275dir=Rt({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(r,i,s){if(r&1&&a_(s,nd,5),r&2){let o;c_(o=l_())&&(i.links=o)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[jr]})}return n})();function Aq(n){return!!n.paths}var xq=new re("");function WC(n,...e){return gr([{provide:ap,multi:!0,useValue:n},[],{provide:qs,useFactory:Rq},{provide:o_,multi:!0,useFactory:kq},e.map(t=>t.\u0275providers)])}function Rq(){return M(td).routerState.root}function kq(){let n=M(wt);return e=>{let t=n.get(yi);if(e!==t.components[0])return;let r=n.get(td),i=n.get(Nq);n.get(Pq)===1&&r.initialNavigation(),n.get(Mq,null,{optional:!0})?.setUpPreloading(),n.get(xq,null,{optional:!0})?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var Nq=new re("",{factory:()=>new me}),Pq=new re("",{factory:()=>1});var Mq=new re("");var g2=()=>{};var _2=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},Oq=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=n[t++],o=n[t++],a=n[t++],c=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let s=n[t++],o=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},X_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let s=n[i],o=i+1<n.length,a=o?n[i+1]:0,c=i+2<n.length,l=c?n[i+2]:0,h=s>>2,p=(s&3)<<4|a>>4,m=(a&15)<<2|l>>6,b=l&63;c||(b=64,o||(m=64)),r.push(t[h],t[p],t[m],t[b])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(_2(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):Oq(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let s=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let l=i<n.length?t[n.charAt(i)]:64;++i;let p=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||a==null||l==null||p==null)throw new QC;let m=s<<2|a>>4;if(r.push(m),l!==64){let b=a<<4&240|l>>2;if(r.push(b),p!==64){let k=l<<6&192|p;r.push(k)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},QC=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},Fq=function(n){let e=_2(n);return X_.encodeByteArray(e,!0)},lp=function(n){return Fq(n).replace(/\./g,"")},Z_=function(n){try{return X_.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function JC(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var Vq=()=>JC().__FIREBASE_DEFAULTS__,Lq=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},Uq=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&Z_(n[1]);return e&&JSON.parse(e)},ev=()=>{try{return g2()||Vq()||Lq()||Uq()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},XC=n=>{var e,t;return(t=(e=ev())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},v2=n=>{let e=XC(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},ZC=()=>{var n;return(n=ev())===null||n===void 0?void 0:n.config},eT=n=>{var e;return(e=ev())===null||e===void 0?void 0:e[`_${n}`]};var Zc=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function fa(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function tv(n){return(await fetch(n,{credentials:"include"})).ok}function w2(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[lp(JSON.stringify(t)),lp(JSON.stringify(o)),""].join(".")}var cp={};function jq(){let n={prod:[],emulator:[]};for(let e of Object.keys(cp))cp[e]?n.emulator.push(e):n.prod.push(e);return n}function Bq(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}var m2=!1;function nv(n,e){if(typeof window>"u"||typeof document>"u"||!fa(window.location.host)||cp[n]===e||cp[n]||m2)return;cp[n]=e;function t(m){return`__firebase__banner__${m}`}let r="__firebase__banner",s=jq().prod.length>0;function o(){let m=document.getElementById(r);m&&m.remove()}function a(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function c(m,b){m.setAttribute("width","24"),m.setAttribute("id",b),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function l(){let m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{m2=!0,o()},m}function h(m,b){m.setAttribute("id",b),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function p(){let m=Bq(r),b=t("text"),k=document.getElementById(b)||document.createElement("span"),O=t("learnmore"),N=document.getElementById(O)||document.createElement("a"),H=t("preprendIcon"),Q=document.getElementById(H)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){let Z=m.element;a(Z),h(N,O);let Ee=l();c(Q,H),Z.append(Q,k,N,Ee),document.body.appendChild(Z)}s?(k.innerText="Preview backend disconnected.",Q.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Q.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,k.innerText="Preview backend running in this workspace."),k.setAttribute("id",b)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}function bn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function I2(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(bn())}function $q(){var n;let e=(n=ev())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function b2(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function E2(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function C2(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function T2(){let n=bn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function S2(){return!$q()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function up(){try{return typeof indexedDB=="object"}catch{return!1}}function D2(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}var Hq="FirebaseError",Sr=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=Hq,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,bi.prototype.create)}},bi=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?zq(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Sr(i,a,r)}};function zq(n,e){return n.replace(qq,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var qq=/\{\$([^}]+)}/g;function A2(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function is(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let s=n[i],o=e[i];if(y2(s)&&y2(o)){if(!is(s,o))return!1}else if(s!==o)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function y2(n){return n!==null&&typeof n=="object"}function dp(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function x2(n,e){let t=new YC(n,e);return t.subscribe.bind(t)}var YC=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");Gq(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=KC),i.error===void 0&&(i.error=KC),i.complete===void 0&&(i.complete=KC);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function Gq(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function KC(){}var g0e=14400*1e3;function mn(n){return n&&n._delegate?n._delegate:n}var Jn=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var el="[DEFAULT]";var tT=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new Zc;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Kq(e))try{this.getOrInitializeService({instanceIdentifier:el})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=el){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){let e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=el){return this.instances.has(e)}getOptions(e=el){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[s,o]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);let o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Wq(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=el){return this.component?this.component.multipleInstances?e:el:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function Wq(n){return n===el?void 0:n}function Kq(n){return n.instantiationMode==="EAGER"}var rv=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new tT(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var Qq=[],$e=(function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n})($e||{}),Yq={debug:$e.DEBUG,verbose:$e.VERBOSE,info:$e.INFO,warn:$e.WARN,error:$e.ERROR,silent:$e.SILENT},Jq=$e.INFO,Xq={[$e.DEBUG]:"log",[$e.VERBOSE]:"log",[$e.INFO]:"info",[$e.WARN]:"warn",[$e.ERROR]:"error"},Zq=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=Xq[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},ss=class{constructor(e){this.name=e,this._logLevel=Jq,this._logHandler=Zq,this._userLogHandler=null,Qq.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in $e))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Yq[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,$e.DEBUG,...e),this._logHandler(this,$e.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,$e.VERBOSE,...e),this._logHandler(this,$e.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,$e.INFO,...e),this._logHandler(this,$e.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,$e.WARN,...e),this._logHandler(this,$e.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,$e.ERROR,...e),this._logHandler(this,$e.ERROR,...e)}};var eG=(n,e)=>e.some(t=>n instanceof t),R2,k2;function tG(){return R2||(R2=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function nG(){return k2||(k2=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var N2=new WeakMap,rT=new WeakMap,P2=new WeakMap,nT=new WeakMap,sT=new WeakMap;function rG(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(os(n.result)),i()},o=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&N2.set(t,n)}).catch(()=>{}),sT.set(e,n),e}function iG(n){if(rT.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),i()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});rT.set(n,e)}var iT={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return rT.get(n);if(e==="objectStoreNames")return n.objectStoreNames||P2.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return os(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function M2(n){iT=n(iT)}function sG(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(iv(this),e,...t);return P2.set(r,e.sort?e.sort():[e]),os(r)}:nG().includes(n)?function(...e){return n.apply(iv(this),e),os(N2.get(this))}:function(...e){return os(n.apply(iv(this),e))}}function oG(n){return typeof n=="function"?sG(n):(n instanceof IDBTransaction&&iG(n),eG(n,tG())?new Proxy(n,iT):n)}function os(n){if(n instanceof IDBRequest)return rG(n);if(nT.has(n))return nT.get(n);let e=oG(n);return e!==n&&(nT.set(n,e),sT.set(e,n)),e}var iv=n=>sT.get(n);function sv(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){let o=indexedDB.open(n,e),a=os(o);return r&&o.addEventListener("upgradeneeded",c=>{r(os(o.result),c.oldVersion,c.newVersion,os(o.transaction),c)}),t&&o.addEventListener("blocked",c=>t(c.oldVersion,c.newVersion,c)),a.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var aG=["get","getKey","getAll","getAllKeys","count"],cG=["put","add","delete","clear"],oT=new Map;function O2(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(oT.get(e))return oT.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=cG.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||aG.includes(t)))return;let s=async function(o,...a){let c=this.transaction(o,i?"readwrite":"readonly"),l=c.store;return r&&(l=l.index(a.shift())),(await Promise.all([l[t](...a),i&&c.done]))[0]};return oT.set(e,s),s}M2(n=>ie(B({},n),{get:(e,t,r)=>O2(e,t)||n.get(e,t,r),has:(e,t)=>!!O2(e,t)||n.has(e,t)}));var cT=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(lG(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function lG(n){let e=n.getComponent();return e?.type==="VERSION"}var lT="@firebase/app",F2="0.13.2";var Gs=new ss("@firebase/app"),uG="@firebase/app-compat",dG="@firebase/analytics-compat",hG="@firebase/analytics",fG="@firebase/app-check-compat",pG="@firebase/app-check",gG="@firebase/auth",mG="@firebase/auth-compat",yG="@firebase/database",_G="@firebase/data-connect",vG="@firebase/database-compat",wG="@firebase/functions",IG="@firebase/functions-compat",bG="@firebase/installations",EG="@firebase/installations-compat",CG="@firebase/messaging",TG="@firebase/messaging-compat",SG="@firebase/performance",DG="@firebase/performance-compat",AG="@firebase/remote-config",xG="@firebase/remote-config-compat",RG="@firebase/storage",kG="@firebase/storage-compat",NG="@firebase/firestore",PG="@firebase/ai",MG="@firebase/firestore-compat",OG="firebase",FG="11.10.0";var uT="[DEFAULT]",VG={[lT]:"fire-core",[uG]:"fire-core-compat",[hG]:"fire-analytics",[dG]:"fire-analytics-compat",[pG]:"fire-app-check",[fG]:"fire-app-check-compat",[gG]:"fire-auth",[mG]:"fire-auth-compat",[yG]:"fire-rtdb",[_G]:"fire-data-connect",[vG]:"fire-rtdb-compat",[wG]:"fire-fn",[IG]:"fire-fn-compat",[bG]:"fire-iid",[EG]:"fire-iid-compat",[CG]:"fire-fcm",[TG]:"fire-fcm-compat",[SG]:"fire-perf",[DG]:"fire-perf-compat",[AG]:"fire-rc",[xG]:"fire-rc-compat",[RG]:"fire-gcs",[kG]:"fire-gcs-compat",[NG]:"fire-fst",[MG]:"fire-fst-compat",[PG]:"fire-vertex","fire-js":"fire-js",[OG]:"fire-js-all"};var hp=new Map,LG=new Map,dT=new Map;function V2(n,e){try{n.container.addComponent(e)}catch(t){Gs.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Ei(n){let e=n.name;if(dT.has(e))return Gs.debug(`There were multiple attempts to register component ${e}.`),!1;dT.set(e,n);for(let t of hp.values())V2(t,n);for(let t of LG.values())V2(t,n);return!0}function rd(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function qr(n){return n==null?!1:n.settings!==void 0}var UG={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},pa=new bi("app","Firebase",UG);var hT=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Jn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw pa.create("app-deleted",{appName:this._name})}};var ga=FG;function gT(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:uT,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw pa.create("bad-app-name",{appName:String(i)});if(t||(t=ZC()),!t)throw pa.create("no-options");let s=hp.get(i);if(s){if(is(t,s.options)&&is(r,s.config))return s;throw pa.create("duplicate-app",{appName:i})}let o=new rv(i);for(let c of dT.values())o.addComponent(c);let a=new hT(t,r,o);return hp.set(i,a),a}function tl(n=uT){let e=hp.get(n);if(!e&&n===uT&&ZC())return gT();if(!e)throw pa.create("no-app",{appName:n});return e}function ov(){return Array.from(hp.values())}function Ft(n,e,t){var r;let i=(r=VG[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Gs.warn(a.join(" "));return}Ei(new Jn(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var jG="firebase-heartbeat-database",BG=1,fp="firebase-heartbeat-store",aT=null;function B2(){return aT||(aT=sv(jG,BG,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(fp)}catch(t){console.warn(t)}}}}).catch(n=>{throw pa.create("idb-open",{originalErrorMessage:n.message})})),aT}async function $G(n){try{let t=(await B2()).transaction(fp),r=await t.objectStore(fp).get($2(n));return await t.done,r}catch(e){if(e instanceof Sr)Gs.warn(e.message);else{let t=pa.create("idb-get",{originalErrorMessage:e?.message});Gs.warn(t.message)}}}async function L2(n,e){try{let r=(await B2()).transaction(fp,"readwrite");await r.objectStore(fp).put(e,$2(n)),await r.done}catch(t){if(t instanceof Sr)Gs.warn(t.message);else{let r=pa.create("idb-set",{originalErrorMessage:t?.message});Gs.warn(r.message)}}}function $2(n){return`${n.name}!${n.options.appId}`}var HG=1024,zG=30,fT=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new pT(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=U2();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>zG){let o=GG(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Gs.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=U2(),{heartbeatsToSend:r,unsentEntries:i}=qG(this._heartbeatsCache.heartbeats),s=lp(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return Gs.warn(t),""}}};function U2(){return new Date().toISOString().substring(0,10)}function qG(n,e=HG){let t=[],r=n.slice();for(let i of n){let s=t.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),j2(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),j2(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var pT=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return up()?D2().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){let t=await $G(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){let i=await this.read();return L2(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){let i=await this.read();return L2(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}};function j2(n){return lp(JSON.stringify({version:2,heartbeats:n})).length}function GG(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function WG(n){Ei(new Jn("platform-logger",e=>new cT(e),"PRIVATE")),Ei(new Jn("heartbeat",e=>new fT(e),"PRIVATE")),Ft(lT,F2,n),Ft(lT,F2,"esm2017"),Ft("fire-js","")}WG("");var KG="firebase",QG="11.10.0";Ft(KG,QG,"app");function H2(n,e){let r=!e?.manualCleanup?e?.injector?.get(Qn)??M(Qn):null,i=YG(e?.equal),s;e?.requireSync?s=he({kind:0},{equal:i}):s=he({kind:1,value:e?.initialValue},{equal:i});let o,a=n.subscribe({next:c=>s.set({kind:1,value:c}),error:c=>{s.set({kind:2,error:c}),o?.()},complete:()=>{o?.()}});if(e?.requireSync&&s().kind===0)throw new ce(601,!1);return o=r?.onDestroy(a.unsubscribe.bind(a)),He(()=>{let c=s();switch(c.kind){case 1:return c.value;case 2:throw c.error;case 0:throw new ce(601,!1)}},{equal:e?.equal})}function YG(n=Object.is){return(e,t)=>e.kind===1&&t.kind===1&&n(e.value,t.value)}function z2(n){n===void 0&&(n=M(wt));let e=n.get(Ru);return t=>new Se(r=>{let i=e.add(),s=!1;function o(){s||(i(),s=!0)}let a=t.subscribe({next:c=>{r.next(c),o()},complete:()=>{r.complete(),o()},error:c=>{r.error(c),o()}});return a.add(()=>{r.unsubscribe(),o()}),a})}var ma=new Ic("ANGULARFIRE2_VERSION");function pp(n,e,t){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===t);if(s.length===1)return s[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var sd=(n,e)=>{let t=e?[e]:ov(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},id=(function(n){return n[n.SILENT=0]="SILENT",n[n.WARN=1]="WARN",n[n.VERBOSE=2]="VERBOSE",n})(id||{}),q2=cC()&&typeof Zone<"u"?id.WARN:id.SILENT;var av=class{zone;delegate;constructor(e,t=PI){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,s=function(o){i?i.runGuarded(()=>{e.apply(this,[o])}):e.apply(this,[o])};return this.delegate.schedule(s,t,r)}},ya=(()=>{class n{outsideAngular;insideAngular;constructor(){let t=M(it);this.outsideAngular=t.runOutsideAngular(()=>new av(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=t.run(()=>new av(typeof Zone>"u"?void 0:Zone.current,Ko))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),G2=!1;function JG(n,e){!G2&&(q2>id.SILENT||cC())&&(G2=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),q2>=e&&console.warn(`Firebase API called outside injection context: ${n.name}`)}function XG(n){let e=M(it,{optional:!0});return e?e.runOutsideAngular(()=>n()):n()}function nl(n){let e=M(it,{optional:!0});return e?e.run(()=>n()):n()}var ZG=(n,e,t)=>(...r)=>(e&&setTimeout(e,0),fn(t,()=>nl(()=>n.apply(void 0,r)))),En=(n,e,t)=>(t||=e?id.WARN:id.VERBOSE,function(){let r,i=arguments,s,o,a;try{s=M(ya),o=M(Ru),a=M(Mt)}catch{return JG(n,t),n.apply(this,i)}for(let l=0;l<arguments.length;l++)typeof i[l]=="function"&&(e&&(r||=nl(()=>o.add())),i[l]=ZG(i[l],r,a));let c=XG(()=>n.apply(this,i));return e?c instanceof Se?c.pipe(Yo(s.outsideAngular),Qo(s.insideAngular),z2(a)):c instanceof Promise?nl(()=>{let l=o.add();return new Promise((h,p)=>{c.then(m=>fn(a,()=>nl(()=>h(m))),m=>fn(a,()=>nl(()=>p(m)))).finally(l)})}):typeof c=="function"&&r?function(){return setTimeout(r,0),c.apply(this,arguments)}:nl(()=>c):c instanceof Se?c.pipe(Yo(s.outsideAngular),Qo(s.insideAngular)):nl(()=>c)});var Ws=class{constructor(e){return e}},rl=class{constructor(){return ov()}};function e7(n){return n&&n.length===1?n[0]:new Ws(tl())}var mT=new re("angularfire2._apps"),t7={provide:Ws,useFactory:e7,deps:[[new Ir,mT]]},n7={provide:rl,deps:[[new Ir,mT]]};function r7(n){return(e,t)=>{let r=t.get(Bs);Ft("angularfire",ma.full,"core"),Ft("angularfire",ma.full,"app"),Ft("angular",ZI.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new Ws(i)}}function W2(n,...e){return gr([t7,n7,{provide:mT,useFactory:r7(n),multi:!0,deps:[it,wt,ya,...e]}])}var K2=En(gT,!0);var i7=new Map,s7={activated:!1,tokenObservers:[]},o7={initialized:!1,enabled:!1};function Ci(n){return i7.get(n)||Object.assign({},s7)}function X2(){return o7}var a7="https://content-firebaseappcheck.googleapis.com/v1";var c7="exchangeDebugToken",Q2={OFFSET_DURATION:300*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:960*1e3},mwe=1440*60*1e3;var vT=class{constructor(e,t,r,i,s){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(e){this.stop();try{this.pending=new Zc,this.pending.promise.catch(t=>{}),await l7(this.getNextRun(e)),this.pending.resolve(),await this.pending.promise,this.pending=new Zc,this.pending.promise.catch(t=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function l7(n){return new Promise(e=>{setTimeout(e,n)})}var u7={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},_a=new bi("appCheck","AppCheck",u7);function Z2(n){if(!Ci(n).activated)throw _a.create("use-before-activation",{appName:n.name})}async function eF({url:n,body:e},t){let r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){let p=await i.getHeartbeatsHeader();p&&(r["X-Firebase-Client"]=p)}let s={method:"POST",body:JSON.stringify(e),headers:r},o;try{o=await fetch(n,s)}catch(p){throw _a.create("fetch-network-error",{originalErrorMessage:p?.message})}if(o.status!==200)throw _a.create("fetch-status-error",{httpStatus:o.status});let a;try{a=await o.json()}catch(p){throw _a.create("fetch-parse-error",{originalErrorMessage:p?.message})}let c=a.ttl.match(/^([\d.]+)(s)$/);if(!c||!c[2]||isNaN(Number(c[1])))throw _a.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});let l=Number(c[1])*1e3,h=Date.now();return{token:a.token,expireTimeMillis:h+l,issuedAtTimeMillis:h}}function tF(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${a7}/projects/${t}/apps/${r}:${c7}?key=${i}`,body:{debug_token:e}}}var d7="firebase-app-check-database",h7=1,wT="firebase-app-check-store";var cv=null;function f7(){return cv||(cv=new Promise((n,e)=>{try{let t=indexedDB.open(d7,h7);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(_a.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(wT,{keyPath:"compositeKey"})}}}catch(t){e(_a.create("storage-open",{originalErrorMessage:t?.message}))}}),cv)}function p7(n,e){return g7(m7(n),e)}async function g7(n,e){let r=(await f7()).transaction(wT,"readwrite"),s=r.objectStore(wT).put({compositeKey:n,value:e});return new Promise((o,a)=>{s.onsuccess=c=>{o()},r.onerror=c=>{var l;a(_a.create("storage-set",{originalErrorMessage:(l=c.target.error)===null||l===void 0?void 0:l.message}))}})}function m7(n){return`${n.options.appId}-${n.name}`}var gp=new ss("@firebase/app-check");function yT(n,e){return up()?p7(n,e).catch(t=>{gp.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function nF(){return X2().enabled}async function rF(){let n=X2();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}var y7={error:"UNKNOWN_ERROR"};function _7(n){return X_.encodeString(JSON.stringify(n),!1)}async function IT(n,e=!1,t=!1){let r=n.app;Z2(r);let i=Ci(r),s=i.token,o;if(s&&!mp(s)&&(i.token=void 0,s=void 0),!s){let l=await i.cachedTokenPromise;l&&(mp(l)?s=l:await yT(r,void 0))}if(!e&&s&&mp(s))return{token:s.token};let a=!1;if(nF())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=eF(tF(r,await rF()),n.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),a=!0);let l=await i.exchangeTokenPromise;return await yT(r,l),i.token=l,{token:l.token}}catch(l){return l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?gp.warn(l.message):t&&gp.error(l),_T(l)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),a=!0),s=await Ci(r).exchangeTokenPromise}catch(l){l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?gp.warn(l.message):t&&gp.error(l),o=l}let c;return s?o?mp(s)?c={token:s.token,internalError:o}:c=_T(o):(c={token:s.token},i.token=s,await yT(r,s)):c=_T(o),a&&b7(r,c),c}async function v7(n){let e=n.app;Z2(e);let{provider:t}=Ci(e);if(nF()){let r=await rF(),{token:i}=await eF(tF(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=await t.getToken();return{token:r}}}function w7(n,e,t,r){let{app:i}=n,s=Ci(i),o={next:t,error:r,type:e};if(s.tokenObservers=[...s.tokenObservers,o],s.token&&mp(s.token)){let a=s.token;Promise.resolve().then(()=>{t({token:a.token}),Y2(n)}).catch(()=>{})}s.cachedTokenPromise.then(()=>Y2(n))}function iF(n,e){let t=Ci(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function Y2(n){let{app:e}=n,t=Ci(e),r=t.tokenRefresher;r||(r=I7(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function I7(n){let{app:e}=n;return new vT(async()=>{let t=Ci(e),r;if(t.token?r=await IT(n,!0):r=await IT(n),r.error)throw r.error;if(r.internalError)throw r.internalError},()=>!0,()=>{let t=Ci(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-300*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},Q2.RETRIAL_MIN_WAIT,Q2.RETRIAL_MAX_WAIT)}function b7(n,e){let t=Ci(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function mp(n){return n.expireTimeMillis-Date.now()>0}function _T(n){return{token:_7(y7),error:n}}var bT=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=Ci(this.app);for(let t of e)iF(this.app,t.next);return Promise.resolve()}};function E7(n,e){return new bT(n,e)}function C7(n){return{getToken:e=>IT(n,e),getLimitedUseToken:()=>v7(n),addTokenListener:e=>w7(n,"INTERNAL",e),removeTokenListener:e=>iF(n.app,e)}}var T7="@firebase/app-check",S7="0.10.1";var D7="app-check",J2="app-check-internal";function A7(){Ei(new Jn(D7,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return E7(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(J2).initialize()})),Ei(new Jn(J2,n=>{let e=n.getProvider("app-check").getImmediate();return C7(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Ft(T7,S7)}A7();var x7="app-check";var od=class{constructor(){return sd(x7)}};var R7=["localhost","0.0.0.0","127.0.0.1"],Awe=typeof window<"u"&&R7.includes(window.location.hostname);var sF=()=>{};var cF=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},k7=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=n[t++],o=n[t++],a=n[t++],c=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let s=n[t++],o=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},lF={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let s=n[i],o=i+1<n.length,a=o?n[i+1]:0,c=i+2<n.length,l=c?n[i+2]:0,h=s>>2,p=(s&3)<<4|a>>4,m=(a&15)<<2|l>>6,b=l&63;c||(b=64,o||(m=64)),r.push(t[h],t[p],t[m],t[b])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(cF(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):k7(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let s=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let l=i<n.length?t[n.charAt(i)]:64;++i;let p=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||a==null||l==null||p==null)throw new ET;let m=s<<2|a>>4;if(r.push(m),l!==64){let b=a<<4&240|l>>2;if(r.push(b),p!==64){let k=l<<6&192|p;r.push(k)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},ET=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},N7=function(n){let e=cF(n);return lF.encodeByteArray(e,!0)},_p=function(n){return N7(n).replace(/\./g,"")},uF=function(n){try{return lF.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function dF(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var P7=()=>dF().__FIREBASE_DEFAULTS__,M7=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},O7=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&uF(n[1]);return e&&JSON.parse(e)},CT=()=>{try{return sF()||P7()||M7()||O7()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},F7=n=>CT()?.emulatorHosts?.[n],hF=n=>{let e=F7(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},TT=()=>CT()?.config;var lv=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function uv(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function fF(n){return(await fetch(n,{credentials:"include"})).ok}function pF(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=B({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[_p(JSON.stringify(t)),_p(JSON.stringify(o)),""].join(".")}var yp={};function V7(){let n={prod:[],emulator:[]};for(let e of Object.keys(yp))yp[e]?n.emulator.push(e):n.prod.push(e);return n}function L7(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}var oF=!1;function gF(n,e){if(typeof window>"u"||typeof document>"u"||!uv(window.location.host)||yp[n]===e||yp[n]||oF)return;yp[n]=e;function t(m){return`__firebase__banner__${m}`}let r="__firebase__banner",s=V7().prod.length>0;function o(){let m=document.getElementById(r);m&&m.remove()}function a(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function c(m,b){m.setAttribute("width","24"),m.setAttribute("id",b),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function l(){let m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{oF=!0,o()},m}function h(m,b){m.setAttribute("id",b),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function p(){let m=L7(r),b=t("text"),k=document.getElementById(b)||document.createElement("span"),O=t("learnmore"),N=document.getElementById(O)||document.createElement("a"),H=t("preprendIcon"),Q=document.getElementById(H)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){let Z=m.element;a(Z),h(N,O);let Ee=l();c(Q,H),Z.append(Q,k,N,Ee),document.body.appendChild(Z)}s?(k.innerText="Preview backend disconnected.",Q.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Q.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,k.innerText="Preview backend running in this workspace."),k.setAttribute("id",b)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}function mF(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function U7(){let n=CT()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function yF(){return!U7()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ST(){try{return typeof indexedDB=="object"}catch{return!1}}function _F(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(t){e(t)}})}var j7="FirebaseError",Ks=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=j7,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,vp.prototype.create)}},vp=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?B7(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Ks(i,a,r)}};function B7(n,e){return n.replace($7,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var $7=/\{\$([^}]+)}/g;function ad(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let s=n[i],o=e[i];if(aF(s)&&aF(o)){if(!ad(s,o))return!1}else if(s!==o)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function aF(n){return n!==null&&typeof n=="object"}var Pwe=14400*1e3;function Ti(n){return n&&n._delegate?n._delegate:n}var Qs=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var il="[DEFAULT]";var DT=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new lv;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){let t=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(z7(e))try{this.getOrInitializeService({instanceIdentifier:il})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=il){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){let e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=il){return this.instances.has(e)}getOptions(e=il){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[s,o]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,t){let r=this.normalizeInstanceIdentifier(t),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);let s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:H7(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=il){return this.component?this.component.multipleInstances?e:il:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function H7(n){return n===il?void 0:n}function z7(n){return n.instantiationMode==="EAGER"}var dv=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new DT(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var q7=[],Ke=(function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n})(Ke||{}),G7={debug:Ke.DEBUG,verbose:Ke.VERBOSE,info:Ke.INFO,warn:Ke.WARN,error:Ke.ERROR,silent:Ke.SILENT},W7=Ke.INFO,K7={[Ke.DEBUG]:"log",[Ke.VERBOSE]:"log",[Ke.INFO]:"info",[Ke.WARN]:"warn",[Ke.ERROR]:"error"},Q7=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=K7[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},cd=class{constructor(e){this.name=e,this._logLevel=W7,this._logHandler=Q7,this._userLogHandler=null,q7.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ke))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?G7[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ke.DEBUG,...e),this._logHandler(this,Ke.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ke.VERBOSE,...e),this._logHandler(this,Ke.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ke.INFO,...e),this._logHandler(this,Ke.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ke.WARN,...e),this._logHandler(this,Ke.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ke.ERROR,...e),this._logHandler(this,Ke.ERROR,...e)}};var xT=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Y7(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function Y7(n){return n.getComponent()?.type==="VERSION"}var RT="@firebase/app",vF="0.14.6";var Ys=new cd("@firebase/app"),J7="@firebase/app-compat",X7="@firebase/analytics-compat",Z7="@firebase/analytics",eW="@firebase/app-check-compat",tW="@firebase/app-check",nW="@firebase/auth",rW="@firebase/auth-compat",iW="@firebase/database",sW="@firebase/data-connect",oW="@firebase/database-compat",aW="@firebase/functions",cW="@firebase/functions-compat",lW="@firebase/installations",uW="@firebase/installations-compat",dW="@firebase/messaging",hW="@firebase/messaging-compat",fW="@firebase/performance",pW="@firebase/performance-compat",gW="@firebase/remote-config",mW="@firebase/remote-config-compat",yW="@firebase/storage",_W="@firebase/storage-compat",vW="@firebase/firestore",wW="@firebase/ai",IW="@firebase/firestore-compat",bW="firebase",EW="12.6.0";var kT="[DEFAULT]",CW={[RT]:"fire-core",[J7]:"fire-core-compat",[Z7]:"fire-analytics",[X7]:"fire-analytics-compat",[tW]:"fire-app-check",[eW]:"fire-app-check-compat",[nW]:"fire-auth",[rW]:"fire-auth-compat",[iW]:"fire-rtdb",[sW]:"fire-data-connect",[oW]:"fire-rtdb-compat",[aW]:"fire-fn",[cW]:"fire-fn-compat",[lW]:"fire-iid",[uW]:"fire-iid-compat",[dW]:"fire-fcm",[hW]:"fire-fcm-compat",[fW]:"fire-perf",[pW]:"fire-perf-compat",[gW]:"fire-rc",[mW]:"fire-rc-compat",[yW]:"fire-gcs",[_W]:"fire-gcs-compat",[vW]:"fire-fst",[IW]:"fire-fst-compat",[wW]:"fire-vertex","fire-js":"fire-js",[bW]:"fire-js-all"};var hv=new Map,TW=new Map,NT=new Map;function wF(n,e){try{n.container.addComponent(e)}catch(t){Ys.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function wp(n){let e=n.name;if(NT.has(e))return Ys.debug(`There were multiple attempts to register component ${e}.`),!1;NT.set(e,n);for(let t of hv.values())wF(t,n);for(let t of TW.values())wF(t,n);return!0}function CF(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function TF(n){return n==null?!1:n.settings!==void 0}var SW={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},va=new vp("app","Firebase",SW);var PT=class{constructor(e,t,r){this._isDeleted=!1,this._options=B({},e),this._config=B({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Qs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw va.create("app-deleted",{appName:this._name})}};var SF=EW;function bp(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=B({name:kT,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw va.create("bad-app-name",{appName:String(i)});if(t||(t=TT()),!t)throw va.create("no-options");let s=hv.get(i);if(s){if(ad(t,s.options)&&ad(r,s.config))return s;throw va.create("duplicate-app",{appName:i})}let o=new dv(i);for(let c of NT.values())o.addComponent(c);let a=new PT(t,r,o);return hv.set(i,a),a}function DF(n=kT){let e=hv.get(n);if(!e&&n===kT&&TT())return bp();if(!e)throw va.create("no-app",{appName:n});return e}function wa(n,e,t){let r=CW[n]??n;t&&(r+=`-${t}`);let i=r.match(/\s|\//),s=e.match(/\s|\//);if(i||s){let o=[`Unable to register library "${r}" with version "${e}":`];i&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&s&&o.push("and"),s&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ys.warn(o.join(" "));return}wp(new Qs(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}var DW="firebase-heartbeat-database",AW=1,Ip="firebase-heartbeat-store",AT=null;function AF(){return AT||(AT=sv(DW,AW,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Ip)}catch(t){console.warn(t)}}}}).catch(n=>{throw va.create("idb-open",{originalErrorMessage:n.message})})),AT}async function xW(n){try{let t=(await AF()).transaction(Ip),r=await t.objectStore(Ip).get(xF(n));return await t.done,r}catch(e){if(e instanceof Ks)Ys.warn(e.message);else{let t=va.create("idb-get",{originalErrorMessage:e?.message});Ys.warn(t.message)}}}async function IF(n,e){try{let r=(await AF()).transaction(Ip,"readwrite");await r.objectStore(Ip).put(e,xF(n)),await r.done}catch(t){if(t instanceof Ks)Ys.warn(t.message);else{let r=va.create("idb-set",{originalErrorMessage:t?.message});Ys.warn(r.message)}}}function xF(n){return`${n.name}!${n.options.appId}`}var RW=1024,kW=30,MT=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new OT(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{let t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=bF();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>kW){let i=PW(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Ys.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";let e=bF(),{heartbeatsToSend:t,unsentEntries:r}=NW(this._heartbeatsCache.heartbeats),i=_p(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return Ys.warn(e),""}}};function bF(){return new Date().toISOString().substring(0,10)}function NW(n,e=RW){let t=[],r=n.slice();for(let i of n){let s=t.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),EF(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),EF(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var OT=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return ST()?_F().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){let t=await xW(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){let r=await this.read();return IF(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){let r=await this.read();return IF(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}};function EF(n){return _p(JSON.stringify({version:2,heartbeats:n})).length}function PW(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function MW(n){wp(new Qs("platform-logger",e=>new xT(e),"PRIVATE")),wp(new Qs("heartbeat",e=>new MT(e),"PRIVATE")),wa(RT,vF,n),wa(RT,vF,"esm2020"),wa("fire-js","")}MW("");function zF(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var qF=zF,GF=new bi("auth","Firebase",zF());var _v=new ss("@firebase/auth");function OW(n,...e){_v.logLevel<=$e.WARN&&_v.warn(`Auth (${ga}): ${n}`,...e)}function pv(n,...e){_v.logLevel<=$e.ERROR&&_v.error(`Auth (${ga}): ${n}`,...e)}function Ea(n,...e){throw tS(n,...e)}function ol(n,...e){return tS(n,...e)}function WF(n,e,t){let r=Object.assign(Object.assign({},qF()),{[e]:t});return new bi("auth","Firebase",r).create(e,{appName:n.name})}function sl(n){return WF(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function tS(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return GF.create(n,...e)}function Te(n,e,...t){if(!n)throw tS(e,...t)}function Js(n){let e="INTERNAL ASSERTION FAILED: "+n;throw pv(e),new Error(e)}function Ca(n,e){n||Js(e)}function UT(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function FW(){return RF()==="http:"||RF()==="https:"}function RF(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function VW(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(FW()||E2()||"connection"in navigator)?navigator.onLine:!0}function LW(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var al=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ca(t>e,"Short delay should be less than long delay!"),this.isMobile=I2()||C2()}get(){return VW()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function nS(n,e){Ca(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var vv=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Js("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Js("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Js("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var UW={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var jW=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],BW=new al(3e4,6e4);function rS(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function ld(n,e,t,r,i={}){return KF(n,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});let a=dp(Object.assign({key:n.config.apiKey},o)).slice(1),c=await n._getAdditionalHeaders();c["Content-Type"]="application/json",n.languageCode&&(c["X-Firebase-Locale"]=n.languageCode);let l=Object.assign({method:e,headers:c},s);return b2()||(l.referrerPolicy="no-referrer"),n.emulatorConfig&&fa(n.emulatorConfig.host)&&(l.credentials="include"),vv.fetch()(await QF(n,n.config.apiHost,t,a),l)})}async function KF(n,e,t){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},UW),e);try{let i=new jT(n),s=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();let o=await s.json();if("needConfirmation"in o)throw fv(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[c,l]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw fv(n,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw fv(n,"email-already-in-use",o);if(c==="USER_DISABLED")throw fv(n,"user-disabled",o);let h=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw WF(n,h,l);Ea(n,h)}}catch(i){if(i instanceof Sr)throw i;Ea(n,"network-request-failed",{message:String(i)})}}async function $W(n,e,t,r,i={}){let s=await ld(n,e,t,r,i);return"mfaPendingCredential"in s&&Ea(n,"multi-factor-auth-required",{_serverResponse:s}),s}async function QF(n,e,t,r){let i=`${e}${t}?${r}`,s=n,o=s.config.emulator?nS(n.config,i):`${n.config.apiScheme}://${i}`;return jW.includes(t)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o}var jT=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(ol(this.auth,"network-request-failed")),BW.get())})}};function fv(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=ol(n,e,r);return i.customData._tokenResponse=t,i}async function HW(n,e){return ld(n,"POST","/v1/accounts:delete",e)}async function wv(n,e){return ld(n,"POST","/v1/accounts:lookup",e)}function Ep(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function iS(n,e=!1){let t=mn(n),r=await t.getIdToken(e),i=sS(r);Te(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:Ep(FT(i.auth_time)),issuedAtTime:Ep(FT(i.iat)),expirationTime:Ep(FT(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}}function FT(n){return Number(n)*1e3}function sS(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return pv("JWT malformed, contained fewer than 3 sections"),null;try{let i=Z_(t);return i?JSON.parse(i):(pv("Failed to decode base64 JWT payload"),null)}catch(i){return pv("Caught error parsing JWT payload as JSON",i?.toString()),null}}function kF(n){let e=sS(n);return Te(e,"internal-error"),Te(typeof e.exp<"u","internal-error"),Te(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Tp(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Sr&&zW(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function zW({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var BT=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}};var Sp=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ep(this.lastLoginAt),this.creationTime=Ep(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};async function Iv(n){var e;let t=n.auth,r=await n.getIdToken(),i=await Tp(n,wv(t,{idToken:r}));Te(i?.users.length,t,"internal-error");let s=i.users[0];n._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?YF(s.providerUserInfo):[],a=qW(n.providerData,o),c=n.isAnonymous,l=!(n.email&&s.passwordHash)&&!a?.length,h=c?l:!1,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Sp(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(n,p)}async function oS(n){let e=mn(n);await Iv(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function qW(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function YF(n){return n.map(e=>{var{providerId:t}=e,r=OI(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}async function GW(n,e){let t=await KF(n,{},async()=>{let r=dp({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,o=await QF(n,i,"/v1/token",`key=${s}`),a=await n._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let c={method:"POST",headers:a,body:r};return n.emulatorConfig&&fa(n.emulatorConfig.host)&&(c.credentials="include"),vv.fetch()(o,c)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function WW(n,e){return ld(n,"POST","/v2/accounts:revokeToken",rS(n,e))}var Cp=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Te(e.idToken,"internal-error"),Te(typeof e.idToken<"u","internal-error"),Te(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):kF(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Te(e.length!==0,"internal-error");let t=kF(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Te(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){let{accessToken:r,refreshToken:i,expiresIn:s}=await GW(e,t);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:s}=t,o=new n;return r&&(Te(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(Te(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(Te(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return Js("not implemented")}};function Ia(n,e){Te(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var ba=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,s=OI(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new BT(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Sp(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){let t=await Tp(this,this.stsTokenManager.getToken(this.auth,e));return Te(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return iS(this,e)}reload(){return oS(this)}_assign(e){this!==e&&(Te(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Te(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Iv(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(qr(this.auth.app))return Promise.reject(sl(this.auth));let e=await this.getIdToken();return await Tp(this,HW(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,s,o,a,c,l,h;let p=(r=t.displayName)!==null&&r!==void 0?r:void 0,m=(i=t.email)!==null&&i!==void 0?i:void 0,b=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,k=(o=t.photoURL)!==null&&o!==void 0?o:void 0,O=(a=t.tenantId)!==null&&a!==void 0?a:void 0,N=(c=t._redirectEventId)!==null&&c!==void 0?c:void 0,H=(l=t.createdAt)!==null&&l!==void 0?l:void 0,Q=(h=t.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:Z,emailVerified:Ee,isAnonymous:Je,providerData:Ie,stsTokenManager:T}=t;Te(Z&&T,e,"internal-error");let v=Cp.fromJSON(this.name,T);Te(typeof Z=="string",e,"internal-error"),Ia(p,e.name),Ia(m,e.name),Te(typeof Ee=="boolean",e,"internal-error"),Te(typeof Je=="boolean",e,"internal-error"),Ia(b,e.name),Ia(k,e.name),Ia(O,e.name),Ia(N,e.name),Ia(H,e.name),Ia(Q,e.name);let I=new n({uid:Z,auth:e,email:m,emailVerified:Ee,displayName:p,isAnonymous:Je,photoURL:k,phoneNumber:b,tenantId:O,stsTokenManager:v,createdAt:H,lastLoginAt:Q});return Ie&&Array.isArray(Ie)&&(I.providerData=Ie.map(C=>Object.assign({},C))),N&&(I._redirectEventId=N),I}static async _fromIdTokenResponse(e,t,r=!1){let i=new Cp;i.updateFromServerResponse(t);let s=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Iv(s),s}static async _fromGetAccountInfoResponse(e,t,r){let i=t.users[0];Te(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?YF(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,a=new Cp;a.updateFromIdToken(r);let c=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Sp(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(c,l),c}};var NF=new Map;function Xs(n){Ca(n instanceof Function,"Expected a class definition");let e=NF.get(n);return e?(Ca(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,NF.set(n,e),e)}var KW=(()=>{class n{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,r){this.storage[t]=r}async _get(t){let r=this.storage[t];return r===void 0?null:r}async _remove(t){delete this.storage[t]}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),$T=KW;function gv(n,e,t){return`firebase:${n}:${e}:${t}`}var bv=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=gv(this.userKey,i.apiKey,s),this.fullPersistenceKey=gv("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){let e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=await wv(this.auth,{idToken:e}).catch(()=>{});return t?ba._fromGetAccountInfoResponse(this.auth,t,e):null}return ba._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;let t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new n(Xs($T),e,r);let i=(await Promise.all(t.map(async l=>{if(await l._isAvailable())return l}))).filter(l=>l),s=i[0]||Xs($T),o=gv(r,e.config.apiKey,e.name),a=null;for(let l of t)try{let h=await l._get(o);if(h){let p;if(typeof h=="string"){let m=await wv(e,{idToken:h}).catch(()=>{});if(!m)break;p=await ba._fromGetAccountInfoResponse(e,m,h)}else p=ba._fromJSON(e,h);l!==s&&(a=p),s=l;break}}catch{}let c=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new n(s,e,r):(s=c[0],a&&await s._set(o,a.toJSON()),await Promise.all(t.map(async l=>{if(l!==s)try{await l._remove(o)}catch{}})),new n(s,e,r))}};function PF(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(eV(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(JF(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(nV(e))return"Blackberry";if(rV(e))return"Webos";if(XF(e))return"Safari";if((e.includes("chrome/")||ZF(e))&&!e.includes("edge/"))return"Chrome";if(tV(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function JF(n=bn()){return/firefox\//i.test(n)}function XF(n=bn()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function ZF(n=bn()){return/crios\//i.test(n)}function eV(n=bn()){return/iemobile/i.test(n)}function tV(n=bn()){return/android/i.test(n)}function nV(n=bn()){return/blackberry/i.test(n)}function rV(n=bn()){return/webos/i.test(n)}function aS(n=bn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function QW(n=bn()){var e;return aS(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function YW(){return T2()&&document.documentMode===10}function iV(n=bn()){return aS(n)||tV(n)||rV(n)||nV(n)||/windows phone/i.test(n)||eV(n)}function sV(n,e=[]){let t;switch(n){case"Browser":t=PF(bn());break;case"Worker":t=`${PF(bn())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${ga}/${r}`}var HT=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=s=>new Promise((o,a)=>{try{let c=e(s);o(c)}catch(c){a(c)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}};async function JW(n,e={}){return ld(n,"GET","/v2/passwordPolicy",rS(n,e))}var XW=6,zT=class{constructor(e){var t,r,i,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=o.minPasswordLength)!==null&&t!==void 0?t:XW,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,s,o,a;let c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(t=c.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(s=c.containsUppercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var qT=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ev(this),this.idTokenSubscription=new Ev(this),this.beforeStateQueue=new HT(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=GF,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Xs(t)),this._initializationPromise=this.queue(async()=>{var r,i,s;if(!this._deleted&&(this.persistenceManager=await bv.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;let e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{let t=await wv(this,{idToken:e}),r=await ba._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(qr(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}let r=await this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();let o=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=i?._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===a)&&c?.user&&(i=c.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Te(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Iv(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=LW()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(qr(this.app))return Promise.reject(sl(this));let t=e?mn(e):null;return t&&Te(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Te(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return qr(this.app)?Promise.reject(sl(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return qr(this.app)?Promise.reject(sl(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Xs(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){let e=await JW(this),t=new zT(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new bi("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){let t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await WW(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){let r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){let t=e&&Xs(e)||this._popupRedirectResolver;Te(t,this,"argument-error"),this.redirectPersistenceManager=await bv.create(this,[Xs(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let s=typeof t=="function"?t:t.next.bind(t),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Te(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof t=="function"){let c=e.addObserver(t,r,i);return()=>{o=!0,c()}}else{let c=e.addObserver(t);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Te(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=sV(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);let i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;if(qr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t?.error&&OW(`Error while retrieving App Check token: ${t.error}`),t?.token}};function cS(n){return mn(n)}var Ev=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=x2(t=>this.observer=t)}get next(){return Te(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var lS={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function ZW(n){lS=n}function eK(n){return lS.loadJS(n)}function tK(){return lS.gapiScript}function oV(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function uS(n,e){let t=rd(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),s=t.getOptions();if(is(s,e??{}))return i;Ea(i,"already-initialized")}return t.initialize({options:e})}function nK(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Xs);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function dS(n,e,t){let r=cS(n);Te(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,s=aV(e),{host:o,port:a}=rK(e),c=a===null?"":`:${a}`,l={url:`${s}//${o}${c}/`},h=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){Te(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Te(is(l,r.config.emulator)&&is(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=l,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,fa(o)?(tv(`${s}//${o}${c}`),nv("Auth",!0)):i||iK()}function aV(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function rK(n){let e=aV(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let s=i[1];return{host:s,port:MF(r.substr(s.length+1))}}else{let[s,o]=r.split(":");return{host:s,port:MF(o)}}}function MF(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function iK(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var Cv=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Js("not implemented")}_getIdTokenResponse(e){return Js("not implemented")}_linkToIdToken(e,t){return Js("not implemented")}_getReauthenticationResolver(e){return Js("not implemented")}};async function VT(n,e){return $W(n,"POST","/v1/accounts:signInWithIdp",rS(n,e))}var Tv=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var GT=class extends Tv{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var Dp=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){let s=await ba._fromIdTokenResponse(e,r,i),o=OF(r);return new n({user:s,providerId:o,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);let i=OF(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})}};function OF(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var WT=class n extends Sr{constructor(e,t,r,i){var s;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function cV(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?WT._fromErrorAndOperation(n,s,e,r):s})}async function sK(n,e,t=!1){let r=await Tp(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Dp._forOperation(n,"link",r)}async function oK(n,e,t=!1){let{auth:r}=n;if(qr(r.app))return Promise.reject(sl(r));let i="reauthenticate";try{let s=await Tp(n,cV(r,i,e,n),t);Te(s.idToken,r,"internal-error");let o=sS(s.idToken);Te(o,r,"internal-error");let{sub:a}=o;return Te(n.uid===a,r,"user-mismatch"),Dp._forOperation(n,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&Ea(r,"user-mismatch"),s}}async function aK(n,e,t=!1){if(qr(n.app))return Promise.reject(sl(n));let r="signIn",i=await cV(n,r,e),s=await Dp._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(s.user),s}function hS(n,e,t,r){return mn(n).onIdTokenChanged(e,t,r)}function fS(n,e,t){return mn(n).beforeAuthStateChanged(e,t)}var Sv="__sak";var Dv=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Sv,"1"),this.storage.removeItem(Sv),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var cK=1e3,lK=10,uK=(()=>{class n extends Dv{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=iV(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),s=this.localCache[r];i!==s&&t(r,s,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((a,c,l)=>{this.notifyListeners(a,l)});return}let i=t.key;r?this.detachListener():this.stopPolling();let s=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},o=this.storage.getItem(i);YW()&&o!==t.newValue&&t.newValue!==t.oldValue?setTimeout(s,lK):s()}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},cK)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,r){await super._set(t,r),this.localCache[t]=JSON.stringify(r)}async _get(t){let r=await super._get(t);return this.localCache[t]=JSON.stringify(r),r}async _remove(t){await super._remove(t),delete this.localCache[t]}}return n.type="LOCAL",n})(),lV=uK;var dK=(()=>{class n extends Dv{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),pS=dK;function hK(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}var fK=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let r=this.receivers.find(s=>s.isListeningto(t));if(r)return r;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}async handleEvent(t){let r=t,{eventId:i,eventType:s,data:o}=r.data,a=this.handlersMap[s];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:s});let c=Array.from(a).map(async h=>h(r.origin,o)),l=await hK(c);r.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:l})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function uV(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var KT=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,c)=>{let l=uV("",20);i.port1.start();let h=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(p){let m=p;if(m.data.eventId===l)switch(m.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(m.data.response);break;default:clearTimeout(h),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}};function as(){return window}function pK(n){as().location.href=n}function dV(){return typeof as().WorkerGlobalScope<"u"&&typeof as().importScripts=="function"}async function gK(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function mK(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function yK(){return dV()?self:null}var hV="firebaseLocalStorageDb",_K=1,Av="firebaseLocalStorage",fV="fbase_key",cl=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function Rv(n,e){return n.transaction([Av],e?"readwrite":"readonly").objectStore(Av)}function vK(){let n=indexedDB.deleteDatabase(hV);return new cl(n).toPromise()}function QT(){let n=indexedDB.open(hV,_K);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(Av,{keyPath:fV})}catch(i){t(i)}}),n.addEventListener("success",async()=>{let r=n.result;r.objectStoreNames.contains(Av)?e(r):(r.close(),await vK(),e(await QT()))})})}async function FF(n,e,t){let r=Rv(n,!0).put({[fV]:e,value:t});return new cl(r).toPromise()}async function wK(n,e){let t=Rv(n,!1).get(e),r=await new cl(t).toPromise();return r===void 0?null:r.value}function VF(n,e){let t=Rv(n,!0).delete(e);return new cl(t).toPromise()}var IK=800,bK=3,EK=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await QT(),this.db)}async _withRetries(t){let r=0;for(;;)try{let i=await this._openDb();return await t(i)}catch(i){if(r++>bK)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return dV()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=fK._getInstance(yK()),this.receiver._subscribe("keyChanged",async(t,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(t,r)=>["keyChanged"])}async initializeSender(){var t,r;if(this.activeServiceWorker=await gK(),!this.activeServiceWorker)return;this.sender=new KT(this.activeServiceWorker);let i=await this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||mK()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;let t=await QT();return await FF(t,Sv,"1"),await VF(t,Sv),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,r){return this._withPendingWrite(async()=>(await this._withRetries(i=>FF(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)))}async _get(t){let r=await this._withRetries(i=>wK(i,t));return this.localCache[t]=r,r}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(r=>VF(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){let t=await this._withRetries(s=>{let o=Rv(s,!1).getAll();return new cl(o).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(t.length!==0)for(let{fbase_key:s,value:o}of t)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),r.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),r.push(s));return r}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let s of Array.from(i))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),IK)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),pV=EK;var rIe=oV("rcb"),iIe=new al(3e4,6e4);function CK(n,e){return e?Xs(e):(Te(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var Ap=class extends Cv{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return VT(e,this._buildIdpRequest())}_linkToIdToken(e,t){return VT(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return VT(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function TK(n){return aK(n.auth,new Ap(n),n.bypassAuthState)}function SK(n){let{auth:e,user:t}=n;return Te(t,e,"internal-error"),oK(t,new Ap(n),n.bypassAuthState)}async function DK(n){let{auth:e,user:t}=n;return Te(t,e,"internal-error"),sK(t,new Ap(n),n.bypassAuthState)}var YT=class{constructor(e,t,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){let{urlResponse:t,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}let c={auth:this.auth,requestUri:t,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(c))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return TK;case"linkViaPopup":case"linkViaRedirect":return DK;case"reauthViaPopup":case"reauthViaRedirect":return SK;default:Ea(this.auth,"internal-error")}}resolve(e){Ca(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ca(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var sIe=new al(2e3,1e4);var AK="pendingRedirect",mv=new Map,JT=class extends YT{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=mv.get(this.auth._key());if(!e){try{let r=await xK(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}mv.set(this.auth._key(),e)}return this.bypassAuthState||mv.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}};async function xK(n,e){let t=NK(e),r=kK(n);if(!await r._isAvailable())return!1;let i=await r._get(t)==="true";return await r._remove(t),i}function RK(n,e){mv.set(n._key(),e)}function kK(n){return Xs(n._redirectPersistence)}function NK(n){return gv(AK,n.config.apiKey,n.name)}async function PK(n,e,t=!1){if(qr(n.app))return Promise.reject(sl(n));let r=cS(n),i=CK(r,e),o=await new JT(r,i,t).execute();return o&&!t&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}var MK=600*1e3,XT=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!OK(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!gV(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(ol(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=MK&&this.cachedEventUids.clear(),this.cachedEventUids.has(LF(e))}saveEventToCache(e){this.cachedEventUids.add(LF(e)),this.lastProcessedEventTime=Date.now()}};function LF(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function gV({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function OK(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return gV(n);default:return!1}}async function FK(n,e={}){return ld(n,"GET","/v1/projects",e)}var VK=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,LK=/^https?/;async function UK(n){if(n.config.emulator)return;let{authorizedDomains:e}=await FK(n);for(let t of e)try{if(jK(t))return}catch{}Ea(n,"unauthorized-domain")}function jK(n){let e=UT(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let o=new URL(n);return o.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===r}if(!LK.test(t))return!1;if(VK.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var BK=new al(3e4,6e4);function UF(){let n=as().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function $K(n){return new Promise((e,t)=>{var r,i,s;function o(){UF(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{UF(),t(ol(n,"network-request-failed"))},timeout:BK.get()})}if(!((i=(r=as().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=as().gapi)===null||s===void 0)&&s.load)o();else{let a=oV("iframefcb");return as()[a]=()=>{gapi.load?o():t(ol(n,"network-request-failed"))},eK(`${tK()}?onload=${a}`).catch(c=>t(c))}}).catch(e=>{throw yv=null,e})}var yv=null;function HK(n){return yv=yv||$K(n),yv}var zK=new al(5e3,15e3),qK="__/auth/iframe",GK="emulator/auth/iframe",WK={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},KK=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function QK(n){let e=n.config;Te(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?nS(e,GK):`https://${n.config.authDomain}/${qK}`,r={apiKey:e.apiKey,appName:n.name,v:ga},i=KK.get(n.config.apiHost);i&&(r.eid=i);let s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${t}?${dp(r).slice(1)}`}async function YK(n){let e=await HK(n),t=as().gapi;return Te(t,n,"internal-error"),e.open({where:document.body,url:QK(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:WK,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});let o=ol(n,"network-request-failed"),a=as().setTimeout(()=>{s(o)},zK.get());function c(){as().clearTimeout(a),i(r)}r.ping(c).then(c,()=>{s(o)})}))}var JK={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},XK=500,ZK=600,eQ="_blank",tQ="http://localhost",xv=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function nQ(n,e,t,r=XK,i=ZK){let s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",c=Object.assign(Object.assign({},JK),{width:r.toString(),height:i.toString(),top:s,left:o}),l=bn().toLowerCase();t&&(a=ZF(l)?eQ:t),JF(l)&&(e=e||tQ,c.scrollbars="yes");let h=Object.entries(c).reduce((m,[b,k])=>`${m}${b}=${k},`,"");if(QW(l)&&a!=="_self")return rQ(e||"",a),new xv(null);let p=window.open(e||"",a,h);Te(p,n,"popup-blocked");try{p.focus()}catch{}return new xv(p)}function rQ(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var iQ="__/auth/handler",sQ="emulator/auth/handler",oQ=encodeURIComponent("fac");async function jF(n,e,t,r,i,s){Te(n.config.authDomain,n,"auth-domain-config-required"),Te(n.config.apiKey,n,"invalid-api-key");let o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:ga,eventId:i};if(e instanceof Tv){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",A2(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(let[h,p]of Object.entries(s||{}))o[h]=p}if(e instanceof GT){let h=e.getScopes().filter(p=>p!=="");h.length>0&&(o.scopes=h.join(","))}n.tenantId&&(o.tid=n.tenantId);let a=o;for(let h of Object.keys(a))a[h]===void 0&&delete a[h];let c=await n._getAppCheckToken(),l=c?`#${oQ}=${encodeURIComponent(c)}`:"";return`${aQ(n)}?${dp(a).slice(1)}${l}`}function aQ({config:n}){return n.emulator?nS(n,sQ):`https://${n.authDomain}/${iQ}`}var LT="webStorageSupport",ZT=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=pS,this._completeRedirectFn=PK,this._overrideRedirectResult=RK}async _openPopup(e,t,r,i){var s;Ca((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let o=await jF(e,t,r,UT(),i);return nQ(e,o,uV())}async _openRedirect(e,t,r,i){await this._originValidation(e);let s=await jF(e,t,r,UT(),i);return pK(s),new Promise(()=>{})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(Ca(s,"If manager is not set, promise should be"),s)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){let t=await YK(e),r=new XT(e);return t.register("authEvent",i=>(Te(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(LT,{type:LT},i=>{var s;let o=(s=i?.[0])===null||s===void 0?void 0:s[LT];o!==void 0&&t(!!o),Ea(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=UK(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return iV()||XF()||aS()}},mV=ZT;var BF="@firebase/auth",$F="1.10.8";var eS=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Te(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function cQ(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function lQ(n){Ei(new Jn("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;Te(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:o,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:sV(n)},l=new qT(r,i,s,c);return nK(l,t),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Ei(new Jn("auth-internal",e=>{let t=cS(e.getProvider("auth").getImmediate());return(r=>new eS(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ft(BF,$F,cQ(n)),Ft(BF,$F,"esm2017")}var uQ=300,dQ=eT("authIdTokenMaxAge")||uQ,HF=null,hQ=n=>async e=>{let t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>dQ)return;let i=t?.token;HF!==i&&(HF=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function gS(n=tl()){let e=rd(n,"auth");if(e.isInitialized())return e.getImmediate();let t=uS(n,{popupRedirectResolver:mV,persistence:[pV,lV,pS]}),r=eT("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let s=new URL(r,location.origin);if(location.origin===s.origin){let o=hQ(s.toString());fS(t,o,()=>o(t.currentUser)),hS(t,a=>o(a))}}let i=XC("auth");return i&&dS(t,`http://${i}`),t}function fQ(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}ZW({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let s=ol("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",fQ().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});lQ("Browser");var yV="auth",xp=class{constructor(e){return e}},Rp=class{constructor(){return sd(yV)}};var mS=new re("angularfire2.auth-instances");function oY(n,e){let t=pp(yV,n,e);return t&&new xp(t)}function aY(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new xp(r)}}var cY={provide:Rp,deps:[[new Ir,mS]]},lY={provide:xp,useFactory:oY,deps:[[new Ir,mS],Ws]};function _V(n,...e){return Ft("angularfire",ma.full,"auth"),gr([lY,cY,{provide:mS,useFactory:aY(n),multi:!0,deps:[it,wt,ya,rl,[new Ir,od],...e]}])}var vV=En(gS,!0);var wV=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},IV={};var Zs,yS;(function(){var n;function e(T,v){function I(){}I.prototype=v.prototype,T.F=v.prototype,T.prototype=new I,T.prototype.constructor=T,T.D=function(C,E,A){for(var w=Array(arguments.length-2),Ct=2;Ct<arguments.length;Ct++)w[Ct-2]=arguments[Ct];return v.prototype[E].apply(C,w)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(T,v,I){I||(I=0);let C=Array(16);if(typeof v=="string")for(var E=0;E<16;++E)C[E]=v.charCodeAt(I++)|v.charCodeAt(I++)<<8|v.charCodeAt(I++)<<16|v.charCodeAt(I++)<<24;else for(E=0;E<16;++E)C[E]=v[I++]|v[I++]<<8|v[I++]<<16|v[I++]<<24;v=T.g[0],I=T.g[1],E=T.g[2];let A=T.g[3],w;w=v+(A^I&(E^A))+C[0]+3614090360&4294967295,v=I+(w<<7&4294967295|w>>>25),w=A+(E^v&(I^E))+C[1]+3905402710&4294967295,A=v+(w<<12&4294967295|w>>>20),w=E+(I^A&(v^I))+C[2]+606105819&4294967295,E=A+(w<<17&4294967295|w>>>15),w=I+(v^E&(A^v))+C[3]+3250441966&4294967295,I=E+(w<<22&4294967295|w>>>10),w=v+(A^I&(E^A))+C[4]+4118548399&4294967295,v=I+(w<<7&4294967295|w>>>25),w=A+(E^v&(I^E))+C[5]+1200080426&4294967295,A=v+(w<<12&4294967295|w>>>20),w=E+(I^A&(v^I))+C[6]+2821735955&4294967295,E=A+(w<<17&4294967295|w>>>15),w=I+(v^E&(A^v))+C[7]+4249261313&4294967295,I=E+(w<<22&4294967295|w>>>10),w=v+(A^I&(E^A))+C[8]+1770035416&4294967295,v=I+(w<<7&4294967295|w>>>25),w=A+(E^v&(I^E))+C[9]+2336552879&4294967295,A=v+(w<<12&4294967295|w>>>20),w=E+(I^A&(v^I))+C[10]+4294925233&4294967295,E=A+(w<<17&4294967295|w>>>15),w=I+(v^E&(A^v))+C[11]+2304563134&4294967295,I=E+(w<<22&4294967295|w>>>10),w=v+(A^I&(E^A))+C[12]+1804603682&4294967295,v=I+(w<<7&4294967295|w>>>25),w=A+(E^v&(I^E))+C[13]+4254626195&4294967295,A=v+(w<<12&4294967295|w>>>20),w=E+(I^A&(v^I))+C[14]+2792965006&4294967295,E=A+(w<<17&4294967295|w>>>15),w=I+(v^E&(A^v))+C[15]+1236535329&4294967295,I=E+(w<<22&4294967295|w>>>10),w=v+(E^A&(I^E))+C[1]+4129170786&4294967295,v=I+(w<<5&4294967295|w>>>27),w=A+(I^E&(v^I))+C[6]+3225465664&4294967295,A=v+(w<<9&4294967295|w>>>23),w=E+(v^I&(A^v))+C[11]+643717713&4294967295,E=A+(w<<14&4294967295|w>>>18),w=I+(A^v&(E^A))+C[0]+3921069994&4294967295,I=E+(w<<20&4294967295|w>>>12),w=v+(E^A&(I^E))+C[5]+3593408605&4294967295,v=I+(w<<5&4294967295|w>>>27),w=A+(I^E&(v^I))+C[10]+38016083&4294967295,A=v+(w<<9&4294967295|w>>>23),w=E+(v^I&(A^v))+C[15]+3634488961&4294967295,E=A+(w<<14&4294967295|w>>>18),w=I+(A^v&(E^A))+C[4]+3889429448&4294967295,I=E+(w<<20&4294967295|w>>>12),w=v+(E^A&(I^E))+C[9]+568446438&4294967295,v=I+(w<<5&4294967295|w>>>27),w=A+(I^E&(v^I))+C[14]+3275163606&4294967295,A=v+(w<<9&4294967295|w>>>23),w=E+(v^I&(A^v))+C[3]+4107603335&4294967295,E=A+(w<<14&4294967295|w>>>18),w=I+(A^v&(E^A))+C[8]+1163531501&4294967295,I=E+(w<<20&4294967295|w>>>12),w=v+(E^A&(I^E))+C[13]+2850285829&4294967295,v=I+(w<<5&4294967295|w>>>27),w=A+(I^E&(v^I))+C[2]+4243563512&4294967295,A=v+(w<<9&4294967295|w>>>23),w=E+(v^I&(A^v))+C[7]+1735328473&4294967295,E=A+(w<<14&4294967295|w>>>18),w=I+(A^v&(E^A))+C[12]+2368359562&4294967295,I=E+(w<<20&4294967295|w>>>12),w=v+(I^E^A)+C[5]+4294588738&4294967295,v=I+(w<<4&4294967295|w>>>28),w=A+(v^I^E)+C[8]+2272392833&4294967295,A=v+(w<<11&4294967295|w>>>21),w=E+(A^v^I)+C[11]+1839030562&4294967295,E=A+(w<<16&4294967295|w>>>16),w=I+(E^A^v)+C[14]+4259657740&4294967295,I=E+(w<<23&4294967295|w>>>9),w=v+(I^E^A)+C[1]+2763975236&4294967295,v=I+(w<<4&4294967295|w>>>28),w=A+(v^I^E)+C[4]+1272893353&4294967295,A=v+(w<<11&4294967295|w>>>21),w=E+(A^v^I)+C[7]+4139469664&4294967295,E=A+(w<<16&4294967295|w>>>16),w=I+(E^A^v)+C[10]+3200236656&4294967295,I=E+(w<<23&4294967295|w>>>9),w=v+(I^E^A)+C[13]+681279174&4294967295,v=I+(w<<4&4294967295|w>>>28),w=A+(v^I^E)+C[0]+3936430074&4294967295,A=v+(w<<11&4294967295|w>>>21),w=E+(A^v^I)+C[3]+3572445317&4294967295,E=A+(w<<16&4294967295|w>>>16),w=I+(E^A^v)+C[6]+76029189&4294967295,I=E+(w<<23&4294967295|w>>>9),w=v+(I^E^A)+C[9]+3654602809&4294967295,v=I+(w<<4&4294967295|w>>>28),w=A+(v^I^E)+C[12]+3873151461&4294967295,A=v+(w<<11&4294967295|w>>>21),w=E+(A^v^I)+C[15]+530742520&4294967295,E=A+(w<<16&4294967295|w>>>16),w=I+(E^A^v)+C[2]+3299628645&4294967295,I=E+(w<<23&4294967295|w>>>9),w=v+(E^(I|~A))+C[0]+4096336452&4294967295,v=I+(w<<6&4294967295|w>>>26),w=A+(I^(v|~E))+C[7]+1126891415&4294967295,A=v+(w<<10&4294967295|w>>>22),w=E+(v^(A|~I))+C[14]+2878612391&4294967295,E=A+(w<<15&4294967295|w>>>17),w=I+(A^(E|~v))+C[5]+4237533241&4294967295,I=E+(w<<21&4294967295|w>>>11),w=v+(E^(I|~A))+C[12]+1700485571&4294967295,v=I+(w<<6&4294967295|w>>>26),w=A+(I^(v|~E))+C[3]+2399980690&4294967295,A=v+(w<<10&4294967295|w>>>22),w=E+(v^(A|~I))+C[10]+4293915773&4294967295,E=A+(w<<15&4294967295|w>>>17),w=I+(A^(E|~v))+C[1]+2240044497&4294967295,I=E+(w<<21&4294967295|w>>>11),w=v+(E^(I|~A))+C[8]+1873313359&4294967295,v=I+(w<<6&4294967295|w>>>26),w=A+(I^(v|~E))+C[15]+4264355552&4294967295,A=v+(w<<10&4294967295|w>>>22),w=E+(v^(A|~I))+C[6]+2734768916&4294967295,E=A+(w<<15&4294967295|w>>>17),w=I+(A^(E|~v))+C[13]+1309151649&4294967295,I=E+(w<<21&4294967295|w>>>11),w=v+(E^(I|~A))+C[4]+4149444226&4294967295,v=I+(w<<6&4294967295|w>>>26),w=A+(I^(v|~E))+C[11]+3174756917&4294967295,A=v+(w<<10&4294967295|w>>>22),w=E+(v^(A|~I))+C[2]+718787259&4294967295,E=A+(w<<15&4294967295|w>>>17),w=I+(A^(E|~v))+C[9]+3951481745&4294967295,T.g[0]=T.g[0]+v&4294967295,T.g[1]=T.g[1]+(E+(w<<21&4294967295|w>>>11))&4294967295,T.g[2]=T.g[2]+E&4294967295,T.g[3]=T.g[3]+A&4294967295}r.prototype.v=function(T,v){v===void 0&&(v=T.length);let I=v-this.blockSize,C=this.C,E=this.h,A=0;for(;A<v;){if(E==0)for(;A<=I;)i(this,T,A),A+=this.blockSize;if(typeof T=="string"){for(;A<v;)if(C[E++]=T.charCodeAt(A++),E==this.blockSize){i(this,C),E=0;break}}else for(;A<v;)if(C[E++]=T[A++],E==this.blockSize){i(this,C),E=0;break}}this.h=E,this.o+=v},r.prototype.A=function(){var T=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);T[0]=128;for(var v=1;v<T.length-8;++v)T[v]=0;v=this.o*8;for(var I=T.length-8;I<T.length;++I)T[I]=v&255,v/=256;for(this.v(T),T=Array(16),v=0,I=0;I<4;++I)for(let C=0;C<32;C+=8)T[v++]=this.g[I]>>>C&255;return T};function s(T,v){var I=a;return Object.prototype.hasOwnProperty.call(I,T)?I[T]:I[T]=v(T)}function o(T,v){this.h=v;let I=[],C=!0;for(let E=T.length-1;E>=0;E--){let A=T[E]|0;C&&A==v||(I[E]=A,C=!1)}this.g=I}var a={};function c(T){return-128<=T&&T<128?s(T,function(v){return new o([v|0],v<0?-1:0)}):new o([T|0],T<0?-1:0)}function l(T){if(isNaN(T)||!isFinite(T))return p;if(T<0)return N(l(-T));let v=[],I=1;for(let C=0;T>=I;C++)v[C]=T/I|0,I*=4294967296;return new o(v,0)}function h(T,v){if(T.length==0)throw Error("number format error: empty string");if(v=v||10,v<2||36<v)throw Error("radix out of range: "+v);if(T.charAt(0)=="-")return N(h(T.substring(1),v));if(T.indexOf("-")>=0)throw Error('number format error: interior "-" character');let I=l(Math.pow(v,8)),C=p;for(let A=0;A<T.length;A+=8){var E=Math.min(8,T.length-A);let w=parseInt(T.substring(A,A+E),v);E<8?(E=l(Math.pow(v,E)),C=C.j(E).add(l(w))):(C=C.j(I),C=C.add(l(w)))}return C}var p=c(0),m=c(1),b=c(16777216);n=o.prototype,n.m=function(){if(O(this))return-N(this).m();let T=0,v=1;for(let I=0;I<this.g.length;I++){let C=this.i(I);T+=(C>=0?C:4294967296+C)*v,v*=4294967296}return T},n.toString=function(T){if(T=T||10,T<2||36<T)throw Error("radix out of range: "+T);if(k(this))return"0";if(O(this))return"-"+N(this).toString(T);let v=l(Math.pow(T,6));var I=this;let C="";for(;;){let E=Ee(I,v).g;I=H(I,E.j(v));let A=((I.g.length>0?I.g[0]:I.h)>>>0).toString(T);if(I=E,k(I))return A+C;for(;A.length<6;)A="0"+A;C=A+C}},n.i=function(T){return T<0?0:T<this.g.length?this.g[T]:this.h};function k(T){if(T.h!=0)return!1;for(let v=0;v<T.g.length;v++)if(T.g[v]!=0)return!1;return!0}function O(T){return T.h==-1}n.l=function(T){return T=H(this,T),O(T)?-1:k(T)?0:1};function N(T){let v=T.g.length,I=[];for(let C=0;C<v;C++)I[C]=~T.g[C];return new o(I,~T.h).add(m)}n.abs=function(){return O(this)?N(this):this},n.add=function(T){let v=Math.max(this.g.length,T.g.length),I=[],C=0;for(let E=0;E<=v;E++){let A=C+(this.i(E)&65535)+(T.i(E)&65535),w=(A>>>16)+(this.i(E)>>>16)+(T.i(E)>>>16);C=w>>>16,A&=65535,w&=65535,I[E]=w<<16|A}return new o(I,I[I.length-1]&-2147483648?-1:0)};function H(T,v){return T.add(N(v))}n.j=function(T){if(k(this)||k(T))return p;if(O(this))return O(T)?N(this).j(N(T)):N(N(this).j(T));if(O(T))return N(this.j(N(T)));if(this.l(b)<0&&T.l(b)<0)return l(this.m()*T.m());let v=this.g.length+T.g.length,I=[];for(var C=0;C<2*v;C++)I[C]=0;for(C=0;C<this.g.length;C++)for(let E=0;E<T.g.length;E++){let A=this.i(C)>>>16,w=this.i(C)&65535,Ct=T.i(E)>>>16,Zn=T.i(E)&65535;I[2*C+2*E]+=w*Zn,Q(I,2*C+2*E),I[2*C+2*E+1]+=A*Zn,Q(I,2*C+2*E+1),I[2*C+2*E+1]+=w*Ct,Q(I,2*C+2*E+1),I[2*C+2*E+2]+=A*Ct,Q(I,2*C+2*E+2)}for(T=0;T<v;T++)I[T]=I[2*T+1]<<16|I[2*T];for(T=v;T<2*v;T++)I[T]=0;return new o(I,0)};function Q(T,v){for(;(T[v]&65535)!=T[v];)T[v+1]+=T[v]>>>16,T[v]&=65535,v++}function Z(T,v){this.g=T,this.h=v}function Ee(T,v){if(k(v))throw Error("division by zero");if(k(T))return new Z(p,p);if(O(T))return v=Ee(N(T),v),new Z(N(v.g),N(v.h));if(O(v))return v=Ee(T,N(v)),new Z(N(v.g),v.h);if(T.g.length>30){if(O(T)||O(v))throw Error("slowDivide_ only works with positive integers.");for(var I=m,C=v;C.l(T)<=0;)I=Je(I),C=Je(C);var E=Ie(I,1),A=Ie(C,1);for(C=Ie(C,2),I=Ie(I,2);!k(C);){var w=A.add(C);w.l(T)<=0&&(E=E.add(I),A=w),C=Ie(C,1),I=Ie(I,1)}return v=H(T,E.j(v)),new Z(E,v)}for(E=p;T.l(v)>=0;){for(I=Math.max(1,Math.floor(T.m()/v.m())),C=Math.ceil(Math.log(I)/Math.LN2),C=C<=48?1:Math.pow(2,C-48),A=l(I),w=A.j(v);O(w)||w.l(T)>0;)I-=C,A=l(I),w=A.j(v);k(A)&&(A=m),E=E.add(A),T=H(T,w)}return new Z(E,T)}n.B=function(T){return Ee(this,T).h},n.and=function(T){let v=Math.max(this.g.length,T.g.length),I=[];for(let C=0;C<v;C++)I[C]=this.i(C)&T.i(C);return new o(I,this.h&T.h)},n.or=function(T){let v=Math.max(this.g.length,T.g.length),I=[];for(let C=0;C<v;C++)I[C]=this.i(C)|T.i(C);return new o(I,this.h|T.h)},n.xor=function(T){let v=Math.max(this.g.length,T.g.length),I=[];for(let C=0;C<v;C++)I[C]=this.i(C)^T.i(C);return new o(I,this.h^T.h)};function Je(T){let v=T.g.length+1,I=[];for(let C=0;C<v;C++)I[C]=T.i(C)<<1|T.i(C-1)>>>31;return new o(I,T.h)}function Ie(T,v){let I=v>>5;v%=32;let C=T.g.length-I,E=[];for(let A=0;A<C;A++)E[A]=v>0?T.i(A+I)>>>v|T.i(A+I+1)<<32-v:T.i(A+I);return new o(E,T.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,yS=IV.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=h,Zs=IV.Integer=o}).apply(typeof wV<"u"?wV:typeof self<"u"?self:typeof window<"u"?window:{});var kv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},eo={};var _S,uY,ud,vS,kp,Nv,wS,IS,bS;(function(){var n,e=Object.defineProperty;function t(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof kv=="object"&&kv];for(var g=0;g<d.length;++g){var _=d[g];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var r=t(this);function i(d,g){if(g)e:{var _=r;d=d.split(".");for(var D=0;D<d.length-1;D++){var V=d[D];if(!(V in _))break e;_=_[V]}d=d[d.length-1],D=_[d],g=g(D),g!=D&&g!=null&&e(_,d,{configurable:!0,writable:!0,value:g})}}i("Symbol.dispose",function(d){return d||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(d){return d||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(d){return d||function(g){var _=[],D;for(D in g)Object.prototype.hasOwnProperty.call(g,D)&&_.push([D,g[D]]);return _}});var s=s||{},o=this||self;function a(d){var g=typeof d;return g=="object"&&d!=null||g=="function"}function c(d,g,_){return d.call.apply(d.bind,arguments)}function l(d,g,_){return l=c,l.apply(null,arguments)}function h(d,g){var _=Array.prototype.slice.call(arguments,1);return function(){var D=_.slice();return D.push.apply(D,arguments),d.apply(this,D)}}function p(d,g){function _(){}_.prototype=g.prototype,d.Z=g.prototype,d.prototype=new _,d.prototype.constructor=d,d.Ob=function(D,V,U){for(var J=Array(arguments.length-2),be=2;be<arguments.length;be++)J[be-2]=arguments[be];return g.prototype[V].apply(D,J)}}var m=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?d=>d&&AsyncContext.Snapshot.wrap(d):d=>d;function b(d){let g=d.length;if(g>0){let _=Array(g);for(let D=0;D<g;D++)_[D]=d[D];return _}return[]}function k(d,g){for(let D=1;D<arguments.length;D++){let V=arguments[D];var _=typeof V;if(_=_!="object"?_:V?Array.isArray(V)?"array":_:"null",_=="array"||_=="object"&&typeof V.length=="number"){_=d.length||0;let U=V.length||0;d.length=_+U;for(let J=0;J<U;J++)d[_+J]=V[J]}else d.push(V)}}class O{constructor(g,_){this.i=g,this.j=_,this.h=0,this.g=null}get(){let g;return this.h>0?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function N(d){o.setTimeout(()=>{throw d},0)}function H(){var d=T;let g=null;return d.g&&(g=d.g,d.g=d.g.next,d.g||(d.h=null),g.next=null),g}class Q{constructor(){this.h=this.g=null}add(g,_){let D=Z.get();D.set(g,_),this.h?this.h.next=D:this.g=D,this.h=D}}var Z=new O(()=>new Ee,d=>d.reset());class Ee{constructor(){this.next=this.g=this.h=null}set(g,_){this.h=g,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let Je,Ie=!1,T=new Q,v=()=>{let d=Promise.resolve(void 0);Je=()=>{d.then(I)}};function I(){for(var d;d=H();){try{d.h.call(d.g)}catch(_){N(_)}var g=Z;g.j(d),g.h<100&&(g.h++,d.next=g.g,g.g=d)}Ie=!1}function C(){this.u=this.u,this.C=this.C}C.prototype.u=!1,C.prototype.dispose=function(){this.u||(this.u=!0,this.N())},C.prototype[Symbol.dispose]=function(){this.dispose()},C.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function E(d,g){this.type=d,this.g=this.target=g,this.defaultPrevented=!1}E.prototype.h=function(){this.defaultPrevented=!0};var A=(function(){if(!o.addEventListener||!Object.defineProperty)return!1;var d=!1,g=Object.defineProperty({},"passive",{get:function(){d=!0}});try{let _=()=>{};o.addEventListener("test",_,g),o.removeEventListener("test",_,g)}catch{}return d})();function w(d){return/^[\s\xa0]*$/.test(d)}function Ct(d,g){E.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d&&this.init(d,g)}p(Ct,E),Ct.prototype.init=function(d,g){let _=this.type=d.type,D=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;this.target=d.target||d.srcElement,this.g=g,g=d.relatedTarget,g||(_=="mouseover"?g=d.fromElement:_=="mouseout"&&(g=d.toElement)),this.relatedTarget=g,D?(this.clientX=D.clientX!==void 0?D.clientX:D.pageX,this.clientY=D.clientY!==void 0?D.clientY:D.pageY,this.screenX=D.screenX||0,this.screenY=D.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=d.pointerType,this.state=d.state,this.i=d,d.defaultPrevented&&Ct.Z.h.call(this)},Ct.prototype.h=function(){Ct.Z.h.call(this);let d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var Zn="closure_listenable_"+(Math.random()*1e6|0),iI=0;function Ya(d,g,_,D,V){this.listener=d,this.proxy=null,this.src=g,this.type=_,this.capture=!!D,this.ha=V,this.key=++iI,this.da=this.fa=!1}function Mi(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function bo(d,g,_){for(let D in d)g.call(_,d[D],D,d)}function jg(d,g){for(let _ in d)g.call(void 0,d[_],_,d)}function Bg(d){let g={};for(let _ in d)g[_]=d[_];return g}let ei="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function an(d,g){let _,D;for(let V=1;V<arguments.length;V++){D=arguments[V];for(_ in D)d[_]=D[_];for(let U=0;U<ei.length;U++)_=ei[U],Object.prototype.hasOwnProperty.call(D,_)&&(d[_]=D[_])}}function Vl(d){this.src=d,this.g={},this.h=0}Vl.prototype.add=function(d,g,_,D,V){let U=d.toString();d=this.g[U],d||(d=this.g[U]=[],this.h++);let J=vh(d,g,D,V);return J>-1?(g=d[J],_||(g.fa=!1)):(g=new Ya(g,this.src,U,!!D,V),g.fa=_,d.push(g)),g};function Is(d,g){let _=g.type;if(_ in d.g){var D=d.g[_],V=Array.prototype.indexOf.call(D,g,void 0),U;(U=V>=0)&&Array.prototype.splice.call(D,V,1),U&&(Mi(g),d.g[_].length==0&&(delete d.g[_],d.h--))}}function vh(d,g,_,D){for(let V=0;V<d.length;++V){let U=d[V];if(!U.da&&U.listener==g&&U.capture==!!_&&U.ha==D)return V}return-1}var bs="closure_lm_"+(Math.random()*1e6|0),wh={};function $g(d,g,_,D,V){if(D&&D.once)return Ul(d,g,_,D,V);if(Array.isArray(g)){for(let U=0;U<g.length;U++)$g(d,g[U],_,D,V);return null}return _=Hl(_),d&&d[Zn]?d.J(g,_,a(D)?!!D.capture:!!D,V):Ja(d,g,_,!1,D,V)}function Ja(d,g,_,D,V,U){if(!g)throw Error("Invalid event type");let J=a(V)?!!V.capture:!!V,be=$l(d);if(be||(d[bs]=be=new Vl(d)),_=be.add(g,_,D,J,U),_.proxy)return _;if(D=Ll(),_.proxy=D,D.src=d,D.listener=_,d.addEventListener)A||(V=J),V===void 0&&(V=!1),d.addEventListener(g.toString(),D,V);else if(d.attachEvent)d.attachEvent(Bl(g.toString()),D);else if(d.addListener&&d.removeListener)d.addListener(D);else throw Error("addEventListener and attachEvent are unavailable.");return _}function Ll(){function d(_){return g.call(d.src,d.listener,_)}let g=Hg;return d}function Ul(d,g,_,D,V){if(Array.isArray(g)){for(let U=0;U<g.length;U++)Ul(d,g[U],_,D,V);return null}return _=Hl(_),d&&d[Zn]?d.K(g,_,a(D)?!!D.capture:!!D,V):Ja(d,g,_,!0,D,V)}function jl(d,g,_,D,V){if(Array.isArray(g))for(var U=0;U<g.length;U++)jl(d,g[U],_,D,V);else D=a(D)?!!D.capture:!!D,_=Hl(_),d&&d[Zn]?(d=d.i,U=String(g).toString(),U in d.g&&(g=d.g[U],_=vh(g,_,D,V),_>-1&&(Mi(g[_]),Array.prototype.splice.call(g,_,1),g.length==0&&(delete d.g[U],d.h--)))):d&&(d=$l(d))&&(g=d.g[g.toString()],d=-1,g&&(d=vh(g,_,D,V)),(_=d>-1?g[d]:null)&&Xa(_))}function Xa(d){if(typeof d!="number"&&d&&!d.da){var g=d.src;if(g&&g[Zn])Is(g.i,d);else{var _=d.type,D=d.proxy;g.removeEventListener?g.removeEventListener(_,D,d.capture):g.detachEvent?g.detachEvent(Bl(_),D):g.addListener&&g.removeListener&&g.removeListener(D),(_=$l(g))?(Is(_,d),_.h==0&&(_.src=null,g[bs]=null)):Mi(d)}}}function Bl(d){return d in wh?wh[d]:wh[d]="on"+d}function Hg(d,g){if(d.da)d=!0;else{g=new Ct(g,this);let _=d.listener,D=d.ha||d.src;d.fa&&Xa(d),d=_.call(D,g)}return d}function $l(d){return d=d[bs],d instanceof Vl?d:null}var Ih="__closure_events_fn_"+(Math.random()*1e9>>>0);function Hl(d){return typeof d=="function"?d:(d[Ih]||(d[Ih]=function(g){return d.handleEvent(g)}),d[Ih])}function cn(){C.call(this),this.i=new Vl(this),this.M=this,this.G=null}p(cn,C),cn.prototype[Zn]=!0,cn.prototype.removeEventListener=function(d,g,_,D){jl(this,d,g,_,D)};function ln(d,g){var _,D=d.G;if(D)for(_=[];D;D=D.G)_.push(D);if(d=d.M,D=g.type||g,typeof g=="string")g=new E(g,d);else if(g instanceof E)g.target=g.target||d;else{var V=g;g=new E(D,d),an(g,V)}V=!0;let U,J;if(_)for(J=_.length-1;J>=0;J--)U=g.g=_[J],V=Za(U,D,!0,g)&&V;if(U=g.g=d,V=Za(U,D,!0,g)&&V,V=Za(U,D,!1,g)&&V,_)for(J=0;J<_.length;J++)U=g.g=_[J],V=Za(U,D,!1,g)&&V}cn.prototype.N=function(){if(cn.Z.N.call(this),this.i){var d=this.i;for(let g in d.g){let _=d.g[g];for(let D=0;D<_.length;D++)Mi(_[D]);delete d.g[g],d.h--}}this.G=null},cn.prototype.J=function(d,g,_,D){return this.i.add(String(d),g,!1,_,D)},cn.prototype.K=function(d,g,_,D){return this.i.add(String(d),g,!0,_,D)};function Za(d,g,_,D){if(g=d.i.g[String(g)],!g)return!0;g=g.concat();let V=!0;for(let U=0;U<g.length;++U){let J=g[U];if(J&&!J.da&&J.capture==_){let be=J.listener,u=J.ha||J.src;J.fa&&Is(d.i,J),V=be.call(u,D)!==!1&&V}}return V&&!D.defaultPrevented}function sI(d,g){if(typeof d!="function")if(d&&typeof d.handleEvent=="function")d=l(d.handleEvent,d);else throw Error("Invalid listener argument");return Number(g)>2147483647?-1:o.setTimeout(d,g||0)}function zl(d){d.g=sI(()=>{d.g=null,d.i&&(d.i=!1,zl(d))},d.l);let g=d.h;d.h=null,d.m.apply(null,g)}class bh extends C{constructor(g,_){super(),this.m=g,this.l=_,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:zl(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Es(d){C.call(this),this.h=d,this.g={}}p(Es,C);var un=[];function yn(d){bo(d.g,function(g,_){this.g.hasOwnProperty(_)&&Xa(g)},d),d.g={}}Es.prototype.N=function(){Es.Z.N.call(this),yn(this)},Es.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Eo=o.JSON.stringify,zg=o.JSON.parse,qg=class{stringify(d){return o.JSON.stringify(d,void 0)}parse(d){return o.JSON.parse(d,void 0)}};function Gg(){}function Co(){}var To={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function ql(){E.call(this,"d")}p(ql,E);function ec(){E.call(this,"c")}p(ec,E);var Cs={},Wg=null;function So(){return Wg=Wg||new cn}Cs.Ia="serverreachability";function Eh(d){E.call(this,Cs.Ia,d)}p(Eh,E);function Do(d){let g=So();ln(g,new Eh(g))}Cs.STAT_EVENT="statevent";function Ao(d,g){E.call(this,Cs.STAT_EVENT,d),this.stat=g}p(Ao,E);function dn(d){let g=So();ln(g,new Ao(g,d))}Cs.Ja="timingevent";function Gl(d,g){E.call(this,Cs.Ja,d),this.size=g}p(Gl,E);function ur(d,g){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){d()},g)}function xo(){this.g=!0}xo.prototype.ua=function(){this.g=!1};function Wl(d,g,_,D,V,U){d.info(function(){if(d.g)if(U){var J="",be=U.split("&");for(let f=0;f<be.length;f++){var u=be[f].split("=");if(u.length>1){let y=u[0];u=u[1];let S=y.split("_");J=S.length>=2&&S[1]=="type"?J+(y+"="+u+"&"):J+(y+"=redacted&")}}}else J=null;else J=U;return"XMLHTTP REQ ("+D+") [attempt "+V+"]: "+g+`
`+_+`
`+J})}function Kg(d,g,_,D,V,U,J){d.info(function(){return"XMLHTTP RESP ("+D+") [ attempt "+V+"]: "+g+`
`+_+`
`+U+" "+J})}function Nr(d,g,_,D){d.info(function(){return"XMLHTTP TEXT ("+g+"): "+Rn(d,_)+(D?" "+D:"")})}function Qg(d,g){d.info(function(){return"TIMEOUT: "+g})}xo.prototype.info=function(){};function Rn(d,g){if(!d.g)return g;if(!g)return null;try{let U=JSON.parse(g);if(U){for(d=0;d<U.length;d++)if(Array.isArray(U[d])){var _=U[d];if(!(_.length<2)){var D=_[1];if(Array.isArray(D)&&!(D.length<1)){var V=D[0];if(V!="noop"&&V!="stop"&&V!="close")for(let J=1;J<D.length;J++)D[J]=""}}}}return Eo(U)}catch{return g}}var tc={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Ro={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},ko;function Ch(){}p(Ch,Gg),Ch.prototype.g=function(){return new XMLHttpRequest},ko=new Ch;function nc(d){return encodeURIComponent(String(d))}function No(d){var g=1;d=d.split(":");let _=[];for(;g>0&&d.length;)_.push(d.shift()),g--;return d.length&&_.push(d.join(":")),_}function Oi(d,g,_,D){this.j=d,this.i=g,this.l=_,this.S=D||1,this.V=new Es(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Yg}function Yg(){this.i=null,this.g="",this.h=!1}var rc={},Kl={};function ic(d,g,_){d.M=1,d.A=cc(dr(g)),d.u=_,d.R=!0,sc(d,null)}function sc(d,g){d.F=Date.now(),Po(d),d.B=dr(d.A);var _=d.B,D=d.S;Array.isArray(D)||(D=[String(D)]),nm(_.i,"t",D),d.C=0,_=d.j.L,d.h=new Yg,d.g=au(d.j,_?g:null,!d.u),d.P>0&&(d.O=new bh(l(d.Y,d,d.g),d.P)),g=d.V,_=d.g,D=d.ba;var V="readystatechange";Array.isArray(V)||(V&&(un[0]=V.toString()),V=un);for(let U=0;U<V.length;U++){let J=$g(_,V[U],D||g.handleEvent,!1,g.h||g);if(!J)break;g.g[J.key]=J}g=d.J?Bg(d.J):{},d.u?(d.v||(d.v="POST"),g["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.B,d.v,d.u,g)):(d.v="GET",d.g.ea(d.B,d.v,null,g)),Do(),Wl(d.i,d.v,d.B,d.l,d.S,d.u)}Oi.prototype.ba=function(d){d=d.target;let g=this.O;g&&rt(d)==3?g.j():this.Y(d)},Oi.prototype.Y=function(d){try{if(d==this.g)e:{let be=rt(this.g),u=this.g.ya(),f=this.g.ca();if(!(be<3)&&(be!=3||this.g&&(this.h.h||this.g.la()||lm(this.g)))){this.K||be!=4||u==7||(u==8||f<=0?Do(3):Do(2)),Yl(this);var g=this.g.ca();this.X=g;var _=Fi(this);if(this.o=g==200,Kg(this.i,this.v,this.B,this.l,this.S,be,g),this.o){if(this.U&&!this.L){t:{if(this.g){var D,V=this.g;if((D=V.g?V.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(D)){var U=D;break t}}U=null}if(d=U)Nr(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Oo(this,d);else{this.o=!1,this.m=3,dn(12),Ts(this),Mo(this);break e}}if(this.R){d=!0;let y;for(;!this.K&&this.C<_.length;)if(y=Jg(this,_),y==Kl){be==4&&(this.m=4,dn(14),d=!1),Nr(this.i,this.l,null,"[Incomplete Response]");break}else if(y==rc){this.m=4,dn(15),Nr(this.i,this.l,_,"[Invalid Chunk]"),d=!1;break}else Nr(this.i,this.l,y,null),Oo(this,y);if(Th(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),be!=4||_.length!=0||this.h.h||(this.m=1,dn(16),d=!1),this.o=this.o&&d,!d)Nr(this.i,this.l,_,"[Invalid Chunked Response]"),Ts(this),Mo(this);else if(_.length>0&&!this.W){this.W=!0;var J=this.j;J.g==this&&J.aa&&!J.P&&(J.j.info("Great, no buffering proxy detected. Bytes received: "+_.length),iu(J),J.P=!0,dn(11))}}else Nr(this.i,this.l,_,null),Oo(this,_);be==4&&Ts(this),this.o&&!this.K&&(be==4?Lh(this.j,this):(this.o=!1,Po(this)))}else oI(this.g),g==400&&_.indexOf("Unknown SID")>0?(this.m=3,dn(12)):(this.m=0,dn(13)),Ts(this),Mo(this)}}}catch{}finally{}};function Fi(d){if(!Th(d))return d.g.la();let g=lm(d.g);if(g==="")return"";let _="",D=g.length,V=rt(d.g)==4;if(!d.h.i){if(typeof TextDecoder>"u")return Ts(d),Mo(d),"";d.h.i=new o.TextDecoder}for(let U=0;U<D;U++)d.h.h=!0,_+=d.h.i.decode(g[U],{stream:!(V&&U==D-1)});return g.length=0,d.h.g+=_,d.C=0,d.h.g}function Th(d){return d.g?d.v=="GET"&&d.M!=2&&d.j.Aa:!1}function Jg(d,g){var _=d.C,D=g.indexOf(`
`,_);return D==-1?Kl:(_=Number(g.substring(_,D)),isNaN(_)?rc:(D+=1,D+_>g.length?Kl:(g=g.slice(D,D+_),d.C=D+_,g)))}Oi.prototype.cancel=function(){this.K=!0,Ts(this)};function Po(d){d.T=Date.now()+d.H,Ql(d,d.H)}function Ql(d,g){if(d.D!=null)throw Error("WatchDog timer not null");d.D=ur(l(d.aa,d),g)}function Yl(d){d.D&&(o.clearTimeout(d.D),d.D=null)}Oi.prototype.aa=function(){this.D=null;let d=Date.now();d-this.T>=0?(Qg(this.i,this.B),this.M!=2&&(Do(),dn(17)),Ts(this),this.m=2,Mo(this)):Ql(this,this.T-d)};function Mo(d){d.j.I==0||d.K||Lh(d.j,d)}function Ts(d){Yl(d);var g=d.O;g&&typeof g.dispose=="function"&&g.dispose(),d.O=null,yn(d.V),d.g&&(g=d.g,d.g=null,g.abort(),g.dispose())}function Oo(d,g){try{var _=d.j;if(_.I!=0&&(_.g==d||oc(_.h,d))){if(!d.L&&oc(_.h,d)&&_.I==3){try{var D=_.Ba.g.parse(g)}catch{D=null}if(Array.isArray(D)&&D.length==3){var V=D;if(V[0]==0){e:if(!_.v){if(_.g)if(_.g.F+3e3<d.F)su(_),Ss(_);else break e;Ho(_),dn(18)}}else _.xa=V[1],0<_.xa-_.K&&V[2]<37500&&_.F&&_.A==0&&!_.C&&(_.C=ur(l(_.Va,_),6e3));Vi(_.h)<=1&&_.ta&&(_.ta=void 0)}else Ui(_,11)}else if((d.L||_.g==d)&&su(_),!w(g))for(V=_.Ba.g.parse(g),g=0;g<V.length;g++){let f=V[g],y=f[0];if(!(y<=_.K))if(_.K=y,f=f[1],_.I==2)if(f[0]=="c"){_.M=f[1],_.ba=f[2];let S=f[3];S!=null&&(_.ka=S,_.j.info("VER="+_.ka));let L=f[4];L!=null&&(_.za=L,_.j.info("SVER="+_.za));let j=f[5];j!=null&&typeof j=="number"&&j>0&&(D=1.5*j,_.O=D,_.j.info("backChannelRequestTimeoutMs_="+D)),D=_;let K=d.g;if(K){let et=K.g?K.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(et){var U=D.h;U.g||et.indexOf("spdy")==-1&&et.indexOf("quic")==-1&&et.indexOf("h2")==-1||(U.j=U.l,U.g=new Set,U.h&&(Sh(U,U.h),U.h=null))}if(D.G){let Ut=K.g?K.g.getResponseHeader("X-HTTP-Session-Id"):null;Ut&&(D.wa=Ut,pt(D.J,D.G,Ut))}}_.I=3,_.l&&_.l.ra(),_.aa&&(_.T=Date.now()-d.F,_.j.info("Handshake RTT: "+_.T+"ms")),D=_;var J=d;if(D.na=ou(D,D.L?D.ba:null,D.W),J.L){Dh(D.h,J);var be=J,u=D.O;u&&(be.H=u),be.D&&(Yl(be),Po(be)),D.g=J}else ru(D);_.i.length>0&&tr(_)}else f[0]!="stop"&&f[0]!="close"||Ui(_,7);else _.I==3&&(f[0]=="stop"||f[0]=="close"?f[0]=="stop"?Ui(_,7):nu(_):f[0]!="noop"&&_.l&&_.l.qa(f),_.A=0)}}Do(4)}catch{}}var Xg=class{constructor(d,g){this.g=d,this.map=g}};function Jl(d){this.l=d||10,o.PerformanceNavigationTiming?(d=o.performance.getEntriesByType("navigation"),d=d.length>0&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Fo(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function Vi(d){return d.h?1:d.g?d.g.size:0}function oc(d,g){return d.h?d.h==g:d.g?d.g.has(g):!1}function Sh(d,g){d.g?d.g.add(g):d.h=g}function Dh(d,g){d.h&&d.h==g?d.h=null:d.g&&d.g.has(g)&&d.g.delete(g)}Jl.prototype.cancel=function(){if(this.i=Ah(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let d of this.g.values())d.cancel();this.g.clear()}};function Ah(d){if(d.h!=null)return d.i.concat(d.h.G);if(d.g!=null&&d.g.size!==0){let g=d.i;for(let _ of d.g.values())g=g.concat(_.G);return g}return b(d.i)}var xh=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Rh(d,g){if(d){d=d.split("&");for(let _=0;_<d.length;_++){let D=d[_].indexOf("="),V,U=null;D>=0?(V=d[_].substring(0,D),U=d[_].substring(D+1)):V=d[_],g(V,U?decodeURIComponent(U.replace(/\+/g," ")):"")}}}function Pr(d){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let g;d instanceof Pr?(this.l=d.l,Vo(this,d.j),this.o=d.o,this.g=d.g,ac(this,d.u),this.h=d.h,kh(this,rm(d.i)),this.m=d.m):d&&(g=String(d).match(xh))?(this.l=!1,Vo(this,g[1]||"",!0),this.o=lc(g[2]||""),this.g=lc(g[3]||"",!0),ac(this,g[4]),this.h=lc(g[5]||"",!0),kh(this,g[6]||"",!0),this.m=lc(g[7]||"")):(this.l=!1,this.i=new ni(null,this.l))}Pr.prototype.toString=function(){let d=[];var g=this.j;g&&d.push(hr(g,uc,!0),":");var _=this.g;return(_||g=="file")&&(d.push("//"),(g=this.o)&&d.push(hr(g,uc,!0),"@"),d.push(nc(_).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.u,_!=null&&d.push(":",String(_))),(_=this.h)&&(this.g&&_.charAt(0)!="/"&&d.push("/"),d.push(hr(_,_.charAt(0)=="/"?Zg:Xl,!0))),(_=this.i.toString())&&d.push("?",_),(_=this.m)&&d.push("#",hr(_,Zl)),d.join("")},Pr.prototype.resolve=function(d){let g=dr(this),_=!!d.j;_?Vo(g,d.j):_=!!d.o,_?g.o=d.o:_=!!d.g,_?g.g=d.g:_=d.u!=null;var D=d.h;if(_)ac(g,d.u);else if(_=!!d.h){if(D.charAt(0)!="/")if(this.g&&!this.h)D="/"+D;else{var V=g.h.lastIndexOf("/");V!=-1&&(D=g.h.slice(0,V+1)+D)}if(V=D,V==".."||V==".")D="";else if(V.indexOf("./")!=-1||V.indexOf("/.")!=-1){D=V.lastIndexOf("/",0)==0,V=V.split("/");let U=[];for(let J=0;J<V.length;){let be=V[J++];be=="."?D&&J==V.length&&U.push(""):be==".."?((U.length>1||U.length==1&&U[0]!="")&&U.pop(),D&&J==V.length&&U.push("")):(U.push(be),D=!0)}D=U.join("/")}else D=V}return _?g.h=D:_=d.i.toString()!=="",_?kh(g,rm(d.i)):_=!!d.m,_&&(g.m=d.m),g};function dr(d){return new Pr(d)}function Vo(d,g,_){d.j=_?lc(g,!0):g,d.j&&(d.j=d.j.replace(/:$/,""))}function ac(d,g){if(g){if(g=Number(g),isNaN(g)||g<0)throw Error("Bad port number "+g);d.u=g}else d.u=null}function kh(d,g,_){g instanceof ni?(d.i=g,dc(d.i,d.l)):(_||(g=hr(g,_t)),d.i=new ni(g,d.l))}function pt(d,g,_){d.i.set(g,_)}function cc(d){return pt(d,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),d}function lc(d,g){return d?g?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function hr(d,g,_){return typeof d=="string"?(d=encodeURI(d).replace(g,ti),_&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function ti(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var uc=/[#\/\?@]/g,Xl=/[#\?:]/g,Zg=/[#\?]/g,_t=/[#\?@]/g,Zl=/#/g;function ni(d,g){this.h=this.g=null,this.i=d||null,this.j=!!g}function fr(d){d.g||(d.g=new Map,d.h=0,d.i&&Rh(d.i,function(g,_){d.add(decodeURIComponent(g.replace(/\+/g," ")),_)}))}n=ni.prototype,n.add=function(d,g){fr(this),this.i=null,d=Lo(this,d);let _=this.g.get(d);return _||this.g.set(d,_=[]),_.push(g),this.h+=1,this};function em(d,g){fr(d),g=Lo(d,g),d.g.has(g)&&(d.i=null,d.h-=d.g.get(g).length,d.g.delete(g))}function Nh(d,g){return fr(d),g=Lo(d,g),d.g.has(g)}n.forEach=function(d,g){fr(this),this.g.forEach(function(_,D){_.forEach(function(V){d.call(g,V,D,this)},this)},this)};function tm(d,g){fr(d);let _=[];if(typeof g=="string")Nh(d,g)&&(_=_.concat(d.g.get(Lo(d,g))));else for(d=Array.from(d.g.values()),g=0;g<d.length;g++)_=_.concat(d[g]);return _}n.set=function(d,g){return fr(this),this.i=null,d=Lo(this,d),Nh(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[g]),this.h+=1,this},n.get=function(d,g){return d?(d=tm(this,d),d.length>0?String(d[0]):g):g};function nm(d,g,_){em(d,g),_.length>0&&(d.i=null,d.g.set(Lo(d,g),b(_)),d.h+=_.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let d=[],g=Array.from(this.g.keys());for(let D=0;D<g.length;D++){var _=g[D];let V=nc(_);_=tm(this,_);for(let U=0;U<_.length;U++){let J=V;_[U]!==""&&(J+="="+nc(_[U])),d.push(J)}}return this.i=d.join("&")};function rm(d){let g=new ni;return g.i=d.i,d.g&&(g.g=new Map(d.g),g.h=d.h),g}function Lo(d,g){return g=String(g),d.j&&(g=g.toLowerCase()),g}function dc(d,g){g&&!d.j&&(fr(d),d.i=null,d.g.forEach(function(_,D){let V=D.toLowerCase();D!=V&&(em(this,D),nm(this,V,_))},d)),d.j=g}function Li(d,g){let _=new xo;if(o.Image){let D=new Image;D.onload=h(ri,_,"TestLoadImage: loaded",!0,g,D),D.onerror=h(ri,_,"TestLoadImage: error",!1,g,D),D.onabort=h(ri,_,"TestLoadImage: abort",!1,g,D),D.ontimeout=h(ri,_,"TestLoadImage: timeout",!1,g,D),o.setTimeout(function(){D.ontimeout&&D.ontimeout()},1e4),D.src=d}else g(!1)}function im(d,g){let _=new xo,D=new AbortController,V=setTimeout(()=>{D.abort(),ri(_,"TestPingServer: timeout",!1,g)},1e4);fetch(d,{signal:D.signal}).then(U=>{clearTimeout(V),U.ok?ri(_,"TestPingServer: ok",!0,g):ri(_,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(V),ri(_,"TestPingServer: error",!1,g)})}function ri(d,g,_,D,V){try{V&&(V.onload=null,V.onerror=null,V.onabort=null,V.ontimeout=null),D(_)}catch{}}function sm(){this.g=new qg}function ii(d){this.i=d.Sb||null,this.h=d.ab||!1}p(ii,Gg),ii.prototype.g=function(){return new eu(this.i,this.h)};function eu(d,g){cn.call(this),this.H=d,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}p(eu,cn),n=eu.prototype,n.open=function(d,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=d,this.D=g,this.readyState=1,er(this)},n.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;let g={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};d&&(g.body=d),(this.H||o).fetch(new Request(this.D,g)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,hc(this)),this.readyState=0},n.Pa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,er(this)),this.g&&(this.readyState=3,er(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;om(this)}else d.text().then(this.Oa.bind(this),this.ga.bind(this))};function om(d){d.j.read().then(d.Ma.bind(d)).catch(d.ga.bind(d))}n.Ma=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var g=d.value?d.value:new Uint8Array(0);(g=this.B.decode(g,{stream:!d.done}))&&(this.response=this.responseText+=g)}d.done?hc(this):er(this),this.readyState==3&&om(this)}},n.Oa=function(d){this.g&&(this.response=this.responseText=d,hc(this))},n.Na=function(d){this.g&&(this.response=d,hc(this))},n.ga=function(){this.g&&hc(this)};function hc(d){d.readyState=4,d.l=null,d.j=null,d.B=null,er(d)}n.setRequestHeader=function(d,g){this.A.append(d,g)},n.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let d=[],g=this.h.entries();for(var _=g.next();!_.done;)_=_.value,d.push(_[0]+": "+_[1]),_=g.next();return d.join(`\r
`)};function er(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(eu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function am(d){let g="";return bo(d,function(_,D){g+=D,g+=":",g+=_,g+=`\r
`}),g}function Ph(d,g,_){e:{for(D in _){var D=!1;break e}D=!0}D||(_=am(_),typeof d=="string"?_!=null&&nc(_):pt(d,g,_))}function gt(d){cn.call(this),this.headers=new Map,this.L=d||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}p(gt,cn);var tu=/^https?$/i,cm=["POST","PUT"];n=gt.prototype,n.Fa=function(d){this.H=d},n.ea=function(d,g,_,D){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);g=g?g.toUpperCase():"GET",this.D=d,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():ko.g(),this.g.onreadystatechange=m(l(this.Ca,this));try{this.B=!0,this.g.open(g,String(d),!0),this.B=!1}catch(U){Uo(this,U);return}if(d=_||"",_=new Map(this.headers),D)if(Object.getPrototypeOf(D)===Object.prototype)for(var V in D)_.set(V,D[V]);else if(typeof D.keys=="function"&&typeof D.get=="function")for(let U of D.keys())_.set(U,D.get(U));else throw Error("Unknown input type for opt_headers: "+String(D));D=Array.from(_.keys()).find(U=>U.toLowerCase()=="content-type"),V=o.FormData&&d instanceof o.FormData,!(Array.prototype.indexOf.call(cm,g,void 0)>=0)||D||V||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[U,J]of _)this.g.setRequestHeader(U,J);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(d),this.v=!1}catch(U){Uo(this,U)}};function Uo(d,g){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=g,d.o=5,jo(d),Bo(d)}function jo(d){d.A||(d.A=!0,ln(d,"complete"),ln(d,"error"))}n.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=d||7,ln(this,"complete"),ln(this,"abort"),Bo(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Bo(this,!0)),gt.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Mh(this):this.Xa())},n.Xa=function(){Mh(this)};function Mh(d){if(d.h&&typeof s<"u"){if(d.v&&rt(d)==4)setTimeout(d.Ca.bind(d),0);else if(ln(d,"readystatechange"),rt(d)==4){d.h=!1;try{let U=d.ca();e:switch(U){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var _;if(!(_=g)){var D;if(D=U===0){let J=String(d.D).match(xh)[1]||null;!J&&o.self&&o.self.location&&(J=o.self.location.protocol.slice(0,-1)),D=!tu.test(J?J.toLowerCase():"")}_=D}if(_)ln(d,"complete"),ln(d,"success");else{d.o=6;try{var V=rt(d)>2?d.g.statusText:""}catch{V=""}d.l=V+" ["+d.ca()+"]",jo(d)}}finally{Bo(d)}}}}function Bo(d,g){if(d.g){d.m&&(clearTimeout(d.m),d.m=null);let _=d.g;d.g=null,g||ln(d,"ready");try{_.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function rt(d){return d.g?d.g.readyState:0}n.ca=function(){try{return rt(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(d){if(this.g){var g=this.g.responseText;return d&&g.indexOf(d)==0&&(g=g.substring(d.length)),zg(g)}};function lm(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.F){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function oI(d){let g={};d=(d.g&&rt(d)>=2&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let D=0;D<d.length;D++){if(w(d[D]))continue;var _=No(d[D]);let V=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();let U=g[V]||[];g[V]=U,U.push(_)}jg(g,function(D){return D.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function $o(d,g,_){return _&&_.internalChannelParams&&_.internalChannelParams[d]||g}function Oh(d){this.za=0,this.i=[],this.j=new xo,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=$o("failFast",!1,d),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=$o("baseRetryDelayMs",5e3,d),this.Za=$o("retryDelaySeedMs",1e4,d),this.Ta=$o("forwardChannelMaxRetries",2,d),this.va=$o("forwardChannelRequestTimeoutMs",2e4,d),this.ma=d&&d.xmlHttpFactory||void 0,this.Ua=d&&d.Rb||void 0,this.Aa=d&&d.useFetchStreams||!1,this.O=void 0,this.L=d&&d.supportsCrossDomainXhr||!1,this.M="",this.h=new Jl(d&&d.concurrentRequestLimit),this.Ba=new sm,this.S=d&&d.fastHandshake||!1,this.R=d&&d.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=d&&d.Pb||!1,d&&d.ua&&this.j.ua(),d&&d.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&d&&d.detectBufferingProxy||!1,this.ia=void 0,d&&d.longPollingTimeout&&d.longPollingTimeout>0&&(this.ia=d.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Oh.prototype,n.ka=8,n.I=1,n.connect=function(d,g,_,D){dn(0),this.W=d,this.H=g||{},_&&D!==void 0&&(this.H.OSID=_,this.H.OAID=D),this.F=this.X,this.J=ou(this,null,this.W),tr(this)};function nu(d){if(Fh(d),d.I==3){var g=d.V++,_=dr(d.J);if(pt(_,"SID",d.M),pt(_,"RID",g),pt(_,"TYPE","terminate"),si(d,_),g=new Oi(d,d.j,g),g.M=2,g.A=cc(dr(_)),_=!1,o.navigator&&o.navigator.sendBeacon)try{_=o.navigator.sendBeacon(g.A.toString(),"")}catch{}!_&&o.Image&&(new Image().src=g.A,_=!0),_||(g.g=au(g.j,null),g.g.ea(g.A)),g.F=Date.now(),Po(g)}Uh(d)}function Ss(d){d.g&&(iu(d),d.g.cancel(),d.g=null)}function Fh(d){Ss(d),d.v&&(o.clearTimeout(d.v),d.v=null),su(d),d.h.cancel(),d.m&&(typeof d.m=="number"&&o.clearTimeout(d.m),d.m=null)}function tr(d){if(!Fo(d.h)&&!d.m){d.m=!0;var g=d.Ea;Je||v(),Ie||(Je(),Ie=!0),T.add(g,d),d.D=0}}function um(d,g){return Vi(d.h)>=d.h.j-(d.m?1:0)?!1:d.m?(d.i=g.G.concat(d.i),!0):d.I==1||d.I==2||d.D>=(d.Sa?0:d.Ta)?!1:(d.m=ur(l(d.Ea,d,g),zo(d,d.D)),d.D++,!0)}n.Ea=function(d){if(this.m)if(this.m=null,this.I==1){if(!d){this.V=Math.floor(Math.random()*1e5),d=this.V++;let V=new Oi(this,this.j,d),U=this.o;if(this.U&&(U?(U=Bg(U),an(U,this.U)):U=this.U),this.u!==null||this.R||(V.J=U,U=null),this.S)e:{for(var g=0,_=0;_<this.i.length;_++){t:{var D=this.i[_];if("__data__"in D.map&&(D=D.map.__data__,typeof D=="string")){D=D.length;break t}D=void 0}if(D===void 0)break;if(g+=D,g>4096){g=_;break e}if(g===4096||_===this.i.length-1){g=_+1;break e}}g=1e3}else g=1e3;g=Vh(this,V,g),_=dr(this.J),pt(_,"RID",d),pt(_,"CVER",22),this.G&&pt(_,"X-HTTP-Session-Id",this.G),si(this,_),U&&(this.R?g="headers="+nc(am(U))+"&"+g:this.u&&Ph(_,this.u,U)),Sh(this.h,V),this.Ra&&pt(_,"TYPE","init"),this.S?(pt(_,"$req",g),pt(_,"SID","null"),V.U=!0,ic(V,_,null)):ic(V,_,g),this.I=2}}else this.I==3&&(d?dm(this,d):this.i.length==0||Fo(this.h)||dm(this))};function dm(d,g){var _;g?_=g.l:_=d.V++;let D=dr(d.J);pt(D,"SID",d.M),pt(D,"RID",_),pt(D,"AID",d.K),si(d,D),d.u&&d.o&&Ph(D,d.u,d.o),_=new Oi(d,d.j,_,d.D+1),d.u===null&&(_.J=d.o),g&&(d.i=g.G.concat(d.i)),g=Vh(d,_,1e3),_.H=Math.round(d.va*.5)+Math.round(d.va*.5*Math.random()),Sh(d.h,_),ic(_,D,g)}function si(d,g){d.H&&bo(d.H,function(_,D){pt(g,D,_)}),d.l&&bo({},function(_,D){pt(g,D,_)})}function Vh(d,g,_){_=Math.min(d.i.length,_);let D=d.l?l(d.l.Ka,d.l,d):null;e:{var V=d.i;let be=-1;for(;;){let u=["count="+_];be==-1?_>0?(be=V[0].g,u.push("ofs="+be)):be=0:u.push("ofs="+be);let f=!0;for(let y=0;y<_;y++){var U=V[y].g;let S=V[y].map;if(U-=be,U<0)be=Math.max(0,V[y].g-100),f=!1;else try{U="req"+U+"_"||"";try{var J=S instanceof Map?S:Object.entries(S);for(let[L,j]of J){let K=j;a(j)&&(K=Eo(j)),u.push(U+L+"="+encodeURIComponent(K))}}catch(L){throw u.push(U+"type="+encodeURIComponent("_badmap")),L}}catch{D&&D(S)}}if(f){J=u.join("&");break e}}J=void 0}return d=d.i.splice(0,_),g.G=d,J}function ru(d){if(!d.g&&!d.v){d.Y=1;var g=d.Da;Je||v(),Ie||(Je(),Ie=!0),T.add(g,d),d.A=0}}function Ho(d){return d.g||d.v||d.A>=3?!1:(d.Y++,d.v=ur(l(d.Da,d),zo(d,d.A)),d.A++,!0)}n.Da=function(){if(this.v=null,fc(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var d=4*this.T;this.j.info("BP detection timer enabled: "+d),this.B=ur(l(this.Wa,this),d)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,dn(10),Ss(this),fc(this))};function iu(d){d.B!=null&&(o.clearTimeout(d.B),d.B=null)}function fc(d){d.g=new Oi(d,d.j,"rpc",d.Y),d.u===null&&(d.g.J=d.o),d.g.P=0;var g=dr(d.na);pt(g,"RID","rpc"),pt(g,"SID",d.M),pt(g,"AID",d.K),pt(g,"CI",d.F?"0":"1"),!d.F&&d.ia&&pt(g,"TO",d.ia),pt(g,"TYPE","xmlhttp"),si(d,g),d.u&&d.o&&Ph(g,d.u,d.o),d.O&&(d.g.H=d.O);var _=d.g;d=d.ba,_.M=1,_.A=cc(dr(g)),_.u=null,_.R=!0,sc(_,d)}n.Va=function(){this.C!=null&&(this.C=null,Ss(this),Ho(this),dn(19))};function su(d){d.C!=null&&(o.clearTimeout(d.C),d.C=null)}function Lh(d,g){var _=null;if(d.g==g){su(d),iu(d),d.g=null;var D=2}else if(oc(d.h,g))_=g.G,Dh(d.h,g),D=1;else return;if(d.I!=0){if(g.o)if(D==1){_=g.u?g.u.length:0,g=Date.now()-g.F;var V=d.D;D=So(),ln(D,new Gl(D,_)),tr(d)}else ru(d);else if(V=g.m,V==3||V==0&&g.X>0||!(D==1&&um(d,g)||D==2&&Ho(d)))switch(_&&_.length>0&&(g=d.h,g.i=g.i.concat(_)),V){case 1:Ui(d,5);break;case 4:Ui(d,10);break;case 3:Ui(d,6);break;default:Ui(d,2)}}}function zo(d,g){let _=d.Qa+Math.floor(Math.random()*d.Za);return d.isActive()||(_*=2),_*g}function Ui(d,g){if(d.j.info("Error code "+g),g==2){var _=l(d.bb,d),D=d.Ua;let V=!D;D=new Pr(D||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||Vo(D,"https"),cc(D),V?Li(D.toString(),_):im(D.toString(),_)}else dn(2);d.I=0,d.l&&d.l.pa(g),Uh(d),Fh(d)}n.bb=function(d){d?(this.j.info("Successfully pinged google.com"),dn(2)):(this.j.info("Failed to ping google.com"),dn(1))};function Uh(d){if(d.I=0,d.ja=[],d.l){let g=Ah(d.h);(g.length!=0||d.i.length!=0)&&(k(d.ja,g),k(d.ja,d.i),d.h.i.length=0,b(d.i),d.i.length=0),d.l.oa()}}function ou(d,g,_){var D=_ instanceof Pr?dr(_):new Pr(_);if(D.g!="")g&&(D.g=g+"."+D.g),ac(D,D.u);else{var V=o.location;D=V.protocol,g=g?g+"."+V.hostname:V.hostname,V=+V.port;let U=new Pr(null);D&&Vo(U,D),g&&(U.g=g),V&&ac(U,V),_&&(U.h=_),D=U}return _=d.G,g=d.wa,_&&g&&pt(D,_,g),pt(D,"VER",d.ka),si(d,D),D}function au(d,g,_){if(g&&!d.L)throw Error("Can't create secondary domain capable XhrIo object.");return g=d.Aa&&!d.ma?new gt(new ii({ab:_})):new gt(d.ma),g.Fa(d.L),g}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function jh(){}n=jh.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Ds(){}Ds.prototype.g=function(d,g){return new Nn(d,g)};function Nn(d,g){cn.call(this),this.g=new Oh(g),this.l=d,this.h=g&&g.messageUrlParams||null,d=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(d?d["X-WebChannel-Content-Type"]=g.messageContentType:d={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.sa&&(d?d["X-WebChannel-Client-Profile"]=g.sa:d={"X-WebChannel-Client-Profile":g.sa}),this.g.U=d,(d=g&&g.Qb)&&!w(d)&&(this.g.u=d),this.A=g&&g.supportsCrossDomainXhr||!1,this.v=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!w(g)&&(this.g.G=g,d=this.h,d!==null&&g in d&&(d=this.h,g in d&&delete d[g])),this.j=new As(this)}p(Nn,cn),Nn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Nn.prototype.close=function(){nu(this.g)},Nn.prototype.o=function(d){var g=this.g;if(typeof d=="string"){var _={};_.__data__=d,d=_}else this.v&&(_={},_.__data__=Eo(d),d=_);g.i.push(new Xg(g.Ya++,d)),g.I==3&&tr(g)},Nn.prototype.N=function(){this.g.l=null,delete this.j,nu(this.g),delete this.g,Nn.Z.N.call(this)};function Bh(d){ql.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var g=d.__sm__;if(g){e:{for(let _ in g){d=_;break e}d=void 0}(this.i=d)&&(d=this.i,g=g!==null&&d in g?g[d]:void 0),this.data=g}else this.data=d}p(Bh,ql);function ji(){ec.call(this),this.status=1}p(ji,ec);function As(d){this.g=d}p(As,jh),As.prototype.ra=function(){ln(this.g,"a")},As.prototype.qa=function(d){ln(this.g,new Bh(d))},As.prototype.pa=function(d){ln(this.g,new ji)},As.prototype.oa=function(){ln(this.g,"b")},Ds.prototype.createWebChannel=Ds.prototype.g,Nn.prototype.send=Nn.prototype.o,Nn.prototype.open=Nn.prototype.m,Nn.prototype.close=Nn.prototype.close,bS=eo.createWebChannelTransport=function(){return new Ds},IS=eo.getStatEventTarget=function(){return So()},wS=eo.Event=Cs,Nv=eo.Stat={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},tc.NO_ERROR=0,tc.TIMEOUT=8,tc.HTTP_ERROR=6,kp=eo.ErrorCode=tc,Ro.COMPLETE="complete",vS=eo.EventType=Ro,Co.EventType=To,To.OPEN="a",To.CLOSE="b",To.ERROR="c",To.MESSAGE="d",cn.prototype.listen=cn.prototype.J,ud=eo.WebChannel=Co,uY=eo.FetchXmlHttpFactory=ii,gt.prototype.listenOnce=gt.prototype.K,gt.prototype.getLastError=gt.prototype.Ha,gt.prototype.getLastErrorCode=gt.prototype.ya,gt.prototype.getStatus=gt.prototype.ca,gt.prototype.getResponseJson=gt.prototype.La,gt.prototype.getResponseText=gt.prototype.la,gt.prototype.send=gt.prototype.ea,gt.prototype.setWithCredentials=gt.prototype.Fa,_S=eo.XhrIo=gt}).apply(typeof kv<"u"?kv:typeof self<"u"?self:typeof window<"u"?window:{});var bV="@firebase/firestore",EV="4.9.2";var Cn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Cn.UNAUTHENTICATED=new Cn(null),Cn.GOOGLE_CREDENTIALS=new Cn("google-credentials-uid"),Cn.FIRST_PARTY=new Cn("first-party-uid"),Cn.MOCK_USER=new Cn("mock-user");var Md="12.3.0";var fl=new cd("@firebase/firestore");function dd(){return fl.logLevel}function ae(n,...e){if(fl.logLevel<=Ke.DEBUG){let t=e.map(fA);fl.debug(`Firestore (${Md}): ${n}`,...t)}}function io(n,...e){if(fl.logLevel<=Ke.ERROR){let t=e.map(fA);fl.error(`Firestore (${Md}): ${n}`,...t)}}function vd(n,...e){if(fl.logLevel<=Ke.WARN){let t=e.map(fA);fl.warn(`Firestore (${Md}): ${n}`,...t)}}function fA(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function ve(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,pL(n,r,t)}function pL(n,e,t){let r=`FIRESTORE (${Md}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw io(r),new Error(r)}function ht(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||pL(e,i,r)}function xe(n,e){return n}var q={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},se=class extends Ks{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var to=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var Uv=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},AS=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Cn.UNAUTHENTICATED))}shutdown(){}},xS=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},RS=class{constructor(e){this.t=e,this.currentUser=Cn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ht(this.o===void 0,42304);let r=this.i,i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve(),s=new to;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new to,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let c=s;e.enqueueRetryable(async()=>{await c.promise,await i(this.currentUser)})},a=c=>{ae("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(ae("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new to)}},0),o()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(ae("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ht(typeof r.accessToken=="string",31837,{l:r}),new Uv(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return ht(e===null||typeof e=="string",2055,{h:e}),new Cn(e)}},kS=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=Cn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},NS=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new kS(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(Cn.FIRST_PARTY))}shutdown(){}invalidateToken(){}},jv=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},PS=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,TF(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){ht(this.o===void 0,3512);let r=s=>{s.error!=null&&ae("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.m;return this.m=s.token,ae("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{ae("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.V.getImmediate({optional:!0});s?i(s):ae("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new jv(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(ht(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new jv(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function dY(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var Vp=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=dY(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%62))}return r}};function ze(n,e){return n<e?-1:n>e?1:0}function MS(n,e){let t=Math.min(n.length,e.length);for(let r=0;r<t;r++){let i=n.charAt(r),s=e.charAt(r);if(i!==s)return ES(i)===ES(s)?ze(i,s):ES(i)?1:-1}return ze(n.length,e.length)}var hY=55296,fY=57343;function ES(n){let e=n.charCodeAt(0);return e>=hY&&e<=fY}function wd(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var CV="__name__",Bv=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&ve(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&ve(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let s=n.compareSegments(e.get(i),t.get(i));if(s!==0)return s}return ze(e.length,t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):MS(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Zs.fromString(e.substring(4,e.length-2))}},Dt=class n extends Bv{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new se(q.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},pY=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Ar=class n extends Bv{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return pY.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===CV}static keyField(){return new n([CV])}static fromServerFormat(e){let t=[],r="",i=0,s=()=>{if(r.length===0)throw new se(q.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},o=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new se(q.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new se(q.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new se(q.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var fe=class n{constructor(e){this.path=e}static fromPath(e){return new n(Dt.fromString(e))}static fromName(e){return new n(Dt.fromString(e).popFirst(5))}static empty(){return new n(Dt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Dt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Dt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new Dt(e.slice()))}};function gL(n,e,t){if(!t)throw new se(q.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function gY(n,e,t,r){if(e===!0&&r===!0)throw new se(q.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function TV(n){if(!fe.isDocumentKey(n))throw new se(q.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function SV(n){if(fe.isDocumentKey(n))throw new se(q.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function mL(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function _0(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":ve(12329,{type:typeof n})}function no(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new se(q.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=_0(n);throw new se(q.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Xt(n,e){let t={typeString:n};return e&&(t.value=e),t}function Qp(n,e){if(!mL(n))throw new se(q.INVALID_ARGUMENT,"JSON must be an object");let t;for(let r in e)if(e[r]){let i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}let o=n[r];if(i&&typeof o!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&o!==s.value){t=`Expected '${r}' field to equal '${s.value}'`;break}}if(t)throw new se(q.INVALID_ARGUMENT,t);return!0}var DV=-62135596800,AV=1e6,Zt=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*AV);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new se(q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new se(q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<DV)throw new se(q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new se(q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/AV}_compareTo(e){return this.seconds===e.seconds?ze(this.nanoseconds,e.nanoseconds):ze(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:n._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Qp(e,n._jsonSchema))return new n(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-DV;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};Zt._jsonSchemaVersion="firestore/timestamp/1.0",Zt._jsonSchema={type:Xt("string",Zt._jsonSchemaVersion),seconds:Xt("number"),nanoseconds:Xt("number")};var Pe=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new Zt(0,0))}static max(){return new n(new Zt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Lp=-1,OS=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};OS.UNKNOWN_ID=-1;function mY(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Pe.fromTimestamp(r===1e9?new Zt(t+1,0):new Zt(t,r));return new pl(i,fe.empty(),e)}function yY(n){return new pl(n.readTime,n.key,Lp)}var pl=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(Pe.min(),fe.empty(),Lp)}static max(){return new n(Pe.max(),fe.empty(),Lp)}};function _Y(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=fe.comparator(n.documentKey,e.documentKey),t!==0?t:ze(n.largestBatchId,e.largestBatchId))}var vY="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",FS=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};async function Od(n){if(n.code!==q.FAILED_PRECONDITION||n.message!==vY)throw n;ae("LocalStore","Unexpectedly lost primary lease")}var G=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ve(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&t()},c=>r(c))}),o=!0,s===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let s=e.length,o=new Array(s),a=0;for(let c=0;c<s;c++){let l=c;t(e[l]).next(h=>{o[l]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,t){return new n((r,i)=>{let s=()=>{e()===!0?t().next(()=>{s()},i):r()};s()})}};function wY(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Fd(n){return n.name==="IndexedDbTransactionError"}var pA=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>r.writeSequenceNumber(i))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.ue&&this.ue(t),t}}n.ce=-1;return n})(),gA=-1;function v0(n){return n==null}function Up(n){return n===0&&1/n==-1/0}function IY(n){return typeof n=="number"&&Number.isInteger(n)&&!Up(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var yL="";function bY(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=xV(e)),e=EY(n.get(t),e);return xV(e)}function EY(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let s=n.charAt(i);switch(s){case"\0":t+="";break;case yL:t+="";break;default:t+=s}}return t}function xV(n){return n+yL+""}var CY="remoteDocuments",_L="owner";var vL="mutationQueues";var wL="mutations";var IL="documentMutations",TY="remoteDocumentsV14";var bL="remoteDocumentGlobal";var EL="targets";var CL="targetDocuments";var TL="targetGlobal",SL="collectionParents";var DL="clientMetadata";var AL="bundles";var xL="namedQueries";var SY="indexConfiguration";var DY="indexState";var AY="indexEntries";var RL="documentOverlays";var xY="globals";var RY=[vL,wL,IL,CY,EL,_L,TL,CL,DL,bL,SL,AL,xL],abe=[...RY,RL],kY=[vL,wL,IL,TY,EL,_L,TL,CL,DL,bL,SL,AL,xL,RL],NY=kY,PY=[...NY,SY,DY,AY];var cbe=[...PY,xY];function RV(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Pa(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function kL(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Vt=class n{constructor(e,t){this.comparator=e,this.root=t||cs.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,cs.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,cs.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new gd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new gd(this.root,e,this.comparator,!1)}getReverseIterator(){return new gd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new gd(this.root,e,this.comparator,!0)}},gd=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},cs=class n{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=s??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new n(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ve(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ve(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw ve(27949);return e+(this.isRed()?0:1)}};cs.EMPTY=null,cs.RED=!0,cs.BLACK=!1;cs.EMPTY=new class{constructor(){this.size=0}get key(){throw ve(57766)}get value(){throw ve(16141)}get color(){throw ve(16727)}get left(){throw ve(29726)}get right(){throw ve(36894)}copy(e,t,r,i,s){return this}insert(e,t,r){return new cs(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Tn=class n{constructor(e){this.comparator=e,this.data=new Vt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new $v(this.data.getIterator())}getIteratorFrom(e){return new $v(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},$v=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Wr=class n{constructor(e){this.fields=e,e.sort(Ar.comparator)}static empty(){return new n([])}unionWith(e){let t=new Tn(Ar.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return wd(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var Hv=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var $n=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=(function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Hv("Invalid base64 string: "+s):s}})(e);return new n(t)}static fromUint8Array(e){let t=(function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s})(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ze(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};$n.EMPTY_BYTE_STRING=new $n("");var MY=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function so(n){if(ht(!!n,39018),typeof n=="string"){let e=0,t=MY.exec(n);if(ht(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:St(n.seconds),nanos:St(n.nanos)}}function St(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function oo(n){return typeof n=="string"?$n.fromBase64String(n):$n.fromUint8Array(n)}var NL="server_timestamp",PL="__type__",ML="__previous_value__",OL="__local_write_time__";function mA(n){return(n?.mapValue?.fields||{})[PL]?.stringValue===NL}function w0(n){let e=n.mapValue.fields[ML];return mA(e)?w0(e):e}function jp(n){let e=so(n.mapValue.fields[OL].timestampValue);return new Zt(e.seconds,e.nanos)}var VS=class{constructor(e,t,r,i,s,o,a,c,l,h){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=l,this.isUsingEmulator=h}},zv="(default)",qv=class n{constructor(e,t){this.projectId=e,this.database=t||zv}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===zv}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var yA="__type__",FL="__max__",Pv={mapValue:{fields:{__type__:{stringValue:FL}}}},_A="__vector__",Id="value";function xa(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?mA(n)?4:LL(n)?9007199254740991:VL(n)?10:11:ve(28295,{value:n})}function ds(n,e){if(n===e)return!0;let t=xa(n);if(t!==xa(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return jp(n).isEqual(jp(e));case 3:return(function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=so(i.timestampValue),a=so(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(i,s){return oo(i.bytesValue).isEqual(oo(s.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(i,s){return St(i.geoPointValue.latitude)===St(s.geoPointValue.latitude)&&St(i.geoPointValue.longitude)===St(s.geoPointValue.longitude)})(n,e);case 2:return(function(i,s){if("integerValue"in i&&"integerValue"in s)return St(i.integerValue)===St(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=St(i.doubleValue),a=St(s.doubleValue);return o===a?Up(o)===Up(a):isNaN(o)&&isNaN(a)}return!1})(n,e);case 9:return wd(n.arrayValue.values||[],e.arrayValue.values||[],ds);case 10:case 11:return(function(i,s){let o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(RV(o)!==RV(a))return!1;for(let c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!ds(o[c],a[c])))return!1;return!0})(n,e);default:return ve(52216,{left:n})}}function Bp(n,e){return(n.values||[]).find(t=>ds(t,e))!==void 0}function bd(n,e){if(n===e)return 0;let t=xa(n),r=xa(e);if(t!==r)return ze(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return ze(n.booleanValue,e.booleanValue);case 2:return(function(s,o){let a=St(s.integerValue||s.doubleValue),c=St(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1})(n,e);case 3:return kV(n.timestampValue,e.timestampValue);case 4:return kV(jp(n),jp(e));case 5:return MS(n.stringValue,e.stringValue);case 6:return(function(s,o){let a=oo(s),c=oo(o);return a.compareTo(c)})(n.bytesValue,e.bytesValue);case 7:return(function(s,o){let a=s.split("/"),c=o.split("/");for(let l=0;l<a.length&&l<c.length;l++){let h=ze(a[l],c[l]);if(h!==0)return h}return ze(a.length,c.length)})(n.referenceValue,e.referenceValue);case 8:return(function(s,o){let a=ze(St(s.latitude),St(o.latitude));return a!==0?a:ze(St(s.longitude),St(o.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return NV(n.arrayValue,e.arrayValue);case 10:return(function(s,o){let a=s.fields||{},c=o.fields||{},l=a[Id]?.arrayValue,h=c[Id]?.arrayValue,p=ze(l?.values?.length||0,h?.values?.length||0);return p!==0?p:NV(l,h)})(n.mapValue,e.mapValue);case 11:return(function(s,o){if(s===Pv.mapValue&&o===Pv.mapValue)return 0;if(s===Pv.mapValue)return 1;if(o===Pv.mapValue)return-1;let a=s.fields||{},c=Object.keys(a),l=o.fields||{},h=Object.keys(l);c.sort(),h.sort();for(let p=0;p<c.length&&p<h.length;++p){let m=MS(c[p],h[p]);if(m!==0)return m;let b=bd(a[c[p]],l[h[p]]);if(b!==0)return b}return ze(c.length,h.length)})(n.mapValue,e.mapValue);default:throw ve(23264,{he:t})}}function kV(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return ze(n,e);let t=so(n),r=so(e),i=ze(t.seconds,r.seconds);return i!==0?i:ze(t.nanos,r.nanos)}function NV(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let s=bd(t[i],r[i]);if(s)return s}return ze(t.length,r.length)}function Ed(n){return LS(n)}function LS(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){let r=so(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return oo(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return fe.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",i=!0;for(let s of t.values||[])i?i=!1:r+=",",r+=LS(s);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){let r=Object.keys(t.fields||{}).sort(),i="{",s=!0;for(let o of r)s?s=!1:i+=",",i+=`${o}:${LS(t.fields[o])}`;return i+"}"})(n.mapValue):ve(61005,{value:n})}function Fv(n){switch(xa(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=w0(n);return e?16+Fv(e):16;case 5:return 2*n.stringValue.length;case 6:return oo(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce((i,s)=>i+Fv(s),0)})(n.arrayValue);case 10:case 11:return(function(r){let i=0;return Pa(r.fields,(s,o)=>{i+=s.length+Fv(o)}),i})(n.mapValue);default:throw ve(13486,{value:n})}}function PV(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function US(n){return!!n&&"integerValue"in n}function vA(n){return!!n&&"arrayValue"in n}function MV(n){return!!n&&"nullValue"in n}function OV(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Vv(n){return!!n&&"mapValue"in n}function VL(n){return(n?.mapValue?.fields||{})[yA]?.stringValue===_A}function Pp(n){if(n.geoPointValue)return{geoPointValue:B({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:B({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return Pa(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Pp(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Pp(n.arrayValue.values[t]);return e}return B({},n)}function LL(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===FL}var ube={mapValue:{fields:{[yA]:{stringValue:_A},[Id]:{arrayValue:{}}}}};var Dr=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Vv(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Pp(t)}setAll(e){let t=Ar.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){let c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=a.popLast()}o?r[a.lastSegment()]=Pp(o):i.push(a.lastSegment())});let s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){let t=this.field(e.popLast());Vv(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ds(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Vv(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Pa(t,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new n(Pp(this.value))}};function UL(n){let e=[];return Pa(n.fields,(t,r)=>{let i=new Ar([t]);if(Vv(r)){let s=UL(r.mapValue).fields;if(s.length===0)e.push(i);else for(let o of s)e.push(i.child(o))}else e.push(i)}),new Wr(e)}var Si=class n{constructor(e,t,r,i,s,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new n(e,0,Pe.min(),Pe.min(),Pe.min(),Dr.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,Pe.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,Pe.min(),Pe.min(),Dr.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,Pe.min(),Pe.min(),Dr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Pe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Dr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Dr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Pe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Cd=class{constructor(e,t){this.position=e,this.inclusive=t}};function FV(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let s=e[i],o=n.position[i];if(s.field.isKeyField()?r=fe.comparator(fe.fromName(o.referenceValue),t.key):r=bd(o,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function VV(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ds(n.position[t],e.position[t]))return!1;return!0}var Td=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function OY(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var Gv=class{},Jt=class n extends Gv{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new BS(e,t,r):t==="array-contains"?new zS(e,r):t==="in"?new qS(e,r):t==="not-in"?new GS(e,r):t==="array-contains-any"?new WS(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new $S(e,r):new HS(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(bd(t,this.value)):t!==null&&xa(this.value)===xa(t)&&this.matchesComparison(bd(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ve(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Di=class n extends Gv{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new n(e,t)}matches(e){return jL(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}};function jL(n){return n.op==="and"}function BL(n){return FY(n)&&jL(n)}function FY(n){for(let e of n.filters)if(e instanceof Di)return!1;return!0}function jS(n){if(n instanceof Jt)return n.field.canonicalString()+n.op.toString()+Ed(n.value);if(BL(n))return n.filters.map(e=>jS(e)).join(",");{let e=n.filters.map(t=>jS(t)).join(",");return`${n.op}(${e})`}}function $L(n,e){return n instanceof Jt?(function(r,i){return i instanceof Jt&&r.op===i.op&&r.field.isEqual(i.field)&&ds(r.value,i.value)})(n,e):n instanceof Di?(function(r,i){return i instanceof Di&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&$L(o,i.filters[a]),!0):!1})(n,e):void ve(19439)}function HL(n){return n instanceof Jt?(function(t){return`${t.field.canonicalString()} ${t.op} ${Ed(t.value)}`})(n):n instanceof Di?(function(t){return t.op.toString()+" {"+t.getFilters().map(HL).join(" ,")+"}"})(n):"Filter"}var BS=class extends Jt{constructor(e,t,r){super(e,t,r),this.key=fe.fromName(r.referenceValue)}matches(e){let t=fe.comparator(e.key,this.key);return this.matchesComparison(t)}},$S=class extends Jt{constructor(e,t){super(e,"in",t),this.keys=zL("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},HS=class extends Jt{constructor(e,t){super(e,"not-in",t),this.keys=zL("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function zL(n,e){return(e.arrayValue?.values||[]).map(t=>fe.fromName(t.referenceValue))}var zS=class extends Jt{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return vA(t)&&Bp(t.arrayValue,this.value)}},qS=class extends Jt{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&Bp(this.value.arrayValue,t)}},GS=class extends Jt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Bp(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Bp(this.value.arrayValue,t)}},WS=class extends Jt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!vA(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Bp(this.value.arrayValue,r))}};var KS=class{constructor(e,t=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.Te=null}};function LV(n,e=null,t=[],r=[],i=null,s=null,o=null){return new KS(n,e,t,r,i,s,o)}function wA(n){let e=xe(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>jS(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>(function(s){return s.field.canonicalString()+s.dir})(r)).join(","),v0(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Ed(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Ed(r)).join(",")),e.Te=t}return e.Te}function IA(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!OY(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!$L(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!VV(n.startAt,e.startAt)&&VV(n.endAt,e.endAt)}function QS(n){return fe.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var gl=class{constructor(e,t=null,r=[],i=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}};function VY(n,e,t,r,i,s,o,a){return new gl(n,e,t,r,i,s,o,a)}function bA(n){return new gl(n)}function UV(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function qL(n){return n.collectionGroup!==null}function Mp(n){let e=xe(n);if(e.Ie===null){e.Ie=[];let t=new Set;for(let s of e.explicitOrderBy)e.Ie.push(s),t.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Tn(Ar.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.Ie.push(new Td(s,r))}),t.has(Ar.keyField().canonicalString())||e.Ie.push(new Td(Ar.keyField(),r))}return e.Ie}function ls(n){let e=xe(n);return e.Ee||(e.Ee=LY(e,Mp(n))),e.Ee}function LY(n,e){if(n.limitType==="F")return LV(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new Td(i.field,s)});let t=n.endAt?new Cd(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Cd(n.startAt.position,n.startAt.inclusive):null;return LV(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function YS(n,e){let t=n.filters.concat([e]);return new gl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function JS(n,e,t){return new gl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function I0(n,e){return IA(ls(n),ls(e))&&n.limitType===e.limitType}function GL(n){return`${wA(ls(n))}|lt:${n.limitType}`}function hd(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>HL(i)).join(", ")}]`),v0(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>(function(o){return`${o.field.canonicalString()} (${o.dir})`})(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Ed(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Ed(i)).join(",")),`Target(${r})`})(ls(n))}; limitType=${n.limitType})`}function b0(n,e){return e.isFoundDocument()&&(function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):fe.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)})(n,e)&&(function(r,i){for(let s of Mp(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0})(n,e)&&(function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0})(n,e)&&(function(r,i){return!(r.startAt&&!(function(o,a,c){let l=FV(o,a,c);return o.inclusive?l<=0:l<0})(r.startAt,Mp(r),i)||r.endAt&&!(function(o,a,c){let l=FV(o,a,c);return o.inclusive?l>=0:l>0})(r.endAt,Mp(r),i))})(n,e)}function UY(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function WL(n){return(e,t)=>{let r=!1;for(let i of Mp(n)){let s=jY(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function jY(n,e,t){let r=n.field.isKeyField()?fe.comparator(e.key,t.key):(function(s,o,a){let c=o.data.field(s),l=a.data.field(s);return c!==null&&l!==null?bd(c,l):ve(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ve(19790,{direction:n.dir})}}var ao=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Pa(this.inner,(t,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return kL(this.inner)}size(){return this.innerSize}};var BY=new Vt(fe.comparator);function co(){return BY}var KL=new Vt(fe.comparator);function Np(...n){let e=KL;for(let t of n)e=e.insert(t.key,t);return e}function QL(n){let e=KL;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function ll(){return Op()}function YL(){return Op()}function Op(){return new ao(n=>n.toString(),(n,e)=>n.isEqual(e))}var $Y=new Vt(fe.comparator),HY=new Tn(fe.comparator);function qe(...n){let e=HY;for(let t of n)e=e.add(t);return e}var zY=new Tn(ze);function qY(){return zY}function EA(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Up(e)?"-0":e}}function JL(n){return{integerValue:""+n}}function GY(n,e){return IY(e)?JL(e):EA(n,e)}var Sd=class{constructor(){this._=void 0}};function WY(n,e,t){return n instanceof Dd?(function(i,s){let o={fields:{[PL]:{stringValue:NL},[OL]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&mA(s)&&(s=w0(s)),s&&(o.fields[ML]=s),{mapValue:o}})(t,e):n instanceof ml?ZL(n,e):n instanceof yl?eU(n,e):(function(i,s){let o=XL(i,s),a=jV(o)+jV(i.Ae);return US(o)&&US(i.Ae)?JL(a):EA(i.serializer,a)})(n,e)}function KY(n,e,t){return n instanceof ml?ZL(n,e):n instanceof yl?eU(n,e):t}function XL(n,e){return n instanceof Ad?(function(r){return US(r)||(function(s){return!!s&&"doubleValue"in s})(r)})(e)?e:{integerValue:0}:null}var Dd=class extends Sd{},ml=class extends Sd{constructor(e){super(),this.elements=e}};function ZL(n,e){let t=tU(e);for(let r of n.elements)t.some(i=>ds(i,r))||t.push(r);return{arrayValue:{values:t}}}var yl=class extends Sd{constructor(e){super(),this.elements=e}};function eU(n,e){let t=tU(e);for(let r of n.elements)t=t.filter(i=>!ds(i,r));return{arrayValue:{values:t}}}var Ad=class extends Sd{constructor(e,t){super(),this.serializer=e,this.Ae=t}};function jV(n){return St(n.integerValue||n.doubleValue)}function tU(n){return vA(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function QY(n,e){return n.field.isEqual(e.field)&&(function(r,i){return r instanceof ml&&i instanceof ml||r instanceof yl&&i instanceof yl?wd(r.elements,i.elements,ds):r instanceof Ad&&i instanceof Ad?ds(r.Ae,i.Ae):r instanceof Dd&&i instanceof Dd})(n.transform,e.transform)}var XS=class{constructor(e,t){this.version=e,this.transformResults=t}},ro=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Lv(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var xd=class{};function nU(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new $p(n.key,ro.none()):new _l(n.key,n.data,ro.none());{let t=n.data,r=Dr.empty(),i=new Tn(Ar.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new hs(n.key,r,new Wr(i.toArray()),ro.none())}}function YY(n,e,t){n instanceof _l?(function(i,s,o){let a=i.value.clone(),c=$V(i.fieldTransforms,s,o.transformResults);a.setAll(c),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()})(n,e,t):n instanceof hs?(function(i,s,o){if(!Lv(i.precondition,s))return void s.convertToUnknownDocument(o.version);let a=$V(i.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(rU(i)),c.setAll(a),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()})(n,e,t):(function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()})(0,e,t)}function Fp(n,e,t,r){return n instanceof _l?(function(s,o,a,c){if(!Lv(s.precondition,o))return a;let l=s.value.clone(),h=HV(s.fieldTransforms,c,o);return l.setAll(h),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null})(n,e,t,r):n instanceof hs?(function(s,o,a,c){if(!Lv(s.precondition,o))return a;let l=HV(s.fieldTransforms,c,o),h=o.data;return h.setAll(rU(s)),h.setAll(l),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(p=>p.field))})(n,e,t,r):(function(s,o,a){return Lv(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a})(n,e,t)}function JY(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),s=XL(r.transform,i||null);s!=null&&(t===null&&(t=Dr.empty()),t.set(r.field,s))}return t||null}function BV(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&wd(r,i,(s,o)=>QY(s,o))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var _l=class extends xd{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},hs=class extends xd{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function rU(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function $V(n,e,t){let r=new Map;ht(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let i=0;i<t.length;i++){let s=n[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,KY(o,a,t[i]))}return r}function HV(n,e,t){let r=new Map;for(let i of n){let s=i.transform,o=t.data.field(i.field);r.set(i.field,WY(s,o,e))}return r}var $p=class extends xd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},ZS=class extends xd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var eD=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&YY(s,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=Fp(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=Fp(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=YL();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=t.has(i.key)?null:a;let c=nU(o,a);c!==null&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(Pe.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),qe())}isEqual(e){return this.batchId===e.batchId&&wd(this.mutations,e.mutations,(t,r)=>BV(t,r))&&wd(this.baseMutations,e.baseMutations,(t,r)=>BV(t,r))}},tD=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){ht(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=(function(){return $Y})(),s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new n(e,t,r,i)}};var nD=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var rD=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var Qt,Qe;function XY(n){switch(n){case q.OK:return ve(64938);case q.CANCELLED:case q.UNKNOWN:case q.DEADLINE_EXCEEDED:case q.RESOURCE_EXHAUSTED:case q.INTERNAL:case q.UNAVAILABLE:case q.UNAUTHENTICATED:return!1;case q.INVALID_ARGUMENT:case q.NOT_FOUND:case q.ALREADY_EXISTS:case q.PERMISSION_DENIED:case q.FAILED_PRECONDITION:case q.ABORTED:case q.OUT_OF_RANGE:case q.UNIMPLEMENTED:case q.DATA_LOSS:return!0;default:return ve(15467,{code:n})}}function iU(n){if(n===void 0)return io("GRPC error has no .code"),q.UNKNOWN;switch(n){case Qt.OK:return q.OK;case Qt.CANCELLED:return q.CANCELLED;case Qt.UNKNOWN:return q.UNKNOWN;case Qt.DEADLINE_EXCEEDED:return q.DEADLINE_EXCEEDED;case Qt.RESOURCE_EXHAUSTED:return q.RESOURCE_EXHAUSTED;case Qt.INTERNAL:return q.INTERNAL;case Qt.UNAVAILABLE:return q.UNAVAILABLE;case Qt.UNAUTHENTICATED:return q.UNAUTHENTICATED;case Qt.INVALID_ARGUMENT:return q.INVALID_ARGUMENT;case Qt.NOT_FOUND:return q.NOT_FOUND;case Qt.ALREADY_EXISTS:return q.ALREADY_EXISTS;case Qt.PERMISSION_DENIED:return q.PERMISSION_DENIED;case Qt.FAILED_PRECONDITION:return q.FAILED_PRECONDITION;case Qt.ABORTED:return q.ABORTED;case Qt.OUT_OF_RANGE:return q.OUT_OF_RANGE;case Qt.UNIMPLEMENTED:return q.UNIMPLEMENTED;case Qt.DATA_LOSS:return q.DATA_LOSS;default:return ve(39323,{code:n})}}(Qe=Qt||(Qt={}))[Qe.OK=0]="OK",Qe[Qe.CANCELLED=1]="CANCELLED",Qe[Qe.UNKNOWN=2]="UNKNOWN",Qe[Qe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Qe[Qe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Qe[Qe.NOT_FOUND=5]="NOT_FOUND",Qe[Qe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Qe[Qe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Qe[Qe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Qe[Qe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Qe[Qe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Qe[Qe.ABORTED=10]="ABORTED",Qe[Qe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Qe[Qe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Qe[Qe.INTERNAL=13]="INTERNAL",Qe[Qe.UNAVAILABLE=14]="UNAVAILABLE",Qe[Qe.DATA_LOSS=15]="DATA_LOSS";var ZY=null;function eJ(){return new TextEncoder}var tJ=new Zs([4294967295,4294967295],0);function zV(n){let e=eJ().encode(n),t=new yS;return t.update(e),new Uint8Array(t.digest())}function qV(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Zs([t,r],0),new Zs([i,s],0)]}var iD=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new ul(`Invalid padding: ${t}`);if(r<0)throw new ul(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ul(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new ul(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Zs.fromNumber(this.ge)}ye(e,t,r){let i=e.add(t.multiply(Zs.fromNumber(r)));return i.compare(tJ)===1&&(i=new Zs([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;let t=zV(e),[r,i]=qV(t);for(let s=0;s<this.hashCount;s++){let o=this.ye(r,i,s);if(!this.we(o))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new n(s,i,t);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.ge===0)return;let t=zV(e),[r,i]=qV(t);for(let s=0;s<this.hashCount;s++){let o=this.ye(r,i,s);this.Se(o)}}Se(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},ul=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Wv=class n{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,Hp.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(Pe.min(),i,new Vt(ze),co(),qe())}},Hp=class n{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,qe(),qe(),qe())}};var md=class{constructor(e,t,r,i){this.be=e,this.removedTargetIds=t,this.key=r,this.De=i}},Kv=class{constructor(e,t){this.targetId=e,this.Ce=t}},Qv=class{constructor(e,t,r=$n.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},Yv=class{constructor(){this.ve=0,this.Fe=GV(),this.Me=$n.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=qe(),t=qe(),r=qe();return this.Fe.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:ve(38017,{changeType:s})}}),new Hp(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=GV()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,ht(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}},sD=class{constructor(e){this.Ge=e,this.ze=new Map,this.je=co(),this.Je=Mv(),this.He=Mv(),this.Ye=new Vt(ze)}Ze(e){for(let t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(let t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,t=>{let r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:ve(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach((r,i)=>{this.rt(i)&&t(i)})}st(e){let t=e.targetId,r=e.Ce.count,i=this.ot(t);if(i){let s=i.target;if(QS(s))if(r===0){let o=new fe(s.path);this.et(t,o,Si.newNoDocument(o,Pe.min()))}else ht(r===1,20013,{expectedCount:r});else{let o=this._t(t);if(o!==r){let a=this.ut(e),c=a?this.ct(a,e,o):1;if(c!==0){this.it(t);let l=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,l)}ZY?.lt((function(h,p,m,b,k){let O={localCacheCount:h,existenceFilterCount:p.count,databaseId:m.database,projectId:m.projectId},N=p.unchangedNames;return N&&(O.bloomFilter={applied:k===0,hashCount:N?.hashCount??0,bitmapLength:N?.bits?.bitmap?.length??0,padding:N?.bits?.padding??0,mightContain:H=>b?.mightContain(H)??!1}),O})(o,e.Ce,this.Ge.ht(),a,c))}}}}ut(e){let t=e.Ce.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t,o,a;try{o=oo(r).toUint8Array()}catch(c){if(c instanceof Hv)return vd("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new iD(o,i,s)}catch(c){return vd(c instanceof ul?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.ge===0?null:a}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){let r=this.Ge.getRemoteKeysForTarget(t),i=0;return r.forEach(s=>{let o=this.Ge.ht(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.et(t,s,null),i++)}),i}Tt(e){let t=new Map;this.ze.forEach((s,o)=>{let a=this.ot(o);if(a){if(s.current&&QS(a.target)){let c=new fe(a.target.path);this.It(c).has(o)||this.Et(o,c)||this.et(o,c,Si.newNoDocument(c,e))}s.Be&&(t.set(o,s.ke()),s.qe())}});let r=qe();this.He.forEach((s,o)=>{let a=!0;o.forEachWhile(c=>{let l=this.ot(c);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.je.forEach((s,o)=>o.setReadTime(e));let i=new Wv(e,t,this.Ye,this.je,r);return this.je=co(),this.Je=Mv(),this.He=Mv(),this.Ye=new Vt(ze),i}Xe(e,t){if(!this.rt(e))return;let r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;let i=this.nt(e);this.Et(e,t)?i.Qe(t,1):i.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){let t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new Yv,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Tn(ze),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Tn(ze),this.Je=this.Je.insert(e,t)),t}rt(e){let t=this.ot(e)!==null;return t||ae("WatchChangeAggregator","Detected inactive target",e),t}ot(e){let t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Yv),this.Ge.getRemoteKeysForTarget(e).forEach(t=>{this.et(e,t,null)})}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}};function Mv(){return new Vt(fe.comparator)}function GV(){return new Vt(fe.comparator)}var nJ={asc:"ASCENDING",desc:"DESCENDING"},rJ={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},iJ={and:"AND",or:"OR"},oD=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function aD(n,e){return n.useProto3Json||v0(e)?e:{value:e}}function Jv(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function sU(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function sJ(n,e){return Jv(n,e.toTimestamp())}function us(n){return ht(!!n,49232),Pe.fromTimestamp((function(t){let r=so(t);return new Zt(r.seconds,r.nanos)})(n))}function CA(n,e){return cD(n,e).canonicalString()}function cD(n,e){let t=(function(i){return new Dt(["projects",i.projectId,"databases",i.database])})(n).child("documents");return e===void 0?t:t.child(e)}function oU(n){let e=Dt.fromString(n);return ht(dU(e),10190,{key:e.toString()}),e}function lD(n,e){return CA(n.databaseId,e.path)}function CS(n,e){let t=oU(e);if(t.get(1)!==n.databaseId.projectId)throw new se(q.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new se(q.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new fe(cU(t))}function aU(n,e){return CA(n.databaseId,e)}function oJ(n){let e=oU(n);return e.length===4?Dt.emptyPath():cU(e)}function uD(n){return new Dt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function cU(n){return ht(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function WV(n,e,t){return{name:lD(n,e),fields:t.value.mapValue.fields}}function aJ(n,e){let t;if("targetChange"in e){e.targetChange;let r=(function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:ve(39313,{state:l})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=(function(l,h){return l.useProto3Json?(ht(h===void 0||typeof h=="string",58123),$n.fromBase64String(h||"")):(ht(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),$n.fromUint8Array(h||new Uint8Array))})(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&(function(l){let h=l.code===void 0?q.UNKNOWN:iU(l.code);return new se(h,l.message||"")})(o);t=new Qv(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=CS(n,r.document.name),s=us(r.document.updateTime),o=r.document.createTime?us(r.document.createTime):Pe.min(),a=new Dr({mapValue:{fields:r.document.fields}}),c=Si.newFoundDocument(i,s,o,a),l=r.targetIds||[],h=r.removedTargetIds||[];t=new md(l,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=CS(n,r.document),s=r.readTime?us(r.readTime):Pe.min(),o=Si.newNoDocument(i,s),a=r.removedTargetIds||[];t=new md([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=CS(n,r.document),s=r.removedTargetIds||[];t=new md([],s,i,null)}else{if(!("filter"in e))return ve(11601,{Rt:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,o=new rD(i,s),a=r.targetId;t=new Kv(a,o)}}return t}function cJ(n,e){let t;if(e instanceof _l)t={update:WV(n,e.key,e.value)};else if(e instanceof $p)t={delete:lD(n,e.key)};else if(e instanceof hs)t={update:WV(n,e.key,e.data),updateMask:yJ(e.fieldMask)};else{if(!(e instanceof ZS))return ve(16599,{Vt:e.type});t={verify:lD(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>(function(s,o){let a=o.transform;if(a instanceof Dd)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof ml)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof yl)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Ad)return{fieldPath:o.field.canonicalString(),increment:a.Ae};throw ve(20930,{transform:o.transform})})(0,r))),e.precondition.isNone||(t.currentDocument=(function(i,s){return s.updateTime!==void 0?{updateTime:sJ(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:ve(27497)})(n,e.precondition)),t}function lJ(n,e){return n&&n.length>0?(ht(e!==void 0,14353),n.map(t=>(function(i,s){let o=i.updateTime?us(i.updateTime):us(s);return o.isEqual(Pe.min())&&(o=us(s)),new XS(o,i.transformResults||[])})(t,e))):[]}function uJ(n,e){return{documents:[aU(n,e.path)]}}function dJ(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=aU(n,i);let s=(function(l){if(l.length!==0)return uU(Di.create(l,"and"))})(e.filters);s&&(t.structuredQuery.where=s);let o=(function(l){if(l.length!==0)return l.map(h=>(function(m){return{field:fd(m.field),direction:pJ(m.dir)}})(h))})(e.orderBy);o&&(t.structuredQuery.orderBy=o);let a=aD(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=(function(l){return{before:l.inclusive,values:l.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(l){return{before:!l.inclusive,values:l.position}})(e.endAt)),{ft:t,parent:i}}function hJ(n){let e=oJ(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){ht(r===1,65062);let h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];t.where&&(s=(function(p){let m=lU(p);return m instanceof Di&&BL(m)?m.getFilters():[m]})(t.where));let o=[];t.orderBy&&(o=(function(p){return p.map(m=>(function(k){return new Td(pd(k.field),(function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(k.direction))})(m))})(t.orderBy));let a=null;t.limit&&(a=(function(p){let m;return m=typeof p=="object"?p.value:p,v0(m)?null:m})(t.limit));let c=null;t.startAt&&(c=(function(p){let m=!!p.before,b=p.values||[];return new Cd(b,m)})(t.startAt));let l=null;return t.endAt&&(l=(function(p){let m=!p.before,b=p.values||[];return new Cd(b,m)})(t.endAt)),VY(e,i,o,s,a,"F",c,l)}function fJ(n,e){let t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ve(28987,{purpose:i})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function lU(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=pd(t.unaryFilter.field);return Jt.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=pd(t.unaryFilter.field);return Jt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=pd(t.unaryFilter.field);return Jt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=pd(t.unaryFilter.field);return Jt.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ve(61313);default:return ve(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Jt.create(pd(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ve(58110);default:return ve(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Di.create(t.compositeFilter.filters.map(r=>lU(r)),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ve(1026)}})(t.compositeFilter.op))})(n):ve(30097,{filter:n})}function pJ(n){return nJ[n]}function gJ(n){return rJ[n]}function mJ(n){return iJ[n]}function fd(n){return{fieldPath:n.canonicalString()}}function pd(n){return Ar.fromServerFormat(n.fieldPath)}function uU(n){return n instanceof Jt?(function(t){if(t.op==="=="){if(OV(t.value))return{unaryFilter:{field:fd(t.field),op:"IS_NAN"}};if(MV(t.value))return{unaryFilter:{field:fd(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(OV(t.value))return{unaryFilter:{field:fd(t.field),op:"IS_NOT_NAN"}};if(MV(t.value))return{unaryFilter:{field:fd(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:fd(t.field),op:gJ(t.op),value:t.value}}})(n):n instanceof Di?(function(t){let r=t.getFilters().map(i=>uU(i));return r.length===1?r[0]:{compositeFilter:{op:mJ(t.op),filters:r}}})(n):ve(54877,{filter:n})}function yJ(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function dU(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var zp=class n{constructor(e,t,r,i,s=Pe.min(),o=Pe.min(),a=$n.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var dD=class{constructor(e){this.yt=e}};function _J(n){let e=hJ({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?JS(e,e.limit,"L"):e}var Xv=class{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(St(e.integerValue));else if("doubleValue"in e){let r=St(e.doubleValue);isNaN(r)?this.Ft(t,13):(this.Ft(t,15),Up(r)?t.Mt(0):t.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(t,20),typeof r=="string"&&(r=so(r)),t.xt(`${r.seconds||""}`),t.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(oo(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ft(t,45),t.Mt(r.latitude||0),t.Mt(r.longitude||0)}else"mapValue"in e?LL(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):VL(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):ve(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){let r=e.fields||{};this.Ft(t,55);for(let i of Object.keys(r))this.Ot(i,t),this.Ct(r[i],t)}kt(e,t){let r=e.fields||{};this.Ft(t,53);let i=Id,s=r[i].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(St(s)),this.Ot(i,t),this.Ct(r[i],t)}Qt(e,t){let r=e.values||[];this.Ft(t,50);for(let i of r)this.Ct(i,t)}Lt(e,t){this.Ft(t,37),fe.fromName(e).path.forEach(r=>{this.Ft(t,60),this.Ut(r,t)})}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}};Xv.Kt=new Xv;var hD=class{constructor(){this.Cn=new fD}addToCollectionParentIndex(e,t){return this.Cn.add(t),G.resolve()}getCollectionParents(e,t){return G.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return G.resolve()}deleteFieldIndex(e,t){return G.resolve()}deleteAllFieldIndexes(e){return G.resolve()}createTargetIndexes(e,t){return G.resolve()}getDocumentsMatchingTarget(e,t){return G.resolve(null)}getIndexType(e,t){return G.resolve(0)}getFieldIndexes(e,t){return G.resolve([])}getNextCollectionGroupToUpdate(e){return G.resolve(null)}getMinOffset(e,t){return G.resolve(pl.min())}getMinOffsetFromCollectionGroup(e,t){return G.resolve(pl.min())}updateCollectionGroup(e,t,r){return G.resolve()}updateIndexEntries(e,t){return G.resolve()}},fD=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Tn(Dt.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Tn(Dt.comparator)).toArray()}};var dbe=new Uint8Array(0);var KV={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},hU=41943040,Gr=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};Gr.DEFAULT_COLLECTION_PERCENTILE=10,Gr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Gr.DEFAULT=new Gr(hU,Gr.DEFAULT_COLLECTION_PERCENTILE,Gr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Gr.DISABLED=new Gr(-1,0,0);var qp=class n{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new n(0)}static cr(){return new n(-1)}};var QV="LruGarbageCollector",vJ=1048576;function YV([n,e],[t,r]){let i=ze(n,t);return i===0?ze(e,r):i}var pD=class{constructor(e){this.Ir=e,this.buffer=new Tn(YV),this.Er=0}dr(){return++this.Er}Ar(e){let t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();YV(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},gD=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ae(QV,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Fd(t)?ae(QV,"Ignoring IndexedDB error during garbage collection: ",t):await Od(t)}await this.Vr(3e5)})}},mD=class{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return G.resolve(pA.ce);let r=new pD(t);return this.mr.forEachTarget(e,i=>r.Ar(i.sequenceNumber)).next(()=>this.mr.pr(e,i=>r.Ar(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ae("LruGarbageCollector","Garbage collection skipped; disabled"),G.resolve(KV)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ae("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),KV):this.yr(e,t))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,i,s,o,a,c,l,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(ae("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,o=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,a=Date.now(),this.removeTargets(e,r,t))).next(p=>(s=p,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(l=Date.now(),dd()<=Ke.DEBUG&&ae("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(c-a)+`ms
	Removed ${p} documents in `+(l-c)+`ms
Total Duration: ${l-h}ms`),G.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:p})))}};function wJ(n,e){return new mD(n,e)}var yD=class{constructor(){this.changes=new ao(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Si.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?G.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var _D=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var vD=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&Fp(r.mutation,i,Wr.empty(),Zt.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,qe()).next(()=>r))}getLocalViewOfDocuments(e,t,r=qe()){let i=ll();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=Np();return s.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){let r=ll();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,qe()))}populateOverlays(e,t,r){let i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,r,i){let s=co(),o=Op(),a=(function(){return Op()})();return t.forEach((c,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof hs)?s=s.insert(l.key,l):h!==void 0?(o.set(l.key,h.mutation.getFieldMask()),Fp(h.mutation,l,h.mutation.getFieldMask(),Zt.now())):o.set(l.key,Wr.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((l,h)=>o.set(l,h)),t.forEach((l,h)=>a.set(l,new _D(h,o.get(l)??null))),a))}recalculateAndSaveOverlays(e,t){let r=Op(),i=new Vt((o,a)=>o-a),s=qe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(let a of o)a.keys().forEach(c=>{let l=t.get(c);if(l===null)return;let h=r.get(c)||Wr.empty();h=a.applyToLocalView(l,h),r.set(c,h);let p=(i.get(a.batchId)||qe()).add(c);i=i.insert(a.batchId,p)})}).next(()=>{let o=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),l=c.key,h=c.value,p=YL();h.forEach(m=>{if(!s.has(m)){let b=nU(t.get(m),r.get(m));b!==null&&p.set(m,b),s=s.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,l,p))}return G.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return(function(o){return fe.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):qL(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):G.resolve(ll()),a=Lp,c=s;return o.next(l=>G.forEach(l,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),s.get(h)?G.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{c=c.insert(h,m)}))).next(()=>this.populateOverlays(e,l,s)).next(()=>this.computeViews(e,c,l,qe())).next(h=>({batchId:a,changes:QL(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new fe(t)).next(r=>{let i=Np();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let s=t.collectionGroup,o=Np();return this.indexManager.getCollectionParents(e,s).next(a=>G.forEach(a,c=>{let l=(function(p,m){return new gl(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)})(t,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((p,m)=>{o=o.insert(p,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((c,l)=>{let h=l.getKey();o.get(h)===null&&(o=o.insert(h,Si.newInvalidDocument(h)))});let a=Np();return o.forEach((c,l)=>{let h=s.get(c);h!==void 0&&Fp(h.mutation,l,Wr.empty(),Zt.now()),b0(t,l)&&(a=a.insert(c,l))}),a})}};var wD=class{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return G.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:us(i.createTime)}})(t)),G.resolve()}getNamedQuery(e,t){return G.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(i){return{name:i.name,query:_J(i.bundledQuery),readTime:us(i.readTime)}})(t)),G.resolve()}};var ID=class{constructor(){this.overlays=new Vt(fe.comparator),this.qr=new Map}getOverlay(e,t){return G.resolve(this.overlays.get(t))}getOverlays(e,t){let r=ll();return G.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.St(e,t,s)}),G.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.qr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.qr.delete(r)),G.resolve()}getOverlaysForCollection(e,t,r){let i=ll(),s=t.length+1,o=new fe(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let c=a.getNext().value,l=c.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return G.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new Vt((l,h)=>l-h),o=this.overlays.getIterator();for(;o.hasNext();){let l=o.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let h=s.get(l.largestBatchId);h===null&&(h=ll(),s=s.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let a=ll(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return G.resolve(a)}St(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new nD(t,r));let s=this.qr.get(t);s===void 0&&(s=qe(),this.qr.set(t,s)),this.qr.set(t,s.add(r.key))}};var bD=class{constructor(){this.sessionToken=$n.EMPTY_BYTE_STRING}getSessionToken(e){return G.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,G.resolve()}};var Gp=class{constructor(){this.Qr=new Tn(Yt.$r),this.Ur=new Tn(Yt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){let r=new Yt(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Gr(new Yt(e,t))}zr(e,t){e.forEach(r=>this.removeReference(r,t))}jr(e){let t=new fe(new Dt([])),r=new Yt(t,e),i=new Yt(t,e+1),s=[];return this.Ur.forEachInRange([r,i],o=>{this.Gr(o),s.push(o.key)}),s}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){let t=new fe(new Dt([])),r=new Yt(t,e),i=new Yt(t,e+1),s=qe();return this.Ur.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let t=new Yt(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},Yt=class{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return fe.comparator(e.key,t.key)||ze(e.Yr,t.Yr)}static Kr(e,t){return ze(e.Yr,t.Yr)||fe.comparator(e.key,t.key)}};var ED=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Tn(Yt.$r)}checkEmpty(e){return G.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new eD(s,t,r,i);this.mutationQueue.push(o);for(let a of i)this.Zr=this.Zr.add(new Yt(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return G.resolve(o)}lookupMutationBatch(e,t){return G.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.ei(r),s=i<0?0:i;return G.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return G.resolve(this.mutationQueue.length===0?gA:this.tr-1)}getAllMutationBatches(e){return G.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new Yt(t,0),i=new Yt(t,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([r,i],o=>{let a=this.Xr(o.Yr);s.push(a)}),G.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Tn(ze);return t.forEach(i=>{let s=new Yt(i,0),o=new Yt(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,o],a=>{r=r.add(a.Yr)})}),G.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,s=r;fe.isDocumentKey(s)||(s=s.child(""));let o=new Yt(new fe(s),0),a=new Tn(ze);return this.Zr.forEachWhile(c=>{let l=c.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(c.Yr)),!0)},o),G.resolve(this.ti(a))}ti(e){let t=[];return e.forEach(r=>{let i=this.Xr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){ht(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return G.forEach(t.mutations,i=>{let s=new Yt(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,t){let r=new Yt(t,0),i=this.Zr.firstAfterOrEqual(r);return G.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,G.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){let t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var CD=class{constructor(e){this.ri=e,this.docs=(function(){return new Vt(fe.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return G.resolve(r?r.document.mutableCopy():Si.newInvalidDocument(t))}getEntries(e,t){let r=co();return t.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Si.newInvalidDocument(i))}),G.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=co(),o=t.path,a=new fe(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:l,value:{document:h}}=c.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||_Y(yY(h),r)<=0||(i.has(h.key)||b0(t,h))&&(s=s.insert(h.key,h.mutableCopy()))}return G.resolve(s)}getAllFromCollectionGroup(e,t,r,i){ve(9500)}ii(e,t){return G.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new TD(this)}getSize(e){return G.resolve(this.size)}},TD=class extends yD{constructor(e){super(),this.Nr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)}),G.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}};var SD=class{constructor(e){this.persistence=e,this.si=new ao(t=>wA(t),IA),this.lastRemoteSnapshotVersion=Pe.min(),this.highestTargetId=0,this.oi=0,this._i=new Gp,this.targetCount=0,this.ai=qp.ur()}forEachTarget(e,t){return this.si.forEach((r,i)=>t(i)),G.resolve()}getLastRemoteSnapshotVersion(e){return G.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return G.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),G.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),G.resolve()}Pr(e){this.si.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.ai=new qp(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,G.resolve()}updateTargetData(e,t){return this.Pr(t),G.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,G.resolve()}removeTargets(e,t,r){let i=0,s=[];return this.si.forEach((o,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.si.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),G.waitFor(s).next(()=>i)}getTargetCount(e){return G.resolve(this.targetCount)}getTargetData(e,t){let r=this.si.get(t)||null;return G.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),G.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);let i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),G.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),G.resolve()}getMatchingKeysForTargetId(e,t){let r=this._i.Hr(t);return G.resolve(r)}containsKey(e,t){return G.resolve(this._i.containsKey(t))}};var Zv=class{constructor(e,t){this.ui={},this.overlays={},this.ci=new pA(0),this.li=!1,this.li=!0,this.hi=new bD,this.referenceDelegate=e(this),this.Pi=new SD(this),this.indexManager=new hD,this.remoteDocumentCache=(function(i){return new CD(i)})(r=>this.referenceDelegate.Ti(r)),this.serializer=new dD(t),this.Ii=new wD(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new ID,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new ED(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){ae("MemoryPersistence","Starting transaction:",e);let i=new DD(this.ci.next());return this.referenceDelegate.Ei(),r(i).next(s=>this.referenceDelegate.di(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ai(e,t){return G.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,t)))}},DD=class extends FS{constructor(e){super(),this.currentSequenceNumber=e}},AD=class n{constructor(e){this.persistence=e,this.Ri=new Gp,this.Vi=null}static mi(e){return new n(e)}get fi(){if(this.Vi)return this.Vi;throw ve(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),G.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),G.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),G.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach(i=>this.fi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.fi.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}Ei(){this.Vi=new Set}di(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return G.forEach(this.fi,r=>{let i=fe.fromPath(r);return this.gi(e,i).next(s=>{s||t.removeEntry(i,Pe.min())})}).next(()=>(this.Vi=null,t.apply(e)))}updateLimboDocument(e,t){return this.gi(e,t).next(r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())})}Ti(e){return 0}gi(e,t){return G.or([()=>G.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}},e0=class n{constructor(e,t){this.persistence=e,this.pi=new ao(r=>bY(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=wJ(this,t)}static mi(e,t){return new n(e,t)}Ei(){}di(e){return G.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){let t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}wr(e){let t=0;return this.pr(e,r=>{t++}).next(()=>t)}pr(e,t){return G.forEach(this.pi,(r,i)=>this.br(e,r,i).next(s=>s?G.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ii(e,o=>this.br(e,o,t).next(a=>{a||(r++,s.removeEntry(o,Pe.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),G.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),G.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),G.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),G.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Fv(e.data.value)),t}br(e,t,r){return G.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let i=this.pi.get(t);return G.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var xD=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=i}static As(e,t){let r=qe(),i=qe();for(let s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new n(e,t.fromCache,r,i)}};var RD=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var kD=class{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return yF()?8:wY(mF())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,i){let s={result:null};return this.ys(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ws(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new RD;return this.Ss(e,t,o).next(a=>{if(s.result=a,this.Vs)return this.bs(e,t,o,a.size)})}).next(()=>s.result)}bs(e,t,r,i){return r.documentReadCount<this.fs?(dd()<=Ke.DEBUG&&ae("QueryEngine","SDK will not create cache indexes for query:",hd(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),G.resolve()):(dd()<=Ke.DEBUG&&ae("QueryEngine","Query:",hd(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(dd()<=Ke.DEBUG&&ae("QueryEngine","The SDK decides to create cache indexes for query:",hd(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ls(t))):G.resolve())}ys(e,t){if(UV(t))return G.resolve(null);let r=ls(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=JS(t,null,"F"),r=ls(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=qe(...s);return this.ps.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let l=this.Ds(t,a);return this.Cs(t,l,o,c.readTime)?this.ys(e,JS(t,null,"F")):this.vs(e,l,t,c)}))})))}ws(e,t,r,i){return UV(t)||i.isEqual(Pe.min())?G.resolve(null):this.ps.getDocuments(e,r).next(s=>{let o=this.Ds(t,s);return this.Cs(t,o,r,i)?G.resolve(null):(dd()<=Ke.DEBUG&&ae("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),hd(t)),this.vs(e,o,t,mY(i,Lp)).next(a=>a))})}Ds(e,t){let r=new Tn(WL(e));return t.forEach((i,s)=>{b0(e,s)&&(r=r.add(s))}),r}Cs(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ss(e,t,r){return dd()<=Ke.DEBUG&&ae("QueryEngine","Using full collection scan to execute query:",hd(t)),this.ps.getDocumentsMatchingQuery(e,t,pl.min(),r)}vs(e,t,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}};var TA="LocalStore",IJ=3e8,ND=class{constructor(e,t,r,i){this.persistence=e,this.Fs=t,this.serializer=i,this.Ms=new Vt(ze),this.xs=new ao(s=>wA(s),IA),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new vD(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}};function bJ(n,e,t,r){return new ND(n,e,t,r)}async function fU(n,e){let t=xe(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.Bs(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{let o=[],a=[],c=qe();for(let l of i){o.push(l.batchId);for(let h of l.mutations)c=c.add(h.key)}for(let l of s){a.push(l.batchId);for(let h of l.mutations)c=c.add(h.key)}return t.localDocuments.getDocuments(r,c).next(l=>({Ls:l,removedBatchIds:o,addedBatchIds:a}))})})}function EJ(n,e){let t=xe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),s=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(a,c,l,h){let p=l.batch,m=p.keys(),b=G.resolve();return m.forEach(k=>{b=b.next(()=>h.getEntry(c,k)).next(O=>{let N=l.docVersions.get(k);ht(N!==null,48541),O.version.compareTo(N)<0&&(p.applyToRemoteDocument(O,l),O.isValidDocument()&&(O.setReadTime(l.commitVersion),h.addEntry(O)))})}),b.next(()=>a.mutationQueue.removeMutationBatch(c,p))})(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(a){let c=qe();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(c=c.add(a.batch.mutations[l].key));return c})(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function pU(n){let e=xe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Pi.getLastRemoteSnapshotVersion(t))}function CJ(n,e){let t=xe(n),r=e.snapshotVersion,i=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=t.Ns.newChangeBuffer({trackRemovals:!0});i=t.Ms;let a=[];e.targetChanges.forEach((h,p)=>{let m=i.get(p);if(!m)return;a.push(t.Pi.removeMatchingKeys(s,h.removedDocuments,p).next(()=>t.Pi.addMatchingKeys(s,h.addedDocuments,p)));let b=m.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(p)!==null?b=b.withResumeToken($n.EMPTY_BYTE_STRING,Pe.min()).withLastLimboFreeSnapshotVersion(Pe.min()):h.resumeToken.approximateByteSize()>0&&(b=b.withResumeToken(h.resumeToken,r)),i=i.insert(p,b),(function(O,N,H){return O.resumeToken.approximateByteSize()===0||N.snapshotVersion.toMicroseconds()-O.snapshotVersion.toMicroseconds()>=IJ?!0:H.addedDocuments.size+H.modifiedDocuments.size+H.removedDocuments.size>0})(m,b,h)&&a.push(t.Pi.updateTargetData(s,b))});let c=co(),l=qe();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(TJ(s,o,e.documentUpdates).next(h=>{c=h.ks,l=h.qs})),!r.isEqual(Pe.min())){let h=t.Pi.getLastRemoteSnapshotVersion(s).next(p=>t.Pi.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(h)}return G.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,c,l)).next(()=>c)}).then(s=>(t.Ms=i,s))}function TJ(n,e,t){let r=qe(),i=qe();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=co();return t.forEach((a,c)=>{let l=s.get(a);c.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(Pe.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||c.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):ae(TA,"Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version)}),{ks:o,qs:i}})}function SJ(n,e){let t=xe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=gA),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function DJ(n,e){let t=xe(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Pi.getTargetData(r,e).next(s=>s?(i=s,G.resolve(i)):t.Pi.allocateTargetId(r).next(o=>(i=new zp(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Pi.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.xs.set(e,r.targetId)),r})}async function PD(n,e,t){let r=xe(n),i=r.Ms.get(e),s=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Fd(o))throw o;ae(TA,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function JV(n,e,t){let r=xe(n),i=Pe.min(),s=qe();return r.persistence.runTransaction("Execute query","readwrite",o=>(function(c,l,h){let p=xe(c),m=p.xs.get(h);return m!==void 0?G.resolve(p.Ms.get(m)):p.Pi.getTargetData(l,h)})(r,o,ls(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,a.targetId).next(c=>{s=c})}).next(()=>r.Fs.getDocumentsMatchingQuery(o,e,t?i:Pe.min(),t?s:qe())).next(a=>(AJ(r,UY(e),a),{documents:a,Qs:s})))}function AJ(n,e,t){let r=n.Os.get(e)||Pe.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.Os.set(e,r)}var t0=class{constructor(){this.activeTargetIds=qY()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var MD=class{constructor(){this.Mo=new t0,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new t0,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var OD=class{Oo(e){}shutdown(){}};var XV="ConnectivityMonitor",n0=class{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ae(XV,"Network connectivity changed: AVAILABLE");for(let e of this.qo)e(0)}ko(){ae(XV,"Network connectivity changed: UNAVAILABLE");for(let e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Ov=null;function FD(){return Ov===null?Ov=(function(){return 268435456+Math.round(2147483648*Math.random())})():Ov++,"0x"+Ov.toString(16)}var TS="RestConnection",xJ={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},VD=class{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===zv?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,t,r,i,s){let o=FD(),a=this.zo(e,t.toUriEncodedString());ae(TS,`Sending RPC '${e}' ${o}:`,a,r);let c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,i,s);let{host:l}=new URL(a),h=uv(l);return this.Jo(e,a,c,r,h).then(p=>(ae(TS,`Received RPC '${e}' ${o}: `,p),p),p=>{throw vd(TS,`RPC '${e}' ${o} failed with error: `,p,"url: ",a,"request:",r),p})}Ho(e,t,r,i,s,o){return this.Go(e,t,r,i,s)}jo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Md})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}zo(e,t){let r=xJ[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}};var LD=class{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}};var Bn="WebChannelConnection",UD=class extends VD{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,i,s){let o=FD();return new Promise((a,c)=>{let l=new _S;l.setWithCredentials(!0),l.listenOnce(vS.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case kp.NO_ERROR:let p=l.getResponseJson();ae(Bn,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(p)),a(p);break;case kp.TIMEOUT:ae(Bn,`RPC '${e}' ${o} timed out`),c(new se(q.DEADLINE_EXCEEDED,"Request time out"));break;case kp.HTTP_ERROR:let m=l.getStatus();if(ae(Bn,`RPC '${e}' ${o} failed with status:`,m,"response text:",l.getResponseText()),m>0){let b=l.getResponseJson();Array.isArray(b)&&(b=b[0]);let k=b?.error;if(k&&k.status&&k.message){let O=(function(H){let Q=H.toLowerCase().replace(/_/g,"-");return Object.values(q).indexOf(Q)>=0?Q:q.UNKNOWN})(k.status);c(new se(O,k.message))}else c(new se(q.UNKNOWN,"Server responded with status "+l.getStatus()))}else c(new se(q.UNAVAILABLE,"Connection failed."));break;default:ve(9055,{l_:e,streamId:o,h_:l.getLastErrorCode(),P_:l.getLastError()})}}finally{ae(Bn,`RPC '${e}' ${o} completed.`)}});let h=JSON.stringify(i);ae(Bn,`RPC '${e}' ${o} sending request:`,i),l.send(t,"POST",h,r,15)})}T_(e,t,r){let i=FD(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=bS(),a=IS(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(c.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;let h=s.join("");ae(Bn,`Creating RPC '${e}' stream ${i}: ${h}`,c);let p=o.createWebChannel(h,c);this.I_(p);let m=!1,b=!1,k=new LD({Yo:N=>{b?ae(Bn,`Not sending because RPC '${e}' stream ${i} is closed:`,N):(m||(ae(Bn,`Opening RPC '${e}' stream ${i} transport.`),p.open(),m=!0),ae(Bn,`RPC '${e}' stream ${i} sending:`,N),p.send(N))},Zo:()=>p.close()}),O=(N,H,Q)=>{N.listen(H,Z=>{try{Q(Z)}catch(Ee){setTimeout(()=>{throw Ee},0)}})};return O(p,ud.EventType.OPEN,()=>{b||(ae(Bn,`RPC '${e}' stream ${i} transport opened.`),k.o_())}),O(p,ud.EventType.CLOSE,()=>{b||(b=!0,ae(Bn,`RPC '${e}' stream ${i} transport closed`),k.a_(),this.E_(p))}),O(p,ud.EventType.ERROR,N=>{b||(b=!0,vd(Bn,`RPC '${e}' stream ${i} transport errored. Name:`,N.name,"Message:",N.message),k.a_(new se(q.UNAVAILABLE,"The operation could not be completed")))}),O(p,ud.EventType.MESSAGE,N=>{if(!b){let H=N.data[0];ht(!!H,16349);let Q=H,Z=Q?.error||Q[0]?.error;if(Z){ae(Bn,`RPC '${e}' stream ${i} received error:`,Z);let Ee=Z.status,Je=(function(v){let I=Qt[v];if(I!==void 0)return iU(I)})(Ee),Ie=Z.message;Je===void 0&&(Je=q.INTERNAL,Ie="Unknown error status: "+Ee+" with message "+Z.message),b=!0,k.a_(new se(Je,Ie)),p.close()}else ae(Bn,`RPC '${e}' stream ${i} received:`,H),k.u_(H)}}),O(a,wS.STAT_EVENT,N=>{N.stat===Nv.PROXY?ae(Bn,`RPC '${e}' stream ${i} detected buffering proxy`):N.stat===Nv.NOPROXY&&ae(Bn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{k.__()},0),k}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(t=>t===e)}};function SS(){return typeof document<"u"?document:null}function E0(n){return new oD(n,!0)}var r0=class{constructor(e,t,r=1e3,i=1.5,s=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=i,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();let t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,t-r);i>0&&ae("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}};var ZV="PersistentStream",i0=class{constructor(e,t,r,i,s,o,a,c){this.Mi=e,this.S_=r,this.b_=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new r0(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===q.RESOURCE_EXHAUSTED?(io(t.toString()),io("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===q.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;let e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===t&&this.G_(r,i)},r=>{e(()=>{let i=new se(q.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(e,t){let r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.J_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return ae(ZV,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget(()=>this.D_===e?t():(ae(ZV,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},jD=class extends i0{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();let t=aJ(this.serializer,e),r=(function(s){if(!("targetChange"in s))return Pe.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?Pe.min():o.readTime?us(o.readTime):Pe.min()})(e);return this.listener.H_(t,r)}Y_(e){let t={};t.database=uD(this.serializer),t.addTarget=(function(s,o){let a,c=o.target;if(a=QS(c)?{documents:uJ(s,c)}:{query:dJ(s,c).ft},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=sU(s,o.resumeToken);let l=aD(s,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(Pe.min())>0){a.readTime=Jv(s,o.snapshotVersion.toTimestamp());let l=aD(s,o.expectedCount);l!==null&&(a.expectedCount=l)}return a})(this.serializer,e);let r=fJ(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){let t={};t.database=uD(this.serializer),t.removeTarget=e,this.q_(t)}},BD=class extends i0{constructor(e,t,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return ht(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ht(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ht(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();let t=lJ(e.writeResults,e.commitTime),r=us(e.commitTime);return this.listener.na(r,t)}ra(){let e={};e.database=uD(this.serializer),this.q_(e)}ea(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>cJ(this.serializer,r))};this.q_(t)}};var $D=class{},HD=class extends $D{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new se(q.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Go(e,cD(t,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new se(q.UNKNOWN,s.toString())})}Ho(e,t,r,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Ho(e,cD(t,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new se(q.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}},zD=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(io(t),this.aa=!1):ae("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}};var vl="RemoteStore",qD=class{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo(o=>{r.enqueueAndForget(async()=>{wl(this)&&(ae(vl,"Restarting streams for network reachability change."),await(async function(c){let l=xe(c);l.Ea.add(4),await Yp(l),l.Ra.set("Unknown"),l.Ea.delete(4),await C0(l)})(this))})}),this.Ra=new zD(r,i)}};async function C0(n){if(wl(n))for(let e of n.da)await e(!0)}async function Yp(n){for(let e of n.da)await e(!1)}function gU(n,e){let t=xe(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),xA(t)?AA(t):Vd(t).O_()&&DA(t,e))}function SA(n,e){let t=xe(n),r=Vd(t);t.Ia.delete(e),r.O_()&&mU(t,e),t.Ia.size===0&&(r.O_()?r.L_():wl(t)&&t.Ra.set("Unknown"))}function DA(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Pe.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Vd(n).Y_(e)}function mU(n,e){n.Va.Ue(e),Vd(n).Z_(e)}function AA(n){n.Va=new sD({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),Vd(n).start(),n.Ra.ua()}function xA(n){return wl(n)&&!Vd(n).x_()&&n.Ia.size>0}function wl(n){return xe(n).Ea.size===0}function yU(n){n.Va=void 0}async function RJ(n){n.Ra.set("Online")}async function kJ(n){n.Ia.forEach((e,t)=>{DA(n,e)})}async function NJ(n,e){yU(n),xA(n)?(n.Ra.ha(e),AA(n)):n.Ra.set("Unknown")}async function PJ(n,e,t){if(n.Ra.set("Online"),e instanceof Qv&&e.state===2&&e.cause)try{await(async function(i,s){let o=s.cause;for(let a of s.targetIds)i.Ia.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.Ia.delete(a),i.Va.removeTarget(a))})(n,e)}catch(r){ae(vl,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await s0(n,r)}else if(e instanceof md?n.Va.Ze(e):e instanceof Kv?n.Va.st(e):n.Va.tt(e),!t.isEqual(Pe.min()))try{let r=await pU(n.localStore);t.compareTo(r)>=0&&await(function(s,o){let a=s.Va.Tt(o);return a.targetChanges.forEach((c,l)=>{if(c.resumeToken.approximateByteSize()>0){let h=s.Ia.get(l);h&&s.Ia.set(l,h.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,l)=>{let h=s.Ia.get(c);if(!h)return;s.Ia.set(c,h.withResumeToken($n.EMPTY_BYTE_STRING,h.snapshotVersion)),mU(s,c);let p=new zp(h.target,c,l,h.sequenceNumber);DA(s,p)}),s.remoteSyncer.applyRemoteEvent(a)})(n,t)}catch(r){ae(vl,"Failed to raise snapshot:",r),await s0(n,r)}}async function s0(n,e,t){if(!Fd(e))throw e;n.Ea.add(1),await Yp(n),n.Ra.set("Offline"),t||(t=()=>pU(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{ae(vl,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await C0(n)})}function _U(n,e){return e().catch(t=>s0(n,t,e))}async function T0(n){let e=xe(n),t=Ra(e),r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:gA;for(;MJ(e);)try{let i=await SJ(e.localStore,r);if(i===null){e.Ta.length===0&&t.L_();break}r=i.batchId,OJ(e,i)}catch(i){await s0(e,i)}vU(e)&&wU(e)}function MJ(n){return wl(n)&&n.Ta.length<10}function OJ(n,e){n.Ta.push(e);let t=Ra(n);t.O_()&&t.X_&&t.ea(e.mutations)}function vU(n){return wl(n)&&!Ra(n).x_()&&n.Ta.length>0}function wU(n){Ra(n).start()}async function FJ(n){Ra(n).ra()}async function VJ(n){let e=Ra(n);for(let t of n.Ta)e.ea(t.mutations)}async function LJ(n,e,t){let r=n.Ta.shift(),i=tD.from(r,e,t);await _U(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),await T0(n)}async function UJ(n,e){e&&Ra(n).X_&&await(async function(r,i){if((function(o){return XY(o)&&o!==q.ABORTED})(i.code)){let s=r.Ta.shift();Ra(r).B_(),await _U(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await T0(r)}})(n,e),vU(n)&&wU(n)}async function eL(n,e){let t=xe(n);t.asyncQueue.verifyOperationInProgress(),ae(vl,"RemoteStore received new credentials");let r=wl(t);t.Ea.add(3),await Yp(t),r&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await C0(t)}async function jJ(n,e){let t=xe(n);e?(t.Ea.delete(2),await C0(t)):e||(t.Ea.add(2),await Yp(t),t.Ra.set("Unknown"))}function Vd(n){return n.ma||(n.ma=(function(t,r,i){let s=xe(t);return s.sa(),new jD(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(n.datastore,n.asyncQueue,{Xo:RJ.bind(null,n),t_:kJ.bind(null,n),r_:NJ.bind(null,n),H_:PJ.bind(null,n)}),n.da.push(async e=>{e?(n.ma.B_(),xA(n)?AA(n):n.Ra.set("Unknown")):(await n.ma.stop(),yU(n))})),n.ma}function Ra(n){return n.fa||(n.fa=(function(t,r,i){let s=xe(t);return s.sa(),new BD(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:FJ.bind(null,n),r_:UJ.bind(null,n),ta:VJ.bind(null,n),na:LJ.bind(null,n)}),n.da.push(async e=>{e?(n.fa.B_(),await T0(n)):(await n.fa.stop(),n.Ta.length>0&&(ae(vl,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))})),n.fa}var GD=class n{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new to,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){let o=Date.now()+r,a=new n(e,t,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new se(q.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function RA(n,e){if(io("AsyncQueue",`${e}: ${n}`),Fd(n))return new se(q.UNAVAILABLE,`${e}: ${n}`);throw n}var o0=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||fe.comparator(t.key,r.key):(t,r)=>fe.comparator(t.key,r.key),this.keyedMap=Np(),this.sortedSet=new Vt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var a0=class{constructor(){this.ga=new Vt(fe.comparator)}track(e){let t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):ve(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){let e=[];return this.ga.inorderTraversal((t,r)=>{e.push(r)}),e}},Rd=class n{constructor(e,t,r,i,s,o,a,c,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,s){let o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new n(e,t,o0.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&I0(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var WD=class{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}},KD=class{constructor(){this.queries=tL(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){let i=xe(t),s=i.queries;i.queries=tL(),s.forEach((o,a)=>{for(let c of a.Sa)c.onError(r)})})(this,new se(q.ABORTED,"Firestore shutting down"))}};function tL(){return new ao(n=>GL(n),I0)}async function BJ(n,e){let t=xe(n),r=3,i=e.query,s=t.queries.get(i);s?!s.ba()&&e.Da()&&(r=2):(s=new WD,r=e.Da()?0:1);try{switch(r){case 0:s.wa=await t.onListen(i,!0);break;case 1:s.wa=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(o){let a=RA(o,`Initialization of query '${hd(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,s),s.Sa.push(e),e.va(t.onlineState),s.wa&&e.Fa(s.wa)&&kA(t)}async function $J(n,e){let t=xe(n),r=e.query,i=3,s=t.queries.get(r);if(s){let o=s.Sa.indexOf(e);o>=0&&(s.Sa.splice(o,1),s.Sa.length===0?i=e.Da()?0:1:!s.ba()&&e.Da()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function HJ(n,e){let t=xe(n),r=!1;for(let i of e){let s=i.query,o=t.queries.get(s);if(o){for(let a of o.Sa)a.Fa(i)&&(r=!0);o.wa=i}}r&&kA(t)}function zJ(n,e,t){let r=xe(n),i=r.queries.get(e);if(i)for(let s of i.Sa)s.onError(t);r.queries.delete(e)}function kA(n){n.Ca.forEach(e=>{e.next()})}var QD,nL;(nL=QD||(QD={})).Ma="default",nL.Cache="cache";var YD=class{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Rd(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;let r=t!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;let t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Rd.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==QD.Cache}};var c0=class{constructor(e){this.key=e}},l0=class{constructor(e){this.key=e}},JD=class{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=qe(),this.mutatedKeys=qe(),this.eu=WL(e),this.tu=new o0(this.eu)}get nu(){return this.Ya}ru(e,t){let r=t?t.iu:new a0,i=t?t.tu:this.tu,s=t?t.mutatedKeys:this.mutatedKeys,o=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let m=i.get(h),b=b0(this.query,p)?p:null,k=!!m&&this.mutatedKeys.has(m.key),O=!!b&&(b.hasLocalMutations||this.mutatedKeys.has(b.key)&&b.hasCommittedMutations),N=!1;m&&b?m.data.isEqual(b.data)?k!==O&&(r.track({type:3,doc:b}),N=!0):this.su(m,b)||(r.track({type:2,doc:b}),N=!0,(c&&this.eu(b,c)>0||l&&this.eu(b,l)<0)&&(a=!0)):!m&&b?(r.track({type:0,doc:b}),N=!0):m&&!b&&(r.track({type:1,doc:m}),N=!0,(c||l)&&(a=!0)),N&&(b?(o=o.add(b),s=O?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{tu:o,iu:r,Cs:a,mutatedKeys:s}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;let o=e.iu.ya();o.sort((h,p)=>(function(b,k){let O=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ve(20277,{Rt:N})}};return O(b)-O(k)})(h.type,p.type)||this.eu(h.doc,p.doc)),this.ou(r),i=i??!1;let a=t&&!i?this._u():[],c=this.Xa.size===0&&this.current&&!i?1:0,l=c!==this.Za;return this.Za=c,o.length!==0||l?{snapshot:new Rd(this.query,e.tu,s,o,e.mutatedKeys,c===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new a0,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(t=>this.Ya=this.Ya.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ya=this.Ya.delete(t)),this.current=e.current)}_u(){if(!this.current)return[];let e=this.Xa;this.Xa=qe(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});let t=[];return e.forEach(r=>{this.Xa.has(r)||t.push(new l0(r))}),this.Xa.forEach(r=>{e.has(r)||t.push(new c0(r))}),t}cu(e){this.Ya=e.Qs,this.Xa=qe();let t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Rd.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}},NA="SyncEngine",XD=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},ZD=class{constructor(e){this.key=e,this.hu=!1}},eA=class{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new ao(a=>GL(a),I0),this.Iu=new Map,this.Eu=new Set,this.du=new Vt(fe.comparator),this.Au=new Map,this.Ru=new Gp,this.Vu={},this.mu=new Map,this.fu=qp.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}};async function qJ(n,e,t=!0){let r=SU(n),i,s=r.Tu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=await IU(r,e,t,!0),i}async function GJ(n,e){let t=SU(n);await IU(t,e,!0,!1)}async function IU(n,e,t,r){let i=await DJ(n.localStore,ls(e)),s=i.targetId,o=n.sharedClientState.addLocalQueryTarget(s,t),a;return r&&(a=await WJ(n,e,s,o==="current",i.resumeToken)),n.isPrimaryClient&&t&&gU(n.remoteStore,i),a}async function WJ(n,e,t,r,i){n.pu=(p,m,b)=>(async function(O,N,H,Q){let Z=N.view.ru(H);Z.Cs&&(Z=await JV(O.localStore,N.query,!1).then(({documents:T})=>N.view.ru(T,Z)));let Ee=Q&&Q.targetChanges.get(N.targetId),Je=Q&&Q.targetMismatches.get(N.targetId)!=null,Ie=N.view.applyChanges(Z,O.isPrimaryClient,Ee,Je);return iL(O,N.targetId,Ie.au),Ie.snapshot})(n,p,m,b);let s=await JV(n.localStore,e,!0),o=new JD(e,s.Qs),a=o.ru(s.documents),c=Hp.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),l=o.applyChanges(a,n.isPrimaryClient,c);iL(n,t,l.au);let h=new XD(e,t,o);return n.Tu.set(e,h),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),l.snapshot}async function KJ(n,e,t){let r=xe(n),i=r.Tu.get(e),s=r.Iu.get(i.targetId);if(s.length>1)return r.Iu.set(i.targetId,s.filter(o=>!I0(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await PD(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&SA(r.remoteStore,i.targetId),tA(r,i.targetId)}).catch(Od)):(tA(r,i.targetId),await PD(r.localStore,i.targetId,!0))}async function QJ(n,e){let t=xe(n),r=t.Tu.get(e),i=t.Iu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),SA(t.remoteStore,r.targetId))}async function YJ(n,e,t){let r=rX(n);try{let i=await(function(o,a){let c=xe(o),l=Zt.now(),h=a.reduce((b,k)=>b.add(k.key),qe()),p,m;return c.persistence.runTransaction("Locally write mutations","readwrite",b=>{let k=co(),O=qe();return c.Ns.getEntries(b,h).next(N=>{k=N,k.forEach((H,Q)=>{Q.isValidDocument()||(O=O.add(H))})}).next(()=>c.localDocuments.getOverlayedDocuments(b,k)).next(N=>{p=N;let H=[];for(let Q of a){let Z=JY(Q,p.get(Q.key).overlayedDocument);Z!=null&&H.push(new hs(Q.key,Z,UL(Z.value.mapValue),ro.exists(!0)))}return c.mutationQueue.addMutationBatch(b,l,H,a)}).next(N=>{m=N;let H=N.applyToLocalDocumentSet(p,O);return c.documentOverlayCache.saveOverlays(b,N.batchId,H)})}).then(()=>({batchId:m.batchId,changes:QL(p)}))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(o,a,c){let l=o.Vu[o.currentUser.toKey()];l||(l=new Vt(ze)),l=l.insert(a,c),o.Vu[o.currentUser.toKey()]=l})(r,i.batchId,t),await Jp(r,i.changes),await T0(r.remoteStore)}catch(i){let s=RA(i,"Failed to persist write");t.reject(s)}}async function bU(n,e){let t=xe(n);try{let r=await CJ(t.localStore,e);e.targetChanges.forEach((i,s)=>{let o=t.Au.get(s);o&&(ht(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.hu=!0:i.modifiedDocuments.size>0?ht(o.hu,14607):i.removedDocuments.size>0&&(ht(o.hu,42227),o.hu=!1))}),await Jp(t,r,e)}catch(r){await Od(r)}}function rL(n,e,t){let r=xe(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Tu.forEach((s,o)=>{let a=o.view.va(e);a.snapshot&&i.push(a.snapshot)}),(function(o,a){let c=xe(o);c.onlineState=a;let l=!1;c.queries.forEach((h,p)=>{for(let m of p.Sa)m.va(a)&&(l=!0)}),l&&kA(c)})(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function JJ(n,e,t){let r=xe(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Au.get(e),s=i&&i.key;if(s){let o=new Vt(fe.comparator);o=o.insert(s,Si.newNoDocument(s,Pe.min()));let a=qe().add(s),c=new Wv(Pe.min(),new Map,new Vt(ze),o,a);await bU(r,c),r.du=r.du.remove(s),r.Au.delete(e),PA(r)}else await PD(r.localStore,e,!1).then(()=>tA(r,e,t)).catch(Od)}async function XJ(n,e){let t=xe(n),r=e.batch.batchId;try{let i=await EJ(t.localStore,e);CU(t,r,null),EU(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await Jp(t,i)}catch(i){await Od(i)}}async function ZJ(n,e,t){let r=xe(n);try{let i=await(function(o,a){let c=xe(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return c.mutationQueue.lookupMutationBatch(l,a).next(p=>(ht(p!==null,37113),h=p.keys(),c.mutationQueue.removeMutationBatch(l,p))).next(()=>c.mutationQueue.performConsistencyCheck(l)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>c.localDocuments.getDocuments(l,h))})})(r.localStore,e);CU(r,e,t),EU(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await Jp(r,i)}catch(i){await Od(i)}}function EU(n,e){(n.mu.get(e)||[]).forEach(t=>{t.resolve()}),n.mu.delete(e)}function CU(n,e,t){let r=xe(n),i=r.Vu[r.currentUser.toKey()];if(i){let s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function tA(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach(r=>{n.Ru.containsKey(r)||TU(n,r)})}function TU(n,e){n.Eu.delete(e.path.canonicalString());let t=n.du.get(e);t!==null&&(SA(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),PA(n))}function iL(n,e,t){for(let r of t)r instanceof c0?(n.Ru.addReference(r.key,e),eX(n,r)):r instanceof l0?(ae(NA,"Document no longer in limbo: "+r.key),n.Ru.removeReference(r.key,e),n.Ru.containsKey(r.key)||TU(n,r.key)):ve(19791,{wu:r})}function eX(n,e){let t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Eu.has(r)||(ae(NA,"New document in limbo: "+t),n.Eu.add(r),PA(n))}function PA(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){let e=n.Eu.values().next().value;n.Eu.delete(e);let t=new fe(Dt.fromString(e)),r=n.fu.next();n.Au.set(r,new ZD(t)),n.du=n.du.insert(t,r),gU(n.remoteStore,new zp(ls(bA(t.path)),r,"TargetPurposeLimboResolution",pA.ce))}}async function Jp(n,e,t){let r=xe(n),i=[],s=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((a,c)=>{o.push(r.pu(c,e,t).then(l=>{if((l||t)&&r.isPrimaryClient){let h=l?!l.fromCache:t?.targetChanges.get(c.targetId)?.current;r.sharedClientState.updateQueryState(c.targetId,h?"current":"not-current")}if(l){i.push(l);let h=xD.As(c.targetId,l);s.push(h)}}))}),await Promise.all(o),r.Pu.H_(i),await(async function(c,l){let h=xe(c);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>G.forEach(l,m=>G.forEach(m.Es,b=>h.persistence.referenceDelegate.addReference(p,m.targetId,b)).next(()=>G.forEach(m.ds,b=>h.persistence.referenceDelegate.removeReference(p,m.targetId,b)))))}catch(p){if(!Fd(p))throw p;ae(TA,"Failed to update sequence numbers: "+p)}for(let p of l){let m=p.targetId;if(!p.fromCache){let b=h.Ms.get(m),k=b.snapshotVersion,O=b.withLastLimboFreeSnapshotVersion(k);h.Ms=h.Ms.insert(m,O)}}})(r.localStore,s))}async function tX(n,e){let t=xe(n);if(!t.currentUser.isEqual(e)){ae(NA,"User change. New user:",e.toKey());let r=await fU(t.localStore,e);t.currentUser=e,(function(s,o){s.mu.forEach(a=>{a.forEach(c=>{c.reject(new se(q.CANCELLED,o))})}),s.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Jp(t,r.Ls)}}function nX(n,e){let t=xe(n),r=t.Au.get(e);if(r&&r.hu)return qe().add(r.key);{let i=qe(),s=t.Iu.get(e);if(!s)return i;for(let o of s){let a=t.Tu.get(o);i=i.unionWith(a.view.nu)}return i}}function SU(n){let e=xe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=bU.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=nX.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=JJ.bind(null,e),e.Pu.H_=HJ.bind(null,e.eventManager),e.Pu.yu=zJ.bind(null,e.eventManager),e}function rX(n){let e=xe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=XJ.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=ZJ.bind(null,e),e}var DU=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=E0(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,r){return null}Mu(t,r){return null}vu(t){return bJ(this.persistence,new kD,t.initialUser,this.serializer)}Cu(t){return new Zv(AD.mi,this.serializer)}Du(t){return new MD}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}return n.provider={build:()=>new n},n})(),nA=class extends DU{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){ht(this.persistence.referenceDelegate instanceof e0,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new gD(r,e.asyncQueue,t)}Cu(e){let t=this.cacheSizeBytes!==void 0?Gr.withCacheSize(this.cacheSizeBytes):Gr.DEFAULT;return new Zv(r=>e0.mi(r,t),this.serializer)}};var iX=(()=>{class n{async initialize(t,r){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>rL(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=tX.bind(null,this.syncEngine),await jJ(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new KD})()}createDatastore(t){let r=E0(t.databaseInfo.databaseId),i=(function(o){return new UD(o)})(t.databaseInfo);return(function(o,a,c,l){return new HD(o,a,c,l)})(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return(function(i,s,o,a,c){return new qD(i,s,o,a,c)})(this.localStore,this.datastore,t.asyncQueue,r=>rL(this.syncEngine,r,0),(function(){return n0.v()?new n0:new OD})())}createSyncEngine(t,r){return(function(s,o,a,c,l,h,p){let m=new eA(s,o,a,c,l,h);return p&&(m.gu=!0),m})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}async terminate(){await(async function(r){let i=xe(r);ae(vl,"RemoteStore shutting down."),i.Ea.add(5),await Yp(i),i.Aa.shutdown(),i.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}return n.provider={build:()=>new n},n})();var rA=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):io("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var ka="FirestoreClient",iA=class{constructor(e,t,r,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Cn.UNAUTHENTICATED,this.clientId=Vp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{ae(ka,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(ae(ka,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new to;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=RA(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}};async function DS(n,e){n.asyncQueue.verifyOperationInProgress(),ae(ka,"Initializing OfflineComponentProvider");let t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async i=>{r.isEqual(i)||(await fU(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function sL(n,e){n.asyncQueue.verifyOperationInProgress();let t=await sX(n);ae(ka,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>eL(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>eL(e.remoteStore,i)),n._onlineComponents=e}async function sX(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ae(ka,"Using user provided OfflineComponentProvider");try{await DS(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===q.FAILED_PRECONDITION||i.code===q.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;vd("Error using user provided cache. Falling back to memory cache: "+t),await DS(n,new DU)}}else ae(ka,"Using default OfflineComponentProvider"),await DS(n,new nA(void 0));return n._offlineComponents}async function AU(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ae(ka,"Using user provided OnlineComponentProvider"),await sL(n,n._uninitializedComponentsProvider._online)):(ae(ka,"Using default OnlineComponentProvider"),await sL(n,new iX))),n._onlineComponents}function oX(n){return AU(n).then(e=>e.syncEngine)}async function oL(n){let e=await AU(n),t=e.eventManager;return t.onListen=qJ.bind(null,e.syncEngine),t.onUnlisten=KJ.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=GJ.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=QJ.bind(null,e.syncEngine),t}function xU(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var aL=new Map;var RU="firestore.googleapis.com",cL=!0,u0=class{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new se(q.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=RU,this.ssl=cL}else this.host=e.host,this.ssl=e.ssl??cL;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=hU;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<vJ)throw new se(q.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}gY("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=xU(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new se(q.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new se(q.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new se(q.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},kd=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new u0({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new se(q.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new se(q.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new u0(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new AS;switch(r.type){case"firstParty":return new NS(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new se(q.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){let r=aL.get(t);r&&(ae("ComponentProvider","Removing Datastore"),aL.delete(t),r.terminate())})(this),Promise.resolve()}};function aX(n,e,t,r={}){n=no(n,kd);let i=uv(e),s=n._getSettings(),o=ie(B({},s),{emulatorOptions:n._getEmulatorOptions()}),a=`${e}:${t}`;i&&(fF(`https://${a}`),gF("Firestore",!0)),s.host!==RU&&s.host!==a&&vd("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let c=ie(B({},s),{host:a,ssl:i,emulatorOptions:r});if(!ad(c,o)&&(n._setSettings(c),r.mockUserToken)){let l,h;if(typeof r.mockUserToken=="string")l=r.mockUserToken,h=Cn.MOCK_USER;else{l=pF(r.mockUserToken,n._app?.options.projectId);let p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new se(q.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new Cn(p)}n._authCredentials=new xS(new Uv(l,h))}}var Nd=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Sn=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ta(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}toJSON(){return{type:n._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(Qp(t,n._jsonSchema))return new n(e,r||null,new fe(Dt.fromString(t.referencePath)))}};Sn._jsonSchemaVersion="firestore/documentReference/1.0",Sn._jsonSchema={type:Xt("string",Sn._jsonSchemaVersion),referencePath:Xt("string")};var Ta=class n extends Nd{constructor(e,t,r){super(e,t,bA(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Sn(this.firestore,null,new fe(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function Xp(n,e,...t){if(n=Ti(n),gL("collection","path",e),n instanceof kd){let r=Dt.fromString(e,...t);return SV(r),new Ta(n,null,r)}{if(!(n instanceof Sn||n instanceof Ta))throw new se(q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Dt.fromString(e,...t));return SV(r),new Ta(n.firestore,null,r)}}function en(n,e,...t){if(n=Ti(n),arguments.length===1&&(e=Vp.newId()),gL("doc","path",e),n instanceof kd){let r=Dt.fromString(e,...t);return TV(r),new Sn(n,null,new fe(r))}{if(!(n instanceof Sn||n instanceof Ta))throw new se(q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Dt.fromString(e,...t));return TV(r),new Sn(n.firestore,n instanceof Ta?n.converter:null,new fe(r))}}var lL="AsyncQueue",d0=class{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new r0(this,"async_queue_retry"),this._c=()=>{let r=SS();r&&ae(lL,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;let t=SS();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;let t=SS();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});let t=new to;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Fd(e))throw e;ae(lL,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){let t=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,io("INTERNAL UNHANDLED ERROR: ",uL(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);let i=GD.createAndSchedule(this,e,t,r,s=>this.hc(s));return this.tc.push(i),i}uc(){this.nc&&ve(47125,{Pc:uL(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(let t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){let t=this.tc.indexOf(e);this.tc.splice(t,1)}};function uL(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}function dL(n){return(function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let s of r)if(s in i&&typeof i[s]=="function")return!0;return!1})(n,["next","error","complete"])}var Na=class extends kd{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new d0,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new d0(e),this._firestoreClient=void 0,await e}}};function S0(n,e){let t=typeof n=="object"?n:DF(),r=typeof n=="string"?n:e||zv,i=CF(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let s=hF("firestore");s&&aX(i,...s)}return i}function kU(n){if(n._terminated)throw new se(q.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||cX(n),n._firestoreClient}function cX(n){let e=n._freezeSettings(),t=(function(i,s,o,a){return new VS(i,s,o,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,xU(a.experimentalLongPollingOptions),a.useFetchStreams,a.isUsingEmulator)})(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new iA(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(i){let s=i?._online.build();return{_offline:i?._offline.build(s),_online:s}})(n._componentsProvider))}var Sa=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n($n.fromBase64String(e))}catch(t){throw new se(q.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n($n.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Qp(e,n._jsonSchema))return n.fromBase64String(e.bytes)}};Sa._jsonSchemaVersion="firestore/bytes/1.0",Sa._jsonSchema={type:Xt("string",Sa._jsonSchemaVersion),bytes:Xt("string")};var Pd=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new se(q.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ar(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Wp=class{constructor(e){this._methodName=e}};var Da=class n{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new se(q.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new se(q.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ze(this._lat,e._lat)||ze(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:n._jsonSchemaVersion}}static fromJSON(e){if(Qp(e,n._jsonSchema))return new n(e.latitude,e.longitude)}};Da._jsonSchemaVersion="firestore/geoPoint/1.0",Da._jsonSchema={type:Xt("string",Da._jsonSchemaVersion),latitude:Xt("number"),longitude:Xt("number")};var Aa=class n{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0})(this._values,e._values)}toJSON(){return{type:n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Qp(e,n._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new n(e.vectorValues);throw new se(q.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};Aa._jsonSchemaVersion="firestore/vectorValue/1.0",Aa._jsonSchema={type:Xt("string",Aa._jsonSchemaVersion),vectorValues:Xt("object")};var lX=/^__.*__$/,sA=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new hs(e,this.data,this.fieldMask,t,this.fieldTransforms):new _l(e,this.data,t,this.fieldTransforms)}},h0=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new hs(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function NU(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ve(40011,{Ac:n})}}var oA=class n{constructor(e,t,r,i,s,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new n(B(B({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){let t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.gc(e),r}yc(e){let t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return p0(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(NU(this.Ac)&&lX.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}},aA=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||E0(e)}Cc(e,t,r,i=!1){return new oA({Ac:e,methodName:t,Dc:r,path:Ar.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function MA(n){let e=n._freezeSettings(),t=E0(n._databaseId);return new aA(n._databaseId,!!e.ignoreUndefinedProperties,t)}function uX(n,e,t,r,i,s={}){let o=n.Cc(s.merge||s.mergeFields?2:0,e,t,i);OA("Data must be an object, but it was:",o,r);let a=PU(r,o),c,l;if(s.merge)c=new Wr(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){let h=[];for(let p of s.mergeFields){let m=cA(e,p,t);if(!o.contains(m))throw new se(q.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);OU(h,m)||h.push(m)}c=new Wr(h),l=o.fieldTransforms.filter(p=>c.covers(p.field))}else c=null,l=o.fieldTransforms;return new sA(new Dr(a),c,l)}var f0=class n extends Wp{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function dX(n,e,t,r){let i=n.Cc(1,e,t);OA("Data must be an object, but it was:",i,r);let s=[],o=Dr.empty();Pa(r,(c,l)=>{let h=FA(e,c,t);l=Ti(l);let p=i.yc(h);if(l instanceof f0)s.push(h);else{let m=Zp(l,p);m!=null&&(s.push(h),o.set(h,m))}});let a=new Wr(s);return new h0(o,a,i.fieldTransforms)}function hX(n,e,t,r,i,s){let o=n.Cc(1,e,t),a=[cA(e,r,t)],c=[i];if(s.length%2!=0)throw new se(q.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<s.length;m+=2)a.push(cA(e,s[m])),c.push(s[m+1]);let l=[],h=Dr.empty();for(let m=a.length-1;m>=0;--m)if(!OU(l,a[m])){let b=a[m],k=c[m];k=Ti(k);let O=o.yc(b);if(k instanceof f0)l.push(b);else{let N=Zp(k,O);N!=null&&(l.push(b),h.set(b,N))}}let p=new Wr(l);return new h0(h,p,o.fieldTransforms)}function fX(n,e,t,r=!1){return Zp(t,n.Cc(r?4:3,e))}function Zp(n,e){if(MU(n=Ti(n)))return OA("Unsupported field value:",e,n),PU(n,e);if(n instanceof Wp)return(function(r,i){if(!NU(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);let s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,i){let s=[],o=0;for(let a of r){let c=Zp(a,i.wc(o));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}})(n,e)}return(function(r,i){if((r=Ti(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return GY(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let s=Zt.fromDate(r);return{timestampValue:Jv(i.serializer,s)}}if(r instanceof Zt){let s=new Zt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Jv(i.serializer,s)}}if(r instanceof Da)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Sa)return{bytesValue:sU(i.serializer,r._byteString)};if(r instanceof Sn){let s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:CA(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Aa)return(function(o,a){return{mapValue:{fields:{[yA]:{stringValue:_A},[Id]:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.Sc("VectorValues must only contain numeric values.");return EA(a.serializer,l)})}}}}}})(r,i);throw i.Sc(`Unsupported field value: ${_0(r)}`)})(n,e)}function PU(n,e){let t={};return kL(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Pa(n,(r,i)=>{let s=Zp(i,e.mc(r));s!=null&&(t[r]=s)}),{mapValue:{fields:t}}}function MU(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Zt||n instanceof Da||n instanceof Sa||n instanceof Sn||n instanceof Wp||n instanceof Aa)}function OA(n,e,t){if(!MU(t)||!mL(t)){let r=_0(t);throw r==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+r)}}function cA(n,e,t){if((e=Ti(e))instanceof Pd)return e._internalPath;if(typeof e=="string")return FA(n,e);throw p0("Field path arguments must be of type string or ",n,!1,void 0,t)}var pX=new RegExp("[~\\*/\\[\\]]");function FA(n,e,t){if(e.search(pX)>=0)throw p0(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Pd(...e.split("."))._internalPath}catch{throw p0(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function p0(n,e,t,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new se(q.INVALID_ARGUMENT,a+n+c)}function OU(n,e){return n.some(t=>t.isEqual(e))}var g0=class{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Sn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new lA(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(VA("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},lA=class extends g0{data(){return super.data()}};function VA(n,e){return typeof e=="string"?FA(n,e):e instanceof Pd?e._internalPath:e._delegate._internalPath}function gX(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new se(q.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Kp=class{},uA=class extends Kp{};function eg(n,e,...t){let r=[];e instanceof Kp&&r.push(e),r=r.concat(t),(function(s){let o=s.filter(c=>c instanceof dA).length,a=s.filter(c=>c instanceof m0).length;if(o>1||o>0&&a>0)throw new se(q.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(let i of r)n=i._apply(n);return n}var m0=class n extends uA{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return FU(e._query,t),new Nd(e.firestore,e.converter,YS(e._query,t))}_parse(e){let t=MA(e.firestore);return(function(s,o,a,c,l,h,p){let m;if(l.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new se(q.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){fL(p,h);let k=[];for(let O of p)k.push(hL(c,s,O));m={arrayValue:{values:k}}}else m=hL(c,s,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||fL(p,h),m=fX(a,o,p,h==="in"||h==="not-in");return Jt.create(l,h,m)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function tg(n,e,t){let r=e,i=VA("where",n);return m0._create(i,r,t)}var dA=class n extends Kp{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:Di.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:((function(i,s){let o=i,a=s.getFlattenedFilters();for(let c of a)FU(o,c),o=YS(o,c)})(e._query,t),new Nd(e.firestore,e.converter,YS(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};function hL(n,e,t){if(typeof(t=Ti(t))=="string"){if(t==="")throw new se(q.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!qL(e)&&t.indexOf("/")!==-1)throw new se(q.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(Dt.fromString(t));if(!fe.isDocumentKey(r))throw new se(q.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return PV(n,new fe(r))}if(t instanceof Sn)return PV(n,t._key);throw new se(q.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${_0(t)}.`)}function fL(n,e){if(!Array.isArray(n)||n.length===0)throw new se(q.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function FU(n,e){let t=(function(i,s){for(let o of i)for(let a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null})(n.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new se(q.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new se(q.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var hA=class{convertValue(e,t="none"){switch(xa(e)){case 0:return null;case 1:return e.booleanValue;case 2:return St(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(oo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ve(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return Pa(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertVectorValue(e){let t=e.fields?.[Id].arrayValue?.values?.map(r=>St(r.doubleValue));return new Aa(t)}convertGeoPoint(e){return new Da(St(e.latitude),St(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=w0(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(jp(e));default:return null}}convertTimestamp(e){let t=so(e);return new Zt(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=Dt.fromString(e);ht(dU(r),9688,{name:e});let i=new qv(r.get(1),r.get(3)),s=new fe(r.popFirst(5));return i.isEqual(t)||io(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}};function mX(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var dl=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},hl=class n extends g0{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new yd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(VA("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new se(q.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,t={};return t.type=n._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};hl._jsonSchemaVersion="firestore/documentSnapshot/1.0",hl._jsonSchema={type:Xt("string",hl._jsonSchemaVersion),bundleSource:Xt("string","DocumentSnapshot"),bundleName:Xt("string"),bundle:Xt("string")};var yd=class extends hl{data(e={}){return super.data(e)}},_d=class n{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new dl(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new yd(this._firestore,this._userDataWriter,r.key,r,new dl(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new se(q.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{let c=new yd(i._firestore,i._userDataWriter,a.doc.key,a.doc,new dl(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{let c=new yd(i._firestore,i._userDataWriter,a.doc.key,a.doc,new dl(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,h=-1;return a.type!==0&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:yX(a.type),doc:c,oldIndex:l,newIndex:h}})}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new se(q.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=n._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Vp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let t=[],r=[],i=[];return this.docs.forEach(s=>{s._document!==null&&(t.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function yX(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ve(61501,{type:n})}}_d._jsonSchemaVersion="firestore/querySnapshot/1.0",_d._jsonSchema={type:Xt("string",_d._jsonSchemaVersion),bundleSource:Xt("string","QuerySnapshot"),bundleName:Xt("string"),bundle:Xt("string")};var y0=class extends hA{constructor(e){super(),this.firestore=e}convertBytes(e){return new Sa(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Sn(this.firestore,null,t)}};function lo(n,e,t){n=no(n,Sn);let r=no(n.firestore,Na),i=mX(n.converter,e,t);return LA(r,[uX(MA(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,ro.none())])}function Ma(n,e,t,...r){n=no(n,Sn);let i=no(n.firestore,Na),s=MA(i),o;return o=typeof(e=Ti(e))=="string"||e instanceof Pd?hX(s,"updateDoc",n._key,e,t,r):dX(s,"updateDoc",n._key,e),LA(i,[o.toMutation(n._key,ro.exists(!0))])}function Il(n){return LA(no(n.firestore,Na),[new $p(n._key,ro.none())])}function ng(n,...e){n=Ti(n);let t={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||dL(e[r])||(t=e[r++]);let i={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(dL(e[r])){let c=e[r];e[r]=c.next?.bind(c),e[r+1]=c.error?.bind(c),e[r+2]=c.complete?.bind(c)}let s,o,a;if(n instanceof Sn)o=no(n.firestore,Na),a=bA(n._key.path),s={next:c=>{e[r]&&e[r](_X(o,n,c))},error:e[r+1],complete:e[r+2]};else{let c=no(n,Nd);o=no(c.firestore,Na),a=c._query;let l=new y0(o);s={next:h=>{e[r]&&e[r](new _d(o,l,c,h))},error:e[r+1],complete:e[r+2]},gX(n._query)}return(function(l,h,p,m){let b=new rA(m),k=new YD(h,b,p);return l.asyncQueue.enqueueAndForget(async()=>BJ(await oL(l),k)),()=>{b.Nu(),l.asyncQueue.enqueueAndForget(async()=>$J(await oL(l),k))}})(kU(o),a,i,s)}function LA(n,e){return(function(r,i){let s=new to;return r.asyncQueue.enqueueAndForget(async()=>YJ(await oX(r),i,s)),s.promise})(kU(n),e)}function _X(n,e,t){let r=t.docs.get(e._key),i=new y0(n);return new hl(n,i,e._key,r,new dl(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(i){Md=i})(SF),wp(new Qs("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),a=new Na(new RS(r.getProvider("auth-internal")),new PS(o,r.getProvider("app-check-internal")),(function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new se(q.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new qv(l.options.projectId,h)})(o,i),o);return s=B({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),wa(bV,EV,e),wa(bV,EV,"esm2020")})();var VU=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},LU={};var uo,UA;(function(){var n;function e(T,v){function I(){}I.prototype=v.prototype,T.D=v.prototype,T.prototype=new I,T.prototype.constructor=T,T.C=function(C,E,A){for(var w=Array(arguments.length-2),Ct=2;Ct<arguments.length;Ct++)w[Ct-2]=arguments[Ct];return v.prototype[E].apply(C,w)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(T,v,I){I||(I=0);var C=Array(16);if(typeof v=="string")for(var E=0;16>E;++E)C[E]=v.charCodeAt(I++)|v.charCodeAt(I++)<<8|v.charCodeAt(I++)<<16|v.charCodeAt(I++)<<24;else for(E=0;16>E;++E)C[E]=v[I++]|v[I++]<<8|v[I++]<<16|v[I++]<<24;v=T.g[0],I=T.g[1],E=T.g[2];var A=T.g[3],w=v+(A^I&(E^A))+C[0]+3614090360&4294967295;v=I+(w<<7&4294967295|w>>>25),w=A+(E^v&(I^E))+C[1]+3905402710&4294967295,A=v+(w<<12&4294967295|w>>>20),w=E+(I^A&(v^I))+C[2]+606105819&4294967295,E=A+(w<<17&4294967295|w>>>15),w=I+(v^E&(A^v))+C[3]+3250441966&4294967295,I=E+(w<<22&4294967295|w>>>10),w=v+(A^I&(E^A))+C[4]+4118548399&4294967295,v=I+(w<<7&4294967295|w>>>25),w=A+(E^v&(I^E))+C[5]+1200080426&4294967295,A=v+(w<<12&4294967295|w>>>20),w=E+(I^A&(v^I))+C[6]+2821735955&4294967295,E=A+(w<<17&4294967295|w>>>15),w=I+(v^E&(A^v))+C[7]+4249261313&4294967295,I=E+(w<<22&4294967295|w>>>10),w=v+(A^I&(E^A))+C[8]+1770035416&4294967295,v=I+(w<<7&4294967295|w>>>25),w=A+(E^v&(I^E))+C[9]+2336552879&4294967295,A=v+(w<<12&4294967295|w>>>20),w=E+(I^A&(v^I))+C[10]+4294925233&4294967295,E=A+(w<<17&4294967295|w>>>15),w=I+(v^E&(A^v))+C[11]+2304563134&4294967295,I=E+(w<<22&4294967295|w>>>10),w=v+(A^I&(E^A))+C[12]+1804603682&4294967295,v=I+(w<<7&4294967295|w>>>25),w=A+(E^v&(I^E))+C[13]+4254626195&4294967295,A=v+(w<<12&4294967295|w>>>20),w=E+(I^A&(v^I))+C[14]+2792965006&4294967295,E=A+(w<<17&4294967295|w>>>15),w=I+(v^E&(A^v))+C[15]+1236535329&4294967295,I=E+(w<<22&4294967295|w>>>10),w=v+(E^A&(I^E))+C[1]+4129170786&4294967295,v=I+(w<<5&4294967295|w>>>27),w=A+(I^E&(v^I))+C[6]+3225465664&4294967295,A=v+(w<<9&4294967295|w>>>23),w=E+(v^I&(A^v))+C[11]+643717713&4294967295,E=A+(w<<14&4294967295|w>>>18),w=I+(A^v&(E^A))+C[0]+3921069994&4294967295,I=E+(w<<20&4294967295|w>>>12),w=v+(E^A&(I^E))+C[5]+3593408605&4294967295,v=I+(w<<5&4294967295|w>>>27),w=A+(I^E&(v^I))+C[10]+38016083&4294967295,A=v+(w<<9&4294967295|w>>>23),w=E+(v^I&(A^v))+C[15]+3634488961&4294967295,E=A+(w<<14&4294967295|w>>>18),w=I+(A^v&(E^A))+C[4]+3889429448&4294967295,I=E+(w<<20&4294967295|w>>>12),w=v+(E^A&(I^E))+C[9]+568446438&4294967295,v=I+(w<<5&4294967295|w>>>27),w=A+(I^E&(v^I))+C[14]+3275163606&4294967295,A=v+(w<<9&4294967295|w>>>23),w=E+(v^I&(A^v))+C[3]+4107603335&4294967295,E=A+(w<<14&4294967295|w>>>18),w=I+(A^v&(E^A))+C[8]+1163531501&4294967295,I=E+(w<<20&4294967295|w>>>12),w=v+(E^A&(I^E))+C[13]+2850285829&4294967295,v=I+(w<<5&4294967295|w>>>27),w=A+(I^E&(v^I))+C[2]+4243563512&4294967295,A=v+(w<<9&4294967295|w>>>23),w=E+(v^I&(A^v))+C[7]+1735328473&4294967295,E=A+(w<<14&4294967295|w>>>18),w=I+(A^v&(E^A))+C[12]+2368359562&4294967295,I=E+(w<<20&4294967295|w>>>12),w=v+(I^E^A)+C[5]+4294588738&4294967295,v=I+(w<<4&4294967295|w>>>28),w=A+(v^I^E)+C[8]+2272392833&4294967295,A=v+(w<<11&4294967295|w>>>21),w=E+(A^v^I)+C[11]+1839030562&4294967295,E=A+(w<<16&4294967295|w>>>16),w=I+(E^A^v)+C[14]+4259657740&4294967295,I=E+(w<<23&4294967295|w>>>9),w=v+(I^E^A)+C[1]+2763975236&4294967295,v=I+(w<<4&4294967295|w>>>28),w=A+(v^I^E)+C[4]+1272893353&4294967295,A=v+(w<<11&4294967295|w>>>21),w=E+(A^v^I)+C[7]+4139469664&4294967295,E=A+(w<<16&4294967295|w>>>16),w=I+(E^A^v)+C[10]+3200236656&4294967295,I=E+(w<<23&4294967295|w>>>9),w=v+(I^E^A)+C[13]+681279174&4294967295,v=I+(w<<4&4294967295|w>>>28),w=A+(v^I^E)+C[0]+3936430074&4294967295,A=v+(w<<11&4294967295|w>>>21),w=E+(A^v^I)+C[3]+3572445317&4294967295,E=A+(w<<16&4294967295|w>>>16),w=I+(E^A^v)+C[6]+76029189&4294967295,I=E+(w<<23&4294967295|w>>>9),w=v+(I^E^A)+C[9]+3654602809&4294967295,v=I+(w<<4&4294967295|w>>>28),w=A+(v^I^E)+C[12]+3873151461&4294967295,A=v+(w<<11&4294967295|w>>>21),w=E+(A^v^I)+C[15]+530742520&4294967295,E=A+(w<<16&4294967295|w>>>16),w=I+(E^A^v)+C[2]+3299628645&4294967295,I=E+(w<<23&4294967295|w>>>9),w=v+(E^(I|~A))+C[0]+4096336452&4294967295,v=I+(w<<6&4294967295|w>>>26),w=A+(I^(v|~E))+C[7]+1126891415&4294967295,A=v+(w<<10&4294967295|w>>>22),w=E+(v^(A|~I))+C[14]+2878612391&4294967295,E=A+(w<<15&4294967295|w>>>17),w=I+(A^(E|~v))+C[5]+4237533241&4294967295,I=E+(w<<21&4294967295|w>>>11),w=v+(E^(I|~A))+C[12]+1700485571&4294967295,v=I+(w<<6&4294967295|w>>>26),w=A+(I^(v|~E))+C[3]+2399980690&4294967295,A=v+(w<<10&4294967295|w>>>22),w=E+(v^(A|~I))+C[10]+4293915773&4294967295,E=A+(w<<15&4294967295|w>>>17),w=I+(A^(E|~v))+C[1]+2240044497&4294967295,I=E+(w<<21&4294967295|w>>>11),w=v+(E^(I|~A))+C[8]+1873313359&4294967295,v=I+(w<<6&4294967295|w>>>26),w=A+(I^(v|~E))+C[15]+4264355552&4294967295,A=v+(w<<10&4294967295|w>>>22),w=E+(v^(A|~I))+C[6]+2734768916&4294967295,E=A+(w<<15&4294967295|w>>>17),w=I+(A^(E|~v))+C[13]+1309151649&4294967295,I=E+(w<<21&4294967295|w>>>11),w=v+(E^(I|~A))+C[4]+4149444226&4294967295,v=I+(w<<6&4294967295|w>>>26),w=A+(I^(v|~E))+C[11]+3174756917&4294967295,A=v+(w<<10&4294967295|w>>>22),w=E+(v^(A|~I))+C[2]+718787259&4294967295,E=A+(w<<15&4294967295|w>>>17),w=I+(A^(E|~v))+C[9]+3951481745&4294967295,T.g[0]=T.g[0]+v&4294967295,T.g[1]=T.g[1]+(E+(w<<21&4294967295|w>>>11))&4294967295,T.g[2]=T.g[2]+E&4294967295,T.g[3]=T.g[3]+A&4294967295}r.prototype.u=function(T,v){v===void 0&&(v=T.length);for(var I=v-this.blockSize,C=this.B,E=this.h,A=0;A<v;){if(E==0)for(;A<=I;)i(this,T,A),A+=this.blockSize;if(typeof T=="string"){for(;A<v;)if(C[E++]=T.charCodeAt(A++),E==this.blockSize){i(this,C),E=0;break}}else for(;A<v;)if(C[E++]=T[A++],E==this.blockSize){i(this,C),E=0;break}}this.h=E,this.o+=v},r.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var v=1;v<T.length-8;++v)T[v]=0;var I=8*this.o;for(v=T.length-8;v<T.length;++v)T[v]=I&255,I/=256;for(this.u(T),T=Array(16),v=I=0;4>v;++v)for(var C=0;32>C;C+=8)T[I++]=this.g[v]>>>C&255;return T};function s(T,v){var I=a;return Object.prototype.hasOwnProperty.call(I,T)?I[T]:I[T]=v(T)}function o(T,v){this.h=v;for(var I=[],C=!0,E=T.length-1;0<=E;E--){var A=T[E]|0;C&&A==v||(I[E]=A,C=!1)}this.g=I}var a={};function c(T){return-128<=T&&128>T?s(T,function(v){return new o([v|0],0>v?-1:0)}):new o([T|0],0>T?-1:0)}function l(T){if(isNaN(T)||!isFinite(T))return p;if(0>T)return N(l(-T));for(var v=[],I=1,C=0;T>=I;C++)v[C]=T/I|0,I*=4294967296;return new o(v,0)}function h(T,v){if(T.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(T.charAt(0)=="-")return N(h(T.substring(1),v));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=l(Math.pow(v,8)),C=p,E=0;E<T.length;E+=8){var A=Math.min(8,T.length-E),w=parseInt(T.substring(E,E+A),v);8>A?(A=l(Math.pow(v,A)),C=C.j(A).add(l(w))):(C=C.j(I),C=C.add(l(w)))}return C}var p=c(0),m=c(1),b=c(16777216);n=o.prototype,n.m=function(){if(O(this))return-N(this).m();for(var T=0,v=1,I=0;I<this.g.length;I++){var C=this.i(I);T+=(0<=C?C:4294967296+C)*v,v*=4294967296}return T},n.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(k(this))return"0";if(O(this))return"-"+N(this).toString(T);for(var v=l(Math.pow(T,6)),I=this,C="";;){var E=Ee(I,v).g;I=H(I,E.j(v));var A=((0<I.g.length?I.g[0]:I.h)>>>0).toString(T);if(I=E,k(I))return A+C;for(;6>A.length;)A="0"+A;C=A+C}},n.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function k(T){if(T.h!=0)return!1;for(var v=0;v<T.g.length;v++)if(T.g[v]!=0)return!1;return!0}function O(T){return T.h==-1}n.l=function(T){return T=H(this,T),O(T)?-1:k(T)?0:1};function N(T){for(var v=T.g.length,I=[],C=0;C<v;C++)I[C]=~T.g[C];return new o(I,~T.h).add(m)}n.abs=function(){return O(this)?N(this):this},n.add=function(T){for(var v=Math.max(this.g.length,T.g.length),I=[],C=0,E=0;E<=v;E++){var A=C+(this.i(E)&65535)+(T.i(E)&65535),w=(A>>>16)+(this.i(E)>>>16)+(T.i(E)>>>16);C=w>>>16,A&=65535,w&=65535,I[E]=w<<16|A}return new o(I,I[I.length-1]&-2147483648?-1:0)};function H(T,v){return T.add(N(v))}n.j=function(T){if(k(this)||k(T))return p;if(O(this))return O(T)?N(this).j(N(T)):N(N(this).j(T));if(O(T))return N(this.j(N(T)));if(0>this.l(b)&&0>T.l(b))return l(this.m()*T.m());for(var v=this.g.length+T.g.length,I=[],C=0;C<2*v;C++)I[C]=0;for(C=0;C<this.g.length;C++)for(var E=0;E<T.g.length;E++){var A=this.i(C)>>>16,w=this.i(C)&65535,Ct=T.i(E)>>>16,Zn=T.i(E)&65535;I[2*C+2*E]+=w*Zn,Q(I,2*C+2*E),I[2*C+2*E+1]+=A*Zn,Q(I,2*C+2*E+1),I[2*C+2*E+1]+=w*Ct,Q(I,2*C+2*E+1),I[2*C+2*E+2]+=A*Ct,Q(I,2*C+2*E+2)}for(C=0;C<v;C++)I[C]=I[2*C+1]<<16|I[2*C];for(C=v;C<2*v;C++)I[C]=0;return new o(I,0)};function Q(T,v){for(;(T[v]&65535)!=T[v];)T[v+1]+=T[v]>>>16,T[v]&=65535,v++}function Z(T,v){this.g=T,this.h=v}function Ee(T,v){if(k(v))throw Error("division by zero");if(k(T))return new Z(p,p);if(O(T))return v=Ee(N(T),v),new Z(N(v.g),N(v.h));if(O(v))return v=Ee(T,N(v)),new Z(N(v.g),v.h);if(30<T.g.length){if(O(T)||O(v))throw Error("slowDivide_ only works with positive integers.");for(var I=m,C=v;0>=C.l(T);)I=Je(I),C=Je(C);var E=Ie(I,1),A=Ie(C,1);for(C=Ie(C,2),I=Ie(I,2);!k(C);){var w=A.add(C);0>=w.l(T)&&(E=E.add(I),A=w),C=Ie(C,1),I=Ie(I,1)}return v=H(T,E.j(v)),new Z(E,v)}for(E=p;0<=T.l(v);){for(I=Math.max(1,Math.floor(T.m()/v.m())),C=Math.ceil(Math.log(I)/Math.LN2),C=48>=C?1:Math.pow(2,C-48),A=l(I),w=A.j(v);O(w)||0<w.l(T);)I-=C,A=l(I),w=A.j(v);k(A)&&(A=m),E=E.add(A),T=H(T,w)}return new Z(E,T)}n.A=function(T){return Ee(this,T).h},n.and=function(T){for(var v=Math.max(this.g.length,T.g.length),I=[],C=0;C<v;C++)I[C]=this.i(C)&T.i(C);return new o(I,this.h&T.h)},n.or=function(T){for(var v=Math.max(this.g.length,T.g.length),I=[],C=0;C<v;C++)I[C]=this.i(C)|T.i(C);return new o(I,this.h|T.h)},n.xor=function(T){for(var v=Math.max(this.g.length,T.g.length),I=[],C=0;C<v;C++)I[C]=this.i(C)^T.i(C);return new o(I,this.h^T.h)};function Je(T){for(var v=T.g.length+1,I=[],C=0;C<v;C++)I[C]=T.i(C)<<1|T.i(C-1)>>>31;return new o(I,T.h)}function Ie(T,v){var I=v>>5;v%=32;for(var C=T.g.length-I,E=[],A=0;A<C;A++)E[A]=0<v?T.i(A+I)>>>v|T.i(A+I+1)<<32-v:T.i(A+I);return new o(E,T.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,UA=LU.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=h,uo=LU.Integer=o}).apply(typeof VU<"u"?VU:typeof self<"u"?self:typeof window<"u"?window:{});var D0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ho={};var jA,vX,Ld,BA,rg,A0,$A,HA,zA;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,f,y){return u==Array.prototype||u==Object.prototype||(u[f]=y.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof D0=="object"&&D0];for(var f=0;f<u.length;++f){var y=u[f];if(y&&y.Math==Math)return y}throw Error("Cannot find global object")}var r=t(this);function i(u,f){if(f)e:{var y=r;u=u.split(".");for(var S=0;S<u.length-1;S++){var L=u[S];if(!(L in y))break e;y=y[L]}u=u[u.length-1],S=y[u],f=f(S),f!=S&&f!=null&&e(y,u,{configurable:!0,writable:!0,value:f})}}function s(u,f){u instanceof String&&(u+="");var y=0,S=!1,L={next:function(){if(!S&&y<u.length){var j=y++;return{value:f(j,u[j]),done:!1}}return S=!0,{done:!0,value:void 0}}};return L[Symbol.iterator]=function(){return L},L}i("Array.prototype.values",function(u){return u||function(){return s(this,function(f,y){return y})}});var o=o||{},a=this||self;function c(u){var f=typeof u;return f=f!="object"?f:u?Array.isArray(u)?"array":f:"null",f=="array"||f=="object"&&typeof u.length=="number"}function l(u){var f=typeof u;return f=="object"&&u!=null||f=="function"}function h(u,f,y){return u.call.apply(u.bind,arguments)}function p(u,f,y){if(!u)throw Error();if(2<arguments.length){var S=Array.prototype.slice.call(arguments,2);return function(){var L=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(L,S),u.apply(f,L)}}return function(){return u.apply(f,arguments)}}function m(u,f,y){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,m.apply(null,arguments)}function b(u,f){var y=Array.prototype.slice.call(arguments,1);return function(){var S=y.slice();return S.push.apply(S,arguments),u.apply(this,S)}}function k(u,f){function y(){}y.prototype=f.prototype,u.aa=f.prototype,u.prototype=new y,u.prototype.constructor=u,u.Qb=function(S,L,j){for(var K=Array(arguments.length-2),et=2;et<arguments.length;et++)K[et-2]=arguments[et];return f.prototype[L].apply(S,K)}}function O(u){let f=u.length;if(0<f){let y=Array(f);for(let S=0;S<f;S++)y[S]=u[S];return y}return[]}function N(u,f){for(let y=1;y<arguments.length;y++){let S=arguments[y];if(c(S)){let L=u.length||0,j=S.length||0;u.length=L+j;for(let K=0;K<j;K++)u[L+K]=S[K]}else u.push(S)}}class H{constructor(f,y){this.i=f,this.j=y,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function Q(u){return/^[\s\xa0]*$/.test(u)}function Z(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function Ee(u){return Ee[" "](u),u}Ee[" "]=function(){};var Je=Z().indexOf("Gecko")!=-1&&!(Z().toLowerCase().indexOf("webkit")!=-1&&Z().indexOf("Edge")==-1)&&!(Z().indexOf("Trident")!=-1||Z().indexOf("MSIE")!=-1)&&Z().indexOf("Edge")==-1;function Ie(u,f,y){for(let S in u)f.call(y,u[S],S,u)}function T(u,f){for(let y in u)f.call(void 0,u[y],y,u)}function v(u){let f={};for(let y in u)f[y]=u[y];return f}let I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function C(u,f){let y,S;for(let L=1;L<arguments.length;L++){S=arguments[L];for(y in S)u[y]=S[y];for(let j=0;j<I.length;j++)y=I[j],Object.prototype.hasOwnProperty.call(S,y)&&(u[y]=S[y])}}function E(u){var f=1;u=u.split(":");let y=[];for(;0<f&&u.length;)y.push(u.shift()),f--;return u.length&&y.push(u.join(":")),y}function A(u){a.setTimeout(()=>{throw u},0)}function w(){var u=bo;let f=null;return u.g&&(f=u.g,u.g=u.g.next,u.g||(u.h=null),f.next=null),f}class Ct{constructor(){this.h=this.g=null}add(f,y){let S=Zn.get();S.set(f,y),this.h?this.h.next=S:this.g=S,this.h=S}}var Zn=new H(()=>new iI,u=>u.reset());class iI{constructor(){this.next=this.g=this.h=null}set(f,y){this.h=f,this.g=y,this.next=null}reset(){this.next=this.g=this.h=null}}let Ya,Mi=!1,bo=new Ct,jg=()=>{let u=a.Promise.resolve(void 0);Ya=()=>{u.then(Bg)}};var Bg=()=>{for(var u;u=w();){try{u.h.call(u.g)}catch(y){A(y)}var f=Zn;f.j(u),100>f.h&&(f.h++,u.next=f.g,f.g=u)}Mi=!1};function ei(){this.s=this.s,this.C=this.C}ei.prototype.s=!1,ei.prototype.ma=function(){this.s||(this.s=!0,this.N())},ei.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function an(u,f){this.type=u,this.g=this.target=f,this.defaultPrevented=!1}an.prototype.h=function(){this.defaultPrevented=!0};var Vl=(function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,f=Object.defineProperty({},"passive",{get:function(){u=!0}});try{let y=()=>{};a.addEventListener("test",y,f),a.removeEventListener("test",y,f)}catch{}return u})();function Is(u,f){if(an.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var y=this.type=u.type,S=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=f,f=u.relatedTarget){if(Je){e:{try{Ee(f.nodeName);var L=!0;break e}catch{}L=!1}L||(f=null)}}else y=="mouseover"?f=u.fromElement:y=="mouseout"&&(f=u.toElement);this.relatedTarget=f,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:vh[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Is.aa.h.call(this)}}k(Is,an);var vh={2:"touch",3:"pen",4:"mouse"};Is.prototype.h=function(){Is.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var bs="closure_listenable_"+(1e6*Math.random()|0),wh=0;function $g(u,f,y,S,L){this.listener=u,this.proxy=null,this.src=f,this.type=y,this.capture=!!S,this.ha=L,this.key=++wh,this.da=this.fa=!1}function Ja(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Ll(u){this.src=u,this.g={},this.h=0}Ll.prototype.add=function(u,f,y,S,L){var j=u.toString();u=this.g[j],u||(u=this.g[j]=[],this.h++);var K=jl(u,f,S,L);return-1<K?(f=u[K],y||(f.fa=!1)):(f=new $g(f,this.src,j,!!S,L),f.fa=y,u.push(f)),f};function Ul(u,f){var y=f.type;if(y in u.g){var S=u.g[y],L=Array.prototype.indexOf.call(S,f,void 0),j;(j=0<=L)&&Array.prototype.splice.call(S,L,1),j&&(Ja(f),u.g[y].length==0&&(delete u.g[y],u.h--))}}function jl(u,f,y,S){for(var L=0;L<u.length;++L){var j=u[L];if(!j.da&&j.listener==f&&j.capture==!!y&&j.ha==S)return L}return-1}var Xa="closure_lm_"+(1e6*Math.random()|0),Bl={};function Hg(u,f,y,S,L){if(S&&S.once)return Hl(u,f,y,S,L);if(Array.isArray(f)){for(var j=0;j<f.length;j++)Hg(u,f[j],y,S,L);return null}return y=Es(y),u&&u[bs]?u.K(f,y,l(S)?!!S.capture:!!S,L):$l(u,f,y,!1,S,L)}function $l(u,f,y,S,L,j){if(!f)throw Error("Invalid event type");var K=l(L)?!!L.capture:!!L,et=zl(u);if(et||(u[Xa]=et=new Ll(u)),y=et.add(f,y,S,K,j),y.proxy)return y;if(S=Ih(),y.proxy=S,S.src=u,S.listener=y,u.addEventListener)Vl||(L=K),L===void 0&&(L=!1),u.addEventListener(f.toString(),S,L);else if(u.attachEvent)u.attachEvent(Za(f.toString()),S);else if(u.addListener&&u.removeListener)u.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return y}function Ih(){function u(y){return f.call(u.src,u.listener,y)}let f=sI;return u}function Hl(u,f,y,S,L){if(Array.isArray(f)){for(var j=0;j<f.length;j++)Hl(u,f[j],y,S,L);return null}return y=Es(y),u&&u[bs]?u.L(f,y,l(S)?!!S.capture:!!S,L):$l(u,f,y,!0,S,L)}function cn(u,f,y,S,L){if(Array.isArray(f))for(var j=0;j<f.length;j++)cn(u,f[j],y,S,L);else S=l(S)?!!S.capture:!!S,y=Es(y),u&&u[bs]?(u=u.i,f=String(f).toString(),f in u.g&&(j=u.g[f],y=jl(j,y,S,L),-1<y&&(Ja(j[y]),Array.prototype.splice.call(j,y,1),j.length==0&&(delete u.g[f],u.h--)))):u&&(u=zl(u))&&(f=u.g[f.toString()],u=-1,f&&(u=jl(f,y,S,L)),(y=-1<u?f[u]:null)&&ln(y))}function ln(u){if(typeof u!="number"&&u&&!u.da){var f=u.src;if(f&&f[bs])Ul(f.i,u);else{var y=u.type,S=u.proxy;f.removeEventListener?f.removeEventListener(y,S,u.capture):f.detachEvent?f.detachEvent(Za(y),S):f.addListener&&f.removeListener&&f.removeListener(S),(y=zl(f))?(Ul(y,u),y.h==0&&(y.src=null,f[Xa]=null)):Ja(u)}}}function Za(u){return u in Bl?Bl[u]:Bl[u]="on"+u}function sI(u,f){if(u.da)u=!0;else{f=new Is(f,this);var y=u.listener,S=u.ha||u.src;u.fa&&ln(u),u=y.call(S,f)}return u}function zl(u){return u=u[Xa],u instanceof Ll?u:null}var bh="__closure_events_fn_"+(1e9*Math.random()>>>0);function Es(u){return typeof u=="function"?u:(u[bh]||(u[bh]=function(f){return u.handleEvent(f)}),u[bh])}function un(){ei.call(this),this.i=new Ll(this),this.M=this,this.F=null}k(un,ei),un.prototype[bs]=!0,un.prototype.removeEventListener=function(u,f,y,S){cn(this,u,f,y,S)};function yn(u,f){var y,S=u.F;if(S)for(y=[];S;S=S.F)y.push(S);if(u=u.M,S=f.type||f,typeof f=="string")f=new an(f,u);else if(f instanceof an)f.target=f.target||u;else{var L=f;f=new an(S,u),C(f,L)}if(L=!0,y)for(var j=y.length-1;0<=j;j--){var K=f.g=y[j];L=Eo(K,S,!0,f)&&L}if(K=f.g=u,L=Eo(K,S,!0,f)&&L,L=Eo(K,S,!1,f)&&L,y)for(j=0;j<y.length;j++)K=f.g=y[j],L=Eo(K,S,!1,f)&&L}un.prototype.N=function(){if(un.aa.N.call(this),this.i){var u=this.i,f;for(f in u.g){for(var y=u.g[f],S=0;S<y.length;S++)Ja(y[S]);delete u.g[f],u.h--}}this.F=null},un.prototype.K=function(u,f,y,S){return this.i.add(String(u),f,!1,y,S)},un.prototype.L=function(u,f,y,S){return this.i.add(String(u),f,!0,y,S)};function Eo(u,f,y,S){if(f=u.i.g[String(f)],!f)return!0;f=f.concat();for(var L=!0,j=0;j<f.length;++j){var K=f[j];if(K&&!K.da&&K.capture==y){var et=K.listener,Ut=K.ha||K.src;K.fa&&Ul(u.i,K),L=et.call(Ut,S)!==!1&&L}}return L&&!S.defaultPrevented}function zg(u,f,y){if(typeof u=="function")y&&(u=m(u,y));else if(u&&typeof u.handleEvent=="function")u=m(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:a.setTimeout(u,f||0)}function qg(u){u.g=zg(()=>{u.g=null,u.i&&(u.i=!1,qg(u))},u.l);let f=u.h;u.h=null,u.m.apply(null,f)}class Gg extends ei{constructor(f,y){super(),this.m=f,this.l=y,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:qg(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Co(u){ei.call(this),this.h=u,this.g={}}k(Co,ei);var To=[];function ql(u){Ie(u.g,function(f,y){this.g.hasOwnProperty(y)&&ln(f)},u),u.g={}}Co.prototype.N=function(){Co.aa.N.call(this),ql(this)},Co.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ec=a.JSON.stringify,Cs=a.JSON.parse,Wg=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function So(){}So.prototype.h=null;function Eh(u){return u.h||(u.h=u.i())}function Do(){}var Ao={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function dn(){an.call(this,"d")}k(dn,an);function Gl(){an.call(this,"c")}k(Gl,an);var ur={},xo=null;function Wl(){return xo=xo||new un}ur.La="serverreachability";function Kg(u){an.call(this,ur.La,u)}k(Kg,an);function Nr(u){let f=Wl();yn(f,new Kg(f))}ur.STAT_EVENT="statevent";function Qg(u,f){an.call(this,ur.STAT_EVENT,u),this.stat=f}k(Qg,an);function Rn(u){let f=Wl();yn(f,new Qg(f,u))}ur.Ma="timingevent";function tc(u,f){an.call(this,ur.Ma,u),this.size=f}k(tc,an);function Ro(u,f){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},f)}function ko(){this.g=!0}ko.prototype.xa=function(){this.g=!1};function Ch(u,f,y,S,L,j){u.info(function(){if(u.g)if(j)for(var K="",et=j.split("&"),Ut=0;Ut<et.length;Ut++){var tt=et[Ut].split("=");if(1<tt.length){var Pn=tt[0];tt=tt[1];var Mn=Pn.split("_");K=2<=Mn.length&&Mn[1]=="type"?K+(Pn+"="+tt+"&"):K+(Pn+"=redacted&")}}else K=null;else K=j;return"XMLHTTP REQ ("+S+") [attempt "+L+"]: "+f+`
`+y+`
`+K})}function nc(u,f,y,S,L,j,K){u.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+L+"]: "+f+`
`+y+`
`+j+" "+K})}function No(u,f,y,S){u.info(function(){return"XMLHTTP TEXT ("+f+"): "+Yg(u,y)+(S?" "+S:"")})}function Oi(u,f){u.info(function(){return"TIMEOUT: "+f})}ko.prototype.info=function(){};function Yg(u,f){if(!u.g)return f;if(!f)return null;try{var y=JSON.parse(f);if(y){for(u=0;u<y.length;u++)if(Array.isArray(y[u])){var S=y[u];if(!(2>S.length)){var L=S[1];if(Array.isArray(L)&&!(1>L.length)){var j=L[0];if(j!="noop"&&j!="stop"&&j!="close")for(var K=1;K<L.length;K++)L[K]=""}}}}return ec(y)}catch{return f}}var rc={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Kl={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ic;function sc(){}k(sc,So),sc.prototype.g=function(){return new XMLHttpRequest},sc.prototype.i=function(){return{}},ic=new sc;function Fi(u,f,y,S){this.j=u,this.i=f,this.l=y,this.R=S||1,this.U=new Co(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Th}function Th(){this.i=null,this.g="",this.h=!1}var Jg={},Po={};function Ql(u,f,y){u.L=1,u.v=Zl(ti(f)),u.m=y,u.P=!0,Yl(u,null)}function Yl(u,f){u.F=Date.now(),Oo(u),u.A=ti(u.v);var y=u.A,S=u.R;Array.isArray(S)||(S=[String(S)]),sm(y.i,"t",S),u.C=0,y=u.j.J,u.h=new Th,u.g=g(u.j,y?f:null,!u.m),0<u.O&&(u.M=new Gg(m(u.Y,u,u.g),u.O)),f=u.U,y=u.g,S=u.ca;var L="readystatechange";Array.isArray(L)||(L&&(To[0]=L.toString()),L=To);for(var j=0;j<L.length;j++){var K=Hg(y,L[j],S||f.handleEvent,!1,f.h||f);if(!K)break;f.g[K.key]=K}f=u.H?v(u.H):{},u.m?(u.u||(u.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,f)):(u.u="GET",u.g.ea(u.A,u.u,null,f)),Nr(),Ch(u.i,u.u,u.A,u.l,u.R,u.m)}Fi.prototype.ca=function(u){u=u.target;let f=this.M;f&&tr(u)==3?f.j():this.Y(u)},Fi.prototype.Y=function(u){try{if(u==this.g)e:{let Mn=tr(this.g);var f=this.g.Ba();let cu=this.g.Z();if(!(3>Mn)&&(Mn!=3||this.g&&(this.h.h||this.g.oa()||um(this.g)))){this.J||Mn!=4||f==7||(f==8||0>=cu?Nr(3):Nr(2)),Jl(this);var y=this.g.Z();this.X=y;t:if(Mo(this)){var S=um(this.g);u="";var L=S.length,j=tr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Vi(this),Fo(this);var K="";break t}this.h.i=new a.TextDecoder}for(f=0;f<L;f++)this.h.h=!0,u+=this.h.i.decode(S[f],{stream:!(j&&f==L-1)});S.length=0,this.h.g+=u,this.C=0,K=this.h.g}else K=this.g.oa();if(this.o=y==200,nc(this.i,this.u,this.A,this.l,this.R,Mn,y),this.o){if(this.T&&!this.K){t:{if(this.g){var et,Ut=this.g;if((et=Ut.g?Ut.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Q(et)){var tt=et;break t}}tt=null}if(y=tt)No(this.i,this.l,y,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,oc(this,y);else{this.o=!1,this.s=3,Rn(12),Vi(this),Fo(this);break e}}if(this.P){y=!0;let oi;for(;!this.J&&this.C<K.length;)if(oi=Ts(this,K),oi==Po){Mn==4&&(this.s=4,Rn(14),y=!1),No(this.i,this.l,null,"[Incomplete Response]");break}else if(oi==Jg){this.s=4,Rn(15),No(this.i,this.l,K,"[Invalid Chunk]"),y=!1;break}else No(this.i,this.l,oi,null),oc(this,oi);if(Mo(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Mn!=4||K.length!=0||this.h.h||(this.s=1,Rn(16),y=!1),this.o=this.o&&y,!y)No(this.i,this.l,K,"[Invalid Chunked Response]"),Vi(this),Fo(this);else if(0<K.length&&!this.W){this.W=!0;var Pn=this.j;Pn.g==this&&Pn.ba&&!Pn.M&&(Pn.j.info("Great, no buffering proxy detected. Bytes received: "+K.length),au(Pn),Pn.M=!0,Rn(11))}}else No(this.i,this.l,K,null),oc(this,K);Mn==4&&Vi(this),this.o&&!this.J&&(Mn==4?Nn(this.j,this):(this.o=!1,Oo(this)))}else dm(this.g),y==400&&0<K.indexOf("Unknown SID")?(this.s=3,Rn(12)):(this.s=0,Rn(13)),Vi(this),Fo(this)}}}catch{}finally{}};function Mo(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function Ts(u,f){var y=u.C,S=f.indexOf(`
`,y);return S==-1?Po:(y=Number(f.substring(y,S)),isNaN(y)?Jg:(S+=1,S+y>f.length?Po:(f=f.slice(S,S+y),u.C=S+y,f)))}Fi.prototype.cancel=function(){this.J=!0,Vi(this)};function Oo(u){u.S=Date.now()+u.I,Xg(u,u.I)}function Xg(u,f){if(u.B!=null)throw Error("WatchDog timer not null");u.B=Ro(m(u.ba,u),f)}function Jl(u){u.B&&(a.clearTimeout(u.B),u.B=null)}Fi.prototype.ba=function(){this.B=null;let u=Date.now();0<=u-this.S?(Oi(this.i,this.A),this.L!=2&&(Nr(),Rn(17)),Vi(this),this.s=2,Fo(this)):Xg(this,this.S-u)};function Fo(u){u.j.G==0||u.J||Nn(u.j,u)}function Vi(u){Jl(u);var f=u.M;f&&typeof f.ma=="function"&&f.ma(),u.M=null,ql(u.U),u.g&&(f=u.g,u.g=null,f.abort(),f.ma())}function oc(u,f){try{var y=u.j;if(y.G!=0&&(y.g==u||Rh(y.h,u))){if(!u.K&&Rh(y.h,u)&&y.G==3){try{var S=y.Da.g.parse(f)}catch{S=null}if(Array.isArray(S)&&S.length==3){var L=S;if(L[0]==0){e:if(!y.u){if(y.g)if(y.g.F+3e3<u.F)Ds(y),Ho(y);else break e;ou(y),Rn(18)}}else y.za=L[1],0<y.za-y.T&&37500>L[2]&&y.F&&y.v==0&&!y.C&&(y.C=Ro(m(y.Za,y),6e3));if(1>=xh(y.h)&&y.ca){try{y.ca()}catch{}y.ca=void 0}}else ji(y,11)}else if((u.K||y.g==u)&&Ds(y),!Q(f))for(L=y.Da.g.parse(f),f=0;f<L.length;f++){let tt=L[f];if(y.T=tt[0],tt=tt[1],y.G==2)if(tt[0]=="c"){y.K=tt[1],y.ia=tt[2];let Pn=tt[3];Pn!=null&&(y.la=Pn,y.j.info("VER="+y.la));let Mn=tt[4];Mn!=null&&(y.Aa=Mn,y.j.info("SVER="+y.Aa));let cu=tt[5];cu!=null&&typeof cu=="number"&&0<cu&&(S=1.5*cu,y.L=S,y.j.info("backChannelRequestTimeoutMs_="+S)),S=y;let oi=u.g;if(oi){let hm=oi.g?oi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(hm){var j=S.h;j.g||hm.indexOf("spdy")==-1&&hm.indexOf("quic")==-1&&hm.indexOf("h2")==-1||(j.j=j.l,j.g=new Set,j.h&&(Pr(j,j.h),j.h=null))}if(S.D){let aI=oi.g?oi.g.getResponseHeader("X-HTTP-Session-Id"):null;aI&&(S.ya=aI,_t(S.I,S.D,aI))}}y.G=3,y.l&&y.l.ua(),y.ba&&(y.R=Date.now()-u.F,y.j.info("Handshake RTT: "+y.R+"ms")),S=y;var K=u;if(S.qa=d(S,S.J?S.ia:null,S.W),K.K){dr(S.h,K);var et=K,Ut=S.L;Ut&&(et.I=Ut),et.B&&(Jl(et),Oo(et)),S.g=K}else Uh(S);0<y.i.length&&fc(y)}else tt[0]!="stop"&&tt[0]!="close"||ji(y,7);else y.G==3&&(tt[0]=="stop"||tt[0]=="close"?tt[0]=="stop"?ji(y,7):ru(y):tt[0]!="noop"&&y.l&&y.l.ta(tt),y.v=0)}}Nr(4)}catch{}}var Sh=class{constructor(u,f){this.g=u,this.map=f}};function Dh(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ah(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function xh(u){return u.h?1:u.g?u.g.size:0}function Rh(u,f){return u.h?u.h==f:u.g?u.g.has(f):!1}function Pr(u,f){u.g?u.g.add(f):u.h=f}function dr(u,f){u.h&&u.h==f?u.h=null:u.g&&u.g.has(f)&&u.g.delete(f)}Dh.prototype.cancel=function(){if(this.i=Vo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let u of this.g.values())u.cancel();this.g.clear()}};function Vo(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let f=u.i;for(let y of u.g.values())f=f.concat(y.D);return f}return O(u.i)}function ac(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(c(u)){for(var f=[],y=u.length,S=0;S<y;S++)f.push(u[S]);return f}f=[],y=0;for(S in u)f[y++]=u[S];return f}function kh(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(c(u)||typeof u=="string"){var f=[];u=u.length;for(var y=0;y<u;y++)f.push(y);return f}f=[],y=0;for(let S in u)f[y++]=S;return f}}}function pt(u,f){if(u.forEach&&typeof u.forEach=="function")u.forEach(f,void 0);else if(c(u)||typeof u=="string")Array.prototype.forEach.call(u,f,void 0);else for(var y=kh(u),S=ac(u),L=S.length,j=0;j<L;j++)f.call(void 0,S[j],y&&y[j],u)}var cc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function lc(u,f){if(u){u=u.split("&");for(var y=0;y<u.length;y++){var S=u[y].indexOf("="),L=null;if(0<=S){var j=u[y].substring(0,S);L=u[y].substring(S+1)}else j=u[y];f(j,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function hr(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof hr){this.h=u.h,uc(this,u.j),this.o=u.o,this.g=u.g,Xl(this,u.s),this.l=u.l;var f=u.i,y=new dc;y.i=f.i,f.g&&(y.g=new Map(f.g),y.h=f.h),Zg(this,y),this.m=u.m}else u&&(f=String(u).match(cc))?(this.h=!1,uc(this,f[1]||"",!0),this.o=ni(f[2]||""),this.g=ni(f[3]||"",!0),Xl(this,f[4]),this.l=ni(f[5]||"",!0),Zg(this,f[6]||"",!0),this.m=ni(f[7]||"")):(this.h=!1,this.i=new dc(null,this.h))}hr.prototype.toString=function(){var u=[],f=this.j;f&&u.push(fr(f,Nh,!0),":");var y=this.g;return(y||f=="file")&&(u.push("//"),(f=this.o)&&u.push(fr(f,Nh,!0),"@"),u.push(encodeURIComponent(String(y)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y=this.s,y!=null&&u.push(":",String(y))),(y=this.l)&&(this.g&&y.charAt(0)!="/"&&u.push("/"),u.push(fr(y,y.charAt(0)=="/"?nm:tm,!0))),(y=this.i.toString())&&u.push("?",y),(y=this.m)&&u.push("#",fr(y,Lo)),u.join("")};function ti(u){return new hr(u)}function uc(u,f,y){u.j=y?ni(f,!0):f,u.j&&(u.j=u.j.replace(/:$/,""))}function Xl(u,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);u.s=f}else u.s=null}function Zg(u,f,y){f instanceof dc?(u.i=f,eu(u.i,u.h)):(y||(f=fr(f,rm)),u.i=new dc(f,u.h))}function _t(u,f,y){u.i.set(f,y)}function Zl(u){return _t(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function ni(u,f){return u?f?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function fr(u,f,y){return typeof u=="string"?(u=encodeURI(u).replace(f,em),y&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function em(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Nh=/[#\/\?@]/g,tm=/[#\?:]/g,nm=/[#\?]/g,rm=/[#\?@]/g,Lo=/#/g;function dc(u,f){this.h=this.g=null,this.i=u||null,this.j=!!f}function Li(u){u.g||(u.g=new Map,u.h=0,u.i&&lc(u.i,function(f,y){u.add(decodeURIComponent(f.replace(/\+/g," ")),y)}))}n=dc.prototype,n.add=function(u,f){Li(this),this.i=null,u=ii(this,u);var y=this.g.get(u);return y||this.g.set(u,y=[]),y.push(f),this.h+=1,this};function im(u,f){Li(u),f=ii(u,f),u.g.has(f)&&(u.i=null,u.h-=u.g.get(f).length,u.g.delete(f))}function ri(u,f){return Li(u),f=ii(u,f),u.g.has(f)}n.forEach=function(u,f){Li(this),this.g.forEach(function(y,S){y.forEach(function(L){u.call(f,L,S,this)},this)},this)},n.na=function(){Li(this);let u=Array.from(this.g.values()),f=Array.from(this.g.keys()),y=[];for(let S=0;S<f.length;S++){let L=u[S];for(let j=0;j<L.length;j++)y.push(f[S])}return y},n.V=function(u){Li(this);let f=[];if(typeof u=="string")ri(this,u)&&(f=f.concat(this.g.get(ii(this,u))));else{u=Array.from(this.g.values());for(let y=0;y<u.length;y++)f=f.concat(u[y])}return f},n.set=function(u,f){return Li(this),this.i=null,u=ii(this,u),ri(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[f]),this.h+=1,this},n.get=function(u,f){return u?(u=this.V(u),0<u.length?String(u[0]):f):f};function sm(u,f,y){im(u,f),0<y.length&&(u.i=null,u.g.set(ii(u,f),O(y)),u.h+=y.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let u=[],f=Array.from(this.g.keys());for(var y=0;y<f.length;y++){var S=f[y];let j=encodeURIComponent(String(S)),K=this.V(S);for(S=0;S<K.length;S++){var L=j;K[S]!==""&&(L+="="+encodeURIComponent(String(K[S]))),u.push(L)}}return this.i=u.join("&")};function ii(u,f){return f=String(f),u.j&&(f=f.toLowerCase()),f}function eu(u,f){f&&!u.j&&(Li(u),u.i=null,u.g.forEach(function(y,S){var L=S.toLowerCase();S!=L&&(im(this,S),sm(this,L,y))},u)),u.j=f}function om(u,f){let y=new ko;if(a.Image){let S=new Image;S.onload=b(er,y,"TestLoadImage: loaded",!0,f,S),S.onerror=b(er,y,"TestLoadImage: error",!1,f,S),S.onabort=b(er,y,"TestLoadImage: abort",!1,f,S),S.ontimeout=b(er,y,"TestLoadImage: timeout",!1,f,S),a.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=u}else f(!1)}function hc(u,f){let y=new ko,S=new AbortController,L=setTimeout(()=>{S.abort(),er(y,"TestPingServer: timeout",!1,f)},1e4);fetch(u,{signal:S.signal}).then(j=>{clearTimeout(L),j.ok?er(y,"TestPingServer: ok",!0,f):er(y,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(L),er(y,"TestPingServer: error",!1,f)})}function er(u,f,y,S,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),S(y)}catch{}}function am(){this.g=new Wg}function Ph(u,f,y){let S=y||"";try{pt(u,function(L,j){let K=L;l(L)&&(K=ec(L)),f.push(S+j+"="+encodeURIComponent(K))})}catch(L){throw f.push(S+"type="+encodeURIComponent("_badmap")),L}}function gt(u){this.l=u.Ub||null,this.j=u.eb||!1}k(gt,So),gt.prototype.g=function(){return new tu(this.l,this.j)},gt.prototype.i=(function(u){return function(){return u}})({});function tu(u,f){un.call(this),this.D=u,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}k(tu,un),n=tu.prototype,n.open=function(u,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=f,this.readyState=1,jo(this)},n.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(f.body=u),(this.D||a).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Uo(this)),this.readyState=0},n.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,jo(this)),this.g&&(this.readyState=3,jo(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;cm(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function cm(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}n.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var f=u.value?u.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!u.done}))&&(this.response=this.responseText+=f)}u.done?Uo(this):jo(this),this.readyState==3&&cm(this)}},n.Ra=function(u){this.g&&(this.response=this.responseText=u,Uo(this))},n.Qa=function(u){this.g&&(this.response=u,Uo(this))},n.ga=function(){this.g&&Uo(this)};function Uo(u){u.readyState=4,u.l=null,u.j=null,u.v=null,jo(u)}n.setRequestHeader=function(u,f){this.u.append(u,f)},n.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let u=[],f=this.h.entries();for(var y=f.next();!y.done;)y=y.value,u.push(y[0]+": "+y[1]),y=f.next();return u.join(`\r
`)};function jo(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(tu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Mh(u){let f="";return Ie(u,function(y,S){f+=S,f+=":",f+=y,f+=`\r
`}),f}function Bo(u,f,y){e:{for(S in y){var S=!1;break e}S=!0}S||(y=Mh(y),typeof u=="string"?y!=null&&encodeURIComponent(String(y)):_t(u,f,y))}function rt(u){un.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}k(rt,un);var lm=/^https?$/i,oI=["POST","PUT"];n=rt.prototype,n.Ha=function(u){this.J=u},n.ea=function(u,f,y,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);f=f?f.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ic.g(),this.v=this.o?Eh(this.o):Eh(ic),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(f,String(u),!0),this.B=!1}catch(j){$o(this,j);return}if(u=y||"",y=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var L in S)y.set(L,S[L]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(let j of S.keys())y.set(j,S.get(j));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(y.keys()).find(j=>j.toLowerCase()=="content-type"),L=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(oI,f,void 0))||S||L||y.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[j,K]of y)this.g.setRequestHeader(j,K);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Fh(this),this.u=!0,this.g.send(u),this.u=!1}catch(j){$o(this,j)}};function $o(u,f){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=f,u.m=5,Oh(u),Ss(u)}function Oh(u){u.A||(u.A=!0,yn(u,"complete"),yn(u,"error"))}n.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,yn(this,"complete"),yn(this,"abort"),Ss(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ss(this,!0)),rt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?nu(this):this.bb())},n.bb=function(){nu(this)};function nu(u){if(u.h&&typeof o<"u"&&(!u.v[1]||tr(u)!=4||u.Z()!=2)){if(u.u&&tr(u)==4)zg(u.Ea,0,u);else if(yn(u,"readystatechange"),tr(u)==4){u.h=!1;try{let K=u.Z();e:switch(K){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var y;if(!(y=f)){var S;if(S=K===0){var L=String(u.D).match(cc)[1]||null;!L&&a.self&&a.self.location&&(L=a.self.location.protocol.slice(0,-1)),S=!lm.test(L?L.toLowerCase():"")}y=S}if(y)yn(u,"complete"),yn(u,"success");else{u.m=6;try{var j=2<tr(u)?u.g.statusText:""}catch{j=""}u.l=j+" ["+u.Z()+"]",Oh(u)}}finally{Ss(u)}}}}function Ss(u,f){if(u.g){Fh(u);let y=u.g,S=u.v[0]?()=>{}:null;u.g=null,u.v=null,f||yn(u,"ready");try{y.onreadystatechange=S}catch{}}}function Fh(u){u.I&&(a.clearTimeout(u.I),u.I=null)}n.isActive=function(){return!!this.g};function tr(u){return u.g?u.g.readyState:0}n.Z=function(){try{return 2<tr(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(u){if(this.g){var f=this.g.responseText;return u&&f.indexOf(u)==0&&(f=f.substring(u.length)),Cs(f)}};function um(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function dm(u){let f={};u=(u.g&&2<=tr(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<u.length;S++){if(Q(u[S]))continue;var y=E(u[S]);let L=y[0];if(y=y[1],typeof y!="string")continue;y=y.trim();let j=f[L]||[];f[L]=j,j.push(y)}T(f,function(S){return S.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function si(u,f,y){return y&&y.internalChannelParams&&y.internalChannelParams[u]||f}function Vh(u){this.Aa=0,this.i=[],this.j=new ko,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=si("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=si("baseRetryDelayMs",5e3,u),this.cb=si("retryDelaySeedMs",1e4,u),this.Wa=si("forwardChannelMaxRetries",2,u),this.wa=si("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new Dh(u&&u.concurrentRequestLimit),this.Da=new am,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Vh.prototype,n.la=8,n.G=1,n.connect=function(u,f,y,S){Rn(0),this.W=u,this.H=f||{},y&&S!==void 0&&(this.H.OSID=y,this.H.OAID=S),this.F=this.X,this.I=d(this,null,this.W),fc(this)};function ru(u){if(iu(u),u.G==3){var f=u.U++,y=ti(u.I);if(_t(y,"SID",u.K),_t(y,"RID",f),_t(y,"TYPE","terminate"),zo(u,y),f=new Fi(u,u.j,f),f.L=2,f.v=Zl(ti(y)),y=!1,a.navigator&&a.navigator.sendBeacon)try{y=a.navigator.sendBeacon(f.v.toString(),"")}catch{}!y&&a.Image&&(new Image().src=f.v,y=!0),y||(f.g=g(f.j,null),f.g.ea(f.v)),f.F=Date.now(),Oo(f)}As(u)}function Ho(u){u.g&&(au(u),u.g.cancel(),u.g=null)}function iu(u){Ho(u),u.u&&(a.clearTimeout(u.u),u.u=null),Ds(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function fc(u){if(!Ah(u.h)&&!u.s){u.s=!0;var f=u.Ga;Ya||jg(),Mi||(Ya(),Mi=!0),bo.add(f,u),u.B=0}}function su(u,f){return xh(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=f.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=Ro(m(u.Ga,u,f),Bh(u,u.B)),u.B++,!0)}n.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;let L=new Fi(this,this.j,u),j=this.o;if(this.S&&(j?(j=v(j),C(j,this.S)):j=this.S),this.m!==null||this.O||(L.H=j,j=null),this.P)e:{for(var f=0,y=0;y<this.i.length;y++){t:{var S=this.i[y];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(f+=S,4096<f){f=y;break e}if(f===4096||y===this.i.length-1){f=y+1;break e}}f=1e3}else f=1e3;f=Ui(this,L,f),y=ti(this.I),_t(y,"RID",u),_t(y,"CVER",22),this.D&&_t(y,"X-HTTP-Session-Id",this.D),zo(this,y),j&&(this.O?f="headers="+encodeURIComponent(String(Mh(j)))+"&"+f:this.m&&Bo(y,this.m,j)),Pr(this.h,L),this.Ua&&_t(y,"TYPE","init"),this.P?(_t(y,"$req",f),_t(y,"SID","null"),L.T=!0,Ql(L,y,null)):Ql(L,y,f),this.G=2}}else this.G==3&&(u?Lh(this,u):this.i.length==0||Ah(this.h)||Lh(this))};function Lh(u,f){var y;f?y=f.l:y=u.U++;let S=ti(u.I);_t(S,"SID",u.K),_t(S,"RID",y),_t(S,"AID",u.T),zo(u,S),u.m&&u.o&&Bo(S,u.m,u.o),y=new Fi(u,u.j,y,u.B+1),u.m===null&&(y.H=u.o),f&&(u.i=f.D.concat(u.i)),f=Ui(u,y,1e3),y.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),Pr(u.h,y),Ql(y,S,f)}function zo(u,f){u.H&&Ie(u.H,function(y,S){_t(f,S,y)}),u.l&&pt({},function(y,S){_t(f,S,y)})}function Ui(u,f,y){y=Math.min(u.i.length,y);var S=u.l?m(u.l.Na,u.l,u):null;e:{var L=u.i;let j=-1;for(;;){let K=["count="+y];j==-1?0<y?(j=L[0].g,K.push("ofs="+j)):j=0:K.push("ofs="+j);let et=!0;for(let Ut=0;Ut<y;Ut++){let tt=L[Ut].g,Pn=L[Ut].map;if(tt-=j,0>tt)j=Math.max(0,L[Ut].g-100),et=!1;else try{Ph(Pn,K,"req"+tt+"_")}catch{S&&S(Pn)}}if(et){S=K.join("&");break e}}}return u=u.i.splice(0,y),f.D=u,S}function Uh(u){if(!u.g&&!u.u){u.Y=1;var f=u.Fa;Ya||jg(),Mi||(Ya(),Mi=!0),bo.add(f,u),u.v=0}}function ou(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=Ro(m(u.Fa,u),Bh(u,u.v)),u.v++,!0)}n.Fa=function(){if(this.u=null,jh(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=Ro(m(this.ab,this),u)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Rn(10),Ho(this),jh(this))};function au(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function jh(u){u.g=new Fi(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var f=ti(u.qa);_t(f,"RID","rpc"),_t(f,"SID",u.K),_t(f,"AID",u.T),_t(f,"CI",u.F?"0":"1"),!u.F&&u.ja&&_t(f,"TO",u.ja),_t(f,"TYPE","xmlhttp"),zo(u,f),u.m&&u.o&&Bo(f,u.m,u.o),u.L&&(u.g.I=u.L);var y=u.g;u=u.ia,y.L=1,y.v=Zl(ti(f)),y.m=null,y.P=!0,Yl(y,u)}n.Za=function(){this.C!=null&&(this.C=null,Ho(this),ou(this),Rn(19))};function Ds(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function Nn(u,f){var y=null;if(u.g==f){Ds(u),au(u),u.g=null;var S=2}else if(Rh(u.h,f))y=f.D,dr(u.h,f),S=1;else return;if(u.G!=0){if(f.o)if(S==1){y=f.m?f.m.length:0,f=Date.now()-f.F;var L=u.B;S=Wl(),yn(S,new tc(S,y)),fc(u)}else Uh(u);else if(L=f.s,L==3||L==0&&0<f.X||!(S==1&&su(u,f)||S==2&&ou(u)))switch(y&&0<y.length&&(f=u.h,f.i=f.i.concat(y)),L){case 1:ji(u,5);break;case 4:ji(u,10);break;case 3:ji(u,6);break;default:ji(u,2)}}}function Bh(u,f){let y=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(y*=2),y*f}function ji(u,f){if(u.j.info("Error code "+f),f==2){var y=m(u.fb,u),S=u.Xa;let L=!S;S=new hr(S||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||uc(S,"https"),Zl(S),L?om(S.toString(),y):hc(S.toString(),y)}else Rn(2);u.G=0,u.l&&u.l.sa(f),As(u),iu(u)}n.fb=function(u){u?(this.j.info("Successfully pinged google.com"),Rn(2)):(this.j.info("Failed to ping google.com"),Rn(1))};function As(u){if(u.G=0,u.ka=[],u.l){let f=Vo(u.h);(f.length!=0||u.i.length!=0)&&(N(u.ka,f),N(u.ka,u.i),u.h.i.length=0,O(u.i),u.i.length=0),u.l.ra()}}function d(u,f,y){var S=y instanceof hr?ti(y):new hr(y);if(S.g!="")f&&(S.g=f+"."+S.g),Xl(S,S.s);else{var L=a.location;S=L.protocol,f=f?f+"."+L.hostname:L.hostname,L=+L.port;var j=new hr(null);S&&uc(j,S),f&&(j.g=f),L&&Xl(j,L),y&&(j.l=y),S=j}return y=u.D,f=u.ya,y&&f&&_t(S,y,f),_t(S,"VER",u.la),zo(u,S),S}function g(u,f,y){if(f&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=u.Ca&&!u.pa?new rt(new gt({eb:y})):new rt(u.pa),f.Ha(u.J),f}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function _(){}n=_.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function D(){}D.prototype.g=function(u,f){return new V(u,f)};function V(u,f){un.call(this),this.g=new Vh(f),this.l=u,this.h=f&&f.messageUrlParams||null,u=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(u?u["X-WebChannel-Content-Type"]=f.messageContentType:u={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(u?u["X-WebChannel-Client-Profile"]=f.va:u={"X-WebChannel-Client-Profile":f.va}),this.g.S=u,(u=f&&f.Sb)&&!Q(u)&&(this.g.m=u),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!Q(f)&&(this.g.D=f,u=this.h,u!==null&&f in u&&(u=this.h,f in u&&delete u[f])),this.j=new be(this)}k(V,un),V.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},V.prototype.close=function(){ru(this.g)},V.prototype.o=function(u){var f=this.g;if(typeof u=="string"){var y={};y.__data__=u,u=y}else this.u&&(y={},y.__data__=ec(u),u=y);f.i.push(new Sh(f.Ya++,u)),f.G==3&&fc(f)},V.prototype.N=function(){this.g.l=null,delete this.j,ru(this.g),delete this.g,V.aa.N.call(this)};function U(u){dn.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var f=u.__sm__;if(f){e:{for(let y in f){u=y;break e}u=void 0}(this.i=u)&&(u=this.i,f=f!==null&&u in f?f[u]:void 0),this.data=f}else this.data=u}k(U,dn);function J(){Gl.call(this),this.status=1}k(J,Gl);function be(u){this.g=u}k(be,_),be.prototype.ua=function(){yn(this.g,"a")},be.prototype.ta=function(u){yn(this.g,new U(u))},be.prototype.sa=function(u){yn(this.g,new J)},be.prototype.ra=function(){yn(this.g,"b")},D.prototype.createWebChannel=D.prototype.g,V.prototype.send=V.prototype.o,V.prototype.open=V.prototype.m,V.prototype.close=V.prototype.close,zA=ho.createWebChannelTransport=function(){return new D},HA=ho.getStatEventTarget=function(){return Wl()},$A=ho.Event=ur,A0=ho.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},rc.NO_ERROR=0,rc.TIMEOUT=8,rc.HTTP_ERROR=6,rg=ho.ErrorCode=rc,Kl.COMPLETE="complete",BA=ho.EventType=Kl,Do.EventType=Ao,Ao.OPEN="a",Ao.CLOSE="b",Ao.ERROR="c",Ao.MESSAGE="d",un.prototype.listen=un.prototype.K,Ld=ho.WebChannel=Do,vX=ho.FetchXmlHttpFactory=gt,rt.prototype.listenOnce=rt.prototype.L,rt.prototype.getLastError=rt.prototype.Ka,rt.prototype.getLastErrorCode=rt.prototype.Ba,rt.prototype.getStatus=rt.prototype.Z,rt.prototype.getResponseJson=rt.prototype.Oa,rt.prototype.getResponseText=rt.prototype.oa,rt.prototype.send=rt.prototype.ea,rt.prototype.setWithCredentials=rt.prototype.Ha,jA=ho.XhrIo=rt}).apply(typeof D0<"u"?D0:typeof self<"u"?self:typeof window<"u"?window:{});var UU="@firebase/firestore",jU="4.8.0";var Dn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Dn.UNAUTHENTICATED=new Dn(null),Dn.GOOGLE_CREDENTIALS=new Dn("google-credentials-uid"),Dn.FIRST_PARTY=new Dn("first-party-uid"),Dn.MOCK_USER=new Dn("mock-user");var ih="11.10.0";var Dl=new ss("@firebase/firestore");function Ud(){return Dl.logLevel}function oe(n,...e){if(Dl.logLevel<=$e.DEBUG){let t=e.map(M1);Dl.debug(`Firestore (${ih}): ${n}`,...t)}}function po(n,...e){if(Dl.logLevel<=$e.ERROR){let t=e.map(M1);Dl.error(`Firestore (${ih}): ${n}`,...t)}}function Ua(n,...e){if(Dl.logLevel<=$e.WARN){let t=e.map(M1);Dl.warn(`Firestore (${ih}): ${n}`,...t)}}function M1(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function we(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,Nj(n,r,t)}function Nj(n,e,t){let r=`FIRESTORE (${ih}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw po(r),new Error(r)}function ft(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||Nj(e,i,r)}function Re(n,e){return n}var z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},ne=class extends Sr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Ai=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var O0=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},QA=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Dn.UNAUTHENTICATED))}shutdown(){}},YA=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},JA=class{constructor(e){this.t=e,this.currentUser=Dn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ft(this.o===void 0,42304);let r=this.i,i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve(),s=new Ai;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Ai,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let c=s;e.enqueueRetryable(async()=>{await c.promise,await i(this.currentUser)})},a=c=>{oe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(oe("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Ai)}},0),o()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(oe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ft(typeof r.accessToken=="string",31837,{l:r}),new O0(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return ft(e===null||typeof e=="string",2055,{h:e}),new Dn(e)}},XA=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=Dn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},ZA=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new XA(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(Dn.FIRST_PARTY))}shutdown(){}invalidateToken(){}},F0=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},ex=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,qr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){ft(this.o===void 0,3512);let r=s=>{s.error!=null&&oe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.m;return this.m=s.token,oe("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{oe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.V.getImmediate({optional:!0});s?i(s):oe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new F0(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(ft(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new F0(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function wX(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}function Pj(){return new TextEncoder}var lg=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=wX(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%62))}return r}};function Ue(n,e){return n<e?-1:n>e?1:0}function tx(n,e){let t=0;for(;t<n.length&&t<e.length;){let r=n.codePointAt(t),i=e.codePointAt(t);if(r!==i){if(r<128&&i<128)return Ue(r,i);{let s=Pj(),o=IX(s.encode(BU(n,t)),s.encode(BU(e,t)));return o!==0?o:Ue(r,i)}}t+=r>65535?2:1}return Ue(n.length,e.length)}function BU(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function IX(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return Ue(n[t],e[t]);return Ue(n.length,e.length)}function Gd(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var $U="__name__",V0=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&we(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&we(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let s=n.compareSegments(e.get(i),t.get(i));if(s!==0)return s}return Ue(e.length,t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):tx(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return uo.fromString(e.substring(4,e.length-2))}},xt=class n extends V0{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new ne(z.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},bX=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Rr=class n extends V0{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return bX.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===$U}static keyField(){return new n([$U])}static fromServerFormat(e){let t=[],r="",i=0,s=()=>{if(r.length===0)throw new ne(z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},o=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new ne(z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new ne(z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new ne(z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var pe=class n{constructor(e){this.path=e}static fromPath(e){return new n(xt.fromString(e))}static fromName(e){return new n(xt.fromString(e).popFirst(5))}static empty(){return new n(xt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&xt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return xt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new xt(e.slice()))}};function Mj(n,e,t){if(!t)throw new ne(z.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function EX(n,e,t,r){if(e===!0&&r===!0)throw new ne(z.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function HU(n){if(!pe.isDocumentKey(n))throw new ne(z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function zU(n){if(pe.isDocumentKey(n))throw new ne(z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Oj(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function gw(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":we(12329,{type:typeof n})}function Yr(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ne(z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=gw(n);throw new ne(z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function sn(n,e){let t={typeString:n};return e&&(t.value=e),t}function Eg(n,e){if(!Oj(n))throw new ne(z.INVALID_ARGUMENT,"JSON must be an object");let t;for(let r in e)if(e[r]){let i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}let o=n[r];if(i&&typeof o!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&o!==s.value){t=`Expected '${r}' field to equal '${s.value}'`;break}}if(t)throw new ne(z.INVALID_ARGUMENT,t);return!0}var qU=-62135596800,GU=1e6,on=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*GU);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ne(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ne(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<qU)throw new ne(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ne(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/GU}_compareTo(e){return this.seconds===e.seconds?Ue(this.nanoseconds,e.nanoseconds):Ue(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:n._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Eg(e,n._jsonSchema))return new n(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-qU;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};on._jsonSchemaVersion="firestore/timestamp/1.0",on._jsonSchema={type:sn("string",on._jsonSchemaVersion),seconds:sn("number"),nanoseconds:sn("number")};var Me=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new on(0,0))}static max(){return new n(new on(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var ug=-1,nx=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};nx.UNKNOWN_ID=-1;function CX(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Me.fromTimestamp(r===1e9?new on(t+1,0):new on(t,r));return new Al(i,pe.empty(),e)}function TX(n){return new Al(n.readTime,n.key,ug)}var Al=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(Me.min(),pe.empty(),ug)}static max(){return new n(Me.max(),pe.empty(),ug)}};function SX(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=pe.comparator(n.documentKey,e.documentKey),t!==0?t:Ue(n.largestBatchId,e.largestBatchId))}var DX="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",rx=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};async function sh(n){if(n.code!==z.FAILED_PRECONDITION||n.message!==DX)throw n;oe("LocalStore","Unexpectedly lost primary lease")}var W=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&we(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&t()},c=>r(c))}),o=!0,s===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let s=e.length,o=new Array(s),a=0;for(let c=0;c<s;c++){let l=c;t(e[l]).next(h=>{o[l]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,t){return new n((r,i)=>{let s=()=>{e()===!0?t().next(()=>{s()},i):r()};s()})}};function AX(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function oh(n){return n.name==="IndexedDbTransactionError"}var O1=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this._e(i),this.ae=i=>r.writeSequenceNumber(i))}_e(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.ae&&this.ae(t),t}}n.ue=-1;return n})(),F1=-1;function mw(n){return n==null}function dg(n){return n===0&&1/n==-1/0}function xX(n){return typeof n=="number"&&Number.isInteger(n)&&!dg(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var Fj="";function RX(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=WU(e)),e=kX(n.get(t),e);return WU(e)}function kX(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let s=n.charAt(i);switch(s){case"\0":t+="";break;case Fj:t+="";break;default:t+=s}}return t}function WU(n){return n+Fj+""}var NX="remoteDocuments",Vj="owner";var Lj="mutationQueues";var Uj="mutations";var jj="documentMutations",PX="remoteDocumentsV14";var Bj="remoteDocumentGlobal";var $j="targets";var Hj="targetDocuments";var zj="targetGlobal",qj="collectionParents";var Gj="clientMetadata";var Wj="bundles";var Kj="namedQueries";var MX="indexConfiguration";var OX="indexState";var FX="indexEntries";var Qj="documentOverlays";var VX="globals";var LX=[Lj,Uj,jj,NX,$j,Vj,zj,Hj,Gj,Bj,qj,Wj,Kj],Abe=[...LX,Qj],UX=[Lj,Uj,jj,PX,$j,Vj,zj,Hj,Gj,Bj,qj,Wj,Kj,Qj],jX=UX,BX=[...jX,MX,OX,FX];var xbe=[...BX,VX];function KU(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function qa(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Yj(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Lt=class n{constructor(e,t){this.comparator=e,this.root=t||fs.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,fs.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,fs.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Hd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Hd(this.root,e,this.comparator,!1)}getReverseIterator(){return new Hd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Hd(this.root,e,this.comparator,!0)}},Hd=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},fs=class n{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=s??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new n(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw we(43730,{key:this.key,value:this.value});if(this.right.isRed())throw we(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw we(27949);return e+(this.isRed()?0:1)}};fs.EMPTY=null,fs.RED=!0,fs.BLACK=!1;fs.EMPTY=new class{constructor(){this.size=0}get key(){throw we(57766)}get value(){throw we(16141)}get color(){throw we(16727)}get left(){throw we(29726)}get right(){throw we(36894)}copy(e,t,r,i,s){return this}insert(e,t,r){return new fs(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var An=class n{constructor(e){this.comparator=e,this.data=new Lt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new L0(this.data.getIterator())}getIteratorFrom(e){return new L0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},L0=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Qr=class n{constructor(e){this.fields=e,e.sort(Rr.comparator)}static empty(){return new n([])}unionWith(e){let t=new An(Rr.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Gd(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var U0=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var zn=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=(function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new U0("Invalid base64 string: "+s):s}})(e);return new n(t)}static fromUint8Array(e){let t=(function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s})(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ue(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};zn.EMPTY_BYTE_STRING=new zn("");var $X=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function go(n){if(ft(!!n,39018),typeof n=="string"){let e=0,t=$X.exec(n);if(ft(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:At(n.seconds),nanos:At(n.nanos)}}function At(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function mo(n){return typeof n=="string"?zn.fromBase64String(n):zn.fromUint8Array(n)}var Jj="server_timestamp",Xj="__type__",Zj="__previous_value__",e4="__local_write_time__";function V1(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[Xj])===null||t===void 0?void 0:t.stringValue)===Jj}function yw(n){let e=n.mapValue.fields[Zj];return V1(e)?yw(e):e}function hg(n){let e=go(n.mapValue.fields[e4].timestampValue);return new on(e.seconds,e.nanos)}var ix=class{constructor(e,t,r,i,s,o,a,c,l,h){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=l,this.isUsingEmulator=h}},j0="(default)",B0=class n{constructor(e,t){this.projectId=e,this.database=t||j0}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===j0}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var L1="__type__",t4="__max__",x0={mapValue:{fields:{__type__:{stringValue:t4}}}},U1="__vector__",Wd="value";function ja(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?V1(n)?4:r4(n)?9007199254740991:n4(n)?10:11:we(28295,{value:n})}function ms(n,e){if(n===e)return!0;let t=ja(n);if(t!==ja(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return hg(n).isEqual(hg(e));case 3:return(function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=go(i.timestampValue),a=go(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(i,s){return mo(i.bytesValue).isEqual(mo(s.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(i,s){return At(i.geoPointValue.latitude)===At(s.geoPointValue.latitude)&&At(i.geoPointValue.longitude)===At(s.geoPointValue.longitude)})(n,e);case 2:return(function(i,s){if("integerValue"in i&&"integerValue"in s)return At(i.integerValue)===At(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=At(i.doubleValue),a=At(s.doubleValue);return o===a?dg(o)===dg(a):isNaN(o)&&isNaN(a)}return!1})(n,e);case 9:return Gd(n.arrayValue.values||[],e.arrayValue.values||[],ms);case 10:case 11:return(function(i,s){let o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(KU(o)!==KU(a))return!1;for(let c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!ms(o[c],a[c])))return!1;return!0})(n,e);default:return we(52216,{left:n})}}function fg(n,e){return(n.values||[]).find(t=>ms(t,e))!==void 0}function Kd(n,e){if(n===e)return 0;let t=ja(n),r=ja(e);if(t!==r)return Ue(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ue(n.booleanValue,e.booleanValue);case 2:return(function(s,o){let a=At(s.integerValue||s.doubleValue),c=At(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1})(n,e);case 3:return QU(n.timestampValue,e.timestampValue);case 4:return QU(hg(n),hg(e));case 5:return tx(n.stringValue,e.stringValue);case 6:return(function(s,o){let a=mo(s),c=mo(o);return a.compareTo(c)})(n.bytesValue,e.bytesValue);case 7:return(function(s,o){let a=s.split("/"),c=o.split("/");for(let l=0;l<a.length&&l<c.length;l++){let h=Ue(a[l],c[l]);if(h!==0)return h}return Ue(a.length,c.length)})(n.referenceValue,e.referenceValue);case 8:return(function(s,o){let a=Ue(At(s.latitude),At(o.latitude));return a!==0?a:Ue(At(s.longitude),At(o.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return YU(n.arrayValue,e.arrayValue);case 10:return(function(s,o){var a,c,l,h;let p=s.fields||{},m=o.fields||{},b=(a=p[Wd])===null||a===void 0?void 0:a.arrayValue,k=(c=m[Wd])===null||c===void 0?void 0:c.arrayValue,O=Ue(((l=b?.values)===null||l===void 0?void 0:l.length)||0,((h=k?.values)===null||h===void 0?void 0:h.length)||0);return O!==0?O:YU(b,k)})(n.mapValue,e.mapValue);case 11:return(function(s,o){if(s===x0.mapValue&&o===x0.mapValue)return 0;if(s===x0.mapValue)return 1;if(o===x0.mapValue)return-1;let a=s.fields||{},c=Object.keys(a),l=o.fields||{},h=Object.keys(l);c.sort(),h.sort();for(let p=0;p<c.length&&p<h.length;++p){let m=tx(c[p],h[p]);if(m!==0)return m;let b=Kd(a[c[p]],l[h[p]]);if(b!==0)return b}return Ue(c.length,h.length)})(n.mapValue,e.mapValue);default:throw we(23264,{le:t})}}function QU(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Ue(n,e);let t=go(n),r=go(e),i=Ue(t.seconds,r.seconds);return i!==0?i:Ue(t.nanos,r.nanos)}function YU(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let s=Kd(t[i],r[i]);if(s)return s}return Ue(t.length,r.length)}function Qd(n){return sx(n)}function sx(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){let r=go(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return mo(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return pe.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",i=!0;for(let s of t.values||[])i?i=!1:r+=",",r+=sx(s);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){let r=Object.keys(t.fields||{}).sort(),i="{",s=!0;for(let o of r)s?s=!1:i+=",",i+=`${o}:${sx(t.fields[o])}`;return i+"}"})(n.mapValue):we(61005,{value:n})}function N0(n){switch(ja(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=yw(n);return e?16+N0(e):16;case 5:return 2*n.stringValue.length;case 6:return mo(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce((i,s)=>i+N0(s),0)})(n.arrayValue);case 10:case 11:return(function(r){let i=0;return qa(r.fields,(s,o)=>{i+=s.length+N0(o)}),i})(n.mapValue);default:throw we(13486,{value:n})}}function JU(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function ox(n){return!!n&&"integerValue"in n}function j1(n){return!!n&&"arrayValue"in n}function XU(n){return!!n&&"nullValue"in n}function ZU(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function P0(n){return!!n&&"mapValue"in n}function n4(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[L1])===null||t===void 0?void 0:t.stringValue)===U1}function sg(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return qa(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=sg(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=sg(n.arrayValue.values[t]);return e}return Object.assign({},n)}function r4(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===t4}var kbe={mapValue:{fields:{[L1]:{stringValue:U1},[Wd]:{arrayValue:{}}}}};var xr=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!P0(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=sg(t)}setAll(e){let t=Rr.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){let c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=a.popLast()}o?r[a.lastSegment()]=sg(o):i.push(a.lastSegment())});let s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){let t=this.field(e.popLast());P0(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ms(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];P0(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){qa(t,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new n(sg(this.value))}};function i4(n){let e=[];return qa(n.fields,(t,r)=>{let i=new Rr([t]);if(P0(r)){let s=i4(r.mapValue).fields;if(s.length===0)e.push(i);else for(let o of s)e.push(i.child(o))}else e.push(i)}),new Qr(e)}var xi=class n{constructor(e,t,r,i,s,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new n(e,0,Me.min(),Me.min(),Me.min(),xr.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,Me.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,Me.min(),Me.min(),xr.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,Me.min(),Me.min(),xr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Me.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=xr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=xr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Me.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Yd=class{constructor(e,t){this.position=e,this.inclusive=t}};function ej(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let s=e[i],o=n.position[i];if(s.field.isKeyField()?r=pe.comparator(pe.fromName(o.referenceValue),t.key):r=Kd(o,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function tj(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ms(n.position[t],e.position[t]))return!1;return!0}var xl=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function HX(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var $0=class{},rn=class n extends $0{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new cx(e,t,r):t==="array-contains"?new dx(e,r):t==="in"?new hx(e,r):t==="not-in"?new fx(e,r):t==="array-contains-any"?new px(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new lx(e,r):new ux(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Kd(t,this.value)):t!==null&&ja(this.value)===ja(t)&&this.matchesComparison(Kd(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return we(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Ri=class n extends $0{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new n(e,t)}matches(e){return s4(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}};function s4(n){return n.op==="and"}function o4(n){return zX(n)&&s4(n)}function zX(n){for(let e of n.filters)if(e instanceof Ri)return!1;return!0}function ax(n){if(n instanceof rn)return n.field.canonicalString()+n.op.toString()+Qd(n.value);if(o4(n))return n.filters.map(e=>ax(e)).join(",");{let e=n.filters.map(t=>ax(t)).join(",");return`${n.op}(${e})`}}function a4(n,e){return n instanceof rn?(function(r,i){return i instanceof rn&&r.op===i.op&&r.field.isEqual(i.field)&&ms(r.value,i.value)})(n,e):n instanceof Ri?(function(r,i){return i instanceof Ri&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&a4(o,i.filters[a]),!0):!1})(n,e):void we(19439)}function c4(n){return n instanceof rn?(function(t){return`${t.field.canonicalString()} ${t.op} ${Qd(t.value)}`})(n):n instanceof Ri?(function(t){return t.op.toString()+" {"+t.getFilters().map(c4).join(" ,")+"}"})(n):"Filter"}var cx=class extends rn{constructor(e,t,r){super(e,t,r),this.key=pe.fromName(r.referenceValue)}matches(e){let t=pe.comparator(e.key,this.key);return this.matchesComparison(t)}},lx=class extends rn{constructor(e,t){super(e,"in",t),this.keys=l4("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},ux=class extends rn{constructor(e,t){super(e,"not-in",t),this.keys=l4("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function l4(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>pe.fromName(r.referenceValue))}var dx=class extends rn{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return j1(t)&&fg(t.arrayValue,this.value)}},hx=class extends rn{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&fg(this.value.arrayValue,t)}},fx=class extends rn{constructor(e,t){super(e,"not-in",t)}matches(e){if(fg(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!fg(this.value.arrayValue,t)}},px=class extends rn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!j1(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>fg(this.value.arrayValue,r))}};var gx=class{constructor(e,t=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.Pe=null}};function nj(n,e=null,t=[],r=[],i=null,s=null,o=null){return new gx(n,e,t,r,i,s,o)}function B1(n){let e=Re(n);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>ax(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>(function(s){return s.field.canonicalString()+s.dir})(r)).join(","),mw(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Qd(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Qd(r)).join(",")),e.Pe=t}return e.Pe}function $1(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!HX(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!a4(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!tj(n.startAt,e.startAt)&&tj(n.endAt,e.endAt)}function mx(n){return pe.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var Ba=class{constructor(e,t=null,r=[],i=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}};function qX(n,e,t,r,i,s,o,a){return new Ba(n,e,t,r,i,s,o,a)}function _w(n){return new Ba(n)}function rj(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function u4(n){return n.collectionGroup!==null}function og(n){let e=Re(n);if(e.Te===null){e.Te=[];let t=new Set;for(let s of e.explicitOrderBy)e.Te.push(s),t.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new An(Rr.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.Te.push(new xl(s,r))}),t.has(Rr.keyField().canonicalString())||e.Te.push(new xl(Rr.keyField(),r))}return e.Te}function ps(n){let e=Re(n);return e.Ie||(e.Ie=GX(e,og(n))),e.Ie}function GX(n,e){if(n.limitType==="F")return nj(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new xl(i.field,s)});let t=n.endAt?new Yd(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Yd(n.startAt.position,n.startAt.inclusive):null;return nj(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function yx(n,e){let t=n.filters.concat([e]);return new Ba(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function _x(n,e,t){return new Ba(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function vw(n,e){return $1(ps(n),ps(e))&&n.limitType===e.limitType}function d4(n){return`${B1(ps(n))}|lt:${n.limitType}`}function jd(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>c4(i)).join(", ")}]`),mw(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>(function(o){return`${o.field.canonicalString()} (${o.dir})`})(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Qd(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Qd(i)).join(",")),`Target(${r})`})(ps(n))}; limitType=${n.limitType})`}function ww(n,e){return e.isFoundDocument()&&(function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):pe.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)})(n,e)&&(function(r,i){for(let s of og(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0})(n,e)&&(function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0})(n,e)&&(function(r,i){return!(r.startAt&&!(function(o,a,c){let l=ej(o,a,c);return o.inclusive?l<=0:l<0})(r.startAt,og(r),i)||r.endAt&&!(function(o,a,c){let l=ej(o,a,c);return o.inclusive?l>=0:l>0})(r.endAt,og(r),i))})(n,e)}function WX(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function h4(n){return(e,t)=>{let r=!1;for(let i of og(n)){let s=KX(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function KX(n,e,t){let r=n.field.isKeyField()?pe.comparator(e.key,t.key):(function(s,o,a){let c=o.data.field(s),l=a.data.field(s);return c!==null&&l!==null?Kd(c,l):we(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return we(19790,{direction:n.dir})}}var yo=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){qa(this.inner,(t,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return Yj(this.inner)}size(){return this.innerSize}};var QX=new Lt(pe.comparator);function _o(){return QX}var f4=new Lt(pe.comparator);function ig(...n){let e=f4;for(let t of n)e=e.insert(t.key,t);return e}function p4(n){let e=f4;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function bl(){return ag()}function g4(){return ag()}function ag(){return new yo(n=>n.toString(),(n,e)=>n.isEqual(e))}var YX=new Lt(pe.comparator),JX=new An(pe.comparator);function Ge(...n){let e=JX;for(let t of n)e=e.add(t);return e}var XX=new An(Ue);function ZX(){return XX}function H1(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:dg(e)?"-0":e}}function m4(n){return{integerValue:""+n}}function eZ(n,e){return xX(e)?m4(e):H1(n,e)}var Jd=class{constructor(){this._=void 0}};function tZ(n,e,t){return n instanceof Rl?(function(i,s){let o={fields:{[Xj]:{stringValue:Jj},[e4]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&V1(s)&&(s=yw(s)),s&&(o.fields[Zj]=s),{mapValue:o}})(t,e):n instanceof kl?_4(n,e):n instanceof Nl?v4(n,e):(function(i,s){let o=y4(i,s),a=ij(o)+ij(i.Ee);return ox(o)&&ox(i.Ee)?m4(a):H1(i.serializer,a)})(n,e)}function nZ(n,e,t){return n instanceof kl?_4(n,e):n instanceof Nl?v4(n,e):t}function y4(n,e){return n instanceof Xd?(function(r){return ox(r)||(function(s){return!!s&&"doubleValue"in s})(r)})(e)?e:{integerValue:0}:null}var Rl=class extends Jd{},kl=class extends Jd{constructor(e){super(),this.elements=e}};function _4(n,e){let t=w4(e);for(let r of n.elements)t.some(i=>ms(i,r))||t.push(r);return{arrayValue:{values:t}}}var Nl=class extends Jd{constructor(e){super(),this.elements=e}};function v4(n,e){let t=w4(e);for(let r of n.elements)t=t.filter(i=>!ms(i,r));return{arrayValue:{values:t}}}var Xd=class extends Jd{constructor(e,t){super(),this.serializer=e,this.Ee=t}};function ij(n){return At(n.integerValue||n.doubleValue)}function w4(n){return j1(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}var vx=class{constructor(e,t){this.field=e,this.transform=t}};function rZ(n,e){return n.field.isEqual(e.field)&&(function(r,i){return r instanceof kl&&i instanceof kl||r instanceof Nl&&i instanceof Nl?Gd(r.elements,i.elements,ms):r instanceof Xd&&i instanceof Xd?ms(r.Ee,i.Ee):r instanceof Rl&&i instanceof Rl})(n.transform,e.transform)}var wx=class{constructor(e,t){this.version=e,this.transformResults=t}},fo=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function M0(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var Zd=class{};function I4(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new pg(n.key,fo.none()):new Pl(n.key,n.data,fo.none());{let t=n.data,r=xr.empty(),i=new An(Rr.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new ys(n.key,r,new Qr(i.toArray()),fo.none())}}function iZ(n,e,t){n instanceof Pl?(function(i,s,o){let a=i.value.clone(),c=oj(i.fieldTransforms,s,o.transformResults);a.setAll(c),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()})(n,e,t):n instanceof ys?(function(i,s,o){if(!M0(i.precondition,s))return void s.convertToUnknownDocument(o.version);let a=oj(i.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(b4(i)),c.setAll(a),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()})(n,e,t):(function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()})(0,e,t)}function cg(n,e,t,r){return n instanceof Pl?(function(s,o,a,c){if(!M0(s.precondition,o))return a;let l=s.value.clone(),h=aj(s.fieldTransforms,c,o);return l.setAll(h),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null})(n,e,t,r):n instanceof ys?(function(s,o,a,c){if(!M0(s.precondition,o))return a;let l=aj(s.fieldTransforms,c,o),h=o.data;return h.setAll(b4(s)),h.setAll(l),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(p=>p.field))})(n,e,t,r):(function(s,o,a){return M0(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a})(n,e,t)}function sZ(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),s=y4(r.transform,i||null);s!=null&&(t===null&&(t=xr.empty()),t.set(r.field,s))}return t||null}function sj(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Gd(r,i,(s,o)=>rZ(s,o))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var Pl=class extends Zd{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},ys=class extends Zd{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function b4(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function oj(n,e,t){let r=new Map;ft(n.length===t.length,32656,{Ae:t.length,Re:n.length});for(let i=0;i<t.length;i++){let s=n[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,nZ(o,a,t[i]))}return r}function aj(n,e,t){let r=new Map;for(let i of n){let s=i.transform,o=t.data.field(i.field);r.set(i.field,tZ(s,o,e))}return r}var pg=class extends Zd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Ix=class extends Zd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var bx=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&iZ(s,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=cg(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=cg(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=g4();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=t.has(i.key)?null:a;let c=I4(o,a);c!==null&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(Me.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Ge())}isEqual(e){return this.batchId===e.batchId&&Gd(this.mutations,e.mutations,(t,r)=>sj(t,r))&&Gd(this.baseMutations,e.baseMutations,(t,r)=>sj(t,r))}},Ex=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){ft(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let i=(function(){return YX})(),s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new n(e,t,r,i)}};var Cx=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var Tx=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var tn,Ye;function oZ(n){switch(n){case z.OK:return we(64938);case z.CANCELLED:case z.UNKNOWN:case z.DEADLINE_EXCEEDED:case z.RESOURCE_EXHAUSTED:case z.INTERNAL:case z.UNAVAILABLE:case z.UNAUTHENTICATED:return!1;case z.INVALID_ARGUMENT:case z.NOT_FOUND:case z.ALREADY_EXISTS:case z.PERMISSION_DENIED:case z.FAILED_PRECONDITION:case z.ABORTED:case z.OUT_OF_RANGE:case z.UNIMPLEMENTED:case z.DATA_LOSS:return!0;default:return we(15467,{code:n})}}function E4(n){if(n===void 0)return po("GRPC error has no .code"),z.UNKNOWN;switch(n){case tn.OK:return z.OK;case tn.CANCELLED:return z.CANCELLED;case tn.UNKNOWN:return z.UNKNOWN;case tn.DEADLINE_EXCEEDED:return z.DEADLINE_EXCEEDED;case tn.RESOURCE_EXHAUSTED:return z.RESOURCE_EXHAUSTED;case tn.INTERNAL:return z.INTERNAL;case tn.UNAVAILABLE:return z.UNAVAILABLE;case tn.UNAUTHENTICATED:return z.UNAUTHENTICATED;case tn.INVALID_ARGUMENT:return z.INVALID_ARGUMENT;case tn.NOT_FOUND:return z.NOT_FOUND;case tn.ALREADY_EXISTS:return z.ALREADY_EXISTS;case tn.PERMISSION_DENIED:return z.PERMISSION_DENIED;case tn.FAILED_PRECONDITION:return z.FAILED_PRECONDITION;case tn.ABORTED:return z.ABORTED;case tn.OUT_OF_RANGE:return z.OUT_OF_RANGE;case tn.UNIMPLEMENTED:return z.UNIMPLEMENTED;case tn.DATA_LOSS:return z.DATA_LOSS;default:return we(39323,{code:n})}}(Ye=tn||(tn={}))[Ye.OK=0]="OK",Ye[Ye.CANCELLED=1]="CANCELLED",Ye[Ye.UNKNOWN=2]="UNKNOWN",Ye[Ye.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ye[Ye.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ye[Ye.NOT_FOUND=5]="NOT_FOUND",Ye[Ye.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ye[Ye.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ye[Ye.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ye[Ye.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ye[Ye.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ye[Ye.ABORTED=10]="ABORTED",Ye[Ye.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ye[Ye.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ye[Ye.INTERNAL=13]="INTERNAL",Ye[Ye.UNAVAILABLE=14]="UNAVAILABLE",Ye[Ye.DATA_LOSS=15]="DATA_LOSS";var cj=null;var aZ=new uo([4294967295,4294967295],0);function lj(n){let e=Pj().encode(n),t=new UA;return t.update(e),new Uint8Array(t.digest())}function uj(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new uo([t,r],0),new uo([i,s],0)]}var Sx=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new El(`Invalid padding: ${t}`);if(r<0)throw new El(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new El(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new El(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=uo.fromNumber(this.fe)}pe(e,t,r){let i=e.add(t.multiply(uo.fromNumber(r)));return i.compare(aZ)===1&&(i=new uo([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;let t=lj(e),[r,i]=uj(t);for(let s=0;s<this.hashCount;s++){let o=this.pe(r,i,s);if(!this.ye(o))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new n(s,i,t);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.fe===0)return;let t=lj(e),[r,i]=uj(t);for(let s=0;s<this.hashCount;s++){let o=this.pe(r,i,s);this.we(o)}}we(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},El=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var H0=class n{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,gg.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(Me.min(),i,new Lt(Ue),_o(),Ge())}},gg=class n{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,Ge(),Ge(),Ge())}};var zd=class{constructor(e,t,r,i){this.Se=e,this.removedTargetIds=t,this.key=r,this.be=i}},z0=class{constructor(e,t){this.targetId=e,this.De=t}},q0=class{constructor(e,t,r=zn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},G0=class{constructor(){this.ve=0,this.Ce=dj(),this.Fe=zn.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=Ge(),t=Ge(),r=Ge();return this.Ce.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:we(38017,{changeType:s})}}),new gg(this.Fe,this.Me,e,t,r)}ke(){this.xe=!1,this.Ce=dj()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,ft(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}},Dx=class{constructor(e){this.We=e,this.Ge=new Map,this.ze=_o(),this.je=R0(),this.Je=R0(),this.He=new Lt(Ue)}Ye(e){for(let t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(let t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,t=>{let r=this.tt(t);switch(e.state){case 0:this.nt(t)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),r.Be(e.resumeToken));break;default:we(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach((r,i)=>{this.nt(i)&&t(i)})}it(e){let t=e.targetId,r=e.De.count,i=this.st(t);if(i){let s=i.target;if(mx(s))if(r===0){let o=new pe(s.path);this.Xe(t,o,xi.newNoDocument(o,Me.min()))}else ft(r===1,20013,{expectedCount:r});else{let o=this.ot(t);if(o!==r){let a=this._t(e),c=a?this.ut(a,e,o):1;if(c!==0){this.rt(t);let l=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,l)}cj?.ct((function(h,p,m,b,k){var O,N,H,Q,Z,Ee;let Je={localCacheCount:h,existenceFilterCount:p.count,databaseId:m.database,projectId:m.projectId},Ie=p.unchangedNames;return Ie&&(Je.bloomFilter={applied:k===0,hashCount:(O=Ie?.hashCount)!==null&&O!==void 0?O:0,bitmapLength:(Q=(H=(N=Ie?.bits)===null||N===void 0?void 0:N.bitmap)===null||H===void 0?void 0:H.length)!==null&&Q!==void 0?Q:0,padding:(Ee=(Z=Ie?.bits)===null||Z===void 0?void 0:Z.padding)!==null&&Ee!==void 0?Ee:0,mightContain:T=>{var v;return(v=b?.mightContain(T))!==null&&v!==void 0&&v}}),Je})(o,e.De,this.We.lt(),a,c))}}}}_t(e){let t=e.De.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t,o,a;try{o=mo(r).toUint8Array()}catch(c){if(c instanceof U0)return Ua("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new Sx(o,i,s)}catch(c){return Ua(c instanceof El?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.fe===0?null:a}ut(e,t,r){return t.De.count===r-this.ht(e,t.targetId)?0:2}ht(e,t){let r=this.We.getRemoteKeysForTarget(t),i=0;return r.forEach(s=>{let o=this.We.lt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Xe(t,s,null),i++)}),i}Pt(e){let t=new Map;this.Ge.forEach((s,o)=>{let a=this.st(o);if(a){if(s.current&&mx(a.target)){let c=new pe(a.target.path);this.Tt(c).has(o)||this.It(o,c)||this.Xe(o,c,xi.newNoDocument(c,e))}s.Ne&&(t.set(o,s.Le()),s.ke())}});let r=Ge();this.Je.forEach((s,o)=>{let a=!0;o.forEachWhile(c=>{let l=this.st(c);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ze.forEach((s,o)=>o.setReadTime(e));let i=new H0(e,t,this.He,this.ze,r);return this.ze=_o(),this.je=R0(),this.Je=R0(),this.He=new Lt(Ue),i}Ze(e,t){if(!this.nt(e))return;let r=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,r),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,r){if(!this.nt(e))return;let i=this.tt(e);this.It(e,t)?i.qe(t,1):i.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),r&&(this.ze=this.ze.insert(t,r))}removeTarget(e){this.Ge.delete(e)}ot(e){let t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new G0,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new An(Ue),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new An(Ue),this.je=this.je.insert(e,t)),t}nt(e){let t=this.st(e)!==null;return t||oe("WatchChangeAggregator","Detected inactive target",e),t}st(e){let t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new G0),this.We.getRemoteKeysForTarget(e).forEach(t=>{this.Xe(e,t,null)})}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}};function R0(){return new Lt(pe.comparator)}function dj(){return new Lt(pe.comparator)}var cZ={asc:"ASCENDING",desc:"DESCENDING"},lZ={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},uZ={and:"AND",or:"OR"},Ax=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function xx(n,e){return n.useProto3Json||mw(e)?e:{value:e}}function W0(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function C4(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function dZ(n,e){return W0(n,e.toTimestamp())}function gs(n){return ft(!!n,49232),Me.fromTimestamp((function(t){let r=go(t);return new on(r.seconds,r.nanos)})(n))}function z1(n,e){return Rx(n,e).canonicalString()}function Rx(n,e){let t=(function(i){return new xt(["projects",i.projectId,"databases",i.database])})(n).child("documents");return e===void 0?t:t.child(e)}function T4(n){let e=xt.fromString(n);return ft(R4(e),10190,{key:e.toString()}),e}function kx(n,e){return z1(n.databaseId,e.path)}function qA(n,e){let t=T4(e);if(t.get(1)!==n.databaseId.projectId)throw new ne(z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ne(z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new pe(D4(t))}function S4(n,e){return z1(n.databaseId,e)}function hZ(n){let e=T4(n);return e.length===4?xt.emptyPath():D4(e)}function Nx(n){return new xt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function D4(n){return ft(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function hj(n,e,t){return{name:kx(n,e),fields:t.value.mapValue.fields}}function fZ(n,e){let t;if("targetChange"in e){e.targetChange;let r=(function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:we(39313,{state:l})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=(function(l,h){return l.useProto3Json?(ft(h===void 0||typeof h=="string",58123),zn.fromBase64String(h||"")):(ft(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),zn.fromUint8Array(h||new Uint8Array))})(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&(function(l){let h=l.code===void 0?z.UNKNOWN:E4(l.code);return new ne(h,l.message||"")})(o);t=new q0(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=qA(n,r.document.name),s=gs(r.document.updateTime),o=r.document.createTime?gs(r.document.createTime):Me.min(),a=new xr({mapValue:{fields:r.document.fields}}),c=xi.newFoundDocument(i,s,o,a),l=r.targetIds||[],h=r.removedTargetIds||[];t=new zd(l,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=qA(n,r.document),s=r.readTime?gs(r.readTime):Me.min(),o=xi.newNoDocument(i,s),a=r.removedTargetIds||[];t=new zd([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=qA(n,r.document),s=r.removedTargetIds||[];t=new zd([],s,i,null)}else{if(!("filter"in e))return we(11601,{At:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,o=new Tx(i,s),a=r.targetId;t=new z0(a,o)}}return t}function pZ(n,e){let t;if(e instanceof Pl)t={update:hj(n,e.key,e.value)};else if(e instanceof pg)t={delete:kx(n,e.key)};else if(e instanceof ys)t={update:hj(n,e.key,e.data),updateMask:EZ(e.fieldMask)};else{if(!(e instanceof Ix))return we(16599,{Rt:e.type});t={verify:kx(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>(function(s,o){let a=o.transform;if(a instanceof Rl)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof kl)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Nl)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Xd)return{fieldPath:o.field.canonicalString(),increment:a.Ee};throw we(20930,{transform:o.transform})})(0,r))),e.precondition.isNone||(t.currentDocument=(function(i,s){return s.updateTime!==void 0?{updateTime:dZ(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:we(27497)})(n,e.precondition)),t}function gZ(n,e){return n&&n.length>0?(ft(e!==void 0,14353),n.map(t=>(function(i,s){let o=i.updateTime?gs(i.updateTime):gs(s);return o.isEqual(Me.min())&&(o=gs(s)),new wx(o,i.transformResults||[])})(t,e))):[]}function mZ(n,e){return{documents:[S4(n,e.path)]}}function yZ(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=S4(n,i);let s=(function(l){if(l.length!==0)return x4(Ri.create(l,"and"))})(e.filters);s&&(t.structuredQuery.where=s);let o=(function(l){if(l.length!==0)return l.map(h=>(function(m){return{field:Bd(m.field),direction:wZ(m.dir)}})(h))})(e.orderBy);o&&(t.structuredQuery.orderBy=o);let a=xx(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=(function(l){return{before:l.inclusive,values:l.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(l){return{before:!l.inclusive,values:l.position}})(e.endAt)),{Vt:t,parent:i}}function _Z(n){let e=hZ(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){ft(r===1,65062);let h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];t.where&&(s=(function(p){let m=A4(p);return m instanceof Ri&&o4(m)?m.getFilters():[m]})(t.where));let o=[];t.orderBy&&(o=(function(p){return p.map(m=>(function(k){return new xl($d(k.field),(function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(k.direction))})(m))})(t.orderBy));let a=null;t.limit&&(a=(function(p){let m;return m=typeof p=="object"?p.value:p,mw(m)?null:m})(t.limit));let c=null;t.startAt&&(c=(function(p){let m=!!p.before,b=p.values||[];return new Yd(b,m)})(t.startAt));let l=null;return t.endAt&&(l=(function(p){let m=!p.before,b=p.values||[];return new Yd(b,m)})(t.endAt)),qX(e,i,o,s,a,"F",c,l)}function vZ(n,e){let t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return we(28987,{purpose:i})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function A4(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=$d(t.unaryFilter.field);return rn.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=$d(t.unaryFilter.field);return rn.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=$d(t.unaryFilter.field);return rn.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=$d(t.unaryFilter.field);return rn.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return we(61313);default:return we(60726)}})(n):n.fieldFilter!==void 0?(function(t){return rn.create($d(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return we(58110);default:return we(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Ri.create(t.compositeFilter.filters.map(r=>A4(r)),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return we(1026)}})(t.compositeFilter.op))})(n):we(30097,{filter:n})}function wZ(n){return cZ[n]}function IZ(n){return lZ[n]}function bZ(n){return uZ[n]}function Bd(n){return{fieldPath:n.canonicalString()}}function $d(n){return Rr.fromServerFormat(n.fieldPath)}function x4(n){return n instanceof rn?(function(t){if(t.op==="=="){if(ZU(t.value))return{unaryFilter:{field:Bd(t.field),op:"IS_NAN"}};if(XU(t.value))return{unaryFilter:{field:Bd(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(ZU(t.value))return{unaryFilter:{field:Bd(t.field),op:"IS_NOT_NAN"}};if(XU(t.value))return{unaryFilter:{field:Bd(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Bd(t.field),op:IZ(t.op),value:t.value}}})(n):n instanceof Ri?(function(t){let r=t.getFilters().map(i=>x4(i));return r.length===1?r[0]:{compositeFilter:{op:bZ(t.op),filters:r}}})(n):we(54877,{filter:n})}function EZ(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function R4(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var mg=class n{constructor(e,t,r,i,s=Me.min(),o=Me.min(),a=zn.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var Px=class{constructor(e){this.gt=e}};function CZ(n){let e=_Z({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?_x(e,e.limit,"L"):e}var K0=class{constructor(){}bt(e,t){this.Dt(e,t),t.vt()}Dt(e,t){if("nullValue"in e)this.Ct(t,5);else if("booleanValue"in e)this.Ct(t,10),t.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(t,15),t.Ft(At(e.integerValue));else if("doubleValue"in e){let r=At(e.doubleValue);isNaN(r)?this.Ct(t,13):(this.Ct(t,15),dg(r)?t.Ft(0):t.Ft(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ct(t,20),typeof r=="string"&&(r=go(r)),t.Mt(`${r.seconds||""}`),t.Ft(r.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,t),this.Ot(t);else if("bytesValue"in e)this.Ct(t,30),t.Nt(mo(e.bytesValue)),this.Ot(t);else if("referenceValue"in e)this.Bt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ct(t,45),t.Ft(r.latitude||0),t.Ft(r.longitude||0)}else"mapValue"in e?r4(e)?this.Ct(t,Number.MAX_SAFE_INTEGER):n4(e)?this.Lt(e.mapValue,t):(this.kt(e.mapValue,t),this.Ot(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Ot(t)):we(19022,{Qt:e})}xt(e,t){this.Ct(t,25),this.$t(e,t)}$t(e,t){t.Mt(e)}kt(e,t){let r=e.fields||{};this.Ct(t,55);for(let i of Object.keys(r))this.xt(i,t),this.Dt(r[i],t)}Lt(e,t){var r,i;let s=e.fields||{};this.Ct(t,53);let o=Wd,a=((i=(r=s[o].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.Ct(t,15),t.Ft(At(a)),this.xt(o,t),this.Dt(s[o],t)}qt(e,t){let r=e.values||[];this.Ct(t,50);for(let i of r)this.Dt(i,t)}Bt(e,t){this.Ct(t,37),pe.fromName(e).path.forEach(r=>{this.Ct(t,60),this.$t(r,t)})}Ct(e,t){e.Ft(t)}Ot(e){e.Ft(2)}};K0.Ut=new K0;var Mx=class{constructor(){this.Dn=new Ox}addToCollectionParentIndex(e,t){return this.Dn.add(t),W.resolve()}getCollectionParents(e,t){return W.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return W.resolve()}deleteFieldIndex(e,t){return W.resolve()}deleteAllFieldIndexes(e){return W.resolve()}createTargetIndexes(e,t){return W.resolve()}getDocumentsMatchingTarget(e,t){return W.resolve(null)}getIndexType(e,t){return W.resolve(0)}getFieldIndexes(e,t){return W.resolve([])}getNextCollectionGroupToUpdate(e){return W.resolve(null)}getMinOffset(e,t){return W.resolve(Al.min())}getMinOffsetFromCollectionGroup(e,t){return W.resolve(Al.min())}updateCollectionGroup(e,t,r){return W.resolve()}updateIndexEntries(e,t){return W.resolve()}},Ox=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new An(xt.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new An(xt.comparator)).toArray()}};var Nbe=new Uint8Array(0);var fj={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},k4=41943040,Kr=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};Kr.DEFAULT_COLLECTION_PERCENTILE=10,Kr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Kr.DEFAULT=new Kr(k4,Kr.DEFAULT_COLLECTION_PERCENTILE,Kr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Kr.DISABLED=new Kr(-1,0,0);var yg=class n{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new n(0)}static ur(){return new n(-1)}};var pj="LruGarbageCollector",TZ=1048576;function gj([n,e],[t,r]){let i=Ue(n,t);return i===0?Ue(e,r):i}var Fx=class{constructor(e){this.Tr=e,this.buffer=new An(gj),this.Ir=0}dr(){return++this.Ir}Er(e){let t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();gj(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},Vx=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){oe(pj,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){oh(t)?oe(pj,"Ignoring IndexedDB error during garbage collection: ",t):await sh(t)}await this.Rr(3e5)})}},Lx=class{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return W.resolve(O1.ue);let r=new Fx(t);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(oe("LruGarbageCollector","Garbage collection skipped; disabled"),W.resolve(fj)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(oe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),fj):this.pr(e,t))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let r,i,s,o,a,c,l,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(oe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,o=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,a=Date.now(),this.removeTargets(e,r,t))).next(p=>(s=p,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(l=Date.now(),Ud()<=$e.DEBUG&&oe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(c-a)+`ms
	Removed ${p} documents in `+(l-c)+`ms
Total Duration: ${l-h}ms`),W.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:p})))}};function SZ(n,e){return new Lx(n,e)}var Ux=class{constructor(){this.changes=new yo(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,xi.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?W.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var jx=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var Bx=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&cg(r.mutation,i,Qr.empty(),on.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Ge()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Ge()){let i=bl();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=ig();return s.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){let r=bl();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Ge()))}populateOverlays(e,t,r){let i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,r,i){let s=_o(),o=ag(),a=(function(){return ag()})();return t.forEach((c,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof ys)?s=s.insert(l.key,l):h!==void 0?(o.set(l.key,h.mutation.getFieldMask()),cg(h.mutation,l,h.mutation.getFieldMask(),on.now())):o.set(l.key,Qr.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((l,h)=>o.set(l,h)),t.forEach((l,h)=>{var p;return a.set(l,new jx(h,(p=o.get(l))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,t){let r=ag(),i=new Lt((o,a)=>o-a),s=Ge();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(let a of o)a.keys().forEach(c=>{let l=t.get(c);if(l===null)return;let h=r.get(c)||Qr.empty();h=a.applyToLocalView(l,h),r.set(c,h);let p=(i.get(a.batchId)||Ge()).add(c);i=i.insert(a.batchId,p)})}).next(()=>{let o=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),l=c.key,h=c.value,p=g4();h.forEach(m=>{if(!s.has(m)){let b=I4(t.get(m),r.get(m));b!==null&&p.set(m,b),s=s.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,l,p))}return W.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return(function(o){return pe.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):u4(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):W.resolve(bl()),a=ug,c=s;return o.next(l=>W.forEach(l,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),s.get(h)?W.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{c=c.insert(h,m)}))).next(()=>this.populateOverlays(e,l,s)).next(()=>this.computeViews(e,c,l,Ge())).next(h=>({batchId:a,changes:p4(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new pe(t)).next(r=>{let i=ig();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let s=t.collectionGroup,o=ig();return this.indexManager.getCollectionParents(e,s).next(a=>W.forEach(a,c=>{let l=(function(p,m){return new Ba(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)})(t,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((p,m)=>{o=o.insert(p,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((c,l)=>{let h=l.getKey();o.get(h)===null&&(o=o.insert(h,xi.newInvalidDocument(h)))});let a=ig();return o.forEach((c,l)=>{let h=s.get(c);h!==void 0&&cg(h.mutation,l,Qr.empty(),on.now()),ww(t,l)&&(a=a.insert(c,l))}),a})}};var $x=class{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return W.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:gs(i.createTime)}})(t)),W.resolve()}getNamedQuery(e,t){return W.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,(function(i){return{name:i.name,query:CZ(i.bundledQuery),readTime:gs(i.readTime)}})(t)),W.resolve()}};var Hx=class{constructor(){this.overlays=new Lt(pe.comparator),this.kr=new Map}getOverlay(e,t){return W.resolve(this.overlays.get(t))}getOverlays(e,t){let r=bl();return W.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.wt(e,t,s)}),W.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.kr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.kr.delete(r)),W.resolve()}getOverlaysForCollection(e,t,r){let i=bl(),s=t.length+1,o=new pe(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let c=a.getNext().value,l=c.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return W.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new Lt((l,h)=>l-h),o=this.overlays.getIterator();for(;o.hasNext();){let l=o.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let h=s.get(l.largestBatchId);h===null&&(h=bl(),s=s.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let a=bl(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return W.resolve(a)}wt(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Cx(t,r));let s=this.kr.get(t);s===void 0&&(s=Ge(),this.kr.set(t,s)),this.kr.set(t,s.add(r.key))}};var zx=class{constructor(){this.sessionToken=zn.EMPTY_BYTE_STRING}getSessionToken(e){return W.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,W.resolve()}};var _g=class{constructor(){this.qr=new An(nn.Qr),this.$r=new An(nn.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){let r=new nn(e,t);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Wr(new nn(e,t))}Gr(e,t){e.forEach(r=>this.removeReference(r,t))}zr(e){let t=new pe(new xt([])),r=new nn(t,e),i=new nn(t,e+1),s=[];return this.$r.forEachInRange([r,i],o=>{this.Wr(o),s.push(o.key)}),s}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){let t=new pe(new xt([])),r=new nn(t,e),i=new nn(t,e+1),s=Ge();return this.$r.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let t=new nn(e,0),r=this.qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},nn=class{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return pe.comparator(e.key,t.key)||Ue(e.Hr,t.Hr)}static Ur(e,t){return Ue(e.Hr,t.Hr)||pe.comparator(e.key,t.key)}};var qx=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new An(nn.Qr)}checkEmpty(e){return W.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let s=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new bx(s,t,r,i);this.mutationQueue.push(o);for(let a of i)this.Yr=this.Yr.add(new nn(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return W.resolve(o)}lookupMutationBatch(e,t){return W.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.Xr(r),s=i<0?0:i;return W.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return W.resolve(this.mutationQueue.length===0?F1:this.er-1)}getAllMutationBatches(e){return W.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new nn(t,0),i=new nn(t,Number.POSITIVE_INFINITY),s=[];return this.Yr.forEachInRange([r,i],o=>{let a=this.Zr(o.Hr);s.push(a)}),W.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new An(Ue);return t.forEach(i=>{let s=new nn(i,0),o=new nn(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([s,o],a=>{r=r.add(a.Hr)})}),W.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,s=r;pe.isDocumentKey(s)||(s=s.child(""));let o=new nn(new pe(s),0),a=new An(Ue);return this.Yr.forEachWhile(c=>{let l=c.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(c.Hr)),!0)},o),W.resolve(this.ei(a))}ei(e){let t=[];return e.forEach(r=>{let i=this.Zr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){ft(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return W.forEach(t.mutations,i=>{let s=new nn(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,t){let r=new nn(t,0),i=this.Yr.firstAfterOrEqual(r);return W.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,W.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){let t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var Gx=class{constructor(e){this.ni=e,this.docs=(function(){return new Lt(pe.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.ni(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return W.resolve(r?r.document.mutableCopy():xi.newInvalidDocument(t))}getEntries(e,t){let r=_o();return t.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():xi.newInvalidDocument(i))}),W.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=_o(),o=t.path,a=new pe(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:l,value:{document:h}}=c.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||SX(TX(h),r)<=0||(i.has(h.key)||ww(t,h))&&(s=s.insert(h.key,h.mutableCopy()))}return W.resolve(s)}getAllFromCollectionGroup(e,t,r,i){we(9500)}ri(e,t){return W.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new Wx(this)}getSize(e){return W.resolve(this.size)}},Wx=class extends Ux{constructor(e){super(),this.Or=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Or.addEntry(e,i)):this.Or.removeEntry(r)}),W.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}};var Kx=class{constructor(e){this.persistence=e,this.ii=new yo(t=>B1(t),$1),this.lastRemoteSnapshotVersion=Me.min(),this.highestTargetId=0,this.si=0,this.oi=new _g,this.targetCount=0,this._i=yg.ar()}forEachTarget(e,t){return this.ii.forEach((r,i)=>t(i)),W.resolve()}getLastRemoteSnapshotVersion(e){return W.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return W.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),W.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.si&&(this.si=t),W.resolve()}hr(e){this.ii.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this._i=new yg(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,W.resolve()}updateTargetData(e,t){return this.hr(t),W.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,W.resolve()}removeTargets(e,t,r){let i=0,s=[];return this.ii.forEach((o,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.ii.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),W.waitFor(s).next(()=>i)}getTargetCount(e){return W.resolve(this.targetCount)}getTargetData(e,t){let r=this.ii.get(t)||null;return W.resolve(r)}addMatchingKeys(e,t,r){return this.oi.Kr(t,r),W.resolve()}removeMatchingKeys(e,t,r){this.oi.Gr(t,r);let i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),W.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),W.resolve()}getMatchingKeysForTargetId(e,t){let r=this.oi.Jr(t);return W.resolve(r)}containsKey(e,t){return W.resolve(this.oi.containsKey(t))}};var Q0=class{constructor(e,t){this.ai={},this.overlays={},this.ui=new O1(0),this.ci=!1,this.ci=!0,this.li=new zx,this.referenceDelegate=e(this),this.hi=new Kx(this),this.indexManager=new Mx,this.remoteDocumentCache=(function(i){return new Gx(i)})(r=>this.referenceDelegate.Pi(r)),this.serializer=new Px(t),this.Ti=new $x(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Hx,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ai[e.toKey()];return r||(r=new qx(t,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,r){oe("MemoryPersistence","Starting transaction:",e);let i=new Qx(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(s=>this.referenceDelegate.di(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ei(e,t){return W.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,t)))}},Qx=class extends rx{constructor(e){super(),this.currentSequenceNumber=e}},Yx=class n{constructor(e){this.persistence=e,this.Ai=new _g,this.Ri=null}static Vi(e){return new n(e)}get mi(){if(this.Ri)return this.Ri;throw we(60996)}addReference(e,t,r){return this.Ai.addReference(r,t),this.mi.delete(r.toString()),W.resolve()}removeReference(e,t,r){return this.Ai.removeReference(r,t),this.mi.add(r.toString()),W.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),W.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach(i=>this.mi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.mi.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}Ii(){this.Ri=new Set}di(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return W.forEach(this.mi,r=>{let i=pe.fromPath(r);return this.fi(e,i).next(s=>{s||t.removeEntry(i,Me.min())})}).next(()=>(this.Ri=null,t.apply(e)))}updateLimboDocument(e,t){return this.fi(e,t).next(r=>{r?this.mi.delete(t.toString()):this.mi.add(t.toString())})}Pi(e){return 0}fi(e,t){return W.or([()=>W.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}},Y0=class n{constructor(e,t){this.persistence=e,this.gi=new yo(r=>RX(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=SZ(this,t)}static Vi(e,t){return new n(e,t)}Ii(){}di(e){return W.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){let t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}yr(e){let t=0;return this.gr(e,r=>{t++}).next(()=>t)}gr(e,t){return W.forEach(this.gi,(r,i)=>this.Sr(e,r,i).next(s=>s?W.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ri(e,o=>this.Sr(e,o,t).next(a=>{a||(r++,s.removeEntry(o,Me.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),W.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),W.resolve()}removeReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),W.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),W.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=N0(e.data.value)),t}Sr(e,t,r){return W.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let i=this.gi.get(t);return W.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var Jx=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Is=r,this.ds=i}static Es(e,t){let r=Ge(),i=Ge();for(let s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new n(e,t.fromCache,r,i)}};var Xx=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var Zx=class{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return S2()?8:AX(bn())>0?6:4})()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,r,i){let s={result:null};return this.ps(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ys(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new Xx;return this.ws(e,t,o).next(a=>{if(s.result=a,this.Rs)return this.Ss(e,t,o,a.size)})}).next(()=>s.result)}Ss(e,t,r,i){return r.documentReadCount<this.Vs?(Ud()<=$e.DEBUG&&oe("QueryEngine","SDK will not create cache indexes for query:",jd(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),W.resolve()):(Ud()<=$e.DEBUG&&oe("QueryEngine","Query:",jd(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?(Ud()<=$e.DEBUG&&oe("QueryEngine","The SDK decides to create cache indexes for query:",jd(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ps(t))):W.resolve())}ps(e,t){if(rj(t))return W.resolve(null);let r=ps(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=_x(t,null,"F"),r=ps(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=Ge(...s);return this.gs.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let l=this.bs(t,a);return this.Ds(t,l,o,c.readTime)?this.ps(e,_x(t,null,"F")):this.vs(e,l,t,c)}))})))}ys(e,t,r,i){return rj(t)||i.isEqual(Me.min())?W.resolve(null):this.gs.getDocuments(e,r).next(s=>{let o=this.bs(t,s);return this.Ds(t,o,r,i)?W.resolve(null):(Ud()<=$e.DEBUG&&oe("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),jd(t)),this.vs(e,o,t,CX(i,ug)).next(a=>a))})}bs(e,t){let r=new An(h4(e));return t.forEach((i,s)=>{ww(e,s)&&(r=r.add(s))}),r}Ds(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}ws(e,t,r){return Ud()<=$e.DEBUG&&oe("QueryEngine","Using full collection scan to execute query:",jd(t)),this.gs.getDocumentsMatchingQuery(e,t,Al.min(),r)}vs(e,t,r,i){return this.gs.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}};var q1="LocalStore",DZ=3e8,e1=class{constructor(e,t,r,i){this.persistence=e,this.Cs=t,this.serializer=i,this.Fs=new Lt(Ue),this.Ms=new yo(s=>B1(s),$1),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Bx(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Fs))}};function AZ(n,e,t,r){return new e1(n,e,t,r)}async function N4(n,e){let t=Re(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.Ns(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{let o=[],a=[],c=Ge();for(let l of i){o.push(l.batchId);for(let h of l.mutations)c=c.add(h.key)}for(let l of s){a.push(l.batchId);for(let h of l.mutations)c=c.add(h.key)}return t.localDocuments.getDocuments(r,c).next(l=>({Bs:l,removedBatchIds:o,addedBatchIds:a}))})})}function xZ(n,e){let t=Re(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),s=t.Os.newChangeBuffer({trackRemovals:!0});return(function(a,c,l,h){let p=l.batch,m=p.keys(),b=W.resolve();return m.forEach(k=>{b=b.next(()=>h.getEntry(c,k)).next(O=>{let N=l.docVersions.get(k);ft(N!==null,48541),O.version.compareTo(N)<0&&(p.applyToRemoteDocument(O,l),O.isValidDocument()&&(O.setReadTime(l.commitVersion),h.addEntry(O)))})}),b.next(()=>a.mutationQueue.removeMutationBatch(c,p))})(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(a){let c=Ge();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(c=c.add(a.batch.mutations[l].key));return c})(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function P4(n){let e=Re(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.hi.getLastRemoteSnapshotVersion(t))}function RZ(n,e){let t=Re(n),r=e.snapshotVersion,i=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=t.Os.newChangeBuffer({trackRemovals:!0});i=t.Fs;let a=[];e.targetChanges.forEach((h,p)=>{let m=i.get(p);if(!m)return;a.push(t.hi.removeMatchingKeys(s,h.removedDocuments,p).next(()=>t.hi.addMatchingKeys(s,h.addedDocuments,p)));let b=m.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(p)!==null?b=b.withResumeToken(zn.EMPTY_BYTE_STRING,Me.min()).withLastLimboFreeSnapshotVersion(Me.min()):h.resumeToken.approximateByteSize()>0&&(b=b.withResumeToken(h.resumeToken,r)),i=i.insert(p,b),(function(O,N,H){return O.resumeToken.approximateByteSize()===0||N.snapshotVersion.toMicroseconds()-O.snapshotVersion.toMicroseconds()>=DZ?!0:H.addedDocuments.size+H.modifiedDocuments.size+H.removedDocuments.size>0})(m,b,h)&&a.push(t.hi.updateTargetData(s,b))});let c=_o(),l=Ge();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(kZ(s,o,e.documentUpdates).next(h=>{c=h.Ls,l=h.ks})),!r.isEqual(Me.min())){let h=t.hi.getLastRemoteSnapshotVersion(s).next(p=>t.hi.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(h)}return W.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,c,l)).next(()=>c)}).then(s=>(t.Fs=i,s))}function kZ(n,e,t){let r=Ge(),i=Ge();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=_o();return t.forEach((a,c)=>{let l=s.get(a);c.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(Me.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||c.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):oe(q1,"Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version)}),{Ls:o,ks:i}})}function NZ(n,e){let t=Re(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=F1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function PZ(n,e){let t=Re(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.hi.getTargetData(r,e).next(s=>s?(i=s,W.resolve(i)):t.hi.allocateTargetId(r).next(o=>(i=new mg(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.hi.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.Fs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(r.targetId,r),t.Ms.set(e,r.targetId)),r})}async function t1(n,e,t){let r=Re(n),i=r.Fs.get(e),s=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!oh(o))throw o;oe(q1,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(i.target)}function mj(n,e,t){let r=Re(n),i=Me.min(),s=Ge();return r.persistence.runTransaction("Execute query","readwrite",o=>(function(c,l,h){let p=Re(c),m=p.Ms.get(h);return m!==void 0?W.resolve(p.Fs.get(m)):p.hi.getTargetData(l,h)})(r,o,ps(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(o,a.targetId).next(c=>{s=c})}).next(()=>r.Cs.getDocumentsMatchingQuery(o,e,t?i:Me.min(),t?s:Ge())).next(a=>(MZ(r,WX(e),a),{documents:a,qs:s})))}function MZ(n,e,t){let r=n.xs.get(e)||Me.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.xs.set(e,r)}var J0=class{constructor(){this.activeTargetIds=ZX()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var n1=class{constructor(){this.Fo=new J0,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,r){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new J0,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var r1=class{xo(e){}shutdown(){}};var yj="ConnectivityMonitor",X0=class{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){oe(yj,"Network connectivity changed: AVAILABLE");for(let e of this.ko)e(0)}Lo(){oe(yj,"Network connectivity changed: UNAVAILABLE");for(let e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var k0=null;function i1(){return k0===null?k0=(function(){return 268435456+Math.round(2147483648*Math.random())})():k0++,"0x"+k0.toString(16)}var GA="RestConnection",OZ={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},s1=class{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===j0?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,t,r,i,s){let o=i1(),a=this.Go(e,t.toUriEncodedString());oe(GA,`Sending RPC '${e}' ${o}:`,a,r);let c={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(c,i,s);let{host:l}=new URL(a),h=fa(l);return this.jo(e,a,c,r,h).then(p=>(oe(GA,`Received RPC '${e}' ${o}: `,p),p),p=>{throw Ua(GA,`RPC '${e}' ${o} failed with error: `,p,"url: ",a,"request:",r),p})}Jo(e,t,r,i,s,o){return this.Wo(e,t,r,i,s)}zo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+ih})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}Go(e,t){let r=OZ[e];return`${this.$o}/v1/${t}:${r}`}terminate(){}};var o1=class{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}};var Hn="WebChannelConnection",a1=class extends s1{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,r,i,s){let o=i1();return new Promise((a,c)=>{let l=new jA;l.setWithCredentials(!0),l.listenOnce(BA.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case rg.NO_ERROR:let p=l.getResponseJson();oe(Hn,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(p)),a(p);break;case rg.TIMEOUT:oe(Hn,`RPC '${e}' ${o} timed out`),c(new ne(z.DEADLINE_EXCEEDED,"Request time out"));break;case rg.HTTP_ERROR:let m=l.getStatus();if(oe(Hn,`RPC '${e}' ${o} failed with status:`,m,"response text:",l.getResponseText()),m>0){let b=l.getResponseJson();Array.isArray(b)&&(b=b[0]);let k=b?.error;if(k&&k.status&&k.message){let O=(function(H){let Q=H.toLowerCase().replace(/_/g,"-");return Object.values(z).indexOf(Q)>=0?Q:z.UNKNOWN})(k.status);c(new ne(O,k.message))}else c(new ne(z.UNKNOWN,"Server responded with status "+l.getStatus()))}else c(new ne(z.UNAVAILABLE,"Connection failed."));break;default:we(9055,{c_:e,streamId:o,l_:l.getLastErrorCode(),h_:l.getLastError()})}}finally{oe(Hn,`RPC '${e}' ${o} completed.`)}});let h=JSON.stringify(i);oe(Hn,`RPC '${e}' ${o} sending request:`,i),l.send(t,"POST",h,r,15)})}P_(e,t,r){let i=i1(),s=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=zA(),a=HA(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(c.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(c.useFetchStreams=!0),this.zo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;let h=s.join("");oe(Hn,`Creating RPC '${e}' stream ${i}: ${h}`,c);let p=o.createWebChannel(h,c);this.T_(p);let m=!1,b=!1,k=new o1({Ho:N=>{b?oe(Hn,`Not sending because RPC '${e}' stream ${i} is closed:`,N):(m||(oe(Hn,`Opening RPC '${e}' stream ${i} transport.`),p.open(),m=!0),oe(Hn,`RPC '${e}' stream ${i} sending:`,N),p.send(N))},Yo:()=>p.close()}),O=(N,H,Q)=>{N.listen(H,Z=>{try{Q(Z)}catch(Ee){setTimeout(()=>{throw Ee},0)}})};return O(p,Ld.EventType.OPEN,()=>{b||(oe(Hn,`RPC '${e}' stream ${i} transport opened.`),k.s_())}),O(p,Ld.EventType.CLOSE,()=>{b||(b=!0,oe(Hn,`RPC '${e}' stream ${i} transport closed`),k.__(),this.I_(p))}),O(p,Ld.EventType.ERROR,N=>{b||(b=!0,Ua(Hn,`RPC '${e}' stream ${i} transport errored. Name:`,N.name,"Message:",N.message),k.__(new ne(z.UNAVAILABLE,"The operation could not be completed")))}),O(p,Ld.EventType.MESSAGE,N=>{var H;if(!b){let Q=N.data[0];ft(!!Q,16349);let Z=Q,Ee=Z?.error||((H=Z[0])===null||H===void 0?void 0:H.error);if(Ee){oe(Hn,`RPC '${e}' stream ${i} received error:`,Ee);let Je=Ee.status,Ie=(function(I){let C=tn[I];if(C!==void 0)return E4(C)})(Je),T=Ee.message;Ie===void 0&&(Ie=z.INTERNAL,T="Unknown error status: "+Je+" with message "+Ee.message),b=!0,k.__(new ne(Ie,T)),p.close()}else oe(Hn,`RPC '${e}' stream ${i} received:`,Q),k.a_(Q)}}),O(a,$A.STAT_EVENT,N=>{N.stat===A0.PROXY?oe(Hn,`RPC '${e}' stream ${i} detected buffering proxy`):N.stat===A0.NOPROXY&&oe(Hn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{k.o_()},0),k}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(t=>t===e)}};function WA(){return typeof document<"u"?document:null}function Iw(n){return new Ax(n,!0)}var Z0=class{constructor(e,t,r=1e3,i=1.5,s=6e4){this.Fi=e,this.timerId=t,this.d_=r,this.E_=i,this.A_=s,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();let t=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,t-r);i>0&&oe("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}};var _j="PersistentStream",ew=class{constructor(e,t,r,i,s,o,a,c){this.Fi=e,this.w_=r,this.S_=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new Z0(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===z.RESOURCE_EXHAUSTED?(po(t.toString()),po("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(t)}U_(){}auth(){this.state=1;let e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===t&&this.W_(r,i)},r=>{e(()=>{let i=new ne(z.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(e,t){let r=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>++this.C_==1?this.j_(i):this.onNext(i))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return oe(_j,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget(()=>this.b_===e?t():(oe(_j,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},c1=class extends ew{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();let t=fZ(this.serializer,e),r=(function(s){if(!("targetChange"in s))return Me.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?Me.min():o.readTime?gs(o.readTime):Me.min()})(e);return this.listener.J_(t,r)}H_(e){let t={};t.database=Nx(this.serializer),t.addTarget=(function(s,o){let a,c=o.target;if(a=mx(c)?{documents:mZ(s,c)}:{query:yZ(s,c).Vt},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=C4(s,o.resumeToken);let l=xx(s,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(Me.min())>0){a.readTime=W0(s,o.snapshotVersion.toTimestamp());let l=xx(s,o.expectedCount);l!==null&&(a.expectedCount=l)}return a})(this.serializer,e);let r=vZ(this.serializer,e);r&&(t.labels=r),this.k_(t)}Y_(e){let t={};t.database=Nx(this.serializer),t.removeTarget=e,this.k_(t)}},l1=class extends ew{constructor(e,t,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return ft(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ft(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){ft(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();let t=gZ(e.writeResults,e.commitTime),r=gs(e.commitTime);return this.listener.ta(r,t)}na(){let e={};e.database=Nx(this.serializer),this.k_(e)}X_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>pZ(this.serializer,r))};this.k_(t)}};var u1=class{},d1=class extends u1{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new ne(z.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Wo(e,Rx(t,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new ne(z.UNKNOWN,s.toString())})}Jo(e,t,r,i,s){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Jo(e,Rx(t,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ne(z.UNKNOWN,o.toString())})}terminate(){this.ra=!0,this.connection.terminate()}},h1=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(po(t),this._a=!1):oe("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}};var Ml="RemoteStore",f1=class{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=s,this.Ea.xo(o=>{r.enqueueAndForget(async()=>{Ol(this)&&(oe(Ml,"Restarting streams for network reachability change."),await(async function(c){let l=Re(c);l.Ia.add(4),await Cg(l),l.Aa.set("Unknown"),l.Ia.delete(4),await bw(l)})(this))})}),this.Aa=new h1(r,i)}};async function bw(n){if(Ol(n))for(let e of n.da)await e(!0)}async function Cg(n){for(let e of n.da)await e(!1)}function M4(n,e){let t=Re(n);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),Q1(t)?K1(t):ah(t).x_()&&W1(t,e))}function G1(n,e){let t=Re(n),r=ah(t);t.Ta.delete(e),r.x_()&&O4(t,e),t.Ta.size===0&&(r.x_()?r.B_():Ol(t)&&t.Aa.set("Unknown"))}function W1(n,e){if(n.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Me.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}ah(n).H_(e)}function O4(n,e){n.Ra.$e(e),ah(n).Y_(e)}function K1(n){n.Ra=new Dx({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Ta.get(e)||null,lt:()=>n.datastore.serializer.databaseId}),ah(n).start(),n.Aa.aa()}function Q1(n){return Ol(n)&&!ah(n).M_()&&n.Ta.size>0}function Ol(n){return Re(n).Ia.size===0}function F4(n){n.Ra=void 0}async function FZ(n){n.Aa.set("Online")}async function VZ(n){n.Ta.forEach((e,t)=>{W1(n,e)})}async function LZ(n,e){F4(n),Q1(n)?(n.Aa.la(e),K1(n)):n.Aa.set("Unknown")}async function UZ(n,e,t){if(n.Aa.set("Online"),e instanceof q0&&e.state===2&&e.cause)try{await(async function(i,s){let o=s.cause;for(let a of s.targetIds)i.Ta.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.Ta.delete(a),i.Ra.removeTarget(a))})(n,e)}catch(r){oe(Ml,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await tw(n,r)}else if(e instanceof zd?n.Ra.Ye(e):e instanceof z0?n.Ra.it(e):n.Ra.et(e),!t.isEqual(Me.min()))try{let r=await P4(n.localStore);t.compareTo(r)>=0&&await(function(s,o){let a=s.Ra.Pt(o);return a.targetChanges.forEach((c,l)=>{if(c.resumeToken.approximateByteSize()>0){let h=s.Ta.get(l);h&&s.Ta.set(l,h.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,l)=>{let h=s.Ta.get(c);if(!h)return;s.Ta.set(c,h.withResumeToken(zn.EMPTY_BYTE_STRING,h.snapshotVersion)),O4(s,c);let p=new mg(h.target,c,l,h.sequenceNumber);W1(s,p)}),s.remoteSyncer.applyRemoteEvent(a)})(n,t)}catch(r){oe(Ml,"Failed to raise snapshot:",r),await tw(n,r)}}async function tw(n,e,t){if(!oh(e))throw e;n.Ia.add(1),await Cg(n),n.Aa.set("Offline"),t||(t=()=>P4(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{oe(Ml,"Retrying IndexedDB access"),await t(),n.Ia.delete(1),await bw(n)})}function V4(n,e){return e().catch(t=>tw(n,t,e))}async function Ew(n){let e=Re(n),t=$a(e),r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:F1;for(;jZ(e);)try{let i=await NZ(e.localStore,r);if(i===null){e.Pa.length===0&&t.B_();break}r=i.batchId,BZ(e,i)}catch(i){await tw(e,i)}L4(e)&&U4(e)}function jZ(n){return Ol(n)&&n.Pa.length<10}function BZ(n,e){n.Pa.push(e);let t=$a(n);t.x_()&&t.Z_&&t.X_(e.mutations)}function L4(n){return Ol(n)&&!$a(n).M_()&&n.Pa.length>0}function U4(n){$a(n).start()}async function $Z(n){$a(n).na()}async function HZ(n){let e=$a(n);for(let t of n.Pa)e.X_(t.mutations)}async function zZ(n,e,t){let r=n.Pa.shift(),i=Ex.from(r,e,t);await V4(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),await Ew(n)}async function qZ(n,e){e&&$a(n).Z_&&await(async function(r,i){if((function(o){return oZ(o)&&o!==z.ABORTED})(i.code)){let s=r.Pa.shift();$a(r).N_(),await V4(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await Ew(r)}})(n,e),L4(n)&&U4(n)}async function vj(n,e){let t=Re(n);t.asyncQueue.verifyOperationInProgress(),oe(Ml,"RemoteStore received new credentials");let r=Ol(t);t.Ia.add(3),await Cg(t),r&&t.Aa.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),await bw(t)}async function GZ(n,e){let t=Re(n);e?(t.Ia.delete(2),await bw(t)):e||(t.Ia.add(2),await Cg(t),t.Aa.set("Unknown"))}function ah(n){return n.Va||(n.Va=(function(t,r,i){let s=Re(t);return s.ia(),new c1(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(n.datastore,n.asyncQueue,{Zo:FZ.bind(null,n),e_:VZ.bind(null,n),n_:LZ.bind(null,n),J_:UZ.bind(null,n)}),n.da.push(async e=>{e?(n.Va.N_(),Q1(n)?K1(n):n.Aa.set("Unknown")):(await n.Va.stop(),F4(n))})),n.Va}function $a(n){return n.ma||(n.ma=(function(t,r,i){let s=Re(t);return s.ia(),new l1(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:$Z.bind(null,n),n_:qZ.bind(null,n),ea:HZ.bind(null,n),ta:zZ.bind(null,n)}),n.da.push(async e=>{e?(n.ma.N_(),await Ew(n)):(await n.ma.stop(),n.Pa.length>0&&(oe(Ml,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))})),n.ma}var p1=class n{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Ai,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){let o=Date.now()+r,a=new n(e,t,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ne(z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Y1(n,e){if(po("AsyncQueue",`${e}: ${n}`),oh(n))return new ne(z.UNAVAILABLE,`${e}: ${n}`);throw n}var nw=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||pe.comparator(t.key,r.key):(t,r)=>pe.comparator(t.key,r.key),this.keyedMap=ig(),this.sortedSet=new Lt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var rw=class{constructor(){this.fa=new Lt(pe.comparator)}track(e){let t=e.doc.key,r=this.fa.get(t);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(t,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(t):e.type===1&&r.type===2?this.fa=this.fa.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):we(63341,{At:e,ga:r}):this.fa=this.fa.insert(t,e)}pa(){let e=[];return this.fa.inorderTraversal((t,r)=>{e.push(r)}),e}},eh=class n{constructor(e,t,r,i,s,o,a,c,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,s){let o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new n(e,t,nw.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&vw(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var g1=class{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}},m1=class{constructor(){this.queries=wj(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,r){let i=Re(t),s=i.queries;i.queries=wj(),s.forEach((o,a)=>{for(let c of a.wa)c.onError(r)})})(this,new ne(z.ABORTED,"Firestore shutting down"))}};function wj(){return new yo(n=>d4(n),vw)}async function J1(n,e){let t=Re(n),r=3,i=e.query,s=t.queries.get(i);s?!s.Sa()&&e.ba()&&(r=2):(s=new g1,r=e.ba()?0:1);try{switch(r){case 0:s.ya=await t.onListen(i,!0);break;case 1:s.ya=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(o){let a=Y1(o,`Initialization of query '${jd(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,s),s.wa.push(e),e.va(t.onlineState),s.ya&&e.Ca(s.ya)&&Z1(t)}async function X1(n,e){let t=Re(n),r=e.query,i=3,s=t.queries.get(r);if(s){let o=s.wa.indexOf(e);o>=0&&(s.wa.splice(o,1),s.wa.length===0?i=e.ba()?0:1:!s.Sa()&&e.ba()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function WZ(n,e){let t=Re(n),r=!1;for(let i of e){let s=i.query,o=t.queries.get(s);if(o){for(let a of o.wa)a.Ca(i)&&(r=!0);o.ya=i}}r&&Z1(t)}function KZ(n,e,t){let r=Re(n),i=r.queries.get(e);if(i)for(let s of i.wa)s.onError(t);r.queries.delete(e)}function Z1(n){n.Da.forEach(e=>{e.next()})}var y1,Ij;(Ij=y1||(y1={})).Fa="default",Ij.Cache="cache";var vg=class{constructor(e,t,r){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new eh(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;let r=t!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;let t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=eh.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==y1.Cache}};var iw=class{constructor(e){this.key=e}},sw=class{constructor(e){this.key=e}},_1=class{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=Ge(),this.mutatedKeys=Ge(),this.Xa=h4(e),this.eu=new nw(this.Xa)}get tu(){return this.Ha}nu(e,t){let r=t?t.ru:new rw,i=t?t.eu:this.eu,s=t?t.mutatedKeys:this.mutatedKeys,o=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let m=i.get(h),b=ww(this.query,p)?p:null,k=!!m&&this.mutatedKeys.has(m.key),O=!!b&&(b.hasLocalMutations||this.mutatedKeys.has(b.key)&&b.hasCommittedMutations),N=!1;m&&b?m.data.isEqual(b.data)?k!==O&&(r.track({type:3,doc:b}),N=!0):this.iu(m,b)||(r.track({type:2,doc:b}),N=!0,(c&&this.Xa(b,c)>0||l&&this.Xa(b,l)<0)&&(a=!0)):!m&&b?(r.track({type:0,doc:b}),N=!0):m&&!b&&(r.track({type:1,doc:m}),N=!0,(c||l)&&(a=!0)),N&&(b?(o=o.add(b),s=O?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{eu:o,ru:r,Ds:a,mutatedKeys:s}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let s=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;let o=e.ru.pa();o.sort((h,p)=>(function(b,k){let O=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return we(20277,{At:N})}};return O(b)-O(k)})(h.type,p.type)||this.Xa(h.doc,p.doc)),this.su(r),i=i!=null&&i;let a=t&&!i?this.ou():[],c=this.Za.size===0&&this.current&&!i?1:0,l=c!==this.Ya;return this.Ya=c,o.length!==0||l?{snapshot:new eh(this.query,e.eu,s,o,e.mutatedKeys,c===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:a}:{_u:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new rw,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(t=>this.Ha=this.Ha.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ha=this.Ha.delete(t)),this.current=e.current)}ou(){if(!this.current)return[];let e=this.Za;this.Za=Ge(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});let t=[];return e.forEach(r=>{this.Za.has(r)||t.push(new sw(r))}),this.Za.forEach(r=>{e.has(r)||t.push(new iw(r))}),t}uu(e){this.Ha=e.qs,this.Za=Ge();let t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return eh.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}},eR="SyncEngine",v1=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},w1=class{constructor(e){this.key=e,this.lu=!1}},I1=class{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.hu={},this.Pu=new yo(a=>d4(a),vw),this.Tu=new Map,this.Iu=new Set,this.du=new Lt(pe.comparator),this.Eu=new Map,this.Au=new _g,this.Ru={},this.Vu=new Map,this.mu=yg.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}};async function QZ(n,e,t=!0){let r=q4(n),i,s=r.Pu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.cu()):i=await j4(r,e,t,!0),i}async function YZ(n,e){let t=q4(n);await j4(t,e,!0,!1)}async function j4(n,e,t,r){let i=await PZ(n.localStore,ps(e)),s=i.targetId,o=n.sharedClientState.addLocalQueryTarget(s,t),a;return r&&(a=await JZ(n,e,s,o==="current",i.resumeToken)),n.isPrimaryClient&&t&&M4(n.remoteStore,i),a}async function JZ(n,e,t,r,i){n.gu=(p,m,b)=>(async function(O,N,H,Q){let Z=N.view.nu(H);Z.Ds&&(Z=await mj(O.localStore,N.query,!1).then(({documents:T})=>N.view.nu(T,Z)));let Ee=Q&&Q.targetChanges.get(N.targetId),Je=Q&&Q.targetMismatches.get(N.targetId)!=null,Ie=N.view.applyChanges(Z,O.isPrimaryClient,Ee,Je);return Ej(O,N.targetId,Ie._u),Ie.snapshot})(n,p,m,b);let s=await mj(n.localStore,e,!0),o=new _1(e,s.qs),a=o.nu(s.documents),c=gg.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),l=o.applyChanges(a,n.isPrimaryClient,c);Ej(n,t,l._u);let h=new v1(e,t,o);return n.Pu.set(e,h),n.Tu.has(t)?n.Tu.get(t).push(e):n.Tu.set(t,[e]),l.snapshot}async function XZ(n,e,t){let r=Re(n),i=r.Pu.get(e),s=r.Tu.get(i.targetId);if(s.length>1)return r.Tu.set(i.targetId,s.filter(o=>!vw(o,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await t1(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&G1(r.remoteStore,i.targetId),b1(r,i.targetId)}).catch(sh)):(b1(r,i.targetId),await t1(r.localStore,i.targetId,!0))}async function ZZ(n,e){let t=Re(n),r=t.Pu.get(e),i=t.Tu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),G1(t.remoteStore,r.targetId))}async function eee(n,e,t){let r=aee(n);try{let i=await(function(o,a){let c=Re(o),l=on.now(),h=a.reduce((b,k)=>b.add(k.key),Ge()),p,m;return c.persistence.runTransaction("Locally write mutations","readwrite",b=>{let k=_o(),O=Ge();return c.Os.getEntries(b,h).next(N=>{k=N,k.forEach((H,Q)=>{Q.isValidDocument()||(O=O.add(H))})}).next(()=>c.localDocuments.getOverlayedDocuments(b,k)).next(N=>{p=N;let H=[];for(let Q of a){let Z=sZ(Q,p.get(Q.key).overlayedDocument);Z!=null&&H.push(new ys(Q.key,Z,i4(Z.value.mapValue),fo.exists(!0)))}return c.mutationQueue.addMutationBatch(b,l,H,a)}).next(N=>{m=N;let H=N.applyToLocalDocumentSet(p,O);return c.documentOverlayCache.saveOverlays(b,N.batchId,H)})}).then(()=>({batchId:m.batchId,changes:p4(p)}))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(o,a,c){let l=o.Ru[o.currentUser.toKey()];l||(l=new Lt(Ue)),l=l.insert(a,c),o.Ru[o.currentUser.toKey()]=l})(r,i.batchId,t),await Tg(r,i.changes),await Ew(r.remoteStore)}catch(i){let s=Y1(i,"Failed to persist write");t.reject(s)}}async function B4(n,e){let t=Re(n);try{let r=await RZ(t.localStore,e);e.targetChanges.forEach((i,s)=>{let o=t.Eu.get(s);o&&(ft(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.lu=!0:i.modifiedDocuments.size>0?ft(o.lu,14607):i.removedDocuments.size>0&&(ft(o.lu,42227),o.lu=!1))}),await Tg(t,r,e)}catch(r){await sh(r)}}function bj(n,e,t){let r=Re(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Pu.forEach((s,o)=>{let a=o.view.va(e);a.snapshot&&i.push(a.snapshot)}),(function(o,a){let c=Re(o);c.onlineState=a;let l=!1;c.queries.forEach((h,p)=>{for(let m of p.wa)m.va(a)&&(l=!0)}),l&&Z1(c)})(r.eventManager,e),i.length&&r.hu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function tee(n,e,t){let r=Re(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Eu.get(e),s=i&&i.key;if(s){let o=new Lt(pe.comparator);o=o.insert(s,xi.newNoDocument(s,Me.min()));let a=Ge().add(s),c=new H0(Me.min(),new Map,new Lt(Ue),o,a);await B4(r,c),r.du=r.du.remove(s),r.Eu.delete(e),tR(r)}else await t1(r.localStore,e,!1).then(()=>b1(r,e,t)).catch(sh)}async function nee(n,e){let t=Re(n),r=e.batch.batchId;try{let i=await xZ(t.localStore,e);H4(t,r,null),$4(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await Tg(t,i)}catch(i){await sh(i)}}async function ree(n,e,t){let r=Re(n);try{let i=await(function(o,a){let c=Re(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return c.mutationQueue.lookupMutationBatch(l,a).next(p=>(ft(p!==null,37113),h=p.keys(),c.mutationQueue.removeMutationBatch(l,p))).next(()=>c.mutationQueue.performConsistencyCheck(l)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>c.localDocuments.getDocuments(l,h))})})(r.localStore,e);H4(r,e,t),$4(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await Tg(r,i)}catch(i){await sh(i)}}function $4(n,e){(n.Vu.get(e)||[]).forEach(t=>{t.resolve()}),n.Vu.delete(e)}function H4(n,e,t){let r=Re(n),i=r.Ru[r.currentUser.toKey()];if(i){let s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Ru[r.currentUser.toKey()]=i}}function b1(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Tu.get(e))n.Pu.delete(r),t&&n.hu.pu(r,t);n.Tu.delete(e),n.isPrimaryClient&&n.Au.zr(e).forEach(r=>{n.Au.containsKey(r)||z4(n,r)})}function z4(n,e){n.Iu.delete(e.path.canonicalString());let t=n.du.get(e);t!==null&&(G1(n.remoteStore,t),n.du=n.du.remove(e),n.Eu.delete(t),tR(n))}function Ej(n,e,t){for(let r of t)r instanceof iw?(n.Au.addReference(r.key,e),iee(n,r)):r instanceof sw?(oe(eR,"Document no longer in limbo: "+r.key),n.Au.removeReference(r.key,e),n.Au.containsKey(r.key)||z4(n,r.key)):we(19791,{yu:r})}function iee(n,e){let t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Iu.has(r)||(oe(eR,"New document in limbo: "+t),n.Iu.add(r),tR(n))}function tR(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){let e=n.Iu.values().next().value;n.Iu.delete(e);let t=new pe(xt.fromString(e)),r=n.mu.next();n.Eu.set(r,new w1(t)),n.du=n.du.insert(t,r),M4(n.remoteStore,new mg(ps(_w(t.path)),r,"TargetPurposeLimboResolution",O1.ue))}}async function Tg(n,e,t){let r=Re(n),i=[],s=[],o=[];r.Pu.isEmpty()||(r.Pu.forEach((a,c)=>{o.push(r.gu(c,e,t).then(l=>{var h;if((l||t)&&r.isPrimaryClient){let p=l?!l.fromCache:(h=t?.targetChanges.get(c.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(c.targetId,p?"current":"not-current")}if(l){i.push(l);let p=Jx.Es(c.targetId,l);s.push(p)}}))}),await Promise.all(o),r.hu.J_(i),await(async function(c,l){let h=Re(c);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>W.forEach(l,m=>W.forEach(m.Is,b=>h.persistence.referenceDelegate.addReference(p,m.targetId,b)).next(()=>W.forEach(m.ds,b=>h.persistence.referenceDelegate.removeReference(p,m.targetId,b)))))}catch(p){if(!oh(p))throw p;oe(q1,"Failed to update sequence numbers: "+p)}for(let p of l){let m=p.targetId;if(!p.fromCache){let b=h.Fs.get(m),k=b.snapshotVersion,O=b.withLastLimboFreeSnapshotVersion(k);h.Fs=h.Fs.insert(m,O)}}})(r.localStore,s))}async function see(n,e){let t=Re(n);if(!t.currentUser.isEqual(e)){oe(eR,"User change. New user:",e.toKey());let r=await N4(t.localStore,e);t.currentUser=e,(function(s,o){s.Vu.forEach(a=>{a.forEach(c=>{c.reject(new ne(z.CANCELLED,o))})}),s.Vu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Tg(t,r.Bs)}}function oee(n,e){let t=Re(n),r=t.Eu.get(e);if(r&&r.lu)return Ge().add(r.key);{let i=Ge(),s=t.Tu.get(e);if(!s)return i;for(let o of s){let a=t.Pu.get(o);i=i.unionWith(a.view.tu)}return i}}function q4(n){let e=Re(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=B4.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=oee.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=tee.bind(null,e),e.hu.J_=WZ.bind(null,e.eventManager),e.hu.pu=KZ.bind(null,e.eventManager),e}function aee(n){let e=Re(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=nee.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=ree.bind(null,e),e}var G4=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Iw(t.databaseInfo.databaseId),this.sharedClientState=this.bu(t),this.persistence=this.Du(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Cu(t,this.localStore),this.indexBackfillerScheduler=this.Fu(t,this.localStore)}Cu(t,r){return null}Fu(t,r){return null}vu(t){return AZ(this.persistence,new Zx,t.initialUser,this.serializer)}Du(t){return new Q0(Yx.Vi,this.serializer)}bu(t){return new n1}async terminate(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}return n.provider={build:()=>new n},n})(),E1=class extends G4{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){ft(this.persistence.referenceDelegate instanceof Y0,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new Vx(r,e.asyncQueue,t)}Du(e){let t=this.cacheSizeBytes!==void 0?Kr.withCacheSize(this.cacheSizeBytes):Kr.DEFAULT;return new Q0(r=>Y0.Vi(r,t),this.serializer)}};var cee=(()=>{class n{async initialize(t,r){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>bj(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=see.bind(null,this.syncEngine),await GZ(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new m1})()}createDatastore(t){let r=Iw(t.databaseInfo.databaseId),i=(function(o){return new a1(o)})(t.databaseInfo);return(function(o,a,c,l){return new d1(o,a,c,l)})(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return(function(i,s,o,a,c){return new f1(i,s,o,a,c)})(this.localStore,this.datastore,t.asyncQueue,r=>bj(this.syncEngine,r,0),(function(){return X0.C()?new X0:new r1})())}createSyncEngine(t,r){return(function(s,o,a,c,l,h,p){let m=new I1(s,o,a,c,l,h);return p&&(m.fu=!0),m})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}async terminate(){var t,r;await(async function(s){let o=Re(s);oe(Ml,"RemoteStore shutting down."),o.Ia.add(5),await Cg(o),o.Ea.shutdown(),o.Aa.set("Unknown")})(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()}}return n.provider={build:()=>new n},n})();var wg=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):po("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var Ha="FirestoreClient",C1=class{constructor(e,t,r,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Dn.UNAUTHENTICATED,this.clientId=lg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{oe(Ha,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(oe(Ha,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Ai;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=Y1(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}};async function KA(n,e){n.asyncQueue.verifyOperationInProgress(),oe(Ha,"Initializing OfflineComponentProvider");let t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async i=>{r.isEqual(i)||(await N4(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>{Ua("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then(()=>{oe("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{Ua("Terminating Firestore due to IndexedDb database deletion failed",i)})}),n._offlineComponents=e}async function Cj(n,e){n.asyncQueue.verifyOperationInProgress();let t=await lee(n);oe(Ha,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>vj(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>vj(e.remoteStore,i)),n._onlineComponents=e}async function lee(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){oe(Ha,"Using user provided OfflineComponentProvider");try{await KA(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===z.FAILED_PRECONDITION||i.code===z.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;Ua("Error using user provided cache. Falling back to memory cache: "+t),await KA(n,new G4)}}else oe(Ha,"Using default OfflineComponentProvider"),await KA(n,new E1(void 0));return n._offlineComponents}async function W4(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(oe(Ha,"Using user provided OnlineComponentProvider"),await Cj(n,n._uninitializedComponentsProvider._online)):(oe(Ha,"Using default OnlineComponentProvider"),await Cj(n,new cee))),n._onlineComponents}function uee(n){return W4(n).then(e=>e.syncEngine)}async function ow(n){let e=await W4(n),t=e.eventManager;return t.onListen=QZ.bind(null,e.syncEngine),t.onUnlisten=XZ.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=YZ.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=ZZ.bind(null,e.syncEngine),t}function dee(n,e,t={}){let r=new Ai;return n.asyncQueue.enqueueAndForget(async()=>(function(s,o,a,c,l){let h=new wg({next:m=>{h.Ou(),o.enqueueAndForget(()=>X1(s,p));let b=m.docs.has(a);!b&&m.fromCache?l.reject(new ne(z.UNAVAILABLE,"Failed to get document because the client is offline.")):b&&m.fromCache&&c&&c.source==="server"?l.reject(new ne(z.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(m)},error:m=>l.reject(m)}),p=new vg(_w(a.path),h,{includeMetadataChanges:!0,ka:!0});return J1(s,p)})(await ow(n),n.asyncQueue,e,t,r)),r.promise}function hee(n,e,t={}){let r=new Ai;return n.asyncQueue.enqueueAndForget(async()=>(function(s,o,a,c,l){let h=new wg({next:m=>{h.Ou(),o.enqueueAndForget(()=>X1(s,p)),m.fromCache&&c.source==="server"?l.reject(new ne(z.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(m)},error:m=>l.reject(m)}),p=new vg(a,h,{includeMetadataChanges:!0,ka:!0});return J1(s,p)})(await ow(n),n.asyncQueue,e,t,r)),r.promise}function K4(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var Tj=new Map;var Q4="firestore.googleapis.com",Sj=!0,aw=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new ne(z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Q4,this.ssl=Sj}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:Sj;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=k4;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<TZ)throw new ne(z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}EX("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=K4((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new ne(z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new ne(z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new ne(z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},th=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new aw({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ne(z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ne(z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new aw(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new QA;switch(r.type){case"firstParty":return new ZA(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ne(z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){let r=Tj.get(t);r&&(oe("ComponentProvider","Removing Datastore"),Tj.delete(t),r.terminate())})(this),Promise.resolve()}};function Y4(n,e,t,r={}){var i;n=Yr(n,th);let s=fa(e),o=n._getSettings(),a=Object.assign(Object.assign({},o),{emulatorOptions:n._getEmulatorOptions()}),c=`${e}:${t}`;s&&(tv(`https://${c}`),nv("Firestore",!0)),o.host!==Q4&&o.host!==c&&Ua("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let l=Object.assign(Object.assign({},o),{host:c,ssl:s,emulatorOptions:r});if(!is(l,a)&&(n._setSettings(l),r.mockUserToken)){let h,p;if(typeof r.mockUserToken=="string")h=r.mockUserToken,p=Dn.MOCK_USER;else{h=w2(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new ne(z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new Dn(m)}n._authCredentials=new YA(new O0(h,p))}}var za=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},xn=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Oa(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}toJSON(){return{type:n._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(Eg(t,n._jsonSchema))return new n(e,r||null,new pe(xt.fromString(t.referencePath)))}};xn._jsonSchemaVersion="firestore/documentReference/1.0",xn._jsonSchema={type:sn("string",xn._jsonSchemaVersion),referencePath:sn("string")};var Oa=class n extends za{constructor(e,t,r){super(e,t,_w(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new xn(this.firestore,null,new pe(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function J4(n,e,...t){if(n=mn(n),Mj("collection","path",e),n instanceof th){let r=xt.fromString(e,...t);return zU(r),new Oa(n,null,r)}{if(!(n instanceof xn||n instanceof Oa))throw new ne(z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(xt.fromString(e,...t));return zU(r),new Oa(n.firestore,null,r)}}function nR(n,e,...t){if(n=mn(n),arguments.length===1&&(e=lg.newId()),Mj("doc","path",e),n instanceof th){let r=xt.fromString(e,...t);return HU(r),new xn(n,null,new pe(r))}{if(!(n instanceof xn||n instanceof Oa))throw new ne(z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(xt.fromString(e,...t));return HU(r),new xn(n.firestore,n instanceof Oa?n.converter:null,new pe(r))}}var Dj="AsyncQueue",cw=class{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new Z0(this,"async_queue_retry"),this.oc=()=>{let r=WA();r&&oe(Dj,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;let t=WA();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;let t=WA();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});let t=new Ai;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!oh(e))throw e;oe(Dj,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){let t=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,po("INTERNAL UNHANDLED ERROR: ",Aj(r)),r}).then(r=>(this.nc=!1,r))));return this._c=t,t}enqueueAfterDelay(e,t,r){this.ac(),this.sc.indexOf(e)>-1&&(t=0);let i=p1.createAndSchedule(this,e,t,r,s=>this.lc(s));return this.ec.push(i),i}ac(){this.tc&&we(47125,{hc:Aj(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(let t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){let t=this.ec.indexOf(e);this.ec.splice(t,1)}};function Aj(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}function xj(n){return(function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let s of r)if(s in i&&typeof i[s]=="function")return!0;return!1})(n,["next","error","complete"])}var _s=class extends th{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new cw,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new cw(e),this._firestoreClient=void 0,await e}}};function X4(n,e){let t=typeof n=="object"?n:tl(),r=typeof n=="string"?n:e||j0,i=rd(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let s=v2("firestore");s&&Y4(i,...s)}return i}function Cw(n){if(n._terminated)throw new ne(z.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||fee(n),n._firestoreClient}function fee(n){var e,t,r;let i=n._freezeSettings(),s=(function(a,c,l,h){return new ix(a,c,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,K4(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)})(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new C1(n._authCredentials,n._appCheckCredentials,n._queue,s,n._componentsProvider&&(function(a){let c=a?._online.build();return{_offline:a?._offline.build(c),_online:c}})(n._componentsProvider))}var Fa=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(zn.fromBase64String(e))}catch(t){throw new ne(z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(zn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Eg(e,n._jsonSchema))return n.fromBase64String(e.bytes)}};Fa._jsonSchemaVersion="firestore/bytes/1.0",Fa._jsonSchema={type:sn("string",Fa._jsonSchemaVersion),bytes:sn("string")};var nh=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ne(z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Rr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var rh=class{constructor(e){this._methodName=e}};var Va=class n{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ne(z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ne(z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ue(this._lat,e._lat)||Ue(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:n._jsonSchemaVersion}}static fromJSON(e){if(Eg(e,n._jsonSchema))return new n(e.latitude,e.longitude)}};Va._jsonSchemaVersion="firestore/geoPoint/1.0",Va._jsonSchema={type:sn("string",Va._jsonSchemaVersion),latitude:sn("number"),longitude:sn("number")};var La=class n{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0})(this._values,e._values)}toJSON(){return{type:n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Eg(e,n._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new n(e.vectorValues);throw new ne(z.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};La._jsonSchemaVersion="firestore/vectorValue/1.0",La._jsonSchema={type:sn("string",La._jsonSchemaVersion),vectorValues:sn("object")};var pee=/^__.*__$/,T1=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new ys(e,this.data,this.fieldMask,t,this.fieldTransforms):new Pl(e,this.data,t,this.fieldTransforms)}},lw=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new ys(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function Z4(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw we(40011,{Ec:n})}}var S1=class n{constructor(e,t,r,i,s,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Ac(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.fc(e),i}gc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return dw(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(Z4(this.Ec)&&pee.test(e))throw this.wc('Document fields cannot begin and end with "__"')}},D1=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Iw(e)}Dc(e,t,r,i=!1){return new S1({Ec:e,methodName:t,bc:r,path:Rr.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function rR(n){let e=n._freezeSettings(),t=Iw(n._databaseId);return new D1(n._databaseId,!!e.ignoreUndefinedProperties,t)}function gee(n,e,t,r,i,s={}){let o=n.Dc(s.merge||s.mergeFields?2:0,e,t,i);iR("Data must be an object, but it was:",o,r);let a=eB(r,o),c,l;if(s.merge)c=new Qr(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){let h=[];for(let p of s.mergeFields){let m=x1(e,p,t);if(!o.contains(m))throw new ne(z.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);nB(h,m)||h.push(m)}c=new Qr(h),l=o.fieldTransforms.filter(p=>c.covers(p.field))}else c=null,l=o.fieldTransforms;return new T1(new xr(a),c,l)}var uw=class n extends rh{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};var A1=class n extends rh{_toFieldTransform(e){return new vx(e.path,new Rl)}isEqual(e){return e instanceof n}};function mee(n,e,t,r){let i=n.Dc(1,e,t);iR("Data must be an object, but it was:",i,r);let s=[],o=xr.empty();qa(r,(c,l)=>{let h=sR(e,c,t);l=mn(l);let p=i.gc(h);if(l instanceof uw)s.push(h);else{let m=Sg(l,p);m!=null&&(s.push(h),o.set(h,m))}});let a=new Qr(s);return new lw(o,a,i.fieldTransforms)}function yee(n,e,t,r,i,s){let o=n.Dc(1,e,t),a=[x1(e,r,t)],c=[i];if(s.length%2!=0)throw new ne(z.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<s.length;m+=2)a.push(x1(e,s[m])),c.push(s[m+1]);let l=[],h=xr.empty();for(let m=a.length-1;m>=0;--m)if(!nB(l,a[m])){let b=a[m],k=c[m];k=mn(k);let O=o.gc(b);if(k instanceof uw)l.push(b);else{let N=Sg(k,O);N!=null&&(l.push(b),h.set(b,N))}}let p=new Qr(l);return new lw(h,p,o.fieldTransforms)}function _ee(n,e,t,r=!1){return Sg(t,n.Dc(r?4:3,e))}function Sg(n,e){if(tB(n=mn(n)))return iR("Unsupported field value:",e,n),eB(n,e);if(n instanceof rh)return(function(r,i){if(!Z4(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);let s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(r,i){let s=[],o=0;for(let a of r){let c=Sg(a,i.yc(o));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}})(n,e)}return(function(r,i){if((r=mn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return eZ(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let s=on.fromDate(r);return{timestampValue:W0(i.serializer,s)}}if(r instanceof on){let s=new on(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:W0(i.serializer,s)}}if(r instanceof Va)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Fa)return{bytesValue:C4(i.serializer,r._byteString)};if(r instanceof xn){let s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.wc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:z1(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof La)return(function(o,a){return{mapValue:{fields:{[L1]:{stringValue:U1},[Wd]:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.wc("VectorValues must only contain numeric values.");return H1(a.serializer,l)})}}}}}})(r,i);throw i.wc(`Unsupported field value: ${gw(r)}`)})(n,e)}function eB(n,e){let t={};return Yj(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):qa(n,(r,i)=>{let s=Sg(i,e.Vc(r));s!=null&&(t[r]=s)}),{mapValue:{fields:t}}}function tB(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof on||n instanceof Va||n instanceof Fa||n instanceof xn||n instanceof rh||n instanceof La)}function iR(n,e,t){if(!tB(t)||!Oj(t)){let r=gw(t);throw r==="an object"?e.wc(n+" a custom object"):e.wc(n+" "+r)}}function x1(n,e,t){if((e=mn(e))instanceof nh)return e._internalPath;if(typeof e=="string")return sR(n,e);throw dw("Field path arguments must be of type string or ",n,!1,void 0,t)}var vee=new RegExp("[~\\*/\\[\\]]");function sR(n,e,t){if(e.search(vee)>=0)throw dw(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new nh(...e.split("."))._internalPath}catch{throw dw(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function dw(n,e,t,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new ne(z.INVALID_ARGUMENT,a+n+c)}function nB(n,e){return n.some(t=>t.isEqual(e))}var hw=class{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new xn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new R1(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(Tw("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},R1=class extends hw{data(){return super.data()}};function Tw(n,e){return typeof e=="string"?sR(n,e):e instanceof nh?e._internalPath:e._delegate._internalPath}function rB(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ne(z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Ig=class{},fw=class extends Ig{};function iB(n,e,...t){let r=[];e instanceof Ig&&r.push(e),r=r.concat(t),(function(s){let o=s.filter(c=>c instanceof k1).length,a=s.filter(c=>c instanceof pw).length;if(o>1||o>0&&a>0)throw new ne(z.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(let i of r)n=i._apply(n);return n}var pw=class n extends fw{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return aB(e._query,t),new za(e.firestore,e.converter,yx(e._query,t))}_parse(e){let t=rR(e.firestore);return(function(s,o,a,c,l,h,p){let m;if(l.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new ne(z.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){kj(p,h);let k=[];for(let O of p)k.push(Rj(c,s,O));m={arrayValue:{values:k}}}else m=Rj(c,s,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||kj(p,h),m=_ee(a,o,p,h==="in"||h==="not-in");return rn.create(l,h,m)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function sB(n,e,t){let r=e,i=Tw("where",n);return pw._create(i,r,t)}var k1=class n extends Ig{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:Ri.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:((function(i,s){let o=i,a=s.getFlattenedFilters();for(let c of a)aB(o,c),o=yx(o,c)})(e._query,t),new za(e.firestore,e.converter,yx(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var N1=class n extends fw{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=(function(i,s,o){if(i.startAt!==null)throw new ne(z.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new ne(z.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new xl(s,o)})(e._query,this._field,this._direction);return new za(e.firestore,e.converter,(function(i,s){let o=i.explicitOrderBy.concat([s]);return new Ba(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)})(e._query,t))}};function oB(n,e="asc"){let t=e,r=Tw("orderBy",n);return N1._create(r,t)}function Rj(n,e,t){if(typeof(t=mn(t))=="string"){if(t==="")throw new ne(z.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!u4(e)&&t.indexOf("/")!==-1)throw new ne(z.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(xt.fromString(t));if(!pe.isDocumentKey(r))throw new ne(z.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return JU(n,new pe(r))}if(t instanceof xn)return JU(n,t._key);throw new ne(z.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${gw(t)}.`)}function kj(n,e){if(!Array.isArray(n)||n.length===0)throw new ne(z.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function aB(n,e){let t=(function(i,s){for(let o of i)for(let a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null})(n.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new ne(z.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ne(z.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var P1=class{convertValue(e,t="none"){switch(ja(e)){case 0:return null;case 1:return e.booleanValue;case 2:return At(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(mo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw we(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return qa(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertVectorValue(e){var t,r,i;let s=(i=(r=(t=e.fields)===null||t===void 0?void 0:t[Wd].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>At(o.doubleValue));return new La(s)}convertGeoPoint(e){return new Va(At(e.latitude),At(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=yw(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(hg(e));default:return null}}convertTimestamp(e){let t=go(e);return new on(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=xt.fromString(e);ft(R4(r),9688,{name:e});let i=new B0(r.get(1),r.get(3)),s=new pe(r.popFirst(5));return i.isEqual(t)||po(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}};function wee(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var Cl=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Tl=class n extends hw{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new qd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(Tw("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ne(z.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,t={};return t.type=n._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};Tl._jsonSchemaVersion="firestore/documentSnapshot/1.0",Tl._jsonSchema={type:sn("string",Tl._jsonSchemaVersion),bundleSource:sn("string","DocumentSnapshot"),bundleName:sn("string"),bundle:sn("string")};var qd=class extends Tl{data(e={}){return super.data(e)}},Sl=class n{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Cl(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new qd(this._firestore,this._userDataWriter,r.key,r,new Cl(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ne(z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{let c=new qd(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Cl(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{let c=new qd(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Cl(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,h=-1;return a.type!==0&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:Iee(a.type),doc:c,oldIndex:l,newIndex:h}})}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ne(z.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=n._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=lg.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let t=[],r=[],i=[];return this.docs.forEach(s=>{s._document!==null&&(t.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function Iee(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return we(61501,{type:n})}}function cB(n){n=Yr(n,xn);let e=Yr(n.firestore,_s);return dee(Cw(e),n._key).then(t=>pB(e,n,t))}Sl._jsonSchemaVersion="firestore/querySnapshot/1.0",Sl._jsonSchema={type:sn("string",Sl._jsonSchemaVersion),bundleSource:sn("string","QuerySnapshot"),bundleName:sn("string"),bundle:sn("string")};var bg=class extends P1{constructor(e){super(),this.firestore=e}convertBytes(e){return new Fa(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new xn(this.firestore,null,t)}};function lB(n){n=Yr(n,za);let e=Yr(n.firestore,_s),t=Cw(e),r=new bg(e);return rB(n._query),hee(t,n._query).then(i=>new Sl(e,r,n,i))}function uB(n,e,t,...r){n=Yr(n,xn);let i=Yr(n.firestore,_s),s=rR(i),o;return o=typeof(e=mn(e))=="string"||e instanceof nh?yee(s,"updateDoc",n._key,e,t,r):mee(s,"updateDoc",n._key,e),oR(i,[o.toMutation(n._key,fo.exists(!0))])}function dB(n){return oR(Yr(n.firestore,_s),[new pg(n._key,fo.none())])}function hB(n,e){let t=Yr(n.firestore,_s),r=nR(n),i=wee(n.converter,e);return oR(t,[gee(rR(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,fo.exists(!1))]).then(()=>r)}function fB(n,...e){var t,r,i;n=mn(n);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||xj(e[o])||(s=e[o++]);let a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(xj(e[o])){let p=e[o];e[o]=(t=p.next)===null||t===void 0?void 0:t.bind(p),e[o+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[o+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let c,l,h;if(n instanceof xn)l=Yr(n.firestore,_s),h=_w(n._key.path),c={next:p=>{e[o]&&e[o](pB(l,n,p))},error:e[o+1],complete:e[o+2]};else{let p=Yr(n,za);l=Yr(p.firestore,_s),h=p._query;let m=new bg(l);c={next:b=>{e[o]&&e[o](new Sl(l,m,p,b))},error:e[o+1],complete:e[o+2]},rB(n._query)}return(function(m,b,k,O){let N=new wg(O),H=new vg(b,N,k);return m.asyncQueue.enqueueAndForget(async()=>J1(await ow(m),H)),()=>{N.Ou(),m.asyncQueue.enqueueAndForget(async()=>X1(await ow(m),H))}})(Cw(l),h,a,c)}function oR(n,e){return(function(r,i){let s=new Ai;return r.asyncQueue.enqueueAndForget(async()=>eee(await uee(r),i,s)),s.promise})(Cw(n),e)}function pB(n,e,t){let r=t.docs.get(e._key),i=new bg(n);return new Tl(n,i,e._key,r,new Cl(t.hasPendingWrites,t.fromCache),e.converter)}function ki(){return new A1("serverTimestamp")}(function(e,t=!0){(function(i){ih=i})(ga),Ei(new Jn("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),a=new _s(new JA(r.getProvider("auth-internal")),new ex(o,r.getProvider("app-check-internal")),(function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new ne(z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new B0(l.options.projectId,h)})(o,i),o);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Ft(UU,jU,e),Ft(UU,jU,"esm2017")})();var Ni=class{constructor(e){return e}},gB="firestore",aR=class{constructor(){return sd(gB)}};var cR=new re("angularfire2.firestore-instances");function bee(n,e){let t=pp(gB,n,e);return t&&new Ni(t)}function Eee(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Ni(r)}}var Cee={provide:aR,deps:[[new Ir,cR]]},Tee={provide:Ni,useFactory:bee,deps:[[new Ir,cR],Ws]};function mB(n,...e){return Ft("angularfire",ma.full,"fst"),gr([Tee,Cee,{provide:cR,useFactory:Eee(n),multi:!0,deps:[it,wt,ya,rl,[new Ir,Rp],[new Ir,od],...e]}])}var ch=En(hB,!0,2);var vo=En(J4,!0,2);var lh=En(dB,!0,2);var kr=En(nR,!0,2);var yB=En(cB,!0);var lR=En(lB,!0);var _B=En(X4,!0);var Dg=En(fB,!0);var uR=En(oB,!0,2),Ag=En(iB,!0,2);var Ga=En(uB,!0,2);var Sw=En(sB,!0,2);var uh={production:!0,firebase:{apiKey:"AIzaSyA3FfYeMQ9WiWHlNKU1wsaMt8v3TOuNn_I",authDomain:"homeneeds-21223.firebaseapp.com",projectId:"homeneeds-21223",storageBucket:"homeneeds-21223.firebasestorage.app",messagingSenderId:"278167644572",appId:"1:278167644572:web:c5ca2a5c3e4da71fda4059",measurementId:"G-HXX054VJJ6"},apiUrl:"https://home-needs-psi.vercel.app"};var DB=(()=>{class n{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,r){this._renderer=t,this._elementRef=r}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(r){return new(r||n)(je(mi),je(Ht))};static \u0275dir=Rt({type:n})}return n})(),mR=(()=>{class n extends DB{static \u0275fac=(()=>{let t;return function(i){return(t||(t=js(n)))(i||n)}})();static \u0275dir=Rt({type:n,features:[ts]})}return n})(),kw=new re("");var See={provide:kw,useExisting:qi(()=>vs),multi:!0};function Dee(){let n=Hr()?Hr().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var Aee=new re(""),vs=(()=>{class n extends DB{_compositionMode;_composing=!1;constructor(t,r,i){super(t,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!Dee())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(r){return new(r||n)(je(mi),je(Ht),je(Aee,8))};static \u0275dir=Rt({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&Y("input",function(o){return i._handleInput(o.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(o){return i._compositionEnd(o.target.value)})},standalone:!1,features:[Br([See]),ts]})}return n})();var xee=new re(""),Ree=new re("");function AB(n){return n!=null}function xB(n){return ca(n)?De(n):n}function RB(n){let e={};return n.forEach(t=>{e=t!=null?B(B({},e),t):e}),Object.keys(e).length===0?null:e}function kB(n,e){return e.map(t=>t(n))}function kee(n){return!n.validate}function NB(n){return n.map(e=>kee(e)?e:t=>e.validate(t))}function Nee(n){if(!n)return null;let e=n.filter(AB);return e.length==0?null:function(t){return RB(kB(t,e))}}function PB(n){return n!=null?Nee(NB(n)):null}function Pee(n){if(!n)return null;let e=n.filter(AB);return e.length==0?null:function(t){let r=kB(t,e).map(xB);return $i(r).pipe(ye(RB))}}function MB(n){return n!=null?Pee(NB(n)):null}function vB(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function Mee(n){return n._rawValidators}function Oee(n){return n._rawAsyncValidators}function dR(n){return n?Array.isArray(n)?n:[n]:[]}function Aw(n,e){return Array.isArray(n)?n.includes(e):n===e}function wB(n,e){let t=dR(e);return dR(n).forEach(i=>{Aw(t,i)||t.push(i)}),t}function IB(n,e){return dR(e).filter(t=>!Aw(n,t))}var xw=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=PB(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=MB(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},hR=class extends xw{name;get formDirective(){return null}get path(){return null}},Pg=class extends xw{_parent=null;name=null;valueAccessor=null},fR=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}};var Wa=(()=>{class n extends fR{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(je(Pg,2))};static \u0275dir=Rt({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&Wt("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[ts]})}return n})();var xg="VALID",Dw="INVALID",dh="PENDING",Rg="DISABLED",Fl=class{},Rw=class extends Fl{value;source;constructor(e,t){super(),this.value=e,this.source=t}},kg=class extends Fl{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}},Ng=class extends Fl{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}},hh=class extends Fl{status;source;constructor(e,t){super(),this.status=e,this.source=t}};var pR=class extends Fl{source;constructor(e){super(),this.source=e}};function Fee(n){return(Nw(n)?n.validators:n)||null}function Vee(n){return Array.isArray(n)?PB(n):n||null}function Lee(n,e){return(Nw(e)?e.asyncValidators:n)||null}function Uee(n){return Array.isArray(n)?MB(n):n||null}function Nw(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}var gR=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return qt(this.statusReactive)}set status(e){qt(()=>this.statusReactive.set(e))}_status=He(()=>this.statusReactive());statusReactive=he(void 0);get valid(){return this.status===xg}get invalid(){return this.status===Dw}get pending(){return this.status==dh}get disabled(){return this.status===Rg}get enabled(){return this.status!==Rg}errors;get pristine(){return qt(this.pristineReactive)}set pristine(e){qt(()=>this.pristineReactive.set(e))}_pristine=He(()=>this.pristineReactive());pristineReactive=he(!0);get dirty(){return!this.pristine}get touched(){return qt(this.touchedReactive)}set touched(e){qt(()=>this.touchedReactive.set(e))}_touched=He(()=>this.touchedReactive());touchedReactive=he(!1);get untouched(){return!this.touched}_events=new me;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(wB(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(wB(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(IB(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(IB(e,this._rawAsyncValidators))}hasValidator(e){return Aw(this._rawValidators,e)}hasAsyncValidator(e){return Aw(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(ie(B({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Ng(!0,r))}markAllAsDirty(e={}){this.markAsDirty({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsDirty(e))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new Ng(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(ie(B({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new kg(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new kg(!0,r))}markAsPending(e={}){this.status=dh;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new hh(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(ie(B({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Rg,this.errors=null,this._forEachChild(i=>{i.disable(ie(B({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Rw(this.value,r)),this._events.next(new hh(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(ie(B({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=xg,this._forEachChild(r=>{r.enable(ie(B({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(ie(B({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===xg||this.status===dh)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Rw(this.value,t)),this._events.next(new hh(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(ie(B({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Rg:xg}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=dh,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1,shouldHaveEmitted:e!==!1};let r=xB(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new hh(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new We,this.statusChanges=new We}_calculateStatus(){return this._allControlsDisabled()?Rg:this.errors?Dw:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(dh)?dh:this._anyControlsHaveStatus(Dw)?Dw:xg}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new kg(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new Ng(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Nw(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=Vee(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=Uee(this._rawAsyncValidators)}};var OB=new re("",{factory:()=>yR}),yR="always";function jee(n,e){return[...e.path,n]}function Bee(n,e,t=yR){Hee(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),zee(n,e),Gee(n,e),qee(n,e),$ee(n,e)}function bB(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function $ee(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function Hee(n,e){let t=Mee(n);e.validator!==null?n.setValidators(vB(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=Oee(n);e.asyncValidator!==null?n.setAsyncValidators(vB(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();bB(e._rawValidators,i),bB(e._rawAsyncValidators,i)}function zee(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&FB(n,e)})}function qee(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&FB(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function FB(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function Gee(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function Wee(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function Kee(n){return Object.getPrototypeOf(n.constructor)===mR}function Qee(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(s=>{s.constructor===vs?t=s:Kee(s)?r=s:i=s}),i||r||t||null}function EB(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function CB(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var Yee=class extends gR{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,r){super(Fee(t),Lee(r,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Nw(t)&&(t.nonNullable||t.initialValueIsDefault)&&(CB(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),t.overwriteDefaultValue&&(this.defaultValue=this.value),this._pendingChange=!1,t?.emitEvent!==!1&&this._events.next(new pR(this))}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){EB(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){EB(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){CB(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var Jee={provide:Pg,useExisting:qi(()=>wo)},TB=Promise.resolve(),wo=(()=>{class n extends Pg{_changeDetectorRef;callSetDisabledState;control=new Yee;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new We;constructor(t,r,i,s,o,a){super(),this._changeDetectorRef=o,this.callSetDisabledState=a,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=Qee(this,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),Wee(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){Bee(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){TB.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&or(r);TB.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?jee(t,this._parent):[t]}static \u0275fac=function(r){return new(r||n)(je(hR,9),je(xee,10),je(Ree,10),je(kw,10),je($r,8),je(OB,8))};static \u0275dir=Rt({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[Br([Jee]),ts,jr]})}return n})();var Xee={provide:kw,useExisting:qi(()=>Ka),multi:!0};function VB(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function Zee(n){return n.split(":")[0]}var Ka=(()=>{class n extends mR{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;appRefInjector=M(yi).injector;destroyRef=M(Qn);cdr=M($r);_queuedWrite=!1;_writeValueAfterRender(){this._queuedWrite||this.appRefInjector.destroyed||(this._queuedWrite=!0,Hc({write:()=>{this.destroyRef.destroyed||(this._queuedWrite=!1,this.writeValue(this.value))}},{injector:this.appRefInjector}))}writeValue(t){this.cdr.markForCheck(),this.value=t;let r=this._getOptionId(t),i=VB(r,t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){let r=Zee(t);return this._optionMap.has(r)?this._optionMap.get(r):t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=js(n)))(i||n)}})();static \u0275dir=Rt({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&Y("change",function(o){return i.onChange(o.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[Br([Xee]),ts]})}return n})(),fh=(()=>{class n{_element;_renderer;_select;id;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(VB(this.id,t)),this._select._writeValueAfterRender())}set value(t){this._setElementValue(t),this._select&&this._select._writeValueAfterRender()}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select._writeValueAfterRender())}static \u0275fac=function(r){return new(r||n)(je(Ht),je(mi),je(Ka,9))};static \u0275dir=Rt({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})(),ete={provide:kw,useExisting:qi(()=>LB),multi:!0};function SB(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function tte(n){return n.split(":")[0]}var LB=(()=>{class n extends mR{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){this.value=t;let r;if(Array.isArray(t)){let i=t.map(s=>this._getOptionId(s));r=(s,o)=>{s._setSelected(i.indexOf(o.toString())>-1)}}else r=(i,s)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{let i=[],s=r.selectedOptions;if(s!==void 0){let o=s;for(let a=0;a<o.length;a++){let c=o[a],l=this._getOptionValue(c.value);i.push(l)}}else{let o=r.options;for(let a=0;a<o.length;a++){let c=o[a];if(c.selected){let l=this._getOptionValue(c.value);i.push(l)}}}this.value=i,t(i)}}_registerOption(t){let r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){let r=tte(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=js(n)))(i||n)}})();static \u0275dir=Rt({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&Y("change",function(o){return i.onChange(o.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[Br([ete]),ts]})}return n})(),ph=(()=>{class n{_element;_renderer;_select;id;_value;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(SB(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(SB(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||n)(je(Ht),je(mi),je(LB,9))};static \u0275dir=Rt({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})();var nte=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=br({type:n});static \u0275inj=rr({})}return n})();var Qa=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:OB,useValue:t.callSetDisabledState??yR}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=br({type:n});static \u0275inj=rr({imports:[nte]})}return n})();var _R;function rte(){if(_R==null){let n=typeof document<"u"?document.head:null;_R=!!(n&&(n.createShadowRoot||n.attachShadow))}return _R}function Mw(n){if(rte()){let e=n.getRootNode?n.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}function Mg(n){return n.composedPath?n.composedPath()[0]:n.target}function UB(n){return n.buttons===0||n.detail===0}function jB(n){let e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!!e&&e.identifier===-1&&(e.radiusX==null||e.radiusX===1)&&(e.radiusY==null||e.radiusY===1)}function Ow(n,e=0){return ite(n)?Number(n):arguments.length===2?e:0}function ite(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}function Pi(n){return n instanceof Ht?n.nativeElement:n}var Fw=new WeakMap,BB=(()=>{class n{_appRef;_injector=M(wt);_environmentInjector=M(Mt);load(t){let r=this._appRef=this._appRef||this._injector.get(yi),i=Fw.get(r);i||(i={loaders:new Set,refs:[]},Fw.set(r,i),r.onDestroy(()=>{Fw.get(r)?.refs.forEach(s=>s.destroy()),Fw.delete(r)})),i.loaders.has(t)||(i.loaders.add(t),i.refs.push(HM(t,{environmentInjector:this._environmentInjector})))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var vR;try{vR=typeof Intl<"u"&&Intl.v8BreakIterator}catch{vR=!1}var wR=(()=>{class n{_platformId=M(Bs);isBrowser=this._platformId?lO(this._platformId):typeof document=="object"&&!!document;EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent);TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent);BLINK=this.isBrowser&&!!(window.chrome||vR)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT;WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT;IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window);FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent);ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT;SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT;constructor(){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var ste=new re("cdk-dir-doc",{providedIn:"root",factory:()=>M(It)}),ote=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;function ate(n){let e=n?.toLowerCase()||"";return e==="auto"&&typeof navigator<"u"&&navigator?.language?ote.test(navigator.language)?"rtl":"ltr":e==="rtl"?"rtl":"ltr"}var IR=(()=>{class n{get value(){return this.valueSignal()}valueSignal=he("ltr");change=new We;constructor(){let t=M(ste,{optional:!0});if(t){let r=t.body?t.body.dir:null,i=t.documentElement?t.documentElement.dir:null;this.valueSignal.set(ate(r||i||"ltr"))}}ngOnDestroy(){this.change.complete()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var cte=20,$B=(()=>{class n{_ngZone=M(it);_platform=M(wR);_renderer=M(wr).createRenderer(null,null);_cleanupGlobalListener;constructor(){}_scrolled=new me;_scrolledCount=0;scrollContainers=new Map;register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){let r=this.scrollContainers.get(t);r&&(r.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=cte){return this._platform.isBrowser?new Se(r=>{this._cleanupGlobalListener||(this._cleanupGlobalListener=this._ngZone.runOutsideAngular(()=>this._renderer.listen("document","scroll",()=>this._scrolled.next())));let i=t>0?this._scrolled.pipe(Gm(t)).subscribe(r):this._scrolled.subscribe(r);return this._scrolledCount++,()=>{i.unsubscribe(),this._scrolledCount--,this._scrolledCount||(this._cleanupGlobalListener?.(),this._cleanupGlobalListener=void 0)}}):de()}ngOnDestroy(){this._cleanupGlobalListener?.(),this._cleanupGlobalListener=void 0,this.scrollContainers.forEach((t,r)=>this.deregister(r)),this._scrolled.complete()}ancestorScrolled(t,r){let i=this.getAncestorScrollContainers(t);return this.scrolled(r).pipe(pr(s=>!s||i.indexOf(s)>-1))}getAncestorScrollContainers(t){let r=[];return this.scrollContainers.forEach((i,s)=>{this._scrollableContainsElement(s,t)&&r.push(s)}),r}_scrollableContainsElement(t,r){let i=Pi(r),s=t.getElementRef().nativeElement;do if(i==s)return!0;while(i=i.parentElement);return!1}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var lte=20,HB=(()=>{class n{_platform=M(wR);_listeners;_viewportSize;_change=new me;_document=M(It);constructor(){let t=M(it),r=M(wr).createRenderer(null,null);t.runOutsideAngular(()=>{if(this._platform.isBrowser){let i=s=>this._change.next(s);this._listeners=[r.listen("window","resize",i),r.listen("window","orientationchange",i)]}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){this._listeners?.forEach(t=>t()),this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();let t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){let t=this.getViewportScrollPosition(),{width:r,height:i}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+i,right:t.left+r,height:i,width:r}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};let t=this._document,r=this._getWindow(),i=t.documentElement,s=i.getBoundingClientRect(),o=-s.top||t.body.scrollTop||r.scrollY||i.scrollTop||0,a=-s.left||t.body.scrollLeft||r.scrollX||i.scrollLeft||0;return{top:o,left:a}}change(t=lte){return t>0?this._change.pipe(Gm(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){let t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var zB=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=br({type:n});static \u0275inj=rr({})}return n})();var bR={},Vw=class n{_appId=M(Lu);static _infix=`a${Math.floor(Math.random()*1e5).toString()}`;getId(e,t=!1){return this._appId!=="ng"&&(e+=this._appId),bR.hasOwnProperty(e)||(bR[e]=0),`${e}${t?n._infix+"-":""}${bR[e]++}`}static \u0275fac=function(t){return new(t||n)};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})};function qB(n){return Array.isArray(n)?n:[n]}function TR(n){let e=n.cloneNode(!0),t=e.querySelectorAll("[id]"),r=n.nodeName.toLowerCase();e.removeAttribute("id");for(let i=0;i<t.length;i++)t[i].removeAttribute("id");return r==="canvas"?KB(n,e):(r==="input"||r==="select"||r==="textarea")&&WB(n,e),GB("canvas",n,e,KB),GB("input, textarea, select",n,e,WB),e}function GB(n,e,t,r){let i=e.querySelectorAll(n);if(i.length){let s=t.querySelectorAll(n);for(let o=0;o<i.length;o++)r(i[o],s[o])}}var ute=0;function WB(n,e){e.type!=="file"&&(e.value=n.value),e.type==="radio"&&e.name&&(e.name=`mat-clone-${e.name}-${ute++}`)}function KB(n,e){let t=e.getContext("2d");if(t)try{t.drawImage(n,0,0)}catch{}}function kR(n){let e=n.getBoundingClientRect();return{top:e.top,right:e.right,bottom:e.bottom,left:e.left,width:e.width,height:e.height,x:e.x,y:e.y}}function SR(n,e,t){let{top:r,bottom:i,left:s,right:o}=n;return t>=r&&t<=i&&e>=s&&e<=o}function dte(n,e){let t=e.left<n.left,r=e.left+e.width>n.right,i=e.top<n.top,s=e.top+e.height>n.bottom;return t||r||i||s}function Vg(n,e,t){n.top+=e,n.bottom=n.top+n.height,n.left+=t,n.right=n.left+n.width}function QB(n,e,t,r){let{top:i,right:s,bottom:o,left:a,width:c,height:l}=n,h=c*e,p=l*e;return r>i-p&&r<o+p&&t>a-h&&t<s+h}var Lw=class{_document;positions=new Map;constructor(e){this._document=e}clear(){this.positions.clear()}cache(e){this.clear(),this.positions.set(this._document,{scrollPosition:this.getViewportScrollPosition()}),e.forEach(t=>{this.positions.set(t,{scrollPosition:{top:t.scrollTop,left:t.scrollLeft},clientRect:kR(t)})})}handleScroll(e){let t=Mg(e),r=this.positions.get(t);if(!r)return null;let i=r.scrollPosition,s,o;if(t===this._document){let l=this.getViewportScrollPosition();s=l.top,o=l.left}else s=t.scrollTop,o=t.scrollLeft;let a=i.top-s,c=i.left-o;return this.positions.forEach((l,h)=>{l.clientRect&&t!==h&&t.contains(h)&&Vg(l.clientRect,a,c)}),i.top=s,i.left=o,{top:a,left:c}}getViewportScrollPosition(){return{top:window.scrollY,left:window.scrollX}}};function a3(n,e){let t=n.rootNodes;if(t.length===1&&t[0].nodeType===e.ELEMENT_NODE)return t[0];let r=e.createElement("div");return t.forEach(i=>r.appendChild(i)),r}function NR(n,e,t){for(let r in e)if(e.hasOwnProperty(r)){let i=e[r];i?n.setProperty(r,i,t?.has(r)?"important":""):n.removeProperty(r)}return n}function gh(n,e){let t=e?"":"none";NR(n.style,{"touch-action":e?"":"none","-webkit-user-drag":e?"":"none","-webkit-tap-highlight-color":e?"":"transparent","user-select":t,"-ms-user-select":t,"-webkit-user-select":t,"-moz-user-select":t})}function YB(n,e,t){NR(n.style,{position:e?"":"fixed",top:e?"":"0",opacity:e?"":"0",left:e?"":"-999em"},t)}function Uw(n,e){return e&&e!="none"?n+" "+e:n}function JB(n,e){n.style.width=`${e.width}px`,n.style.height=`${e.height}px`,n.style.transform=Lg(e.left,e.top)}function Lg(n,e){return`translate3d(${Math.round(n)}px, ${Math.round(e)}px, 0)`}function XB(n){let e=n.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(n)*e}function hte(n){let e=getComputedStyle(n),t=ER(e,"transition-property"),r=t.find(a=>a==="transform"||a==="all");if(!r)return 0;let i=t.indexOf(r),s=ER(e,"transition-duration"),o=ER(e,"transition-delay");return XB(s[i])+XB(o[i])}function ER(n,e){return n.getPropertyValue(e).split(",").map(r=>r.trim())}var fte=new Set(["position"]),DR=class{_document;_rootElement;_direction;_initialDomRect;_previewTemplate;_previewClass;_pickupPositionOnPage;_initialTransform;_zIndex;_renderer;_previewEmbeddedView;_preview;get element(){return this._preview}constructor(e,t,r,i,s,o,a,c,l,h){this._document=e,this._rootElement=t,this._direction=r,this._initialDomRect=i,this._previewTemplate=s,this._previewClass=o,this._pickupPositionOnPage=a,this._initialTransform=c,this._zIndex=l,this._renderer=h}attach(e){this._preview=this._createPreview(),e.appendChild(this._preview),ZB(this._preview)&&this._preview.showPopover()}destroy(){this._preview.remove(),this._previewEmbeddedView?.destroy(),this._preview=this._previewEmbeddedView=null}setTransform(e){this._preview.style.transform=e}getBoundingClientRect(){return this._preview.getBoundingClientRect()}addClass(e){this._preview.classList.add(e)}getTransitionDuration(){return hte(this._preview)}addEventListener(e,t){return this._renderer.listen(this._preview,e,t)}_createPreview(){let e=this._previewTemplate,t=this._previewClass,r=e?e.template:null,i;if(r&&e){let s=e.matchSize?this._initialDomRect:null,o=e.viewContainer.createEmbeddedView(r,e.context);o.detectChanges(),i=a3(o,this._document),this._previewEmbeddedView=o,e.matchSize?JB(i,s):i.style.transform=Lg(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else i=TR(this._rootElement),JB(i,this._initialDomRect),this._initialTransform&&(i.style.transform=this._initialTransform);return NR(i.style,{"pointer-events":"none",margin:ZB(i)?"0 auto 0 0":"0",position:"fixed",top:"0",left:"0","z-index":this._zIndex+""},fte),gh(i,!1),i.classList.add("cdk-drag-preview"),i.setAttribute("popover","manual"),i.setAttribute("dir",this._direction),t&&(Array.isArray(t)?t.forEach(s=>i.classList.add(s)):i.classList.add(t)),i}};function ZB(n){return"showPopover"in n}var pte={passive:!0},e3={passive:!1},gte={passive:!1,capture:!0},mte=800,t3="cdk-drag-placeholder",n3=new Set(["position"]),AR=class{_config;_document;_ngZone;_viewportRuler;_dragDropRegistry;_renderer;_rootElementCleanups;_cleanupShadowRootSelectStart;_preview;_previewContainer;_placeholderRef;_placeholder;_pickupPositionInElement;_pickupPositionOnPage;_marker;_anchor=null;_passiveTransform={x:0,y:0};_activeTransform={x:0,y:0};_initialTransform;_hasStartedDragging=he(!1);_hasMoved;_initialContainer;_initialIndex;_parentPositions;_moveEvents=new me;_pointerDirectionDelta;_pointerPositionAtLastDirectionChange;_lastKnownPointerPosition;_rootElement;_ownerSVGElement;_rootElementTapHighlight;_pointerMoveSubscription=mt.EMPTY;_pointerUpSubscription=mt.EMPTY;_scrollSubscription=mt.EMPTY;_resizeSubscription=mt.EMPTY;_lastTouchEventTime;_dragStartTime;_boundaryElement=null;_nativeInteractionsEnabled=!0;_initialDomRect;_previewRect;_boundaryRect;_previewTemplate;_placeholderTemplate;_handles=[];_disabledHandles=new Set;_dropContainer;_direction="ltr";_parentDragRef;_cachedShadowRoot;lockAxis=null;dragStartDelay=0;previewClass;scale=1;get disabled(){return this._disabled||!!(this._dropContainer&&this._dropContainer.disabled)}set disabled(e){e!==this._disabled&&(this._disabled=e,this._toggleNativeDragInteractions(),this._handles.forEach(t=>gh(t,e)))}_disabled=!1;beforeStarted=new me;started=new me;released=new me;ended=new me;entered=new me;exited=new me;dropped=new me;moved=this._moveEvents;data;constrainPosition;constructor(e,t,r,i,s,o,a){this._config=t,this._document=r,this._ngZone=i,this._viewportRuler=s,this._dragDropRegistry=o,this._renderer=a,this.withRootElement(e).withParent(t.parentDragRef||null),this._parentPositions=new Lw(r),o.registerDragItem(this)}getPlaceholderElement(){return this._placeholder}getRootElement(){return this._rootElement}getVisibleElement(){return this.isDragging()?this.getPlaceholderElement():this.getRootElement()}withHandles(e){this._handles=e.map(r=>Pi(r)),this._handles.forEach(r=>gh(r,this.disabled)),this._toggleNativeDragInteractions();let t=new Set;return this._disabledHandles.forEach(r=>{this._handles.indexOf(r)>-1&&t.add(r)}),this._disabledHandles=t,this}withPreviewTemplate(e){return this._previewTemplate=e,this}withPlaceholderTemplate(e){return this._placeholderTemplate=e,this}withRootElement(e){let t=Pi(e);if(t!==this._rootElement){this._removeRootElementListeners();let r=this._renderer;this._rootElementCleanups=this._ngZone.runOutsideAngular(()=>[r.listen(t,"mousedown",this._pointerDown,e3),r.listen(t,"touchstart",this._pointerDown,pte),r.listen(t,"dragstart",this._nativeDragStart,e3)]),this._initialTransform=void 0,this._rootElement=t}return typeof SVGElement<"u"&&this._rootElement instanceof SVGElement&&(this._ownerSVGElement=this._rootElement.ownerSVGElement),this}withBoundaryElement(e){return this._boundaryElement=e?Pi(e):null,this._resizeSubscription.unsubscribe(),e&&(this._resizeSubscription=this._viewportRuler.change(10).subscribe(()=>this._containInsideBoundaryOnResize())),this}withParent(e){return this._parentDragRef=e,this}dispose(){this._removeRootElementListeners(),this.isDragging()&&this._rootElement?.remove(),this._marker?.remove(),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeListeners(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._resizeSubscription.unsubscribe(),this._parentPositions.clear(),this._boundaryElement=this._rootElement=this._ownerSVGElement=this._placeholderTemplate=this._previewTemplate=this._marker=this._parentDragRef=null}isDragging(){return this._hasStartedDragging()&&this._dragDropRegistry.isDragging(this)}reset(){this._rootElement.style.transform=this._initialTransform||"",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}resetToBoundary(){if(this._boundaryElement&&this._rootElement&&dte(this._boundaryElement.getBoundingClientRect(),this._rootElement.getBoundingClientRect())){let e=this._boundaryElement.getBoundingClientRect(),t=this._rootElement.getBoundingClientRect(),r=0,i=0;t.left<e.left?r=e.left-t.left:t.right>e.right&&(r=e.right-t.right),t.top<e.top?i=e.top-t.top:t.bottom>e.bottom&&(i=e.bottom-t.bottom);let s=this._activeTransform.x,o=this._activeTransform.y,a=s+r,c=o+i;this._rootElement.style.transform=Lg(a,c),this._activeTransform={x:a,y:c},this._passiveTransform={x:a,y:c}}}disableHandle(e){!this._disabledHandles.has(e)&&this._handles.indexOf(e)>-1&&(this._disabledHandles.add(e),gh(e,!0))}enableHandle(e){this._disabledHandles.has(e)&&(this._disabledHandles.delete(e),gh(e,this.disabled))}withDirection(e){return this._direction=e,this}_withDropContainer(e){this._dropContainer=e}getFreeDragPosition(){let e=this.isDragging()?this._activeTransform:this._passiveTransform;return{x:e.x,y:e.y}}setFreeDragPosition(e){return this._activeTransform={x:0,y:0},this._passiveTransform.x=e.x,this._passiveTransform.y=e.y,this._dropContainer||this._applyRootElementTransform(e.x,e.y),this}withPreviewContainer(e){return this._previewContainer=e,this}_sortFromLastPointerPosition(){let e=this._lastKnownPointerPosition;e&&this._dropContainer&&this._updateActiveDropContainer(this._getConstrainedPointerPosition(e),e)}_removeListeners(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe(),this._scrollSubscription.unsubscribe(),this._cleanupShadowRootSelectStart?.(),this._cleanupShadowRootSelectStart=void 0}_destroyPreview(){this._preview?.destroy(),this._preview=null}_destroyPlaceholder(){this._anchor?.remove(),this._placeholder?.remove(),this._placeholderRef?.destroy(),this._placeholder=this._anchor=this._placeholderRef=null}_pointerDown=e=>{if(this.beforeStarted.next(),this._handles.length){let t=this._getTargetHandle(e);t&&!this._disabledHandles.has(t)&&!this.disabled&&this._initializeDragSequence(t,e)}else this.disabled||this._initializeDragSequence(this._rootElement,e)};_pointerMove=e=>{let t=this._getPointerPositionOnPage(e);if(!this._hasStartedDragging()){let i=Math.abs(t.x-this._pickupPositionOnPage.x),s=Math.abs(t.y-this._pickupPositionOnPage.y);if(i+s>=this._config.dragStartThreshold){let a=Date.now()>=this._dragStartTime+this._getDragStartDelay(e),c=this._dropContainer;if(!a){this._endDragSequence(e);return}(!c||!c.isDragging()&&!c.isReceiving())&&(e.cancelable&&e.preventDefault(),this._hasStartedDragging.set(!0),this._ngZone.run(()=>this._startDragSequence(e)))}return}e.cancelable&&e.preventDefault();let r=this._getConstrainedPointerPosition(t);if(this._hasMoved=!0,this._lastKnownPointerPosition=t,this._updatePointerDirectionDelta(r),this._dropContainer)this._updateActiveDropContainer(r,t);else{let i=this.constrainPosition?this._initialDomRect:this._pickupPositionOnPage,s=this._activeTransform;s.x=r.x-i.x+this._passiveTransform.x,s.y=r.y-i.y+this._passiveTransform.y,this._applyRootElementTransform(s.x,s.y)}this._moveEvents.observers.length&&this._ngZone.run(()=>{this._moveEvents.next({source:this,pointerPosition:r,event:e,distance:this._getDragDistance(r),delta:this._pointerDirectionDelta})})};_pointerUp=e=>{this._endDragSequence(e)};_endDragSequence(e){if(this._dragDropRegistry.isDragging(this)&&(this._removeListeners(),this._dragDropRegistry.stopDragging(this),this._toggleNativeDragInteractions(),this._handles&&(this._rootElement.style.webkitTapHighlightColor=this._rootElementTapHighlight),!!this._hasStartedDragging()))if(this.released.next({source:this,event:e}),this._dropContainer)this._dropContainer._stopScrolling(),this._animatePreviewToPlaceholder().then(()=>{this._cleanupDragArtifacts(e),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)});else{this._passiveTransform.x=this._activeTransform.x;let t=this._getPointerPositionOnPage(e);this._passiveTransform.y=this._activeTransform.y,this._ngZone.run(()=>{this.ended.next({source:this,distance:this._getDragDistance(t),dropPoint:t,event:e})}),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)}}_startDragSequence(e){Og(e)&&(this._lastTouchEventTime=Date.now()),this._toggleNativeDragInteractions();let t=this._getShadowRoot(),r=this._dropContainer;if(t&&this._ngZone.runOutsideAngular(()=>{this._cleanupShadowRootSelectStart=this._renderer.listen(t,"selectstart",yte,gte)}),r){let i=this._rootElement,s=i.parentNode,o=this._placeholder=this._createPlaceholderElement(),a=this._marker=this._marker||this._document.createComment("");s.insertBefore(a,i),this._initialTransform=i.style.transform||"",this._preview=new DR(this._document,this._rootElement,this._direction,this._initialDomRect,this._previewTemplate||null,this.previewClass||null,this._pickupPositionOnPage,this._initialTransform,this._config.zIndex||1e3,this._renderer),this._preview.attach(this._getPreviewInsertionPoint(s,t)),YB(i,!1,n3),this._document.body.appendChild(s.replaceChild(o,i)),this.started.next({source:this,event:e}),r.start(),this._initialContainer=r,this._initialIndex=r.getItemIndex(this)}else this.started.next({source:this,event:e}),this._initialContainer=this._initialIndex=void 0;this._parentPositions.cache(r?r.getScrollableParents():[])}_initializeDragSequence(e,t){this._parentDragRef&&t.stopPropagation();let r=this.isDragging(),i=Og(t),s=!i&&t.button!==0,o=this._rootElement,a=Mg(t),c=!i&&this._lastTouchEventTime&&this._lastTouchEventTime+mte>Date.now(),l=i?jB(t):UB(t);if(a&&a.draggable&&t.type==="mousedown"&&t.preventDefault(),r||s||c||l)return;if(this._handles.length){let m=o.style;this._rootElementTapHighlight=m.webkitTapHighlightColor||"",m.webkitTapHighlightColor="transparent"}this._hasMoved=!1,this._hasStartedDragging.set(this._hasMoved),this._removeListeners(),this._initialDomRect=this._rootElement.getBoundingClientRect(),this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(m=>this._updateOnScroll(m)),this._boundaryElement&&(this._boundaryRect=kR(this._boundaryElement));let h=this._previewTemplate;this._pickupPositionInElement=h&&h.template&&!h.matchSize?{x:0,y:0}:this._getPointerPositionInElement(this._initialDomRect,e,t);let p=this._pickupPositionOnPage=this._lastKnownPointerPosition=this._getPointerPositionOnPage(t);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:p.x,y:p.y},this._dragStartTime=Date.now(),this._dragDropRegistry.startDragging(this,t)}_cleanupDragArtifacts(e){YB(this._rootElement,!0,n3),this._marker.parentNode.replaceChild(this._rootElement,this._marker),this._destroyPreview(),this._destroyPlaceholder(),this._initialDomRect=this._boundaryRect=this._previewRect=this._initialTransform=void 0,this._ngZone.run(()=>{let t=this._dropContainer,r=t.getItemIndex(this),i=this._getPointerPositionOnPage(e),s=this._getDragDistance(i),o=t._isOverContainer(i.x,i.y);this.ended.next({source:this,distance:s,dropPoint:i,event:e}),this.dropped.next({item:this,currentIndex:r,previousIndex:this._initialIndex,container:t,previousContainer:this._initialContainer,isPointerOverContainer:o,distance:s,dropPoint:i,event:e}),t.drop(this,r,this._initialIndex,this._initialContainer,o,s,i,e),this._dropContainer=this._initialContainer})}_updateActiveDropContainer({x:e,y:t},{x:r,y:i}){let s=this._initialContainer._getSiblingContainerFromPosition(this,e,t);!s&&this._dropContainer!==this._initialContainer&&this._initialContainer._isOverContainer(e,t)&&(s=this._initialContainer),s&&s!==this._dropContainer&&this._ngZone.run(()=>{let o=this._dropContainer.getItemIndex(this),a=this._dropContainer.getItemAtIndex(o+1)?.getVisibleElement()||null;this.exited.next({item:this,container:this._dropContainer}),this._dropContainer.exit(this),this._conditionallyInsertAnchor(s,this._dropContainer,a),this._dropContainer=s,this._dropContainer.enter(this,e,t,s===this._initialContainer&&s.sortingDisabled?this._initialIndex:void 0),this.entered.next({item:this,container:s,currentIndex:s.getItemIndex(this)})}),this.isDragging()&&(this._dropContainer._startScrollingIfNecessary(r,i),this._dropContainer._sortItem(this,e,t,this._pointerDirectionDelta),this.constrainPosition?this._applyPreviewTransform(e,t):this._applyPreviewTransform(e-this._pickupPositionInElement.x,t-this._pickupPositionInElement.y))}_animatePreviewToPlaceholder(){if(!this._hasMoved)return Promise.resolve();let e=this._placeholder.getBoundingClientRect();this._preview.addClass("cdk-drag-animating"),this._applyPreviewTransform(e.left,e.top);let t=this._preview.getTransitionDuration();return t===0?Promise.resolve():this._ngZone.runOutsideAngular(()=>new Promise(r=>{let i=a=>{(!a||this._preview&&Mg(a)===this._preview.element&&a.propertyName==="transform")&&(o(),r(),clearTimeout(s))},s=setTimeout(i,t*1.5),o=this._preview.addEventListener("transitionend",i)}))}_createPlaceholderElement(){let e=this._placeholderTemplate,t=e?e.template:null,r;return t?(this._placeholderRef=e.viewContainer.createEmbeddedView(t,e.context),this._placeholderRef.detectChanges(),r=a3(this._placeholderRef,this._document)):r=TR(this._rootElement),r.style.pointerEvents="none",r.classList.add(t3),r}_getPointerPositionInElement(e,t,r){let i=t===this._rootElement?null:t,s=i?i.getBoundingClientRect():e,o=Og(r)?r.targetTouches[0]:r,a=this._getViewportScrollPosition(),c=o.pageX-s.left-a.left,l=o.pageY-s.top-a.top;return{x:s.left-e.left+c,y:s.top-e.top+l}}_getPointerPositionOnPage(e){let t=this._getViewportScrollPosition(),r=Og(e)?e.touches[0]||e.changedTouches[0]||{pageX:0,pageY:0}:e,i=r.pageX-t.left,s=r.pageY-t.top;if(this._ownerSVGElement){let o=this._ownerSVGElement.getScreenCTM();if(o){let a=this._ownerSVGElement.createSVGPoint();return a.x=i,a.y=s,a.matrixTransform(o.inverse())}}return{x:i,y:s}}_getConstrainedPointerPosition(e){let t=this._dropContainer?this._dropContainer.lockAxis:null,{x:r,y:i}=this.constrainPosition?this.constrainPosition(e,this,this._initialDomRect,this._pickupPositionInElement):e;if(this.lockAxis==="x"||t==="x"?i=this._pickupPositionOnPage.y-(this.constrainPosition?this._pickupPositionInElement.y:0):(this.lockAxis==="y"||t==="y")&&(r=this._pickupPositionOnPage.x-(this.constrainPosition?this._pickupPositionInElement.x:0)),this._boundaryRect){let{x:s,y:o}=this.constrainPosition?{x:0,y:0}:this._pickupPositionInElement,a=this._boundaryRect,{width:c,height:l}=this._getPreviewRect(),h=a.top+o,p=a.bottom-(l-o),m=a.left+s,b=a.right-(c-s);r=r3(r,m,b),i=r3(i,h,p)}return{x:r,y:i}}_updatePointerDirectionDelta(e){let{x:t,y:r}=e,i=this._pointerDirectionDelta,s=this._pointerPositionAtLastDirectionChange,o=Math.abs(t-s.x),a=Math.abs(r-s.y);return o>this._config.pointerDirectionChangeThreshold&&(i.x=t>s.x?1:-1,s.x=t),a>this._config.pointerDirectionChangeThreshold&&(i.y=r>s.y?1:-1,s.y=r),i}_toggleNativeDragInteractions(){if(!this._rootElement||!this._handles)return;let e=this._handles.length>0||!this.isDragging();e!==this._nativeInteractionsEnabled&&(this._nativeInteractionsEnabled=e,gh(this._rootElement,e))}_removeRootElementListeners(){this._rootElementCleanups?.forEach(e=>e()),this._rootElementCleanups=void 0}_applyRootElementTransform(e,t){let r=1/this.scale,i=Lg(e*r,t*r),s=this._rootElement.style;this._initialTransform==null&&(this._initialTransform=s.transform&&s.transform!="none"?s.transform:""),s.transform=Uw(i,this._initialTransform)}_applyPreviewTransform(e,t){let r=this._previewTemplate?.template?void 0:this._initialTransform,i=Lg(e,t);this._preview.setTransform(Uw(i,r))}_getDragDistance(e){let t=this._pickupPositionOnPage;return t?{x:e.x-t.x,y:e.y-t.y}:{x:0,y:0}}_cleanupCachedDimensions(){this._boundaryRect=this._previewRect=void 0,this._parentPositions.clear()}_containInsideBoundaryOnResize(){let{x:e,y:t}=this._passiveTransform;if(e===0&&t===0||this.isDragging()||!this._boundaryElement)return;let r=this._rootElement.getBoundingClientRect(),i=this._boundaryElement.getBoundingClientRect();if(i.width===0&&i.height===0||r.width===0&&r.height===0)return;let s=i.left-r.left,o=r.right-i.right,a=i.top-r.top,c=r.bottom-i.bottom;i.width>r.width?(s>0&&(e+=s),o>0&&(e-=o)):e=0,i.height>r.height?(a>0&&(t+=a),c>0&&(t-=c)):t=0,(e!==this._passiveTransform.x||t!==this._passiveTransform.y)&&this.setFreeDragPosition({y:t,x:e})}_getDragStartDelay(e){let t=this.dragStartDelay;return typeof t=="number"?t:Og(e)?t.touch:t?t.mouse:0}_updateOnScroll(e){let t=this._parentPositions.handleScroll(e);if(t){let r=Mg(e);this._boundaryRect&&r!==this._boundaryElement&&r.contains(this._boundaryElement)&&Vg(this._boundaryRect,t.top,t.left),this._pickupPositionOnPage.x+=t.left,this._pickupPositionOnPage.y+=t.top,this._dropContainer||(this._activeTransform.x-=t.left,this._activeTransform.y-=t.top,this._applyRootElementTransform(this._activeTransform.x,this._activeTransform.y))}}_getViewportScrollPosition(){return this._parentPositions.positions.get(this._document)?.scrollPosition||this._parentPositions.getViewportScrollPosition()}_getShadowRoot(){return this._cachedShadowRoot===void 0&&(this._cachedShadowRoot=Mw(this._rootElement)),this._cachedShadowRoot}_getPreviewInsertionPoint(e,t){let r=this._previewContainer||"global";if(r==="parent")return e;if(r==="global"){let i=this._document;return t||i.fullscreenElement||i.webkitFullscreenElement||i.mozFullScreenElement||i.msFullscreenElement||i.body}return Pi(r)}_getPreviewRect(){return(!this._previewRect||!this._previewRect.width&&!this._previewRect.height)&&(this._previewRect=this._preview?this._preview.getBoundingClientRect():this._initialDomRect),this._previewRect}_nativeDragStart=e=>{if(this._handles.length){let t=this._getTargetHandle(e);t&&!this._disabledHandles.has(t)&&!this.disabled&&e.preventDefault()}else this.disabled||e.preventDefault()};_getTargetHandle(e){return this._handles.find(t=>e.target&&(e.target===t||t.contains(e.target)))}_conditionallyInsertAnchor(e,t,r){if(e===this._initialContainer)this._anchor?.remove(),this._anchor=null;else if(t===this._initialContainer&&t.hasAnchor){let i=this._anchor??=TR(this._placeholder);i.classList.remove(t3),i.classList.add("cdk-drag-anchor"),i.style.transform="",r?r.before(i):Pi(t.element).appendChild(i)}}};function r3(n,e,t){return Math.max(e,Math.min(t,n))}function Og(n){return n.type[0]==="t"}function yte(n){n.preventDefault()}function $w(n,e,t){let r=i3(e,n.length-1),i=i3(t,n.length-1);if(r===i)return;let s=n[r],o=i<r?-1:1;for(let a=r;a!==i;a+=o)n[a]=n[a+o];n[i]=s}function i3(n,e){return Math.max(0,Math.min(e,n))}var jw=class{_dragDropRegistry;_element;_sortPredicate;_itemPositions=[];_activeDraggables;orientation="vertical";direction;constructor(e){this._dragDropRegistry=e}_previousSwap={drag:null,delta:0,overlaps:!1};start(e){this.withItems(e)}sort(e,t,r,i){let s=this._itemPositions,o=this._getItemIndexFromPointerPosition(e,t,r,i);if(o===-1&&s.length>0)return null;let a=this.orientation==="horizontal",c=s.findIndex(N=>N.drag===e),l=s[o],h=s[c].clientRect,p=l.clientRect,m=c>o?1:-1,b=this._getItemOffsetPx(h,p,m),k=this._getSiblingOffsetPx(c,s,m),O=s.slice();return $w(s,c,o),s.forEach((N,H)=>{if(O[H]===N)return;let Q=N.drag===e,Z=Q?b:k,Ee=Q?e.getPlaceholderElement():N.drag.getRootElement();N.offset+=Z;let Je=Math.round(N.offset*(1/N.drag.scale));a?(Ee.style.transform=Uw(`translate3d(${Je}px, 0, 0)`,N.initialTransform),Vg(N.clientRect,0,Z)):(Ee.style.transform=Uw(`translate3d(0, ${Je}px, 0)`,N.initialTransform),Vg(N.clientRect,Z,0))}),this._previousSwap.overlaps=SR(p,t,r),this._previousSwap.drag=l.drag,this._previousSwap.delta=a?i.x:i.y,{previousIndex:c,currentIndex:o}}enter(e,t,r,i){let s=i==null||i<0?this._getItemIndexFromPointerPosition(e,t,r):i,o=this._activeDraggables,a=o.indexOf(e),c=e.getPlaceholderElement(),l=o[s];if(l===e&&(l=o[s+1]),!l&&(s==null||s===-1||s<o.length-1)&&this._shouldEnterAsFirstChild(t,r)&&(l=o[0]),a>-1&&o.splice(a,1),l&&!this._dragDropRegistry.isDragging(l)){let h=l.getRootElement();h.parentElement.insertBefore(c,h),o.splice(s,0,e)}else this._element.appendChild(c),o.push(e);c.style.transform="",this._cacheItemPositions()}withItems(e){this._activeDraggables=e.slice(),this._cacheItemPositions()}withSortPredicate(e){this._sortPredicate=e}reset(){this._activeDraggables?.forEach(e=>{let t=e.getRootElement();if(t){let r=this._itemPositions.find(i=>i.drag===e)?.initialTransform;t.style.transform=r||""}}),this._itemPositions=[],this._activeDraggables=[],this._previousSwap.drag=null,this._previousSwap.delta=0,this._previousSwap.overlaps=!1}getActiveItemsSnapshot(){return this._activeDraggables}getItemIndex(e){return this._getVisualItemPositions().findIndex(t=>t.drag===e)}getItemAtIndex(e){return this._getVisualItemPositions()[e]?.drag||null}updateOnScroll(e,t){this._itemPositions.forEach(({clientRect:r})=>{Vg(r,e,t)}),this._itemPositions.forEach(({drag:r})=>{this._dragDropRegistry.isDragging(r)&&r._sortFromLastPointerPosition()})}withElementContainer(e){this._element=e}_cacheItemPositions(){let e=this.orientation==="horizontal";this._itemPositions=this._activeDraggables.map(t=>{let r=t.getVisibleElement();return{drag:t,offset:0,initialTransform:r.style.transform||"",clientRect:kR(r)}}).sort((t,r)=>e?t.clientRect.left-r.clientRect.left:t.clientRect.top-r.clientRect.top)}_getVisualItemPositions(){return this.orientation==="horizontal"&&this.direction==="rtl"?this._itemPositions.slice().reverse():this._itemPositions}_getItemOffsetPx(e,t,r){let i=this.orientation==="horizontal",s=i?t.left-e.left:t.top-e.top;return r===-1&&(s+=i?t.width-e.width:t.height-e.height),s}_getSiblingOffsetPx(e,t,r){let i=this.orientation==="horizontal",s=t[e].clientRect,o=t[e+r*-1],a=s[i?"width":"height"]*r;if(o){let c=i?"left":"top",l=i?"right":"bottom";r===-1?a-=o.clientRect[c]-s[l]:a+=s[c]-o.clientRect[l]}return a}_shouldEnterAsFirstChild(e,t){if(!this._activeDraggables.length)return!1;let r=this._itemPositions,i=this.orientation==="horizontal";if(r[0].drag!==this._activeDraggables[0]){let o=r[r.length-1].clientRect;return i?e>=o.right:t>=o.bottom}else{let o=r[0].clientRect;return i?e<=o.left:t<=o.top}}_getItemIndexFromPointerPosition(e,t,r,i){let s=this.orientation==="horizontal",o=this._itemPositions.findIndex(({drag:a,clientRect:c})=>{if(a===e)return!1;if(i){let l=s?i.x:i.y;if(a===this._previousSwap.drag&&this._previousSwap.overlaps&&l===this._previousSwap.delta)return!1}return s?t>=Math.floor(c.left)&&t<Math.floor(c.right):r>=Math.floor(c.top)&&r<Math.floor(c.bottom)});return o===-1||!this._sortPredicate(o,e)?-1:o}},xR=class{_document;_dragDropRegistry;_element;_sortPredicate;_rootNode;_activeItems;_previousSwap={drag:null,deltaX:0,deltaY:0,overlaps:!1};_relatedNodes=[];constructor(e,t){this._document=e,this._dragDropRegistry=t}start(e){let t=this._element.childNodes;this._relatedNodes=[];for(let r=0;r<t.length;r++){let i=t[r];this._relatedNodes.push([i,i.nextSibling])}this.withItems(e)}sort(e,t,r,i){let s=this._getItemIndexFromPointerPosition(e,t,r),o=this._previousSwap;if(s===-1||this._activeItems[s]===e)return null;let a=this._activeItems[s];if(o.drag===a&&o.overlaps&&o.deltaX===i.x&&o.deltaY===i.y)return null;let c=this.getItemIndex(e),l=e.getPlaceholderElement(),h=a.getRootElement();s>c?h.after(l):h.before(l),$w(this._activeItems,c,s);let p=this._getRootNode().elementFromPoint(t,r);return o.deltaX=i.x,o.deltaY=i.y,o.drag=a,o.overlaps=h===p||h.contains(p),{previousIndex:c,currentIndex:s}}enter(e,t,r,i){let s=this._activeItems.indexOf(e);s>-1&&this._activeItems.splice(s,1);let o=i==null||i<0?this._getItemIndexFromPointerPosition(e,t,r):i;o===-1&&(o=this._getClosestItemIndexToPointer(e,t,r));let a=this._activeItems[o];a&&!this._dragDropRegistry.isDragging(a)?(this._activeItems.splice(o,0,e),a.getRootElement().before(e.getPlaceholderElement())):(this._activeItems.push(e),this._element.appendChild(e.getPlaceholderElement()))}withItems(e){this._activeItems=e.slice()}withSortPredicate(e){this._sortPredicate=e}reset(){let e=this._element,t=this._previousSwap;for(let r=this._relatedNodes.length-1;r>-1;r--){let[i,s]=this._relatedNodes[r];i.parentNode===e&&i.nextSibling!==s&&(s===null?e.appendChild(i):s.parentNode===e&&e.insertBefore(i,s))}this._relatedNodes=[],this._activeItems=[],t.drag=null,t.deltaX=t.deltaY=0,t.overlaps=!1}getActiveItemsSnapshot(){return this._activeItems}getItemIndex(e){return this._activeItems.indexOf(e)}getItemAtIndex(e){return this._activeItems[e]||null}updateOnScroll(){this._activeItems.forEach(e=>{this._dragDropRegistry.isDragging(e)&&e._sortFromLastPointerPosition()})}withElementContainer(e){e!==this._element&&(this._element=e,this._rootNode=void 0)}_getItemIndexFromPointerPosition(e,t,r){let i=this._getRootNode().elementFromPoint(Math.floor(t),Math.floor(r)),s=i?this._activeItems.findIndex(o=>{let a=o.getRootElement();return i===a||a.contains(i)}):-1;return s===-1||!this._sortPredicate(s,e)?-1:s}_getRootNode(){return this._rootNode||(this._rootNode=Mw(this._element)||this._document),this._rootNode}_getClosestItemIndexToPointer(e,t,r){if(this._activeItems.length===0)return-1;if(this._activeItems.length===1)return 0;let i=1/0,s=-1;for(let o=0;o<this._activeItems.length;o++){let a=this._activeItems[o];if(a!==e){let{x:c,y:l}=a.getRootElement().getBoundingClientRect(),h=Math.hypot(t-c,r-l);h<i&&(i=h,s=o)}}return s}},s3=.05,c3=.05,Jr=(function(n){return n[n.NONE=0]="NONE",n[n.UP=1]="UP",n[n.DOWN=2]="DOWN",n})(Jr||{}),Xn=(function(n){return n[n.NONE=0]="NONE",n[n.LEFT=1]="LEFT",n[n.RIGHT=2]="RIGHT",n})(Xn||{}),RR=class{_dragDropRegistry;_ngZone;_viewportRuler;element;disabled=!1;sortingDisabled=!1;lockAxis=null;autoScrollDisabled=!1;autoScrollStep=2;hasAnchor=!1;enterPredicate=()=>!0;sortPredicate=()=>!0;beforeStarted=new me;entered=new me;exited=new me;dropped=new me;sorted=new me;receivingStarted=new me;receivingStopped=new me;data;_container;_isDragging=!1;_parentPositions;_sortStrategy;_domRect;_draggables=[];_siblings=[];_activeSiblings=new Set;_viewportScrollSubscription=mt.EMPTY;_verticalScrollDirection=Jr.NONE;_horizontalScrollDirection=Xn.NONE;_scrollNode;_stopScrollTimers=new me;_cachedShadowRoot=null;_document;_scrollableElements=[];_initialScrollSnap;_direction="ltr";constructor(e,t,r,i,s){this._dragDropRegistry=t,this._ngZone=i,this._viewportRuler=s;let o=this.element=Pi(e);this._document=r,this.withOrientation("vertical").withElementContainer(o),t.registerDropContainer(this),this._parentPositions=new Lw(r)}dispose(){this._stopScrolling(),this._stopScrollTimers.complete(),this._viewportScrollSubscription.unsubscribe(),this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this.receivingStarted.complete(),this.receivingStopped.complete(),this._activeSiblings.clear(),this._scrollNode=null,this._parentPositions.clear(),this._dragDropRegistry.removeDropContainer(this)}isDragging(){return this._isDragging}start(){this._draggingStarted(),this._notifyReceivingSiblings()}enter(e,t,r,i){this._draggingStarted(),i==null&&this.sortingDisabled&&(i=this._draggables.indexOf(e)),this._sortStrategy.enter(e,t,r,i),this._cacheParentPositions(),this._notifyReceivingSiblings(),this.entered.next({item:e,container:this,currentIndex:this.getItemIndex(e)})}exit(e){this._reset(),this.exited.next({item:e,container:this})}drop(e,t,r,i,s,o,a,c={}){this._reset(),this.dropped.next({item:e,currentIndex:t,previousIndex:r,container:this,previousContainer:i,isPointerOverContainer:s,distance:o,dropPoint:a,event:c})}withItems(e){let t=this._draggables;return this._draggables=e,e.forEach(r=>r._withDropContainer(this)),this.isDragging()&&(t.filter(i=>i.isDragging()).every(i=>e.indexOf(i)===-1)?this._reset():this._sortStrategy.withItems(this._draggables)),this}withDirection(e){return this._direction=e,this._sortStrategy instanceof jw&&(this._sortStrategy.direction=e),this}connectedTo(e){return this._siblings=e.slice(),this}withOrientation(e){if(e==="mixed")this._sortStrategy=new xR(this._document,this._dragDropRegistry);else{let t=new jw(this._dragDropRegistry);t.direction=this._direction,t.orientation=e,this._sortStrategy=t}return this._sortStrategy.withElementContainer(this._container),this._sortStrategy.withSortPredicate((t,r)=>this.sortPredicate(t,r,this)),this}withScrollableParents(e){let t=this._container;return this._scrollableElements=e.indexOf(t)===-1?[t,...e]:e.slice(),this}withElementContainer(e){if(e===this._container)return this;let t=Pi(this.element),r=this._scrollableElements.indexOf(this._container),i=this._scrollableElements.indexOf(e);return r>-1&&this._scrollableElements.splice(r,1),i>-1&&this._scrollableElements.splice(i,1),this._sortStrategy&&this._sortStrategy.withElementContainer(e),this._cachedShadowRoot=null,this._scrollableElements.unshift(e),this._container=e,this}getScrollableParents(){return this._scrollableElements}getItemIndex(e){return this._isDragging?this._sortStrategy.getItemIndex(e):this._draggables.indexOf(e)}getItemAtIndex(e){return this._isDragging?this._sortStrategy.getItemAtIndex(e):this._draggables[e]||null}isReceiving(){return this._activeSiblings.size>0}_sortItem(e,t,r,i){if(this.sortingDisabled||!this._domRect||!QB(this._domRect,s3,t,r))return;let s=this._sortStrategy.sort(e,t,r,i);s&&this.sorted.next({previousIndex:s.previousIndex,currentIndex:s.currentIndex,container:this,item:e})}_startScrollingIfNecessary(e,t){if(this.autoScrollDisabled)return;let r,i=Jr.NONE,s=Xn.NONE;if(this._parentPositions.positions.forEach((o,a)=>{a===this._document||!o.clientRect||r||QB(o.clientRect,s3,e,t)&&([i,s]=_te(a,o.clientRect,this._direction,e,t),(i||s)&&(r=a))}),!i&&!s){let{width:o,height:a}=this._viewportRuler.getViewportSize(),c={width:o,height:a,top:0,right:o,bottom:a,left:0};i=l3(c,t),s=u3(c,e),r=window}r&&(i!==this._verticalScrollDirection||s!==this._horizontalScrollDirection||r!==this._scrollNode)&&(this._verticalScrollDirection=i,this._horizontalScrollDirection=s,this._scrollNode=r,(i||s)&&r?this._ngZone.runOutsideAngular(this._startScrollInterval):this._stopScrolling())}_stopScrolling(){this._stopScrollTimers.next()}_draggingStarted(){let e=this._container.style;this.beforeStarted.next(),this._isDragging=!0,this._initialScrollSnap=e.msScrollSnapType||e.scrollSnapType||"",e.scrollSnapType=e.msScrollSnapType="none",this._sortStrategy.start(this._draggables),this._cacheParentPositions(),this._viewportScrollSubscription.unsubscribe(),this._listenToScrollEvents()}_cacheParentPositions(){this._parentPositions.cache(this._scrollableElements),this._domRect=this._parentPositions.positions.get(this._container).clientRect}_reset(){this._isDragging=!1;let e=this._container.style;e.scrollSnapType=e.msScrollSnapType=this._initialScrollSnap,this._siblings.forEach(t=>t._stopReceiving(this)),this._sortStrategy.reset(),this._stopScrolling(),this._viewportScrollSubscription.unsubscribe(),this._parentPositions.clear()}_startScrollInterval=()=>{this._stopScrolling(),VI(0,Am).pipe(li(this._stopScrollTimers)).subscribe(()=>{let e=this._scrollNode,t=this.autoScrollStep;this._verticalScrollDirection===Jr.UP?e.scrollBy(0,-t):this._verticalScrollDirection===Jr.DOWN&&e.scrollBy(0,t),this._horizontalScrollDirection===Xn.LEFT?e.scrollBy(-t,0):this._horizontalScrollDirection===Xn.RIGHT&&e.scrollBy(t,0)})};_isOverContainer(e,t){return this._domRect!=null&&SR(this._domRect,e,t)}_getSiblingContainerFromPosition(e,t,r){return this._siblings.find(i=>i._canReceive(e,t,r))}_canReceive(e,t,r){if(!this._domRect||!SR(this._domRect,t,r)||!this.enterPredicate(e,this))return!1;let i=this._getShadowRoot().elementFromPoint(t,r);return i?i===this._container||this._container.contains(i):!1}_startReceiving(e,t){let r=this._activeSiblings;!r.has(e)&&t.every(i=>this.enterPredicate(i,this)||this._draggables.indexOf(i)>-1)&&(r.add(e),this._cacheParentPositions(),this._listenToScrollEvents(),this.receivingStarted.next({initiator:e,receiver:this,items:t}))}_stopReceiving(e){this._activeSiblings.delete(e),this._viewportScrollSubscription.unsubscribe(),this.receivingStopped.next({initiator:e,receiver:this})}_listenToScrollEvents(){this._viewportScrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(e=>{if(this.isDragging()){let t=this._parentPositions.handleScroll(e);t&&this._sortStrategy.updateOnScroll(t.top,t.left)}else this.isReceiving()&&this._cacheParentPositions()})}_getShadowRoot(){if(!this._cachedShadowRoot){let e=Mw(this._container);this._cachedShadowRoot=e||this._document}return this._cachedShadowRoot}_notifyReceivingSiblings(){let e=this._sortStrategy.getActiveItemsSnapshot().filter(t=>t.isDragging());this._siblings.forEach(t=>t._startReceiving(this,e))}};function l3(n,e){let{top:t,bottom:r,height:i}=n,s=i*c3;return e>=t-s&&e<=t+s?Jr.UP:e>=r-s&&e<=r+s?Jr.DOWN:Jr.NONE}function u3(n,e){let{left:t,right:r,width:i}=n,s=i*c3;return e>=t-s&&e<=t+s?Xn.LEFT:e>=r-s&&e<=r+s?Xn.RIGHT:Xn.NONE}function _te(n,e,t,r,i){let s=l3(e,i),o=u3(e,r),a=Jr.NONE,c=Xn.NONE;if(s){let l=n.scrollTop;s===Jr.UP?l>0&&(a=Jr.UP):n.scrollHeight-l>n.clientHeight&&(a=Jr.DOWN)}if(o){let l=n.scrollLeft;t==="rtl"?o===Xn.RIGHT?l<0&&(c=Xn.RIGHT):n.scrollWidth+l>n.clientWidth&&(c=Xn.LEFT):o===Xn.LEFT?l>0&&(c=Xn.LEFT):n.scrollWidth-l>n.clientWidth&&(c=Xn.RIGHT)}return[a,c]}var Fg={capture:!0},CR={passive:!1,capture:!0},vte=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=Gt({type:n,selectors:[["ng-component"]],hostAttrs:["cdk-drag-resets-container",""],decls:0,vars:0,template:function(r,i){},styles:[`@layer cdk-resets{.cdk-drag-preview{background:none;border:none;padding:0;color:inherit;inset:auto}}.cdk-drag-placeholder *,.cdk-drag-preview *{pointer-events:none !important}
`],encapsulation:2,changeDetection:0})}return n})(),PR=(()=>{class n{_ngZone=M(it);_document=M(It);_styleLoader=M(BB);_renderer=M(wr).createRenderer(null,null);_cleanupDocumentTouchmove;_scroll=new me;_dropInstances=new Set;_dragInstances=new Set;_activeDragInstances=he([]);_globalListeners;_draggingPredicate=t=>t.isDragging();_domNodesToDirectives=null;pointerMove=new me;pointerUp=new me;constructor(){}registerDropContainer(t){this._dropInstances.has(t)||this._dropInstances.add(t)}registerDragItem(t){this._dragInstances.add(t),this._dragInstances.size===1&&this._ngZone.runOutsideAngular(()=>{this._cleanupDocumentTouchmove?.(),this._cleanupDocumentTouchmove=this._renderer.listen(this._document,"touchmove",this._persistentTouchmoveListener,CR)})}removeDropContainer(t){this._dropInstances.delete(t)}removeDragItem(t){this._dragInstances.delete(t),this.stopDragging(t),this._dragInstances.size===0&&this._cleanupDocumentTouchmove?.()}startDragging(t,r){if(!(this._activeDragInstances().indexOf(t)>-1)&&(this._styleLoader.load(vte),this._activeDragInstances.update(i=>[...i,t]),this._activeDragInstances().length===1)){let i=r.type.startsWith("touch"),s=a=>this.pointerUp.next(a),o=[["scroll",a=>this._scroll.next(a),Fg],["selectstart",this._preventDefaultWhileDragging,CR]];i?o.push(["touchend",s,Fg],["touchcancel",s,Fg]):o.push(["mouseup",s,Fg]),i||o.push(["mousemove",a=>this.pointerMove.next(a),CR]),this._ngZone.runOutsideAngular(()=>{this._globalListeners=o.map(([a,c,l])=>this._renderer.listen(this._document,a,c,l))})}}stopDragging(t){this._activeDragInstances.update(r=>{let i=r.indexOf(t);return i>-1?(r.splice(i,1),[...r]):r}),this._activeDragInstances().length===0&&this._clearGlobalListeners()}isDragging(t){return this._activeDragInstances().indexOf(t)>-1}scrolled(t){let r=[this._scroll];return t&&t!==this._document&&r.push(new Se(i=>this._ngZone.runOutsideAngular(()=>{let s=this._renderer.listen(t,"scroll",o=>{this._activeDragInstances().length&&i.next(o)},Fg);return()=>{s()}}))),Yh(...r)}registerDirectiveNode(t,r){this._domNodesToDirectives??=new WeakMap,this._domNodesToDirectives.set(t,r)}removeDirectiveNode(t){this._domNodesToDirectives?.delete(t)}getDragDirectiveForNode(t){return this._domNodesToDirectives?.get(t)||null}ngOnDestroy(){this._dragInstances.forEach(t=>this.removeDragItem(t)),this._dropInstances.forEach(t=>this.removeDropContainer(t)),this._domNodesToDirectives=null,this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}_preventDefaultWhileDragging=t=>{this._activeDragInstances().length>0&&t.preventDefault()};_persistentTouchmoveListener=t=>{this._activeDragInstances().length>0&&(this._activeDragInstances().some(this._draggingPredicate)&&t.preventDefault(),this.pointerMove.next(t))};_clearGlobalListeners(){this._globalListeners?.forEach(t=>t()),this._globalListeners=void 0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),wte={dragStartThreshold:5,pointerDirectionChangeThreshold:5},MR=(()=>{class n{_document=M(It);_ngZone=M(it);_viewportRuler=M(HB);_dragDropRegistry=M(PR);_renderer=M(wr).createRenderer(null,null);constructor(){}createDrag(t,r=wte){return new AR(t,r,this._document,this._ngZone,this._viewportRuler,this._dragDropRegistry,this._renderer)}createDropList(t){return new RR(t,this._dragDropRegistry,this._document,this._ngZone,this._viewportRuler)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Bw=new re("CDK_DRAG_PARENT");var d3=new re("CdkDragHandle"),h3=(()=>{class n{element=M(Ht);_parentDrag=M(Bw,{optional:!0,skipSelf:!0});_dragDropRegistry=M(PR);_stateChanges=new me;get disabled(){return this._disabled}set disabled(t){this._disabled=t,this._stateChanges.next(this)}_disabled=!1;constructor(){this._parentDrag?._addHandle(this)}ngAfterViewInit(){if(!this._parentDrag){let t=this.element.nativeElement.parentElement;for(;t;){let r=this._dragDropRegistry.getDragDirectiveForNode(t);if(r){this._parentDrag=r,r._addHandle(this);break}t=t.parentElement}}}ngOnDestroy(){this._parentDrag?._removeHandle(this),this._stateChanges.complete()}static \u0275fac=function(r){return new(r||n)};static \u0275dir=Rt({type:n,selectors:[["","cdkDragHandle",""]],hostAttrs:[1,"cdk-drag-handle"],inputs:{disabled:[2,"cdkDragHandleDisabled","disabled",or]},features:[Br([{provide:d3,useExisting:n}])]})}return n})(),f3=new re("CDK_DRAG_CONFIG"),p3=new re("CdkDropList"),g3=(()=>{class n{element=M(Ht);dropContainer=M(p3,{optional:!0,skipSelf:!0});_ngZone=M(it);_viewContainerRef=M(es);_dir=M(IR,{optional:!0});_changeDetectorRef=M($r);_selfHandle=M(d3,{optional:!0,self:!0});_parentDrag=M(Bw,{optional:!0,skipSelf:!0});_dragDropRegistry=M(PR);_destroyed=new me;_handles=new ct([]);_previewTemplate;_placeholderTemplate;_dragRef;data;lockAxis=null;rootElementSelector;boundaryElement;dragStartDelay;freeDragPosition;get disabled(){return this._disabled||!!(this.dropContainer&&this.dropContainer.disabled)}set disabled(t){this._disabled=t,this._dragRef.disabled=this._disabled}_disabled;constrainPosition;previewClass;previewContainer;scale=1;started=new We;released=new We;ended=new We;entered=new We;exited=new We;dropped=new We;moved=new Se(t=>{let r=this._dragRef.moved.pipe(ye(i=>({source:this,pointerPosition:i.pointerPosition,event:i.event,delta:i.delta,distance:i.distance}))).subscribe(t);return()=>{r.unsubscribe()}});_injector=M(wt);constructor(){let t=this.dropContainer,r=M(f3,{optional:!0}),i=M(MR);this._dragRef=i.createDrag(this.element,{dragStartThreshold:r&&r.dragStartThreshold!=null?r.dragStartThreshold:5,pointerDirectionChangeThreshold:r&&r.pointerDirectionChangeThreshold!=null?r.pointerDirectionChangeThreshold:5,zIndex:r?.zIndex}),this._dragRef.data=this,this._dragDropRegistry.registerDirectiveNode(this.element.nativeElement,this),r&&this._assignDefaults(r),t&&(t.addItem(this),t._dropListRef.beforeStarted.pipe(li(this._destroyed)).subscribe(()=>{this._dragRef.scale=this.scale})),this._syncInputs(this._dragRef),this._handleEvents(this._dragRef)}getPlaceholderElement(){return this._dragRef.getPlaceholderElement()}getRootElement(){return this._dragRef.getRootElement()}reset(){this._dragRef.reset()}resetToBoundary(){this._dragRef.resetToBoundary()}getFreeDragPosition(){return this._dragRef.getFreeDragPosition()}setFreeDragPosition(t){this._dragRef.setFreeDragPosition(t)}ngAfterViewInit(){Hc(()=>{this._updateRootElement(),this._setupHandlesListener(),this._dragRef.scale=this.scale,this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)},{injector:this._injector})}ngOnChanges(t){let r=t.rootElementSelector,i=t.freeDragPosition;r&&!r.firstChange&&this._updateRootElement(),this._dragRef.scale=this.scale,i&&!i.firstChange&&this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)}ngOnDestroy(){this.dropContainer&&this.dropContainer.removeItem(this),this._dragDropRegistry.removeDirectiveNode(this.element.nativeElement),this._ngZone.runOutsideAngular(()=>{this._handles.complete(),this._destroyed.next(),this._destroyed.complete(),this._dragRef.dispose()})}_addHandle(t){let r=this._handles.getValue();r.push(t),this._handles.next(r)}_removeHandle(t){let r=this._handles.getValue(),i=r.indexOf(t);i>-1&&(r.splice(i,1),this._handles.next(r))}_setPreviewTemplate(t){this._previewTemplate=t}_resetPreviewTemplate(t){t===this._previewTemplate&&(this._previewTemplate=null)}_setPlaceholderTemplate(t){this._placeholderTemplate=t}_resetPlaceholderTemplate(t){t===this._placeholderTemplate&&(this._placeholderTemplate=null)}_updateRootElement(){let t=this.element.nativeElement,r=t;this.rootElementSelector&&(r=t.closest!==void 0?t.closest(this.rootElementSelector):t.parentElement?.closest(this.rootElementSelector)),this._dragRef.withRootElement(r||t)}_getBoundaryElement(){let t=this.boundaryElement;return t?typeof t=="string"?this.element.nativeElement.closest(t):Pi(t):null}_syncInputs(t){t.beforeStarted.subscribe(()=>{if(!t.isDragging()){let r=this._dir,i=this.dragStartDelay,s=this._placeholderTemplate?{template:this._placeholderTemplate.templateRef,context:this._placeholderTemplate.data,viewContainer:this._viewContainerRef}:null,o=this._previewTemplate?{template:this._previewTemplate.templateRef,context:this._previewTemplate.data,matchSize:this._previewTemplate.matchSize,viewContainer:this._viewContainerRef}:null;t.disabled=this.disabled,t.lockAxis=this.lockAxis,t.scale=this.scale,t.dragStartDelay=typeof i=="object"&&i?i:Ow(i),t.constrainPosition=this.constrainPosition,t.previewClass=this.previewClass,t.withBoundaryElement(this._getBoundaryElement()).withPlaceholderTemplate(s).withPreviewTemplate(o).withPreviewContainer(this.previewContainer||"global"),r&&t.withDirection(r.value)}}),t.beforeStarted.pipe(Ln(1)).subscribe(()=>{if(this._parentDrag){t.withParent(this._parentDrag._dragRef);return}let r=this.element.nativeElement.parentElement;for(;r;){let i=this._dragDropRegistry.getDragDirectiveForNode(r);if(i){t.withParent(i._dragRef);break}r=r.parentElement}})}_handleEvents(t){t.started.subscribe(r=>{this.started.emit({source:this,event:r.event}),this._changeDetectorRef.markForCheck()}),t.released.subscribe(r=>{this.released.emit({source:this,event:r.event})}),t.ended.subscribe(r=>{this.ended.emit({source:this,distance:r.distance,dropPoint:r.dropPoint,event:r.event}),this._changeDetectorRef.markForCheck()}),t.entered.subscribe(r=>{this.entered.emit({container:r.container.data,item:this,currentIndex:r.currentIndex})}),t.exited.subscribe(r=>{this.exited.emit({container:r.container.data,item:this})}),t.dropped.subscribe(r=>{this.dropped.emit({previousIndex:r.previousIndex,currentIndex:r.currentIndex,previousContainer:r.previousContainer.data,container:r.container.data,isPointerOverContainer:r.isPointerOverContainer,item:this,distance:r.distance,dropPoint:r.dropPoint,event:r.event})})}_assignDefaults(t){let{lockAxis:r,dragStartDelay:i,constrainPosition:s,previewClass:o,boundaryElement:a,draggingDisabled:c,rootElementSelector:l,previewContainer:h}=t;this.disabled=c??!1,this.dragStartDelay=i||0,this.lockAxis=r||null,s&&(this.constrainPosition=s),o&&(this.previewClass=o),a&&(this.boundaryElement=a),l&&(this.rootElementSelector=l),h&&(this.previewContainer=h)}_setupHandlesListener(){this._handles.pipe(vt(t=>{let r=t.map(i=>i.element);this._selfHandle&&this.rootElementSelector&&r.push(this.element),this._dragRef.withHandles(r)}),Gn(t=>Yh(...t.map(r=>r._stateChanges.pipe(vc(r))))),li(this._destroyed)).subscribe(t=>{let r=this._dragRef,i=t.element.nativeElement;t.disabled?r.disableHandle(i):r.enableHandle(i)})}static \u0275fac=function(r){return new(r||n)};static \u0275dir=Rt({type:n,selectors:[["","cdkDrag",""]],hostAttrs:[1,"cdk-drag"],hostVars:4,hostBindings:function(r,i){r&2&&Wt("cdk-drag-disabled",i.disabled)("cdk-drag-dragging",i._dragRef.isDragging())},inputs:{data:[0,"cdkDragData","data"],lockAxis:[0,"cdkDragLockAxis","lockAxis"],rootElementSelector:[0,"cdkDragRootElement","rootElementSelector"],boundaryElement:[0,"cdkDragBoundary","boundaryElement"],dragStartDelay:[0,"cdkDragStartDelay","dragStartDelay"],freeDragPosition:[0,"cdkDragFreeDragPosition","freeDragPosition"],disabled:[2,"cdkDragDisabled","disabled",or],constrainPosition:[0,"cdkDragConstrainPosition","constrainPosition"],previewClass:[0,"cdkDragPreviewClass","previewClass"],previewContainer:[0,"cdkDragPreviewContainer","previewContainer"],scale:[2,"cdkDragScale","scale",$M]},outputs:{started:"cdkDragStarted",released:"cdkDragReleased",ended:"cdkDragEnded",entered:"cdkDragEntered",exited:"cdkDragExited",dropped:"cdkDragDropped",moved:"cdkDragMoved"},exportAs:["cdkDrag"],features:[Br([{provide:Bw,useExisting:n}]),jr]})}return n})(),o3=new re("CdkDropListGroup");var m3=(()=>{class n{element=M(Ht);_changeDetectorRef=M($r);_scrollDispatcher=M($B);_dir=M(IR,{optional:!0});_group=M(o3,{optional:!0,skipSelf:!0});_latestSortedRefs;_destroyed=new me;_scrollableParentsResolved;static _dropLists=[];_dropListRef;connectedTo=[];data;orientation;id=M(Vw).getId("cdk-drop-list-");lockAxis=null;get disabled(){return this._disabled||!!this._group&&this._group.disabled}set disabled(t){this._dropListRef.disabled=this._disabled=t}_disabled;sortingDisabled;enterPredicate=()=>!0;sortPredicate=()=>!0;autoScrollDisabled;autoScrollStep;elementContainerSelector;hasAnchor;dropped=new We;entered=new We;exited=new We;sorted=new We;_unsortedItems=new Set;constructor(){let t=M(MR),r=M(f3,{optional:!0});this._dropListRef=t.createDropList(this.element),this._dropListRef.data=this,r&&this._assignDefaults(r),this._dropListRef.enterPredicate=(i,s)=>this.enterPredicate(i.data,s.data),this._dropListRef.sortPredicate=(i,s,o)=>this.sortPredicate(i,s.data,o.data),this._setupInputSyncSubscription(this._dropListRef),this._handleEvents(this._dropListRef),n._dropLists.push(this),this._group&&this._group._items.add(this)}addItem(t){this._unsortedItems.add(t),t._dragRef._withDropContainer(this._dropListRef),this._dropListRef.isDragging()&&this._syncItemsWithRef(this.getSortedItems().map(r=>r._dragRef))}removeItem(t){if(this._unsortedItems.delete(t),this._latestSortedRefs){let r=this._latestSortedRefs.indexOf(t._dragRef);r>-1&&(this._latestSortedRefs.splice(r,1),this._syncItemsWithRef(this._latestSortedRefs))}}getSortedItems(){return Array.from(this._unsortedItems).sort((t,r)=>t._dragRef.getVisibleElement().compareDocumentPosition(r._dragRef.getVisibleElement())&Node.DOCUMENT_POSITION_FOLLOWING?-1:1)}ngOnDestroy(){let t=n._dropLists.indexOf(this);t>-1&&n._dropLists.splice(t,1),this._group&&this._group._items.delete(this),this._latestSortedRefs=void 0,this._unsortedItems.clear(),this._dropListRef.dispose(),this._destroyed.next(),this._destroyed.complete()}_setupInputSyncSubscription(t){this._dir&&this._dir.change.pipe(vc(this._dir.value),li(this._destroyed)).subscribe(r=>t.withDirection(r)),t.beforeStarted.subscribe(()=>{let r=qB(this.connectedTo).map(i=>{if(typeof i=="string"){let s=n._dropLists.find(o=>o.id===i);return s}return i});if(this._group&&this._group._items.forEach(i=>{r.indexOf(i)===-1&&r.push(i)}),!this._scrollableParentsResolved){let i=this._scrollDispatcher.getAncestorScrollContainers(this.element).map(s=>s.getElementRef().nativeElement);this._dropListRef.withScrollableParents(i),this._scrollableParentsResolved=!0}if(this.elementContainerSelector){let i=this.element.nativeElement.querySelector(this.elementContainerSelector);t.withElementContainer(i)}t.disabled=this.disabled,t.lockAxis=this.lockAxis,t.sortingDisabled=this.sortingDisabled,t.autoScrollDisabled=this.autoScrollDisabled,t.autoScrollStep=Ow(this.autoScrollStep,2),t.hasAnchor=this.hasAnchor,t.connectedTo(r.filter(i=>i&&i!==this).map(i=>i._dropListRef)).withOrientation(this.orientation)})}_handleEvents(t){t.beforeStarted.subscribe(()=>{this._syncItemsWithRef(this.getSortedItems().map(r=>r._dragRef)),this._changeDetectorRef.markForCheck()}),t.entered.subscribe(r=>{this.entered.emit({container:this,item:r.item.data,currentIndex:r.currentIndex})}),t.exited.subscribe(r=>{this.exited.emit({container:this,item:r.item.data}),this._changeDetectorRef.markForCheck()}),t.sorted.subscribe(r=>{this.sorted.emit({previousIndex:r.previousIndex,currentIndex:r.currentIndex,container:this,item:r.item.data})}),t.dropped.subscribe(r=>{this.dropped.emit({previousIndex:r.previousIndex,currentIndex:r.currentIndex,previousContainer:r.previousContainer.data,container:r.container.data,item:r.item.data,isPointerOverContainer:r.isPointerOverContainer,distance:r.distance,dropPoint:r.dropPoint,event:r.event}),this._changeDetectorRef.markForCheck()}),Yh(t.receivingStarted,t.receivingStopped).subscribe(()=>this._changeDetectorRef.markForCheck())}_assignDefaults(t){let{lockAxis:r,draggingDisabled:i,sortingDisabled:s,listAutoScrollDisabled:o,listOrientation:a}=t;this.disabled=i??!1,this.sortingDisabled=s??!1,this.autoScrollDisabled=o??!1,this.orientation=a||"vertical",this.lockAxis=r||null}_syncItemsWithRef(t){this._latestSortedRefs=t,this._dropListRef.withItems(t)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=Rt({type:n,selectors:[["","cdkDropList",""],["cdk-drop-list"]],hostAttrs:[1,"cdk-drop-list"],hostVars:7,hostBindings:function(r,i){r&2&&(zc("id",i.id),Wt("cdk-drop-list-disabled",i.disabled)("cdk-drop-list-dragging",i._dropListRef.isDragging())("cdk-drop-list-receiving",i._dropListRef.isReceiving()))},inputs:{connectedTo:[0,"cdkDropListConnectedTo","connectedTo"],data:[0,"cdkDropListData","data"],orientation:[0,"cdkDropListOrientation","orientation"],id:"id",lockAxis:[0,"cdkDropListLockAxis","lockAxis"],disabled:[2,"cdkDropListDisabled","disabled",or],sortingDisabled:[2,"cdkDropListSortingDisabled","sortingDisabled",or],enterPredicate:[0,"cdkDropListEnterPredicate","enterPredicate"],sortPredicate:[0,"cdkDropListSortPredicate","sortPredicate"],autoScrollDisabled:[2,"cdkDropListAutoScrollDisabled","autoScrollDisabled",or],autoScrollStep:[0,"cdkDropListAutoScrollStep","autoScrollStep"],elementContainerSelector:[0,"cdkDropListElementContainer","elementContainerSelector"],hasAnchor:[2,"cdkDropListHasAnchor","hasAnchor",or]},outputs:{dropped:"cdkDropListDropped",entered:"cdkDropListEntered",exited:"cdkDropListExited",sorted:"cdkDropListSorted"},exportAs:["cdkDropList"],features:[Br([{provide:o3,useValue:void 0},{provide:p3,useExisting:n}])]})}return n})();var Ite=new re("CdkDragPlaceholder"),y3=(()=>{class n{templateRef=M(Us);_drag=M(Bw,{optional:!0});data;constructor(){this._drag?._setPlaceholderTemplate(this)}ngOnDestroy(){this._drag?._resetPlaceholderTemplate(this)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=Rt({type:n,selectors:[["ng-template","cdkDragPlaceholder",""]],inputs:{data:"data"},features:[Br([{provide:Ite,useExisting:n}])]})}return n})();var _3=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=br({type:n});static \u0275inj=rr({providers:[MR],imports:[zB]})}return n})();var Ete="firebase",Cte="12.6.0";wa(Ete,Cte,"app");var Xr=class n{firestore=M(Ni);usersCollection=vo(this.firestore,"users");unsubUsers=null;unsubAllUsers=null;users=he([]);allUsers=he([]);currentUser=he(null);loading=he(!0);error=he(null);usersSubject=new ct([]);users$=this.usersSubject.asObservable();migrationInProgress=he(!1);constructor(){this.subscribeToAllUsers(),this.restoreSession(),vr(()=>{let e=this.currentUser();this.subscribeToUsers(e?.userId)})}subscribeToAllUsers(){let e=Ag(this.usersCollection,uR("name"));this.unsubAllUsers=Dg(e,t=>{let r=t.docs.map(i=>{let s=i.data();return ie(B({id:i.id},s),{userId:s.userId||null,lastActive:s.lastActive?.toDate?s.lastActive.toDate():s.lastActive,createdAt:s.createdAt?.toDate?s.createdAt.toDate():s.createdAt})});this.allUsers.set(r),this.migrateUsersWithoutUserId(r).subscribe()},t=>{console.error("Error fetching all users",t)})}subscribeToUsers(e){if(this.unsubUsers&&(this.unsubUsers(),this.unsubUsers=null),!e){this.users.set([]),this.usersSubject.next([]),this.loading.set(!1);return}let t=Ag(this.usersCollection,Sw("createdBy","==",e),uR("name"));this.unsubUsers=Dg(t,r=>{let i=r.docs.map(o=>{let a=o.data();return ie(B({id:o.id},a),{userId:a.userId||null,lastActive:a.lastActive?.toDate?a.lastActive.toDate():a.lastActive,createdAt:a.createdAt?.toDate?a.createdAt.toDate():a.createdAt})}),s=this.currentUser();s&&!i.find(o=>o.id===s.id)&&i.unshift(s),i.sort((o,a)=>o.name.localeCompare(a.name)),this.users.set(i),this.usersSubject.next(i),this.loading.set(!1),this.migrateUsersWithoutUserId(i).subscribe()},r=>{console.error("Error fetching users",r),this.error.set(r.message),this.loading.set(!1)})}migrateUsersWithoutUserId(e){if(this.migrationInProgress())return de(void 0);let t=e.filter(i=>!i.userId);if(t.length===0)return de(void 0);this.migrationInProgress.set(!0),console.log(`\u{1F504} Migrating ${t.length} user(s) without userId...`);let r=t.map(i=>{let s=this.generateUserId();return console.log(`  \u2192 Migrating user "${i.name}" (${i.id}) \u2192 userId: ${s}`),this.updateUser$(i.id,{userId:s}).pipe(ye(()=>({name:i.name,userId:s})))});return De(Promise.all(r.map(i=>i.toPromise()))).pipe(vt(i=>{console.log(`\u2705 Successfully migrated ${i.length} user(s):`,i)}),Rs(i=>(console.error("\u274C Error during user migration:",i),de(void 0))),vt(()=>{this.migrationInProgress.set(!1)}),ye(()=>{}))}async restoreSession(){let e=localStorage.getItem("currentUserId");if(!e){this.loading.set(!1);return}try{let t=await yB(kr(this.firestore,"users",e));if(t.exists()){let r=t.data(),i=ie(B({id:t.id},r),{userId:r.userId||null,lastActive:r.lastActive?.toDate?r.lastActive.toDate():r.lastActive,createdAt:r.createdAt?.toDate?r.createdAt.toDate():r.createdAt});this.currentUser.set(i),i.status!=="active"&&this.updateUser$(i.id,{status:"active",lastActive:ki()}).subscribe()}else localStorage.removeItem("currentUserId"),this.loading.set(!1)}catch(t){console.error("Error restoring session:",t),localStorage.removeItem("currentUserId"),this.loading.set(!1)}}updateCurrentUserReference(e){let t=localStorage.getItem("currentUserId");if(t){let r=e.find(i=>i.id===t);r&&(this.currentUser.set(r),r.status!=="active"&&this.updateUser$(r.id,{status:"active",lastActive:ki()}).subscribe())}}login$(e){return(e.userId?de(void 0):this.updateUser$(e.id,{userId:this.generateUserId()}).pipe(vt(()=>e=ie(B({},e),{userId:this.generateUserId()})))).pipe(Gn(()=>(localStorage.setItem("currentUserId",e.id),this.currentUser.set(e),this.updateUser$(e.id,{status:"active",lastActive:ki()}))))}async login(e){if(!e.userId){let t=this.generateUserId();await this.updateUser(e.id,{userId:t}),e=ie(B({},e),{userId:t})}localStorage.setItem("currentUserId",e.id),this.currentUser.set(e),await this.updateUser(e.id,{status:"active",lastActive:ki()})}logout$(){let e=this.currentUser();return e?this.updateUser$(e.id,{status:"offline",lastActive:ki()}).pipe(vt(()=>{localStorage.removeItem("currentUserId"),this.currentUser.set(null)})):(localStorage.removeItem("currentUserId"),this.currentUser.set(null),de(void 0))}async logout(){let e=this.currentUser();e&&await this.updateUser(e.id,{status:"offline",lastActive:ki()}),localStorage.removeItem("currentUserId"),this.currentUser.set(null)}createUser$(e){let t=this.generateUserId(),r=this.currentUser()?.userId;return De(ch(this.usersCollection,ie(B({},e),{userId:t,createdBy:r,status:e.status||"pending",lastActive:ki(),createdAt:ki()}))).pipe(ye(()=>{}))}async createUser(e){let t=this.generateUserId(),r=this.currentUser()?.userId;await ch(this.usersCollection,ie(B({},e),{userId:t,createdBy:r,status:e.status||"pending",lastActive:ki(),createdAt:ki()}))}generateUserId(){let e=Date.now().toString(36),t=Math.random().toString(36).substring(2,8);return`user_${e}_${t}`}updateUser$(e,t){return De(Ga(kr(this.firestore,"users",e),t))}async updateUser(e,t){await Ga(kr(this.firestore,"users",e),t)}deleteUser$(e){return De(lh(kr(this.firestore,"users",e)))}async deleteUser(e){await lh(kr(this.firestore,"users",e))}manualMigrateAllUsers$(){let t=this.users().filter(o=>!o.userId);if(t.length===0)return console.log("\u2705 All users already have userId assigned."),de({migrated:0,errors:0});let r=0,i=0,s=t.map(o=>{let a=this.generateUserId();return this.updateUser$(o.id,{userId:a}).pipe(vt(()=>{console.log(`\u2705 Migrated user "${o.name}" \u2192 ${a}`),r++}),Rs(c=>(console.error(`\u274C Failed to migrate user "${o.name}":`,c),i++,de(void 0))))});return De(Promise.all(s.map(o=>o.toPromise()))).pipe(ye(()=>({migrated:r,errors:i})))}async manualMigrateAllUsers(){let t=this.users().filter(s=>!s.userId);if(t.length===0)return console.log("\u2705 All users already have userId assigned."),{migrated:0,errors:0};let r=0,i=0;for(let s of t)try{let o=this.generateUserId();await this.updateUser(s.id,{userId:o}),console.log(`\u2705 Migrated user "${s.name}" \u2192 ${o}`),r++}catch(o){console.error(`\u274C Failed to migrate user "${s.name}":`,o),i++}return{migrated:r,errors:i}}getUsersNeedingMigration(){return this.users().filter(e=>!e.userId)}static \u0275fac=function(t){return new(t||n)};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})};var ws=class n{userService=M(Xr);firestore;TASKS_COLLECTION="overview_tasks";tasksSignal=he([]);tasks=He(()=>this.tasksSignal());tasksSubject=new ct([]);tasks$=this.tasksSubject.asObservable();unsubTasks=null;constructor(){let e=bp(uh.firebase);this.firestore=S0(e),vr(()=>{let t=this.userService.currentUser();this.cleanupSubscription(),t&&t.userId?(console.log("\u{1F4CB} Loading tasks for user:",t.userId),this.initRealtimeData(t.userId)):(console.log("\u{1F512} No user logged in - clearing task data"),this.tasksSignal.set([]),this.tasksSubject.next([]))})}getCurrentUserId(){return this.userService.currentUser()?.userId||""}cleanupSubscription(){this.unsubTasks&&(this.unsubTasks(),this.unsubTasks=null)}initRealtimeData(e){if(!e)return;let t=eg(Xp(this.firestore,this.TASKS_COLLECTION),tg("userId","==",e));this.unsubTasks=ng(t,r=>{let i=r.docs.map(s=>{let o=s.data(),a=o.dueDate&&typeof o.dueDate.toDate=="function"?o.dueDate.toDate():o.dueDate?new Date(o.dueDate):null,c=o.createdAt&&typeof o.createdAt.toDate=="function"?o.createdAt.toDate():new Date;return ie(B({},o),{dueDate:a,createdAt:c,order:o.order??Date.now()})});i.sort((s,o)=>(s.order??0)-(o.order??0)),this.tasksSignal.set(i),this.tasksSubject.next(i)})}createTask$(e){let t=this.getCurrentUserId();if(!t)return Mr(()=>new Error("User must be logged in to create tasks"));let r=this.tasksSignal().filter(o=>o.category===e.category),i=r.length>0?Math.max(...r.map(o=>o.order??0)):0,s=`task_${Date.now()}_${Math.random().toString(36).substr(2,5)}`;return De(lo(en(this.firestore,this.TASKS_COLLECTION,s),ie(B({},e),{id:s,userId:t,order:i+1e3,createdAt:new Date}))).pipe(ye(()=>s))}async createTask(e){let t=this.getCurrentUserId();if(!t)throw new Error("User must be logged in to create tasks");let r=this.tasksSignal().filter(o=>o.category===e.category),i=r.length>0?Math.max(...r.map(o=>o.order??0)):0,s=`task_${Date.now()}_${Math.random().toString(36).substr(2,5)}`;await lo(en(this.firestore,this.TASKS_COLLECTION,s),ie(B({},e),{id:s,userId:t,order:i+1e3,createdAt:new Date}))}updateTask$(e,t){return De(Ma(en(this.firestore,this.TASKS_COLLECTION,e),t))}async updateTask(e,t){await Ma(en(this.firestore,this.TASKS_COLLECTION,e),t)}deleteTask$(e){return De(Il(en(this.firestore,this.TASKS_COLLECTION,e)))}async deleteTask(e){await Il(en(this.firestore,this.TASKS_COLLECTION,e))}ngOnDestroy(){this.cleanupSubscription()}reorderTasks$(e){let t=e.map((r,i)=>this.updateTask$(r.id,{order:i*1e3}));return $i(t).pipe(ye(()=>{}))}static \u0275fac=function(t){return new(t||n)};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})};var Ug=["bg-red-500","bg-orange-500","bg-amber-500","bg-green-500","bg-emerald-500","bg-teal-500","bg-cyan-500","bg-blue-500","bg-indigo-500","bg-violet-500","bg-purple-500","bg-fuchsia-500","bg-pink-500","bg-rose-500","bg-slate-500"],v3=[{id:"groceries",label:"Groceries",color:"bg-amber-400",textColor:"text-amber-400"},{id:"chores",label:"Chores",color:"bg-blue-400",textColor:"text-blue-400"},{id:"repairs",label:"Repairs",color:"bg-purple-500",textColor:"text-purple-400"},{id:"other",label:"Other",color:"bg-slate-400",textColor:"text-slate-400"}];var Zr=class n{dialog=he(null);confirm$(e,t="Confirm"){let r=new me;return this.dialog.set({message:e,title:t,type:"confirm",confirmText:"Confirm",cancelText:"Cancel",result$:r}),r.pipe(Ln(1))}confirm(e,t="Confirm"){return Bm(this.confirm$(e,t))}alert$(e,t="Alert"){let r=new me;return this.dialog.set({message:e,title:t,type:"info",confirmText:"OK",result$:r}),r.pipe(Ln(1))}alert(e,t="Alert"){return Bm(this.alert$(e,t))}success$(e,t="Success"){let r=new me;return this.dialog.set({message:e,title:t,type:"success",confirmText:"OK",result$:r}),r.pipe(Ln(1))}error$(e,t="Error"){let r=new me;return this.dialog.set({message:e,title:t,type:"error",confirmText:"OK",result$:r}),r.pipe(Ln(1))}close(e){let t=this.dialog();t&&(t.result$.next(e),t.result$.complete(),this.dialog.set(null))}static \u0275fac=function(t){return new(t||n)};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})};var mh=class n{firestore=M(Ni);userService=M(Xr);COLLECTION="assignees";assigneesSignal=he([]);assignees=He(()=>this.assigneesSignal());assigneesSubject=new ct([]);assignees$=this.assigneesSubject.asObservable();unsubAssignees=null;constructor(){vr(()=>{let e=this.userService.currentUser();this.cleanupSubscription(),e&&e.userId?(console.log("\u{1F465} Loading assignees for user:",e.userId),this.subscribeToAssignees(e.userId)):(console.log("\u{1F512} No user logged in - clearing assignee data"),this.assigneesSignal.set([]),this.assigneesSubject.next([]))})}getCurrentUserId(){return this.userService.currentUser()?.userId||""}cleanupSubscription(){this.unsubAssignees&&(this.unsubAssignees(),this.unsubAssignees=null)}subscribeToAssignees(e){if(!e)return;let t=Ag(vo(this.firestore,this.COLLECTION),Sw("userId","==",e));this.unsubAssignees=Dg(t,r=>{let i=r.docs.map(s=>B({id:s.id},s.data()));i.sort((s,o)=>s.name.localeCompare(o.name)),this.assigneesSignal.set(i),this.assigneesSubject.next(i)},r=>{console.error("Error fetching assignees:",r)})}createAssignee$(e,t){let r=this.getCurrentUserId();if(!r)return Mr(()=>new Error("User must be logged in to create assignees"));let i=e.charAt(0).toUpperCase();return De(ch(vo(this.firestore,this.COLLECTION),{name:e,color:t,initial:i,userId:r})).pipe(ye(s=>s.id))}async createAssignee(e,t){let r=this.getCurrentUserId();if(!r)throw new Error("User must be logged in to create assignees");let i=e.charAt(0).toUpperCase();await ch(vo(this.firestore,this.COLLECTION),{name:e,color:t,initial:i,userId:r})}updateAssignee$(e,t){let r=B({},t);return t.name&&(r.initial=t.name.charAt(0).toUpperCase()),De(Ga(kr(this.firestore,this.COLLECTION,e),r))}async updateAssignee(e,t){t.name&&(t.initial=t.name.charAt(0).toUpperCase()),await Ga(kr(this.firestore,this.COLLECTION,e),t)}deleteAssignee$(e){return De(lh(kr(this.firestore,this.COLLECTION,e)))}async deleteAssignee(e){await lh(kr(this.firestore,this.COLLECTION,e))}getAssignee(e){return this.assigneesSignal().find(t=>t.id===e)}ngOnDestroy(){this.cleanupSubscription()}static \u0275fac=function(t){return new(t||n)};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})};var lr=class n{loadingSignal=he({isLoading:!1});loadingSubject=new ct({isLoading:!1});loading$=this.loadingSubject.asObservable();activeRequests=0;loading=this.loadingSignal.asReadonly();get isLoading(){return this.loadingSignal().isLoading}show(e){this.activeRequests++;let t={isLoading:!0,message:e};this.loadingSignal.set(t),this.loadingSubject.next(t)}hide(){if(this.activeRequests=Math.max(0,this.activeRequests-1),this.activeRequests===0){let e={isLoading:!1};this.loadingSignal.set(e),this.loadingSubject.next(e)}}forceHide(){this.activeRequests=0;let e={isLoading:!1};this.loadingSignal.set(e),this.loadingSubject.next(e)}setMessage(e){let t=this.loadingSignal();if(t.isLoading){let r=ie(B({},t),{message:e});this.loadingSignal.set(r),this.loadingSubject.next(r)}}setProgress(e){let t=this.loadingSignal();if(t.isLoading){let r=ie(B({},t),{progress:Math.min(100,Math.max(0,e))});this.loadingSignal.set(r),this.loadingSubject.next(r)}}withLoading(e){return t=>(this.show(e),t.pipe(vu(()=>this.hide())))}async wrapPromise(e,t){this.show(t);try{return await e}finally{this.hide()}}static \u0275fac=function(t){return new(t||n)};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})};function Tte(n,e){if(n&1&&(vn(0,"p",5),P(1),Un()),n&2){let t=$(2);F(),Ne(t.message())}}function Ste(n,e){if(n&1&&(vn(0,"div",6),ju(1,"div",7),Un(),vn(2,"p",8),P(3),Un()),n&2){let t=$(2);F(),qc("width",t.progress(),"%"),F(2),st("",t.progress(),"%")}}function Dte(n,e){if(n&1&&(vn(0,"div",0)(1,"div",1)(2,"div",2),ju(3,"div",3)(4,"div",3)(5,"div",3),vn(6,"span",4),P(7,"home"),Un()(),le(8,Tte,2,1,"p",5),le(9,Ste,4,3),Un()()),n&2){let t=$();F(8),ue(t.message()?8:-1),F(),ue(t.progress()!==void 0?9:-1)}}var Hw=class n{loadingService=M(lr);loadingState=H2(this.loadingService.loading$,{initialValue:{isLoading:!1}});isLoading=He(()=>this.loadingState().isLoading);message=He(()=>this.loadingState().message);progress=He(()=>this.loadingState().progress);static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Gt({type:n,selectors:[["app-loading"]],decls:1,vars:1,consts:[[1,"loading-overlay"],[1,"loading-container"],[1,"spinner"],[1,"spinner-ring"],[1,"material-symbols-outlined","spinner-icon"],[1,"loading-message"],[1,"progress-container"],[1,"progress-bar"],[1,"progress-text"]],template:function(t,r){t&1&&le(0,Dte,10,2,"div",0),t&2&&ue(r.isLoading()?0:-1)},dependencies:[cr],styles:[".loading-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;z-index:9999;display:flex;align-items:center;justify-content:center;background:#111317d9;-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px);animation:_ngcontent-%COMP%_fadeIn .2s ease}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}.loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:1.5rem}.spinner[_ngcontent-%COMP%]{position:relative;width:80px;height:80px}.spinner-ring[_ngcontent-%COMP%]{position:absolute;inset:0;border-radius:50%;border:3px solid transparent;animation:_ngcontent-%COMP%_spin 1.5s linear infinite}.spinner-ring[_ngcontent-%COMP%]:nth-child(1){border-top-color:#9fe870;animation-delay:0s}.spinner-ring[_ngcontent-%COMP%]:nth-child(2){inset:8px;border-right-color:#9fe870;animation-delay:.15s;animation-direction:reverse}.spinner-ring[_ngcontent-%COMP%]:nth-child(3){inset:16px;border-bottom-color:#9fe870;animation-delay:.3s}.spinner-icon[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);font-size:28px;color:#9fe870;animation:_ngcontent-%COMP%_pulse 1.5s ease-in-out infinite}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}@keyframes _ngcontent-%COMP%_pulse{0%,to{opacity:1;transform:translate(-50%,-50%) scale(1)}50%{opacity:.6;transform:translate(-50%,-50%) scale(.9)}}.loading-message[_ngcontent-%COMP%]{color:#fff;font-size:1rem;font-weight:500;text-align:center;max-width:280px;animation:_ngcontent-%COMP%_fadeIn .3s ease .1s both}.progress-container[_ngcontent-%COMP%]{width:200px;height:4px;background:#ffffff1a;border-radius:9999px;overflow:hidden}.progress-bar[_ngcontent-%COMP%]{height:100%;background:linear-gradient(90deg,#9fe870,#7dd956);border-radius:9999px;transition:width .3s ease}.progress-text[_ngcontent-%COMP%]{color:#9ea7b7;font-size:.75rem;font-weight:600}"],changeDetection:0})};var Ate=(n,e)=>e.id;function xte(n,e){if(n&1){let t=Be();x(0,"button",17),Y("click",function(){let i=ee(t).$implicit,s=$();return te(s.assigneeColor=i)}),R()}if(n&2){let t=e.$implicit,r=$();dt(t),Wt("ring-slate-400",r.assigneeColor===t)("ring-transparent",r.assigneeColor!==t)}}function Rte(n,e){if(n&1){let t=Be();x(0,"button",18),Y("click",function(){ee(t);let i=$();return te(i.resetForm())}),P(1," Cancel "),R()}}function kte(n,e){if(n&1){let t=Be();x(0,"div",15)(1,"div",19)(2,"div",20),P(3),R(),x(4,"span",21),P(5),R()(),x(6,"div",22)(7,"button",23),Y("click",function(){let i=ee(t).$implicit,s=$();return te(s.editAssignee(i))}),x(8,"span",24),P(9,"edit"),R()(),x(10,"button",25),Y("click",function(){let i=ee(t).$implicit,s=$();return te(s.deleteAssignee(i.id))}),x(11,"span",24),P(12,"delete"),R()()()()}if(n&2){let t=e.$implicit;F(2),dt(t.color),F(),st(" ",t.initial," "),F(2),Ne(t.name)}}function Nte(n,e){n&1&&(x(0,"div",16),P(1,"No assignees yet"),R())}var zw=class n{close=new We;assigneeService=M(mh);overviewService=M(ws);dialogService=M(Zr);loadingService=M(lr);assignees=this.assigneeService.assignees;assigneeColors=Ug;editingAssignee=null;assigneeName="";assigneeColor=Ug[0];onClose(){this.close.emit()}resetForm(){this.editingAssignee=null,this.assigneeName="",this.assigneeColor=this.assigneeColors[0]}editAssignee(e){this.editingAssignee=e,this.assigneeName=e.name,this.assigneeColor=e.color}saveAssignee(){this.assigneeName.trim()&&(this.loadingService.show("Saving..."),this.editingAssignee?this.assigneeService.updateAssignee$(this.editingAssignee.id,{name:this.assigneeName,color:this.assigneeColor}).subscribe({next:()=>{this.loadingService.hide(),this.resetForm()},error:()=>this.loadingService.hide()}):this.assigneeService.createAssignee$(this.assigneeName,this.assigneeColor).subscribe({next:()=>{this.loadingService.hide(),this.resetForm()},error:()=>this.loadingService.hide()}))}deleteAssignee(e){if(this.overviewService.tasks().filter(r=>r.assigneeId===e).length>0){this.dialogService.alert$("Cannot delete assignee with active tasks.").subscribe();return}this.dialogService.confirm$("Delete this assignee?","Confirm").subscribe(r=>{r&&(this.loadingService.show("Deleting..."),this.assigneeService.deleteAssignee$(e).subscribe({next:()=>this.loadingService.hide(),error:()=>this.loadingService.hide()}))})}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Gt({type:n,selectors:[["app-assignee-management"]],outputs:{close:"close"},decls:22,vars:5,consts:[[1,"fixed","inset-0","z-[60]","flex","items-center","justify-center","p-4","bg-black/50","backdrop-blur-sm","animate-in","fade-in","duration-200"],[1,"bg-white","dark:bg-surface-dark","w-full","max-w-sm","rounded-2xl","shadow-xl","overflow-hidden","animate-in","zoom-in-95","duration-200","border","border-slate-200","dark:border-border-dark","flex","flex-col","max-h-[80vh]"],[1,"p-4","border-b","border-slate-100","dark:border-border-dark","flex","justify-between","items-center","bg-slate-50/50","dark:bg-black/20"],[1,"font-bold","text-lg","text-slate-900","dark:text-white"],[1,"p-1","rounded-full","hover:bg-slate-200","dark:hover:bg-border-dark","transition-colors",3,"click"],[1,"material-symbols-outlined"],[1,"flex-1","overflow-y-auto","p-4","space-y-3"],[1,"bg-slate-50","dark:bg-black/20","p-3","rounded-xl","space-y-3"],["type","text","placeholder","Name (e.g. Alex)",1,"w-full","h-10","px-3","rounded-lg","bg-white","dark:bg-surface-dark","border","border-slate-200","dark:border-border-dark","text-sm","focus:border-primary","focus:ring-1","focus:ring-primary","outline-none","text-slate-900","dark:text-white",3,"ngModelChange","ngModel"],[1,"flex","flex-wrap","gap-2"],[1,"size-6","rounded-full","transition-transform","hover:scale-110","ring-2","ring-offset-1","dark:ring-offset-surface-dark",3,"class","ring-slate-400","ring-transparent"],[1,"flex","justify-end","gap-2"],[1,"text-xs","text-slate-500","font-bold","hover:text-slate-700","dark:hover:text-slate-300","px-2"],[1,"h-8","px-4","bg-primary","text-slate-900","rounded-lg","text-xs","font-bold","hover:bg-primary-hover","disabled:opacity-50","disabled:cursor-not-allowed","transition-colors",3,"click","disabled"],[1,"space-y-2"],[1,"flex","items-center","justify-between","p-2","rounded-lg","hover:bg-slate-50","dark:hover:bg-white/5","group","border","border-transparent","hover:border-slate-100","dark:hover:border-border-dark","transition-all"],[1,"text-center","py-6","text-slate-400","text-sm"],[1,"size-6","rounded-full","transition-transform","hover:scale-110","ring-2","ring-offset-1","dark:ring-offset-surface-dark",3,"click"],[1,"text-xs","text-slate-500","font-bold","hover:text-slate-700","dark:hover:text-slate-300","px-2",3,"click"],[1,"flex","items-center","gap-3"],[1,"size-8","rounded-full","flex","items-center","justify-center","text-xs","font-bold","text-white","shadow-sm"],[1,"text-sm","font-bold","text-slate-900","dark:text-white"],[1,"flex","gap-1","opacity-0","group-hover:opacity-100","transition-opacity"],[1,"size-7","rounded","bg-white","dark:bg-black/20","border","border-slate-200","dark:border-border-dark","flex","items-center","justify-center","text-slate-500","hover:text-primary","transition-colors",3,"click"],[1,"material-symbols-outlined","text-[14px]"],[1,"size-7","rounded","bg-white","dark:bg-black/20","border","border-slate-200","dark:border-border-dark","flex","items-center","justify-center","text-slate-500","hover:text-red-500","transition-colors",3,"click"]],template:function(t,r){t&1&&(x(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),P(4,"Manage Assignees"),R(),x(5,"button",4),Y("click",function(){return r.onClose()}),x(6,"span",5),P(7,"close"),R()()(),x(8,"div",6)(9,"div",7)(10,"input",8),gn("ngModelChange",function(s){return wn(r.assigneeName,s)||(r.assigneeName=s),s}),R(),x(11,"div",9),kt(12,xte,1,6,"button",10,Uu),R(),x(14,"div",11),le(15,Rte,2,0,"button",12),x(16,"button",13),Y("click",function(){return r.saveAssignee()}),P(17),R()()(),x(18,"div",14),kt(19,kte,13,4,"div",15,Ate,!1,Nte,2,0,"div",16),R()()()()),t&2&&(F(10),pn("ngModel",r.assigneeName),F(2),Nt(r.assigneeColors),F(3),ue(r.editingAssignee?15:-1),F(),Le("disabled",!r.assigneeName.trim()),F(),st(" ",r.editingAssignee?"Update":"Add"," "),F(2),Nt(r.assignees()))},dependencies:[cr,Qa,vs,Wa,wo],encapsulation:2})};var Io=[{id:"produce",userId:"system",name:"Produce",icon:"nutrition",color:"text-green-500",isDefault:!0,createdAt:new Date},{id:"dairy",userId:"system",name:"Dairy & Eggs",icon:"water_drop",color:"text-blue-400",isDefault:!0,createdAt:new Date},{id:"pantry",userId:"system",name:"Pantry",icon:"soup_kitchen",color:"text-orange-400",isDefault:!0,createdAt:new Date},{id:"baby",userId:"system",name:"Baby Needs",icon:"child_care",color:"text-pink-500",isDefault:!0,createdAt:new Date},{id:"cleaning",userId:"system",name:"Cleaning Items",icon:"cleaning_services",color:"text-cyan-500",isDefault:!0,createdAt:new Date},{id:"other",userId:"system",name:"Other",icon:"category",color:"text-slate-400",isDefault:!0,createdAt:new Date}],w3=["nutrition","water_drop","soup_kitchen","category","local_dining","bakery_dining","icecream","liquor","coffee","lunch_dining","restaurant","fastfood","ramen_dining","set_meal","egg","cake","cookie","local_pizza","kebab_dining","rice_bowl","cleaning_services","child_care"],I3=["text-green-500","text-blue-400","text-orange-400","text-slate-400","text-red-500","text-purple-500","text-pink-500","text-yellow-500","text-teal-500","text-indigo-500","text-cyan-500","text-lime-500"];var qw=[{name:"Red Apples",category:"produce",imageUrl:"https://images.pexels.com/photos/102104/pexels-photo-102104.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Bananas",category:"produce",imageUrl:"https://images.pexels.com/photos/2872755/pexels-photo-2872755.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Oranges",category:"produce",imageUrl:"https://images.pexels.com/photos/327098/pexels-photo-327098.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Strawberries",category:"produce",imageUrl:"https://images.pexels.com/photos/46174/strawberries-berries-fruit-freshness-46174.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Blueberries",category:"produce",imageUrl:"https://images.pexels.com/photos/1153655/pexels-photo-1153655.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Grapes",category:"produce",imageUrl:"https://images.pexels.com/photos/60021/grapes-wine-fruit-vines-60021.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Lemons",category:"produce",imageUrl:"https://images.pexels.com/photos/1414110/pexels-photo-1414110.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Limes",category:"produce",imageUrl:"https://images.pexels.com/photos/1435736/pexels-photo-1435736.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Watermelon",category:"produce",imageUrl:"https://images.pexels.com/photos/1313267/pexels-photo-1313267.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Pineapple",category:"produce",imageUrl:"https://images.pexels.com/photos/947879/pexels-photo-947879.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Mangoes",category:"produce",imageUrl:"https://images.pexels.com/photos/918643/pexels-photo-918643.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Avocados",category:"produce",imageUrl:"https://images.pexels.com/photos/557659/pexels-photo-557659.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Peaches",category:"produce",imageUrl:"https://images.pexels.com/photos/1028599/pexels-photo-1028599.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Pears",category:"produce",imageUrl:"https://images.pexels.com/photos/568471/pexels-photo-568471.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Cherries",category:"produce",imageUrl:"https://images.pexels.com/photos/175727/pexels-photo-175727.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Kiwi",category:"produce",imageUrl:"https://images.pexels.com/photos/51312/kiwi-fruit-vitamins-healthy-eating-51312.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Raspberries",category:"produce",imageUrl:"https://images.pexels.com/photos/892808/pexels-photo-892808.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Pomegranate",category:"produce",imageUrl:"https://images.pexels.com/photos/65256/pomegranate-open-cores-fruit-65256.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Grapefruit",category:"produce",imageUrl:"https://images.pexels.com/photos/1171170/pexels-photo-1171170.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Coconut",category:"produce",imageUrl:"https://images.pexels.com/photos/1030973/pexels-photo-1030973.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Broccoli",category:"produce",imageUrl:"https://images.pexels.com/photos/47347/broccoli-vegetable-food-healthy-47347.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Carrots",category:"produce",imageUrl:"https://images.pexels.com/photos/143133/pexels-photo-143133.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Spinach",category:"produce",imageUrl:"https://images.pexels.com/photos/2325843/pexels-photo-2325843.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Tomatoes",category:"produce",imageUrl:"https://images.pexels.com/photos/1367242/pexels-photo-1367242.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Cucumbers",category:"produce",imageUrl:"https://images.pexels.com/photos/37528/cucumber-salad-food-healthy-37528.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Bell Peppers",category:"produce",imageUrl:"https://images.pexels.com/photos/128536/pexels-photo-128536.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Onions",category:"produce",imageUrl:"https://images.pexels.com/photos/144206/pexels-photo-144206.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Garlic",category:"produce",imageUrl:"https://images.pexels.com/photos/1392585/pexels-photo-1392585.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Potatoes",category:"produce",imageUrl:"https://images.pexels.com/photos/144248/potatoes-vegetables-erdfrucht-bio-144248.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Sweet Potatoes",category:"produce",imageUrl:"https://images.pexels.com/photos/2284166/pexels-photo-2284166.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Lettuce",category:"produce",imageUrl:"https://images.pexels.com/photos/1199562/pexels-photo-1199562.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Cabbage",category:"produce",imageUrl:"https://images.pexels.com/photos/2518893/pexels-photo-2518893.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Cauliflower",category:"produce",imageUrl:"https://images.pexels.com/photos/6316515/pexels-photo-6316515.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Zucchini",category:"produce",imageUrl:"https://images.pexels.com/photos/128420/pexels-photo-128420.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Eggplant",category:"produce",imageUrl:"https://images.pexels.com/photos/321551/pexels-photo-321551.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Green Beans",category:"produce",imageUrl:"https://images.pexels.com/photos/63286/peas-green-beans-vegetables-63286.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Asparagus",category:"produce",imageUrl:"https://images.pexels.com/photos/351679/pexels-photo-351679.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Celery",category:"produce",imageUrl:"https://images.pexels.com/photos/2893635/pexels-photo-2893635.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Mushrooms",category:"produce",imageUrl:"https://images.pexels.com/photos/36438/mushrooms-brown-mushrooms-cook-eat.jpg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Corn",category:"produce",imageUrl:"https://images.pexels.com/photos/547263/pexels-photo-547263.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Ginger",category:"produce",imageUrl:"https://images.pexels.com/photos/161556/ginger-plant-asia-rhizome-161556.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Fresh Basil",category:"produce",imageUrl:"https://images.pexels.com/photos/1171182/pexels-photo-1171182.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Green Onions",category:"produce",imageUrl:"https://images.pexels.com/photos/4197447/pexels-photo-4197447.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Red Cabbage",category:"produce",imageUrl:"https://images.pexels.com/photos/6316517/pexels-photo-6316517.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Radishes",category:"produce",imageUrl:"https://images.pexels.com/photos/244393/pexels-photo-244393.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1}];var Gw=[{name:"Whole Milk",category:"dairy",imageUrl:"https://images.pexels.com/photos/248412/pexels-photo-248412.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"2% Reduced Fat Milk",category:"dairy",imageUrl:"https://images.pexels.com/photos/2198626/pexels-photo-2198626.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Skim Milk",category:"dairy",imageUrl:"https://images.pexels.com/photos/725998/pexels-photo-725998.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Heavy Cream",category:"dairy",imageUrl:"https://images.pexels.com/photos/357573/pexels-photo-357573.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Half & Half",category:"dairy",imageUrl:"https://images.pexels.com/photos/416528/pexels-photo-416528.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Almond Milk",category:"dairy",imageUrl:"https://images.pexels.com/photos/3735180/pexels-photo-3735180.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Oat Milk",category:"dairy",imageUrl:"https://images.pexels.com/photos/5946627/pexels-photo-5946627.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Coconut Milk",category:"dairy",imageUrl:"https://images.pexels.com/photos/4202490/pexels-photo-4202490.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Large Eggs",category:"dairy",imageUrl:"https://images.pexels.com/photos/162712/egg-white-food-protein-162712.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Organic Free Range Eggs",category:"dairy",imageUrl:"https://images.pexels.com/photos/6941041/pexels-photo-6941041.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Egg Whites",category:"dairy",imageUrl:"https://images.pexels.com/photos/4110008/pexels-photo-4110008.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Brown Eggs",category:"dairy",imageUrl:"https://images.pexels.com/photos/4045570/pexels-photo-4045570.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Cheddar Cheese",category:"dairy",imageUrl:"https://images.pexels.com/photos/821365/pexels-photo-821365.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Mozzarella",category:"dairy",imageUrl:"https://images.pexels.com/photos/4109943/pexels-photo-4109943.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Parmesan",category:"dairy",imageUrl:"https://images.pexels.com/photos/4187779/pexels-photo-4187779.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Swiss Cheese",category:"dairy",imageUrl:"https://images.pexels.com/photos/773253/pexels-photo-773253.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Cream Cheese",category:"dairy",imageUrl:"https://images.pexels.com/photos/4397919/pexels-photo-4397919.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Feta Cheese",category:"dairy",imageUrl:"https://images.pexels.com/photos/4197908/pexels-photo-4197908.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Blue Cheese",category:"dairy",imageUrl:"https://images.pexels.com/photos/4198018/pexels-photo-4198018.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Goat Cheese",category:"dairy",imageUrl:"https://images.pexels.com/photos/4198041/pexels-photo-4198041.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Brie",category:"dairy",imageUrl:"https://images.pexels.com/photos/6287530/pexels-photo-6287530.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Cottage Cheese",category:"dairy",imageUrl:"https://images.pexels.com/photos/5946609/pexels-photo-5946609.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Ricotta",category:"dairy",imageUrl:"https://images.pexels.com/photos/6287535/pexels-photo-6287535.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Shredded Cheese",category:"dairy",imageUrl:"https://images.pexels.com/photos/4198024/pexels-photo-4198024.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"String Cheese",category:"dairy",imageUrl:"https://images.pexels.com/photos/4198020/pexels-photo-4198020.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Butter",category:"dairy",imageUrl:"https://images.pexels.com/photos/531334/pexels-photo-531334.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Unsalted Butter",category:"dairy",imageUrl:"https://images.pexels.com/photos/4110003/pexels-photo-4110003.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Margarine",category:"dairy",imageUrl:"https://images.pexels.com/photos/4397916/pexels-photo-4397916.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Greek Yogurt",category:"dairy",imageUrl:"https://images.pexels.com/photos/1435706/pexels-photo-1435706.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Plain Yogurt",category:"dairy",imageUrl:"https://images.pexels.com/photos/3669638/pexels-photo-3669638.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Flavored Yogurt",category:"dairy",imageUrl:"https://images.pexels.com/photos/4051580/pexels-photo-4051580.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Yogurt Drinks",category:"dairy",imageUrl:"https://images.pexels.com/photos/3625372/pexels-photo-3625372.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Sour Cream",category:"dairy",imageUrl:"https://images.pexels.com/photos/4397923/pexels-photo-4397923.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Whipped Cream",category:"dairy",imageUrl:"https://images.pexels.com/photos/3026806/pexels-photo-3026806.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1}];var Ww=[{name:"Spaghetti",category:"pantry",imageUrl:"https://images.pexels.com/photos/4518844/pexels-photo-4518844.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Penne Pasta",category:"pantry",imageUrl:"https://images.pexels.com/photos/1437267/pexels-photo-1437267.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Macaroni",category:"pantry",imageUrl:"https://images.pexels.com/photos/4518710/pexels-photo-4518710.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Jasmine Rice",category:"pantry",imageUrl:"https://images.pexels.com/photos/4110251/pexels-photo-4110251.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Brown Rice",category:"pantry",imageUrl:"https://images.pexels.com/photos/4110377/pexels-photo-4110377.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Quinoa",category:"pantry",imageUrl:"https://images.pexels.com/photos/6740535/pexels-photo-6740535.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Oatmeal",category:"pantry",imageUrl:"https://images.pexels.com/photos/216951/pexels-photo-216951.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Bread Crumbs",category:"pantry",imageUrl:"https://images.pexels.com/photos/4110476/pexels-photo-4110476.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Canned Tomatoes",category:"pantry",imageUrl:"https://images.pexels.com/photos/5945755/pexels-photo-5945755.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Tomato Sauce",category:"pantry",imageUrl:"https://images.pexels.com/photos/4198012/pexels-photo-4198012.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Tomato Paste",category:"pantry",imageUrl:"https://images.pexels.com/photos/5945757/pexels-photo-5945757.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Black Beans",category:"pantry",imageUrl:"https://images.pexels.com/photos/4198019/pexels-photo-4198019.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Kidney Beans",category:"pantry",imageUrl:"https://images.pexels.com/photos/4198015/pexels-photo-4198015.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Chickpeas",category:"pantry",imageUrl:"https://images.pexels.com/photos/4198017/pexels-photo-4198017.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Canned Corn",category:"pantry",imageUrl:"https://images.pexels.com/photos/7469406/pexels-photo-7469406.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Canned Tuna",category:"pantry",imageUrl:"https://images.pexels.com/photos/5718026/pexels-photo-5718026.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Chicken Broth",category:"pantry",imageUrl:"https://images.pexels.com/photos/5938358/pexels-photo-5938358.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Vegetable Broth",category:"pantry",imageUrl:"https://images.pexels.com/photos/5938356/pexels-photo-5938356.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Coconut Milk (Canned)",category:"pantry",imageUrl:"https://images.pexels.com/photos/4202490/pexels-photo-4202490.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Olive Oil",category:"pantry",imageUrl:"https://images.pexels.com/photos/1022385/pexels-photo-1022385.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Vegetable Oil",category:"pantry",imageUrl:"https://images.pexels.com/photos/4202482/pexels-photo-4202482.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Coconut Oil",category:"pantry",imageUrl:"https://images.pexels.com/photos/4202486/pexels-photo-4202486.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Balsamic Vinegar",category:"pantry",imageUrl:"https://images.pexels.com/photos/4198037/pexels-photo-4198037.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Apple Cider Vinegar",category:"pantry",imageUrl:"https://images.pexels.com/photos/6957100/pexels-photo-6957100.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Soy Sauce",category:"pantry",imageUrl:"https://images.pexels.com/photos/4518578/pexels-photo-4518578.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"All-Purpose Flour",category:"pantry",imageUrl:"https://images.pexels.com/photos/5765/flour-powder-wheat-jar.jpg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Whole Wheat Flour",category:"pantry",imageUrl:"https://images.pexels.com/photos/4110256/pexels-photo-4110256.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Sugar",category:"pantry",imageUrl:"https://images.pexels.com/photos/2523650/pexels-photo-2523650.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Brown Sugar",category:"pantry",imageUrl:"https://images.pexels.com/photos/4110521/pexels-photo-4110521.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Powdered Sugar",category:"pantry",imageUrl:"https://images.pexels.com/photos/5946613/pexels-photo-5946613.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Baking Soda",category:"pantry",imageUrl:"https://images.pexels.com/photos/5946608/pexels-photo-5946608.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Baking Powder",category:"pantry",imageUrl:"https://images.pexels.com/photos/5946610/pexels-photo-5946610.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Vanilla Extract",category:"pantry",imageUrl:"https://images.pexels.com/photos/5946611/pexels-photo-5946611.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Cocoa Powder",category:"pantry",imageUrl:"https://images.pexels.com/photos/65882/chocolate-dark-coffee-confiserie-65882.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Chocolate Chips",category:"pantry",imageUrl:"https://images.pexels.com/photos/918327/pexels-photo-918327.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Yeast",category:"pantry",imageUrl:"https://images.pexels.com/photos/5946612/pexels-photo-5946612.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Honey",category:"pantry",imageUrl:"https://images.pexels.com/photos/302163/pexels-photo-302163.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Maple Syrup",category:"pantry",imageUrl:"https://images.pexels.com/photos/7474239/pexels-photo-7474239.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Peanut Butter",category:"pantry",imageUrl:"https://images.pexels.com/photos/5469076/pexels-photo-5469076.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Almond Butter",category:"pantry",imageUrl:"https://images.pexels.com/photos/5469079/pexels-photo-5469079.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Jam/Jelly",category:"pantry",imageUrl:"https://images.pexels.com/photos/1638927/pexels-photo-1638927.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Nutella",category:"pantry",imageUrl:"https://images.pexels.com/photos/4110533/pexels-photo-4110533.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Salt",category:"pantry",imageUrl:"https://images.pexels.com/photos/3296398/pexels-photo-3296398.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Black Pepper",category:"pantry",imageUrl:"https://images.pexels.com/photos/4198056/pexels-photo-4198056.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Garlic Powder",category:"pantry",imageUrl:"https://images.pexels.com/photos/4198051/pexels-photo-4198051.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Onion Powder",category:"pantry",imageUrl:"https://images.pexels.com/photos/4198053/pexels-photo-4198053.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Paprika",category:"pantry",imageUrl:"https://images.pexels.com/photos/4198054/pexels-photo-4198054.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Cumin",category:"pantry",imageUrl:"https://images.pexels.com/photos/4198060/pexels-photo-4198060.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Cinnamon",category:"pantry",imageUrl:"https://images.pexels.com/photos/4198055/pexels-photo-4198055.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Italian Seasoning",category:"pantry",imageUrl:"https://images.pexels.com/photos/4198057/pexels-photo-4198057.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Chili Powder",category:"pantry",imageUrl:"https://images.pexels.com/photos/4198059/pexels-photo-4198059.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Oregano",category:"pantry",imageUrl:"https://images.pexels.com/photos/4198062/pexels-photo-4198062.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Bay Leaves",category:"pantry",imageUrl:"https://images.pexels.com/photos/4198064/pexels-photo-4198064.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Ketchup",category:"pantry",imageUrl:"https://images.pexels.com/photos/5945565/pexels-photo-5945565.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Mustard",category:"pantry",imageUrl:"https://images.pexels.com/photos/5945566/pexels-photo-5945566.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Mayonnaise",category:"pantry",imageUrl:"https://images.pexels.com/photos/4397921/pexels-photo-4397921.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Hot Sauce",category:"pantry",imageUrl:"https://images.pexels.com/photos/4198048/pexels-photo-4198048.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"BBQ Sauce",category:"pantry",imageUrl:"https://images.pexels.com/photos/4198047/pexels-photo-4198047.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Worcestershire Sauce",category:"pantry",imageUrl:"https://images.pexels.com/photos/4198044/pexels-photo-4198044.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Almonds",category:"pantry",imageUrl:"https://images.pexels.com/photos/1013420/pexels-photo-1013420.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Walnuts",category:"pantry",imageUrl:"https://images.pexels.com/photos/4202493/pexels-photo-4202493.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Cashews",category:"pantry",imageUrl:"https://images.pexels.com/photos/4202491/pexels-photo-4202491.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Raisins",category:"pantry",imageUrl:"https://images.pexels.com/photos/4198033/pexels-photo-4198033.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Dried Cranberries",category:"pantry",imageUrl:"https://images.pexels.com/photos/4198031/pexels-photo-4198031.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Cereal",category:"pantry",imageUrl:"https://images.pexels.com/photos/135525/pexels-photo-135525.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Granola",category:"pantry",imageUrl:"https://images.pexels.com/photos/3872433/pexels-photo-3872433.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Crackers",category:"pantry",imageUrl:"https://images.pexels.com/photos/4110452/pexels-photo-4110452.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Tortilla Chips",category:"pantry",imageUrl:"https://images.pexels.com/photos/5737254/pexels-photo-5737254.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Popcorn",category:"pantry",imageUrl:"https://images.pexels.com/photos/33129/popcorn-movie-party-entertainment.jpg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Coffee",category:"pantry",imageUrl:"https://images.pexels.com/photos/585753/pexels-photo-585753.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Tea",category:"pantry",imageUrl:"https://images.pexels.com/photos/227908/pexels-photo-227908.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Hot Chocolate Mix",category:"pantry",imageUrl:"https://images.pexels.com/photos/5946618/pexels-photo-5946618.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1}];var Kw=[{name:"Diapers (Newborn)",category:"baby",imageUrl:"https://placehold.co/200x200/E6E6FA/555555?text=Newborn+Diapers",isInCart:!1,isChecked:!1},{name:"Diapers (Size 1)",category:"baby",imageUrl:"https://placehold.co/200x200/E6E6FA/555555?text=Size+1+Diapers",isInCart:!1,isChecked:!1},{name:"Diapers (Size 2)",category:"baby",imageUrl:"https://placehold.co/200x200/E6E6FA/555555?text=Size+2+Diapers",isInCart:!1,isChecked:!1},{name:"Diapers (Size 3)",category:"baby",imageUrl:"https://placehold.co/200x200/E6E6FA/555555?text=Size+3+Diapers",isInCart:!1,isChecked:!1},{name:"Baby Wipes",category:"baby",imageUrl:"https://placehold.co/200x200/F0FFFF/555555?text=Baby+Wipes",isInCart:!1,isChecked:!1},{name:"Diaper Rash Cream",category:"baby",imageUrl:"https://images.pexels.com/photos/6941883/pexels-photo-6941883.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Diaper Disposal Bags",category:"baby",imageUrl:"https://images.pexels.com/photos/4239013/pexels-photo-4239013.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Baby Formula",category:"baby",imageUrl:"https://images.pexels.com/photos/6941096/pexels-photo-6941096.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Baby Cereal",category:"baby",imageUrl:"https://images.pexels.com/photos/6941098/pexels-photo-6941098.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Baby Food Pouches",category:"baby",imageUrl:"https://images.pexels.com/photos/6941099/pexels-photo-6941099.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Baby Food Jars",category:"baby",imageUrl:"https://images.pexels.com/photos/6941100/pexels-photo-6941100.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Baby Snacks",category:"baby",imageUrl:"https://images.pexels.com/photos/6941101/pexels-photo-6941101.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Baby Puffs",category:"baby",imageUrl:"https://images.pexels.com/photos/6941102/pexels-photo-6941102.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Teething Biscuits",category:"baby",imageUrl:"https://images.pexels.com/photos/6941103/pexels-photo-6941103.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Baby Water",category:"baby",imageUrl:"https://images.pexels.com/photos/1000084/pexels-photo-1000084.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Baby Bottles",category:"baby",imageUrl:"https://placehold.co/200x200/FFFACD/555555?text=Baby+Bottles",isInCart:!1,isChecked:!1},{name:"Bottle Nipples",category:"baby",imageUrl:"https://placehold.co/200x200/FFFACD/555555?text=Bottle+Nipples",isInCart:!1,isChecked:!1},{name:"Sippy Cups",category:"baby",imageUrl:"https://images.pexels.com/photos/3663068/pexels-photo-3663068.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Baby Spoons",category:"baby",imageUrl:"https://images.pexels.com/photos/6941885/pexels-photo-6941885.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Baby Bowls",category:"baby",imageUrl:"https://images.pexels.com/photos/6941886/pexels-photo-6941886.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Baby Bibs",category:"baby",imageUrl:"https://placehold.co/200x200/FFE4E1/555555?text=Baby+Bibs",isInCart:!1,isChecked:!1},{name:"Bottle Brush",category:"baby",imageUrl:"https://images.pexels.com/photos/6941887/pexels-photo-6941887.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Bottle Sterilizer",category:"baby",imageUrl:"https://images.pexels.com/photos/6941888/pexels-photo-6941888.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Baby Shampoo",category:"baby",imageUrl:"https://images.pexels.com/photos/3993398/pexels-photo-3993398.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Baby Body Wash",category:"baby",imageUrl:"https://images.pexels.com/photos/3993399/pexels-photo-3993399.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Baby Lotion",category:"baby",imageUrl:"https://images.pexels.com/photos/6941889/pexels-photo-6941889.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Baby Oil",category:"baby",imageUrl:"https://images.pexels.com/photos/6941890/pexels-photo-6941890.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Baby Powder",category:"baby",imageUrl:"https://images.pexels.com/photos/6941891/pexels-photo-6941891.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Baby Sunscreen",category:"baby",imageUrl:"https://images.pexels.com/photos/6941892/pexels-photo-6941892.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Baby Nail Clippers",category:"baby",imageUrl:"https://images.pexels.com/photos/6941893/pexels-photo-6941893.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Baby Thermometer",category:"baby",imageUrl:"https://images.pexels.com/photos/6941894/pexels-photo-6941894.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Nasal Aspirator",category:"baby",imageUrl:"https://images.pexels.com/photos/6941895/pexels-photo-6941895.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Baby Cotton Balls",category:"baby",imageUrl:"https://images.pexels.com/photos/4465124/pexels-photo-4465124.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Baby Q-Tips",category:"baby",imageUrl:"https://images.pexels.com/photos/4465125/pexels-photo-4465125.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Baby Tylenol",category:"baby",imageUrl:"https://images.pexels.com/photos/6941900/pexels-photo-6941900.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Baby Ibuprofen",category:"baby",imageUrl:"https://images.pexels.com/photos/6941901/pexels-photo-6941901.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Gripe Water",category:"baby",imageUrl:"https://images.pexels.com/photos/6941902/pexels-photo-6941902.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Gas Drops",category:"baby",imageUrl:"https://images.pexels.com/photos/6941903/pexels-photo-6941903.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Teething Gel",category:"baby",imageUrl:"https://images.pexels.com/photos/6941904/pexels-photo-6941904.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Saline Drops",category:"baby",imageUrl:"https://images.pexels.com/photos/6941905/pexels-photo-6941905.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Vitamin D Drops",category:"baby",imageUrl:"https://images.pexels.com/photos/6941906/pexels-photo-6941906.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Pacifiers",category:"baby",imageUrl:"https://placehold.co/200x200/FFB6C1/555555?text=Pacifiers",isInCart:!1,isChecked:!1},{name:"Teething Toys",category:"baby",imageUrl:"https://placehold.co/200x200/FFB6C1/555555?text=Teething+Toys",isInCart:!1,isChecked:!1},{name:"Baby Blanket",category:"baby",imageUrl:"https://placehold.co/200x200/FFE4E1/555555?text=Baby+Blanket",isInCart:!1,isChecked:!1},{name:"Swaddle Wrap",category:"baby",imageUrl:"https://placehold.co/200x200/FFE4E1/555555?text=Swaddle+Wrap",isInCart:!1,isChecked:!1},{name:"Burp Cloths",category:"baby",imageUrl:"https://placehold.co/200x200/FFE4E1/555555?text=Burp+Cloths",isInCart:!1,isChecked:!1},{name:"Baby Detergent",category:"baby",imageUrl:"https://images.pexels.com/photos/4239091/pexels-photo-4239091.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Stain Remover",category:"baby",imageUrl:"https://images.pexels.com/photos/4239092/pexels-photo-4239092.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Fabric Softener",category:"baby",imageUrl:"https://images.pexels.com/photos/4239093/pexels-photo-4239093.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1}];var Qw=[{name:"All-Purpose Cleaner",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4239035/pexels-photo-4239035.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Glass Cleaner",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4239036/pexels-photo-4239036.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Disinfectant Spray",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4239091/pexels-photo-4239091.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Bleach",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4239013/pexels-photo-4239013.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Floor Cleaner",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4108715/pexels-photo-4108715.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Bathroom Cleaner",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4239037/pexels-photo-4239037.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Toilet Bowl Cleaner",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4239038/pexels-photo-4239038.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Tile & Grout Cleaner",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4108714/pexels-photo-4108714.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Oven Cleaner",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4239039/pexels-photo-4239039.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Stainless Steel Cleaner",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4239040/pexels-photo-4239040.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Laundry Detergent",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4239091/pexels-photo-4239091.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Fabric Softener",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4239092/pexels-photo-4239092.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Stain Remover",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4239093/pexels-photo-4239093.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Dryer Sheets",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4239094/pexels-photo-4239094.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Bleach Alternative",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4239095/pexels-photo-4239095.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Dish Soap",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4239031/pexels-photo-4239031.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Dishwasher Detergent",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4239032/pexels-photo-4239032.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Dishwasher Rinse Aid",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4239033/pexels-photo-4239033.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Dish Sponges",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4239015/pexels-photo-4239015.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Steel Wool Pads",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4239016/pexels-photo-4239016.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Broom",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4108716/pexels-photo-4108716.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Dustpan",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4108717/pexels-photo-4108717.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Mop",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4108718/pexels-photo-4108718.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Mop Bucket",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4108719/pexels-photo-4108719.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Duster",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4108720/pexels-photo-4108720.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Microfiber Cloths",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4239017/pexels-photo-4239017.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Cleaning Rags",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4239018/pexels-photo-4239018.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Scrub Brush",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4239019/pexels-photo-4239019.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Toilet Brush",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4239020/pexels-photo-4239020.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Rubber Gloves",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4239021/pexels-photo-4239021.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Trash Bags (Small)",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4239022/pexels-photo-4239022.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Trash Bags (Large)",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4239023/pexels-photo-4239023.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Recycling Bags",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4239024/pexels-photo-4239024.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Paper Towels",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4239025/pexels-photo-4239025.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Toilet Paper",category:"cleaning",imageUrl:"https://images.pexels.com/photos/3958210/pexels-photo-3958210.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Facial Tissues",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4239026/pexels-photo-4239026.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Napkins",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4239027/pexels-photo-4239027.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Air Freshener Spray",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4239028/pexels-photo-4239028.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Plug-in Air Freshener",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4239029/pexels-photo-4239029.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Scented Candles",category:"cleaning",imageUrl:"https://images.pexels.com/photos/3270223/pexels-photo-3270223.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Carpet Cleaner",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4108713/pexels-photo-4108713.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Furniture Polish",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4239041/pexels-photo-4239041.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Wood Cleaner",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4239042/pexels-photo-4239042.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Drain Cleaner",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4239043/pexels-photo-4239043.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Hand Sanitizer",category:"cleaning",imageUrl:"https://images.pexels.com/photos/3987142/pexels-photo-3987142.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Disinfecting Wipes",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4239010/pexels-photo-4239010.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1}];var yh=class n{userService=M(Xr);firestore;GROCERIES_COLLECTION="groceries";CATEGORIES_COLLECTION="categories";HISTORY_COLLECTION="shopping_history";unsubGroceries=null;unsubCategories=null;groceriesSignal=he([]);categoriesSignal=he([...Io]);searchQuerySignal=he("");selectedCategorySignal=he("all");sortBySignal=he("name");isLoadingSignal=he(!0);errorSignal=he(null);isSeededSignal=he(!1);hasMigratedThisSession=!1;groceriesSubject=new ct([]);categoriesSubject=new ct([...Io]);groceries$=this.groceriesSubject.asObservable();categories$=this.categoriesSubject.asObservable();categories=He(()=>this.categoriesSignal());categoryIds=He(()=>this.categoriesSignal().map(e=>e.id));isLoading=He(()=>this.isLoadingSignal());groceries=He(()=>{let e=this.groceriesSignal(),t=this.searchQuerySignal().toLowerCase(),r=this.selectedCategorySignal(),i=this.sortBySignal();return t&&(e=e.filter(s=>s.name.toLowerCase().includes(t))),r==="cart"?e=e.filter(s=>s.isInCart):r!=="all"&&(e=e.filter(s=>s.category===r)),e=[...e].sort((s,o)=>{switch(i){case"name":return s.name.localeCompare(o.name);case"category":return s.category.localeCompare(o.category);case"date":return new Date(o.createdAt).getTime()-new Date(s.createdAt).getTime();default:return 0}}),e});cartItems=He(()=>this.groceriesSignal().filter(e=>e.isInCart));checkedItems=He(()=>this.cartItems().filter(e=>e.isChecked));uncheckedItems=He(()=>this.cartItems().filter(e=>!e.isChecked));searchQuery=He(()=>this.searchQuerySignal());selectedCategory=He(()=>this.selectedCategorySignal());sortBy=He(()=>this.sortBySignal());error=He(()=>this.errorSignal());groceriesByCategory=He(()=>{let e=this.groceries(),t=this.categoriesSignal(),r={};return t.forEach(i=>{r[i.id]=[]}),e.forEach(i=>{r[i.category]?r[i.category].push(i):r.other&&r.other.push(i)}),r});constructor(){let e=bp(uh.firebase);this.firestore=S0(e),vr(()=>{let t=this.userService.currentUser();this.cleanupSubscriptions(),this.hasMigratedThisSession=!1,t&&t.userId?(console.log("\u{1F4E6} Loading groceries for user:",t.userId),this.initializeFirestoreListeners(t.userId)):(console.log("\u{1F512} No user logged in - clearing grocery data"),this.groceriesSignal.set([]),this.groceriesSubject.next([]),this.categoriesSignal.set([...Io]),this.categoriesSubject.next([...Io]),this.isLoadingSignal.set(!1))})}getCurrentUserId(){return this.userService.currentUser()?.userId||""}cleanupSubscriptions(){this.unsubGroceries&&(this.unsubGroceries(),this.unsubGroceries=null),this.unsubCategories&&(this.unsubCategories(),this.unsubCategories=null)}initializeFirestoreListeners(e){if(!e)return;this.isLoadingSignal.set(!0);let t=eg(Xp(this.firestore,this.GROCERIES_COLLECTION),tg("userId","==",e));this.unsubGroceries=ng(t,i=>{let s=i.docs.map(o=>{let a=o.data();return ie(B({id:o.id},a),{createdAt:a.createdAt?.toDate?a.createdAt.toDate():new Date(a.createdAt),updatedAt:a.updatedAt?.toDate?a.updatedAt.toDate():new Date(a.updatedAt)})});this.groceriesSignal.set(s),this.groceriesSubject.next(s),this.isLoadingSignal.set(!1),s.length===0&&!this.isSeededSignal()?this.seedInitialData$(e).subscribe():this.checkAndMigrateData(e,s)},i=>{console.error("Error loading groceries:",i),this.errorSignal.set(i.message),this.isLoadingSignal.set(!1)});let r=eg(Xp(this.firestore,this.CATEGORIES_COLLECTION),tg("userId","in",[e,"system"]));this.unsubCategories=ng(r,i=>{if(i.docs.length>0){let s=i.docs.map(a=>ie(B({id:a.id},a.data()),{createdAt:a.data().createdAt?.toDate?a.data().createdAt.toDate():new Date}));s.sort((a,c)=>a.name.localeCompare(c.name));let o=Io.filter(a=>!s.some(c=>c.id===a.id));if(o.length>0){o.forEach(c=>this.saveCategoryToFirestore$(c).subscribe());let a=[...s,...o];this.categoriesSignal.set(a),this.categoriesSubject.next(a)}else this.categoriesSignal.set(s),this.categoriesSubject.next(s)}else Io.forEach(s=>this.saveCategoryToFirestore$(s).subscribe()),this.categoriesSignal.set([...Io]),this.categoriesSubject.next([...Io])},i=>{console.error("Error loading categories:",i)})}seedInitialData$(e){if(this.isSeededSignal())return de(void 0);this.isSeededSignal.set(!0),console.log("Seeding initial grocery data for user:",e);let t=[...qw,...Gw,...Ww,...Kw,...Qw],r=t.map(i=>this.create$(i));return $i(r).pipe(vt(()=>console.log(`Seeded ${t.length} grocery items for user ${e}`)),ye(()=>{}))}saveCategoryToFirestore$(e){let t=en(this.firestore,this.CATEGORIES_COLLECTION,e.id);return De(lo(t,ie(B({},e),{createdAt:e.createdAt})))}createCategory$(e){let t=this.getCurrentUserId();if(!t)return Mr(()=>new Error("User must be logged in to create categories"));let r=ie(B({},e),{id:this.generateCategoryId(e.name),userId:t,isDefault:!1,createdAt:new Date});return this.saveCategoryToFirestore$(r).pipe(ye(()=>r))}async createCategory(e){let t=this.getCurrentUserId();if(!t)throw new Error("User must be logged in to create categories");let r=ie(B({},e),{id:this.generateCategoryId(e.name),userId:t,isDefault:!1,createdAt:new Date});return await this.saveCategoryToFirestore$(r).toPromise(),r}getCategory(e){return this.categoriesSignal().find(t=>t.id===e)}updateCategory$(e,t){let r=this.getCategory(e);if(!r||r.isDefault)return de(void 0);let i=en(this.firestore,this.CATEGORIES_COLLECTION,e);return De(Ma(i,t)).pipe(ye(()=>B(B({},r),t)))}async updateCategory(e,t){let r=this.getCategory(e);if(!r||r.isDefault)return;let i=en(this.firestore,this.CATEGORIES_COLLECTION,e);return await Ma(i,t),B(B({},r),t)}deleteCategory(e){let t=this.getCategory(e);if(!t)return{success:!1,error:"Category not found"};if(t.isDefault)return{success:!1,error:"Cannot delete default categories"};let r=this.groceriesSignal().filter(s=>s.category===e);if(r.length>0)return{success:!1,error:`Cannot delete category "${t.name}" because it has ${r.length} item(s). Please move or delete the items first.`};let i=en(this.firestore,this.CATEGORIES_COLLECTION,e);return Il(i),{success:!0}}getItemCountInCategory(e){return this.groceriesSignal().filter(t=>t.category===e).length}getCategoryLabel(e){return this.getCategory(e)?.name||e}getCategoryIcon(e){return this.getCategory(e)?.icon||"category"}getCategoryColor(e){return this.getCategory(e)?.color||"text-slate-400"}setSearchQuery(e){this.searchQuerySignal.set(e)}setCategory(e){this.selectedCategorySignal.set(e)}setSortBy(e){this.sortBySignal.set(e)}itemExists(e){let t=e.trim().toLowerCase();return this.groceriesSignal().some(r=>r.name.toLowerCase()===t)}getItemByName(e){let t=e.trim().toLowerCase();return this.groceriesSignal().find(r=>r.name.toLowerCase()===t)}create$(e){let t=this.getCurrentUserId();if(!t)return Mr(()=>new Error("User must be logged in to create items"));let r=this.getItemByName(e.name);if(r)return Mr(()=>new Error(`An item named "${r.name}" already exists.`));let i=ie(B({},e),{id:this.generateId(),userId:t,createdAt:new Date,updatedAt:new Date}),s=en(this.firestore,this.GROCERIES_COLLECTION,i.id);return De(lo(s,i)).pipe(ye(()=>i))}async create(e){let t=this.getCurrentUserId();if(!t)throw new Error("User must be logged in to create items");let r=this.getItemByName(e.name);if(r)throw new Error(`An item named "${r.name}" already exists.`);let i=ie(B({},e),{id:this.generateId(),userId:t,createdAt:new Date,updatedAt:new Date}),s=en(this.firestore,this.GROCERIES_COLLECTION,i.id);return await lo(s,i),i}update$(e,t){let r=this.groceriesSignal().find(s=>s.id===e);if(!r)return de(void 0);if(t.name){let s=t.name.trim().toLowerCase(),o=this.groceriesSignal().find(a=>a.id!==e&&a.name.toLowerCase()===s);if(o)return Mr(()=>new Error(`An item named "${o.name}" already exists.`))}let i=en(this.firestore,this.GROCERIES_COLLECTION,e);return De(Ma(i,ie(B({},t),{updatedAt:new Date}))).pipe(ye(()=>ie(B(B({},r),t),{updatedAt:new Date})))}async update(e,t){let r=this.groceriesSignal().find(s=>s.id===e);if(!r)return;if(t.name){let s=t.name.trim().toLowerCase(),o=this.groceriesSignal().find(a=>a.id!==e&&a.name.toLowerCase()===s);if(o)throw new Error(`An item named "${o.name}" already exists.`)}let i=en(this.firestore,this.GROCERIES_COLLECTION,e);return await Ma(i,ie(B({},t),{updatedAt:new Date})),ie(B(B({},r),t),{updatedAt:new Date})}delete$(e){let t=en(this.firestore,this.GROCERIES_COLLECTION,e);return De(Il(t)).pipe(ye(()=>!0))}async delete(e){let t=en(this.firestore,this.GROCERIES_COLLECTION,e);return await Il(t),!0}getById(e){return this.groceriesSignal().find(t=>t.id===e)}addToCart$(e){return this.update$(e,{isInCart:!0}).pipe(ye(()=>{}))}async addToCart(e){await this.update(e,{isInCart:!0})}removeFromCart$(e){return this.update$(e,{isInCart:!1,isChecked:!1}).pipe(ye(()=>{}))}async removeFromCart(e){await this.update(e,{isInCart:!1,isChecked:!1})}toggleChecked$(e){let t=this.getById(e);return t?this.update$(e,{isChecked:!t.isChecked}).pipe(ye(()=>{})):de(void 0)}async toggleChecked(e){let t=this.getById(e);t&&await this.update(e,{isChecked:!t.isChecked})}clearCart$(){let e=this.cartItems();if(e.length===0)return de(void 0);let t=e.map(r=>this.update$(r.id,{isInCart:!1,isChecked:!1}));return $i(t).pipe(ye(()=>{}))}async clearCart(){let t=this.cartItems().map(r=>this.update(r.id,{isInCart:!1,isChecked:!1}));await Promise.all(t)}resetToSeedData$(){let t=this.groceriesSignal().map(r=>this.delete$(r.id));return $i(t).pipe(vt(()=>this.isSeededSignal.set(!1)),ye(()=>{}))}async resetToSeedData(){let t=this.groceriesSignal().map(r=>this.delete(r.id));await Promise.all(t),this.isSeededSignal.set(!1)}saveToHistory$(){let e=this.getCurrentUserId();if(!e)return de(void 0);let t=this.cartItems();if(t.length===0)return de(void 0);let r=`history_${Date.now()}`,i=en(this.firestore,this.HISTORY_COLLECTION,r),s={id:r,userId:e,date:new Date,itemCount:t.length,items:t.map(o=>({id:o.id,name:o.name,category:o.category,checked:o.isChecked})),completed:!0};return De(lo(i,s))}async saveToHistory(){let e=this.getCurrentUserId();if(!e)return;let t=this.cartItems();if(t.length===0)return;let r=`history_${Date.now()}`,i=en(this.firestore,this.HISTORY_COLLECTION,r),s={id:r,userId:e,date:new Date,itemCount:t.length,items:t.map(o=>({id:o.id,name:o.name,category:o.category,checked:o.isChecked})),completed:!0};await lo(i,s)}generateId(){return`grocery_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}generateCategoryId(e){return`cat_${e.toLowerCase().replace(/\s+/g,"_")}_${Date.now()}`}checkAndMigrateData(e,t){if(this.hasMigratedThisSession)return;let r="v15";localStorage.getItem(`homeneeds_seed_version_${e}`)!==r&&(console.log(`Migrating data to ${r} for user ${e}...`),this.hasMigratedThisSession=!0,this.migrateMissingSeedData$(t).subscribe(()=>{localStorage.setItem(`homeneeds_seed_version_${e}`,r)}))}migrateMissingSeedData$(e){console.log("Checking for missing seed items...");let t=e??this.groceriesSignal();console.log(`Current items count: ${t.length}`);let r=[...qw,...Gw,...Ww,...Kw,...Qw];console.log(`Total seed data count: ${r.length}`);let i=r.filter(s=>!t.some(o=>o.name===s.name));if(i.length>0){console.log(`Adding ${i.length} missing items...`),console.log("Missing items:",i.map(o=>o.name).join(", "));let s=i.map(o=>this.create$(o));return $i(s).pipe(vt(()=>console.log(`\u2705 Successfully added ${i.length} items`)),ye(()=>{}))}else return console.log("All seed items are present."),de(void 0)}async migrateMissingSeedData(e){console.log("Checking for missing seed items...");let t=e??this.groceriesSignal();console.log(`Current items count: ${t.length}`);let r=[...qw,...Gw,...Ww,...Kw,...Qw];console.log(`Total seed data count: ${r.length}`);let i=r.filter(s=>!t.some(o=>o.name===s.name));i.length>0?(console.log(`Adding ${i.length} missing items...`),console.log("Missing items:",i.map(s=>s.name).join(", ")),await Promise.all(i.map(s=>this.create(s))),console.log(`\u2705 Successfully added ${i.length} items`)):console.log("All seed items are present.")}ngOnDestroy(){this.cleanupSubscriptions()}static \u0275fac=function(t){return new(t||n)};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})};var Jw=(n,e)=>e.id;function Pte(n,e){n&1&&Pt(0,"div",47)}function Mte(n,e){if(n&1&&Pt(0,"img",39),n&2){let t=$().$implicit;Le("src",t.imageUrl,ir)}}function Ote(n,e){if(n&1&&(x(0,"span",41)(1,"span",48),P(2,"alarm"),R(),P(3),Rf(4,"date"),R()),n&2){let t=$().$implicit;F(3),st(" ",kf(4,1,t.dueDate,"MMM d, h:mm a")," ")}}function Fte(n,e){if(n&1&&(x(0,"div",50),P(1),R()),n&2){let t=e;dt(t.color),Le("title","Assigned to "+t.name),F(),st(" ",t.initial," ")}}function Vte(n,e){if(n&1&&le(0,Fte,2,4,"div",49),n&2){let t,r=$(4);ue((t=r.getAssigneeById(e))?0:-1,t)}}function Lte(n,e){if(n&1&&(x(0,"span",42),P(1),R()),n&2){let t=$().$implicit;F(),Ne(t.description)}}function Ute(n,e){if(n&1){let t=Be();x(0,"div",31),s_(1,Pte,1,0,"div",32),x(2,"span",33),P(3,"drag_indicator"),R(),x(4,"label",34)(5,"input",35),Y("change",function(){let i=ee(t).$implicit,s=$(3);return te(s.toggleComplete(i))}),R(),x(6,"span",36),P(7,"check"),R()(),x(8,"div",37),Y("click",function(){let i=ee(t).$implicit,s=$(3);return te(s.edit(i))}),x(9,"div",38),le(10,Mte,1,1,"img",39),x(11,"span",40),P(12),R(),le(13,Ote,5,4,"span",41),le(14,Vte,1,1),R(),le(15,Lte,2,1,"span",42),R(),x(16,"div",43)(17,"button",44),Y("click",function(){let i=ee(t).$implicit,s=$(3);return te(s.edit(i))}),x(18,"span",45),P(19,"edit"),R()(),x(20,"button",46),Y("click",function(){let i=ee(t).$implicit,s=$(3);return te(s.delete(i.id))}),x(21,"span",45),P(22,"delete"),R()()()()}if(n&2){let t,r=e.$implicit;Wt("opacity-50",r.isCompleted),Le("cdkDragData",r),F(5),Le("checked",r.isCompleted),F(5),ue(r.imageUrl?10:-1),F(),Wt("line-through",r.isCompleted)("text-slate-500",r.isCompleted),F(),st(" ",r.title," "),F(),ue(r.dueDate?13:-1),F(),ue((t=r.assigneeId)?14:-1,t),F(),ue(r.description?15:-1)}}function jte(n,e){if(n&1){let t=Be();x(0,"section",24)(1,"div",25)(2,"h3",26),Pt(3,"span",27),P(4),R(),x(5,"span",28),P(6),R()(),x(7,"div",29),Y("cdkDropListDropped",function(i){ee(t);let s=$().$implicit,o=$();return te(o.onDrop(i,s.id))}),kt(8,Ute,23,13,"div",30,Jw),R()()}if(n&2){let t=$().$implicit,r=$();Le("id","section-"+t.id),F(3),dt(t.color),F(),st(" ",t.label," "),F(),dt(t.color+" "+t.textColor+" bg-opacity-10"),F(),st(" ",r.groupedTasks()[t.id].length," Items "),F(),Le("cdkDropListData",r.groupedTasks()[t.id]),F(),Nt(r.groupedTasks()[t.id])}}function Bte(n,e){if(n&1&&le(0,jte,10,8,"section",24),n&2){let t=e.$implicit,r=$();ue(r.groupedTasks()[t.id]&&r.groupedTasks()[t.id].length>0?0:-1)}}function $te(n,e){n&1&&(x(0,"div",20)(1,"span",51),P(2,"task_alt"),R(),x(3,"h3",52),P(4,"All caught up!"),R(),x(5,"p",53),P(6,"Create a task to get started."),R()())}function Hte(n,e){n&1&&(x(0,"span",79),P(1,"check"),R())}function zte(n,e){if(n&1){let t=Be();x(0,"button",77),Y("click",function(){let i=ee(t).$implicit,s=$(3);return te(s.selectCategory(i.id))}),Pt(1,"span",78),P(2),le(3,Hte,2,0,"span",79),R()}if(n&2){let t=e.$implicit,r=$(3);F(),dt(t.color),F(),st(" ",t.label," "),F(),ue(r.taskCategory===t.id?3:-1)}}function qte(n,e){if(n&1&&(x(0,"div",65),kt(1,zte,4,4,"button",76,Jw),R()),n&2){let t=$(2);F(),Nt(t.categories)}}function Gte(n,e){if(n&1&&(x(0,"option",71),P(1),R()),n&2){let t=e.$implicit;Le("value",t.id),F(),Ne(t.name)}}function Wte(n,e){if(n&1){let t=Be();x(0,"div",23)(1,"div",54)(2,"div",55)(3,"h3",56),P(4),R(),x(5,"button",57),Y("click",function(){ee(t);let i=$();return te(i.toggleAddModal(!1))}),x(6,"span",58),P(7,"close"),R()()(),x(8,"div",59)(9,"div")(10,"label",60),P(11,"Task Title"),R(),x(12,"input",61),gn("ngModelChange",function(i){ee(t);let s=$();return wn(s.taskTitle,i)||(s.taskTitle=i),te(i)}),R()(),x(13,"div")(14,"label",60),P(15,"Category"),R(),x(16,"div",62)(17,"button",63),Y("click",function(){ee(t);let i=$();return te(i.toggleCategoryDropdown())}),x(18,"span"),P(19),R(),x(20,"span",64),P(21,"expand_more"),R()(),le(22,qte,3,0,"div",65),R()(),x(23,"div")(24,"div",66)(25,"label",67),P(26,"Assignee"),R(),x(27,"button",68),Y("click",function(){ee(t);let i=$();return te(i.openManageAssignees())}),P(28,"Manage"),R()(),x(29,"select",69),gn("ngModelChange",function(i){ee(t);let s=$();return wn(s.taskAssigneeId,i)||(s.taskAssigneeId=i),te(i)}),x(30,"option",70),P(31,"Unassigned"),R(),kt(32,Gte,2,2,"option",71,Jw),R()(),x(34,"div")(35,"label",60),P(36,"Due Date"),R(),x(37,"input",72),gn("ngModelChange",function(i){ee(t);let s=$();return wn(s.taskDueDate,i)||(s.taskDueDate=i),te(i)}),R()()(),x(38,"div",73)(39,"button",74),Y("click",function(){ee(t);let i=$();return te(i.toggleAddModal(!1))}),P(40,"Cancel"),R(),x(41,"button",75),Y("click",function(){ee(t);let i=$();return te(i.saveTask())}),P(42,"Save Task"),R()()()()}if(n&2){let t=$();F(4),Ne(t.editingTask?"Edit Task":"New Task"),F(8),pn("ngModel",t.taskTitle),F(7),Ne(t.getSelectedCategoryLabel()),F(3),ue(t.showCategoryDropdown?22:-1),F(7),pn("ngModel",t.taskAssigneeId),F(3),Nt(t.assignees()),F(5),pn("ngModel",t.taskDueDate)}}function Kte(n,e){if(n&1){let t=Be();x(0,"app-assignee-management",80),Y("close",function(){ee(t);let i=$();return te(i.closeAssigneeModal())}),R()}}var Yw=class n{overviewService=M(ws);dialogService=M(Zr);assigneeService=M(mh);groceryService=M(yh);loadingService=M(lr);tasks=this.overviewService.tasks;assignees=this.assigneeService.assignees;categories=v3;assigneeColors=Ug;groupedTasks=He(()=>{let e=this.tasks(),t={};return this.categories.forEach(r=>t[r.id]=[]),t.other=[],e.forEach(r=>{let i=r.category;t[i]?t[i].push(r):t.other.push(r)}),t});totalPending=He(()=>this.tasks().filter(e=>!e.isCompleted).length);activeCategoriesCount=He(()=>{let e=this.groupedTasks();return Object.values(e).filter(t=>t.length>0).length});showAddModal=!1;editingTask=null;taskTitle="";taskCategory="groceries";taskDueDate="";taskAssigneeId="";showCategoryDropdown=!1;showAssigneeModal=!1;constructor(){}toggleAddModal(e){this.showAddModal=e,e||this.resetForm()}resetForm(){this.editingTask=null,this.taskTitle="",this.taskCategory="groceries",this.taskDueDate="",this.taskAssigneeId="",this.showCategoryDropdown=!1}toggleCategoryDropdown(){this.showCategoryDropdown=!this.showCategoryDropdown}selectCategory(e){this.taskCategory=e,this.showCategoryDropdown=!1}getSelectedCategoryLabel(){return this.categories.find(e=>e.id===this.taskCategory)?.label||"Select Category"}saveTask(){if(!this.taskTitle.trim())return;this.loadingService.show("Saving task...");let e={title:this.taskTitle,category:this.taskCategory,assigneeId:this.taskAssigneeId||void 0,isCompleted:!1,dueDate:this.taskDueDate?new Date(this.taskDueDate):null};this.editingTask?this.overviewService.updateTask$(this.editingTask.id,{title:this.taskTitle,category:this.taskCategory,assigneeId:this.taskAssigneeId||void 0,dueDate:this.taskDueDate?new Date(this.taskDueDate):null}).subscribe({next:()=>{this.loadingService.hide(),this.toggleAddModal(!1)},error:()=>this.loadingService.hide()}):this.overviewService.createTask$(e).subscribe({next:()=>{this.loadingService.hide(),this.toggleAddModal(!1)},error:()=>this.loadingService.hide()})}toggleComplete(e){let t=!e.isCompleted;this.overviewService.updateTask$(e.id,{isCompleted:t}).subscribe({next:()=>{if(t&&e.category==="groceries"){let r=this.groceryService.groceries().find(i=>i.name===e.title);r&&r.isInCart&&this.groceryService.update$(r.id,{isInCart:!1,isChecked:!1}).subscribe()}}})}delete(e){this.dialogService.confirm$("Delete this task?","Delete Task").subscribe(t=>{if(t){let r=this.tasks().find(i=>i.id===e);this.loadingService.show("Deleting..."),this.overviewService.deleteTask$(e).subscribe({next:()=>{if(r&&r.category==="groceries"){let i=this.groceryService.groceries().find(s=>s.name===r.title);i&&i.isInCart&&this.groceryService.update$(i.id,{isInCart:!1,isChecked:!1}).subscribe()}this.loadingService.hide()},error:()=>this.loadingService.hide()})}})}edit(e){this.editingTask=e,this.taskTitle=e.title,this.taskCategory=e.category,this.taskAssigneeId=e.assigneeId||"",this.taskDueDate=e.dueDate?new Date(e.dueDate.getTime()-e.dueDate.getTimezoneOffset()*6e4).toISOString().slice(0,16):"",this.showAddModal=!0}openManageAssignees(){this.showAssigneeModal=!0}closeAssigneeModal(){this.showAssigneeModal=!1}getAssigneeById(e){if(e)return this.assignees().find(t=>t.id===e)}onDrop(e,t){if(e.previousIndex===e.currentIndex)return;let r=[...this.groupedTasks()[t]||[]];$w(r,e.previousIndex,e.currentIndex),this.loadingService.show("Reordering..."),this.overviewService.reorderTasks$(r).subscribe({next:()=>this.loadingService.hide(),error:()=>this.loadingService.hide()})}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Gt({type:n,selectors:[["app-overview"]],hostAttrs:[1,"flex-1","h-screen","flex","flex-col","overflow-hidden"],decls:39,vars:5,consts:[["id","overview-page",1,"flex-1","flex","flex-col","h-screen","overflow-y-auto","relative","bg-slate-50","dark:bg-background-dark"],[1,"px-8","pt-8","pb-4","w-full","z-10","flex","flex-col","gap-4","sticky","top-0","bg-slate-50/90","dark:bg-background-dark/90","backdrop-blur-sm"],[1,"flex","flex-col","w-full","group"],[1,"flex","w-full","items-center","rounded-full","h-14","bg-white","dark:bg-surface-dark","shadow-sm","border","border-slate-200","dark:border-border-dark","focus-within:border-primary","focus-within:ring-1","focus-within:ring-primary","transition-all","duration-300","px-6"],[1,"material-symbols-outlined","text-slate-400","dark:text-text-muted","group-focus-within:text-primary","transition-colors"],["id","overview-search-input","placeholder","Search for items to buy, fix, or clean...",1,"w-full","bg-transparent","border-none","focus:ring-0","text-base","font-medium","text-slate-900","dark:text-white","placeholder:text-slate-400","dark:placeholder:text-text-muted-darker","ml-3"],[1,"bg-primary","hover:bg-primary-hover","text-slate-900","p-2","rounded-full","transition-colors","flex","items-center","justify-center",3,"click"],[1,"material-symbols-outlined","text-[20px]","font-bold"],[1,"flex","items-center","gap-3","px-2"],[1,"text-xs","uppercase","font-bold","text-slate-500","dark:text-text-muted","tracking-wider"],["id","filter-chips",1,"flex","gap-2","text-slate-600","dark:text-slate-400","text-sm"],[1,"px-3","py-1","bg-white","dark:bg-surface-dark","rounded-full","border","border-slate-200","dark:border-border-dark","cursor-pointer","hover:border-primary"],[1,"flex-1","overflow-y-auto","px-8","pb-20","scroll-smooth"],[1,"w-full","flex","flex-col","gap-10"],[1,"flex","flex-wrap","justify-between","items-end","gap-4","mt-4","border-b","border-border-dark","pb-6"],[1,"text-4xl","font-black","text-slate-900","dark:text-white","tracking-tight","mb-2"],[1,"text-slate-500","dark:text-text-muted"],[1,"flex","gap-3"],[1,"flex","items-center","gap-2","px-5","py-2.5","rounded-full","bg-primary","text-slate-900","font-bold","text-sm","hover:bg-primary-hover","transition-colors","shadow-lg","shadow-primary/20",3,"click"],[1,"material-symbols-outlined","text-sm"],[1,"text-center","py-20","animate-in","fade-in","zoom-in-50","duration-500"],[1,"absolute","bottom-10","right-10","w-16","h-16","bg-primary","hover:bg-primary-hover","rounded-full","shadow-2xl","shadow-primary/20","text-slate-900","flex","items-center","justify-center","transition-transform","hover:scale-105","active:scale-95","z-40",3,"click"],[1,"material-symbols-outlined",2,"font-size","32px"],[1,"fixed","inset-0","z-50","flex","items-center","justify-center","p-4","bg-black/50","backdrop-blur-sm","animate-in","fade-in","duration-200"],[3,"id"],[1,"flex","items-center","justify-between","mb-5"],[1,"text-2xl","font-bold","text-slate-900","dark:text-white","flex","items-center","gap-3"],[1,"w-2","h-8","rounded-full","block"],[1,"text-xs","font-bold","px-3","py-1","rounded-full","bg-opacity-10"],["cdkDropList","",1,"grid","grid-cols-1","gap-3",3,"cdkDropListDropped","cdkDropListData"],["cdkDrag","",1,"group","flex","items-center","gap-3","p-4","rounded-xl","bg-white","dark:bg-surface-dark","border","border-transparent","dark:border-border-dark","hover:border-primary/30","transition-all","duration-200","shadow-sm","hover:shadow-md","dark:shadow-none","relative","overflow-hidden","active:scale-[0.99]","active:shadow-inner","cursor-grab",3,"cdkDragData","opacity-50"],["cdkDrag","",1,"group","flex","items-center","gap-3","p-4","rounded-xl","bg-white","dark:bg-surface-dark","border","border-transparent","dark:border-border-dark","hover:border-primary/30","transition-all","duration-200","shadow-sm","hover:shadow-md","dark:shadow-none","relative","overflow-hidden","active:scale-[0.99]","active:shadow-inner","cursor-grab",3,"cdkDragData"],["class","w-full h-16 rounded-xl bg-primary/10 border-2 border-dashed border-primary/30",4,"cdkDragPlaceholder"],["cdkDragHandle","",1,"material-symbols-outlined","text-slate-300","dark:text-border-dark","group-hover:text-slate-400","dark:group-hover:text-slate-500","cursor-grab","select-none","transition-colors"],[1,"relative","flex","items-center","p-2","rounded-full","cursor-pointer"],["type","checkbox",1,"peer","h-6","w-6","cursor-pointer","appearance-none","rounded-full","border-2","border-slate-400","dark:border-slate-500","transition-all","checked:border-primary","checked:bg-primary",3,"change","checked"],[1,"material-symbols-outlined","absolute","inset-0","flex","items-center","justify-center","text-white","text-[18px]","opacity-0","peer-checked:opacity-100","pointer-events-none","transition-opacity"],[1,"flex","flex-col","flex-1","min-w-0","cursor-pointer",3,"click"],[1,"flex","items-center","gap-3"],["alt","",1,"size-8","rounded-lg","object-cover","bg-slate-100","dark:bg-black/20","border","border-slate-200","dark:border-border-dark","shrink-0",3,"src"],[1,"text-base","font-bold","text-slate-900","dark:text-white","group-hover:text-primary","transition-colors","truncate"],[1,"hidden","sm:inline-flex","items-center","gap-1","px-2","py-0.5","rounded-md","text-[10px]","font-bold","uppercase","tracking-wider","bg-slate-100","text-slate-500","dark:bg-slate-800","dark:text-slate-400"],[1,"text-sm","text-slate-500","dark:text-text-muted-darker","truncate"],[1,"flex","items-center","gap-1","sm:gap-2","opacity-100","sm:opacity-0","group-hover:opacity-100","transition-opacity","z-20"],["title","Edit",1,"p-2","text-slate-400","hover:text-white","hover:bg-border-dark","rounded-full","transition-colors",3,"click"],[1,"material-symbols-outlined","text-[20px]"],["title","Delete",1,"p-2","text-slate-400","hover:text-rose-400","hover:bg-border-dark","rounded-full","transition-colors",3,"click"],[1,"w-full","h-16","rounded-xl","bg-primary/10","border-2","border-dashed","border-primary/30"],[1,"material-symbols-outlined","text-[12px]"],[1,"size-6","rounded-full","flex","items-center","justify-center","text-[10px]","font-bold","text-white","ring-2","ring-white","dark:ring-surface-dark","ml-1",3,"title","class"],[1,"size-6","rounded-full","flex","items-center","justify-center","text-[10px]","font-bold","text-white","ring-2","ring-white","dark:ring-surface-dark","ml-1",3,"title"],[1,"material-symbols-outlined","text-6xl","text-slate-300","dark:text-slate-600"],[1,"mt-4","text-xl","font-bold","text-slate-500","dark:text-slate-400"],[1,"text-slate-400","dark:text-slate-500"],[1,"bg-white","dark:bg-surface-dark","w-full","max-w-md","rounded-2xl","shadow-xl","overflow-hidden","animate-in","zoom-in-95","duration-200","border","border-slate-200","dark:border-border-dark"],[1,"p-4","border-b","border-slate-100","dark:border-border-dark","flex","justify-between","items-center"],[1,"font-bold","text-lg","text-slate-900","dark:text-white"],[1,"p-1","rounded-full","hover:bg-slate-100","dark:hover:bg-border-dark","transition-colors",3,"click"],[1,"material-symbols-outlined"],[1,"p-6","space-y-4"],[1,"block","text-sm","font-medium","text-slate-700","dark:text-slate-300","mb-1"],["type","text","placeholder","e.g. Buy Milk",1,"w-full","px-4","py-2","rounded-lg","bg-slate-50","dark:bg-black/20","border","border-slate-200","dark:border-border-dark","focus:border-primary","focus:ring-1","focus:ring-primary","outline-none","text-slate-900","dark:text-white",3,"ngModelChange","ngModel"],[1,"relative"],[1,"w-full","px-4","py-2","rounded-lg","bg-slate-50","dark:bg-black/20","border","border-slate-200","dark:border-border-dark","focus:border-primary","focus:ring-1","focus:ring-primary","outline-none","text-slate-900","dark:text-white","text-left","flex","justify-between","items-center",3,"click"],[1,"material-symbols-outlined","text-slate-500"],[1,"absolute","top-full","left-0","right-0","mt-1","bg-white","dark:bg-surface-dark","border","border-slate-200","dark:border-border-dark","rounded-lg","shadow-xl","z-50","overflow-hidden","animate-in","fade-in","zoom-in-95","duration-100","max-h-48","overflow-y-auto"],[1,"flex","justify-between","items-center","mb-1"],[1,"block","text-sm","font-medium","text-slate-700","dark:text-slate-300"],[1,"text-xs","text-primary","font-bold","hover:underline",3,"click"],[1,"w-full","px-4","py-2","rounded-lg","bg-slate-50","dark:bg-black/20","border","border-slate-200","dark:border-border-dark","focus:border-primary","focus:ring-1","focus:ring-primary","outline-none","text-slate-900","dark:text-white",3,"ngModelChange","ngModel"],["value",""],[3,"value"],["type","datetime-local",1,"w-full","px-4","py-2","rounded-lg","bg-slate-50","dark:bg-black/20","border","border-slate-200","dark:border-border-dark","focus:border-primary","focus:ring-1","focus:ring-primary","outline-none","text-slate-900","dark:text-white",3,"ngModelChange","ngModel"],[1,"p-4","bg-slate-50","dark:bg-black/20","flex","justify-end","gap-3"],[1,"px-4","py-2","rounded-lg","text-slate-600","dark:text-slate-400","font-medium","hover:bg-slate-200","dark:hover:bg-border-dark","transition-colors",3,"click"],[1,"px-4","py-2","rounded-lg","bg-primary","text-slate-900","font-bold","hover:bg-primary-hover","transition-colors","shadow-lg","shadow-primary/20",3,"click"],[1,"w-full","px-4","py-3","text-left","text-slate-700","dark:text-white","hover:bg-slate-50","dark:hover:bg-border-dark","transition-colors","flex","items-center","gap-2"],[1,"w-full","px-4","py-3","text-left","text-slate-700","dark:text-white","hover:bg-slate-50","dark:hover:bg-border-dark","transition-colors","flex","items-center","gap-2",3,"click"],[1,"w-3","h-3","rounded-full"],[1,"material-symbols-outlined","ml-auto","text-primary","text-sm"],[3,"close"]],template:function(t,r){t&1&&(x(0,"main",0)(1,"div",1)(2,"label",2)(3,"div",3)(4,"span",4),P(5,"search"),R(),Pt(6,"input",5),x(7,"button",6),Y("click",function(){return r.toggleAddModal(!0)}),x(8,"span",7),P(9,"add"),R()()()(),x(10,"div",8)(11,"span",9),P(12,"Filter by Due Date:"),R(),x(13,"div",10)(14,"span",11),P(15,"All"),R(),x(16,"span",11),P(17,"Today"),R()()()(),x(18,"div",12)(19,"div",13)(20,"div",14)(21,"div")(22,"h2",15),P(23,"My Lists"),R(),x(24,"p",16),P(25),R()(),x(26,"div",17)(27,"button",18),Y("click",function(){return r.toggleAddModal(!0)}),x(28,"span",19),P(29,"add_task"),R(),P(30," New Task "),R()()(),kt(31,Bte,1,1,null,null,Jw),le(33,$te,7,0,"div",20),R()(),x(34,"button",21),Y("click",function(){return r.toggleAddModal(!0)}),x(35,"span",22),P(36,"add"),R()(),le(37,Wte,43,6,"div",23),le(38,Kte,1,0,"app-assignee-management"),R()),t&2&&(F(25),u_("You have ",r.totalPending()," pending items across ",r.activeCategoriesCount()," categories."),F(6),Nt(r.categories),F(2),ue(r.activeCategoriesCount()===0&&(!r.groupedTasks().other||r.groupedTasks().other.length===0)?33:-1),F(4),ue(r.showAddModal?37:-1),F(),ue(r.showAssigneeModal?38:-1))},dependencies:[cr,Qa,fh,ph,vs,Ka,Wa,wo,zw,_3,m3,g3,h3,y3,Uf],styles:[".cdk-drag-preview[_ngcontent-%COMP%]{box-sizing:border-box;border-radius:.75rem;box-shadow:0 10px 40px #0000004d,0 0 0 2px #9fe87080;background:var(--surface-dark, #1a1d21);opacity:.95;transform:scale(1.02)}.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:.3;background:#9fe8701a;border:2px dashed rgba(159,232,112,.3);border-radius:.75rem}.cdk-drag-animating[_ngcontent-%COMP%], .cdk-drop-list-dragging[_ngcontent-%COMP%]   .cdk-drag[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(.25,.8,.25,1)}[cdkDragHandle][_ngcontent-%COMP%]{cursor:grab}[cdkDragHandle][_ngcontent-%COMP%]:active, .cdk-drag[_ngcontent-%COMP%]:active{cursor:grabbing}"]})};var _h=class n{MAX_WIDTH=400;MAX_HEIGHT=400;QUALITY=.7;async compressImage(e){return new Promise((t,r)=>{let i=new FileReader;i.onload=s=>{let o=new Image;o.onload=()=>{try{let a=document.createElement("canvas"),{width:c,height:l}=o;c>l?c>this.MAX_WIDTH&&(l=Math.round(l*this.MAX_WIDTH/c),c=this.MAX_WIDTH):l>this.MAX_HEIGHT&&(c=Math.round(c*this.MAX_HEIGHT/l),l=this.MAX_HEIGHT),a.width=c,a.height=l;let h=a.getContext("2d");if(!h){r(new Error("Could not get canvas context"));return}h.drawImage(o,0,0,c,l);let p=a.toDataURL("image/jpeg",this.QUALITY);t(p)}catch(a){r(a)}},o.onerror=()=>{r(new Error("Failed to load image"))},o.src=s.target?.result},i.onerror=()=>{r(new Error("Failed to read file"))},i.readAsDataURL(e)})}isValidImageFile(e){return["image/jpeg","image/png","image/gif","image/webp"].includes(e.type)}formatFileSize(e){return e<1024?e+" B":e<1024*1024?(e/1024).toFixed(1)+" KB":(e/(1024*1024)).toFixed(1)+" MB"}static \u0275fac=function(t){return new(t||n)};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})};var Xw=(n,e)=>e.id,Qte=(n,e)=>e.value;function Yte(n,e){if(n&1){let t=Be();x(0,"button",39),Y("click",function(){let i=ee(t).$implicit,s=$(2);return te(s.onSortChange(i.value))}),P(1),R()}if(n&2){let t=e.$implicit,r=$(2);Wt("bg-primary-10",r.sortBy()===t.value)("text-primary",r.sortBy()===t.value)("text-slate-700",r.sortBy()!==t.value)("dark:text-slate-300",r.sortBy()!==t.value),F(),st(" ",t.label," ")}}function Jte(n,e){if(n&1&&(x(0,"div",10),kt(1,Yte,2,9,"button",38,Qte),R()),n&2){let t=$();F(),Nt(t.sortOptions)}}function Xte(n,e){if(n&1&&(x(0,"div",15)(1,"div",40)(2,"div",41)(3,"span",42),P(4,"error"),R()(),x(5,"div",43)(6,"h3",44),P(7,"Connection Error"),R(),x(8,"div",45)(9,"p"),P(10),R(),x(11,"p",46),P(12,"Please check your Firestore Security Rules or Auth configuration."),R()()()()()),n&2){let t=$();F(10),Ne(t.error())}}function Zte(n,e){if(n&1){let t=Be();x(0,"div",48)(1,"button",49),Y("click",function(i){ee(t);let s=$().$implicit;return $().startEditCategory(s),te(i.stopPropagation())}),x(2,"span",50),P(3,"edit"),R()(),x(4,"button",51),Y("click",function(i){ee(t);let s=$().$implicit;return $().deleteCategory(s.id),te(i.stopPropagation())}),x(5,"span",50),P(6,"close"),R()()()}}function ene(n,e){if(n&1){let t=Be();x(0,"div",29)(1,"button",28),Y("click",function(){let i=ee(t).$implicit,s=$();return te(s.onCategoryChange(i.id))}),x(2,"span",47),P(3),R(),x(4,"p"),P(5),R(),le(6,Zte,7,0,"div",48),R()()}if(n&2){let t=e.$implicit,r=$();F(),dt(r.selectedCategory()===t.id?"flex h-9 shrink-0 items-center justify-center gap-x-2 rounded-lg bg-slate-900 dark:bg-white px-4 pr-2 hover:opacity-90 transition-opacity":"flex h-9 shrink-0 items-center justify-center gap-x-2 rounded-lg bg-white dark:bg-surface-dark border border-slate-200 dark:border-border-dark px-4 pr-2 hover:bg-slate-50 dark:hover:bg-border-dark transition-colors"),F(),dt(t.color),F(),Ne(t.icon),F(),dt(r.selectedCategory()===t.id?"text-white dark:text-slate-900 text-sm font-bold":"text-slate-600 dark:text-slate-300 text-sm font-medium"),F(),st(" ",t.name," "),F(),ue(t.isDefault?-1:6)}}function tne(n,e){if(n&1){let t=Be();x(0,"img",65),Y("error",function(i){ee(t);let s=$(4);return te(s.handleImageError(i))}),R()}if(n&2){let t=$().$implicit;Le("alt",t.name)("src",t.imageUrl,ir)}}function nne(n,e){n&1&&(x(0,"div",60)(1,"span",66),P(2,"grocery"),R()())}function rne(n,e){if(n&1){let t=Be();x(0,"span",67),P(1,"In Cart"),R(),x(2,"button",68),Y("click",function(){ee(t);let i=$().$implicit,s=$(3);return te(s.removeFromCart(i.id))}),x(3,"span",31),P(4,"remove_shopping_cart"),R()()}}function ine(n,e){if(n&1){let t=Be();x(0,"button",69),Y("click",function(){ee(t);let i=$().$implicit,s=$(3);return te(s.addToCart(i.id))}),x(1,"span",4),P(2,"add_shopping_cart"),R()()}}function sne(n,e){if(n&1){let t=Be();x(0,"div",57)(1,"div",2)(2,"div",58),le(3,tne,1,2,"img",59)(4,nne,3,0,"div",60),R(),x(5,"div")(6,"h4",61),P(7),R()()(),x(8,"div",62),le(9,rne,5,0)(10,ine,3,0,"button",63),x(11,"button",64),Y("click",function(){let i=ee(t).$implicit,s=$(3);return te(s.startEdit(i))}),x(12,"span",31),P(13,"edit"),R()()()()}if(n&2){let t=e.$implicit;F(3),ue(t.imageUrl?3:4),F(4),Ne(t.name),F(2),ue(t.isInCart?9:10)}}function one(n,e){if(n&1&&(x(0,"section",52)(1,"div",53)(2,"h3",54)(3,"span",19),P(4),R(),P(5),R(),x(6,"span",55),P(7),R()(),x(8,"div",56),kt(9,sne,14,3,"div",57,Xw),R()()),n&2){let t=$().$implicit,r=$();Le("id","section-"+t.id),F(3),dt(t.color),F(),Ne(t.icon),F(),st(" ",t.name," "),F(2),st("",r.getItemCount(t.id)," items"),F(2),Nt(r.groceriesByCategory()[t.id])}}function ane(n,e){if(n&1&&le(0,one,11,6,"section",52),n&2){let t=e.$implicit,r=$();ue(r.groceriesByCategory()[t.id]&&r.groceriesByCategory()[t.id].length>0?0:-1)}}function cne(n,e){if(n&1){let t=Be();x(0,"button",75),Y("click",function(){ee(t);let i=$(2);return te(i.onCategoryChange("all"))}),P(1," Browse all items "),R()}}function lne(n,e){if(n&1&&(x(0,"div",33)(1,"div",70)(2,"span",71),P(3,"search_off"),R()(),x(4,"h3",72),P(5,"No items found"),R(),x(6,"p",73),P(7," We couldn't find any items matching your current filters. "),R(),le(8,cne,2,0,"button",74),R()),n&2){let t=$();F(8),ue(t.selectedCategory()!=="all"?8:-1)}}function une(n,e){if(n&1&&(x(0,"span",36),P(1),R()),n&2){let t=$();F(),Ne(t.getTotalCartItems())}}function dne(n,e){n&1&&(x(0,"div",82)(1,"span",97),P(2,"progress_activity"),R(),x(3,"span",98),P(4,"Compressing..."),R()())}function hne(n,e){if(n&1){let t=Be();x(0,"img",99),Y("error",function(i){ee(t);let s=$(2);return te(s.handleImageError(i))}),R()}if(n&2){let t=$(2);Le("src",t.editItemImageUrl,ir)}}function fne(n,e){n&1&&(x(0,"span",84),P(1,"image"),R())}function pne(n,e){if(n&1){let t=Be();x(0,"button",100),Y("click",function(){ee(t);let i=$(2);return te(i.removeImage())}),x(1,"span",50),P(2,"close"),R()()}}function gne(n,e){if(n&1&&(x(0,"option",93),P(1),R()),n&2){let t=e.$implicit;Le("value",t.id),F(),Ne(t.name)}}function mne(n,e){if(n&1){let t=Be();x(0,"div",76),Y("click",function(){ee(t);let i=$();return te(i.cancelEdit())}),x(1,"div",77),Y("click",function(i){return ee(t),te(i.stopPropagation())}),x(2,"h3",78),P(3),R(),x(4,"div",79)(5,"div",80)(6,"div",8)(7,"div",81),le(8,dne,5,0,"div",82)(9,hne,1,1,"img",83)(10,fne,2,0,"span",84),R(),le(11,pne,3,0,"button",85),R(),x(12,"label",86)(13,"input",87),Y("change",function(i){ee(t);let s=$();return te(s.onImageFileSelected(i))}),R(),x(14,"span",88)(15,"span",31),P(16,"upload"),R(),P(17),R()(),x(18,"p",89),P(19,"Images are compressed automatically"),R()(),x(20,"div")(21,"label",90),P(22,"Item Name"),R(),x(23,"input",91),gn("ngModelChange",function(i){ee(t);let s=$();return wn(s.editItemName,i)||(s.editItemName=i),te(i)}),R()(),x(24,"div")(25,"label",90),P(26,"Category"),R(),x(27,"select",92),gn("ngModelChange",function(i){ee(t);let s=$();return wn(s.editItemCategory,i)||(s.editItemCategory=i),te(i)}),kt(28,gne,2,2,"option",93,Xw),R()()(),x(30,"div",94)(31,"button",95),Y("click",function(){ee(t);let i=$();return te(i.cancelEdit())}),P(32,"Cancel"),R(),x(33,"button",96),Y("click",function(){ee(t);let i=$();return te(i.saveEdit())}),P(34,"Save"),R()()()()}if(n&2){let t=$();F(3),Ne(t.editingItem?"Edit Item":"Add Item"),F(5),ue(t.isUploadingImage?8:t.editItemImageUrl?9:10),F(3),ue(t.editItemImageUrl&&!t.isUploadingImage?11:-1),F(2),Le("disabled",t.isUploadingImage),F(4),st(" ",t.editItemImageUrl?"Change Image":"Upload Image"," "),F(6),pn("ngModel",t.editItemName),F(4),pn("ngModel",t.editItemCategory),F(),Nt(t.categories()),F(5),Le("disabled",t.isUploadingImage)}}function yne(n,e){if(n&1){let t=Be();x(0,"button",28),Y("click",function(){let i=ee(t).$implicit,s=$(2);return te(s.editCategoryIcon=i)}),x(1,"span",19),P(2),R()()}if(n&2){let t=e.$implicit,r=$(2);dt(r.editCategoryIcon===t?"size-10 rounded-lg bg-primary text-white flex items-center justify-center":"size-10 rounded-lg bg-white dark:bg-surface-dark border border-slate-200 dark:border-border-dark flex items-center justify-center hover:border-primary transition-colors"),F(2),Ne(t)}}function _ne(n,e){if(n&1){let t=Be();x(0,"button",28),Y("click",function(){let i=ee(t).$implicit,s=$(2);return te(s.editCategoryColor=i)}),x(1,"span",19),P(2,"circle"),R()()}if(n&2){let t=e.$implicit,r=$(2);dt(r.editCategoryColor===t?"size-10 rounded-lg bg-white dark:bg-surface-dark border-2 border-primary flex items-center justify-center":"size-10 rounded-lg bg-white dark:bg-surface-dark border border-slate-200 dark:border-border-dark flex items-center justify-center hover:border-primary transition-colors"),F(),dt(t)}}function vne(n,e){if(n&1){let t=Be();x(0,"div",76),Y("click",function(){ee(t);let i=$();return te(i.closeCategoryModal())}),x(1,"div",77),Y("click",function(i){return ee(t),te(i.stopPropagation())}),x(2,"h3",78),P(3),R(),x(4,"div",79)(5,"div",101)(6,"div",102)(7,"span",103),P(8),R(),x(9,"span",104),P(10),R()()(),x(11,"div")(12,"label",90),P(13,"Category Name"),R(),x(14,"input",105),gn("ngModelChange",function(i){ee(t);let s=$();return wn(s.editCategoryName,i)||(s.editCategoryName=i),te(i)}),R()(),x(15,"div")(16,"label",106),P(17,"Icon"),R(),x(18,"div",107),kt(19,yne,3,3,"button",108,Uu),R()(),x(21,"div")(22,"label",106),P(23,"Color"),R(),x(24,"div",109),kt(25,_ne,3,4,"button",108,Uu),R()()(),x(27,"div",94)(28,"button",95),Y("click",function(){ee(t);let i=$();return te(i.closeCategoryModal())}),P(29,"Cancel"),R(),x(30,"button",110),Y("click",function(){ee(t);let i=$();return te(i.saveCategory())}),P(31,"Save"),R()()()()}if(n&2){let t=$();F(3),Ne(t.editingCategory?"Edit Category":"Add Category"),F(4),dt(t.editCategoryColor),F(),Ne(t.editCategoryIcon),F(2),Ne(t.editCategoryName||"Category Name"),F(4),pn("ngModel",t.editCategoryName),F(5),Nt(t.availableIcons),F(6),Nt(t.availableColors)}}var Zw=class n{groceryService=M(yh);imageService=M(_h);dialogService=M(Zr);overviewService=M(ws);loadingService=M(lr);groceries=this.groceryService.groceries;groceriesByCategory=this.groceryService.groceriesByCategory;cartItems=this.groceryService.cartItems;checkedItems=this.groceryService.checkedItems;uncheckedItems=this.groceryService.uncheckedItems;searchQuery=this.groceryService.searchQuery;selectedCategory=this.groceryService.selectedCategory;sortBy=this.groceryService.sortBy;categories=this.groceryService.categories;categoryIds=this.groceryService.categoryIds;error=this.groceryService.error;isLoading=this.groceryService.isLoading;availableIcons=w3;availableColors=I3;newItemName="";showAddModal=!1;isAddingFromSidebar=!1;editingItem=null;editItemName="";editItemCategory="other";editItemImageUrl="";isUploadingImage=!1;showMobileCart=!1;toggleMobileCart(){this.showMobileCart=!this.showMobileCart}showCategoryModal=!1;editingCategory=null;editCategoryName="";editCategoryIcon="category";editCategoryColor="text-slate-400";sortOptions=[{value:"name",label:"Name"},{value:"category",label:"Category"},{value:"date",label:"Date Added"}];showSortDropdown=!1;openAddCategoryModal(){this.editingCategory=null,this.editCategoryName="",this.editCategoryIcon="category",this.editCategoryColor="text-slate-400",this.showCategoryModal=!0}startEditCategory(e){e.isDefault||(this.editingCategory=e,this.editCategoryName=e.name,this.editCategoryIcon=e.icon,this.editCategoryColor=e.color,this.showCategoryModal=!0)}saveCategory(){this.editCategoryName.trim()&&(this.loadingService.show("Saving category..."),this.editingCategory?this.groceryService.updateCategory$(this.editingCategory.id,{name:this.editCategoryName.trim(),icon:this.editCategoryIcon,color:this.editCategoryColor}).subscribe({next:()=>{this.loadingService.hide(),this.closeCategoryModal()},error:()=>this.loadingService.hide()}):this.groceryService.createCategory$({name:this.editCategoryName.trim(),icon:this.editCategoryIcon,color:this.editCategoryColor}).subscribe({next:()=>{this.loadingService.hide(),this.closeCategoryModal()},error:()=>this.loadingService.hide()}))}deleteCategory(e){let t=this.groceryService.getCategory(e);if(!t||t.isDefault)return;let r=this.groceryService.getItemCountInCategory(e);if(r>0){this.dialogService.alert$(`Cannot delete category "${t.name}" because it has ${r} item(s). Please move or delete the items first.`).subscribe();return}this.dialogService.confirm$(`Delete category "${t.name}"?`,"Delete Category").subscribe(i=>{if(i){let s=this.groceryService.deleteCategory(e);!s.success&&s.error&&this.dialogService.alert$(s.error).subscribe()}})}closeCategoryModal(){this.editingCategory=null,this.editCategoryName="",this.editCategoryIcon="category",this.editCategoryColor="text-slate-400",this.showCategoryModal=!1}onImageFileSelected(e){let t=e.target,r=t.files?.[0];if(r){if(!this.imageService.isValidImageFile(r)){this.dialogService.alert$("Please select a valid image file (JPEG, PNG, GIF, or WebP)").subscribe();return}this.isUploadingImage=!0,this.loadingService.show("Processing image..."),this.imageService.compressImage(r).then(i=>{this.editItemImageUrl=i}).catch(i=>{console.error("Error compressing image:",i),this.dialogService.alert$("Failed to process image. Please try again.").subscribe()}).finally(()=>{this.isUploadingImage=!1,this.loadingService.hide(),t.value=""})}}removeImage(){this.editItemImageUrl=""}onSearch(e){let t=e.target;this.groceryService.setSearchQuery(t.value)}onCategoryChange(e){this.groceryService.setCategory(e)}onSortChange(e){this.groceryService.setSortBy(e),this.showSortDropdown=!1}toggleSortDropdown(){this.showSortDropdown=!this.showSortDropdown}addItem(){this.newItemName.trim()&&this.groceryService.create$({name:this.newItemName.trim(),category:"other",isInCart:!1,isChecked:!1}).subscribe({next:()=>{this.newItemName=""},error:e=>{this.dialogService.alert$(e.message).subscribe()}})}addItemWithCategory(e,t){e.trim()&&this.groceryService.create$({name:e.trim(),category:t,isInCart:!1,isChecked:!1}).subscribe({error:r=>{this.dialogService.alert$(r.message).subscribe()}})}deleteItem(e){this.groceryService.delete$(e).subscribe()}startEdit(e){this.editingItem=e,this.editItemName=e.name,this.editItemCategory=e.category,this.editItemImageUrl=e.imageUrl||"",this.showAddModal=!0}openAddModal(e=!1){this.isAddingFromSidebar=e,this.editingItem=null,this.editItemName="",this.editItemCategory="other",this.editItemImageUrl="",this.showAddModal=!0}saveEdit(){this.editItemName.trim()&&(this.loadingService.show("Saving..."),this.editingItem?this.groceryService.update$(this.editingItem.id,{name:this.editItemName.trim(),category:this.editItemCategory,imageUrl:this.editItemImageUrl.trim()||void 0}).subscribe({next:()=>{this.loadingService.hide(),this.cancelEdit()},error:e=>{this.loadingService.hide(),this.dialogService.alert$(e.message).subscribe()}}):this.groceryService.create$({name:this.editItemName.trim(),category:this.editItemCategory,imageUrl:this.editItemImageUrl.trim()||void 0,isInCart:this.isAddingFromSidebar,isChecked:!1}).subscribe({next:()=>{this.isAddingFromSidebar&&this.createOverviewTask(this.editItemName.trim(),this.editItemImageUrl.trim()||void 0),this.loadingService.hide(),this.cancelEdit()},error:e=>{this.loadingService.hide(),this.dialogService.alert$(e.message).subscribe()}}))}cancelEdit(){this.editingItem=null,this.editItemName="",this.editItemCategory="other",this.editItemImageUrl="",this.showAddModal=!1}addToCart(e){this.groceryService.addToCart$(e).subscribe(()=>{let t=this.groceries().find(r=>r.id===e);t&&this.createOverviewTask(t.name,t.imageUrl)})}removeFromCart(e){let t=this.groceries().find(r=>r.id===e);this.groceryService.removeFromCart$(e).subscribe(()=>{t&&this.removeOverviewTask(t.name)})}toggleChecked(e){this.groceryService.toggleChecked$(e).subscribe()}clearCart(){let e=this.cartItems();this.loadingService.show("Clearing cart..."),this.groceryService.clearCart$().subscribe({next:()=>{for(let t of e)this.removeOverviewTask(t.name);this.loadingService.hide()},error:()=>this.loadingService.hide()})}checkout(){this.cartItems().length!==0&&this.dialogService.confirm$("Complete shopping trip and save to history?","Checkout").subscribe(e=>{e&&(this.loadingService.show("Saving to history..."),this.groceryService.saveToHistory$().subscribe({next:()=>{this.groceryService.clearCart$().subscribe({next:()=>this.loadingService.hide(),error:()=>this.loadingService.hide()})},error:t=>{console.error("Checkout failed",t),this.loadingService.hide(),this.dialogService.alert$("Failed to save history. Please check your connection.").subscribe()}}))})}getCategoryLabel(e){return this.groceryService.getCategoryLabel(e)}getCategoryIcon(e){return this.groceryService.getCategoryIcon(e)}getCategoryColor(e){return this.groceryService.getCategoryColor(e)}getItemCount(e){return this.groceriesByCategory()[e]?.length||0}getTotalCartItems(){return this.cartItems().length}getProgress(){let e=this.cartItems().length;return e===0?0:this.checkedItems().length/e*100}isDefaultCategory(e){return this.groceryService.getCategory(e)?.isDefault??!1}handleImageError(e){let t=e.target;t.src="https://placehold.co/200x200/cccccc/ffffff?text=No+Image"}resetData(){this.dialogService.confirm$("This will reset all grocery data to the default seed data. Continue?","Reset Data").subscribe(e=>{e&&(this.loadingService.show("Resetting data..."),this.groceryService.resetToSeedData$().subscribe({next:()=>this.loadingService.hide(),error:()=>this.loadingService.hide()}))})}createOverviewTask(e,t){let r=new Date;r.setDate(r.getDate()+3),this.overviewService.createTask$({title:e,category:"groceries",isCompleted:!1,dueDate:r,imageUrl:t}).subscribe()}removeOverviewTask(e){let r=this.overviewService.tasks().find(i=>i.title===e&&i.category==="groceries");r&&this.overviewService.deleteTask$(r.id).subscribe()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Gt({type:n,selectors:[["app-groceries"]],hostAttrs:[1,"flex-1","h-screen","flex","flex-col","overflow-hidden"],decls:60,vars:12,consts:[["id","groceries-page",1,"flex","flex-col","h-screen","w-full","overflow-hidden"],["id","groceries-header",1,"flex","items-center","justify-between","whitespace-nowrap","border-b","border-solid","border-[#e5e7eb]","dark:border-border-dark","bg-white","dark:bg-background-dark","px-6","py-3","shrink-0","z-20"],[1,"flex","items-center","gap-4"],[1,"size-8","bg-primary","rounded-lg","flex","items-center","justify-center","text-white"],[1,"material-symbols-outlined","text-[20px]"],[1,"text-slate-900","dark:text-white","text-xl","font-bold","leading-tight","tracking-[-0.015em]"],[1,"flex","flex-1","justify-end","gap-6","items-center"],[1,"flex","gap-2"],[1,"relative"],["id","btn-sort",1,"flex","size-10","cursor-pointer","items-center","justify-center","overflow-hidden","rounded-lg","bg-slate-100","dark:bg-border-dark","text-slate-900","dark:text-white","hover:bg-slate-200","dark:hover:bg-[#3b4754]","transition-colors",3,"click"],[1,"absolute","right-0","top-12","w-40","bg-white","dark:bg-surface-dark","border","border-slate-200","dark:border-border-dark","rounded-lg","shadow-xl","z-50","overflow-hidden"],["id","btn-reset","title","Reset to seed data",1,"flex","size-10","cursor-pointer","items-center","justify-center","overflow-hidden","rounded-lg","bg-slate-100","dark:bg-border-dark","text-slate-900","dark:text-white","hover:bg-red-500","hover:text-white","transition-colors",3,"click"],[1,"flex","flex-1","min-h-0"],["id","groceries-main-content",1,"flex-1","min-w-0","overflow-y-auto","bg-background-light","dark:bg-background-dark","relative"],[1,"w-full","mx-auto","px-6","py-8","flex","flex-col","gap-6"],[1,"bg-red-50","dark:bg-red-900/20","border-l-4","border-red-500","p-4","rounded-r-lg"],[1,"flex","flex-col","md:flex-row","gap-4"],[1,"flex-1","relative","group"],[1,"absolute","left-4","top-1/2","-translate-y-1/2","text-slate-400"],[1,"material-symbols-outlined"],["id","groceries-search-input","placeholder","Search for items (e.g. Avocado, Milk)...","type","text",1,"w-full","h-12","pl-12","pr-4","bg-white","dark:bg-surface-dark","border","border-slate-200","dark:border-border-dark","rounded-xl","text-slate-900","dark:text-white","placeholder:text-slate-400","focus:outline-none","focus:ring-2","focus:ring-primary","focus:border-transparent","transition-all","shadow-sm",3,"input","value"],[1,"md:w-[350px]","relative","flex","gap-2"],[1,"flex-1","relative"],["id","groceries-quick-add-input","placeholder","Quick add item...","type","text",1,"w-full","h-12","pl-4","pr-12","bg-white","dark:bg-surface-dark","border","border-slate-200","dark:border-border-dark","rounded-xl","text-slate-900","dark:text-white","placeholder:text-slate-400","focus:outline-none","focus:ring-2","focus:ring-primary","focus:border-transparent","transition-all","shadow-sm",3,"ngModelChange","keyup.enter","ngModel"],["id","btn-quick-add",1,"absolute","right-2","top-2","size-8","bg-primary/10","hover:bg-primary/20","text-primary","rounded-lg","flex","items-center","justify-center","transition-colors",3,"click"],["id","btn-add-custom",1,"h-12","px-4","bg-primary","text-white","rounded-xl","flex","items-center","justify-center","gap-2","hover:bg-blue-600","transition-colors","shadow-lg","shadow-blue-500/20","whitespace-nowrap",3,"click"],[1,"hidden","sm:inline","font-semibold","text-sm"],["id","groceries-filter-chips",1,"flex","gap-3","overflow-x-auto","pb-2","scrollbar-hide","items-center"],[3,"click"],[1,"relative","group","shrink-0"],[1,"flex","h-9","shrink-0","items-center","justify-center","gap-x-2","rounded-lg","border-2","border-dashed","border-slate-300","dark:border-slate-600","px-4","hover:border-primary","hover:text-primary","transition-colors","text-slate-400",3,"click"],[1,"material-symbols-outlined","text-[18px]"],[1,"text-sm","font-medium"],[1,"flex","flex-col","items-center","justify-center","py-20","text-center","animate-in","fade-in","duration-300"],[1,"h-12"],["id","btn-mobile-cart",1,"xl:hidden","fixed","bottom-6","right-6","size-14","bg-primary","text-white","rounded-full","shadow-xl","shadow-blue-500/40","flex","items-center","justify-center","z-50",3,"click"],[1,"absolute","top-0","right-0","size-5","bg-red-500","rounded-full","border-2","border-background-light","dark:border-background-dark","text-[10px]","font-bold","flex","items-center","justify-center"],[1,"fixed","inset-0","bg-black/50","flex","items-center","justify-center","z-50"],[1,"w-full","px-4","py-2","text-left","text-sm","hover:bg-slate-100","dark:hover:bg-border-dark","transition-colors",3,"bg-primary-10","text-primary","text-slate-700","dark:text-slate-300"],[1,"w-full","px-4","py-2","text-left","text-sm","hover:bg-slate-100","dark:hover:bg-border-dark","transition-colors",3,"click"],[1,"flex"],[1,"flex-shrink-0"],[1,"material-symbols-outlined","text-red-500"],[1,"ml-3"],[1,"text-sm","font-medium","text-red-800","dark:text-red-200"],[1,"mt-2","text-sm","text-red-700","dark:text-red-300"],[1,"mt-1","font-semibold"],[1,"material-symbols-outlined","text-[16px]"],[1,"flex","items-center","gap-1","ml-1"],[1,"size-5","flex","items-center","justify-center","rounded","hover:bg-black/10","dark:hover:bg-white/10",3,"click"],[1,"material-symbols-outlined","text-[14px]"],[1,"size-5","flex","items-center","justify-center","rounded","hover:bg-red-500/20","text-red-500",3,"click"],[3,"id"],[1,"flex","items-center","justify-between","mb-4"],[1,"text-lg","font-bold","text-slate-900","dark:text-white","flex","items-center","gap-2"],[1,"text-xs","font-medium","text-slate-500","bg-slate-100","dark:bg-border-dark","px-2","py-1","rounded"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],[1,"group","bg-white","dark:bg-surface-dark","p-4","rounded-xl","border","border-slate-200","dark:border-border-dark","hover:border-primary/50","dark:hover:border-primary/50","transition-colors","shadow-sm","flex","items-center","justify-between"],[1,"size-12","rounded-lg","bg-slate-50","dark:bg-black/20","overflow-hidden","flex-shrink-0"],[1,"w-full","h-full","object-cover",3,"alt","src"],[1,"w-full","h-full","flex","items-center","justify-center"],[1,"font-semibold","text-slate-900","dark:text-white"],[1,"flex","items-center","gap-2"],["title","Add to cart",1,"size-9","bg-primary","text-white","rounded-lg","flex","items-center","justify-center","hover:bg-blue-600","transition-colors","shadow-lg","shadow-blue-500/20"],["title","Edit",1,"p-2","text-slate-400","hover:text-primary","rounded-full","hover:bg-slate-100","dark:hover:bg-border-dark","transition-colors",3,"click"],[1,"w-full","h-full","object-cover",3,"error","alt","src"],[1,"material-symbols-outlined","text-slate-400"],[1,"text-xs","text-green-500","font-medium"],["title","Remove from cart",1,"p-2","text-slate-400","hover:text-red-500","rounded-full","hover:bg-slate-100","dark:hover:bg-border-dark","transition-colors",3,"click"],["title","Add to cart",1,"size-9","bg-primary","text-white","rounded-lg","flex","items-center","justify-center","hover:bg-blue-600","transition-colors","shadow-lg","shadow-blue-500/20",3,"click"],[1,"size-24","rounded-full","bg-slate-100","dark:bg-black/20","flex","items-center","justify-center","mb-4"],[1,"material-symbols-outlined","text-4xl","text-slate-300"],[1,"text-lg","font-bold","text-slate-900","dark:text-white"],[1,"text-slate-500","dark:text-slate-400","mt-2","max-w-xs","mx-auto"],[1,"mt-6","text-primary","font-medium","hover:underline"],[1,"mt-6","text-primary","font-medium","hover:underline",3,"click"],[1,"fixed","inset-0","bg-black/50","flex","items-center","justify-center","z-50",3,"click"],[1,"bg-white","dark:bg-surface-dark","rounded-2xl","p-6","w-full","max-w-md","shadow-2xl",3,"click"],[1,"text-lg","font-bold","text-slate-900","dark:text-white","mb-4"],[1,"space-y-4"],[1,"flex","flex-col","items-center","gap-3"],[1,"size-24","rounded-xl","bg-slate-100","dark:bg-black/20","overflow-hidden","flex","items-center","justify-center"],[1,"flex","flex-col","items-center"],["alt","Preview",1,"w-full","h-full","object-cover",3,"src"],[1,"material-symbols-outlined","text-4xl","text-slate-400"],[1,"absolute","-top-2","-right-2","size-6","bg-red-500","text-white","rounded-full","flex","items-center","justify-center","hover:bg-red-600","transition-colors","shadow-lg"],[1,"cursor-pointer"],["type","file","accept","image/jpeg,image/png,image/gif,image/webp",1,"hidden",3,"change","disabled"],[1,"flex","items-center","gap-2","px-4","py-2","bg-slate-100","dark:bg-border-dark","text-slate-600","dark:text-slate-300","rounded-lg","hover:bg-slate-200","dark:hover:bg-slate-600","transition-colors","text-sm","font-medium"],[1,"text-xs","text-slate-400"],[1,"block","text-sm","font-medium","text-slate-700","dark:text-slate-300","mb-1"],["type","text","placeholder","Enter item name...",1,"w-full","h-12","px-4","bg-white","dark:bg-background-dark","border","border-slate-200","dark:border-border-dark","rounded-xl","text-slate-900","dark:text-white","focus:outline-none","focus:ring-2","focus:ring-primary",3,"ngModelChange","ngModel"],[1,"w-full","h-12","px-4","bg-white","dark:bg-background-dark","border","border-slate-200","dark:border-border-dark","rounded-xl","text-slate-900","dark:text-white","focus:outline-none","focus:ring-2","focus:ring-primary",3,"ngModelChange","ngModel"],[3,"value"],[1,"flex","gap-3","mt-6"],[1,"flex-1","h-10","rounded-lg","border","border-slate-200","dark:border-border-dark","text-slate-600","dark:text-slate-300","font-semibold","text-sm","hover:bg-slate-50","dark:hover:bg-border-dark","transition-colors",3,"click"],[1,"flex-1","h-10","rounded-lg","bg-primary","text-white","font-semibold","text-sm","hover:bg-blue-600","shadow-lg","shadow-blue-500/20","transition-colors","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],[1,"material-symbols-outlined","text-2xl","text-primary","animate-spin"],[1,"text-xs","text-slate-400","mt-1"],["alt","Preview",1,"w-full","h-full","object-cover",3,"error","src"],[1,"absolute","-top-2","-right-2","size-6","bg-red-500","text-white","rounded-full","flex","items-center","justify-center","hover:bg-red-600","transition-colors","shadow-lg",3,"click"],[1,"flex","justify-center"],[1,"flex","items-center","gap-3","px-6","py-3","rounded-xl","bg-slate-100","dark:bg-black/20"],[1,"material-symbols-outlined","text-2xl"],[1,"font-bold","text-slate-900","dark:text-white"],["type","text","placeholder","e.g., Frozen Foods, Beverages...",1,"w-full","h-12","px-4","bg-white","dark:bg-background-dark","border","border-slate-200","dark:border-border-dark","rounded-xl","text-slate-900","dark:text-white","focus:outline-none","focus:ring-2","focus:ring-primary",3,"ngModelChange","ngModel"],[1,"block","text-sm","font-medium","text-slate-700","dark:text-slate-300","mb-2"],[1,"flex","flex-wrap","gap-2","max-h-24","overflow-y-auto","p-2","bg-slate-50","dark:bg-black/20","rounded-xl"],[3,"class"],[1,"flex","flex-wrap","gap-2","p-2","bg-slate-50","dark:bg-black/20","rounded-xl"],[1,"flex-1","h-10","rounded-lg","bg-primary","text-white","font-semibold","text-sm","hover:bg-blue-600","shadow-lg","shadow-blue-500/20","transition-colors",3,"click"]],template:function(t,r){t&1&&(x(0,"div",0)(1,"header",1)(2,"div",2)(3,"div",3)(4,"span",4),P(5,"shopping_basket"),R()(),x(6,"h2",5),P(7,"Groceries"),R()(),x(8,"div",6)(9,"div",7)(10,"div",8)(11,"button",9),Y("click",function(){return r.toggleSortDropdown()}),x(12,"span",4),P(13,"sort"),R()(),le(14,Jte,3,0,"div",10),R(),x(15,"button",11),Y("click",function(){return r.resetData()}),x(16,"span",4),P(17,"restart_alt"),R()()()()(),x(18,"div",12)(19,"main",13)(20,"div",14),le(21,Xte,13,1,"div",15),x(22,"div",16)(23,"div",17)(24,"div",18)(25,"span",19),P(26,"search"),R()(),x(27,"input",20),Y("input",function(s){return r.onSearch(s)}),R()(),x(28,"div",21)(29,"div",22)(30,"input",23),gn("ngModelChange",function(s){return wn(r.newItemName,s)||(r.newItemName=s),s}),Y("keyup.enter",function(){return r.addItem()}),R(),x(31,"button",24),Y("click",function(){return r.addItem()}),x(32,"span",4),P(33,"add"),R()()(),x(34,"button",25),Y("click",function(){return r.openAddModal()}),x(35,"span",4),P(36,"add_circle"),R(),x(37,"span",26),P(38,"New"),R()()()(),x(39,"div",27)(40,"button",28),Y("click",function(){return r.onCategoryChange("all")}),x(41,"p"),P(42," All Items "),R()(),kt(43,ene,7,9,"div",29,Xw),x(45,"button",30),Y("click",function(){return r.openAddCategoryModal()}),x(46,"span",31),P(47,"add"),R(),x(48,"span",32),P(49,"Add Category"),R()()(),kt(50,ane,1,1,null,null,Xw),le(52,lne,9,1,"div",33),Pt(53,"div",34),R()(),x(54,"button",35),Y("click",function(){return r.toggleMobileCart()}),x(55,"span",19),P(56,"shopping_cart"),R(),le(57,une,2,1,"span",36),R()(),le(58,mne,35,8,"div",37),le(59,vne,32,6,"div",37),R()),t&2&&(F(14),ue(r.showSortDropdown?14:-1),F(7),ue(r.error()?21:-1),F(6),Le("value",r.searchQuery()),F(3),pn("ngModel",r.newItemName),F(10),dt(r.selectedCategory()==="all"?"flex h-9 shrink-0 items-center justify-center gap-x-2 rounded-lg bg-slate-900 dark:bg-white px-4 hover:opacity-90 transition-opacity":"flex h-9 shrink-0 items-center justify-center gap-x-2 rounded-lg bg-white dark:bg-surface-dark border border-slate-200 dark:border-border-dark px-4 hover:bg-slate-50 dark:hover:bg-border-dark transition-colors"),F(),dt(r.selectedCategory()==="all"?"text-white dark:text-slate-900 text-sm font-bold":"text-slate-600 dark:text-slate-300 text-sm font-medium"),F(2),Nt(r.categories()),F(7),Nt(r.categories()),F(2),ue(r.groceries().length===0&&!r.isLoading()?52:-1),F(5),ue(r.getTotalCartItems()>0?57:-1),F(),ue(r.showAddModal?58:-1),F(),ue(r.showCategoryModal?59:-1))},dependencies:[cr,Qa,fh,ph,vs,Ka,Wa,wo],styles:["#groceries-page[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex:1;height:100%;overflow:hidden}#groceries-main-content[_ngcontent-%COMP%]{flex:1;overflow-y:auto;overflow-x:hidden}#groceries-main-content[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}#groceries-main-content[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:transparent}#groceries-main-content[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:#9ca3af66;border-radius:4px}#groceries-main-content[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background-color:#9ca3af99}#shopping-list-sidebar[_ngcontent-%COMP%]{max-height:100%;height:100%}#cart-items-container[_ngcontent-%COMP%]{flex:1 1 0%;min-height:0;max-height:calc(100vh - 280px);overflow-y:auto}#cart-items-container[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}#cart-items-container[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:transparent}#cart-items-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:#9ca3af80;border-radius:3px}#cart-items-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background-color:#9ca3afb3}"]})};var b3=[{value:"admin",label:"Admin",colorClass:"bg-primary/10 text-primary border-primary/20"},{value:"member",label:"Member",colorClass:"bg-surface-dark text-slate-300 border-border-dark"},{value:"guest",label:"Guest",colorClass:"bg-surface-dark text-text-muted border-border-dark"}];var E3=(n,e)=>e.value,wne=(n,e)=>e.id;function Ine(n,e){if(n&1&&(x(0,"option",22),P(1),R()),n&2){let t=e.$implicit;Le("value",t.value),F(),Ne(t.label)}}function bne(n,e){if(n&1&&(x(0,"div",43),P(1),R()),n&2){let t=$().$implicit;F(),Ne(t.name.charAt(0).toUpperCase())}}function Ene(n,e){if(n&1){let t=Be();x(0,"tr",36)(1,"td",41)(2,"div",5)(3,"div",42),le(4,bne,2,1,"div",43),R(),x(5,"div",44)(6,"span",45),P(7),R()()()(),x(8,"td",41)(9,"span",46),P(10),R()(),x(11,"td",41)(12,"div",47),Pt(13,"div",48),x(14,"span",49),P(15),R()()(),x(16,"td",41)(17,"span",50),P(18),Rf(19,"date"),R()(),x(20,"td",51)(21,"div",52)(22,"button",53),Y("click",function(){let i=ee(t).$implicit,s=$();return te(s.openLoginModal(i))}),x(23,"span",9),P(24,"login"),R()(),x(25,"button",54),Y("click",function(){let i=ee(t).$implicit,s=$();return te(s.openEditModal(i))}),x(26,"span",9),P(27,"edit"),R()(),x(28,"button",55),Y("click",function(){let i=ee(t).$implicit,s=$();return te(s.deleteUser(i))}),x(29,"span",9),P(30,"delete"),R()()()()()}if(n&2){let t,r,i,s=e.$implicit,o=$();F(3),qc("background-image",s.avatarUrl?"url("+s.avatarUrl+")":""),F(),ue(s.avatarUrl?-1:4),F(3),Ne(s.name),F(2),dt(o.getRoleClass(s.role)),F(),st(" ",o.getRoleLabel(s.role)," "),F(3),dt(o.getStatusColor(s.status)),F(),Wt("text-primary",s.status==="pending")("text-white",s.status!=="pending"),F(),st(" ",o.getStatusLabel(s.status)," "),F(3),st(" ",s.lastActive?kf(19,19,s.lastActive,"short"):"Never"," "),F(4),Le("title",((t=o.currentUser())==null?null:t.id)===s.id?"Currently Logged In":"Switch to User")("disabled",((r=o.currentUser())==null?null:r.id)===s.id),F(),Wt("text-primary",((i=o.currentUser())==null?null:i.id)===s.id)}}function Cne(n,e){n&1&&(x(0,"tr")(1,"td",56)(2,"span",57),P(3,"person_off"),R(),x(4,"p"),P(5,"No users found matching your criteria."),R()()())}function Tne(n,e){if(n&1&&Pt(0,"img",65),n&2){let t=$(2);Le("src",t.formAvatarUrl,ir)}}function Sne(n,e){n&1&&(x(0,"span",66),P(1,"person"),R())}function Dne(n,e){if(n&1){let t=Be();x(0,"button",80),Y("click",function(i){ee(t);let s=$(2);return te(s.removeAvatar(i))}),x(1,"span",81),P(2,"close"),R()()}}function Ane(n,e){if(n&1&&(x(0,"option",22),P(1),R()),n&2){let t=e.$implicit;Le("value",t.value),F(),Ne(t.label)}}function xne(n,e){if(n&1){let t=Be();x(0,"div")(1,"label",73),P(2,"Status"),R(),x(3,"select",76),gn("ngModelChange",function(i){ee(t);let s=$(2);return wn(s.formStatus,i)||(s.formStatus=i),te(i)}),x(4,"option",24),P(5,"Active"),R(),x(6,"option",26),P(7,"Inactive"),R(),x(8,"option",25),P(9,"Pending"),R(),x(10,"option",28),P(11,"Away"),R(),x(12,"option",27),P(13,"Offline"),R()()()}if(n&2){let t=$(2);F(3),pn("ngModel",t.formStatus)}}function Rne(n,e){if(n&1){let t=Be();x(0,"div",40)(1,"div",58)(2,"div",59)(3,"h3",60),P(4),R(),x(5,"button",61),Y("click",function(){ee(t);let i=$();return te(i.closeModal())}),x(6,"span",7),P(7,"close"),R()()(),x(8,"div",62)(9,"div",63)(10,"div",64),Y("click",function(){ee(t);let i=sC(23);return te(i.click())}),le(11,Tne,1,1,"img",65)(12,Sne,2,0,"span",66),x(13,"div",67)(14,"span",68),P(15,"upload"),R()(),le(16,Dne,3,0,"button",69),R(),x(17,"div",44)(18,"span",70),P(19,"Profile Photo"),R(),x(20,"span",71),P(21,"Click to upload"),R()(),x(22,"input",72,0),Y("change",function(i){ee(t);let s=$();return te(s.onAvatarSelected(i))}),R()(),x(24,"div")(25,"label",73),P(26,"Full Name"),R(),x(27,"input",74),gn("ngModelChange",function(i){ee(t);let s=$();return wn(s.formName,i)||(s.formName=i),te(i)}),R()(),x(28,"div")(29,"label",73),P(30),R(),x(31,"input",75),gn("ngModelChange",function(i){ee(t);let s=$();return wn(s.formPassword,i)||(s.formPassword=i),te(i)}),R()(),x(32,"div")(33,"label",73),P(34,"Role"),R(),x(35,"select",76),gn("ngModelChange",function(i){ee(t);let s=$();return wn(s.formRole,i)||(s.formRole=i),te(i)}),kt(36,Ane,2,2,"option",22,E3),R()(),le(38,xne,14,1,"div"),R(),x(39,"div",77)(40,"button",78),Y("click",function(){ee(t);let i=$();return te(i.closeModal())}),P(41,"Cancel"),R(),x(42,"button",79),Y("click",function(){ee(t);let i=$();return te(i.saveUser())}),P(43,"Save User"),R()()()()}if(n&2){let t=$();F(4),Ne(t.editingUser?"Edit User":"New User"),F(7),ue(t.formAvatarUrl?11:12),F(5),ue(t.formAvatarUrl?16:-1),F(11),pn("ngModel",t.formName),F(3),Ne(t.editingUser?"New Password (Optional)":"Password"),F(),pn("ngModel",t.formPassword),Le("placeholder",t.editingUser?"Leave blank to keep current":"Enter password"),F(4),pn("ngModel",t.formRole),F(),Nt(t.userRoles),F(2),ue(t.editingUser?38:-1)}}function kne(n,e){if(n&1&&(x(0,"p",86),P(1),R()),n&2){let t=$(2);F(),Ne(t.loginError)}}function Nne(n,e){if(n&1){let t=Be();x(0,"div",40)(1,"div",82)(2,"div",59)(3,"h3",60),P(4),R(),x(5,"button",61),Y("click",function(){ee(t);let i=$();return te(i.closeLoginModal())}),x(6,"span",7),P(7,"close"),R()()(),x(8,"div",62)(9,"div",83)(10,"div",84),Pt(11,"img",65),R()(),x(12,"div")(13,"label",73),P(14,"Password"),R(),x(15,"input",85),gn("ngModelChange",function(i){ee(t);let s=$();return wn(s.loginPasswordInput,i)||(s.loginPasswordInput=i),te(i)}),Y("keyup.enter",function(){ee(t);let i=$();return te(i.attemptLogin())}),R(),le(16,kne,2,1,"p",86),R()(),x(17,"div",77)(18,"button",78),Y("click",function(){ee(t);let i=$();return te(i.closeLoginModal())}),P(19,"Cancel"),R(),x(20,"button",79),Y("click",function(){ee(t);let i=$();return te(i.attemptLogin())}),P(21,"Login"),R()()()()}if(n&2){let t=$();F(4),st("Login as ",t.loginTargetUser==null?null:t.loginTargetUser.name),F(7),Le("src",(t.loginTargetUser==null?null:t.loginTargetUser.avatarUrl)||"https://ui-avatars.com/api/?name="+(t.loginTargetUser==null?null:t.loginTargetUser.name)+"&background=random",ir),F(4),pn("ngModel",t.loginPasswordInput),F(),ue(t.loginError?16:-1)}}var eI=class n{userService=M(Xr);dialogService=M(Zr);imageService=M(_h);loadingService=M(lr);users=this.userService.users;currentUser=this.userService.currentUser;userRoles=b3;showLoginModal=!1;loginTargetUser=null;loginPasswordInput="";loginError="";openLoginModal(e){this.loginTargetUser=e,this.loginPasswordInput="",this.loginError="",this.showLoginModal=!0}closeLoginModal(){this.showLoginModal=!1}attemptLogin(){if(!this.loginTargetUser)return;if((this.loginTargetUser.password||"")!==this.loginPasswordInput){this.loginError="Incorrect password";return}this.loadingService.show("Logging in..."),this.userService.login$(this.loginTargetUser).subscribe({next:()=>{this.loadingService.hide(),this.closeLoginModal()},error:()=>{this.loadingService.hide(),this.closeLoginModal()}})}searchQuery=he("");roleFilter=he("All");statusFilter=he("All");filteredUsers=He(()=>{let e=this.users(),t=this.searchQuery().toLowerCase(),r=this.roleFilter(),i=this.statusFilter();return t&&(e=e.filter(s=>s.name.toLowerCase().includes(t))),r!=="All"&&(e=e.filter(s=>s.role===r)),i!=="All"&&(e=e.filter(s=>s.status===i)),e});showModal=!1;editingUser=null;formName="";formPassword="";formRole="member";formStatus="active";formAvatarUrl="";openAddModal(){this.editingUser=null,this.resetForm(),this.showModal=!0}openEditModal(e){this.editingUser=e,this.formName=e.name,this.formRole=e.role,this.formStatus=e.status,this.formAvatarUrl=e.avatarUrl||"",this.showModal=!0}closeModal(){this.showModal=!1}resetForm(){this.formName="",this.formPassword="",this.formRole="member",this.formStatus="active",this.formAvatarUrl=""}removeAvatar(e){e.stopPropagation(),this.formAvatarUrl=""}saveUser(){if(this.formName.trim())if(this.loadingService.show("Saving user..."),this.editingUser){let e={name:this.formName,role:this.formRole,status:this.formStatus,avatarUrl:this.formAvatarUrl};this.formPassword&&(e.password=this.formPassword),this.userService.updateUser$(this.editingUser.id,e).subscribe({next:()=>{this.loadingService.hide(),this.closeModal()},error:()=>this.loadingService.hide()})}else this.userService.createUser$({name:this.formName,password:this.formPassword,role:this.formRole,status:"pending",avatarUrl:this.formAvatarUrl||`https://ui-avatars.com/api/?name=${this.formName}&background=random`}).subscribe({next:()=>{this.loadingService.hide(),this.closeModal()},error:()=>this.loadingService.hide()})}deleteUser(e){this.dialogService.confirm$(`Delete user ${e.name}?`,"Delete User").subscribe(t=>{t&&(this.loadingService.show("Deleting user..."),this.userService.deleteUser$(e.id).subscribe({next:()=>this.loadingService.hide(),error:()=>this.loadingService.hide()}))})}getRoleLabel(e){return this.userRoles.find(t=>t.value===e)?.label||e}getRoleClass(e){return this.userRoles.find(t=>t.value===e)?.colorClass||"bg-gray-100 text-gray-800"}getStatusColor(e){switch(e){case"active":return"bg-emerald-500 shadow-[0_0_8px_rgba(16,185,129,0.5)]";case"away":return"bg-amber-500 shadow-[0_0_8px_rgba(245,158,11,0.5)]";case"offline":return"bg-gray-500";case"pending":return"border-2 border-primary/50 border-t-transparent animate-spin";default:return"bg-gray-400"}}getStatusLabel(e){return e==="pending"?"Invited":e.charAt(0).toUpperCase()+e.slice(1)}onAvatarSelected(e){let t=e.target.files?.[0];t&&(this.loadingService.show("Processing image..."),this.imageService.compressImage(t).then(r=>{this.formAvatarUrl=r}).finally(()=>this.loadingService.hide()))}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Gt({type:n,selectors:[["app-users"]],decls:78,vars:7,consts:[["fileInput",""],[1,"flex-1","flex","flex-col","h-full","overflow-hidden","bg-background-light","dark:bg-background-dark","relative"],[1,"flex","items-center","justify-between","px-8","py-5","border-b","border-border-dark","bg-background-dark","sticky","top-0","z-10"],[1,"flex","flex-col","gap-1"],[1,"text-white","text-2xl","font-bold","leading-tight","tracking-tight"],[1,"flex","items-center","gap-4"],[1,"size-10","rounded-full","bg-surface-dark","hover:bg-border-dark","flex","items-center","justify-center","text-text-muted","hover:text-white","transition-colors"],[1,"material-symbols-outlined"],[1,"bg-primary","hover:bg-primary-hover","text-white","h-10","px-5","rounded-lg","text-sm","font-bold","flex","items-center","gap-2","transition-all","shadow-lg","shadow-primary/20",3,"click"],[1,"material-symbols-outlined","text-[20px]"],[1,"flex-1","overflow-y-auto","p-8"],[1,"max-w-[1200px]","mx-auto","flex","flex-col","gap-6"],[1,"text-text-muted","text-base","max-w-2xl"],[1,"flex","flex-col","sm:flex-row","gap-4","justify-between","items-start","sm:items-center","bg-surface-dark","p-4","rounded-xl","border","border-border-dark"],[1,"relative","w-full","sm:max-w-md","group"],[1,"absolute","inset-y-0","left-0","pl-3","flex","items-center","pointer-events-none"],[1,"material-symbols-outlined","text-text-muted","group-focus-within:text-primary","transition-colors"],["placeholder","Search users by name...","type","text",1,"block","w-full","pl-10","pr-3","py-2.5","border","border-border-dark","rounded-lg","leading-5","bg-background-dark","text-white","placeholder-text-muted","focus:outline-none","focus:ring-1","focus:ring-primary","focus:border-primary","sm:text-sm","transition-all",3,"ngModelChange","ngModel"],[1,"flex","gap-3","w-full","sm:w-auto"],[1,"relative"],[1,"appearance-none","bg-background-dark","border","border-border-dark","text-white","text-sm","rounded-lg","focus:ring-primary","focus:border-primary","block","w-full","pl-3","pr-10","py-2.5","cursor-pointer","hover:border-slate-600","transition-colors",3,"ngModelChange","ngModel"],["value","All"],[3,"value"],[1,"pointer-events-none","absolute","inset-y-0","right-0","flex","items-center","px-2","text-text-muted"],["value","active"],["value","pending"],["value","inactive"],["value","offline"],["value","away"],[1,"bg-surface-dark","rounded-xl","border","border-border-dark","overflow-hidden","shadow-sm"],[1,"overflow-x-auto"],[1,"w-full","text-left","border-collapse"],[1,"border-b","border-border-dark","bg-surface-dark"],[1,"py-4","px-6","text-xs","font-semibold","uppercase","tracking-wider","text-text-muted"],[1,"py-4","px-6","text-xs","font-semibold","uppercase","tracking-wider","text-text-muted","text-right"],[1,"divide-y","divide-border-dark"],[1,"hover:bg-slate-800","transition-colors","group"],[1,"px-6","py-4","border-t","border-border-dark","bg-surface-dark","flex","items-center","justify-between"],[1,"text-sm","text-text-muted"],[1,"font-medium","text-white"],[1,"fixed","inset-0","z-50","flex","items-center","justify-center","p-4","bg-black/50","backdrop-blur-sm","animate-in","fade-in","duration-200"],[1,"py-4","px-6","whitespace-nowrap"],[1,"bg-center","bg-no-repeat","bg-cover","rounded-full","size-10","border","border-border-dark","bg-surface-dark","relative","overflow-hidden"],[1,"absolute","inset-0","flex","items-center","justify-center","text-xs","font-bold","text-text-muted","bg-border-dark"],[1,"flex","flex-col"],[1,"text-white","text-sm","font-semibold"],[1,"inline-flex","items-center","px-2.5","py-0.5","rounded-full","text-xs","font-medium","border"],[1,"flex","items-center","gap-2"],[1,"h-2","w-2","rounded-full"],[1,"text-sm"],[1,"text-text-muted","text-sm"],[1,"py-4","px-6","whitespace-nowrap","text-right"],[1,"flex","items-center","justify-end","gap-2","opacity-0","group-hover:opacity-100","transition-opacity"],[1,"p-2","text-text-muted","hover:text-white","hover:bg-border-dark","rounded-lg","transition-colors",3,"click","title","disabled"],["title","Edit User",1,"p-2","text-text-muted","hover:text-white","hover:bg-border-dark","rounded-lg","transition-colors",3,"click"],["title","Delete User",1,"p-2","text-text-muted","hover:text-red-400","hover:bg-border-dark","rounded-lg","transition-colors",3,"click"],["colspan","5",1,"py-12","text-center","text-text-muted"],[1,"material-symbols-outlined","text-4xl","mb-2","opacity-50"],[1,"bg-surface-dark","border","border-border-dark","w-full","max-w-md","rounded-xl","shadow-2xl","overflow-hidden","animate-in","zoom-in-95","duration-200"],[1,"p-6","border-b","border-border-dark","flex","justify-between","items-center","bg-background-dark"],[1,"font-bold","text-lg","text-white"],[1,"p-1","rounded-full","hover:bg-border-dark","text-text-muted","hover:text-white","transition-colors",3,"click"],[1,"p-6","space-y-4"],[1,"flex","items-center","gap-4","pb-2","border-b","border-border-dark"],[1,"relative","size-14","rounded-full","bg-background-dark","border","border-border-dark","overflow-hidden","flex","items-center","justify-center","group","cursor-pointer",3,"click"],[1,"w-full","h-full","object-cover",3,"src"],[1,"material-symbols-outlined","text-text-muted","text-2xl"],[1,"absolute","inset-0","bg-black/50","flex","items-center","justify-center","opacity-0","group-hover:opacity-100","transition-opacity"],[1,"material-symbols-outlined","text-white","text-sm"],["title","Remove Photo",1,"absolute","top-0","right-0","bg-red-500","rounded-full","p-0.5","text-white","z-20","hover:bg-red-600","transition-colors","shadow-sm","flex","items-center","justify-center","transform","translate-x-1/4","-translate-y-1/4"],[1,"text-xs","font-semibold","uppercase","text-text-muted"],[1,"text-xs","text-text-muted"],["type","file","accept","image/*",1,"hidden",3,"change"],[1,"block","text-xs","font-semibold","uppercase","text-text-muted","mb-1.5"],["type","text","placeholder","e.g. Alex Johnson",1,"w-full","bg-background-dark","border","border-border-dark","rounded-lg","px-4","py-2.5","text-white","focus:outline-none","focus:border-primary","focus:ring-1","focus:ring-primary","transition-all",3,"ngModelChange","ngModel"],["type","password",1,"w-full","bg-background-dark","border","border-border-dark","rounded-lg","px-4","py-2.5","text-white","focus:outline-none","focus:border-primary","focus:ring-1","focus:ring-primary","transition-all",3,"ngModelChange","ngModel","placeholder"],[1,"w-full","bg-background-dark","border","border-border-dark","rounded-lg","px-4","py-2.5","text-white","focus:outline-none","focus:border-primary","focus:ring-1","focus:ring-primary","transition-all","appearance-none",3,"ngModelChange","ngModel"],[1,"p-4","bg-background-dark","border-t","border-border-dark","flex","justify-end","gap-3"],[1,"px-5","py-2.5","rounded-lg","border","border-border-dark","text-text-muted","font-bold","text-sm","hover:text-white","hover:border-white","transition-colors",3,"click"],[1,"px-5","py-2.5","rounded-lg","bg-primary","text-white","font-bold","text-sm","hover:bg-primary-hover","transition-colors","shadow-lg","shadow-primary/20",3,"click"],["title","Remove Photo",1,"absolute","top-0","right-0","bg-red-500","rounded-full","p-0.5","text-white","z-20","hover:bg-red-600","transition-colors","shadow-sm","flex","items-center","justify-center","transform","translate-x-1/4","-translate-y-1/4",3,"click"],[1,"material-symbols-outlined","text-[10px]","font-bold"],[1,"bg-surface-dark","border","border-border-dark","w-full","max-w-sm","rounded-xl","shadow-2xl","overflow-hidden","animate-in","zoom-in-95","duration-200"],[1,"flex","justify-center","mb-4"],[1,"relative","size-20","rounded-full","border-2","border-border-dark","overflow-hidden"],["type","password","placeholder","Enter password","autofocus","",1,"w-full","bg-background-dark","border","border-border-dark","rounded-lg","px-4","py-2.5","text-white","focus:outline-none","focus:border-primary","focus:ring-1","focus:ring-primary","transition-all",3,"ngModelChange","keyup.enter","ngModel"],[1,"text-red-400","text-xs","mt-1"]],template:function(t,r){t&1&&(x(0,"div",1)(1,"header",2)(2,"div",3)(3,"h2",4),P(4,"User Management"),R()(),x(5,"div",5)(6,"button",6)(7,"span",7),P(8,"notifications"),R()(),x(9,"button",8),Y("click",function(){return r.openAddModal()}),x(10,"span",9),P(11,"add"),R(),x(12,"span"),P(13,"Add New User"),R()()()(),x(14,"div",10)(15,"div",11)(16,"p",12),P(17," Manage access and roles for your household members. You can invite new family members, assign tasks, and control permissions. "),R(),x(18,"div",13)(19,"div",14)(20,"div",15)(21,"span",16),P(22,"search"),R()(),x(23,"input",17),Y("ngModelChange",function(s){return r.searchQuery.set(s)}),R()(),x(24,"div",18)(25,"div",19)(26,"select",20),Y("ngModelChange",function(s){return r.roleFilter.set(s)}),x(27,"option",21),P(28,"All Roles"),R(),kt(29,Ine,2,2,"option",22,E3),R(),x(31,"div",23)(32,"span",9),P(33,"expand_more"),R()()(),x(34,"div",19)(35,"select",20),Y("ngModelChange",function(s){return r.statusFilter.set(s)}),x(36,"option",21),P(37,"All Status"),R(),x(38,"option",24),P(39,"Active"),R(),x(40,"option",25),P(41,"Pending"),R(),x(42,"option",26),P(43,"Inactive"),R(),x(44,"option",27),P(45,"Offline"),R(),x(46,"option",28),P(47,"Away"),R()(),x(48,"div",23)(49,"span",9),P(50,"expand_more"),R()()()()(),x(51,"div",29)(52,"div",30)(53,"table",31)(54,"thead")(55,"tr",32)(56,"th",33),P(57,"User"),R(),x(58,"th",33),P(59,"Role"),R(),x(60,"th",33),P(61,"Status"),R(),x(62,"th",33),P(63,"Last Active"),R(),x(64,"th",34),P(65,"Actions"),R()()(),x(66,"tbody",35),kt(67,Ene,31,22,"tr",36,wne,!1,Cne,6,0,"tr"),R()()(),x(70,"div",37)(71,"p",38),P(72,"Showing "),x(73,"span",39),P(74),R(),P(75," users"),R()()()()(),le(76,Rne,44,9,"div",40),le(77,Nne,22,4,"div",40),R()),t&2&&(F(23),Le("ngModel",r.searchQuery()),F(3),Le("ngModel",r.roleFilter()),F(3),Nt(r.userRoles),F(6),Le("ngModel",r.statusFilter()),F(32),Nt(r.filteredUsers()),F(7),Ne(r.filteredUsers().length),F(2),ue(r.showModal?76:-1),F(),ue(r.showLoginModal?77:-1))},dependencies:[cr,Qa,fh,ph,vs,Ka,Wa,wo,Uf],encapsulation:2})};var C3=[{path:"",redirectTo:"overview",pathMatch:"full"},{path:"overview",component:Yw},{path:"groceries",component:Zw},{path:"users",component:eI}];var T3={providers:[zb(),WC(C3),W2(()=>K2(uh.firebase)),mB(()=>_B()),_V(()=>vV())]};function Pne(n,e){if(n&1&&(vn(0,"h3",4),P(1),Un()),n&2){let t=$();F(),Ne(t.title)}}function Mne(n,e){if(n&1){let t=Be();vn(0,"button",9),Bu("click",function(){ee(t);let i=$(2);return te(i.cancel())}),P(1),Un()}if(n&2){let t=$();F(),st(" ",t.cancelText||"Cancel"," ")}}function One(n,e){if(n&1){let t=Be();vn(0,"div",0)(1,"div",1),Bu("click",function(){let i=ee(t),s=$();return te(i.type==="confirm"?s.cancel():s.confirm())}),Un(),vn(2,"div",2)(3,"div",3),le(4,Pne,2,1,"h3",4),vn(5,"p",5),P(6),Un()(),vn(7,"div",6),le(8,Mne,2,1,"button",7),vn(9,"button",8),Bu("click",function(){ee(t);let i=$();return te(i.confirm())}),P(10),Un()()()()}if(n&2){let t=e;F(4),ue(t.title?4:-1),F(2),Ne(t.message),F(2),ue(t.type==="confirm"?8:-1),F(),Wt("bg-rose-500",t.type==="error")("bg-primary",t.type!=="error"),F(),st(" ",t.confirmText||"OK"," ")}}var tI=class n{dialogService=M(Zr);confirm(){this.dialogService.close(!0)}cancel(){this.dialogService.close(!1)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Gt({type:n,selectors:[["app-dialog"]],decls:1,vars:1,consts:[[1,"fixed","inset-0","z-[100]","flex","items-center","justify-center","p-4","bg-black/50","backdrop-blur-sm","animate-in","fade-in","duration-200"],[1,"absolute","inset-0",3,"click"],[1,"relative","bg-white","dark:bg-surface-dark","w-full","max-w-sm","rounded-2xl","shadow-xl","overflow-hidden","animate-in","zoom-in-95","duration-200","border","border-slate-200","dark:border-border-dark"],[1,"p-6"],[1,"text-xl","font-bold","text-slate-900","dark:text-white","mb-2"],[1,"text-slate-600","dark:text-slate-300","leading-relaxed"],[1,"p-4","bg-slate-50","dark:bg-black/20","flex","justify-end","gap-3"],[1,"px-4","py-2","rounded-lg","text-slate-600","dark:text-slate-400","font-bold","hover:bg-slate-200","dark:hover:bg-border-dark","transition-colors"],[1,"px-5","py-2","rounded-lg","text-slate-900","font-bold","hover:brightness-110","transition-all","shadow-lg","active:scale-95",3,"click"],[1,"px-4","py-2","rounded-lg","text-slate-600","dark:text-slate-400","font-bold","hover:bg-slate-200","dark:hover:bg-border-dark","transition-colors",3,"click"]],template:function(t,r){if(t&1&&le(0,One,11,8,"div",0),t&2){let i;ue((i=r.dialogService.dialog())?0:-1,i)}},dependencies:[cr],encapsulation:2})};var nI=class n{firestore=M(Ni);COLLECTIONS=["groceries","categories","overview_tasks","assignees","shopping_history"];async migrateAllDataToUser(e){if(!e)return console.error("\u274C userId is required"),[];console.log(`\u{1F504} Starting data migration to userId: ${e}`);let t=[];for(let r of this.COLLECTIONS){let i=await this.migrateCollection(r,e);t.push(i)}return console.log("\u2705 Migration complete!",t),t}async migrateCollection(e,t){console.log(`  \u{1F4C1} Migrating collection: ${e}`);let r=0,i=0;try{let s=vo(this.firestore,e),a=(await lR(s)).docs.map(async c=>{let l=c.data();if(l.userId===t){console.log(`    \u23ED\uFE0F Skipping ${c.id} (already has userId)`);return}if(l.userId==="system"&&e==="categories"){console.log(`    \u23ED\uFE0F Skipping ${c.id} (system category)`);return}try{await Ga(kr(this.firestore,e,c.id),{userId:t}),console.log(`    \u2705 Updated ${c.id}`),r++}catch(h){console.error(`    \u274C Error updating ${c.id}:`,h),i++}});await Promise.all(a)}catch(s){console.error(`  \u274C Error reading collection ${e}:`,s),i++}return console.log(`  \u{1F4CA} ${e}: ${r} updated, ${i} errors`),{collection:e,updated:r,errors:i}}async previewMigration(){console.log("\u{1F4CB} Preview of data to migrate:");for(let e of this.COLLECTIONS)try{let t=vo(this.firestore,e),r=await lR(t),i=r.docs.filter(s=>{let o=s.data();return!o.userId||o.userId!=="system"&&e!=="categories"});console.log(`  \u{1F4C1} ${e}: ${i.length}/${r.docs.length} documents need migration`)}catch(t){console.error(`  \u274C Error reading ${e}:`,t)}}static \u0275fac=function(t){return new(t||n)};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})};var Fne=(n,e)=>e.id;function Vne(n,e){n&1&&(x(0,"h1",6),P(1,"HomeNeeds"),R())}function Lne(n,e){n&1&&(x(0,"p",7),P(1,"Manage your home effortlessly"),R())}function Une(n,e){if(n&1&&(x(0,"div",10)(1,"span",28),P(2),R(),x(3,"span",29),P(4),R()()),n&2){let t,r,i=$();F(2),Ne(((t=i.currentUser())==null?null:t.name)||"Guest"),F(2),Ne(((r=i.currentUser())==null?null:r.role)||"Visitor")}}function jne(n,e){n&1&&(x(0,"span",15),P(1,"Overview"),R())}function Bne(n,e){n&1&&(x(0,"span",18),P(1,"Groceries"),R())}function $ne(n,e){n&1&&(x(0,"span",18),P(1,"Users"),R())}function Hne(n,e){n&1&&(x(0,"span",22),P(1,"Log Out"),R())}function zne(n,e){if(n&1&&(x(0,"div",24)(1,"div",30)(2,"span",31),P(3,"pending_actions"),R(),x(4,"span",32),P(5,"Today"),R()(),x(6,"p",33),P(7),R(),x(8,"p",34),P(9,"Items Pending"),R()()),n&2){let t=$();F(7),Ne(t.pendingItemsCount())}}function qne(n,e){if(n&1&&(x(0,"div",25)(1,"span",35),P(2,"pending_actions"),R(),x(3,"span",36),P(4),R()()),n&2){let t=$();F(4),Ne(t.pendingItemsCount())}}function Gne(n,e){n&1&&(x(0,"div",47)(1,"span",49),P(2,"lock"),R()())}function Wne(n,e){if(n&1){let t=Be();x(0,"button",44),Y("click",function(){let i=ee(t).$implicit,s=$(3);return te(s.selectUser(i))}),x(1,"div",45),Pt(2,"img",46),le(3,Gne,3,0,"div",47),R(),x(4,"span",48),P(5),R()()}if(n&2){let t=e.$implicit;F(2),Le("src",t.avatarUrl||"https://ui-avatars.com/api/?name="+t.name+"&background=random",ir),F(),ue(t.password?3:-1),F(2),Ne(t.name)}}function Kne(n,e){if(n&1&&(x(0,"div",41),kt(1,Wne,6,3,"button",43,Fne),R()),n&2){let t=$(2);F(),Nt(t.allUsers())}}function Qne(n,e){if(n&1&&(x(0,"p",55),P(1),R()),n&2){let t=$(3);F(),Ne(t.loginError())}}function Yne(n,e){if(n&1){let t=Be();x(0,"div",42)(1,"div",50)(2,"div",51),Pt(3,"img",46),R(),x(4,"h3",52),P(5),R()(),x(6,"div",53)(7,"div")(8,"input",54),Y("input",function(i){ee(t);let s=$(2);return te(s.passwordInput.set(i.target.value))})("keyup.enter",function(){ee(t);let i=$(2);return te(i.verifyLogin())}),R(),le(9,Qne,2,1,"p",55),R(),x(10,"button",56),Y("click",function(){ee(t);let i=$(2);return te(i.verifyLogin())}),P(11,"Login"),R(),x(12,"button",57),Y("click",function(){ee(t);let i=$(2);return te(i.cancelPassword())}),P(13,"Back"),R()()()}if(n&2){let t,r,i=$(2);F(3),Le("src",((t=i.selectedUser())==null?null:t.avatarUrl)||"https://ui-avatars.com/api/?name="+((t=i.selectedUser())==null?null:t.name)+"&background=random",ir),F(2),Ne((r=i.selectedUser())==null?null:r.name),F(3),Le("value",i.passwordInput()),F(),ue(i.loginError()?9:-1)}}function Jne(n,e){if(n&1&&(x(0,"div",27)(1,"div",37)(2,"div",38)(3,"h1",39),P(4,"Welcome Back"),R(),x(5,"p",40),P(6,"Who is using HomeNeeds?"),R()(),le(7,Kne,3,0,"div",41)(8,Yne,14,4,"div",42),R()()),n&2){let t=$();F(7),ue(t.loginStep()==="select"?7:8)}}var rI=class n{title=he("frontend");overviewService=M(ws);userService=M(Xr);migrationService=M(nI);loadingService=M(lr);users=this.userService.users;allUsers=this.userService.allUsers;currentUser=this.userService.currentUser;loading=this.userService.loading;sidebarCollapsed=he(this.getSavedSidebarState());loginStep=he("select");selectedUser=he(null);passwordInput=he("");loginError=he("");pendingItemsCount=He(()=>this.overviewService.tasks().filter(e=>!e.isCompleted).length);constructor(){window.userService=this.userService,window.migrationService=this.migrationService,window.loadingService=this.loadingService,console.log("\u{1F527} Dev Console Tools Available:"),console.log("   \u2192 window.userService.manualMigrateAllUsers()"),console.log('   \u2192 window.migrationService.migrateAllDataToUser("user_xxx")'),console.log("   \u2192 window.migrationService.previewMigration()"),console.log('   \u2192 window.loadingService.show("Loading...")'),console.log("   \u2192 window.loadingService.hide()"),vr(()=>{let e=this.sidebarCollapsed();localStorage.setItem("sidebar-collapsed",JSON.stringify(e))})}getSavedSidebarState(){let e=localStorage.getItem("sidebar-collapsed");return e?JSON.parse(e):!1}toggleSidebar(){this.sidebarCollapsed.update(e=>!e)}selectUser(e){e.password?(this.selectedUser.set(e),this.loginStep.set("password"),this.passwordInput.set(""),this.loginError.set("")):this.userService.login(e)}cancelPassword(){this.loginStep.set("select"),this.selectedUser.set(null)}async verifyLogin(){let e=this.selectedUser();e&&(e.password===this.passwordInput()?(await this.userService.login(e),this.loginStep.set("select"),this.selectedUser.set(null)):this.loginError.set("Incorrect password"))}logout(){this.userService.logout()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Gt({type:n,selectors:[["app-root"]],hostAttrs:[1,"w-full","h-screen","flex","overflow-hidden"],decls:42,vars:29,consts:[["id","app-sidebar"],["id","sidebar-toggle",1,"absolute","-right-3","top-6","z-10","w-6","h-6","bg-primary","rounded-full","flex","items-center","justify-center","shadow-lg","hover:bg-primary-hover","transition-all",3,"click","title"],[1,"material-symbols-outlined","text-white","text-sm",2,"font-size","16px"],[1,"flex","flex-col","mb-8"],[1,"flex","items-center","gap-2","mb-1"],[1,"material-symbols-outlined","text-primary",2,"font-size","32px"],[1,"text-2xl","font-extrabold","tracking-tight","whitespace-nowrap"],[1,"text-sm","text-slate-500","dark:text-text-muted"],["id","user-profile"],["alt","User avatar",1,"w-8","h-8","rounded-full","object-cover",3,"src","title"],[1,"flex","flex-col"],[2,"border-color","#54585e"],["id","main-nav",1,"flex","flex-col","gap-2"],["id","nav-overview","routerLink","/overview","routerLinkActive","bg-primary/10 text-primary-hover dark:text-primary",3,"title"],[1,"material-symbols-outlined","filled"],[1,"font-bold","text-sm"],["id","nav-groceries","routerLink","/groceries","routerLinkActive","bg-primary/10 text-primary-hover dark:text-primary",3,"title"],[1,"material-symbols-outlined","group-hover:text-slate-900","dark:group-hover:text-white","transition-colors"],[1,"font-medium","text-sm","group-hover:text-slate-900","dark:group-hover:text-white","transition-colors"],["id","nav-users","routerLink","/users","routerLinkActive","bg-primary/10 text-primary-hover dark:text-primary",3,"title"],["id","nav-logout",3,"click","title"],[1,"material-symbols-outlined","group-hover:text-red-500","dark:group-hover:text-red-400","transition-colors"],[1,"font-medium","text-sm","group-hover:text-red-500","dark:group-hover:text-red-400","transition-colors"],[1,"flex","flex-col","gap-4","mt-8"],["id","stats-card",1,"p-5","rounded-2xl","bg-surface-dark/40","border","border-border-dark","backdrop-blur-sm"],["title","Items Pending",1,"flex","flex-col","items-center","p-2","rounded-xl","bg-surface-dark/40","border","border-border-dark"],[1,"flex-1","h-screen","flex","flex-col","overflow-hidden"],[1,"fixed","inset-0","z-[100]","bg-[#111317]","flex","items-center","justify-center","p-4"],[1,"text-sm","font-bold","text-white","leading-none"],[1,"text-[10px]","text-text-muted","capitalize"],[1,"flex","justify-between","items-start","mb-2"],[1,"material-symbols-outlined","text-text-muted"],[1,"text-xs","font-bold","text-primary","bg-primary/10","px-2","py-1","rounded-full"],[1,"text-3xl","font-black","text-white","leading-tight","mb-1"],[1,"text-xs","text-text-muted","font-medium"],[1,"material-symbols-outlined","text-text-muted","text-sm"],[1,"text-lg","font-bold","text-white"],[1,"max-w-4xl","w-full","flex","flex-col","items-center","gap-12","animate-in","fade-in","zoom-in","duration-300"],[1,"text-center","space-y-2"],[1,"text-4xl","font-bold","text-white","tracking-tight"],[1,"text-[#9ea7b7]","text-lg"],[1,"flex","flex-wrap","justify-center","gap-8"],[1,"bg-[#1a202e]","border","border-[#292e38]","rounded-2xl","p-8","w-full","max-w-sm","shadow-2xl","animate-in","zoom-in-95","duration-200"],[1,"group","flex","flex-col","items-center","gap-4","transition-transform","hover:scale-105","outline-none","focus:scale-105"],[1,"group","flex","flex-col","items-center","gap-4","transition-transform","hover:scale-105","outline-none","focus:scale-105",3,"click"],[1,"size-24","rounded-full","border-2","border-[#292e38]","group-hover:border-[#2060df]","overflow-hidden","transition-colors","relative"],[1,"w-full","h-full","object-cover",3,"src"],[1,"absolute","inset-0","bg-black/40","flex","items-center","justify-center","opacity-0","group-hover:opacity-100","transition-opacity"],[1,"text-lg","font-medium","text-[#9ea7b7]","group-hover:text-white","transition-colors"],[1,"material-symbols-outlined","text-white"],[1,"flex","flex-col","items-center","gap-4","mb-6"],[1,"size-16","rounded-full","border","border-[#292e38]","overflow-hidden"],[1,"text-white","font-bold","text-xl"],[1,"space-y-4"],["type","password","placeholder","Enter Password","autofocus","",1,"w-full","bg-[#111317]","border","border-[#292e38]","rounded-lg","px-4","py-3","text-white","focus:outline-none","focus:border-[#2060df]","focus:ring-1","focus:ring-[#2060df]","transition-all","text-center","placeholder-[#586173]",3,"input","keyup.enter","value"],[1,"text-red-400","text-xs","mt-2","text-center"],[1,"w-full","py-3","rounded-lg","bg-[#2060df]","text-white","font-bold","hover:bg-[#2060df]/90","transition-colors",3,"click"],[1,"w-full","py-3","rounded-lg","border","border-[#3b4250]","text-[#9ea7b7]","font-bold","hover:text-white","hover:border-white","transition-colors",3,"click"]],template:function(t,r){if(t&1&&(x(0,"aside",0)(1,"button",1),Y("click",function(){return r.toggleSidebar()}),x(2,"span",2),P(3),R()(),x(4,"div")(5,"div",3)(6,"div",4)(7,"span",5),P(8,"checklist"),R(),le(9,Vne,2,0,"h1",6),R(),le(10,Lne,2,0,"p",7),R(),x(11,"div",8),Pt(12,"img",9),le(13,Une,5,2,"div",10),R(),Pt(14,"br")(15,"hr",11)(16,"br"),x(17,"nav",12)(18,"a",13)(19,"span",14),P(20,"dashboard"),R(),le(21,jne,2,0,"span",15),R(),x(22,"a",16)(23,"span",17),P(24,"shopping_cart"),R(),le(25,Bne,2,0,"span",18),R(),x(26,"a",19)(27,"span",17),P(28,"group"),R(),le(29,$ne,2,0,"span",18),R(),x(30,"button",20),Y("click",function(){return r.logout()}),x(31,"span",21),P(32,"logout"),R(),le(33,Hne,2,0,"span",22),R()(),x(34,"div",23),le(35,zne,10,1,"div",24)(36,qne,5,1,"div",25),R()()(),x(37,"div",26),Pt(38,"router-outlet"),R(),Pt(39,"app-dialog")(40,"app-loading"),le(41,Jne,9,1,"div",27)),t&2){let i,s;dt(r.sidebarCollapsed()?"sidebar sidebar-collapsed":"sidebar sidebar-expanded"),F(),Le("title",r.sidebarCollapsed()?"Expand sidebar":"Collapse sidebar"),F(2),st(" ",r.sidebarCollapsed()?"chevron_right":"chevron_left"," "),F(6),ue(r.sidebarCollapsed()?-1:9),F(),ue(r.sidebarCollapsed()?-1:10),F(),dt(r.sidebarCollapsed()?"flex items-center justify-center p-2 rounded-full bg-surface-dark cursor-pointer hover:bg-border-dark transition-colors":"flex items-center gap-3 p-4 rounded-full bg-surface-dark cursor-pointer hover:bg-border-dark transition-colors"),F(),Le("src",((i=r.currentUser())==null?null:i.avatarUrl)||"https://ui-avatars.com/api/?name=Guest&background=random",ir)("title",((s=r.currentUser())==null?null:s.name)||"Guest"),F(),ue(r.sidebarCollapsed()?-1:13),F(5),dt(r.sidebarCollapsed()?"nav-item nav-item-collapsed":"nav-item"),Le("title",r.sidebarCollapsed()?"Overview":""),F(3),ue(r.sidebarCollapsed()?-1:21),F(),dt(r.sidebarCollapsed()?"nav-item nav-item-collapsed":"nav-item"),Le("title",r.sidebarCollapsed()?"Groceries":""),F(3),ue(r.sidebarCollapsed()?-1:25),F(),dt(r.sidebarCollapsed()?"nav-item nav-item-collapsed":"nav-item"),Le("title",r.sidebarCollapsed()?"Users":""),F(3),ue(r.sidebarCollapsed()?-1:29),F(),dt(r.sidebarCollapsed()?"nav-item nav-item-collapsed text-left mt-auto":"nav-item text-left mt-auto"),Le("title",r.sidebarCollapsed()?"Log Out":""),F(3),ue(r.sidebarCollapsed()?-1:33),F(2),ue(r.sidebarCollapsed()?36:35),F(6),ue(!r.currentUser()&&!r.loading()?41:-1)}},dependencies:[sp,nd,GC,tI,Hw],styles:['.sidebar[_ngcontent-%COMP%]{height:100vh;flex-shrink:0;border-right-width:1px;border-right-style:solid;border-color:#e2e8f0;background-color:#fff;display:flex;flex-direction:column;justify-content:space-between;padding:1.5rem;position:relative;transition:width .3s cubic-bezier(.4,0,.2,1),padding .3s cubic-bezier(.4,0,.2,1)}.dark[_nghost-%COMP%]   .sidebar[_ngcontent-%COMP%], .dark   [_nghost-%COMP%]   .sidebar[_ngcontent-%COMP%]{border-color:#292e38;background-color:#111317}.sidebar-expanded[_ngcontent-%COMP%]{width:20rem}.sidebar-collapsed[_ngcontent-%COMP%]{width:5rem;padding-left:1rem;padding-right:1rem}.nav-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;padding:.75rem 1rem;border-radius:9999px;color:#64748b;transition:all .2s ease;width:100%}.nav-item[_ngcontent-%COMP%]:hover{background-color:#f1f5f9}.dark[_nghost-%COMP%]   .nav-item[_ngcontent-%COMP%], .dark   [_nghost-%COMP%]   .nav-item[_ngcontent-%COMP%]{color:#9ea7b7}.dark[_nghost-%COMP%]   .nav-item[_ngcontent-%COMP%]:hover, .dark   [_nghost-%COMP%]   .nav-item[_ngcontent-%COMP%]:hover{background-color:#1e2433}.nav-item-collapsed[_ngcontent-%COMP%]{justify-content:center;padding-left:.5rem;padding-right:.5rem}.nav-item[_ngcontent-%COMP%]   .material-symbols-outlined[_ngcontent-%COMP%]{transition:transform .2s ease}.sidebar-collapsed[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]:hover   .material-symbols-outlined[_ngcontent-%COMP%]{transform:scale(1.1)}#sidebar-toggle[_ngcontent-%COMP%]{transition:transform .3s ease,box-shadow .2s ease;z-index:100}#sidebar-toggle[_ngcontent-%COMP%]:hover{transform:scale(1.1);box-shadow:0 4px 12px #2060df66}#stats-card[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .2s ease}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}#user-profile[_ngcontent-%COMP%]{transition:all .3s cubic-bezier(.4,0,.2,1)}.sidebar-collapsed[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]{position:relative}.sidebar-collapsed[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]:after{content:attr(title);position:absolute;left:100%;top:50%;transform:translateY(-50%);margin-left:.75rem;padding:.5rem .75rem;background:#1a202e;color:#fff;font-size:.75rem;font-weight:500;border-radius:.5rem;white-space:nowrap;opacity:0;pointer-events:none;transition:opacity .2s ease,transform .2s ease;z-index:100;box-shadow:0 4px 12px #0000004d}.sidebar-collapsed[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]:hover:after{opacity:1;transform:translateY(-50%) translate(4px)}.sidebar-collapsed[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]:not([title]):after, .sidebar-collapsed[_ngcontent-%COMP%]   .nav-item[title=""][_ngcontent-%COMP%]:after{display:none}']})};EC(rI,T3).catch(n=>console.error(n));
