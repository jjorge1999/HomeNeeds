var FB=Object.defineProperty,VB=Object.defineProperties;var LB=Object.getOwnPropertyDescriptors;var qR=Object.getOwnPropertySymbols;var UB=Object.prototype.hasOwnProperty,jB=Object.prototype.propertyIsEnumerable;var GR=(n,e,t)=>e in n?FB(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,B=(n,e)=>{for(var t in e||={})UB.call(e,t)&&GR(n,t,e[t]);if(qR)for(var t of qR(e))jB.call(e,t)&&GR(n,t,e[t]);return n},ae=(n,e)=>VB(n,LB(e));var Mn=null,fm=!1,oI=1,BB=null,Hn=Symbol("SIGNAL");function me(n){let e=Mn;return Mn=n,e}function gm(){return Mn}var au={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function $h(n){if(fm)throw new Error("");if(Mn===null)return;Mn.consumerOnSignalRead(n);let e=Mn.producersTail;if(e!==void 0&&e.producer===n)return;let t,r=Mn.recomputing;if(r&&(t=e!==void 0?e.nextProducer:Mn.producers,t!==void 0&&t.producer===n)){Mn.producersTail=t,t.lastReadVersion=n.version;return}let i=n.consumersTail;if(i!==void 0&&i.consumer===Mn&&(!r||zB(i,Mn)))return;let s=lu(Mn),o={producer:n,consumer:Mn,nextProducer:t,prevConsumer:i,lastReadVersion:n.version,nextConsumer:void 0};Mn.producersTail=o,e!==void 0?e.nextProducer=o:Mn.producers=o,s&&YR(n,o)}function WR(){oI++}function aI(n){if(!(lu(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===oI)){if(!n.producerMustRecompute(n)&&!Hh(n)){sI(n);return}n.producerRecomputeValue(n),sI(n)}}function cI(n){if(n.consumers===void 0)return;let e=fm;fm=!0;try{for(let t=n.consumers;t!==void 0;t=t.nextConsumer){let r=t.consumer;r.dirty||$B(r)}}finally{fm=e}}function lI(){return Mn?.consumerAllowSignalWrites!==!1}function $B(n){n.dirty=!0,cI(n),n.consumerMarkedDirty?.(n)}function sI(n){n.dirty=!1,n.lastCleanEpoch=oI}function cu(n){return n&&KR(n),me(n)}function KR(n){n.producersTail=void 0,n.recomputing=!0}function zh(n,e){me(e),n&&QR(n)}function QR(n){n.recomputing=!1;let e=n.producersTail,t=e!==void 0?e.nextProducer:n.producers;if(t!==void 0){if(lu(n))do t=uI(t);while(t!==void 0);e!==void 0?e.nextProducer=void 0:n.producers=void 0}}function Hh(n){for(let e=n.producers;e!==void 0;e=e.nextProducer){let t=e.producer,r=e.lastReadVersion;if(r!==t.version||(aI(t),r!==t.version))return!0}return!1}function hc(n){if(lu(n)){let e=n.producers;for(;e!==void 0;)e=uI(e)}n.producers=void 0,n.producersTail=void 0,n.consumers=void 0,n.consumersTail=void 0}function YR(n,e){let t=n.consumersTail,r=lu(n);if(t!==void 0?(e.nextConsumer=t.nextConsumer,t.nextConsumer=e):(e.nextConsumer=void 0,n.consumers=e),e.prevConsumer=t,n.consumersTail=e,!r)for(let i=n.producers;i!==void 0;i=i.nextProducer)YR(i.producer,i)}function uI(n){let e=n.producer,t=n.nextProducer,r=n.nextConsumer,i=n.prevConsumer;if(n.nextConsumer=void 0,n.prevConsumer=void 0,r!==void 0?r.prevConsumer=i:e.consumersTail=i,i!==void 0)i.nextConsumer=r;else if(e.consumers=r,!lu(e)){let s=e.producers;for(;s!==void 0;)s=uI(s)}return t}function lu(n){return n.consumerIsAlwaysLive||n.consumers!==void 0}function dI(n){BB?.(n)}function zB(n,e){let t=e.producersTail;if(t!==void 0){let r=e.producers;do{if(r===n)return!0;if(r===t)break;r=r.nextProducer}while(r!==void 0)}return!1}function hI(n,e){return Object.is(n,e)}function mm(n,e){let t=Object.create(HB);t.computation=n,e!==void 0&&(t.equal=e);let r=()=>{if(aI(t),$h(t),t.value===pm)throw t.error;return t.value};return r[Hn]=t,dI(t),r}var rI=Symbol("UNSET"),iI=Symbol("COMPUTING"),pm=Symbol("ERRORED"),HB=ae(B({},au),{value:rI,dirty:!0,error:null,equal:hI,kind:"computed",producerMustRecompute(n){return n.value===rI||n.value===iI},producerRecomputeValue(n){if(n.value===iI)throw new Error("");let e=n.value;n.value=iI;let t=cu(n),r,i=!1;try{r=n.computation(),me(null),i=e!==rI&&e!==pm&&r!==pm&&n.equal(e,r)}catch(s){r=pm,n.error=s}finally{zh(n,t)}if(i){n.value=e;return}n.value=r,n.version++}});function qB(){throw new Error}var JR=qB;function XR(n){JR(n)}function fI(n){JR=n}var GB=null;function pI(n,e){let t=Object.create(ym);t.value=n,e!==void 0&&(t.equal=e);let r=()=>ZR(t);return r[Hn]=t,dI(t),[r,o=>qh(t,o),o=>ek(t,o)]}function ZR(n){return $h(n),n.value}function qh(n,e){lI()||XR(n),n.equal(n.value,e)||(n.value=e,WB(n))}function ek(n,e){lI()||XR(n),qh(n,e(n.value))}var ym=ae(B({},au),{equal:hI,value:void 0,kind:"signal"});function WB(n){n.version++,WR(),cI(n),GB?.(n)}function gI(n){let e=me(null);try{return n()}finally{me(e)}}var mI=ae(B({},au),{consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!0,dirty:!0,kind:"effect"});function yI(n){if(n.dirty=!1,n.version>0&&!Hh(n))return;n.version++;let e=cu(n);try{n.cleanup(),n.fn()}finally{zh(n,e)}}function ke(n){return typeof n=="function"}function uu(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var _m=uu(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function fc(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var mt=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let s of t)s.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(ke(r))try{r()}catch(s){e=s instanceof _m?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{tk(s)}catch(o){e=e??[],o instanceof _m?e=[...e,...o.errors]:e.push(o)}}if(e)throw new _m(e)}}add(e){var t;if(e&&e!==this)if(this.closed)tk(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&fc(t,e)}remove(e){let{_finalizers:t}=this;t&&fc(t,e),e instanceof n&&e._removeParent(this)}};mt.EMPTY=(()=>{let n=new mt;return n.closed=!0,n})();var _I=mt.EMPTY;function vm(n){return n instanceof mt||n&&"closed"in n&&ke(n.remove)&&ke(n.add)&&ke(n.unsubscribe)}function tk(n){ke(n)?n():n.unsubscribe()}var ai={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var du={setTimeout(n,e,...t){let{delegate:r}=du;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=du;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function wm(n){du.setTimeout(()=>{let{onUnhandledError:e}=ai;if(e)e(n);else throw n})}function Gh(){}var nk=vI("C",void 0,void 0);function rk(n){return vI("E",void 0,n)}function ik(n){return vI("N",n,void 0)}function vI(n,e,t){return{kind:n,value:e,error:t}}var pc=null;function hu(n){if(ai.useDeprecatedSynchronousErrorHandling){let e=!pc;if(e&&(pc={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=pc;if(pc=null,t)throw r}}else n()}function sk(n){ai.useDeprecatedSynchronousErrorHandling&&pc&&(pc.errorThrown=!0,pc.error=n)}var gc=class extends mt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,vm(e)&&e.add(this)):this.destination=YB}static create(e,t,r){return new Ho(e,t,r)}next(e){this.isStopped?II(ik(e),this):this._next(e)}error(e){this.isStopped?II(rk(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?II(nk,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},KB=Function.prototype.bind;function wI(n,e){return KB.call(n,e)}var bI=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){Im(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){Im(r)}else Im(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Im(t)}}},Ho=class extends gc{constructor(e,t,r){super();let i;if(ke(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let s;this&&ai.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&wI(e.next,s),error:e.error&&wI(e.error,s),complete:e.complete&&wI(e.complete,s)}):i=e}this.destination=new bI(i)}};function Im(n){ai.useDeprecatedSynchronousErrorHandling?sk(n):wm(n)}function QB(n){throw n}function II(n,e){let{onStoppedNotification:t}=ai;t&&du.setTimeout(()=>t(n,e))}var YB={closed:!0,next:Gh,error:QB,complete:Gh};var fu=typeof Symbol=="function"&&Symbol.observable||"@@observable";function ci(n){return n}function CI(...n){return EI(n)}function EI(n){return n.length===0?ci:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var Se=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let s=XB(t)?t:new Ho(t,r,i);return hu(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=ok(r),new r((i,s)=>{let o=new Ho({next:a=>{try{t(a)}catch(c){s(c),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[fu](){return this}pipe(...t){return EI(t)(this)}toPromise(t){return t=ok(t),new t((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return n.create=e=>new n(e),n})();function ok(n){var e;return(e=n??ai.Promise)!==null&&e!==void 0?e:Promise}function JB(n){return n&&ke(n.next)&&ke(n.error)&&ke(n.complete)}function XB(n){return n&&n instanceof gc||JB(n)&&vm(n)}function ZB(n){return ke(n?.lift)}function nt(n){return e=>{if(ZB(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Xe(n,e,t,r,i){return new TI(n,e,t,r,i)}var TI=class extends gc{constructor(e,t,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};var pu={schedule(n){let e=requestAnimationFrame,t=cancelAnimationFrame,{delegate:r}=pu;r&&(e=r.requestAnimationFrame,t=r.cancelAnimationFrame);let i=e(s=>{t=void 0,n(s)});return new mt(()=>t?.(i))},requestAnimationFrame(...n){let{delegate:e}=pu;return(e?.requestAnimationFrame||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){let{delegate:e}=pu;return(e?.cancelAnimationFrame||cancelAnimationFrame)(...n)},delegate:void 0};var ak=uu(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ye=(()=>{class n extends Se{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new bm(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new ak}next(t){hu(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){hu(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){hu(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:s}=this;return r||i?_I:(this.currentObservers=null,s.push(t),new mt(()=>{this.currentObservers=null,fc(s,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:s}=this;r?t.error(i):s&&t.complete()}asObservable(){let t=new Se;return t.source=this,t}}return n.create=(e,t)=>new bm(e,t),n})(),bm=class extends ye{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:_I}};var at=class extends ye{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var SI={now(){return(SI.delegate||Date).now()},delegate:void 0};var Cm=class extends mt{constructor(e,t){super()}schedule(e,t=0){return this}};var Wh={setInterval(n,e,...t){let{delegate:r}=Wh;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=Wh;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var qo=class extends Cm{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,s=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(s,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,r=0){return Wh.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&Wh.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,fc(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var gu=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};gu.now=SI.now;var Go=class extends gu{constructor(e,t=gu.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var Wo=new Go(qo),DI=Wo;var Em=class extends qo{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var Tm=class extends Go{};var xI=new Tm(Em);var Sm=class extends qo{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,r=0){return r!==null&&r>0?super.requestAsyncId(e,t,r):(e.actions.push(this),e._scheduled||(e._scheduled=pu.requestAnimationFrame(()=>e.flush(void 0))))}recycleAsyncId(e,t,r=0){var i;if(r!=null?r>0:this.delay>0)return super.recycleAsyncId(e,t,r);let{actions:s}=e;t!=null&&t===e._scheduled&&((i=s[s.length-1])===null||i===void 0?void 0:i.id)!==t&&(pu.cancelAnimationFrame(t),e._scheduled=void 0)}};var Dm=class extends Go{flush(e){this._active=!0;let t;e?t=e.id:(t=this._scheduled,this._scheduled=void 0);let{actions:r}=this,i;e=e||r.shift();do if(i=e.execute(e.state,e.delay))break;while((e=r[0])&&e.id===t&&r.shift());if(this._active=!1,i){for(;(e=r[0])&&e.id===t&&r.shift();)e.unsubscribe();throw i}}};var xm=new Dm(Sm);var On=new Se(n=>n.complete());function Am(n){return n&&ke(n.schedule)}function AI(n){return n[n.length-1]}function Rm(n){return ke(AI(n))?n.pop():void 0}function $i(n){return Am(AI(n))?n.pop():void 0}function ck(n,e){return typeof AI(n)=="number"?n.pop():e}function RI(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function uk(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{l(r.next(h))}catch(p){o(p)}}function c(h){try{l(r.throw(h))}catch(p){o(p)}}function l(h){h.done?s(h.value):i(h.value).then(a,c)}l((r=r.apply(n,e||[])).next())})}function lk(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function mc(n){return this instanceof mc?(this.v=n,this):new mc(n)}function dk(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(b){return function(k){return Promise.resolve(k).then(b,p)}}function a(b,k){r[b]&&(i[b]=function(O){return new Promise(function(N,z){s.push([b,O,N,z])>1||c(b,O)})},k&&(i[b]=k(i[b])))}function c(b,k){try{l(r[b](k))}catch(O){m(s[0][3],O)}}function l(b){b.value instanceof mc?Promise.resolve(b.value.v).then(h,p):m(s[0][2],b)}function h(b){c("next",b)}function p(b){c("throw",b)}function m(b,k){b(k),s.shift(),s.length&&c(s[0][0],s[0][1])}}function hk(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof lk=="function"?lk(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(s){t[s]=n[s]&&function(o){return new Promise(function(a,c){o=n[s](o),i(a,c,o.done,o.value)})}}function i(s,o,a,c){Promise.resolve(c).then(function(l){s({value:l,done:a})},o)}}var km=n=>n&&typeof n.length=="number"&&typeof n!="function";function Nm(n){return ke(n?.then)}function Pm(n){return ke(n[fu])}function Mm(n){return Symbol.asyncIterator&&ke(n?.[Symbol.asyncIterator])}function Om(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function e5(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Fm=e5();function Vm(n){return ke(n?.[Fm])}function Lm(n){return dk(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield mc(t.read());if(i)return yield mc(void 0);yield yield mc(r)}}finally{t.releaseLock()}})}function Um(n){return ke(n?.getReader)}function Tt(n){if(n instanceof Se)return n;if(n!=null){if(Pm(n))return t5(n);if(km(n))return n5(n);if(Nm(n))return r5(n);if(Mm(n))return fk(n);if(Vm(n))return i5(n);if(Um(n))return s5(n)}throw Om(n)}function t5(n){return new Se(e=>{let t=n[fu]();if(ke(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function n5(n){return new Se(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function r5(n){return new Se(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,wm)})}function i5(n){return new Se(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function fk(n){return new Se(e=>{o5(n,e).catch(t=>e.error(t))})}function s5(n){return fk(Lm(n))}function o5(n,e){var t,r,i,s;return uk(this,void 0,void 0,function*(){try{for(t=hk(n);r=yield t.next(),!r.done;){let o=r.value;if(e.next(o),e.closed)return}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=t.return)&&(yield s.call(t))}finally{if(i)throw i.error}}e.complete()})}function nr(n,e,t,r=0,i=!1){let s=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(s),!i)return s}function Ko(n,e=0){return nt((t,r)=>{t.subscribe(Xe(r,i=>nr(r,n,()=>r.next(i),e),()=>nr(r,n,()=>r.complete(),e),i=>nr(r,n,()=>r.error(i),e)))})}function Qo(n,e=0){return nt((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function pk(n,e){return Tt(n).pipe(Qo(e),Ko(e))}function gk(n,e){return Tt(n).pipe(Qo(e),Ko(e))}function mk(n,e){return new Se(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function yk(n,e){return new Se(t=>{let r;return nr(t,e,()=>{r=n[Fm](),nr(t,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){t.error(o);return}s?t.complete():t.next(i)},0,!0)}),()=>ke(r?.return)&&r.return()})}function jm(n,e){if(!n)throw new Error("Iterable cannot be null");return new Se(t=>{nr(t,e,()=>{let r=n[Symbol.asyncIterator]();nr(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function _k(n,e){return jm(Lm(n),e)}function vk(n,e){if(n!=null){if(Pm(n))return pk(n,e);if(km(n))return mk(n,e);if(Nm(n))return gk(n,e);if(Mm(n))return jm(n,e);if(Vm(n))return yk(n,e);if(Um(n))return _k(n,e)}throw Om(n)}function De(n,e){return e?vk(n,e):Tt(n)}function le(...n){let e=$i(n);return De(n,e)}function Mr(n,e){let t=ke(n)?n:()=>n,r=i=>i.error(t());return new Se(e?i=>e.schedule(r,0,i):r)}function Kh(n){return!!n&&(n instanceof Se||ke(n.lift)&&ke(n.subscribe))}var As=uu(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function Bm(n,e){let t=typeof e=="object";return new Promise((r,i)=>{let s=new Ho({next:o=>{r(o),s.unsubscribe()},error:i,complete:()=>{t?r(e.defaultValue):i(new As)}});n.subscribe(s)})}function wk(n){return n instanceof Date&&!isNaN(n)}function ge(n,e){return nt((t,r)=>{let i=0;t.subscribe(Xe(r,s=>{r.next(n.call(e,s,i++))}))})}var{isArray:a5}=Array;function c5(n,e){return a5(e)?n(...e):n(e)}function $m(n){return ge(e=>c5(n,e))}var{isArray:l5}=Array,{getPrototypeOf:u5,prototype:d5,keys:h5}=Object;function zm(n){if(n.length===1){let e=n[0];if(l5(e))return{args:e,keys:null};if(f5(e)){let t=h5(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function f5(n){return n&&typeof n=="object"&&u5(n)===d5}function Hm(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function kI(...n){let e=$i(n),t=Rm(n),{args:r,keys:i}=zm(n);if(r.length===0)return De([],e);let s=new Se(p5(r,e,i?o=>Hm(i,o):ci));return t?s.pipe($m(t)):s}function p5(n,e,t=ci){return r=>{Ik(e,()=>{let{length:i}=n,s=new Array(i),o=i,a=i;for(let c=0;c<i;c++)Ik(e,()=>{let l=De(n[c],e),h=!1;l.subscribe(Xe(r,p=>{s[c]=p,h||(h=!0,a--),a||r.next(t(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}function Ik(n,e,t){n?nr(t,n,e):e()}function bk(n,e,t,r,i,s,o,a){let c=[],l=0,h=0,p=!1,m=()=>{p&&!c.length&&!l&&e.complete()},b=O=>l<r?k(O):c.push(O),k=O=>{s&&e.next(O),l++;let N=!1;Tt(t(O,h++)).subscribe(Xe(e,z=>{i?.(z),s?b(z):e.next(z)},()=>{N=!0},void 0,()=>{if(N)try{for(l--;c.length&&l<r;){let z=c.shift();o?nr(e,o,()=>k(z)):k(z)}m()}catch(z){e.error(z)}}))};return n.subscribe(Xe(e,b,()=>{p=!0,m()})),()=>{a?.()}}function Fn(n,e,t=1/0){return ke(e)?Fn((r,i)=>ge((s,o)=>e(r,s,i,o))(Tt(n(r,i))),t):(typeof e=="number"&&(t=e),nt((r,i)=>bk(r,i,n,t)))}function Yo(n=1/0){return Fn(ci,n)}function Ck(){return Yo(1)}function mu(...n){return Ck()(De(n,$i(n)))}function Qh(n){return new Se(e=>{Tt(n()).subscribe(e)})}function li(...n){let e=Rm(n),{args:t,keys:r}=zm(n),i=new Se(s=>{let{length:o}=t;if(!o){s.complete();return}let a=new Array(o),c=o,l=o;for(let h=0;h<o;h++){let p=!1;Tt(t[h]).subscribe(Xe(s,m=>{p||(p=!0,l--),a[h]=m},()=>c--,void 0,()=>{(!c||!p)&&(l||s.next(r?Hm(r,a):a),s.complete())}))}});return e?i.pipe($m(e)):i}function qm(n=0,e,t=DI){let r=-1;return e!=null&&(Am(e)?t=e:r=e),new Se(i=>{let s=wk(n)?+n-t.now():n;s<0&&(s=0);let o=0;return t.schedule(function(){i.closed||(i.next(o++),0<=r?this.schedule(void 0,r):i.complete())},s)})}function NI(n=0,e=Wo){return n<0&&(n=0),qm(n,n,e)}function Yh(...n){let e=$i(n),t=ck(n,1/0),r=n;return r.length?r.length===1?Tt(r[0]):Yo(t)(De(r,e)):On}function pr(n,e){return nt((t,r)=>{let i=0;t.subscribe(Xe(r,s=>n.call(e,s,i++)&&r.next(s)))})}function Ek(n){return nt((e,t)=>{let r=!1,i=null,s=null,o=!1,a=()=>{if(s?.unsubscribe(),s=null,r){r=!1;let l=i;i=null,t.next(l)}o&&t.complete()},c=()=>{s=null,o&&t.complete()};e.subscribe(Xe(t,l=>{r=!0,i=l,s||Tt(n(l)).subscribe(s=Xe(t,a,c))},()=>{o=!0,(!r||!s||s.closed)&&t.complete()}))})}function Gm(n,e=Wo){return Ek(()=>qm(n,e))}function Rs(n){return nt((e,t)=>{let r=null,i=!1,s;r=e.subscribe(Xe(t,void 0,void 0,o=>{s=Tt(n(o,Rs(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}function Jh(n,e){return ke(e)?Fn(n,e,1):Fn(n,1)}function PI(n){return nt((e,t)=>{let r=!1;e.subscribe(Xe(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Vn(n){return n<=0?()=>On:nt((e,t)=>{let r=0;e.subscribe(Xe(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Tk(n=g5){return nt((e,t)=>{let r=!1;e.subscribe(Xe(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function g5(){return new As}function yu(n){return nt((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function ks(n,e){let t=arguments.length>=2;return r=>r.pipe(n?pr((i,s)=>n(i,s,r)):ci,Vn(1),t?PI(e):Tk(()=>new As))}function Wm(n){return n<=0?()=>On:nt((e,t)=>{let r=[];e.subscribe(Xe(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function yc(...n){let e=$i(n);return nt((t,r)=>{(e?mu(n,t,e):mu(n,t)).subscribe(r)})}function qn(n,e){return nt((t,r)=>{let i=null,s=0,o=!1,a=()=>o&&!i&&r.complete();t.subscribe(Xe(r,c=>{i?.unsubscribe();let l=0,h=s++;Tt(n(c,h)).subscribe(i=Xe(r,p=>r.next(e?e(c,p,h,l++):p),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function ui(n){return nt((e,t)=>{Tt(n).subscribe(Xe(t,()=>t.complete(),Gh)),!t.closed&&e.subscribe(t)})}function yt(n,e,t){let r=ke(n)||e||t?{next:n,error:e,complete:t}:n;return r?nt((i,s)=>{var o;(o=r.subscribe)===null||o===void 0||o.call(r);let a=!0;i.subscribe(Xe(s,c=>{var l;(l=r.next)===null||l===void 0||l.call(r,c),s.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),s.complete()},c=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,c),s.error(c)},()=>{var c,l;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):ci}var MI;function Km(){return MI}function zi(n){let e=MI;return MI=n,e}var Sk=Symbol("NotFound");function _u(n){return n===Sk||n?.name==="\u0275NotFound"}var vc=class{full;major;minor;patch;constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},KI=new vc("21.0.5");var ty="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",ce=class extends Error{code;constructor(e,t){super(wu(e,t)),this.code=e}};function m5(n){return`NG0${Math.abs(n)}`}function wu(n,e){return`${m5(n)}${e?": "+e:""}`}var Os=globalThis;function ct(n){for(let e in n)if(n[e]===ct)return e;throw Error("")}function kk(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Ps(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(Ps).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let r=t.indexOf(`
`);return r>=0?t.slice(0,r):t}function ny(n,e){return n?e?`${n} ${e}`:n:e||""}var y5=ct({__forward_ref__:ct});function qi(n){return n.__forward_ref__=qi,n.toString=function(){return Ps(this())},n}function Rn(n){return QI(n)?n():n}function QI(n){return typeof n=="function"&&n.hasOwnProperty(y5)&&n.__forward_ref__===qi}function X(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function rr(n){return{providers:n.providers||[],imports:n.imports||[]}}function sf(n){return _5(n,ry)}function YI(n){return sf(n)!==null}function _5(n,e){return n.hasOwnProperty(e)&&n[e]||null}function v5(n){let e=n?.[ry]??null;return e||null}function FI(n){return n&&n.hasOwnProperty(Ym)?n[Ym]:null}var ry=ct({\u0275prov:ct}),Ym=ct({\u0275inj:ct}),re=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=X({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function JI(n){return n&&!!n.\u0275providers}var XI=ct({\u0275cmp:ct}),ZI=ct({\u0275dir:ct}),eb=ct({\u0275pipe:ct}),tb=ct({\u0275mod:ct}),Zh=ct({\u0275fac:ct}),Cc=ct({__NG_ELEMENT_ID__:ct}),Dk=ct({__NG_ENV_ID__:ct});function nb(n){return n[tb]||null}function Fs(n){return n[XI]||null}function rb(n){return n[ZI]||null}function Nk(n){return n[eb]||null}function Ec(n){return typeof n=="string"?n:n==null?"":String(n)}function Pk(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():Ec(n)}var Mk=ct({ngErrorCode:ct}),w5=ct({ngErrorMessage:ct}),I5=ct({ngTokenPath:ct});function ib(n,e){return Ok("",-200,e)}function iy(n,e){throw new ce(-201,!1)}function Ok(n,e,t){let r=new ce(e,n);return r[Mk]=e,r[w5]=n,t&&(r[I5]=t),r}function b5(n){return n[Mk]}var VI;function Fk(){return VI}function Gn(n){let e=VI;return VI=n,e}function sb(n,e,t){let r=sf(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&8)return null;if(e!==void 0)return e;iy(n,"Injector")}var C5={},_c=C5,LI="__NG_DI_FLAG__",UI=class{injector;constructor(e){this.injector=e}retrieve(e,t){let r=wc(t)||0;try{return this.injector.get(e,r&8?null:_c,r)}catch(i){if(_u(i))return i;throw i}}};function E5(n,e=0){let t=Km();if(t===void 0)throw new ce(-203,!1);if(t===null)return sb(n,void 0,e);{let r=T5(e),i=t.retrieve(n,r);if(_u(i)){if(r.optional)return null;throw i}return i}}function Fe(n,e=0){return(Fk()||E5)(Rn(n),e)}function M(n,e){return Fe(n,wc(e))}function wc(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function T5(n){return{optional:!!(n&8),host:!!(n&1),self:!!(n&2),skipSelf:!!(n&4)}}function jI(n){let e=[];for(let t=0;t<n.length;t++){let r=Rn(n[t]);if(Array.isArray(r)){if(r.length===0)throw new ce(900,!1);let i,s=0;for(let o=0;o<r.length;o++){let a=r[o],c=S5(a);typeof c=="number"?c===-1?i=a.token:s|=c:i=a}e.push(Fe(i,s))}else e.push(Fe(r))}return e}function Vk(n,e){return n[LI]=e,n.prototype[LI]=e,n}function S5(n){return n[LI]}function Jo(n,e){let t=n.hasOwnProperty(Zh);return t?n[Zh]:null}function Lk(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],s=e[r];if(t&&(i=t(i),s=t(s)),s!==i)return!1}return!0}function Uk(n){return n.flat(Number.POSITIVE_INFINITY)}function sy(n,e){n.forEach(t=>Array.isArray(t)?sy(t,e):e(t))}function ob(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function of(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function jk(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let s=i-2;n[i]=n[s],i--}n[e]=t,n[e+1]=r}}function oy(n,e,t){let r=Iu(n,e);return r>=0?n[r|1]=t:(r=~r,jk(n,r,e,t)),r}function ay(n,e){let t=Iu(n,e);if(t>=0)return n[t|1]}function Iu(n,e){return D5(n,e,1)}function D5(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let s=r+(i-r>>1),o=n[s<<t];if(e===o)return s<<t;o>e?i=s:r=s+1}return~(i<<t)}var ea={},Wn=[],Tc=new re(""),ab=new re("",-1),cb=new re(""),ef=class{get(e,t=_c){if(t===_c){let i=Ok("",-201);throw i.name="\u0275NotFound",i}return t}};function gr(n){return{\u0275providers:n}}function Bk(n){return gr([{provide:Tc,multi:!0,useValue:n}])}function $k(...n){return{\u0275providers:lb(!0,n),\u0275fromNgModule:!0}}function lb(n,...e){let t=[],r=new Set,i,s=o=>{t.push(o)};return sy(e,o=>{let a=o;Jm(a,s,[],r)&&(i||=[],i.push(a))}),i!==void 0&&zk(i,s),t}function zk(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];ub(i,s=>{e(s,r)})}}function Jm(n,e,t,r){if(n=Rn(n),!n)return!1;let i=null,s=FI(n),o=!s&&Fs(n);if(!s&&!o){let c=n.ngModule;if(s=FI(c),s)i=c;else return!1}else{if(o&&!o.standalone)return!1;i=n}let a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){let c=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let l of c)Jm(l,e,t,r)}}else if(s){if(s.imports!=null&&!a){r.add(i);let l;try{sy(s.imports,h=>{Jm(h,e,t,r)&&(l||=[],l.push(h))})}finally{}l!==void 0&&zk(l,e)}if(!a){let l=Jo(i)||(()=>new i);e({provide:i,useFactory:l,deps:Wn},i),e({provide:cb,useValue:i,multi:!0},i),e({provide:Tc,useValue:()=>Fe(i),multi:!0},i)}let c=s.providers;if(c!=null&&!a){let l=n;ub(c,h=>{e(h,l)})}}else return!1;return i!==n&&n.providers!==void 0}function ub(n,e){for(let t of n)JI(t)&&(t=t.\u0275providers),Array.isArray(t)?ub(t,e):e(t)}var x5=ct({provide:String,useValue:ct});function Hk(n){return n!==null&&typeof n=="object"&&x5 in n}function A5(n){return!!(n&&n.useExisting)}function R5(n){return!!(n&&n.useFactory)}function Ic(n){return typeof n=="function"}function qk(n){return!!n.useClass}var af=new re(""),Qm={},xk={},OI;function bu(){return OI===void 0&&(OI=new ef),OI}var Nt=class{},bc=class extends Nt{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,$I(e,o=>this.processProvider(o)),this.records.set(ab,vu(void 0,this)),i.has("environment")&&this.records.set(Nt,vu(void 0,this));let s=this.records.get(af);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(cb,Wn,{self:!0}))}retrieve(e,t){let r=wc(t)||0;try{return this.get(e,_c,r)}catch(i){if(_u(i))return i;throw i}}destroy(){Xh(this),this._destroyed=!0;let e=me(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),me(e)}}onDestroy(e){return Xh(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){Xh(this);let t=zi(this),r=Gn(void 0),i;try{return e()}finally{zi(t),Gn(r)}}get(e,t=_c,r){if(Xh(this),e.hasOwnProperty(Dk))return e[Dk](this);let i=wc(r),s,o=zi(this),a=Gn(void 0);try{if(!(i&4)){let l=this.records.get(e);if(l===void 0){let h=O5(e)&&sf(e);h&&this.injectableDefInScope(h)?l=vu(BI(e),Qm):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l,i)}let c=i&2?bu():this.parent;return t=i&8&&t===_c?null:t,c.get(e,t)}catch(c){let l=b5(c);throw l===-200||l===-201?new ce(l,null):c}finally{Gn(a),zi(o)}}resolveInjectorInitializers(){let e=me(null),t=zi(this),r=Gn(void 0),i;try{let s=this.get(Tc,Wn,{self:!0});for(let o of s)o()}finally{zi(t),Gn(r),me(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(Ps(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=Rn(e);let t=Ic(e)?e:Rn(e&&e.provide),r=N5(e);if(!Ic(e)&&e.multi===!0){let i=this.records.get(t);i||(i=vu(void 0,Qm,!0),i.factory=()=>jI(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t,r){let i=me(null);try{if(t.value===xk)throw ib(Ps(e));return t.value===Qm&&(t.value=xk,t.value=t.factory(void 0,r)),typeof t.value=="object"&&t.value&&M5(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{me(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=Rn(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function BI(n){let e=sf(n),t=e!==null?e.factory:Jo(n);if(t!==null)return t;if(n instanceof re)throw new ce(204,!1);if(n instanceof Function)return k5(n);throw new ce(204,!1)}function k5(n){if(n.length>0)throw new ce(204,!1);let t=v5(n);return t!==null?()=>t.factory(n):()=>new n}function N5(n){if(Hk(n))return vu(void 0,n.useValue);{let e=db(n);return vu(e,Qm)}}function db(n,e,t){let r;if(Ic(n)){let i=Rn(n);return Jo(i)||BI(i)}else if(Hk(n))r=()=>Rn(n.useValue);else if(R5(n))r=()=>n.useFactory(...jI(n.deps||[]));else if(A5(n))r=(i,s)=>Fe(Rn(n.useExisting),s!==void 0&&s&8?8:void 0);else{let i=Rn(n&&(n.useClass||n.provide));if(P5(n))r=()=>new i(...jI(n.deps));else return Jo(i)||BI(i)}return r}function Xh(n){if(n.destroyed)throw new ce(205,!1)}function vu(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function P5(n){return!!n.deps}function M5(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function O5(n){return typeof n=="function"||typeof n=="object"&&n.ngMetadataName==="InjectionToken"}function $I(n,e){for(let t of n)Array.isArray(t)?$I(t,e):t&&JI(t)?$I(t.\u0275providers,e):e(t)}function dn(n,e){let t;n instanceof bc?(Xh(n),t=n):t=new UI(n);let r,i=zi(t),s=Gn(void 0);try{return e()}finally{zi(i),Gn(s)}}function Gk(){return Fk()!==void 0||Km()!=null}var di=0,_e=1,Ee=2,un=3,Or=4,Fr=5,Cu=6,Eu=7,jt=8,Vs=9,Gi=10,Ct=11,Tu=12,hb=13,Sc=14,mr=15,ta=16,Dc=17,Wi=18,cf=19,fb=20,Ns=21,cy=22,Xo=23,yr=24,xc=25,Ac=26,Bt=27,Wk=1,pb=6,na=7,lf=8,Rc=9,Pt=10;function Ki(n){return Array.isArray(n)&&typeof n[Wk]=="object"}function hi(n){return Array.isArray(n)&&n[Wk]===!0}function gb(n){return(n.flags&4)!==0}function ra(n){return n.componentOffset>-1}function uf(n){return(n.flags&1)===1}function Qi(n){return!!n.template}function Su(n){return(n[Ee]&512)!==0}function kc(n){return(n[Ee]&256)===256}var Kk="svg",Qk="math";function Vr(n){for(;Array.isArray(n);)n=n[di];return n}function mb(n,e){return Vr(e[n])}function fi(n,e){return Vr(e[n.index])}function df(n,e){return n.data[e]}function yb(n,e){return n[e]}function _b(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function Lr(n,e){let t=e[n];return Ki(t)?t:t[di]}function Yk(n){return(n[Ee]&4)===4}function ly(n){return(n[Ee]&128)===128}function Jk(n){return hi(n[un])}function Ur(n,e){return e==null?null:n[e]}function vb(n){n[Dc]=0}function wb(n){n[Ee]&1024||(n[Ee]|=1024,ly(n)&&Nc(n))}function Xk(n,e){for(;n>0;)e=e[Sc],n--;return e}function hf(n){return!!(n[Ee]&9216||n[yr]?.dirty)}function uy(n){n[Gi].changeDetectionScheduler?.notify(8),n[Ee]&64&&(n[Ee]|=1024),hf(n)&&Nc(n)}function Nc(n){n[Gi].changeDetectionScheduler?.notify(0);let e=Zo(n);for(;e!==null&&!(e[Ee]&8192||(e[Ee]|=8192,!ly(e)));)e=Zo(e)}function Ib(n,e){if(kc(n))throw new ce(911,!1);n[Ns]===null&&(n[Ns]=[]),n[Ns].push(e)}function Zk(n,e){if(n[Ns]===null)return;let t=n[Ns].indexOf(e);t!==-1&&n[Ns].splice(t,1)}function Zo(n){let e=n[un];return hi(e)?e[un]:e}function bb(n){return n[Eu]??=[]}function Cb(n){return n.cleanup??=[]}function eN(n,e,t,r){let i=bb(e);i.push(t),n.firstCreatePass&&Cb(n).push(r,i.length-1)}var Ve={lFrame:gN(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var zI=!1;function tN(){return Ve.lFrame.elementDepthCount}function nN(){Ve.lFrame.elementDepthCount++}function Eb(){Ve.lFrame.elementDepthCount--}function Tb(){return Ve.bindingsEnabled}function rN(){return Ve.skipHydrationRootTNode!==null}function Sb(n){return Ve.skipHydrationRootTNode===n}function Db(){Ve.skipHydrationRootTNode=null}function Oe(){return Ve.lFrame.lView}function $t(){return Ve.lFrame.tView}function ee(n){return Ve.lFrame.contextLView=n,n[jt]}function te(n){return Ve.lFrame.contextLView=null,n}function mn(){let n=xb();for(;n!==null&&n.type===64;)n=n.parent;return n}function xb(){return Ve.lFrame.currentTNode}function iN(){let n=Ve.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function Du(n,e){let t=Ve.lFrame;t.currentTNode=n,t.isParent=e}function Ab(){return Ve.lFrame.isParent}function sN(){Ve.lFrame.isParent=!1}function oN(){return Ve.lFrame.contextLView}function Rb(){return zI}function tf(n){let e=zI;return zI=n,e}function aN(){let n=Ve.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function cN(){return Ve.lFrame.bindingIndex}function lN(n){return Ve.lFrame.bindingIndex=n}function Pc(){return Ve.lFrame.bindingIndex++}function dy(n){let e=Ve.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function uN(){return Ve.lFrame.inI18n}function dN(n,e){let t=Ve.lFrame;t.bindingIndex=t.bindingRootIndex=n,hy(e)}function hN(){return Ve.lFrame.currentDirectiveIndex}function hy(n){Ve.lFrame.currentDirectiveIndex=n}function fN(n){let e=Ve.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function kb(){return Ve.lFrame.currentQueryIndex}function fy(n){Ve.lFrame.currentQueryIndex=n}function F5(n){let e=n[_e];return e.type===2?e.declTNode:e.type===1?n[Fr]:null}function Nb(n,e,t){if(t&4){let i=e,s=n;for(;i=i.parent,i===null&&!(t&1);)if(i=F5(s),i===null||(s=s[Sc],i.type&10))break;if(i===null)return!1;e=i,n=s}let r=Ve.lFrame=pN();return r.currentTNode=e,r.lView=n,!0}function py(n){let e=pN(),t=n[_e];Ve.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function pN(){let n=Ve.lFrame,e=n===null?null:n.child;return e===null?gN(n):e}function gN(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function mN(){let n=Ve.lFrame;return Ve.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var Pb=mN;function gy(){let n=mN();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function yN(n){return(Ve.lFrame.contextLView=Xk(n,Ve.lFrame.contextLView))[jt]}function Yi(){return Ve.lFrame.selectedIndex}function ia(n){Ve.lFrame.selectedIndex=n}function my(){let n=Ve.lFrame;return df(n.tView,n.selectedIndex)}function _N(){return Ve.lFrame.currentNamespace}var vN=!0;function yy(){return vN}function _y(n){vN=n}function HI(n,e=null,t=null,r){let i=Mb(n,e,t,r);return i.resolveInjectorInitializers(),i}function Mb(n,e=null,t=null,r,i=new Set){let s=[t||Wn,$k(n)];return r=r||(typeof n=="object"?void 0:Ps(n)),new bc(s,e||bu(),r||null,i)}var wt=class n{static THROW_IF_NOT_FOUND=_c;static NULL=new ef;static create(e,t){if(Array.isArray(e))return HI({name:""},t,e,"");{let r=e.name??"";return HI({name:r},e.parent,e.providers,r)}}static \u0275prov=X({token:n,providedIn:"any",factory:()=>Fe(ab)});static __NG_ELEMENT_ID__=-1},It=new re(""),Kn=(()=>{class n{static __NG_ELEMENT_ID__=V5;static __NG_ENV_ID__=t=>t}return n})(),Xm=class extends Kn{_lView;constructor(e){super(),this._lView=e}get destroyed(){return kc(this._lView)}onDestroy(e){let t=this._lView;return Ib(t,e),()=>Zk(t,e)}};function V5(){return new Xm(Oe())}var wN=!1,Ls=(()=>{class n{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new at(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new Se(t=>{t.next(!1),t.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=X({token:n,providedIn:"root",factory:()=>new n})}return n})(),qI=class extends ye{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,Gk()&&(this.destroyRef=M(Kn,{optional:!0})??void 0,this.pendingTasks=M(Ls,{optional:!0})??void 0)}emit(e){let t=me(null);try{super.next(e)}finally{me(t)}}subscribe(e,t,r){let i=e,s=t||(()=>null),o=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),s=c.error?.bind(c),o=c.complete?.bind(c)}this.__isAsync&&(s=this.wrapInTimeout(s),i&&(i=this.wrapInTimeout(i)),o&&(o=this.wrapInTimeout(o)));let a=super.subscribe({next:i,error:s,complete:o});return e instanceof mt&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(t)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},We=qI;function Zm(...n){}function Ob(n){let e,t;function r(){n=Zm;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function Fb(n){return queueMicrotask(()=>n()),()=>{n=Zm}}var Vb="isAngularZone",nf=Vb+"_ID",L5=0,it=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new We(!1);onMicrotaskEmpty=new We(!1);onStable=new We(!1);onError=new We(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:s=wN}=e;if(typeof Zone>"u")throw new ce(908,!1);Zone.assertZonePatched();let o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!i&&r,o.shouldCoalesceRunChangeDetection=i,o.callbackScheduled=!1,o.scheduleInRootZone=s,B5(o)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Vb)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new ce(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new ce(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,U5,Zm,Zm);try{return s.runTask(o,t,r)}finally{s.cancelTask(o)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},U5={};function Lb(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function j5(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){Ob(()=>{n.callbackScheduled=!1,GI(n),n.isCheckStableRunning=!0,Lb(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),GI(n)}function B5(n){let e=()=>{j5(n)},t=L5++;n._inner=n._inner.fork({name:"angular",properties:{[Vb]:!0,[nf]:t,[nf+t]:!0},onInvokeTask:(r,i,s,o,a,c)=>{if($5(c))return r.invokeTask(s,o,a,c);try{return Ak(n),r.invokeTask(s,o,a,c)}finally{(n.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),Rk(n)}},onInvoke:(r,i,s,o,a,c,l)=>{try{return Ak(n),r.invoke(s,o,a,c,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!z5(c)&&e(),Rk(n)}},onHasTask:(r,i,s,o)=>{r.hasTask(s,o),i===s&&(o.change=="microTask"?(n._hasPendingMicrotasks=o.microTask,GI(n),Lb(n)):o.change=="macroTask"&&(n.hasPendingMacrotasks=o.macroTask))},onHandleError:(r,i,s,o)=>(r.handleError(s,o),n.runOutsideAngular(()=>n.onError.emit(o)),!1)})}function GI(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function Ak(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function Rk(n){n._nesting--,Lb(n)}var rf=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new We;onMicrotaskEmpty=new We;onStable=new We;onError=new We;run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function $5(n){return IN(n,"__ignore_ng_zone__")}function z5(n){return IN(n,"__scheduler_tick__")}function IN(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var Hi=class{_console=console;handleError(e){this._console.error("ERROR",e)}},_r=new re("",{factory:()=>{let n=M(it),e=M(Nt),t;return r=>{n.runOutsideAngular(()=>{e.destroyed&&!t?setTimeout(()=>{throw r}):(t??=e.get(Hi),t.handleError(r))})}}}),bN={provide:Tc,useValue:()=>{let n=M(Hi,{optional:!0})},multi:!0},H5=new re("",{factory:()=>{let n=M(It).defaultView;if(!n)return;let e=M(_r),t=s=>{e(s.reason),s.preventDefault()},r=s=>{s.error?e(s.error):e(new Error(s.message,{cause:s})),s.preventDefault()},i=()=>{n.addEventListener("unhandledrejection",t),n.addEventListener("error",r)};typeof Zone<"u"?Zone.root.run(i):i(),M(Kn).onDestroy(()=>{n.removeEventListener("error",r),n.removeEventListener("unhandledrejection",t)})}});function Ub(){return gr([Bk(()=>void M(H5))])}function he(n,e){let[t,r,i]=pI(n,e?.equal),s=t,o=s[Hn];return s.set=r,s.update=i,s.asReadonly=CN.bind(s),s}function CN(){let n=this[Hn];if(n.readonlyFn===void 0){let e=()=>this();e[Hn]=n,n.readonlyFn=e}return n.readonlyFn}var ff=(()=>{class n{view;node;constructor(t,r){this.view=t,this.node=r}static __NG_ELEMENT_ID__=q5}return n})();function q5(){return new ff(Oe(),mn())}var Ms=class{},pf=new re("",{factory:()=>!0});var jb=new re(""),xu=(()=>{class n{internalPendingTasks=M(Ls);scheduler=M(Ms);errorHandler=M(_r);add(){let t=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(t)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(t))}}run(t){let r=this.add();t().catch(this.errorHandler).finally(r)}static \u0275prov=X({token:n,providedIn:"root",factory:()=>new n})}return n})(),vy=(()=>{class n{static \u0275prov=X({token:n,providedIn:"root",factory:()=>new WI})}return n})(),WI=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let t=e.zone,r=this.queues.get(t);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let r=this.queues.get(t);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[t,r]of this.queues)t===null?e||=this.flushQueue(r):e||=t.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let t=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,t=!0,r.run());return t}},ey=class{[Hn];constructor(e){this[Hn]=e}destroy(){this[Hn].destroy()}};function vr(n,e){let t=e?.injector??M(wt),r=e?.manualCleanup!==!0?t.get(Kn):null,i,s=t.get(ff,null,{optional:!0}),o=t.get(Ms);return s!==null?(i=K5(s.view,o,n),r instanceof Xm&&r._lView===s.view&&(r=null)):i=Q5(n,t.get(vy),o),i.injector=t,r!==null&&(i.onDestroyFns=[r.onDestroy(()=>i.destroy())]),new ey(i)}var EN=ae(B({},mI),{cleanupFns:void 0,zone:null,onDestroyFns:null,run(){let n=tf(!1);try{yI(this)}finally{tf(n)}},cleanup(){if(!this.cleanupFns?.length)return;let n=me(null);try{for(;this.cleanupFns.length;)this.cleanupFns.pop()()}finally{this.cleanupFns=[],me(n)}}}),G5=ae(B({},EN),{consumerMarkedDirty(){this.scheduler.schedule(this),this.notifier.notify(12)},destroy(){if(hc(this),this.onDestroyFns!==null)for(let n of this.onDestroyFns)n();this.cleanup(),this.scheduler.remove(this)}}),W5=ae(B({},EN),{consumerMarkedDirty(){this.view[Ee]|=8192,Nc(this.view),this.notifier.notify(13)},destroy(){if(hc(this),this.onDestroyFns!==null)for(let n of this.onDestroyFns)n();this.cleanup(),this.view[Xo]?.delete(this)}});function K5(n,e,t){let r=Object.create(W5);return r.view=n,r.zone=typeof Zone<"u"?Zone.current:null,r.notifier=e,r.fn=TN(r,t),n[Xo]??=new Set,n[Xo].add(r),r.consumerMarkedDirty(r),r}function Q5(n,e,t){let r=Object.create(G5);return r.fn=TN(r,n),r.scheduler=e,r.notifier=t,r.zone=typeof Zone<"u"?Zone.current:null,r.scheduler.add(r),r.notifier.notify(12),r}function TN(n,e){return()=>{e(t=>(n.cleanupFns??=[]).push(t))}}function qt(n){return gI(n)}function Mu(n){return{toString:n}.toString()}var wy="__parameters__";function r6(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function i6(n,e,t){return Mu(()=>{let r=r6(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;let o=new i(...s);return a.annotation=o,a;function a(c,l,h){let p=c.hasOwnProperty(wy)?c[wy]:Object.defineProperty(c,wy,{value:[]})[wy];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(o),c}}return i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var Ir=Vk(i6("Optional"),8);function s6(n){return typeof n=="function"}function eP(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}var xy=class{previousValue;currentValue;firstChange;constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}},jr=(()=>{let n=()=>tP;return n.ngInherit=!0,n})();function tP(n){return n.type.prototype.ngOnChanges&&(n.setInput=a6),o6}function o6(){let n=rP(this),e=n?.current;if(e){let t=n.previous;if(t===ea)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function a6(n,e,t,r,i){let s=this.declaredInputs[r],o=rP(n)||c6(n,{previous:ea,current:null}),a=o.current||(o.current={}),c=o.previous,l=c[s];a[s]=new xy(l&&l.currentValue,t,c===ea),eP(n,e,i,t)}var nP="__ngSimpleChanges__";function rP(n){return n[nP]||null}function c6(n,e){return n[nP]=e}var SN=[];var lt=function(n,e=null,t){for(let r=0;r<SN.length;r++){let i=SN[r];i(n,e,t)}},Ze=(function(n){return n[n.TemplateCreateStart=0]="TemplateCreateStart",n[n.TemplateCreateEnd=1]="TemplateCreateEnd",n[n.TemplateUpdateStart=2]="TemplateUpdateStart",n[n.TemplateUpdateEnd=3]="TemplateUpdateEnd",n[n.LifecycleHookStart=4]="LifecycleHookStart",n[n.LifecycleHookEnd=5]="LifecycleHookEnd",n[n.OutputStart=6]="OutputStart",n[n.OutputEnd=7]="OutputEnd",n[n.BootstrapApplicationStart=8]="BootstrapApplicationStart",n[n.BootstrapApplicationEnd=9]="BootstrapApplicationEnd",n[n.BootstrapComponentStart=10]="BootstrapComponentStart",n[n.BootstrapComponentEnd=11]="BootstrapComponentEnd",n[n.ChangeDetectionStart=12]="ChangeDetectionStart",n[n.ChangeDetectionEnd=13]="ChangeDetectionEnd",n[n.ChangeDetectionSyncStart=14]="ChangeDetectionSyncStart",n[n.ChangeDetectionSyncEnd=15]="ChangeDetectionSyncEnd",n[n.AfterRenderHooksStart=16]="AfterRenderHooksStart",n[n.AfterRenderHooksEnd=17]="AfterRenderHooksEnd",n[n.ComponentStart=18]="ComponentStart",n[n.ComponentEnd=19]="ComponentEnd",n[n.DeferBlockStateStart=20]="DeferBlockStateStart",n[n.DeferBlockStateEnd=21]="DeferBlockStateEnd",n[n.DynamicComponentStart=22]="DynamicComponentStart",n[n.DynamicComponentEnd=23]="DynamicComponentEnd",n[n.HostBindingsUpdateStart=24]="HostBindingsUpdateStart",n[n.HostBindingsUpdateEnd=25]="HostBindingsUpdateEnd",n})(Ze||{});function l6(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){let o=tP(e);(t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o)}i&&(t.preOrderHooks??=[]).push(0-n,i),s&&((t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s))}function iP(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:h}=s;o&&(n.contentHooks??=[]).push(-t,o),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),h!=null&&(n.destroyHooks??=[]).push(t,h)}}function Cy(n,e,t){sP(n,e,3,t)}function Ey(n,e,t,r){(n[Ee]&3)===t&&sP(n,e,t,r)}function Bb(n,e){let t=n[Ee];(t&3)===e&&(t&=16383,t+=1,n[Ee]=t)}function sP(n,e,t,r){let i=r!==void 0?n[Dc]&65535:0,s=r??-1,o=e.length-1,a=0;for(let c=i;c<o;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(n[Dc]+=65536),(a<s||s==-1)&&(u6(n,t,e,c),n[Dc]=(n[Dc]&4294901760)+c+2),c++}function DN(n,e){lt(Ze.LifecycleHookStart,n,e);let t=me(null);try{e.call(n)}finally{me(t),lt(Ze.LifecycleHookEnd,n,e)}}function u6(n,e,t,r){let i=t[r]<0,s=t[r+1],o=i?-t[r]:t[r],a=n[o];i?n[Ee]>>14<n[Dc]>>16&&(n[Ee]&3)===e&&(n[Ee]+=16384,DN(a,s)):DN(a,s)}var Ru=-1,Oc=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,r,i){this.factory=e,this.name=i,this.canSeeViewProviders=t,this.injectImpl=r}};function d6(n){return(n.flags&8)!==0}function h6(n){return(n.flags&16)!==0}function f6(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let s=t[r++],o=t[r++],a=t[r++];n.setAttribute(e,o,a,s)}else{let s=i,o=t[++r];p6(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),r++}}return r}function oP(n){return n===3||n===4||n===6}function p6(n){return n.charCodeAt(0)===64}function ku(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?xN(n,t,i,null,e[++r]):xN(n,t,i,null,null))}}return n}function xN(n,e,t,r,i){let s=0,o=n.length;if(e===-1)o=-1;else for(;s<n.length;){let a=n[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<n.length;){let a=n[s];if(typeof a=="number")break;if(a===t){i!==null&&(n[s+1]=i);return}s++,i!==null&&s++}o!==-1&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),i!==null&&n.splice(s++,0,i)}function aP(n){return n!==Ru}function Ay(n){return n&32767}function g6(n){return n>>16}function Ry(n,e){let t=g6(n),r=e;for(;t>0;)r=r[Sc],t--;return r}var Xb=!0;function ky(n){let e=Xb;return Xb=n,e}var m6=256,cP=m6-1,lP=5,y6=0,Ji={};function _6(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(Cc)&&(r=t[Cc]),r==null&&(r=t[Cc]=y6++);let i=r&cP,s=1<<i;e.data[n+(i>>lP)]|=s}function Ny(n,e){let t=uP(n,e);if(t!==-1)return t;let r=e[_e];r.firstCreatePass&&(n.injectorIndex=e.length,$b(r.data,n),$b(e,null),$b(r.blueprint,null));let i=SC(n,e),s=n.injectorIndex;if(aP(i)){let o=Ay(i),a=Ry(i,e),c=a[_e].data;for(let l=0;l<8;l++)e[s+l]=a[o+l]|c[o+l]}return e[s+8]=i,s}function $b(n,e){n.push(0,0,0,0,0,0,0,0,e)}function uP(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function SC(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=gP(i),r===null)return Ru;if(t++,i=i[Sc],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return Ru}function Zb(n,e,t){_6(n,e,t)}function v6(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let r=t.length,i=0;for(;i<r;){let s=t[i];if(oP(s))break;if(s===0)i=i+2;else if(typeof s=="number")for(i++;i<r&&typeof t[i]=="string";)i++;else{if(s===e)return t[i+1];i=i+2}}}return null}function dP(n,e,t){if(t&8||n!==void 0)return n;iy(e,"NodeInjector")}function hP(n,e,t,r){if(t&8&&r===void 0&&(r=null),(t&3)===0){let i=n[Vs],s=Gn(void 0);try{return i?i.get(e,r,t&8):sb(e,r,t&8)}finally{Gn(s)}}return dP(r,e,t)}function fP(n,e,t,r=0,i){if(n!==null){if(e[Ee]&2048&&!(r&2)){let o=C6(n,e,t,r,Ji);if(o!==Ji)return o}let s=pP(n,e,t,r,Ji);if(s!==Ji)return s}return hP(e,t,r,i)}function pP(n,e,t,r,i){let s=I6(t);if(typeof s=="function"){if(!Nb(e,n,r))return r&1?dP(i,t,r):hP(e,t,r,i);try{let o;if(o=s(r),o==null&&!(r&8))iy(t);else return o}finally{Pb()}}else if(typeof s=="number"){let o=null,a=uP(n,e),c=Ru,l=r&1?e[mr][Fr]:null;for((a===-1||r&4)&&(c=a===-1?SC(n,e):e[a+8],c===Ru||!RN(r,!1)?a=-1:(o=e[_e],a=Ay(c),e=Ry(c,e)));a!==-1;){let h=e[_e];if(AN(s,a,h.data)){let p=w6(a,e,t,o,r,l);if(p!==Ji)return p}c=e[a+8],c!==Ru&&RN(r,e[_e].data[a+8]===l)&&AN(s,a,e)?(o=h,a=Ay(c),e=Ry(c,e)):a=-1}}return i}function w6(n,e,t,r,i,s){let o=e[_e],a=o.data[n+8],c=r==null?ra(a)&&Xb:r!=o&&(a.type&3)!==0,l=i&1&&s===a,h=Ty(a,o,t,c,l);return h!==null?_f(e,o,h,a,i):Ji}function Ty(n,e,t,r,i){let s=n.providerIndexes,o=e.data,a=s&1048575,c=n.directiveStart,l=n.directiveEnd,h=s>>20,p=r?a:a+h,m=i?a+h:l;for(let b=p;b<m;b++){let k=o[b];if(b<c&&t===k||b>=c&&k.type===t)return b}if(i){let b=o[c];if(b&&Qi(b)&&b.type===t)return c}return null}function _f(n,e,t,r,i){let s=n[t],o=e.data;if(s instanceof Oc){let a=s;if(a.resolving){let b=Pk(o[t]);throw ib(b)}let c=ky(a.canSeeViewProviders);a.resolving=!0;let l=o[t].type||o[t],h,p=a.injectImpl?Gn(a.injectImpl):null,m=Nb(n,r,0);try{s=n[t]=a.factory(void 0,i,o,n,r),e.firstCreatePass&&t>=r.directiveStart&&l6(t,o[t],e)}finally{p!==null&&Gn(p),ky(c),a.resolving=!1,Pb()}}return s}function I6(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(Cc)?n[Cc]:void 0;return typeof e=="number"?e>=0?e&cP:b6:e}function AN(n,e,t){let r=1<<n;return!!(t[e+(n>>lP)]&r)}function RN(n,e){return!(n&2)&&!(n&1&&e)}var Mc=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return fP(this._tNode,this._lView,e,wc(r),t)}};function b6(){return new Mc(mn(),Oe())}function js(n){return Mu(()=>{let e=n.prototype.constructor,t=e[Zh]||eC(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let s=i[Zh]||eC(i);if(s&&s!==t)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function eC(n){return QI(n)?()=>{let e=eC(Rn(n));return e&&e()}:Jo(n)}function C6(n,e,t,r,i){let s=n,o=e;for(;s!==null&&o!==null&&o[Ee]&2048&&!Su(o);){let a=pP(s,o,t,r|2,Ji);if(a!==Ji)return a;let c=s.parent;if(!c){let l=o[fb];if(l){let h=l.get(t,Ji,r);if(h!==Ji)return h}c=gP(o),o=o[Sc]}s=c}return i}function gP(n){let e=n[_e],t=e.type;return t===2?e.declTNode:t===1?n[Fr]:null}function Ef(n){return v6(mn(),n)}function E6(){return Ou(mn(),Oe())}function Ou(n,e){return new zt(fi(n,e))}var zt=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=E6}return n})();function T6(n){return n instanceof zt?n.nativeElement:n}function S6(){return this._results[Symbol.iterator]()}var Py=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new ye}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;let r=Uk(e);(this._changesDetected=!Lk(this._results,r,t))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=S6};function mP(n){return(n.flags&128)===128}var DC=(function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n})(DC||{}),yP=new Map,D6=0;function x6(){return D6++}function A6(n){yP.set(n[cf],n)}function tC(n){yP.delete(n[cf])}var kN="__ngContext__";function Nu(n,e){Ki(e)?(n[kN]=e[cf],A6(e)):n[kN]=e}function _P(n){return wP(n[Tu])}function vP(n){return wP(n[Or])}function wP(n){for(;n!==null&&!hi(n);)n=n[Or];return n}var R6;function xC(n){R6=n}var Fu=new re("",{factory:()=>k6}),k6="ng";var Wy=new re(""),Bs=new re("",{providedIn:"platform",factory:()=>"unknown"});var Ky=new re("",{factory:()=>M(It).body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var IP="r";var bP="di";var CP=!1,EP=new re("",{factory:()=>CP});var N6=(n,e,t,r)=>{};function P6(n,e,t,r){N6(n,e,t,r)}function AC(n){return(n.flags&32)===32}var M6=()=>null;function TP(n,e,t=!1){return M6(n,e,t)}function SP(n,e){let t=n.contentQueries;if(t!==null){let r=me(null);try{for(let i=0;i<t.length;i+=2){let s=t[i],o=t[i+1];if(o!==-1){let a=n.data[o];fy(s),a.contentQueries(2,e[o],o)}}}finally{me(r)}}}function nC(n,e,t){fy(0);let r=me(null);try{e(n,t)}finally{me(r)}}function DP(n,e,t){if(gb(e)){let r=me(null);try{let i=e.directiveStart,s=e.directiveEnd;for(let o=i;o<s;o++){let a=n.data[o];if(a.contentQueries){let c=t[o];a.contentQueries(1,c,o)}}}finally{me(r)}}}var mi=(function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n[n.ExperimentalIsolatedShadowDom=4]="ExperimentalIsolatedShadowDom",n})(mi||{});var Iy;function O6(){if(Iy===void 0&&(Iy=null,Os.trustedTypes))try{Iy=Os.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Iy}function NN(n){return O6()?.createScriptURL(n)||n}var My=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${ty})`}};function Tf(n){return n instanceof My?n.changingThisBreaksApplicationSecurity:n}function RC(n,e){let t=xP(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${ty})`)}return t===e}function xP(n){return n instanceof My&&n.getTypeName()||null}var F6=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function AP(n){return n=String(n),n.match(F6)?n:"unsafe:"+n}function V6(n,e){return n.createText(e)}function L6(n,e,t){n.setValue(e,t)}function RP(n,e,t){return n.createElement(e,t)}function Oy(n,e,t,r,i){n.insertBefore(e,t,r,i)}function kP(n,e,t){n.appendChild(e,t)}function PN(n,e,t,r,i){r!==null?Oy(n,e,t,r,i):kP(n,e,t)}function NP(n,e,t,r){n.removeChild(null,e,t,r)}function U6(n,e,t){n.setAttribute(e,"style",t)}function j6(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function PP(n,e,t){let{mergedAttrs:r,classes:i,styles:s}=t;r!==null&&f6(n,e,r),i!==null&&j6(n,e,i),s!==null&&U6(n,e,s)}var Qy=(function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n})(Qy||{});function ir(n){let e=OP();return e?e.sanitize(Qy.URL,n)||"":RC(n,"URL")?Tf(n):AP(Ec(n))}function MP(n){let e=OP();if(e)return NN(e.sanitize(Qy.RESOURCE_URL,n)||"");if(RC(n,"ResourceURL"))return NN(Tf(n));throw new ce(904,!1)}function B6(n,e){return e==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||e==="href"&&(n==="base"||n==="link")?MP:ir}function kC(n,e,t){return B6(e,t)(n)}function OP(){let n=Oe();return n&&n[Gi].sanitizer}function FP(n){return n instanceof Function?n():n}function $6(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let s=e.length;if(i+s===r||n.charCodeAt(i+s)<=32)return i}t=i+1}}var VP="ng-template";function z6(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&$6(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(NC(n))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&typeof(s=e[i])=="string";)if(s.toLowerCase()===t)return!0}return!1}function NC(n){return n.type===4&&n.value!==VP}function H6(n,e,t){let r=n.type===4&&!t?VP:n.value;return e===r}function q6(n,e,t){let r=4,i=n.attrs,s=i!==null?K6(i):0,o=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!o&&!pi(r)&&!pi(c))return!1;if(o&&pi(c))continue;o=!1,r=c|r&1;continue}if(!o)if(r&4){if(r=2|r&1,c!==""&&!H6(n,c,t)||c===""&&e.length===1){if(pi(r))return!1;o=!0}}else if(r&8){if(i===null||!z6(n,i,c,t)){if(pi(r))return!1;o=!0}}else{let l=e[++a],h=G6(c,i,NC(n),t);if(h===-1){if(pi(r))return!1;o=!0;continue}if(l!==""){let p;if(h>s?p="":p=i[h+1].toLowerCase(),r&2&&l!==p){if(pi(r))return!1;o=!0}}}}return pi(r)||o}function pi(n){return(n&1)===0}function G6(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let s=!1;for(;i<e.length;){let o=e[i];if(o===n)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return Q6(e,n)}function W6(n,e,t=!1){for(let r=0;r<e.length;r++)if(q6(n,e[r],t))return!0;return!1}function K6(n){for(let e=0;e<n.length;e++){let t=n[e];if(oP(t))return e}return n.length}function Q6(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function MN(n,e){return n?":not("+e.trim()+")":e}function Y6(n){let e=n[0],t=1,r=2,i="",s=!1;for(;t<n.length;){let o=n[t];if(typeof o=="string")if(r&2){let a=n[++t];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+o:r&4&&(i+=" "+o);else i!==""&&!pi(o)&&(e+=MN(s,i),i=""),r=o,s=s||!pi(r);t++}return i!==""&&(e+=MN(s,i)),e}function J6(n){return n.map(Y6).join(",")}function X6(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let s=n[r];if(typeof s=="string")i===2?s!==""&&e.push(s,n[++r]):i===8&&t.push(s);else{if(!pi(i))break;i=s}r++}return t.length&&e.push(1,...t),e}var sr={};function PC(n,e,t,r,i,s,o,a,c,l,h){let p=Bt+r,m=p+i,b=Z6(p,m),k=typeof l=="function"?l():l;return b[_e]={type:n,blueprint:b,template:t,queries:null,viewQuery:a,declTNode:e,data:b.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:c,consts:k,incompleteFirstPass:!1,ssrId:h}}function Z6(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:sr);return t}function e9(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=PC(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function MC(n,e,t,r,i,s,o,a,c,l,h){let p=e.blueprint.slice();return p[di]=i,p[Ee]=r|4|128|8|64|1024,(l!==null||n&&n[Ee]&2048)&&(p[Ee]|=2048),vb(p),p[un]=p[Sc]=n,p[jt]=t,p[Gi]=o||n&&n[Gi],p[Ct]=a||n&&n[Ct],p[Vs]=c||n&&n[Vs]||null,p[Fr]=s,p[cf]=x6(),p[Cu]=h,p[fb]=l,p[mr]=e.type==2?n[mr]:p,p}function t9(n,e,t){let r=fi(e,n),i=e9(t),s=n[Gi].rendererFactory,o=OC(n,MC(n,i,null,LP(t),r,e,null,s.createRenderer(r,t),null,null,null));return n[e.index]=o}function LP(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function UP(n,e,t,r){if(t===0)return-1;let i=e.length;for(let s=0;s<t;s++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function OC(n,e){return n[Tu]?n[hb][Or]=e:n[Tu]=e,n[hb]=e,e}function V(n=1){jP($t(),Oe(),Yi()+n,!1)}function jP(n,e,t,r){if(!r)if((e[Ee]&3)===3){let s=n.preOrderCheckHooks;s!==null&&Cy(e,s,t)}else{let s=n.preOrderHooks;s!==null&&Ey(e,s,0,t)}ia(t)}var Yy=(function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n})(Yy||{});function rC(n,e,t,r){let i=me(null);try{let[s,o,a]=n.inputs[t],c=null;(o&Yy.SignalBased)!==0&&(c=e[s][Hn]),c!==null&&c.transformFn!==void 0?r=c.transformFn(r):a!==null&&(r=a.call(e,r)),n.setInput!==null?n.setInput(e,c,r,t,s):eP(e,c,s,r)}finally{me(i)}}var Xi=(function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n})(Xi||{}),n9;function FC(n,e){return n9(n,e)}var Fc=new Set,Jy=(function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n})(Jy||{}),jc=new re(""),ON=new Set;function oa(n){ON.has(n)||(ON.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var VC=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=X({token:n,providedIn:"root",factory:()=>new n})}return n})(),BP=[0,1,2,3],$P=(()=>{class n{ngZone=M(it);scheduler=M(Ms);errorHandler=M(Hi,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){M(jc,{optional:!0})}execute(){let t=this.sequences.size>0;t&&lt(Ze.AfterRenderHooksStart),this.executing=!0;for(let r of BP)for(let i of this.sequences)if(!(i.erroredOrDestroyed||!i.hooks[r]))try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let s=i.hooks[r];return s(i.pipelinedValue)},i.snapshot))}catch(s){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(s)}this.executing=!1;for(let r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(let r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),t&&lt(Ze.AfterRenderHooksEnd)}register(t){let{view:r}=t;r!==void 0?((r[xc]??=[]).push(t),Nc(r),r[Ee]|=8192):this.executing?this.deferredRegistrations.add(t):this.addSequence(t)}addSequence(t){this.sequences.add(t),this.scheduler.notify(7)}unregister(t){this.executing&&this.sequences.has(t)?(t.erroredOrDestroyed=!0,t.pipelinedValue=void 0,t.once=!0):(this.sequences.delete(t),this.deferredRegistrations.delete(t))}maybeTrace(t,r){return r?r.run(Jy.AFTER_NEXT_RENDER,t):t()}static \u0275prov=X({token:n,providedIn:"root",factory:()=>new n})}return n})(),Fy=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,t,r,i,s,o=null){this.impl=e,this.hooks=t,this.view=r,this.once=i,this.snapshot=o,this.unregisterOnDestroy=s?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let e=this.view?.[xc];e&&(this.view[xc]=e.filter(t=>t!==this))}};function Bc(n,e){let t=e?.injector??M(wt);return oa("NgAfterNextRender"),i9(n,t,e,!0)}function r9(n){return n instanceof Function?[void 0,void 0,n,void 0]:[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function i9(n,e,t,r){let i=e.get(VC);i.impl??=e.get($P);let s=e.get(jc,null,{optional:!0}),o=t?.manualCleanup!==!0?e.get(Kn):null,a=e.get(ff,null,{optional:!0}),c=new Fy(i.impl,r9(n),a?.view,r,o,s?.snapshot(null));return i.impl.register(c),c}var zP=new re("",{factory:()=>({queue:new Set,isScheduled:!1,scheduler:null,injector:M(Nt)})});function HP(n,e,t){let r=n.get(zP);if(Array.isArray(e))for(let i of e)r.queue.add(i),t?.detachedLeaveAnimationFns?.push(i);else r.queue.add(e),t?.detachedLeaveAnimationFns?.push(e);r.scheduler&&r.scheduler(n)}function s9(n,e){let t=n.get(zP);if(e.detachedLeaveAnimationFns){for(let r of e.detachedLeaveAnimationFns)t.queue.delete(r);e.detachedLeaveAnimationFns=void 0}}function o9(n,e){for(let[t,r]of e)HP(n,r.animateFns)}function FN(n,e,t,r){let i=n?.[Ac]?.enter;e!==null&&i&&i.has(t.index)&&o9(r,i)}function Au(n,e,t,r,i,s,o,a){if(i!=null){let c,l=!1;hi(i)?c=i:Ki(i)&&(l=!0,i=i[di]);let h=Vr(i);n===0&&r!==null?(FN(a,r,s,t),o==null?kP(e,r,h):Oy(e,r,h,o||null,!0)):n===1&&r!==null?(FN(a,r,s,t),Oy(e,r,h,o||null,!0)):n===2?VN(a,s,t,p=>{NP(e,h,l,p)}):n===3&&VN(a,s,t,()=>{e.destroyNode(h)}),c!=null&&v9(e,n,t,c,s,r,o)}}function a9(n,e){qP(n,e),e[di]=null,e[Fr]=null}function c9(n,e,t,r,i,s){r[di]=i,r[Fr]=e,Zy(n,r,t,1,i,s)}function qP(n,e){e[Gi].changeDetectionScheduler?.notify(9),Zy(n,e,e[Ct],2,null,null)}function l9(n){let e=n[Tu];if(!e)return zb(n[_e],n);for(;e;){let t=null;if(Ki(e))t=e[Tu];else{let r=e[Pt];r&&(t=r)}if(!t){for(;e&&!e[Or]&&e!==n;)Ki(e)&&zb(e[_e],e),e=e[un];e===null&&(e=n),Ki(e)&&zb(e[_e],e),t=e&&e[Or]}e=t}}function LC(n,e){let t=n[Rc],r=t.indexOf(e);t.splice(r,1)}function Xy(n,e){if(kc(e))return;let t=e[Ct];t.destroyNode&&Zy(n,e,t,3,null,null),l9(e)}function zb(n,e){if(kc(e))return;let t=me(null);try{e[Ee]&=-129,e[Ee]|=256,e[yr]&&hc(e[yr]),h9(n,e),d9(n,e),e[_e].type===1&&e[Ct].destroy();let r=e[ta];if(r!==null&&hi(e[un])){r!==e[un]&&LC(r,e);let i=e[Wi];i!==null&&i.detachView(n)}tC(e)}finally{me(t)}}function VN(n,e,t,r){let i=n?.[Ac];if(i==null||i.leave==null||!i.leave.has(e.index))return r(!1);n&&Fc.add(n),HP(t,()=>{if(i.leave&&i.leave.has(e.index)){let o=i.leave.get(e.index),a=[];if(o){for(let c=0;c<o.animateFns.length;c++){let l=o.animateFns[c],{promise:h}=l();a.push(h)}i.detachedLeaveAnimationFns=void 0}i.running=Promise.allSettled(a),u9(n,r)}else n&&Fc.delete(n),r(!1)},i)}function u9(n,e){let t=n[Ac]?.running;if(t){t.then(()=>{n[Ac].running=void 0,Fc.delete(n),e(!0)});return}e(!1)}function d9(n,e){let t=n.cleanup,r=e[Eu];if(t!==null)for(let o=0;o<t.length-1;o+=2)if(typeof t[o]=="string"){let a=t[o+3];a>=0?r[a]():r[-a].unsubscribe(),o+=2}else{let a=r[t[o+1]];t[o].call(a)}r!==null&&(e[Eu]=null);let i=e[Ns];if(i!==null){e[Ns]=null;for(let o=0;o<i.length;o++){let a=i[o];a()}}let s=e[Xo];if(s!==null){e[Xo]=null;for(let o of s)o.destroy()}}function h9(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof Oc)){let s=t[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=i[s[o]],c=s[o+1];lt(Ze.LifecycleHookStart,a,c);try{c.call(a)}finally{lt(Ze.LifecycleHookEnd,a,c)}}else{lt(Ze.LifecycleHookStart,i,s);try{s.call(i)}finally{lt(Ze.LifecycleHookEnd,i,s)}}}}}function f9(n,e,t){return p9(n,e.parent,t)}function p9(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[di];if(ra(r)){let{encapsulation:i}=n.data[r.directiveStart+r.componentOffset];if(i===mi.None||i===mi.Emulated)return null}return fi(r,t)}function g9(n,e,t){return y9(n,e,t)}function m9(n,e,t){return n.type&40?fi(n,t):null}var y9=m9,LN;function UC(n,e,t,r){let i=f9(n,r,e),s=e[Ct],o=r.parent||e[Fr],a=g9(o,r,e);if(i!=null)if(Array.isArray(t))for(let c=0;c<t.length;c++)PN(s,i,t[c],a,!1);else PN(s,i,t,a,!1);LN!==void 0&&LN(s,r,e,t,i)}function mf(n,e){if(e!==null){let t=e.type;if(t&3)return fi(e,n);if(t&4)return iC(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return mf(n,r);{let i=n[e.index];return hi(i)?iC(-1,i):Vr(i)}}else{if(t&128)return mf(n,e.next);if(t&32)return FC(e,n)()||Vr(n[e.index]);{let r=GP(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Zo(n[mr]);return mf(i,r)}else return mf(n,e.next)}}}return null}function GP(n,e){if(e!==null){let r=n[mr][Fr],i=e.projection;return r.projection[i]}return null}function iC(n,e){let t=Pt+n+1;if(t<e.length){let r=e[t],i=r[_e].firstChild;if(i!==null)return mf(r,i)}return e[na]}function jC(n,e,t,r,i,s,o){for(;t!=null;){let a=r[Vs];if(t.type===128){t=t.next;continue}let c=r[t.index],l=t.type;if(o&&e===0&&(c&&Nu(Vr(c),r),t.flags|=2),!AC(t))if(l&8)jC(n,e,t.child,r,i,s,!1),Au(e,n,a,i,c,t,s,r);else if(l&32){let h=FC(t,r),p;for(;p=h();)Au(e,n,a,i,p,t,s,r);Au(e,n,a,i,c,t,s,r)}else l&16?_9(n,e,r,t,i,s):Au(e,n,a,i,c,t,s,r);t=o?t.projectionNext:t.next}}function Zy(n,e,t,r,i,s){jC(t,r,n.firstChild,e,i,s,!1)}function _9(n,e,t,r,i,s){let o=t[mr],c=o[Fr].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let h=c[l];Au(e,n,t[Vs],i,h,r,s,t)}else{let l=c,h=o[un];mP(r)&&(l.flags|=128),jC(n,e,l,h,i,s,!0)}}function v9(n,e,t,r,i,s,o){let a=r[na],c=Vr(r);a!==c&&Au(e,n,t,s,a,i,o);for(let l=Pt;l<r.length;l++){let h=r[l];Zy(h[_e],h,n,e,s,a)}}function w9(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let s=r.indexOf("-")===-1?void 0:Xi.DashCase;i==null?n.removeStyle(t,r,s):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=Xi.Important),n.setStyle(t,r,i,s))}}function WP(n,e,t,r,i){let s=Yi(),o=r&2;try{ia(-1),o&&e.length>Bt&&jP(n,e,Bt,!1);let a=o?Ze.TemplateUpdateStart:Ze.TemplateCreateStart;lt(a,i,t),t(r,i)}finally{ia(s);let a=o?Ze.TemplateUpdateEnd:Ze.TemplateCreateEnd;lt(a,i,t)}}function BC(n,e,t){D9(n,e,t),(t.flags&64)===64&&x9(n,e,t)}function e_(n,e,t=fi){let r=e.localNames;if(r!==null){let i=e.index+1;for(let s=0;s<r.length;s+=2){let o=r[s+1],a=o===-1?t(e,n):n[o];n[i++]=a}}}function I9(n,e,t,r){let s=r.get(EP,CP)||t===mi.ShadowDom||t===mi.ExperimentalIsolatedShadowDom,o=n.selectRootElement(e,s);return b9(o),o}function b9(n){C9(n)}var C9=()=>null;function E9(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function KP(n,e,t,r,i,s){let o=e[_e];if($C(n,o,e,t,r)){ra(n)&&S9(e,n.index);return}n.type&3&&(t=E9(t)),T9(n,e,t,r,i,s)}function T9(n,e,t,r,i,s){if(n.type&3){let o=fi(n,e);r=s!=null?s(r,n.value||"",t):r,i.setProperty(o,t,r)}else n.type&12}function S9(n,e){let t=Lr(e,n);t[Ee]&16||(t[Ee]|=64)}function D9(n,e,t){let r=t.directiveStart,i=t.directiveEnd;ra(t)&&t9(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||Ny(t,e);let s=t.initialInputs;for(let o=r;o<i;o++){let a=n.data[o],c=_f(e,n,o,t);if(Nu(c,e),s!==null&&N9(e,o-r,c,a,t,s),Qi(a)){let l=Lr(t.index,e);l[jt]=_f(e,n,o,t)}}}function x9(n,e,t){let r=t.directiveStart,i=t.directiveEnd,s=t.index,o=hN();try{ia(s);for(let a=r;a<i;a++){let c=n.data[a],l=e[a];hy(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&A9(c,l)}}finally{ia(-1),hy(o)}}function A9(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function QP(n,e){let t=n.directiveRegistry,r=null;if(t)for(let i=0;i<t.length;i++){let s=t[i];W6(e,s.selectors,!1)&&(r??=[],Qi(s)?r.unshift(s):r.push(s))}return r}function R9(n,e,t,r,i,s){let o=fi(n,e);k9(e[Ct],o,s,n.value,t,r,i)}function k9(n,e,t,r,i,s,o){if(s==null)n.removeAttribute(e,i,t);else{let a=o==null?Ec(s):o(s,r||"",i);n.setAttribute(e,i,a,t)}}function N9(n,e,t,r,i,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;a+=2){let c=o[a],l=o[a+1];rC(r,t,c,l)}}function YP(n,e,t,r,i){let s=Bt+t,o=e[_e],a=i(o,e,n,r,t);e[s]=a,Du(n,!0);let c=n.type===2;return c?(PP(e[Ct],a,n),(tN()===0||uf(n))&&Nu(a,e),nN()):Nu(a,e),yy()&&(!c||!AC(n))&&UC(o,e,a,n),n}function JP(n){let e=n;return Ab()?sN():(e=e.parent,Du(e,!1)),e}function P9(n,e){let t=n[Vs];if(!t)return;let r;try{r=t.get(_r,null)}catch{r=null}r?.(e)}function $C(n,e,t,r,i){let s=n.inputs?.[r],o=n.hostDirectiveInputs?.[r],a=!1;if(o)for(let c=0;c<o.length;c+=2){let l=o[c],h=o[c+1],p=e.data[l];rC(p,t[l],h,i),a=!0}if(s)for(let c of s){let l=t[c],h=e.data[c];rC(h,l,r,i),a=!0}return a}function M9(n,e){let t=Lr(e,n),r=t[_e];O9(r,t);let i=t[di];i!==null&&t[Cu]===null&&(t[Cu]=TP(i,t[Vs])),lt(Ze.ComponentStart);try{zC(r,t,t[jt])}finally{lt(Ze.ComponentEnd,t[jt])}}function O9(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function zC(n,e,t){py(e);try{let r=n.viewQuery;r!==null&&nC(1,r,t);let i=n.template;i!==null&&WP(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[Wi]?.finishViewCreation(n),n.staticContentQueries&&SP(n,e),n.staticViewQueries&&nC(2,n.viewQuery,t);let s=n.components;s!==null&&F9(e,s)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[Ee]&=-5,gy()}}function F9(n,e){for(let t=0;t<e.length;t++)M9(n,e[t])}function t_(n,e,t,r){let i=me(null);try{let s=e.tView,a=n[Ee]&4096?4096:16,c=MC(n,s,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=n[e.index];c[ta]=l;let h=n[Wi];return h!==null&&(c[Wi]=h.createEmbeddedView(s)),zC(s,c,t),c}finally{me(i)}}function vf(n,e){return!e||e.firstChild===null||mP(n)}function wf(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let s=e[t.index];s!==null&&r.push(Vr(s)),hi(s)&&XP(s,r);let o=t.type;if(o&8)wf(n,e,t.child,r);else if(o&32){let a=FC(t,e),c;for(;c=a();)r.push(c)}else if(o&16){let a=GP(e,t);if(Array.isArray(a))r.push(...a);else{let c=Zo(e[mr]);wf(c[_e],c,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function XP(n,e){for(let t=Pt;t<n.length;t++){let r=n[t],i=r[_e].firstChild;i!==null&&wf(r[_e],r,i,e)}n[na]!==n[di]&&e.push(n[na])}function ZP(n){if(n[xc]!==null){for(let e of n[xc])e.impl.addSequence(e);n[xc].length=0}}var eM=[];function V9(n){return n[yr]??L9(n)}function L9(n){let e=eM.pop()??Object.create(j9);return e.lView=n,e}function U9(n){n.lView[yr]!==n&&(n.lView=null,eM.push(n))}var j9=ae(B({},au),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{Nc(n.lView)},consumerOnSignalRead(){this.lView[yr]=this}});function B9(n){let e=n[yr]??Object.create($9);return e.lView=n,e}var $9=ae(B({},au),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=Zo(n.lView);for(;e&&!tM(e[_e]);)e=Zo(e);e&&wb(e)},consumerOnSignalRead(){this.lView[yr]=this}});function tM(n){return n.type!==2}function nM(n){if(n[Xo]===null)return;let e=!0;for(;e;){let t=!1;for(let r of n[Xo])r.dirty&&(t=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=t&&!!(n[Ee]&8192)}}var z9=100;function rM(n,e=0){let r=n[Gi].rendererFactory,i=!1;i||r.begin?.();try{H9(n,e)}finally{i||r.end?.()}}function H9(n,e){let t=Rb();try{tf(!0),sC(n,e);let r=0;for(;hf(n);){if(r===z9)throw new ce(103,!1);r++,sC(n,1)}}finally{tf(t)}}function q9(n,e,t,r){if(kc(e))return;let i=e[Ee],s=!1,o=!1;py(e);let a=!0,c=null,l=null;s||(tM(n)?(l=V9(e),c=cu(l)):gm()===null?(a=!1,l=B9(e),c=cu(l)):e[yr]&&(hc(e[yr]),e[yr]=null));try{vb(e),lN(n.bindingStartIndex),t!==null&&WP(n,e,t,2,r);let h=(i&3)===3;if(!s)if(h){let b=n.preOrderCheckHooks;b!==null&&Cy(e,b,null)}else{let b=n.preOrderHooks;b!==null&&Ey(e,b,0,null),Bb(e,0)}if(o||G9(e),nM(e),iM(e,0),n.contentQueries!==null&&SP(n,e),!s)if(h){let b=n.contentCheckHooks;b!==null&&Cy(e,b)}else{let b=n.contentHooks;b!==null&&Ey(e,b,1),Bb(e,1)}K9(n,e);let p=n.components;p!==null&&oM(e,p,0);let m=n.viewQuery;if(m!==null&&nC(2,m,r),!s)if(h){let b=n.viewCheckHooks;b!==null&&Cy(e,b)}else{let b=n.viewHooks;b!==null&&Ey(e,b,2),Bb(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[cy]){for(let b of e[cy])b();e[cy]=null}s||(ZP(e),e[Ee]&=-73)}catch(h){throw s||Nc(e),h}finally{l!==null&&(zh(l,c),a&&U9(l)),gy()}}function iM(n,e){for(let t=_P(n);t!==null;t=vP(t))for(let r=Pt;r<t.length;r++){let i=t[r];sM(i,e)}}function G9(n){for(let e=_P(n);e!==null;e=vP(e)){if(!(e[Ee]&2))continue;let t=e[Rc];for(let r=0;r<t.length;r++){let i=t[r];wb(i)}}}function W9(n,e,t){lt(Ze.ComponentStart);let r=Lr(e,n);try{sM(r,t)}finally{lt(Ze.ComponentEnd,r[jt])}}function sM(n,e){ly(n)&&sC(n,e)}function sC(n,e){let r=n[_e],i=n[Ee],s=n[yr],o=!!(e===0&&i&16);if(o||=!!(i&64&&e===0),o||=!!(i&1024),o||=!!(s?.dirty&&Hh(s)),o||=!1,s&&(s.dirty=!1),n[Ee]&=-9217,o)q9(r,n,r.template,n[jt]);else if(i&8192){let a=me(null);try{nM(n),iM(n,1);let c=r.components;c!==null&&oM(n,c,1),ZP(n)}finally{me(a)}}}function oM(n,e,t){for(let r=0;r<e.length;r++)W9(n,e[r],t)}function K9(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)ia(~i);else{let s=i,o=t[++r],a=t[++r];dN(o,s);let c=e[s];lt(Ze.HostBindingsUpdateStart,c);try{a(2,c)}finally{lt(Ze.HostBindingsUpdateEnd,c)}}}}finally{ia(-1)}}function HC(n,e){let t=Rb()?64:1088;for(n[Gi].changeDetectionScheduler?.notify(e);n;){n[Ee]|=t;let r=Zo(n);if(Su(n)&&!r)return n;n=r}return null}function aM(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function cM(n,e){let t=Pt+e;if(t<n.length)return n[t]}function n_(n,e,t,r=!0){let i=e[_e];if(Q9(i,e,n,t),r){let o=iC(t,n),a=e[Ct],c=a.parentNode(n[na]);c!==null&&c9(i,n[Fr],a,e,c,o)}let s=e[Cu];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function lM(n,e){let t=If(n,e);return t!==void 0&&Xy(t[_e],t),t}function If(n,e){if(n.length<=Pt)return;let t=Pt+e,r=n[t];if(r){let i=r[ta];i!==null&&i!==n&&LC(i,r),e>0&&(n[t-1][Or]=r[Or]);let s=of(n,Pt+e);a9(r[_e],r);let o=s[Wi];o!==null&&o.detachView(s[_e]),r[un]=null,r[Or]=null,r[Ee]&=-129}return r}function Q9(n,e,t,r){let i=Pt+r,s=t.length;r>0&&(t[i-1][Or]=e),r<s-Pt?(e[Or]=t[i],ob(t,Pt+r,e)):(t.push(e),e[Or]=null),e[un]=t;let o=e[ta];o!==null&&t!==o&&uM(o,e);let a=e[Wi];a!==null&&a.insertView(n),uy(e),e[Ee]|=128}function uM(n,e){let t=n[Rc],r=e[un];if(Ki(r))n[Ee]|=2;else{let i=r[un][mr];e[mr]!==i&&(n[Ee]|=2)}t===null?n[Rc]=[e]:t.push(e)}var sa=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,t=e[_e];return wf(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t}get context(){return this._lView[jt]}set context(e){this._lView[jt]=e}get destroyed(){return kc(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[un];if(hi(e)){let t=e[lf],r=t?t.indexOf(this):-1;r>-1&&(If(e,r),of(t,r))}this._attachedToViewContainer=!1}Xy(this._lView[_e],this._lView)}onDestroy(e){Ib(this._lView,e)}markForCheck(){HC(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[Ee]&=-129}reattach(){uy(this._lView),this._lView[Ee]|=128}detectChanges(){this._lView[Ee]|=1024,rM(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ce(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Su(this._lView),t=this._lView[ta];t!==null&&!e&&LC(t,this._lView),qP(this._lView[_e],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new ce(902,!1);this._appRef=e;let t=Su(this._lView),r=this._lView[ta];r!==null&&!t&&uM(r,this._lView),uy(this._lView)}};var Us=(()=>{class n{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=Y9;constructor(t,r,i){this._declarationLView=t,this._declarationTContainer=r,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,r){return this.createEmbeddedViewImpl(t,r)}createEmbeddedViewImpl(t,r,i){let s=t_(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:r,dehydratedView:i});return new sa(s)}}return n})();function Y9(){return qC(mn(),Oe())}function qC(n,e){return n.type&4?new Us(e,n,Ou(n,e)):null}function Sf(n,e,t,r,i){let s=n.data[e];if(s===null)s=J9(n,e,t,r,i),uN()&&(s.flags|=32);else if(s.type&64){s.type=t,s.value=r,s.attrs=i;let o=iN();s.injectorIndex=o===null?-1:o.injectorIndex}return Du(s,!0),s}function J9(n,e,t,r,i){let s=xb(),o=Ab(),a=o?s:s&&s.parent,c=n.data[e]=Z9(n,a,t,e,r,i);return X9(n,c,s,o),c}function X9(n,e,t,r){n.firstChild===null&&(n.firstChild=e),t!==null&&(r?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function Z9(n,e,t,r,i,s){let o=e?e.injectorIndex:-1,a=0;return rN()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,fieldIndex:-1,customControlIndex:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function e$(n){let e=n[pb]??[],r=n[un][Ct],i=[];for(let s of e)s.data[bP]!==void 0?i.push(s):t$(s,r);n[pb]=i}function t$(n,e){let t=0,r=n.firstChild;if(r){let i=n.data[IP];for(;t<i;){let s=r.nextSibling;NP(e,r,!1),r=s,t++}}}var n$=()=>null,r$=()=>null;function oC(n,e){return n$(n,e)}function dM(n,e,t){return r$(n,e,t)}var hM=class{},r_=class{},aC=class{resolveComponentFactory(e){throw new ce(917,!1)}},Df=class{static NULL=new aC},wr=class{},yi=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>i$()}return n})();function i$(){let n=Oe(),e=mn(),t=Lr(e.index,n);return(Ki(t)?t:n)[Ct]}var fM=(()=>{class n{static \u0275prov=X({token:n,providedIn:"root",factory:()=>null})}return n})();var Sy={},cC=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){let i=this.injector.get(e,Sy,r);return i!==Sy||t===Sy?i:this.parentInjector.get(e,t,r)}};function Vy(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)i=ny(i,a);else if(s==2){let c=a,l=e[++o];r=ny(r,c+": "+l+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function je(n,e=0){let t=Oe();if(t===null)return Fe(n,e);let r=mn();return fP(r,t,Rn(n),e)}function pM(n,e,t,r,i){let s=r===null?null:{"":-1},o=i(n,t);if(o!==null){let a=o,c=null,l=null;for(let h of o)if(h.resolveHostDirectives!==null){[a,c,l]=h.resolveHostDirectives(o);break}a$(n,e,t,a,s,c,l)}s!==null&&r!==null&&s$(t,r,s)}function s$(n,e,t){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let s=t[e[i+1]];if(s==null)throw new ce(-301,!1);r.push(e[i],s)}}function o$(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function a$(n,e,t,r,i,s,o){let a=r.length,c=null;for(let m=0;m<a;m++){let b=r[m];c===null&&Qi(b)&&(c=b,o$(n,t,m)),Zb(Ny(t,e),n,b.type)}f$(t,n.data.length,a),c?.viewProvidersResolver&&c.viewProvidersResolver(c);for(let m=0;m<a;m++){let b=r[m];b.providersResolver&&b.providersResolver(b)}let l=!1,h=!1,p=UP(n,e,a,null);a>0&&(t.directiveToIndex=new Map);for(let m=0;m<a;m++){let b=r[m];if(t.mergedAttrs=ku(t.mergedAttrs,b.hostAttrs),l$(n,t,e,p,b),h$(p,b,i),o!==null&&o.has(b)){let[O,N]=o.get(b);t.directiveToIndex.set(b.type,[p,O+t.directiveStart,N+t.directiveStart])}else(s===null||!s.has(b))&&t.directiveToIndex.set(b.type,p);b.contentQueries!==null&&(t.flags|=4),(b.hostBindings!==null||b.hostAttrs!==null||b.hostVars!==0)&&(t.flags|=64);let k=b.type.prototype;!l&&(k.ngOnChanges||k.ngOnInit||k.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),l=!0),!h&&(k.ngOnChanges||k.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),h=!0),p++}c$(n,t,s)}function c$(n,e,t){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=n.data[r];if(t===null||!t.has(i))UN(0,e,i,r),UN(1,e,i,r),BN(e,r,!1);else{let s=t.get(i);jN(0,e,s,r),jN(1,e,s,r),BN(e,r,!0)}}}function UN(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let s in i)if(i.hasOwnProperty(s)){let o;n===0?o=e.inputs??={}:o=e.outputs??={},o[s]??=[],o[s].push(r),gM(e,s)}}function jN(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let s in i)if(i.hasOwnProperty(s)){let o=i[s],a;n===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[o]??=[],a[o].push(r,s),gM(e,o)}}function gM(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function BN(n,e,t){let{attrs:r,inputs:i,hostDirectiveInputs:s}=n;if(r===null||!t&&i===null||t&&s===null||NC(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let o=null,a=0;for(;a<r.length;){let c=r[a];if(c===0){a+=4;continue}else if(c===5){a+=2;continue}else if(typeof c=="number")break;if(!t&&i.hasOwnProperty(c)){let l=i[c];for(let h of l)if(h===e){o??=[],o.push(c,r[a+1]);break}}else if(t&&s.hasOwnProperty(c)){let l=s[c];for(let h=0;h<l.length;h+=2)if(l[h]===e){o??=[],o.push(l[h+1],r[a+1]);break}}a+=2}n.initialInputs??=[],n.initialInputs.push(o)}function l$(n,e,t,r,i){n.data[r]=i;let s=i.factory||(i.factory=Jo(i.type,!0)),o=new Oc(s,Qi(i),je,null);n.blueprint[r]=o,t[r]=o,u$(n,e,r,UP(n,t,i.hostVars,sr),i)}function u$(n,e,t,r,i){let s=i.hostBindings;if(s){let o=n.hostBindingOpCodes;o===null&&(o=n.hostBindingOpCodes=[]);let a=~e.index;d$(o)!=a&&o.push(a),o.push(t,r,s)}}function d$(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function h$(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Qi(e)&&(t[""]=n)}}function f$(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function mM(n,e,t,r,i,s,o,a){let c=e[_e],l=c.consts,h=Ur(l,o),p=Sf(c,n,t,r,h);return s&&pM(c,e,p,Ur(l,a),i),p.mergedAttrs=ku(p.mergedAttrs,p.attrs),p.attrs!==null&&Vy(p,p.attrs,!1),p.mergedAttrs!==null&&Vy(p,p.mergedAttrs,!0),c.queries!==null&&c.queries.elementStart(c,p),p}function yM(n,e){iP(n,e),gb(e)&&n.queries.elementEnd(e)}function p$(n,e,t,r,i,s){let o=e.consts,a=Ur(o,i),c=Sf(e,n,t,r,a);if(c.mergedAttrs=ku(c.mergedAttrs,c.attrs),s!=null){let l=Ur(o,s);c.localNames=[];for(let h=0;h<l.length;h+=2)c.localNames.push(l[h],-1)}return c.attrs!==null&&Vy(c,c.attrs,!1),c.mergedAttrs!==null&&Vy(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function g$(n,e,t){return n[e]=t}function Zi(n,e,t){if(t===sr)return!1;let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function _M(n,e,t,r){let i=Zi(n,e,t);return Zi(n,e+1,r)||i}function Dy(n,e,t){return function r(i){let s=ra(n)?Lr(n.index,e):e;HC(s,5);let o=e[jt],a=$N(e,o,t,i),c=r.__ngNextListenerFn__;for(;c;)a=$N(e,o,c,i)&&a,c=c.__ngNextListenerFn__;return a}}function $N(n,e,t,r){let i=me(null);try{return lt(Ze.OutputStart,e,t),t(r)!==!1}catch(s){return P9(n,s),!1}finally{lt(Ze.OutputEnd,e,t),me(i)}}function vM(n,e,t,r,i,s,o,a){let c=uf(n),l=!1,h=null;if(!r&&c&&(h=y$(e,t,s,n.index)),h!==null){let p=h.__ngLastListenerFn__||h;p.__ngNextListenerFn__=o,h.__ngLastListenerFn__=o,l=!0}else{let p=fi(n,t),m=r?r(p):p;P6(t,m,s,a);let b=i.listen(m,s,a);if(!m$(s)){let k=r?O=>r(Vr(O[n.index])):n.index;wM(k,e,t,s,a,b,!1)}}return l}function m$(n){return n.startsWith("animation")||n.startsWith("transition")}function y$(n,e,t,r){let i=n.cleanup;if(i!=null)for(let s=0;s<i.length-1;s+=2){let o=i[s];if(o===t&&i[s+1]===r){let a=e[Eu],c=i[s+2];return a&&a.length>c?a[c]:null}typeof o=="string"&&(s+=2)}return null}function wM(n,e,t,r,i,s,o){let a=e.firstCreatePass?Cb(e):null,c=bb(t),l=c.length;c.push(i,s),a&&a.push(r,n,l,(l+1)*(o?-1:1))}function zN(n,e,t,r,i,s){let o=e[t],a=e[_e],l=a.data[t].outputs[r],p=o[l].subscribe(s);wM(n.index,a,e,i,s,p,!0)}var lC=Symbol("BINDING");var Ly=class extends Df{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=Fs(e);return new Vc(t,this.ngModule)}};function _$(n){return Object.keys(n).map(e=>{let[t,r,i]=n[e],s={propName:t,templateName:e,isSignal:(r&Yy.SignalBased)!==0};return i&&(s.transform=i),s})}function v$(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function w$(n,e,t){let r=e instanceof Nt?e:e?.injector;return r&&n.getStandaloneInjector!==null&&(r=n.getStandaloneInjector(r)||r),r?new cC(t,r):t}function I$(n){let e=n.get(wr,null);if(e===null)throw new ce(407,!1);let t=n.get(fM,null),r=n.get(Ms,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:r,ngReflect:!1}}function b$(n,e){let t=IM(n);return RP(e,t,t==="svg"?Kk:t==="math"?Qk:null)}function IM(n){return(n.selectors[0][0]||"div").toLowerCase()}var Vc=class extends r_{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=_$(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=v$(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=J6(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,r,i,s,o){lt(Ze.DynamicComponentStart);let a=me(null);try{let c=this.componentDef,l=C$(r,c,o,s),h=w$(c,i||this.ngModule,e),p=I$(h),m=p.rendererFactory.createRenderer(null,c),b=r?I9(m,r,c.encapsulation,h):b$(c,m),k=o?.some(HN)||s?.some(z=>typeof z!="function"&&z.bindings.some(HN)),O=MC(null,l,null,512|LP(c),null,null,p,m,h,null,TP(b,h,!0));O[Bt]=b,py(O);let N=null;try{let z=mM(Bt,O,2,"#host",()=>l.directiveRegistry,!0,0);PP(m,b,z),Nu(b,O),BC(l,O,z),DP(l,z,O),yM(l,z),t!==void 0&&T$(z,this.ngContentSelectors,t),N=Lr(z.index,O),O[jt]=N[jt],zC(l,O,null)}catch(z){throw N!==null&&tC(N),tC(O),z}finally{lt(Ze.DynamicComponentEnd),gy()}return new Uy(this.componentType,O,!!k)}finally{me(a)}}};function C$(n,e,t,r){let i=n?["ng-version","21.0.5"]:X6(e.selectors[0]),s=null,o=null,a=0;if(t)for(let h of t)a+=h[lC].requiredVars,h.create&&(h.targetIdx=0,(s??=[]).push(h)),h.update&&(h.targetIdx=0,(o??=[]).push(h));if(r)for(let h=0;h<r.length;h++){let p=r[h];if(typeof p!="function")for(let m of p.bindings){a+=m[lC].requiredVars;let b=h+1;m.create&&(m.targetIdx=b,(s??=[]).push(m)),m.update&&(m.targetIdx=b,(o??=[]).push(m))}}let c=[e];if(r)for(let h of r){let p=typeof h=="function"?h:h.type,m=rb(p);c.push(m)}return PC(0,null,E$(s,o),1,a,c,null,null,null,[i],null)}function E$(n,e){return!n&&!e?null:t=>{if(t&1&&n)for(let r of n)r.create();if(t&2&&e)for(let r of e)r.update()}}function HN(n){let e=n[lC].kind;return e==="input"||e==="twoWay"}var Uy=class extends hM{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t,r){super(),this._rootLView=t,this._hasInputBindings=r,this._tNode=df(t[_e],Bt),this.location=Ou(this._tNode,t),this.instance=Lr(this._tNode.index,t)[jt],this.hostView=this.changeDetectorRef=new sa(t,void 0),this.componentType=e}setInput(e,t){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let i=this._rootLView,s=$C(r,i[_e],i,e,t);this.previousInputValues.set(e,t);let o=Lr(r.index,i);HC(o,1)}get injector(){return new Mc(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function T$(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let s=t[i];r.push(s!=null&&s.length?Array.from(s):null)}}var es=(()=>{class n{static __NG_ELEMENT_ID__=S$}return n})();function S$(){let n=mn();return CM(n,Oe())}var D$=es,bM=class extends D${_lContainer;_hostTNode;_hostLView;constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Ou(this._hostTNode,this._hostLView)}get injector(){return new Mc(this._hostTNode,this._hostLView)}get parentInjector(){let e=SC(this._hostTNode,this._hostLView);if(aP(e)){let t=Ry(e,this._hostLView),r=Ay(e),i=t[_e].data[r+8];return new Mc(i,t)}else return new Mc(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=qN(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-Pt}createEmbeddedView(e,t,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let o=oC(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},s,o);return this.insertImpl(a,i,vf(this._hostTNode,o)),a}createComponent(e,t,r,i,s,o,a){let c=e&&!s6(e),l;if(c)l=t;else{let N=t||{};l=N.index,r=N.injector,i=N.projectableNodes,s=N.environmentInjector||N.ngModuleRef,o=N.directives,a=N.bindings}let h=c?e:new Vc(Fs(e)),p=r||this.parentInjector;if(!s&&h.ngModule==null){let z=(c?p:this.parentInjector).get(Nt,null);z&&(s=z)}let m=Fs(h.componentType??{}),b=oC(this._lContainer,m?.id??null),k=b?.firstChild??null,O=h.create(p,i,k,s,o,a);return this.insertImpl(O.hostView,l,vf(this._hostTNode,b)),O}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(Jk(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[un],l=new bM(c,c[Fr],c[un]);l.detach(l.indexOf(e))}}let s=this._adjustIndex(t),o=this._lContainer;return n_(o,i,s,r),e.attachToViewContainerRef(),ob(Hb(o),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=qN(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=If(this._lContainer,t);r&&(of(Hb(this._lContainer),t),Xy(r[_e],r))}detach(e){let t=this._adjustIndex(e,-1),r=If(this._lContainer,t);return r&&of(Hb(this._lContainer),t)!=null?new sa(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function qN(n){return n[lf]}function Hb(n){return n[lf]||(n[lf]=[])}function CM(n,e){let t,r=e[n.index];return hi(r)?t=r:(t=aM(r,e,null,n),e[n.index]=t,OC(e,t)),A$(t,e,n,r),new bM(t,n,e)}function x$(n,e){let t=n[Ct],r=t.createComment(""),i=fi(e,n),s=t.parentNode(i);return Oy(t,s,r,t.nextSibling(i),!1),r}var A$=N$,R$=()=>!1;function k$(n,e,t){return R$(n,e,t)}function N$(n,e,t,r){if(n[na])return;let i;t.type&8?i=Vr(r):i=x$(e,t),n[na]=i}var uC=class n{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},dC=class n{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){let t=e.queries;if(t!==null){let r=e.contentQueries!==null?e.contentQueries[0]:t.length,i=[];for(let s=0;s<r;s++){let o=t.getByIndex(s),a=this.queries[o.indexInDeclarationView];i.push(a.clone())}return new n(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)GC(e,t).matches!==null&&this.queries[t].setDirty()}},hC=class{flags;read;predicate;constructor(e,t,r=null){this.flags=t,this.read=r,typeof e=="string"?this.predicate=j$(e):this.predicate=e}},fC=class n{queries;constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){let i=t!==null?t.length:0,s=this.getByIndex(r).embeddedTView(e,i);s&&(s.indexInDeclarationView=r,t!==null?t.push(s):t=[s])}return t!==null?new n(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},pC=class n{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,t=-1){this.metadata=e,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new n(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==t;)r=r.parent;return t===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let s=r[i];this.matchTNodeWithReadOption(e,t,P$(t,s)),this.matchTNodeWithReadOption(e,t,Ty(t,e,s,!1,!1))}else r===Us?t.type&4&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,Ty(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===zt||i===es||i===Us&&t.type&4)this.addMatch(t.index,-2);else{let s=Ty(t,e,i,!1,!1);s!==null&&this.addMatch(t.index,s)}else this.addMatch(t.index,r)}}addMatch(e,t){this.matches===null?this.matches=[e,t]:this.matches.push(e,t)}};function P$(n,e){let t=n.localNames;if(t!==null){for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1]}return null}function M$(n,e){return n.type&11?Ou(n,e):n.type&4?qC(n,e):null}function O$(n,e,t,r){return t===-1?M$(e,n):t===-2?F$(n,e,r):_f(n,n[_e],t,e)}function F$(n,e,t){if(t===zt)return Ou(e,n);if(t===Us)return qC(e,n);if(t===es)return CM(e,n)}function EM(n,e,t,r){let i=e[Wi].queries[r];if(i.matches===null){let s=n.data,o=t.matches,a=[];for(let c=0;o!==null&&c<o.length;c+=2){let l=o[c];if(l<0)a.push(null);else{let h=s[l];a.push(O$(e,h,o[c+1],t.metadata.read))}}i.matches=a}return i.matches}function gC(n,e,t,r){let i=n.queries.getByIndex(t),s=i.matches;if(s!==null){let o=EM(n,e,i,t);for(let a=0;a<s.length;a+=2){let c=s[a];if(c>0)r.push(o[a/2]);else{let l=s[a+1],h=e[-c];for(let p=Pt;p<h.length;p++){let m=h[p];m[ta]===m[un]&&gC(m[_e],m,l,r)}if(h[Rc]!==null){let p=h[Rc];for(let m=0;m<p.length;m++){let b=p[m];gC(b[_e],b,l,r)}}}}}return r}function V$(n,e){return n[Wi].queries[e].queryList}function L$(n,e,t){let r=new Py((t&4)===4);return eN(n,e,r,r.destroy),(e[Wi]??=new dC).queries.push(new uC(r))-1}function U$(n,e,t,r){let i=$t();if(i.firstCreatePass){let s=mn();B$(i,new hC(e,t,r),s.index),$$(i,n),(t&2)===2&&(i.staticContentQueries=!0)}return L$(i,Oe(),t)}function j$(n){return n.split(",").map(e=>e.trim())}function B$(n,e,t){n.queries===null&&(n.queries=new fC),n.queries.track(new pC(e,t))}function $$(n,e){let t=n.contentQueries||(n.contentQueries=[]),r=t.length?t[t.length-1]:-1;e!==r&&t.push(n.queries.length-1,e)}function GC(n,e){return n.queries.getByIndex(e)}function z$(n,e){let t=n[_e],r=GC(t,e);return r.crossesNgTemplate?gC(t,n,e,[]):EM(t,n,r,e)}var Lc=class{},i_=class{};var jy=class extends Lc{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new Ly(this);constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t;let s=nb(e);this._bootstrapComponents=FP(s.bootstrap),this._r3Injector=Mb(e,t,[{provide:Lc,useValue:this},{provide:Df,useValue:this.componentFactoryResolver},...r],Ps(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},By=class extends i_{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new jy(this.moduleType,e,[])}};var bf=class extends Lc{injector;componentFactoryResolver=new Ly(this);instance=null;constructor(e){super();let t=new bc([...e.providers,{provide:Lc,useValue:this},{provide:Df,useValue:this.componentFactoryResolver}],e.parent||bu(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function xf(n,e,t=null){return new bf({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var H$=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=lb(!1,t.type),i=r.length>0?xf([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=X({token:n,providedIn:"environment",factory:()=>new n(Fe(Nt))})}return n})();function Gt(n){return Mu(()=>{let e=TM(n),t=ae(B({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===DC.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(H$).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||mi.Emulated,styles:n.styles||Wn,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&oa("NgStandalone"),SM(t);let r=n.dependencies;return t.directiveDefs=GN(r,q$),t.pipeDefs=GN(r,Nk),t.id=K$(t),t})}function q$(n){return Fs(n)||rb(n)}function br(n){return Mu(()=>({type:n.type,bootstrap:n.bootstrap||Wn,declarations:n.declarations||Wn,imports:n.imports||Wn,exports:n.exports||Wn,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function G$(n,e){if(n==null)return ea;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],s,o,a,c;Array.isArray(i)?(a=i[0],s=i[1],o=i[2]??s,c=i[3]||null):(s=i,o=i,a=Yy.None,c=null),t[s]=[r,a,c],e[s]=o}return t}function W$(n){if(n==null)return ea;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function Rt(n){return Mu(()=>{let e=TM(n);return SM(e),e})}function WC(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone??!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function TM(n){let e={};return{type:n.type,providersResolver:null,viewProvidersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||ea,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||Wn,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:G$(n.inputs,e),outputs:W$(n.outputs),debugInfo:null}}function SM(n){n.features?.forEach(e=>e(n))}function GN(n,e){return n?()=>{let t=typeof n=="function"?n():n,r=[];for(let i of t){let s=e(i);s!==null&&r.push(s)}return r}:null}function K$(n){let e=0,t=typeof n.consts=="function"?"":n.consts,r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let s of r.join("|"))e=Math.imul(31,e)+s.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function Q$(n){return Object.getPrototypeOf(n.prototype).constructor}function ts(n){let e=Q$(n.type),t=!0,r=[n];for(;e;){let i;if(Qi(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new ce(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let o=n;o.inputs=qb(n.inputs),o.declaredInputs=qb(n.declaredInputs),o.outputs=qb(n.outputs);let a=i.hostBindings;a&&e8(n,a);let c=i.viewQuery,l=i.contentQueries;if(c&&X$(n,c),l&&Z$(n,l),Y$(n,i),kk(n.outputs,i.outputs),Qi(i)&&i.data.animation){let h=n.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let s=i.features;if(s)for(let o=0;o<s.length;o++){let a=s[o];a&&a.ngInherit&&a(n),a===ts&&(t=!1)}}e=Object.getPrototypeOf(e)}J$(r)}function Y$(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t])}}function J$(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=ku(i.hostAttrs,t=ku(t,i.hostAttrs))}}function qb(n){return n===ea?{}:n===Wn?[]:n}function X$(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function Z$(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,s)=>{e(r,i,s),t(r,i,s)}:n.contentQueries=e}function e8(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function DM(n,e,t,r,i,s,o,a){if(t.firstCreatePass){n.mergedAttrs=ku(n.mergedAttrs,n.attrs);let h=n.tView=PC(2,n,i,s,o,t.directiveRegistry,t.pipeRegistry,null,t.schemas,t.consts,null);t.queries!==null&&(t.queries.template(t,n),h.queries=t.queries.embeddedTView(n))}a&&(n.flags|=a),Du(n,!1);let c=n8(t,e,n,r);yy()&&UC(t,e,c,n),Nu(c,e);let l=aM(c,e,c,n);e[r+Bt]=l,OC(e,l),k$(l,n,e)}function t8(n,e,t,r,i,s,o,a,c,l,h){let p=t+Bt,m;return e.firstCreatePass?(m=Sf(e,p,4,o||null,a||null),Tb()&&pM(e,n,m,Ur(e.consts,l),QP),iP(e,m)):m=e.data[p],DM(m,n,e,t,r,i,s,c),uf(m)&&BC(e,n,m),l!=null&&e_(n,m,h),m}function $y(n,e,t,r,i,s,o,a,c,l,h){let p=t+Bt,m;if(e.firstCreatePass){if(m=Sf(e,p,4,o||null,a||null),l!=null){let b=Ur(e.consts,l);m.localNames=[];for(let k=0;k<b.length;k+=2)m.localNames.push(b[k],-1)}}else m=e.data[p];return DM(m,n,e,t,r,i,s,c),l!=null&&e_(n,m,h),m}function s_(n,e,t,r,i,s,o,a){let c=Oe(),l=$t(),h=Ur(l.consts,s);return t8(c,l,n,e,t,r,i,h,void 0,o,a),s_}var n8=r8;function r8(n,e,t,r){return _y(!0),e[Ct].createComment("")}var KC=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();function xM(n){return typeof n=="function"&&n[Hn]!==void 0}function QC(n){return xM(n)&&typeof n.set=="function"}var YC=new re("");function aa(n){return!!n&&typeof n.then=="function"}function JC(n){return!!n&&typeof n.subscribe=="function"}var AM=new re("");var XC=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r});appInits=M(AM,{optional:!0})??[];injector=M(wt);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let s=dn(this.injector,i);if(aa(s))t.push(s);else if(JC(s)){let o=new Promise((a,c)=>{s.subscribe({complete:a,error:c})});t.push(o)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),o_=new re("");function RM(){fI(()=>{let n="";throw new ce(600,n)})}function kM(n){return n.isBoundToModule}var i8=10;var _i=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=M(_r);afterRenderManager=M(VC);zonelessEnabled=M(pf);rootEffectScheduler=M(vy);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new ye;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=M(Ls);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(ge(t=>!t))}constructor(){M(jc,{optional:!0})}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}_injector=M(Nt);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,r){return this.bootstrapImpl(t,r)}bootstrapImpl(t,r,i=wt.NULL){return this._injector.get(it).run(()=>{lt(Ze.BootstrapComponentStart);let o=t instanceof r_;if(!this._injector.get(XC).done){let k="";throw new ce(405,k)}let c;o?c=t:c=this._injector.get(Df).resolveComponentFactory(t),this.componentTypes.push(c.componentType);let l=kM(c)?void 0:this._injector.get(Lc),h=r||c.selector,p=c.create(i,[],h,l),m=p.location.nativeElement,b=p.injector.get(YC,null);return b?.registerApplication(m),p.onDestroy(()=>{this.detachView(p.hostView),yf(this.components,p),b?.unregisterApplication(m)}),this._loadComponent(p),lt(Ze.BootstrapComponentEnd,p),p})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){lt(Ze.ChangeDetectionStart),this.tracingSnapshot!==null?this.tracingSnapshot.run(Jy.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw lt(Ze.ChangeDetectionEnd),new ce(101,!1);let t=me(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,me(t),this.afterTick.next(),lt(Ze.ChangeDetectionEnd)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(wr,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<i8;){lt(Ze.ChangeDetectionSyncStart);try{this.synchronizeOnce()}finally{lt(Ze.ChangeDetectionSyncEnd)}}}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let t=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!hf(i))continue;let s=r&&!this.zonelessEnabled?0:1;rM(i,s),t=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}t||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>hf(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;yf(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(t),this._injector.get(o_,[]).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>yf(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new ce(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function yf(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function $c(n,e,t,r){let i=Oe(),s=Pc();if(Zi(i,s,e)){let o=$t(),a=my();R9(a,i,n,e,t,r)}return $c}var gde=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";var mC=class{destroy(e){}updateValue(e,t){}swap(e,t){let r=Math.min(e,t),i=Math.max(e,t),s=this.detach(i);if(i-r>1){let o=this.detach(r);this.attach(r,s),this.attach(i,o)}else this.attach(r,s)}move(e,t){this.attach(t,this.detach(e))}};function Gb(n,e,t,r,i){return n===t&&Object.is(e,r)?1:Object.is(i(n,e),i(t,r))?-1:0}function s8(n,e,t,r){let i,s,o=0,a=n.length-1,c=void 0;if(Array.isArray(e)){me(r);let l=e.length-1;for(me(null);o<=a&&o<=l;){let h=n.at(o),p=e[o],m=Gb(o,h,o,p,t);if(m!==0){m<0&&n.updateValue(o,p),o++;continue}let b=n.at(a),k=e[l],O=Gb(a,b,l,k,t);if(O!==0){O<0&&n.updateValue(a,k),a--,l--;continue}let N=t(o,h),z=t(a,b),Q=t(o,p);if(Object.is(Q,z)){let Z=t(l,k);Object.is(Z,N)?(n.swap(o,a),n.updateValue(a,k),l--,a--):n.move(a,o),n.updateValue(o,p),o++;continue}if(i??=new zy,s??=KN(n,o,a,t),yC(n,i,o,Q))n.updateValue(o,p),o++,a++;else if(s.has(Q))i.set(N,n.detach(o)),a--;else{let Z=n.create(o,e[o]);n.attach(o,Z),o++,a++}}for(;o<=l;)WN(n,i,t,o,e[o]),o++}else if(e!=null){me(r);let l=e[Symbol.iterator]();me(null);let h=l.next();for(;!h.done&&o<=a;){let p=n.at(o),m=h.value,b=Gb(o,p,o,m,t);if(b!==0)b<0&&n.updateValue(o,m),o++,h=l.next();else{i??=new zy,s??=KN(n,o,a,t);let k=t(o,m);if(yC(n,i,o,k))n.updateValue(o,m),o++,a++,h=l.next();else if(!s.has(k))n.attach(o,n.create(o,m)),o++,a++,h=l.next();else{let O=t(o,p);i.set(O,n.detach(o)),a--}}}for(;!h.done;)WN(n,i,t,n.length,h.value),h=l.next()}for(;o<=a;)n.destroy(n.detach(a--));i?.forEach(l=>{n.destroy(l)})}function yC(n,e,t,r){return e!==void 0&&e.has(r)?(n.attach(t,e.get(r)),e.delete(r),!0):!1}function WN(n,e,t,r,i){if(yC(n,e,r,t(r,i)))n.updateValue(r,i);else{let s=n.create(r,i);n.attach(r,s)}}function KN(n,e,t,r){let i=new Set;for(let s=e;s<=t;s++)i.add(r(s,n.at(s)));return i}var zy=class{kvMap=new Map;_vMap=void 0;has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let t=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(t)?(this.kvMap.set(e,this._vMap.get(t)),this._vMap.delete(t)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,t){if(this.kvMap.has(e)){let r=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,t)}else this.kvMap.set(e,t)}forEach(e){for(let[t,r]of this.kvMap)if(e(r,t),this._vMap!==void 0){let i=this._vMap;for(;i.has(r);)r=i.get(r),e(r,t)}}};function ue(n,e,t,r,i,s,o,a){oa("NgControlFlow");let c=Oe(),l=$t(),h=Ur(l.consts,s);return $y(c,l,n,e,t,r,i,h,256,o,a),ZC}function ZC(n,e,t,r,i,s,o,a){oa("NgControlFlow");let c=Oe(),l=$t(),h=Ur(l.consts,s);return $y(c,l,n,e,t,r,i,h,512,o,a),ZC}function de(n,e){oa("NgControlFlow");let t=Oe(),r=Pc(),i=t[r]!==sr?t[r]:-1,s=i!==-1?Hy(t,Bt+i):void 0,o=0;if(Zi(t,r,n)){let a=me(null);try{if(s!==void 0&&lM(s,o),n!==-1){let c=Bt+n,l=Hy(t,c),h=IC(t[_e],c),p=dM(l,h,t),m=t_(t,h,e,{dehydratedView:p});n_(l,m,o,vf(h,p))}}finally{me(a)}}else if(s!==void 0){let a=cM(s,o);a!==void 0&&(a[jt]=e)}}var _C=class{lContainer;$implicit;$index;constructor(e,t,r){this.lContainer=e,this.$implicit=t,this.$index=r}get $count(){return this.lContainer.length-Pt}};function Vu(n,e){return e}var vC=class{hasEmptyBlock;trackByFn;liveCollection;constructor(e,t,r){this.hasEmptyBlock=e,this.trackByFn=t,this.liveCollection=r}};function Mt(n,e,t,r,i,s,o,a,c,l,h,p,m){oa("NgControlFlow");let b=Oe(),k=$t(),O=c!==void 0,N=Oe(),z=a?o.bind(N[mr][jt]):o,Q=new vC(O,z);N[Bt+n]=Q,$y(b,k,n+1,e,t,r,i,Ur(k.consts,s),256),O&&$y(b,k,n+2,c,l,h,p,Ur(k.consts,m),512)}var wC=class extends mC{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(e,t,r){super(),this.lContainer=e,this.hostLView=t,this.templateTNode=r}get length(){return this.lContainer.length-Pt}at(e){return this.getLView(e)[jt].$implicit}attach(e,t){let r=t[Cu];this.needsIndexUpdate||=e!==this.length,n_(this.lContainer,t,e,vf(this.templateTNode,r)),o8(this.lContainer,e)}detach(e){return this.needsIndexUpdate||=e!==this.length-1,a8(this.lContainer,e),c8(this.lContainer,e)}create(e,t){let r=oC(this.lContainer,this.templateTNode.tView.ssrId);return t_(this.hostLView,this.templateTNode,new _C(this.lContainer,t,e),{dehydratedView:r})}destroy(e){Xy(e[_e],e)}updateValue(e,t){this.getLView(e)[jt].$implicit=t}reset(){this.needsIndexUpdate=!1}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[jt].$index=e}getLView(e){return l8(this.lContainer,e)}};function Ot(n){let e=me(null),t=Yi();try{let r=Oe(),i=r[_e],s=r[t],o=t+1,a=Hy(r,o);if(s.liveCollection===void 0){let l=IC(i,o);s.liveCollection=new wC(a,r,l)}else s.liveCollection.reset();let c=s.liveCollection;if(s8(c,n,s.trackByFn,e),c.updateIndexes(),s.hasEmptyBlock){let l=Pc(),h=c.length===0;if(Zi(r,l,h)){let p=t+2,m=Hy(r,p);if(h){let b=IC(i,p),k=dM(m,b,r),O=t_(r,b,void 0,{dehydratedView:k});n_(m,O,0,vf(b,k))}else i.firstUpdatePass&&e$(m),lM(m,0)}}}finally{me(e)}}function Hy(n,e){return n[e]}function o8(n,e){if(n.length<=Pt)return;let t=Pt+e,r=n[t],i=r?r[Ac]:void 0;if(r&&i&&i.detachedLeaveAnimationFns&&i.detachedLeaveAnimationFns.length>0){let s=r[Vs];s9(s,i),Fc.delete(r),i.detachedLeaveAnimationFns=void 0}}function a8(n,e){if(n.length<=Pt)return;let t=Pt+e,r=n[t],i=r?r[Ac]:void 0;i&&i.leave&&i.leave.size>0&&(i.detachedLeaveAnimationFns=[])}function c8(n,e){return If(n,e)}function l8(n,e){return cM(n,e)}function IC(n,e){return df(n,e)}function Le(n,e,t){let r=Oe(),i=Pc();if(Zi(r,i,e)){let s=$t(),o=my();KP(o,r,n,e,r[Ct],t)}return Le}function bC(n,e,t,r,i){$C(e,n,t,i?"class":"style",r)}function A(n,e,t,r){let i=Oe(),s=i[_e],o=n+Bt,a=s.firstCreatePass?mM(o,i,2,e,QP,Tb(),t,r):s.data[o];if(YP(a,i,n,e,NM),uf(a)){let c=i[_e];BC(c,i,a),DP(c,a,i)}return r!=null&&e_(i,a),A}function R(){let n=$t(),e=mn(),t=JP(e);return n.firstCreatePass&&yM(n,t),Sb(t)&&Db(),Eb(),t.classesWithoutHost!=null&&d6(t)&&bC(n,t,Oe(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&h6(t)&&bC(n,t,Oe(),t.stylesWithoutHost,!1),R}function kt(n,e,t,r){return A(n,e,t,r),R(),kt}function yn(n,e,t,r){let i=Oe(),s=i[_e],o=n+Bt,a=s.firstCreatePass?p$(o,s,2,e,t,r):s.data[o];return YP(a,i,n,e,NM),r!=null&&e_(i,a),yn}function Ln(){let n=mn(),e=JP(n);return Sb(e)&&Db(),Eb(),Ln}function Lu(n,e,t,r){return yn(n,e,t,r),Ln(),Lu}var NM=(n,e,t,r,i)=>(_y(!0),RP(e[Ct],r,_N()));function Be(){return Oe()}var gf=void 0;function u8(n){let e=Math.floor(Math.abs(n)),t=n.toString().replace(/^[^.]*\.?/,"").length;return e===1&&t===0?1:5}var d8=["en",[["a","p"],["AM","PM"]],[["AM","PM"]],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],gf,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],gf,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm\u202Fa","h:mm:ss\u202Fa","h:mm:ss\u202Fa z","h:mm:ss\u202Fa zzzz"],["{1}, {0}",gf,gf,gf],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",u8],Wb={};function Cr(n){let e=h8(n),t=QN(e);if(t)return t;let r=e.split("-")[0];if(t=QN(r),t)return t;if(r==="en")return d8;throw new ce(701,!1)}function QN(n){return n in Wb||(Wb[n]=Os.ng&&Os.ng.common&&Os.ng.common.locales&&Os.ng.common.locales[n]),Wb[n]}var Ht=(function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n})(Ht||{});function h8(n){return n.toLowerCase().replace(/_/g,"-")}var Af="en-US";var f8=Af;function PM(n){typeof n=="string"&&(f8=n.toLowerCase().replace(/_/g,"-"))}function Y(n,e,t){let r=Oe(),i=$t(),s=mn();return MM(i,r,r[Ct],s,n,e,t),Y}function Uu(n,e,t){let r=Oe(),i=$t(),s=mn();return(s.type&3||t)&&vM(s,i,r,t,r[Ct],n,e,Dy(s,r,e)),Uu}function MM(n,e,t,r,i,s,o){let a=!0,c=null;if((r.type&3||o)&&(c??=Dy(r,e,s),vM(r,n,e,o,t,i,s,c)&&(a=!1)),a){let l=r.outputs?.[i],h=r.hostDirectiveOutputs?.[i];if(h&&h.length)for(let p=0;p<h.length;p+=2){let m=h[p],b=h[p+1];c??=Dy(r,e,s),zN(r,e,m,b,i,c)}if(l&&l.length)for(let p of l)c??=Dy(r,e,s),zN(r,e,p,i,i,c)}}function $(n=1){return yN(n)}function a_(n,e,t,r){return U$(n,e,t,r),a_}function c_(n){let e=Oe(),t=$t(),r=kb();fy(r+1);let i=GC(t,r);if(n.dirty&&Yk(e)===((i.metadata.flags&2)===2)){if(i.matches===null)n.reset([]);else{let s=z$(e,r);n.reset(s,T6),n.notifyOnChanges()}return!0}return!1}function l_(){return V$(Oe(),kb())}function eE(n){let e=oN();return yb(e,Bt+n)}function by(n,e){return n<<17|e<<2}function Uc(n){return n>>17&32767}function p8(n){return(n&2)==2}function g8(n,e){return n&131071|e<<17}function CC(n){return n|2}function Pu(n){return(n&131068)>>2}function Kb(n,e){return n&-131069|e<<2}function m8(n){return(n&1)===1}function EC(n){return n|1}function y8(n,e,t,r,i,s){let o=s?e.classBindings:e.styleBindings,a=Uc(o),c=Pu(o);n[r]=t;let l=!1,h;if(Array.isArray(t)){let p=t;h=p[1],(h===null||Iu(p,h)>0)&&(l=!0)}else h=t;if(i)if(c!==0){let m=Uc(n[a+1]);n[r+1]=by(m,a),m!==0&&(n[m+1]=Kb(n[m+1],r)),n[a+1]=g8(n[a+1],r)}else n[r+1]=by(a,0),a!==0&&(n[a+1]=Kb(n[a+1],r)),a=r;else n[r+1]=by(c,0),a===0?a=r:n[c+1]=Kb(n[c+1],r),c=r;l&&(n[r+1]=CC(n[r+1])),YN(n,h,r,!0),YN(n,h,r,!1),_8(e,h,n,r,s),o=by(a,c),s?e.classBindings=o:e.styleBindings=o}function _8(n,e,t,r,i){let s=i?n.residualClasses:n.residualStyles;s!=null&&typeof e=="string"&&Iu(s,e)>=0&&(t[r+1]=EC(t[r+1]))}function YN(n,e,t,r){let i=n[t+1],s=e===null,o=r?Uc(i):Pu(i),a=!1;for(;o!==0&&(a===!1||s);){let c=n[o],l=n[o+1];v8(c,e)&&(a=!0,n[o+1]=r?EC(l):CC(l)),o=r?Uc(l):Pu(l)}a&&(n[t+1]=r?CC(i):EC(i))}function v8(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?Iu(n,e)>=0:!1}var gi={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function w8(n){return n.substring(gi.key,gi.keyEnd)}function I8(n){return b8(n),OM(n,FM(n,0,gi.textEnd))}function OM(n,e){let t=gi.textEnd;return t===e?-1:(e=gi.keyEnd=C8(n,gi.key=e,t),FM(n,e,t))}function b8(n){gi.key=0,gi.keyEnd=0,gi.value=0,gi.valueEnd=0,gi.textEnd=n.length}function FM(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function C8(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}function zc(n,e,t){return VM(n,e,t,!1),zc}function _n(n,e){return VM(n,e,null,!0),_n}function ut(n){T8(k8,E8,n,!0)}function E8(n,e){for(let t=I8(e);t>=0;t=OM(e,t))oy(n,w8(e),!0)}function VM(n,e,t,r){let i=Oe(),s=$t(),o=dy(2);if(s.firstUpdatePass&&UM(s,n,o,r),e!==sr&&Zi(i,o,e)){let a=s.data[Yi()];jM(s,a,i,i[Ct],n,i[o+1]=P8(e,t),r,o)}}function T8(n,e,t,r){let i=$t(),s=dy(2);i.firstUpdatePass&&UM(i,null,s,r);let o=Oe();if(t!==sr&&Zi(o,s,t)){let a=i.data[Yi()];if(BM(a,r)&&!LM(i,s)){let c=r?a.classesWithoutHost:a.stylesWithoutHost;c!==null&&(t=ny(c,t||"")),bC(i,a,o,t,r)}else N8(i,a,o,o[Ct],o[s+1],o[s+1]=R8(n,e,t),r,s)}}function LM(n,e){return e>=n.expandoStartIndex}function UM(n,e,t,r){let i=n.data;if(i[t+1]===null){let s=i[Yi()],o=LM(n,t);BM(s,r)&&e===null&&!o&&(e=!1),e=S8(i,s,e,r),y8(i,s,e,t,o,r)}}function S8(n,e,t,r){let i=fN(n),s=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=Qb(null,n,e,t,r),t=Cf(t,e.attrs,r),s=null);else{let o=e.directiveStylingLast;if(o===-1||n[o]!==i)if(t=Qb(i,n,e,t,r),s===null){let c=D8(n,e,r);c!==void 0&&Array.isArray(c)&&(c=Qb(null,n,e,c[1],r),c=Cf(c,e.attrs,r),x8(n,e,r,c))}else s=A8(n,e,r)}return s!==void 0&&(r?e.residualClasses=s:e.residualStyles=s),t}function D8(n,e,t){let r=t?e.classBindings:e.styleBindings;if(Pu(r)!==0)return n[Uc(r)]}function x8(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[Uc(i)]=r}function A8(n,e,t){let r,i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++){let o=n[s].hostAttrs;r=Cf(r,o,t)}return Cf(r,e.attrs,t)}function Qb(n,e,t,r,i){let s=null,o=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<o&&(s=e[a],r=Cf(r,s.hostAttrs,i),s!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function Cf(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let s=0;s<e.length;s++){let o=e[s];typeof o=="number"?i=o:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),oy(n,o,t?!0:e[++s]))}return n===void 0?null:n}function R8(n,e,t){if(t==null||t==="")return Wn;let r=[],i=Tf(t);if(Array.isArray(i))for(let s=0;s<i.length;s++)n(r,i[s],!0);else if(typeof i=="object")for(let s in i)i.hasOwnProperty(s)&&n(r,s,i[s]);else typeof i=="string"&&e(r,i);return r}function k8(n,e,t){let r=String(e);r!==""&&!r.includes(" ")&&oy(n,r,t)}function N8(n,e,t,r,i,s,o,a){i===sr&&(i=Wn);let c=0,l=0,h=0<i.length?i[0]:null,p=0<s.length?s[0]:null;for(;h!==null||p!==null;){let m=c<i.length?i[c+1]:void 0,b=l<s.length?s[l+1]:void 0,k=null,O;h===p?(c+=2,l+=2,m!==b&&(k=p,O=b)):p===null||h!==null&&h<p?(c+=2,k=h):(l+=2,k=p,O=b),k!==null&&jM(n,e,t,r,k,O,o,a),h=c<i.length?i[c]:null,p=l<s.length?s[l]:null}}function jM(n,e,t,r,i,s,o,a){if(!(e.type&3))return;let c=n.data,l=c[a+1],h=m8(l)?JN(c,e,t,i,Pu(l),o):void 0;if(!qy(h)){qy(s)||p8(l)&&(s=JN(c,null,t,i,a,o));let p=mb(Yi(),t);w9(r,o,p,i,s)}}function JN(n,e,t,r,i,s){let o=e===null,a;for(;i>0;){let c=n[i],l=Array.isArray(c),h=l?c[1]:c,p=h===null,m=t[i+1];m===sr&&(m=p?Wn:void 0);let b=p?ay(m,r):h===r?m:void 0;if(l&&!qy(b)&&(b=ay(c,r)),qy(b)&&(a=b,o))return a;let k=n[i+1];i=o?Uc(k):Pu(k)}if(e!==null){let c=s?e.residualClasses:e.residualStyles;c!=null&&(a=ay(c,r))}return a}function qy(n){return n!==void 0}function P8(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=Ps(Tf(n)))),n}function BM(n,e){return(n.flags&(e?8:16))!==0}function P(n,e=""){let t=Oe(),r=$t(),i=n+Bt,s=r.firstCreatePass?Sf(r,i,1,e,null):r.data[i],o=M8(r,t,s,e,n);t[i]=o,yy()&&UC(r,t,o,s),Du(s,!1)}var M8=(n,e,t,r,i)=>(_y(!0),V6(e[Ct],r));function O8(n,e,t,r=""){return Zi(n,Pc(),t)?e+Ec(t)+r:sr}function F8(n,e,t,r,i,s=""){let o=cN(),a=_M(n,o,t,i);return dy(2),a?e+Ec(t)+r+Ec(i)+s:sr}function Ne(n){return dt("",n),Ne}function dt(n,e,t){let r=Oe(),i=O8(r,n,e,t);return i!==sr&&$M(r,Yi(),i),dt}function u_(n,e,t,r,i){let s=Oe(),o=F8(s,n,e,t,r,i);return o!==sr&&$M(s,Yi(),o),u_}function $M(n,e,t){let r=mb(e,n);L6(n[Ct],r,t)}function hn(n,e,t){QC(e)&&(e=e());let r=Oe(),i=Pc();if(Zi(r,i,e)){let s=$t(),o=my();KP(o,r,n,e,r[Ct],t)}return hn}function vn(n,e){let t=QC(n);return t&&n.set(e),t}function fn(n,e){let t=Oe(),r=$t(),i=mn();return MM(r,t,t[Ct],i,n,e),fn}function XN(n,e,t){let r=$t();r.firstCreatePass&&zM(e,r.data,r.blueprint,Qi(n),t)}function zM(n,e,t,r,i){if(n=Rn(n),Array.isArray(n))for(let s=0;s<n.length;s++)zM(n[s],e,t,r,i);else{let s=$t(),o=Oe(),a=mn(),c=Ic(n)?n:Rn(n.provide),l=db(n),h=a.providerIndexes&1048575,p=a.directiveStart,m=a.providerIndexes>>20;if(Ic(n)||!n.multi){let b=new Oc(l,i,je,null),k=Jb(c,e,i?h:h+m,p);k===-1?(Zb(Ny(a,o),s,c),Yb(s,n,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(b),o.push(b)):(t[k]=b,o[k]=b)}else{let b=Jb(c,e,h+m,p),k=Jb(c,e,h,h+m),O=b>=0&&t[b],N=k>=0&&t[k];if(i&&!N||!i&&!O){Zb(Ny(a,o),s,c);let z=U8(i?L8:V8,t.length,i,r,l,n);!i&&N&&(t[k].providerFactory=z),Yb(s,n,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(z),o.push(z)}else{let z=HM(t[i?k:b],l,!i&&r);Yb(s,n,b>-1?b:k,z)}!i&&r&&N&&t[k].componentProviders++}}}function Yb(n,e,t,r){let i=Ic(e),s=qk(e);if(i||s){let c=(s?Rn(e.useClass):e).prototype.ngOnDestroy;if(c){let l=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let h=l.indexOf(t);h===-1?l.push(t,[r,c]):l[h+1].push(r,c)}else l.push(t,c)}}}function HM(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function Jb(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function V8(n,e,t,r,i){return TC(this.multi,[])}function L8(n,e,t,r,i){let s=this.multi,o;if(this.providerFactory){let a=this.providerFactory.componentProviders,c=_f(r,r[_e],this.providerFactory.index,i);o=c.slice(0,a),TC(s,o);for(let l=a;l<c.length;l++)o.push(c[l])}else o=[],TC(s,o);return o}function TC(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function U8(n,e,t,r,i,s){let o=new Oc(n,t,je,null);return o.multi=[],o.index=e,o.componentProviders=0,HM(o,i,r&&!t),o}function Br(n,e){return t=>{t.providersResolver=(r,i)=>XN(r,i?i(n):n,!1),e&&(t.viewProvidersResolver=(r,i)=>XN(r,i?i(e):e,!0))}}function j8(n,e){let t=n[e];return t===sr?void 0:t}function B8(n,e,t,r,i,s,o){let a=e+t;return _M(n,a,i,s)?g$(n,a+2,o?r.call(o,i,s):r(i,s)):j8(n,a+2)}function Rf(n,e){let t=$t(),r,i=n+Bt;t.firstCreatePass?(r=$8(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];let s=r.factory||(r.factory=Jo(r.type,!0)),o,a=Gn(je);try{let c=ky(!1),l=s();return ky(c),_b(t,Oe(),i,l),l}finally{Gn(a)}}function $8(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function kf(n,e,t,r){let i=n+Bt,s=Oe(),o=yb(s,i);return z8(s,i)?B8(s,aN(),e,o.transform,t,r,o):o.transform(t,r)}function z8(n,e){return n[_e].data[e].pure}var Gy=class{ngModuleFactory;componentFactories;constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},tE=(()=>{class n{compileModuleSync(t){return new By(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=nb(t),s=FP(i.declarations).reduce((o,a)=>{let c=Fs(a);return c&&o.push(new Vc(c)),o},[]);return new Gy(r,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var qM=(()=>{class n{applicationErrorHandler=M(_r);appRef=M(_i);taskService=M(Ls);ngZone=M(it);zonelessEnabled=M(pf);tracing=M(jc,{optional:!0});zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new mt;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(nf):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(M(jb,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()}))}notify(t){if(!this.zonelessEnabled&&t===5)return;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2;break}case 12:{this.appRef.dirtyFlags|=16;break}case 13:{this.appRef.dirtyFlags|=2;break}case 11:break;case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?Fb:Ob;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(nf+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(t),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,Fb(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function GM(){return[{provide:Ms,useExisting:qM},{provide:it,useClass:rf},{provide:pf,useValue:!0}]}function H8(){return typeof $localize<"u"&&$localize.locale||Af}var Nf=new re("",{factory:()=>M(Nf,{optional:!0,skipSelf:!0})||H8()});function ze(n,e){return mm(n,e?.equal)}var KM=Symbol("InputSignalNode#UNSET"),l7=ae(B({},ym),{transformFn:void 0,applyValueToInputSignal(n,e){qh(n,e)}});function QM(n,e){let t=Object.create(l7);t.value=n,t.transformFn=e?.transform;function r(){if($h(t),t.value===KM){let i=null;throw new ce(-950,i)}return t.value}return r[Hn]=t,r}var h_=class{attributeName;constructor(e){this.attributeName=e}__NG_ELEMENT_ID__=()=>Ef(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}};function WM(n,e){return QM(n,e)}function u7(n){return QM(KM,n)}var YM=(WM.required=u7,WM);var nE=new re(""),d7=new re("");function Pf(n){return!n.moduleRef}function h7(n){let e=Pf(n)?n.r3Injector:n.moduleRef.injector,t=e.get(it);return t.run(()=>{Pf(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(_r),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:r})}),Pf(n)){let s=()=>e.destroy(),o=n.platformInjector.get(nE);o.add(s),e.onDestroy(()=>{i.unsubscribe(),o.delete(s)})}else{let s=()=>n.moduleRef.destroy(),o=n.platformInjector.get(nE);o.add(s),n.moduleRef.onDestroy(()=>{yf(n.allPlatformModules,n.moduleRef),i.unsubscribe(),o.delete(s)})}return p7(r,t,()=>{let s=e.get(Ls),o=s.add(),a=e.get(XC);return a.runInitializers(),a.donePromise.then(()=>{let c=e.get(Nf,Af);if(PM(c||Af),!e.get(d7,!0))return Pf(n)?e.get(_i):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(Pf(n)){let h=e.get(_i);return n.rootComponent!==void 0&&h.bootstrap(n.rootComponent),h}else return f7?.(n.moduleRef,n.allPlatformModules),n.moduleRef}).finally(()=>void s.remove(o))})})}var f7;function p7(n,e,t){try{let r=t();return aa(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n(r)),r}}var d_=null;function g7(n=[],e){return wt.create({name:e,providers:[{provide:af,useValue:"platform"},{provide:nE,useValue:new Set([()=>d_=null])},...n]})}function m7(n=[]){if(d_)return d_;let e=g7(n);return d_=e,RM(),y7(e),e}function y7(n){let e=n.get(Wy,null);dn(n,()=>{e?.forEach(t=>t())})}function rE(){return!1}var $r=(()=>{class n{static __NG_ELEMENT_ID__=_7}return n})();function _7(n){return v7(mn(),Oe(),(n&16)===16)}function v7(n,e,t){if(ra(n)&&!t){let r=Lr(n.index,e);return new sa(r,r)}else if(n.type&175){let r=e[mr];return new sa(r,e)}return null}function JM(n){let{rootComponent:e,appProviders:t,platformProviders:r,platformRef:i}=n;lt(Ze.BootstrapApplicationStart);try{let s=i?.injector??m7(r),o=[GM(),bN,...t||[]],a=new bf({providers:o,parent:s,debugName:"",runEnvironmentInitializers:!1});return h7({r3Injector:a.injector,platformInjector:s,rootComponent:e})}catch(s){return Promise.reject(s)}finally{lt(Ze.BootstrapApplicationEnd)}}function or(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function XM(n,e=NaN){return!isNaN(parseFloat(n))&&!isNaN(Number(n))?Number(n):e}function ZM(n,e){let t=Fs(n),r=e.elementInjector||bu();return new Vc(t).create(r,e.projectableNodes,e.hostElement,e.environmentInjector,e.directives,e.bindings)}var e2=null;function zr(){return e2}function iE(n){e2??=n}var Mf=class{},f_=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:()=>M(t2),providedIn:"platform"})}return n})();var t2=(()=>{class n extends f_{_location;_history;_doc=M(It);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return zr().getBaseHref(this._doc)}onPopState(t){let r=zr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=zr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function i2(n,e){return n?e?n.endsWith("/")?e.startsWith("/")?n+e.slice(1):n+e:e.startsWith("/")?n+e:`${n}/${e}`:n:e}function n2(n){let e=n.search(/#|\?|$/);return n[e-1]==="/"?n.slice(0,e-1)+n.slice(e):n}function ca(n){return n&&n[0]!=="?"?`?${n}`:n}var ju=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:()=>M(I7),providedIn:"root"})}return n})(),w7=new re(""),I7=(()=>{class n extends ju{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??M(It).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return i2(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+ca(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){let o=this.prepareExternalUrl(i+ca(s));this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){let o=this.prepareExternalUrl(i+ca(s));this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(Fe(f_),Fe(w7,8))};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Bu=(()=>{class n{_subject=new ye;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=E7(n2(r2(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+ca(r))}normalize(t){return n.stripTrailingSlash(C7(this._basePath,r2(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ca(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ca(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=ca;static joinWithSlash=i2;static stripTrailingSlash=n2;static \u0275fac=function(r){return new(r||n)(Fe(ju))};static \u0275prov=X({token:n,factory:()=>b7(),providedIn:"root"})}return n})();function b7(){return new Bu(Fe(ju))}function C7(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function r2(n){return n.replace(/\/index.html$/,"")}function E7(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var Un=(function(n){return n[n.Format=0]="Format",n[n.Standalone=1]="Standalone",n})(Un||{}),_t=(function(n){return n[n.Narrow=0]="Narrow",n[n.Abbreviated=1]="Abbreviated",n[n.Wide=2]="Wide",n[n.Short=3]="Short",n})(_t||{}),ar=(function(n){return n[n.Short=0]="Short",n[n.Medium=1]="Medium",n[n.Long=2]="Long",n[n.Full=3]="Full",n})(ar||{}),zs={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function o2(n){return Cr(n)[Ht.LocaleId]}function a2(n,e,t){let r=Cr(n),i=[r[Ht.DayPeriodsFormat],r[Ht.DayPeriodsStandalone]],s=Hr(i,e);return Hr(s,t)}function c2(n,e,t){let r=Cr(n),i=[r[Ht.DaysFormat],r[Ht.DaysStandalone]],s=Hr(i,e);return Hr(s,t)}function l2(n,e,t){let r=Cr(n),i=[r[Ht.MonthsFormat],r[Ht.MonthsStandalone]],s=Hr(i,e);return Hr(s,t)}function u2(n,e){let r=Cr(n)[Ht.Eras];return Hr(r,e)}function Of(n,e){let t=Cr(n);return Hr(t[Ht.DateFormat],e)}function Ff(n,e){let t=Cr(n);return Hr(t[Ht.TimeFormat],e)}function Vf(n,e){let r=Cr(n)[Ht.DateTimeFormat];return Hr(r,e)}function Lf(n,e){let t=Cr(n),r=t[Ht.NumberSymbols][e];if(typeof r>"u"){if(e===zs.CurrencyDecimal)return t[Ht.NumberSymbols][zs.Decimal];if(e===zs.CurrencyGroup)return t[Ht.NumberSymbols][zs.Group]}return r}function d2(n){if(!n[Ht.ExtraData])throw new ce(2303,!1)}function h2(n){let e=Cr(n);return d2(e),(e[Ht.ExtraData][2]||[]).map(r=>typeof r=="string"?sE(r):[sE(r[0]),sE(r[1])])}function f2(n,e,t){let r=Cr(n);d2(r);let i=[r[Ht.ExtraData][0],r[Ht.ExtraData][1]],s=Hr(i,e)||[];return Hr(s,t)||[]}function Hr(n,e){for(let t=e;t>-1;t--)if(typeof n[t]<"u")return n[t];throw new ce(2304,!1)}function sE(n){let[e,t]=n.split(":");return{hours:+e,minutes:+t}}var S7=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,p_={},D7=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;function p2(n,e,t,r){let i=F7(n);e=$s(t,e)||e;let o=[],a;for(;e;)if(a=D7.exec(e),a){o=o.concat(a.slice(1));let h=o.pop();if(!h)break;e=h}else{o.push(e);break}let c=i.getTimezoneOffset();r&&(c=m2(r,c),i=O7(i,r));let l="";return o.forEach(h=>{let p=P7(h);l+=p?p(i,t,c):h==="''"?"'":h.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),l}function v_(n,e,t){let r=new Date(0);return r.setFullYear(n,e,t),r.setHours(0,0,0),r}function $s(n,e){let t=o2(n);if(p_[t]??={},p_[t][e])return p_[t][e];let r="";switch(e){case"shortDate":r=Of(n,ar.Short);break;case"mediumDate":r=Of(n,ar.Medium);break;case"longDate":r=Of(n,ar.Long);break;case"fullDate":r=Of(n,ar.Full);break;case"shortTime":r=Ff(n,ar.Short);break;case"mediumTime":r=Ff(n,ar.Medium);break;case"longTime":r=Ff(n,ar.Long);break;case"fullTime":r=Ff(n,ar.Full);break;case"short":let i=$s(n,"shortTime"),s=$s(n,"shortDate");r=g_(Vf(n,ar.Short),[i,s]);break;case"medium":let o=$s(n,"mediumTime"),a=$s(n,"mediumDate");r=g_(Vf(n,ar.Medium),[o,a]);break;case"long":let c=$s(n,"longTime"),l=$s(n,"longDate");r=g_(Vf(n,ar.Long),[c,l]);break;case"full":let h=$s(n,"fullTime"),p=$s(n,"fullDate");r=g_(Vf(n,ar.Full),[h,p]);break}return r&&(p_[t][e]=r),r}function g_(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,r){return e!=null&&r in e?e[r]:t})),n}function vi(n,e,t="-",r,i){let s="";(n<0||i&&n<=0)&&(i?n=-n+1:(n=-n,s=t));let o=String(n);for(;o.length<e;)o="0"+o;return r&&(o=o.slice(o.length-e)),s+o}function x7(n,e){return vi(n,3).substring(0,e)}function Wt(n,e,t=0,r=!1,i=!1){return function(s,o){let a=A7(n,s);if((t>0||a>-t)&&(a+=t),n===3)a===0&&t===-12&&(a=12);else if(n===6)return x7(a,e);let c=Lf(o,zs.MinusSign);return vi(a,e,c,r,i)}}function A7(n,e){switch(n){case 0:return e.getFullYear();case 1:return e.getMonth();case 2:return e.getDate();case 3:return e.getHours();case 4:return e.getMinutes();case 5:return e.getSeconds();case 6:return e.getMilliseconds();case 7:return e.getDay();default:throw new ce(2301,!1)}}function bt(n,e,t=Un.Format,r=!1){return function(i,s){return R7(i,s,n,e,t,r)}}function R7(n,e,t,r,i,s){switch(t){case 2:return l2(e,i,r)[n.getMonth()];case 1:return c2(e,i,r)[n.getDay()];case 0:let o=n.getHours(),a=n.getMinutes();if(s){let l=h2(e),h=f2(e,i,r),p=l.findIndex(m=>{if(Array.isArray(m)){let[b,k]=m,O=o>=b.hours&&a>=b.minutes,N=o<k.hours||o===k.hours&&a<k.minutes;if(b.hours<k.hours){if(O&&N)return!0}else if(O||N)return!0}else if(m.hours===o&&m.minutes===a)return!0;return!1});if(p!==-1)return h[p]}return a2(e,i,r)[o<12?0:1];case 3:return u2(e,r)[n.getFullYear()<=0?0:1];default:let c=t;throw new ce(2302,!1)}}function m_(n){return function(e,t,r){let i=-1*r,s=Lf(t,zs.MinusSign),o=i>0?Math.floor(i/60):Math.ceil(i/60);switch(n){case 0:return(i>=0?"+":"")+vi(o,2,s)+vi(Math.abs(i%60),2,s);case 1:return"GMT"+(i>=0?"+":"")+vi(o,1,s);case 2:return"GMT"+(i>=0?"+":"")+vi(o,2,s)+":"+vi(Math.abs(i%60),2,s);case 3:return r===0?"Z":(i>=0?"+":"")+vi(o,2,s)+":"+vi(Math.abs(i%60),2,s);default:throw new ce(2310,!1)}}}var k7=0,__=4;function N7(n){let e=v_(n,k7,1).getDay();return v_(n,0,1+(e<=__?__:__+7)-e)}function g2(n){let e=n.getDay(),t=e===0?-3:__-e;return v_(n.getFullYear(),n.getMonth(),n.getDate()+t)}function oE(n,e=!1){return function(t,r){let i;if(e){let s=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,o=t.getDate();i=1+Math.floor((o+s)/7)}else{let s=g2(t),o=N7(s.getFullYear()),a=s.getTime()-o.getTime();i=1+Math.round(a/6048e5)}return vi(i,n,Lf(r,zs.MinusSign))}}function y_(n,e=!1){return function(t,r){let s=g2(t).getFullYear();return vi(s,n,Lf(r,zs.MinusSign),e)}}var aE={};function P7(n){if(aE[n])return aE[n];let e;switch(n){case"G":case"GG":case"GGG":e=bt(3,_t.Abbreviated);break;case"GGGG":e=bt(3,_t.Wide);break;case"GGGGG":e=bt(3,_t.Narrow);break;case"y":e=Wt(0,1,0,!1,!0);break;case"yy":e=Wt(0,2,0,!0,!0);break;case"yyy":e=Wt(0,3,0,!1,!0);break;case"yyyy":e=Wt(0,4,0,!1,!0);break;case"Y":e=y_(1);break;case"YY":e=y_(2,!0);break;case"YYY":e=y_(3);break;case"YYYY":e=y_(4);break;case"M":case"L":e=Wt(1,1,1);break;case"MM":case"LL":e=Wt(1,2,1);break;case"MMM":e=bt(2,_t.Abbreviated);break;case"MMMM":e=bt(2,_t.Wide);break;case"MMMMM":e=bt(2,_t.Narrow);break;case"LLL":e=bt(2,_t.Abbreviated,Un.Standalone);break;case"LLLL":e=bt(2,_t.Wide,Un.Standalone);break;case"LLLLL":e=bt(2,_t.Narrow,Un.Standalone);break;case"w":e=oE(1);break;case"ww":e=oE(2);break;case"W":e=oE(1,!0);break;case"d":e=Wt(2,1);break;case"dd":e=Wt(2,2);break;case"c":case"cc":e=Wt(7,1);break;case"ccc":e=bt(1,_t.Abbreviated,Un.Standalone);break;case"cccc":e=bt(1,_t.Wide,Un.Standalone);break;case"ccccc":e=bt(1,_t.Narrow,Un.Standalone);break;case"cccccc":e=bt(1,_t.Short,Un.Standalone);break;case"E":case"EE":case"EEE":e=bt(1,_t.Abbreviated);break;case"EEEE":e=bt(1,_t.Wide);break;case"EEEEE":e=bt(1,_t.Narrow);break;case"EEEEEE":e=bt(1,_t.Short);break;case"a":case"aa":case"aaa":e=bt(0,_t.Abbreviated);break;case"aaaa":e=bt(0,_t.Wide);break;case"aaaaa":e=bt(0,_t.Narrow);break;case"b":case"bb":case"bbb":e=bt(0,_t.Abbreviated,Un.Standalone,!0);break;case"bbbb":e=bt(0,_t.Wide,Un.Standalone,!0);break;case"bbbbb":e=bt(0,_t.Narrow,Un.Standalone,!0);break;case"B":case"BB":case"BBB":e=bt(0,_t.Abbreviated,Un.Format,!0);break;case"BBBB":e=bt(0,_t.Wide,Un.Format,!0);break;case"BBBBB":e=bt(0,_t.Narrow,Un.Format,!0);break;case"h":e=Wt(3,1,-12);break;case"hh":e=Wt(3,2,-12);break;case"H":e=Wt(3,1);break;case"HH":e=Wt(3,2);break;case"m":e=Wt(4,1);break;case"mm":e=Wt(4,2);break;case"s":e=Wt(5,1);break;case"ss":e=Wt(5,2);break;case"S":e=Wt(6,1);break;case"SS":e=Wt(6,2);break;case"SSS":e=Wt(6,3);break;case"Z":case"ZZ":case"ZZZ":e=m_(0);break;case"ZZZZZ":e=m_(3);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=m_(1);break;case"OOOO":case"ZZZZ":case"zzzz":e=m_(2);break;default:return null}return aE[n]=e,e}function m2(n,e){n=n.replace(/:/g,"");let t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function M7(n,e){return n=new Date(n.getTime()),n.setMinutes(n.getMinutes()+e),n}function O7(n,e,t){let i=n.getTimezoneOffset(),s=m2(e,i);return M7(n,-1*(s-i))}function F7(n){if(s2(n))return n;if(typeof n=="number"&&!isNaN(n))return new Date(n);if(typeof n=="string"){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){let[i,s=1,o=1]=n.split("-").map(a=>+a);return v_(i,s-1,o)}let t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let r;if(r=n.match(S7))return V7(r)}let e=new Date(n);if(!s2(e))throw new ce(2311,!1);return e}function V7(n){let e=new Date(0),t=0,r=0,i=n[8]?e.setUTCFullYear:e.setFullYear,s=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),r=Number(n[9]+n[11])),i.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));let o=Number(n[4]||0)-t,a=Number(n[5]||0)-r,c=Number(n[6]||0),l=Math.floor(parseFloat("0."+(n[7]||0))*1e3);return s.call(e,o,a,c,l),e}function s2(n){return n instanceof Date&&!isNaN(n.valueOf())}function L7(n,e){return new ce(2100,!1)}var U7="mediumDate",y2=new re(""),_2=new re(""),Uf=(()=>{class n{locale;defaultTimezone;defaultOptions;constructor(t,r,i){this.locale=t,this.defaultTimezone=r,this.defaultOptions=i}transform(t,r,i,s){if(t==null||t===""||t!==t)return null;try{let o=r??this.defaultOptions?.dateFormat??U7,a=i??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return p2(t,o,s||this.locale,a)}catch(o){throw L7(n,o.message)}}static \u0275fac=function(r){return new(r||n)(je(Nf,16),je(y2,24),je(_2,24))};static \u0275pipe=WC({name:"date",type:n,pure:!0})}return n})();var cr=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=br({type:n});static \u0275inj=rr({})}return n})();function cE(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,s]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}var jf=class{};var lE="browser";function v2(n){return n===lE}var Bf=class{_doc;constructor(e){this._doc=e}manager},w_=(()=>{class n extends Bf{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i,s){return t.addEventListener(r,i,s),()=>this.removeEventListener(t,r,i,s)}removeEventListener(t,r,i,s){return t.removeEventListener(r,i,s)}static \u0275fac=function(r){return new(r||n)(Fe(It))};static \u0275prov=X({token:n,factory:n.\u0275fac})}return n})(),C_=new re(""),pE=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,r){this._zone=r,t.forEach(o=>{o.manager=this});let i=t.filter(o=>!(o instanceof w_));this._plugins=i.slice().reverse();let s=t.find(o=>o instanceof w_);s&&this._plugins.push(s)}addEventListener(t,r,i,s){return this._findPluginFor(r).addEventListener(t,r,i,s)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(s=>s.supports(t)),!r)throw new ce(5101,!1);return this._eventNameToPlugin.set(t,r),r}static \u0275fac=function(r){return new(r||n)(Fe(C_),Fe(it))};static \u0275prov=X({token:n,factory:n.\u0275fac})}return n})(),dE="ng-app-id";function w2(n){for(let e of n)e.remove()}function I2(n,e){let t=e.createElement("style");return t.textContent=n,t}function B7(n,e,t,r){let i=n.head?.querySelectorAll(`style[${dE}="${e}"],link[${dE}="${e}"]`);if(i)for(let s of i)s.removeAttribute(dE),s instanceof HTMLLinkElement?r.set(s.href.slice(s.href.lastIndexOf("/")+1),{usage:0,elements:[s]}):s.textContent&&t.set(s.textContent,{usage:0,elements:[s]})}function fE(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var gE=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(t,r,i,s={}){this.doc=t,this.appId=r,this.nonce=i,B7(t,r,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,r){for(let i of t)this.addUsage(i,this.inline,I2);r?.forEach(i=>this.addUsage(i,this.external,fE))}removeStyles(t,r){for(let i of t)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(t,r,i){let s=r.get(t);s?s.usage++:r.set(t,{usage:1,elements:[...this.hosts].map(o=>this.addElement(o,i(t,this.doc)))})}removeUsage(t,r){let i=r.get(t);i&&(i.usage--,i.usage<=0&&(w2(i.elements),r.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])w2(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(t,I2(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(t,fE(r,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,r){return this.nonce&&r.setAttribute("nonce",this.nonce),t.appendChild(r)}static \u0275fac=function(r){return new(r||n)(Fe(It),Fe(Fu),Fe(Ky,8),Fe(Bs))};static \u0275prov=X({token:n,factory:n.\u0275fac})}return n})(),hE={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},mE=/%COMP%/g;var C2="%COMP%",$7=`_nghost-${C2}`,z7=`_ngcontent-${C2}`,H7=!0,q7=new re("",{factory:()=>H7});function G7(n){return z7.replace(mE,n)}function W7(n){return $7.replace(mE,n)}function E2(n,e){return e.map(t=>t.replace(mE,n))}var yE=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,r,i,s,o,a,c=null,l=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.ngZone=a,this.nonce=c,this.tracingService=l,this.platformIsServer=!1,this.defaultRenderer=new $f(t,o,a,this.platformIsServer,this.tracingService)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(t,r);return i instanceof b_?i.applyToHost(t):i instanceof zf&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,s=i.get(r.id);if(!s){let o=this.doc,a=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.platformIsServer,m=this.tracingService;switch(r.encapsulation){case mi.Emulated:s=new b_(c,l,r,this.appId,h,o,a,p,m);break;case mi.ShadowDom:return new I_(c,t,r,o,a,this.nonce,p,m,l);case mi.ExperimentalIsolatedShadowDom:return new I_(c,t,r,o,a,this.nonce,p,m);default:s=new zf(c,l,r,h,o,a,p,m);break}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(r){return new(r||n)(Fe(pE),Fe(gE),Fe(Fu),Fe(q7),Fe(It),Fe(it),Fe(Ky),Fe(jc,8))};static \u0275prov=X({token:n,factory:n.\u0275fac})}return n})(),$f=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,r,i,s){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.tracingService=s}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(hE[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(b2(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(b2(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new ce(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let s=hE[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=hE[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Xi.DashCase|Xi.Important)?e.style.setProperty(t,r,i&Xi.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Xi.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r,i){if(typeof e=="string"&&(e=zr().getGlobalEventTarget(this.doc,e),!e))throw new ce(5102,!1);let s=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(s=this.tracingService.wrapEventListener(e,t,s)),this.eventManager.addEventListener(e,t,s,i)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;e(t)===!1&&t.preventDefault()}}};function b2(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var I_=class extends $f{hostEl;sharedStylesHost;shadowRoot;constructor(e,t,r,i,s,o,a,c,l){super(e,i,s,a,c),this.hostEl=t,this.sharedStylesHost=l,this.shadowRoot=t.attachShadow({mode:"open"}),this.sharedStylesHost&&this.sharedStylesHost.addHost(this.shadowRoot);let h=r.styles;h=E2(r.id,h);for(let m of h){let b=document.createElement("style");o&&b.setAttribute("nonce",o),b.textContent=m,this.shadowRoot.appendChild(b)}let p=r.getExternalStyles?.();if(p)for(let m of p){let b=fE(m,i);o&&b.setAttribute("nonce",o),this.shadowRoot.appendChild(b)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost&&this.sharedStylesHost.removeHost(this.shadowRoot)}},zf=class extends $f{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,r,i,s,o,a,c,l){super(e,s,o,a,c),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i;let h=r.styles;this.styles=l?E2(l,h):h,this.styleUrls=r.getExternalStyles?.(l)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&Fc.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},b_=class extends zf{contentAttr;hostAttr;constructor(e,t,r,i,s,o,a,c,l){let h=i+"-"+r.id;super(e,t,r,s,o,a,c,l,h),this.contentAttr=G7(h),this.hostAttr=W7(h)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}};var E_=class n extends Mf{supportsDOMEvents=!0;static makeCurrent(){iE(new n)}onAndCancel(e,t,r,i){return e.addEventListener(t,r,i),()=>{e.removeEventListener(t,r,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=K7();return t==null?null:Q7(t)}resetBaseElement(){Hf=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return cE(document.cookie,e)}},Hf=null;function K7(){return Hf=Hf||document.head.querySelector("base"),Hf?Hf.getAttribute("href"):null}function Q7(n){return new URL(n,document.baseURI).pathname}var Y7=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:n.\u0275fac})}return n})(),T2=["alt","control","meta","shift"],J7={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},X7={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},S2=(()=>{class n extends Bf{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i,s){let o=n.parseEventName(r),a=n.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>zr().onAndCancel(t,o.domEventName,a,s))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let s=n._normalizeKey(r.pop()),o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),T2.forEach(l=>{let h=r.indexOf(l);h>-1&&(r.splice(h,1),o+=l+".")}),o+=s,r.length!=0||s.length===0)return null;let c={};return c.domEventName=i,c.fullKey=o,c}static matchEventFullKeyCode(t,r){let i=J7[t.key]||t.key,s="";return r.indexOf("code.")>-1&&(i=t.code,s="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),T2.forEach(o=>{if(o!==i){let a=X7[o];a(t)&&(s+=o+".")}}),s+=i,s===r)}static eventCallback(t,r,i){return s=>{n.matchEventFullKeyCode(s,t)&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(r){return new(r||n)(Fe(It))};static \u0275prov=X({token:n,factory:n.\u0275fac})}return n})();function _E(n,e,t){let r=B({rootComponent:n,platformRef:t?.platformRef},Z7(e));return JM(r)}function Z7(n){return{appProviders:[...iz,...n?.providers??[]],platformProviders:rz}}function ez(){E_.makeCurrent()}function tz(){return new Hi}function nz(){return xC(document),document}var rz=[{provide:Bs,useValue:lE},{provide:Wy,useValue:ez,multi:!0},{provide:It,useFactory:nz}];var iz=[{provide:af,useValue:"root"},{provide:Hi,useFactory:tz},{provide:C_,useClass:w_,multi:!0},{provide:C_,useClass:S2,multi:!0},yE,gE,pE,{provide:wr,useExisting:yE},{provide:jf,useClass:Y7},[]];var D2=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(r){return new(r||n)(Fe(It))};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var xe="primary",rp=Symbol("RouteTitle"),CE=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Kc(n){return new CE(n)}function F2(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let s=0;s<r.length;s++){let o=r[s],a=n[s];if(o[0]===":")i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function R_(n){return new Promise((e,t)=>{n.pipe(ks()).subscribe({next:r=>e(r),error:r=>t(r)})})}function oz(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!ns(n[t],e[t]))return!1;return!0}function ns(n,e){let t=n?EE(n):void 0,r=e?EE(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!V2(n[i],e[i]))return!1;return!0}function EE(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function V2(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}else return n===e}function L2(n){return n.length>0?n[n.length-1]:null}function Yc(n){return Kh(n)?n:aa(n)?De(Promise.resolve(n)):le(n)}function U2(n){return Kh(n)?R_(n):Promise.resolve(n)}var az={exact:B2,subset:$2},j2={exact:cz,subset:lz,ignored:()=>!0};function x2(n,e,t){return az[t.paths](n.root,e.root,t.matrixParams)&&j2[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function cz(n,e){return ns(n,e)}function B2(n,e,t){if(!Gc(n.segments,e.segments)||!D_(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!B2(n.children[r],e.children[r],t))return!1;return!0}function lz(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>V2(n[t],e[t]))}function $2(n,e,t){return z2(n,e,e.segments,t)}function z2(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!Gc(i,t)||e.hasChildren()||!D_(i,t,r))}else if(n.segments.length===t.length){if(!Gc(n.segments,t)||!D_(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!$2(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!Gc(n.segments,i)||!D_(n.segments,i,r)||!n.children[xe]?!1:z2(n.children[xe],e,s,r)}}function D_(n,e,t){return e.every((r,i)=>j2[t](n[i].parameters,r.parameters))}var Ii=class{root;queryParams;fragment;_queryParamMap;constructor(e=new ot([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Kc(this.queryParams),this._queryParamMap}toString(){return hz.serialize(this)}},ot=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return x_(this)}},la=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Kc(this.parameters),this._parameterMap}toString(){return q2(this)}};function uz(n,e){return Gc(n,e)&&n.every((t,r)=>ns(t.parameters,e[r].parameters))}function Gc(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function dz(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===xe&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==xe&&(t=t.concat(e(i,r)))}),t}var ip=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:()=>new ua,providedIn:"root"})}return n})(),ua=class{parse(e){let t=new SE(e);return new Ii(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${qf(e.root,!0)}`,r=gz(e.queryParams),i=typeof e.fragment=="string"?`#${fz(e.fragment)}`:"";return`${t}${r}${i}`}},hz=new ua;function x_(n){return n.segments.map(e=>q2(e)).join("/")}function qf(n,e){if(!n.hasChildren())return x_(n);if(e){let t=n.children[xe]?qf(n.children[xe],!1):"",r=[];return Object.entries(n.children).forEach(([i,s])=>{i!==xe&&r.push(`${i}:${qf(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=dz(n,(r,i)=>i===xe?[qf(n.children[xe],!1)]:[`${i}:${qf(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[xe]!=null?`${x_(n)}/${t[0]}`:`${x_(n)}/(${t.join("//")})`}}function H2(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function T_(n){return H2(n).replace(/%3B/gi,";")}function fz(n){return encodeURI(n)}function TE(n){return H2(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function A_(n){return decodeURIComponent(n)}function A2(n){return A_(n.replace(/\+/g,"%20"))}function q2(n){return`${TE(n.path)}${pz(n.parameters)}`}function pz(n){return Object.entries(n).map(([e,t])=>`;${TE(e)}=${TE(t)}`).join("")}function gz(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${T_(t)}=${T_(i)}`).join("&"):`${T_(t)}=${T_(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var mz=/^[^\/()?;#]+/;function vE(n){let e=n.match(mz);return e?e[0]:""}var yz=/^[^\/()?;=#]+/;function _z(n){let e=n.match(yz);return e?e[0]:""}var vz=/^[^=?&#]+/;function wz(n){let e=n.match(vz);return e?e[0]:""}var Iz=/^[^&#]+/;function bz(n){let e=n.match(Iz);return e?e[0]:""}var SE=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new ot([],{}):new ot([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[xe]=new ot(e,t)),r}parseSegment(){let e=vE(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new ce(4009,!1);return this.capture(e),new la(A_(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=_z(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=vE(this.remaining);i&&(r=i,this.capture(r))}e[A_(t)]=A_(r)}parseQueryParam(e){let t=wz(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let o=bz(this.remaining);o&&(r=o,this.capture(r))}let i=A2(t),s=A2(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=vE(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new ce(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=xe);let o=this.parseChildren();t[s??xe]=Object.keys(o).length===1&&o[xe]?o[xe]:new ot([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new ce(4011,!1)}};function G2(n){return n.segments.length>0?new ot([],{[xe]:n}):n}function W2(n){let e={};for(let[r,i]of Object.entries(n.children)){let s=W2(i);if(r===xe&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let t=new ot(n.segments,e);return Cz(t)}function Cz(n){if(n.numberOfChildren===1&&n.children[xe]){let e=n.children[xe];return new ot(n.segments.concat(e.segments),e.children)}return n}function da(n){return n instanceof Ii}function K2(n,e,t=null,r=null,i=new ua){let s=Q2(n);return Y2(s,e,t,r,i)}function Q2(n){let e;function t(s){let o={};for(let c of s.children){let l=t(c);o[c.outlet]=l}let a=new ot(s.url,o);return s===n&&(e=a),a}let r=t(n.root),i=G2(r);return e??i}function Y2(n,e,t,r,i){let s=n;for(;s.parent;)s=s.parent;if(e.length===0)return wE(s,s,s,t,r,i);let o=Ez(e);if(o.toRoot())return wE(s,s,new ot([],{}),t,r,i);let a=Tz(o,s,n),c=a.processChildren?Wf(a.segmentGroup,a.index,o.commands):X2(a.segmentGroup,a.index,o.commands);return wE(s,a.segmentGroup,c,t,r,i)}function k_(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Yf(n){return typeof n=="object"&&n!=null&&n.outlets}function R2(n,e,t){n||="\u0275";let r=new Ii;return r.queryParams={[n]:e},t.parse(t.serialize(r)).queryParams[n]}function wE(n,e,t,r,i,s){let o={};for(let[l,h]of Object.entries(r??{}))o[l]=Array.isArray(h)?h.map(p=>R2(l,p,s)):R2(l,h,s);let a;n===e?a=t:a=J2(n,e,t);let c=G2(W2(a));return new Ii(c,o,i)}function J2(n,e,t){let r={};return Object.entries(n.children).forEach(([i,s])=>{s===e?r[i]=t:r[i]=J2(s,e,t)}),new ot(n.segments,r)}var N_=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&k_(r[0]))throw new ce(4003,!1);let i=r.find(Yf);if(i&&i!==L2(r))throw new ce(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function Ez(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new N_(!0,0,n);let e=0,t=!1,r=n.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,s]},[]);return new N_(t,e,r)}var zu=class{segmentGroup;processChildren;index;constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function Tz(n,e,t){if(n.isAbsolute)return new zu(e,!0,0);if(!t)return new zu(e,!1,NaN);if(t.parent===null)return new zu(t,!0,0);let r=k_(n.commands[0])?0:1,i=t.segments.length-1+r;return Sz(t,i,n.numberOfDoubleDots)}function Sz(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new ce(4005,!1);i=r.segments.length}return new zu(r,!1,i-s)}function Dz(n){return Yf(n[0])?n[0].outlets:{[xe]:n}}function X2(n,e,t){if(n??=new ot([],{}),n.segments.length===0&&n.hasChildren())return Wf(n,e,t);let r=xz(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let s=new ot(n.segments.slice(0,r.pathIndex),{});return s.children[xe]=new ot(n.segments.slice(r.pathIndex),n.children),Wf(s,0,i)}else return r.match&&i.length===0?new ot(n.segments,{}):r.match&&!n.hasChildren()?DE(n,e,t):r.match?Wf(n,0,i):DE(n,e,t)}function Wf(n,e,t){if(t.length===0)return new ot(n.segments,{});{let r=Dz(t),i={};if(Object.keys(r).some(s=>s!==xe)&&n.children[xe]&&n.numberOfChildren===1&&n.children[xe].segments.length===0){let s=Wf(n.children[xe],e,t);return new ot(n.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=X2(n.children[s],e,o))}),Object.entries(n.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new ot(n.segments,i)}}function xz(n,e,t){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;let o=n.segments[i],a=t[r];if(Yf(a))break;let c=`${a}`,l=r<t.length-1?t[r+1]:null;if(i>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!N2(c,l,o))return s;r+=2}else{if(!N2(c,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function DE(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let s=t[i];if(Yf(s)){let c=Az(s.outlets);return new ot(r,c)}if(i===0&&k_(t[0])){let c=n.segments[e];r.push(new la(c.path,k2(t[0]))),i++;continue}let o=Yf(s)?s.outlets[xe]:`${s}`,a=i<t.length-1?t[i+1]:null;o&&a&&k_(a)?(r.push(new la(o,k2(a))),i+=2):(r.push(new la(o,{})),i++)}return new ot(r,{})}function Az(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=DE(new ot([],{}),0,r))}),e}function k2(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function N2(n,e,t){return n==t.path&&ns(e,t.parameters)}var Kf="imperative",wn=(function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n})(wn||{}),Tr=class{id;url;constructor(e,t){this.id=e,this.url=t}},Qc=class extends Tr{type=wn.NavigationStart;navigationTrigger;restoredState;constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},bi=class extends Tr{urlAfterRedirects;type=wn.NavigationEnd;constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Qn=(function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n[n.Aborted=4]="Aborted",n})(Qn||{}),Jf=(function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n})(Jf||{}),rs=class extends Tr{reason;code;type=wn.NavigationCancel;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Hs=class extends Tr{reason;code;type=wn.NavigationSkipped;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}},qu=class extends Tr{error;target;type=wn.NavigationError;constructor(e,t,r,i){super(e,t),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Xf=class extends Tr{urlAfterRedirects;state;type=wn.RoutesRecognized;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},P_=class extends Tr{urlAfterRedirects;state;type=wn.GuardsCheckStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},M_=class extends Tr{urlAfterRedirects;state;shouldActivate;type=wn.GuardsCheckEnd;constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},O_=class extends Tr{urlAfterRedirects;state;type=wn.ResolveStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},F_=class extends Tr{urlAfterRedirects;state;type=wn.ResolveEnd;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},V_=class{route;type=wn.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},L_=class{route;type=wn.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},U_=class{snapshot;type=wn.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},j_=class{snapshot;type=wn.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},B_=class{snapshot;type=wn.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},$_=class{snapshot;type=wn.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var Zf=class{},Gu=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function Rz(n){return!(n instanceof Zf)&&!(n instanceof Gu)}function kz(n,e){return n.providers&&!n._injector&&(n._injector=xf(n.providers,e,`Route: ${n.path}`)),n._injector??e}function wi(n){return n.outlet||xe}function Nz(n,e){let t=n.filter(r=>wi(r)===e);return t.push(...n.filter(r=>wi(r)!==e)),t}function Qu(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var z_=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return Qu(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new Yu(this.rootInjector)}},Yu=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new z_(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(r){return new(r||n)(Fe(Nt))};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),H_=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=xE(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=xE(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=AE(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return AE(e,this._root).map(t=>t.value)}};function xE(n,e){if(n===e.value)return e;for(let t of e.children){let r=xE(n,t);if(r)return r}return null}function AE(n,e){if(n===e.value)return[e];for(let t of e.children){let r=AE(n,t);if(r.length)return r.unshift(e),r}return[]}var Er=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function $u(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var ep=class extends H_{snapshot;constructor(e,t){super(e),this.snapshot=t,OE(this,e)}toString(){return this.snapshot.toString()}};function Z2(n){let e=Pz(n),t=new at([new la("",{})]),r=new at({}),i=new at({}),s=new at({}),o=new at(""),a=new qs(t,r,s,o,i,xe,n,e.root);return a.snapshot=e.root,new ep(new Er(a,[]),e)}function Pz(n){let e={},t={},r={},s=new Wc([],e,r,"",t,xe,n,null,{});return new tp("",new Er(s,[]))}var qs=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,r,i,s,o,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(ge(l=>l[rp]))??le(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(ge(e=>Kc(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(ge(e=>Kc(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function q_(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:B(B({},e.params),n.params),data:B(B({},e.data),n.data),resolve:B(B(B(B({},n.data),e.data),i?.data),n._resolvedData)}:r={params:B({},n.params),data:B({},n.data),resolve:B(B({},n.data),n._resolvedData??{})},i&&tO(i)&&(r.resolve[rp]=i.title),r}var Wc=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[rp]}constructor(e,t,r,i,s,o,a,c,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Kc(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Kc(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},tp=class extends H_{url;constructor(e,t){super(t),this.url=e,OE(this,t)}toString(){return eO(this._root)}};function OE(n,e){e.value._routerState=n,e.children.forEach(t=>OE(n,t))}function eO(n){let e=n.children.length>0?` { ${n.children.map(eO).join(", ")} } `:"";return`${n.value}${e}`}function IE(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,ns(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),ns(e.params,t.params)||n.paramsSubject.next(t.params),oz(e.url,t.url)||n.urlSubject.next(t.url),ns(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function RE(n,e){let t=ns(n.params,e.params)&&uz(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||RE(n.parent,e.parent))}function tO(n){return typeof n.title=="string"||n.title===null}var nO=new re(""),sp=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=xe;activateEvents=new We;deactivateEvents=new We;attachEvents=new We;detachEvents=new We;routerOutletData=YM();parentContexts=M(Yu);location=M(es);changeDetector=M($r);inputBinder=M(Q_,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new ce(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new ce(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new ce(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new ce(4013,!1);this._activatedRoute=t;let i=this.location,o=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new kE(t,a,i.injector,this.routerOutletData);this.activated=i.createComponent(o,{index:i.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=Rt({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[jr]})}return n})(),kE=class{route;childContexts;parent;outletData;constructor(e,t,r,i){this.route=e,this.childContexts=t,this.parent=r,this.outletData=i}get(e,t){return e===qs?this.route:e===Yu?this.childContexts:e===nO?this.outletData:this.parent.get(e,t)}},Q_=new re("");var FE=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=Gt({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&kt(0,"router-outlet")},dependencies:[sp],encapsulation:2})}return n})();function VE(n){let e=n.children&&n.children.map(VE),t=e?ae(B({},n),{children:e}):B({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==xe&&(t.component=FE),t}function Mz(n,e,t){let r=np(n,e._root,t?t._root:void 0);return new ep(r,e)}function np(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=Oz(n,e,t);return new Er(r,i)}else{if(n.shouldAttach(e.value)){let s=n.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>np(n,a)),o}}let r=Fz(e.value),i=e.children.map(s=>np(n,s));return new Er(r,i)}}function Oz(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return np(n,r,i);return np(n,r)})}function Fz(n){return new qs(new at(n.url),new at(n.params),new at(n.queryParams),new at(n.fragment),new at(n.data),n.outlet,n.component,n)}var Wu=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},rO="ngNavigationCancelingError";function G_(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=da(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=iO(!1,Qn.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function iO(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[rO]=!0,t.cancellationCode=e,t}function Vz(n){return sO(n)&&da(n.url)}function sO(n){return!!n&&n[rO]}var Lz=(n,e,t,r)=>ge(i=>(new NE(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),NE=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,r,i,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),IE(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=$u(t);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=$u(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){let o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=$u(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=$u(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new $_(s.value.snapshot))}),e.children.length&&this.forwardEvent(new j_(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(IE(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),IE(a.route.value),this.activateChildRoutes(e,null,o.children)}else o.attachRef=null,o.route=i,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}else this.activateChildRoutes(e,null,r)}},W_=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Hu=class{component;route;constructor(e,t){this.component=e,this.route=t}};function Uz(n,e,t){let r=n._root,i=e?e._root:null;return Gf(r,i,t,[r.value])}function jz(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function Ju(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!YI(n)?n:e.get(n):r}function Gf(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=$u(e);return n.children.forEach(o=>{Bz(o,s[o.value.outlet],t,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>Qf(a,t.getContext(o),i)),i}function Bz(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let c=$z(o,s,s.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new W_(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?Gf(n,e,a?a.children:null,r,i):Gf(n,e,t,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Hu(a.outlet.component,o))}else o&&Qf(e,a,i),i.canActivateChecks.push(new W_(r)),s.component?Gf(n,null,a?a.children:null,r,i):Gf(n,null,t,r,i);return i}function $z(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!Gc(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Gc(n.url,e.url)||!ns(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!RE(n,e)||!ns(n.queryParams,e.queryParams);case"paramsChange":default:return!RE(n,e)}}function Qf(n,e,t){let r=$u(n),i=n.value;Object.entries(r).forEach(([s,o])=>{i.component?e?Qf(o,e.children.getContext(s),t):Qf(o,null,t):Qf(o,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new Hu(e.outlet.component,i)):t.canDeactivateChecks.push(new Hu(null,i)):t.canDeactivateChecks.push(new Hu(null,i))}function op(n){return typeof n=="function"}function zz(n){return typeof n=="boolean"}function Hz(n){return n&&op(n.canLoad)}function qz(n){return n&&op(n.canActivate)}function Gz(n){return n&&op(n.canActivateChild)}function Wz(n){return n&&op(n.canDeactivate)}function Kz(n){return n&&op(n.canMatch)}function oO(n){return n instanceof As||n?.name==="EmptyError"}var S_=Symbol("INITIAL_VALUE");function Ku(){return qn(n=>kI(n.map(e=>e.pipe(Vn(1),yc(S_)))).pipe(ge(e=>{for(let t of e)if(t!==!0){if(t===S_)return S_;if(t===!1||Qz(t))return t}return!0}),pr(e=>e!==S_),Vn(1)))}function Qz(n){return da(n)||n instanceof Wu}function aO(n){return n.aborted?le(void 0).pipe(Vn(1)):new Se(e=>{let t=()=>{e.next(),e.complete()};return n.addEventListener("abort",t),()=>n.removeEventListener("abort",t)})}function cO(n){return ui(aO(n))}function Yz(n,e){return Fn(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return o.length===0&&s.length===0?le(ae(B({},t),{guardsResult:!0})):Jz(o,r,i,n).pipe(Fn(a=>a&&zz(a)?Xz(r,s,n,e):le(a)),ge(a=>ae(B({},t),{guardsResult:a})))})}function Jz(n,e,t,r){return De(n).pipe(Fn(i=>rH(i.component,i.route,t,e,r)),ks(i=>i!==!0,!0))}function Xz(n,e,t,r){return De(e).pipe(Jh(i=>mu(eH(i.route.parent,r),Zz(i.route,r),nH(n,i.path,t),tH(n,i.route,t))),ks(i=>i!==!0,!0))}function Zz(n,e){return n!==null&&e&&e(new B_(n)),le(!0)}function eH(n,e){return n!==null&&e&&e(new U_(n)),le(!0)}function tH(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return le(!0);let i=r.map(s=>Qh(()=>{let o=Qu(e)??t,a=Ju(s,o),c=qz(a)?a.canActivate(e,n):dn(o,()=>a(e,n));return Yc(c).pipe(ks())}));return le(i).pipe(Ku())}function nH(n,e,t){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>jz(o)).filter(o=>o!==null).map(o=>Qh(()=>{let a=o.guards.map(c=>{let l=Qu(o.node)??t,h=Ju(c,l),p=Gz(h)?h.canActivateChild(r,n):dn(l,()=>h(r,n));return Yc(p).pipe(ks())});return le(a).pipe(Ku())}));return le(s).pipe(Ku())}function rH(n,e,t,r,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return le(!0);let o=s.map(a=>{let c=Qu(e)??i,l=Ju(a,c),h=Wz(l)?l.canDeactivate(n,e,t,r):dn(c,()=>l(n,e,t,r));return Yc(h).pipe(ks())});return le(o).pipe(Ku())}function iH(n,e,t,r,i){let s=e.canLoad;if(s===void 0||s.length===0)return le(!0);let o=s.map(a=>{let c=Ju(a,n),l=Hz(c)?c.canLoad(e,t):dn(n,()=>c(e,t)),h=Yc(l);return i?h.pipe(cO(i)):h});return le(o).pipe(Ku(),lO(r))}function lO(n){return CI(yt(e=>{if(typeof e!="boolean")throw G_(n,e)}),ge(e=>e===!0))}function sH(n,e,t,r,i){let s=e.canMatch;if(!s||s.length===0)return le(!0);let o=s.map(a=>{let c=Ju(a,n),l=Kz(c)?c.canMatch(e,t):dn(n,()=>c(e,t)),h=Yc(l);return i?h.pipe(cO(i)):h});return le(o).pipe(Ku(),lO(r))}var qc=class uO extends Error{segmentGroup;constructor(e){super(),this.segmentGroup=e||null,Object.setPrototypeOf(this,uO.prototype)}},PE=class dO extends Error{urlTree;constructor(e){super(),this.urlTree=e,Object.setPrototypeOf(this,dO.prototype)}};function oH(n){throw new ce(4e3,!1)}function aH(n){throw iO(!1,Qn.GuardRejected)}var cH=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}async lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return r;if(i.numberOfChildren>1||!i.children[xe])throw oH(`${e.redirectTo}`);i=i.children[xe]}}async applyRedirectCommands(e,t,r,i,s){let o=await lH(t,i,s);if(o instanceof Ii)throw new PE(o);let a=this.applyRedirectCreateUrlTree(o,this.urlSerializer.parse(o),e,r);if(o[0]==="/")throw new PE(a);return a}applyRedirectCreateUrlTree(e,t,r,i){let s=this.createSegmentGroup(e,t.root,r,i);return new Ii(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s[0]===":"){let a=s.substring(1);r[i]=t[a]}else r[i]=s}),r}createSegmentGroup(e,t,r,i){let s=this.createSegments(e,t.segments,r,i),o={};return Object.entries(t.children).forEach(([a,c])=>{o[a]=this.createSegmentGroup(e,c,r,i)}),new ot(s,o)}createSegments(e,t,r,i){return t.map(s=>s.path[0]===":"?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new ce(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}};function lH(n,e,t){if(typeof n=="string")return Promise.resolve(n);let r=n,{queryParams:i,fragment:s,routeConfig:o,url:a,outlet:c,params:l,data:h,title:p}=e;return R_(Yc(dn(t,()=>r({params:l,data:h,queryParams:i,fragment:s,routeConfig:o,url:a,outlet:c,title:p}))))}var ME={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function uH(n,e,t,r,i,s){let o=hO(n,e,t);return o.matched?(r=kz(e,r),sH(r,e,t,i,s).pipe(ge(a=>a===!0?o:B({},ME)))):le(o)}function hO(n,e,t){if(e.path==="**")return dH(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?B({},ME):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||F2)(t,n,e);if(!i)return B({},ME);let s={};Object.entries(i.posParams??{}).forEach(([a,c])=>{s[a]=c.path});let o=i.consumed.length>0?B(B({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function dH(n){return{matched:!0,parameters:n.length>0?L2(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function P2(n,e,t,r){return t.length>0&&pH(n,t,r)?{segmentGroup:new ot(e,fH(r,new ot(t,n.children))),slicedSegments:[]}:t.length===0&&gH(n,t,r)?{segmentGroup:new ot(n.segments,hH(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new ot(n.segments,n.children),slicedSegments:t}}function hH(n,e,t,r){let i={};for(let s of t)if(Y_(n,e,s)&&!r[wi(s)]){let o=new ot([],{});i[wi(s)]=o}return B(B({},r),i)}function fH(n,e){let t={};t[xe]=e;for(let r of n)if(r.path===""&&wi(r)!==xe){let i=new ot([],{});t[wi(r)]=i}return t}function pH(n,e,t){return t.some(r=>Y_(n,e,r)&&wi(r)!==xe)}function gH(n,e,t){return t.some(r=>Y_(n,e,r))}function Y_(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function mH(n,e,t){return e.length===0&&!n.children[t]}var yH=class{};async function _H(n,e,t,r,i,s,o="emptyOnly",a){return new wH(n,e,t,r,i,o,s,a).recognize()}var vH=31,wH=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;abortSignal;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,r,i,s,o,a,c){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.abortSignal=c,this.applyRedirects=new cH(this.urlSerializer,this.urlTree)}noMatchError(e){return new ce(4002,`'${e.segmentGroup}'`)}async recognize(){let e=P2(this.urlTree.root,[],[],this.config).segmentGroup,{children:t,rootSnapshot:r}=await this.match(e),i=new Er(r,t),s=new tp("",i),o=K2(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}async match(e){let t=new Wc([],Object.freeze({}),Object.freeze(B({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),xe,this.rootComponentType,null,{});try{return{children:await this.processSegmentGroup(this.injector,this.config,e,xe,t),rootSnapshot:t}}catch(r){if(r instanceof PE)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof qc?this.noMatchError(r):r}}async processSegmentGroup(e,t,r,i,s){if(r.segments.length===0&&r.hasChildren())return this.processChildren(e,t,r,s);let o=await this.processSegment(e,t,r,r.segments,i,!0,s);return o instanceof Er?[o]:[]}async processChildren(e,t,r,i){let s=[];for(let c of Object.keys(r.children))c==="primary"?s.unshift(c):s.push(c);let o=[];for(let c of s){let l=r.children[c],h=Nz(t,c),p=await this.processSegmentGroup(e,h,l,c,i);o.push(...p)}let a=fO(o);return IH(a),a}async processSegment(e,t,r,i,s,o,a){for(let c of t)try{return await this.processSegmentAgainstRoute(c._injector??e,t,c,r,i,s,o,a)}catch(l){if(l instanceof qc||oO(l))continue;throw l}if(mH(r,i,s))return new yH;throw new qc(r)}async processSegmentAgainstRoute(e,t,r,i,s,o,a,c){if(wi(r)!==o&&(o===xe||!Y_(i,s,r)))throw new qc(i);if(r.redirectTo===void 0)return this.matchSegmentAgainstRoute(e,i,r,s,o,c);if(this.allowRedirects&&a)return this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,s,o,c);throw new qc(i)}async expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o,a){let{matched:c,parameters:l,consumedSegments:h,positionalParamSegments:p,remainingSegments:m}=hO(t,i,s);if(!c)throw new qc(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>vH&&(this.allowRedirects=!1));let b=new Wc(s,l,Object.freeze(B({},this.urlTree.queryParams)),this.urlTree.fragment,M2(i),wi(i),i.component??i._loadedComponent??null,i,O2(i)),k=q_(b,a,this.paramsInheritanceStrategy);if(b.params=Object.freeze(k.params),b.data=Object.freeze(k.data),this.abortSignal.aborted)throw new Error(this.abortSignal.reason);let O=await this.applyRedirects.applyRedirectCommands(h,i.redirectTo,p,b,e),N=await this.applyRedirects.lineralizeSegments(i,O);return this.processSegment(e,r,t,N.concat(m),o,!1,a)}async matchSegmentAgainstRoute(e,t,r,i,s,o){if(this.abortSignal.aborted)throw new Error(this.abortSignal.reason);let a=await R_(uH(t,r,i,e,this.urlSerializer,this.abortSignal));if(r.path==="**"&&(t.children={}),!a?.matched)throw new qc(t);e=r._injector??e;let{routes:c}=await this.getChildConfig(e,r,i),l=r._loadedInjector??e,{parameters:h,consumedSegments:p,remainingSegments:m}=a,b=new Wc(p,h,Object.freeze(B({},this.urlTree.queryParams)),this.urlTree.fragment,M2(r),wi(r),r.component??r._loadedComponent??null,r,O2(r)),k=q_(b,o,this.paramsInheritanceStrategy);b.params=Object.freeze(k.params),b.data=Object.freeze(k.data);let{segmentGroup:O,slicedSegments:N}=P2(t,p,m,c);if(N.length===0&&O.hasChildren()){let Z=await this.processChildren(l,c,O,b);return new Er(b,Z)}if(c.length===0&&N.length===0)return new Er(b,[]);let z=wi(r)===s,Q=await this.processSegment(l,c,O,N,z?xe:s,!0,b);return new Er(b,Q instanceof Er?[Q]:[])}async getChildConfig(e,t,r){if(t.children)return{routes:t.children,injector:e};if(t.loadChildren){if(t._loadedRoutes!==void 0)return{routes:t._loadedRoutes,injector:t._loadedInjector};if(this.abortSignal.aborted)throw new Error(this.abortSignal.reason);if(await R_(iH(e,t,r,this.urlSerializer,this.abortSignal))){let s=await this.configLoader.loadChildren(e,t);return t._loadedRoutes=s.routes,t._loadedInjector=s.injector,s}throw aH(t)}return{routes:[],injector:e}}};function IH(n){n.sort((e,t)=>e.value.outlet===xe?-1:t.value.outlet===xe?1:e.value.outlet.localeCompare(t.value.outlet))}function bH(n){let e=n.value.routeConfig;return e&&e.path===""}function fO(n){let e=[],t=new Set;for(let r of n){if(!bH(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=fO(r.children);e.push(new Er(r.value,i))}return e.filter(r=>!t.has(r))}function M2(n){return n.data||{}}function O2(n){return n.resolve||{}}var CH=new re("",{factory:()=>_H});function EH(n,e,t,r,i,s,o){let a=n.get(CH);return Fn(c=>le(c).pipe(qn(l=>a(n,e,t,r,l.extractedUrl,i,s,o)),ge(({state:l,tree:h})=>ae(B({},c),{targetSnapshot:l,urlAfterRedirects:h}))))}function TH(n,e){return Fn(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return le(t);let s=new Set(i.map(c=>c.route)),o=new Set;for(let c of s)if(!o.has(c))for(let l of pO(c))o.add(l);let a=0;return De(o).pipe(Jh(c=>s.has(c)?SH(c,r,n,e):(c.data=q_(c,c.parent,n).resolve,le(void 0))),yt(()=>a++),Wm(1),Fn(c=>a===o.size?le(t):On))})}function pO(n){let e=n.children.map(t=>pO(t)).flat();return[n,...e]}function SH(n,e,t,r){let i=n.routeConfig,s=n._resolve;return i?.title!==void 0&&!tO(i)&&(s[rp]=i.title),Qh(()=>(n.data=q_(n,n.parent,t).resolve,DH(s,n,e,r).pipe(ge(o=>(n._resolvedData=o,n.data=B(B({},n.data),o),null)))))}function DH(n,e,t,r){let i=EE(n);if(i.length===0)return le({});let s={};return De(i).pipe(Fn(o=>xH(n[o],e,t,r).pipe(ks(),yt(a=>{if(a instanceof Wu)throw G_(new ua,a);s[o]=a}))),Wm(1),ge(()=>s),Rs(o=>oO(o)?On:Mr(o)))}function xH(n,e,t,r){let i=Qu(e)??r,s=Ju(n,i),o=s.resolve?s.resolve(e,t):dn(i,()=>s(e,t));return Yc(o)}function bE(n){return qn(e=>{let t=n(e);return t?De(t).pipe(ge(()=>e)):le(e)})}var LE=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===xe);return r}getResolvedTitleForRoute(t){return t.data[rp]}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:()=>M(gO),providedIn:"root"})}return n})(),gO=(()=>{class n extends LE{title;constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||n)(Fe(D2))};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Xu=new re("",{factory:()=>({})}),ap=new re(""),mO=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=M(tE);async loadComponent(t,r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return Promise.resolve(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=(async()=>{try{let s=await U2(dn(t,()=>r.loadComponent())),o=await vO(_O(s));return this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=o,o}finally{this.componentLoaders.delete(r)}})();return this.componentLoaders.set(r,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Promise.resolve({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let i=(async()=>{try{let s=await yO(r,this.compiler,t,this.onLoadEndListener);return r._loadedRoutes=s.routes,r._loadedInjector=s.injector,s}finally{this.childrenLoaders.delete(r)}})();return this.childrenLoaders.set(r,i),i}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();async function yO(n,e,t,r){let i=await U2(dn(t,()=>n.loadChildren())),s=await vO(_O(i)),o;s instanceof i_||Array.isArray(s)?o=s:o=await e.compileModuleAsync(s),r&&r(n);let a,c,l=!1;return Array.isArray(o)?(c=o,l=!0):(a=o.create(t).injector,c=a.get(ap,[],{optional:!0,self:!0}).flat()),{routes:c.map(VE),injector:a}}function AH(n){return n&&typeof n=="object"&&"default"in n}function _O(n){return AH(n)?n.default:n}async function vO(n){return n}var J_=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:()=>M(RH),providedIn:"root"})}return n})(),RH=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),wO=new re("");var kH=()=>{},IO=new re(""),bO=(()=>{class n{currentNavigation=he(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=he(null);events=new ye;transitionAbortWithErrorSubject=new ye;configLoader=M(mO);environmentInjector=M(Nt);destroyRef=M(Kn);urlSerializer=M(ip);rootContexts=M(Yu);location=M(Bu);inputBindingEnabled=M(Q_,{optional:!0})!==null;titleStrategy=M(LE);options=M(Xu,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=M(J_);createViewTransition=M(wO,{optional:!0});navigationErrorHandler=M(IO,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>le(void 0);rootComponentType=null;destroyed=!1;constructor(){let t=i=>this.events.next(new V_(i)),r=i=>this.events.next(new L_(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;qt(()=>{this.transitions?.next(ae(B({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,id:r}))})}setupNavigations(t){return this.transitions=new at(null),this.transitions.pipe(pr(r=>r!==null),qn(r=>{let i=!1,s=new AbortController;return le(r).pipe(qn(o=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",Qn.SupersededByNewNavigation),On;this.currentTransition=r;let a=this.lastSuccessfulNavigation();this.currentNavigation.set({id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,targetBrowserUrl:typeof o.extras.browserUrl=="string"?this.urlSerializer.parse(o.extras.browserUrl):o.extras.browserUrl,trigger:o.source,extras:o.extras,previousNavigation:a?ae(B({},a),{previousNavigation:null}):null,abort:()=>s.abort()});let c=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),l=o.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!c&&l!=="reload")return this.events.next(new Hs(o.id,this.urlSerializer.serialize(o.rawUrl),"",Jf.IgnoredSameUrlNavigation)),o.resolve(!1),On;if(this.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return le(o).pipe(qn(h=>(this.events.next(new Qc(h.id,this.urlSerializer.serialize(h.extractedUrl),h.source,h.restoredState)),h.id!==this.navigationId?On:Promise.resolve(h))),EH(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy,s.signal),yt(h=>{r.targetSnapshot=h.targetSnapshot,r.urlAfterRedirects=h.urlAfterRedirects,this.currentNavigation.update(m=>(m.finalUrl=h.urlAfterRedirects,m));let p=new Xf(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(p)}));if(c&&this.urlHandlingStrategy.shouldProcessUrl(o.currentRawUrl)){let{id:h,extractedUrl:p,source:m,restoredState:b,extras:k}=o,O=new Qc(h,this.urlSerializer.serialize(p),m,b);this.events.next(O);let N=Z2(this.rootComponentType).snapshot;return this.currentTransition=r=ae(B({},o),{targetSnapshot:N,urlAfterRedirects:p,extras:ae(B({},k),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update(z=>(z.finalUrl=p,z)),le(r)}else return this.events.next(new Hs(o.id,this.urlSerializer.serialize(o.extractedUrl),"",Jf.IgnoredByUrlHandlingStrategy)),o.resolve(!1),On}),yt(o=>{let a=new P_(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(a)}),ge(o=>(this.currentTransition=r=ae(B({},o),{guards:Uz(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),r)),Yz(this.environmentInjector,o=>this.events.next(o)),yt(o=>{if(r.guardsResult=o.guardsResult,o.guardsResult&&typeof o.guardsResult!="boolean")throw G_(this.urlSerializer,o.guardsResult);let a=new M_(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(a)}),pr(o=>o.guardsResult?!0:(this.cancelNavigationTransition(o,"",Qn.GuardRejected),!1)),bE(o=>{if(o.guards.canActivateChecks.length!==0)return le(o).pipe(yt(a=>{let c=new O_(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(c)}),qn(a=>{let c=!1;return le(a).pipe(TH(this.paramsInheritanceStrategy,this.environmentInjector),yt({next:()=>c=!0,complete:()=>{c||this.cancelNavigationTransition(a,"",Qn.NoDataFromResolver)}}))}),yt(a=>{let c=new F_(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(c)}))}),bE(o=>{let a=l=>{let h=[];if(l.routeConfig?._loadedComponent)l.component=l.routeConfig?._loadedComponent;else if(l.routeConfig?.loadComponent){let p=Qu(l)??this.environmentInjector;h.push(this.configLoader.loadComponent(p,l.routeConfig).then(m=>{l.component=m}))}for(let p of l.children)h.push(...a(p));return h},c=a(o.targetSnapshot.root);return c.length===0?le(o):De(Promise.all(c).then(()=>o))}),bE(()=>this.afterPreactivation()),qn(()=>{let{currentSnapshot:o,targetSnapshot:a}=r,c=this.createViewTransition?.(this.environmentInjector,o.root,a.root);return c?De(c).pipe(ge(()=>r)):le(r)}),ge(o=>{let a=Mz(t.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return this.currentTransition=r=ae(B({},o),{targetRouterState:a}),this.currentNavigation.update(c=>(c.targetRouterState=a,c)),r}),yt(()=>{this.events.next(new Zf)}),Lz(this.rootContexts,t.routeReuseStrategy,o=>this.events.next(o),this.inputBindingEnabled),Vn(1),ui(aO(s.signal).pipe(pr(()=>!i&&!r.targetRouterState),yt(()=>{this.cancelNavigationTransition(r,s.signal.reason+"",Qn.Aborted)}))),yt({next:o=>{i=!0,this.currentNavigation.update(a=>(a.abort=kH,a)),this.lastSuccessfulNavigation.set(qt(this.currentNavigation)),this.events.next(new bi(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects))),this.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{i=!0}}),ui(this.transitionAbortWithErrorSubject.pipe(yt(o=>{throw o}))),yu(()=>{s.abort(),i||this.cancelNavigationTransition(r,"",Qn.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),Rs(o=>{if(this.destroyed)return r.resolve(!1),On;if(i=!0,sO(o))this.events.next(new rs(r.id,this.urlSerializer.serialize(r.extractedUrl),o.message,o.cancellationCode)),Vz(o)?this.events.next(new Gu(o.url,o.navigationBehaviorOptions)):r.resolve(!1);else{let a=new qu(r.id,this.urlSerializer.serialize(r.extractedUrl),o,r.targetSnapshot??void 0);try{let c=dn(this.environmentInjector,()=>this.navigationErrorHandler?.(a));if(c instanceof Wu){let{message:l,cancellationCode:h}=G_(this.urlSerializer,c);this.events.next(new rs(r.id,this.urlSerializer.serialize(r.extractedUrl),l,h)),this.events.next(new Gu(c.redirectTo,c.navigationBehaviorOptions))}else throw this.events.next(a),o}catch(c){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(c)}}return On}))}))}cancelNavigationTransition(t,r,i){let s=new rs(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(s),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=qt(this.currentNavigation),i=r?.targetBrowserUrl??r?.extractedUrl;return t.toString()!==i?.toString()&&!r?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function NH(n){return n!==Kf}var CO=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:()=>M(PH),providedIn:"root"})}return n})(),K_=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},PH=(()=>{class n extends K_{static \u0275fac=(()=>{let t;return function(i){return(t||(t=js(n)))(i||n)}})();static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),UE=(()=>{class n{urlSerializer=M(ip);options=M(Xu,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=M(Bu);urlHandlingStrategy=M(J_);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new Ii;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:t,initialUrl:r,targetBrowserUrl:i}){let s=t!==void 0?this.urlHandlingStrategy.merge(t,r):r,o=i??s;return o instanceof Ii?this.urlSerializer.serialize(o):o}commitTransition({targetRouterState:t,finalUrl:r,initialUrl:i}){r&&t?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=t):this.rawUrlTree=i}routerState=Z2(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:t}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t??this.rawUrlTree)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:()=>M(EO),providedIn:"root"})}return n})(),EO=(()=>{class n extends UE{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{t(r.url,r.state,"popstate")})})}handleRouterEvent(t,r){t instanceof Qc?this.updateStateMemento():t instanceof Hs?this.commitTransition(r):t instanceof Xf?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof Zf?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof rs&&t.code!==Qn.SupersededByNewNavigation&&t.code!==Qn.Redirect?this.restoreHistory(r):t instanceof qu?this.restoreHistory(r,!0):t instanceof bi&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,{extras:r,id:i}){let{replaceUrl:s,state:o}=r;if(this.location.isCurrentPathEqualTo(t)||s){let a=this.browserPageId,c=B(B({},o),this.generateNgRouterState(i,a));this.location.replaceState(t,"",c)}else{let a=B(B({},o),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(t,"",a)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,s=this.currentPageId-i;s!==0?this.location.historyGo(s):this.getCurrentUrlTree()===t.finalUrl&&s===0&&(this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=js(n)))(i||n)}})();static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function jE(n,e){n.events.pipe(pr(t=>t instanceof bi||t instanceof rs||t instanceof qu||t instanceof Hs),ge(t=>t instanceof bi||t instanceof Hs?0:(t instanceof rs?t.code===Qn.Redirect||t.code===Qn.SupersededByNewNavigation:!1)?2:1),pr(t=>t!==2),Vn(1)).subscribe(()=>{e()})}var MH={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},OH={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Zu=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=M(KC);stateManager=M(UE);options=M(Xu,{optional:!0})||{};pendingTasks=M(Ls);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=M(bO);urlSerializer=M(ip);location=M(Bu);urlHandlingStrategy=M(J_);injector=M(Nt);_events=new ye;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=M(CO);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=M(ap,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!M(Q_,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new mt;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,s=qt(this.navigationTransitions.currentNavigation);if(i!==null&&s!==null){if(this.stateManager.handleRouterEvent(r,s),r instanceof rs&&r.code!==Qn.Redirect&&r.code!==Qn.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof bi)this.navigated=!0;else if(r instanceof Gu){let o=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c=B({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||NH(i.source)},o);this.scheduleNavigation(a,Kf,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}Rz(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Kf,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r,i)=>{this.navigateToSyncWithBrowser(t,i,r)})}navigateToSyncWithBrowser(t,r,i){let s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){let c=B({},i);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(s.state=c)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,o,s).catch(c=>{this.disposed||this.injector.get(_r)(c)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return qt(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(VE),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:c}=r,l=c?this.currentUrlTree.fragment:o,h=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":h=B(B({},this.currentUrlTree.queryParams),s);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=s||null}h!==null&&(h=this.removeEmptyProps(h));let p;try{let m=i?i.snapshot:this.routerState.snapshot.root;p=Q2(m)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),p=this.currentUrlTree.root}return Y2(p,t,h,l??null,this.urlSerializer)}navigateByUrl(t,r={skipLocationChange:!1}){let i=da(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,Kf,null,r)}navigate(t,r={skipLocationChange:!1}){return FH(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.console.warn(wu(4018,!1)),this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=B({},MH):r===!1?i=B({},OH):i=r,da(t))return x2(this.currentUrlTree,t,i);let s=this.parseUrl(t);return x2(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,s])=>(s!=null&&(r[i]=s),r),{})}scheduleNavigation(t,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let a,c,l;o?(a=o.resolve,c=o.reject,l=o.promise):l=new Promise((p,m)=>{a=p,c=m});let h=this.pendingTasks.add();return jE(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:s,resolve:a,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(p=>Promise.reject(p))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function FH(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new ce(4008,!1)}var ed=(()=>{class n{router;route;tabIndexAttribute;renderer;el;locationStrategy;reactiveHref=he(null);get href(){return qt(this.reactiveHref)}set href(t){this.reactiveHref.set(t)}target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new ye;applicationErrorHandler=M(_r);options=M(Xu,{optional:!0});constructor(t,r,i,s,o,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=s,this.el=o,this.locationStrategy=a,this.reactiveHref.set(M(new h_("href"),{optional:!0}));let c=o.nativeElement.tagName?.toLowerCase();this.isAnchorElement=c==="a"||c==="area"||!!(typeof customElements=="object"&&customElements.get(c)?.observedAttributes?.includes?.("href")),this.isAnchorElement?this.setTabIndexIfNotOnNativeEl("0"):this.subscribeToNavigationEventsIfNecessary()}subscribeToNavigationEventsIfNecessary(){if(this.subscription!==void 0||!this.isAnchorElement)return;let t=this.preserveFragment,r=i=>i==="merge"||i==="preserve";t||=r(this.queryParamsHandling),t||=!this.queryParamsHandling&&!r(this.options?.defaultQueryParamsHandling),t&&(this.subscription=this.router.events.subscribe(i=>{i instanceof bi&&this.updateHref()}))}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&(this.updateHref(),this.subscribeToNavigationEventsIfNecessary()),this.onChanges.next(this)}routerLinkInput=null;set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(da(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,r,i,s,o){let a=this.urlTree;if(a===null||this.isAnchorElement&&(t!==0||r||i||s||o||typeof this.target=="string"&&this.target!="_self"))return!0;let c={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,c)?.catch(l=>{this.applicationErrorHandler(l)}),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.reactiveHref.set(t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t))??"":null)}applyAttributeValue(t,r){let i=this.renderer,s=this.el.nativeElement;r!==null?i.setAttribute(s,t,r):i.removeAttribute(s,t)}get urlTree(){return this.routerLinkInput===null?null:da(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||n)(je(Zu),je(qs),Ef("tabindex"),je(yi),je(zt),je(ju))};static \u0275dir=Rt({type:n,selectors:[["","routerLink",""]],hostVars:2,hostBindings:function(r,i){r&1&&Y("click",function(o){return i.onClick(o.button,o.ctrlKey,o.shiftKey,o.altKey,o.metaKey)}),r&2&&$c("href",i.reactiveHref(),kC)("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",or],skipLocationChange:[2,"skipLocationChange","skipLocationChange",or],replaceUrl:[2,"replaceUrl","replaceUrl",or],routerLink:"routerLink"},features:[jr]})}return n})(),BE=(()=>{class n{router;element;renderer;cdr;links;classes=[];routerEventsSubscription;linkInputChangesSubscription;_isActive=!1;get isActive(){return this._isActive}routerLinkActiveOptions={exact:!1};ariaCurrentWhenActive;isActiveChange=new We;link=M(ed,{optional:!0});constructor(t,r,i,s){this.router=t,this.element=r,this.renderer=i,this.cdr=s,this.routerEventsSubscription=t.events.subscribe(o=>{o instanceof bi&&this.update()})}ngAfterContentInit(){le(this.links.changes,le(null)).pipe(Yo()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();let t=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=De(t).pipe(Yo()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(t){let r=Array.isArray(t)?t:t.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(t){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{let t=this.hasActiveLinks();this.classes.forEach(r=>{t?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),t&&this.ariaCurrentWhenActive!==void 0?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==t&&(this._isActive=t,this.cdr.markForCheck(),this.isActiveChange.emit(t))})}isLinkActive(t){let r=LH(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>{let s=i.urlTree;return s?t.isActive(s,r):!1}}hasActiveLinks(){let t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.links.some(t)}static \u0275fac=function(r){return new(r||n)(je(Zu),je(zt),je(yi),je($r))};static \u0275dir=Rt({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(r,i,s){if(r&1&&a_(s,ed,5),r&2){let o;c_(o=l_())&&(i.links=o)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[jr]})}return n})();function LH(n){return!!n.paths}var UH=new re("");function $E(n,...e){return gr([{provide:ap,multi:!0,useValue:n},[],{provide:qs,useFactory:jH},{provide:o_,multi:!0,useFactory:BH},e.map(t=>t.\u0275providers)])}function jH(){return M(Zu).routerState.root}function BH(){let n=M(wt);return e=>{let t=n.get(_i);if(e!==t.components[0])return;let r=n.get(Zu),i=n.get($H);n.get(zH)===1&&r.initialNavigation(),n.get(HH,null,{optional:!0})?.setUpPreloading(),n.get(UH,null,{optional:!0})?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var $H=new re("",{factory:()=>new ye}),zH=new re("",{factory:()=>1});var HH=new re("");var TO=()=>{};var xO=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},qH=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=n[t++],o=n[t++],a=n[t++],c=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let s=n[t++],o=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},X_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let s=n[i],o=i+1<n.length,a=o?n[i+1]:0,c=i+2<n.length,l=c?n[i+2]:0,h=s>>2,p=(s&3)<<4|a>>4,m=(a&15)<<2|l>>6,b=l&63;c||(b=64,o||(m=64)),r.push(t[h],t[p],t[m],t[b])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(xO(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):qH(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let s=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let l=i<n.length?t[n.charAt(i)]:64;++i;let p=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||a==null||l==null||p==null)throw new HE;let m=s<<2|a>>4;if(r.push(m),l!==64){let b=a<<4&240|l>>2;if(r.push(b),p!==64){let k=l<<6&192|p;r.push(k)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},HE=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},GH=function(n){let e=xO(n);return X_.encodeByteArray(e,!0)},lp=function(n){return GH(n).replace(/\./g,"")},Z_=function(n){try{return X_.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function GE(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var WH=()=>GE().__FIREBASE_DEFAULTS__,KH=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},QH=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&Z_(n[1]);return e&&JSON.parse(e)},ev=()=>{try{return TO()||WH()||KH()||QH()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},WE=n=>{var e,t;return(t=(e=ev())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},AO=n=>{let e=WE(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},KE=()=>{var n;return(n=ev())===null||n===void 0?void 0:n.config},QE=n=>{var e;return(e=ev())===null||e===void 0?void 0:e[`_${n}`]};var Jc=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function ha(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function tv(n){return(await fetch(n,{credentials:"include"})).ok}function RO(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[lp(JSON.stringify(t)),lp(JSON.stringify(o)),""].join(".")}var cp={};function YH(){let n={prod:[],emulator:[]};for(let e of Object.keys(cp))cp[e]?n.emulator.push(e):n.prod.push(e);return n}function JH(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}var SO=!1;function nv(n,e){if(typeof window>"u"||typeof document>"u"||!ha(window.location.host)||cp[n]===e||cp[n]||SO)return;cp[n]=e;function t(m){return`__firebase__banner__${m}`}let r="__firebase__banner",s=YH().prod.length>0;function o(){let m=document.getElementById(r);m&&m.remove()}function a(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function c(m,b){m.setAttribute("width","24"),m.setAttribute("id",b),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function l(){let m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{SO=!0,o()},m}function h(m,b){m.setAttribute("id",b),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function p(){let m=JH(r),b=t("text"),k=document.getElementById(b)||document.createElement("span"),O=t("learnmore"),N=document.getElementById(O)||document.createElement("a"),z=t("preprendIcon"),Q=document.getElementById(z)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){let Z=m.element;a(Z),h(N,O);let Ce=l();c(Q,z),Z.append(Q,k,N,Ce),document.body.appendChild(Z)}s?(k.innerText="Preview backend disconnected.",Q.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Q.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,k.innerText="Preview backend running in this workspace."),k.setAttribute("id",b)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}function In(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function kO(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(In())}function XH(){var n;let e=(n=ev())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function NO(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function PO(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function MO(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function OO(){let n=In();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function FO(){return!XH()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function up(){try{return typeof indexedDB=="object"}catch{return!1}}function VO(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}var ZH="FirebaseError",Sr=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=ZH,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ci.prototype.create)}},Ci=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?eq(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Sr(i,a,r)}};function eq(n,e){return n.replace(tq,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var tq=/\{\$([^}]+)}/g;function LO(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function is(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let s=n[i],o=e[i];if(DO(s)&&DO(o)){if(!is(s,o))return!1}else if(s!==o)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function DO(n){return n!==null&&typeof n=="object"}function dp(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function UO(n,e){let t=new qE(n,e);return t.subscribe.bind(t)}var qE=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");nq(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=zE),i.error===void 0&&(i.error=zE),i.complete===void 0&&(i.complete=zE);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function nq(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function zE(){}var b0e=14400*1e3;function pn(n){return n&&n._delegate?n._delegate:n}var Yn=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Xc="[DEFAULT]";var YE=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new Jc;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(iq(e))try{this.getOrInitializeService({instanceIdentifier:Xc})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Xc){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){let e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Xc){return this.instances.has(e)}getOptions(e=Xc){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[s,o]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);let o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:rq(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Xc){return this.component?this.component.multipleInstances?e:Xc:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function rq(n){return n===Xc?void 0:n}function iq(n){return n.instantiationMode==="EAGER"}var rv=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new YE(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var sq=[],$e=(function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n})($e||{}),oq={debug:$e.DEBUG,verbose:$e.VERBOSE,info:$e.INFO,warn:$e.WARN,error:$e.ERROR,silent:$e.SILENT},aq=$e.INFO,cq={[$e.DEBUG]:"log",[$e.VERBOSE]:"log",[$e.INFO]:"info",[$e.WARN]:"warn",[$e.ERROR]:"error"},lq=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=cq[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},ss=class{constructor(e){this.name=e,this._logLevel=aq,this._logHandler=lq,this._userLogHandler=null,sq.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in $e))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?oq[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,$e.DEBUG,...e),this._logHandler(this,$e.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,$e.VERBOSE,...e),this._logHandler(this,$e.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,$e.INFO,...e),this._logHandler(this,$e.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,$e.WARN,...e),this._logHandler(this,$e.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,$e.ERROR,...e),this._logHandler(this,$e.ERROR,...e)}};var uq=(n,e)=>e.some(t=>n instanceof t),jO,BO;function dq(){return jO||(jO=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function hq(){return BO||(BO=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var $O=new WeakMap,XE=new WeakMap,zO=new WeakMap,JE=new WeakMap,eT=new WeakMap;function fq(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(os(n.result)),i()},o=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&$O.set(t,n)}).catch(()=>{}),eT.set(e,n),e}function pq(n){if(XE.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),i()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});XE.set(n,e)}var ZE={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return XE.get(n);if(e==="objectStoreNames")return n.objectStoreNames||zO.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return os(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function HO(n){ZE=n(ZE)}function gq(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(iv(this),e,...t);return zO.set(r,e.sort?e.sort():[e]),os(r)}:hq().includes(n)?function(...e){return n.apply(iv(this),e),os($O.get(this))}:function(...e){return os(n.apply(iv(this),e))}}function mq(n){return typeof n=="function"?gq(n):(n instanceof IDBTransaction&&pq(n),uq(n,dq())?new Proxy(n,ZE):n)}function os(n){if(n instanceof IDBRequest)return fq(n);if(JE.has(n))return JE.get(n);let e=mq(n);return e!==n&&(JE.set(n,e),eT.set(e,n)),e}var iv=n=>eT.get(n);function sv(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){let o=indexedDB.open(n,e),a=os(o);return r&&o.addEventListener("upgradeneeded",c=>{r(os(o.result),c.oldVersion,c.newVersion,os(o.transaction),c)}),t&&o.addEventListener("blocked",c=>t(c.oldVersion,c.newVersion,c)),a.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var yq=["get","getKey","getAll","getAllKeys","count"],_q=["put","add","delete","clear"],tT=new Map;function qO(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(tT.get(e))return tT.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=_q.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||yq.includes(t)))return;let s=async function(o,...a){let c=this.transaction(o,i?"readwrite":"readonly"),l=c.store;return r&&(l=l.index(a.shift())),(await Promise.all([l[t](...a),i&&c.done]))[0]};return tT.set(e,s),s}HO(n=>ae(B({},n),{get:(e,t,r)=>qO(e,t)||n.get(e,t,r),has:(e,t)=>!!qO(e,t)||n.has(e,t)}));var rT=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(vq(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function vq(n){let e=n.getComponent();return e?.type==="VERSION"}var iT="@firebase/app",GO="0.13.2";var Gs=new ss("@firebase/app"),wq="@firebase/app-compat",Iq="@firebase/analytics-compat",bq="@firebase/analytics",Cq="@firebase/app-check-compat",Eq="@firebase/app-check",Tq="@firebase/auth",Sq="@firebase/auth-compat",Dq="@firebase/database",xq="@firebase/data-connect",Aq="@firebase/database-compat",Rq="@firebase/functions",kq="@firebase/functions-compat",Nq="@firebase/installations",Pq="@firebase/installations-compat",Mq="@firebase/messaging",Oq="@firebase/messaging-compat",Fq="@firebase/performance",Vq="@firebase/performance-compat",Lq="@firebase/remote-config",Uq="@firebase/remote-config-compat",jq="@firebase/storage",Bq="@firebase/storage-compat",$q="@firebase/firestore",zq="@firebase/ai",Hq="@firebase/firestore-compat",qq="firebase",Gq="11.10.0";var sT="[DEFAULT]",Wq={[iT]:"fire-core",[wq]:"fire-core-compat",[bq]:"fire-analytics",[Iq]:"fire-analytics-compat",[Eq]:"fire-app-check",[Cq]:"fire-app-check-compat",[Tq]:"fire-auth",[Sq]:"fire-auth-compat",[Dq]:"fire-rtdb",[xq]:"fire-data-connect",[Aq]:"fire-rtdb-compat",[Rq]:"fire-fn",[kq]:"fire-fn-compat",[Nq]:"fire-iid",[Pq]:"fire-iid-compat",[Mq]:"fire-fcm",[Oq]:"fire-fcm-compat",[Fq]:"fire-perf",[Vq]:"fire-perf-compat",[Lq]:"fire-rc",[Uq]:"fire-rc-compat",[jq]:"fire-gcs",[Bq]:"fire-gcs-compat",[$q]:"fire-fst",[Hq]:"fire-fst-compat",[zq]:"fire-vertex","fire-js":"fire-js",[qq]:"fire-js-all"};var hp=new Map,Kq=new Map,oT=new Map;function WO(n,e){try{n.container.addComponent(e)}catch(t){Gs.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Ei(n){let e=n.name;if(oT.has(e))return Gs.debug(`There were multiple attempts to register component ${e}.`),!1;oT.set(e,n);for(let t of hp.values())WO(t,n);for(let t of Kq.values())WO(t,n);return!0}function td(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function qr(n){return n==null?!1:n.settings!==void 0}var Qq={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},fa=new Ci("app","Firebase",Qq);var aT=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Yn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw fa.create("app-deleted",{appName:this._name})}};var pa=Gq;function uT(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:sT,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw fa.create("bad-app-name",{appName:String(i)});if(t||(t=KE()),!t)throw fa.create("no-options");let s=hp.get(i);if(s){if(is(t,s.options)&&is(r,s.config))return s;throw fa.create("duplicate-app",{appName:i})}let o=new rv(i);for(let c of oT.values())o.addComponent(c);let a=new aT(t,r,o);return hp.set(i,a),a}function Zc(n=sT){let e=hp.get(n);if(!e&&n===sT&&KE())return uT();if(!e)throw fa.create("no-app",{appName:n});return e}function ov(){return Array.from(hp.values())}function Ft(n,e,t){var r;let i=(r=Wq[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Gs.warn(a.join(" "));return}Ei(new Yn(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var Yq="firebase-heartbeat-database",Jq=1,fp="firebase-heartbeat-store",nT=null;function JO(){return nT||(nT=sv(Yq,Jq,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(fp)}catch(t){console.warn(t)}}}}).catch(n=>{throw fa.create("idb-open",{originalErrorMessage:n.message})})),nT}async function Xq(n){try{let t=(await JO()).transaction(fp),r=await t.objectStore(fp).get(XO(n));return await t.done,r}catch(e){if(e instanceof Sr)Gs.warn(e.message);else{let t=fa.create("idb-get",{originalErrorMessage:e?.message});Gs.warn(t.message)}}}async function KO(n,e){try{let r=(await JO()).transaction(fp,"readwrite");await r.objectStore(fp).put(e,XO(n)),await r.done}catch(t){if(t instanceof Sr)Gs.warn(t.message);else{let r=fa.create("idb-set",{originalErrorMessage:t?.message});Gs.warn(r.message)}}}function XO(n){return`${n.name}!${n.options.appId}`}var Zq=1024,eG=30,cT=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new lT(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=QO();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>eG){let o=nG(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Gs.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=QO(),{heartbeatsToSend:r,unsentEntries:i}=tG(this._heartbeatsCache.heartbeats),s=lp(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return Gs.warn(t),""}}};function QO(){return new Date().toISOString().substring(0,10)}function tG(n,e=Zq){let t=[],r=n.slice();for(let i of n){let s=t.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),YO(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),YO(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var lT=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return up()?VO().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){let t=await Xq(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){let i=await this.read();return KO(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){let i=await this.read();return KO(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}};function YO(n){return lp(JSON.stringify({version:2,heartbeats:n})).length}function nG(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function rG(n){Ei(new Yn("platform-logger",e=>new rT(e),"PRIVATE")),Ei(new Yn("heartbeat",e=>new cT(e),"PRIVATE")),Ft(iT,GO,n),Ft(iT,GO,"esm2017"),Ft("fire-js","")}rG("");var iG="firebase",sG="11.10.0";Ft(iG,sG,"app");function ZO(n,e){let r=!e?.manualCleanup?e?.injector?.get(Kn)??M(Kn):null,i=oG(e?.equal),s;e?.requireSync?s=he({kind:0},{equal:i}):s=he({kind:1,value:e?.initialValue},{equal:i});let o,a=n.subscribe({next:c=>s.set({kind:1,value:c}),error:c=>{s.set({kind:2,error:c}),o?.()},complete:()=>{o?.()}});if(e?.requireSync&&s().kind===0)throw new ce(601,!1);return o=r?.onDestroy(a.unsubscribe.bind(a)),ze(()=>{let c=s();switch(c.kind){case 1:return c.value;case 2:throw c.error;case 0:throw new ce(601,!1)}},{equal:e?.equal})}function oG(n=Object.is){return(e,t)=>e.kind===1&&t.kind===1&&n(e.value,t.value)}function eF(n){n===void 0&&(n=M(wt));let e=n.get(xu);return t=>new Se(r=>{let i=e.add(),s=!1;function o(){s||(i(),s=!0)}let a=t.subscribe({next:c=>{r.next(c),o()},complete:()=>{r.complete(),o()},error:c=>{r.error(c),o()}});return a.add(()=>{r.unsubscribe(),o()}),a})}var ga=new vc("ANGULARFIRE2_VERSION");function pp(n,e,t){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===t);if(s.length===1)return s[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var rd=(n,e)=>{let t=e?[e]:ov(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},nd=(function(n){return n[n.SILENT=0]="SILENT",n[n.WARN=1]="WARN",n[n.VERBOSE=2]="VERBOSE",n})(nd||{}),tF=rE()&&typeof Zone<"u"?nd.WARN:nd.SILENT;var av=class{zone;delegate;constructor(e,t=xI){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,s=function(o){i?i.runGuarded(()=>{e.apply(this,[o])}):e.apply(this,[o])};return this.delegate.schedule(s,t,r)}},ma=(()=>{class n{outsideAngular;insideAngular;constructor(){let t=M(it);this.outsideAngular=t.runOutsideAngular(()=>new av(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=t.run(()=>new av(typeof Zone>"u"?void 0:Zone.current,Wo))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),nF=!1;function aG(n,e){!nF&&(tF>nd.SILENT||rE())&&(nF=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),tF>=e&&console.warn(`Firebase API called outside injection context: ${n.name}`)}function cG(n){let e=M(it,{optional:!0});return e?e.runOutsideAngular(()=>n()):n()}function el(n){let e=M(it,{optional:!0});return e?e.run(()=>n()):n()}var lG=(n,e,t)=>(...r)=>(e&&setTimeout(e,0),dn(t,()=>el(()=>n.apply(void 0,r)))),bn=(n,e,t)=>(t||=e?nd.WARN:nd.VERBOSE,function(){let r,i=arguments,s,o,a;try{s=M(ma),o=M(xu),a=M(Nt)}catch{return aG(n,t),n.apply(this,i)}for(let l=0;l<arguments.length;l++)typeof i[l]=="function"&&(e&&(r||=el(()=>o.add())),i[l]=lG(i[l],r,a));let c=cG(()=>n.apply(this,i));return e?c instanceof Se?c.pipe(Qo(s.outsideAngular),Ko(s.insideAngular),eF(a)):c instanceof Promise?el(()=>{let l=o.add();return new Promise((h,p)=>{c.then(m=>dn(a,()=>el(()=>h(m))),m=>dn(a,()=>el(()=>p(m)))).finally(l)})}):typeof c=="function"&&r?function(){return setTimeout(r,0),c.apply(this,arguments)}:el(()=>c):c instanceof Se?c.pipe(Qo(s.outsideAngular),Ko(s.insideAngular)):el(()=>c)});var Ws=class{constructor(e){return e}},tl=class{constructor(){return ov()}};function uG(n){return n&&n.length===1?n[0]:new Ws(Zc())}var dT=new re("angularfire2._apps"),dG={provide:Ws,useFactory:uG,deps:[[new Ir,dT]]},hG={provide:tl,deps:[[new Ir,dT]]};function fG(n){return(e,t)=>{let r=t.get(Bs);Ft("angularfire",ga.full,"core"),Ft("angularfire",ga.full,"app"),Ft("angular",KI.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new Ws(i)}}function rF(n,...e){return gr([dG,hG,{provide:dT,useFactory:fG(n),multi:!0,deps:[it,wt,ma,...e]}])}var iF=bn(uT,!0);var pG=new Map,gG={activated:!1,tokenObservers:[]},mG={initialized:!1,enabled:!1};function Ti(n){return pG.get(n)||Object.assign({},gG)}function cF(){return mG}var yG="https://content-firebaseappcheck.googleapis.com/v1";var _G="exchangeDebugToken",sF={OFFSET_DURATION:300*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:960*1e3},Cwe=1440*60*1e3;var pT=class{constructor(e,t,r,i,s){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(e){this.stop();try{this.pending=new Jc,this.pending.promise.catch(t=>{}),await vG(this.getNextRun(e)),this.pending.resolve(),await this.pending.promise,this.pending=new Jc,this.pending.promise.catch(t=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function vG(n){return new Promise(e=>{setTimeout(e,n)})}var wG={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},ya=new Ci("appCheck","AppCheck",wG);function lF(n){if(!Ti(n).activated)throw ya.create("use-before-activation",{appName:n.name})}async function uF({url:n,body:e},t){let r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){let p=await i.getHeartbeatsHeader();p&&(r["X-Firebase-Client"]=p)}let s={method:"POST",body:JSON.stringify(e),headers:r},o;try{o=await fetch(n,s)}catch(p){throw ya.create("fetch-network-error",{originalErrorMessage:p?.message})}if(o.status!==200)throw ya.create("fetch-status-error",{httpStatus:o.status});let a;try{a=await o.json()}catch(p){throw ya.create("fetch-parse-error",{originalErrorMessage:p?.message})}let c=a.ttl.match(/^([\d.]+)(s)$/);if(!c||!c[2]||isNaN(Number(c[1])))throw ya.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});let l=Number(c[1])*1e3,h=Date.now();return{token:a.token,expireTimeMillis:h+l,issuedAtTimeMillis:h}}function dF(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${yG}/projects/${t}/apps/${r}:${_G}?key=${i}`,body:{debug_token:e}}}var IG="firebase-app-check-database",bG=1,gT="firebase-app-check-store";var cv=null;function CG(){return cv||(cv=new Promise((n,e)=>{try{let t=indexedDB.open(IG,bG);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(ya.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(gT,{keyPath:"compositeKey"})}}}catch(t){e(ya.create("storage-open",{originalErrorMessage:t?.message}))}}),cv)}function EG(n,e){return TG(SG(n),e)}async function TG(n,e){let r=(await CG()).transaction(gT,"readwrite"),s=r.objectStore(gT).put({compositeKey:n,value:e});return new Promise((o,a)=>{s.onsuccess=c=>{o()},r.onerror=c=>{var l;a(ya.create("storage-set",{originalErrorMessage:(l=c.target.error)===null||l===void 0?void 0:l.message}))}})}function SG(n){return`${n.options.appId}-${n.name}`}var gp=new ss("@firebase/app-check");function hT(n,e){return up()?EG(n,e).catch(t=>{gp.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function hF(){return cF().enabled}async function fF(){let n=cF();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}var DG={error:"UNKNOWN_ERROR"};function xG(n){return X_.encodeString(JSON.stringify(n),!1)}async function mT(n,e=!1,t=!1){let r=n.app;lF(r);let i=Ti(r),s=i.token,o;if(s&&!mp(s)&&(i.token=void 0,s=void 0),!s){let l=await i.cachedTokenPromise;l&&(mp(l)?s=l:await hT(r,void 0))}if(!e&&s&&mp(s))return{token:s.token};let a=!1;if(hF())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=uF(dF(r,await fF()),n.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),a=!0);let l=await i.exchangeTokenPromise;return await hT(r,l),i.token=l,{token:l.token}}catch(l){return l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?gp.warn(l.message):t&&gp.error(l),fT(l)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),a=!0),s=await Ti(r).exchangeTokenPromise}catch(l){l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?gp.warn(l.message):t&&gp.error(l),o=l}let c;return s?o?mp(s)?c={token:s.token,internalError:o}:c=fT(o):(c={token:s.token},i.token=s,await hT(r,s)):c=fT(o),a&&NG(r,c),c}async function AG(n){let e=n.app;lF(e);let{provider:t}=Ti(e);if(hF()){let r=await fF(),{token:i}=await uF(dF(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=await t.getToken();return{token:r}}}function RG(n,e,t,r){let{app:i}=n,s=Ti(i),o={next:t,error:r,type:e};if(s.tokenObservers=[...s.tokenObservers,o],s.token&&mp(s.token)){let a=s.token;Promise.resolve().then(()=>{t({token:a.token}),oF(n)}).catch(()=>{})}s.cachedTokenPromise.then(()=>oF(n))}function pF(n,e){let t=Ti(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function oF(n){let{app:e}=n,t=Ti(e),r=t.tokenRefresher;r||(r=kG(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function kG(n){let{app:e}=n;return new pT(async()=>{let t=Ti(e),r;if(t.token?r=await mT(n,!0):r=await mT(n),r.error)throw r.error;if(r.internalError)throw r.internalError},()=>!0,()=>{let t=Ti(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-300*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},sF.RETRIAL_MIN_WAIT,sF.RETRIAL_MAX_WAIT)}function NG(n,e){let t=Ti(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function mp(n){return n.expireTimeMillis-Date.now()>0}function fT(n){return{token:xG(DG),error:n}}var yT=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=Ti(this.app);for(let t of e)pF(this.app,t.next);return Promise.resolve()}};function PG(n,e){return new yT(n,e)}function MG(n){return{getToken:e=>mT(n,e),getLimitedUseToken:()=>AG(n),addTokenListener:e=>RG(n,"INTERNAL",e),removeTokenListener:e=>pF(n.app,e)}}var OG="@firebase/app-check",FG="0.10.1";var VG="app-check",aF="app-check-internal";function LG(){Ei(new Yn(VG,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return PG(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(aF).initialize()})),Ei(new Yn(aF,n=>{let e=n.getProvider("app-check").getImmediate();return MG(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Ft(OG,FG)}LG();var UG="app-check";var id=class{constructor(){return rd(UG)}};var jG=["localhost","0.0.0.0","127.0.0.1"],Owe=typeof window<"u"&&jG.includes(window.location.hostname);var gF=()=>{};var _F=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},BG=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=n[t++],o=n[t++],a=n[t++],c=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let s=n[t++],o=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},vF={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let s=n[i],o=i+1<n.length,a=o?n[i+1]:0,c=i+2<n.length,l=c?n[i+2]:0,h=s>>2,p=(s&3)<<4|a>>4,m=(a&15)<<2|l>>6,b=l&63;c||(b=64,o||(m=64)),r.push(t[h],t[p],t[m],t[b])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(_F(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):BG(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let s=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let l=i<n.length?t[n.charAt(i)]:64;++i;let p=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||a==null||l==null||p==null)throw new _T;let m=s<<2|a>>4;if(r.push(m),l!==64){let b=a<<4&240|l>>2;if(r.push(b),p!==64){let k=l<<6&192|p;r.push(k)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},_T=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},$G=function(n){let e=_F(n);return vF.encodeByteArray(e,!0)},_p=function(n){return $G(n).replace(/\./g,"")},wF=function(n){try{return vF.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function IF(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var zG=()=>IF().__FIREBASE_DEFAULTS__,HG=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},qG=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&wF(n[1]);return e&&JSON.parse(e)},vT=()=>{try{return gF()||zG()||HG()||qG()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},GG=n=>vT()?.emulatorHosts?.[n],bF=n=>{let e=GG(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},wT=()=>vT()?.config;var lv=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function uv(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function CF(n){return(await fetch(n,{credentials:"include"})).ok}function EF(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=B({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[_p(JSON.stringify(t)),_p(JSON.stringify(o)),""].join(".")}var yp={};function WG(){let n={prod:[],emulator:[]};for(let e of Object.keys(yp))yp[e]?n.emulator.push(e):n.prod.push(e);return n}function KG(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}var mF=!1;function TF(n,e){if(typeof window>"u"||typeof document>"u"||!uv(window.location.host)||yp[n]===e||yp[n]||mF)return;yp[n]=e;function t(m){return`__firebase__banner__${m}`}let r="__firebase__banner",s=WG().prod.length>0;function o(){let m=document.getElementById(r);m&&m.remove()}function a(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function c(m,b){m.setAttribute("width","24"),m.setAttribute("id",b),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function l(){let m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{mF=!0,o()},m}function h(m,b){m.setAttribute("id",b),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function p(){let m=KG(r),b=t("text"),k=document.getElementById(b)||document.createElement("span"),O=t("learnmore"),N=document.getElementById(O)||document.createElement("a"),z=t("preprendIcon"),Q=document.getElementById(z)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){let Z=m.element;a(Z),h(N,O);let Ce=l();c(Q,z),Z.append(Q,k,N,Ce),document.body.appendChild(Z)}s?(k.innerText="Preview backend disconnected.",Q.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Q.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,k.innerText="Preview backend running in this workspace."),k.setAttribute("id",b)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}function SF(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function QG(){let n=vT()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function DF(){return!QG()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function IT(){try{return typeof indexedDB=="object"}catch{return!1}}function xF(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(t){e(t)}})}var YG="FirebaseError",Ks=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=YG,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,vp.prototype.create)}},vp=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?JG(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Ks(i,a,r)}};function JG(n,e){return n.replace(XG,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var XG=/\{\$([^}]+)}/g;function sd(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let s=n[i],o=e[i];if(yF(s)&&yF(o)){if(!sd(s,o))return!1}else if(s!==o)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function yF(n){return n!==null&&typeof n=="object"}var jwe=14400*1e3;function Si(n){return n&&n._delegate?n._delegate:n}var Qs=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var nl="[DEFAULT]";var bT=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new lv;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){let t=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(eW(e))try{this.getOrInitializeService({instanceIdentifier:nl})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=nl){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){let e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=nl){return this.instances.has(e)}getOptions(e=nl){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[s,o]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,t){let r=this.normalizeInstanceIdentifier(t),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);let s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:ZG(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=nl){return this.component?this.component.multipleInstances?e:nl:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function ZG(n){return n===nl?void 0:n}function eW(n){return n.instantiationMode==="EAGER"}var dv=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new bT(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var tW=[],Ke=(function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n})(Ke||{}),nW={debug:Ke.DEBUG,verbose:Ke.VERBOSE,info:Ke.INFO,warn:Ke.WARN,error:Ke.ERROR,silent:Ke.SILENT},rW=Ke.INFO,iW={[Ke.DEBUG]:"log",[Ke.VERBOSE]:"log",[Ke.INFO]:"info",[Ke.WARN]:"warn",[Ke.ERROR]:"error"},sW=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=iW[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},od=class{constructor(e){this.name=e,this._logLevel=rW,this._logHandler=sW,this._userLogHandler=null,tW.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ke))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?nW[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ke.DEBUG,...e),this._logHandler(this,Ke.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ke.VERBOSE,...e),this._logHandler(this,Ke.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ke.INFO,...e),this._logHandler(this,Ke.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ke.WARN,...e),this._logHandler(this,Ke.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ke.ERROR,...e),this._logHandler(this,Ke.ERROR,...e)}};var ET=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(oW(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function oW(n){return n.getComponent()?.type==="VERSION"}var TT="@firebase/app",AF="0.14.6";var Ys=new od("@firebase/app"),aW="@firebase/app-compat",cW="@firebase/analytics-compat",lW="@firebase/analytics",uW="@firebase/app-check-compat",dW="@firebase/app-check",hW="@firebase/auth",fW="@firebase/auth-compat",pW="@firebase/database",gW="@firebase/data-connect",mW="@firebase/database-compat",yW="@firebase/functions",_W="@firebase/functions-compat",vW="@firebase/installations",wW="@firebase/installations-compat",IW="@firebase/messaging",bW="@firebase/messaging-compat",CW="@firebase/performance",EW="@firebase/performance-compat",TW="@firebase/remote-config",SW="@firebase/remote-config-compat",DW="@firebase/storage",xW="@firebase/storage-compat",AW="@firebase/firestore",RW="@firebase/ai",kW="@firebase/firestore-compat",NW="firebase",PW="12.6.0";var ST="[DEFAULT]",MW={[TT]:"fire-core",[aW]:"fire-core-compat",[lW]:"fire-analytics",[cW]:"fire-analytics-compat",[dW]:"fire-app-check",[uW]:"fire-app-check-compat",[hW]:"fire-auth",[fW]:"fire-auth-compat",[pW]:"fire-rtdb",[gW]:"fire-data-connect",[mW]:"fire-rtdb-compat",[yW]:"fire-fn",[_W]:"fire-fn-compat",[vW]:"fire-iid",[wW]:"fire-iid-compat",[IW]:"fire-fcm",[bW]:"fire-fcm-compat",[CW]:"fire-perf",[EW]:"fire-perf-compat",[TW]:"fire-rc",[SW]:"fire-rc-compat",[DW]:"fire-gcs",[xW]:"fire-gcs-compat",[AW]:"fire-fst",[kW]:"fire-fst-compat",[RW]:"fire-vertex","fire-js":"fire-js",[NW]:"fire-js-all"};var hv=new Map,OW=new Map,DT=new Map;function RF(n,e){try{n.container.addComponent(e)}catch(t){Ys.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function wp(n){let e=n.name;if(DT.has(e))return Ys.debug(`There were multiple attempts to register component ${e}.`),!1;DT.set(e,n);for(let t of hv.values())RF(t,n);for(let t of OW.values())RF(t,n);return!0}function MF(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function OF(n){return n==null?!1:n.settings!==void 0}var FW={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},_a=new vp("app","Firebase",FW);var xT=class{constructor(e,t,r){this._isDeleted=!1,this._options=B({},e),this._config=B({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Qs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw _a.create("app-deleted",{appName:this._name})}};var FF=PW;function bp(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=B({name:ST,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw _a.create("bad-app-name",{appName:String(i)});if(t||(t=wT()),!t)throw _a.create("no-options");let s=hv.get(i);if(s){if(sd(t,s.options)&&sd(r,s.config))return s;throw _a.create("duplicate-app",{appName:i})}let o=new dv(i);for(let c of DT.values())o.addComponent(c);let a=new xT(t,r,o);return hv.set(i,a),a}function VF(n=ST){let e=hv.get(n);if(!e&&n===ST&&wT())return bp();if(!e)throw _a.create("no-app",{appName:n});return e}function va(n,e,t){let r=MW[n]??n;t&&(r+=`-${t}`);let i=r.match(/\s|\//),s=e.match(/\s|\//);if(i||s){let o=[`Unable to register library "${r}" with version "${e}":`];i&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&s&&o.push("and"),s&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ys.warn(o.join(" "));return}wp(new Qs(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}var VW="firebase-heartbeat-database",LW=1,Ip="firebase-heartbeat-store",CT=null;function LF(){return CT||(CT=sv(VW,LW,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Ip)}catch(t){console.warn(t)}}}}).catch(n=>{throw _a.create("idb-open",{originalErrorMessage:n.message})})),CT}async function UW(n){try{let t=(await LF()).transaction(Ip),r=await t.objectStore(Ip).get(UF(n));return await t.done,r}catch(e){if(e instanceof Ks)Ys.warn(e.message);else{let t=_a.create("idb-get",{originalErrorMessage:e?.message});Ys.warn(t.message)}}}async function kF(n,e){try{let r=(await LF()).transaction(Ip,"readwrite");await r.objectStore(Ip).put(e,UF(n)),await r.done}catch(t){if(t instanceof Ks)Ys.warn(t.message);else{let r=_a.create("idb-set",{originalErrorMessage:t?.message});Ys.warn(r.message)}}}function UF(n){return`${n.name}!${n.options.appId}`}var jW=1024,BW=30,AT=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new RT(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{let t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=NF();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>BW){let i=zW(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Ys.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";let e=NF(),{heartbeatsToSend:t,unsentEntries:r}=$W(this._heartbeatsCache.heartbeats),i=_p(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return Ys.warn(e),""}}};function NF(){return new Date().toISOString().substring(0,10)}function $W(n,e=jW){let t=[],r=n.slice();for(let i of n){let s=t.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),PF(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),PF(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var RT=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return IT()?xF().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){let t=await UW(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){let r=await this.read();return kF(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){let r=await this.read();return kF(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}};function PF(n){return _p(JSON.stringify({version:2,heartbeats:n})).length}function zW(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function HW(n){wp(new Qs("platform-logger",e=>new ET(e),"PRIVATE")),wp(new Qs("heartbeat",e=>new AT(e),"PRIVATE")),va(TT,AF,n),va(TT,AF,"esm2020"),va("fire-js","")}HW("");function eV(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var tV=eV,nV=new Ci("auth","Firebase",eV());var _v=new ss("@firebase/auth");function qW(n,...e){_v.logLevel<=$e.WARN&&_v.warn(`Auth (${pa}): ${n}`,...e)}function pv(n,...e){_v.logLevel<=$e.ERROR&&_v.error(`Auth (${pa}): ${n}`,...e)}function ba(n,...e){throw YT(n,...e)}function il(n,...e){return YT(n,...e)}function rV(n,e,t){let r=Object.assign(Object.assign({},tV()),{[e]:t});return new Ci("auth","Firebase",r).create(e,{appName:n.name})}function rl(n){return rV(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function YT(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return nV.create(n,...e)}function Te(n,e,...t){if(!n)throw YT(e,...t)}function Js(n){let e="INTERNAL ASSERTION FAILED: "+n;throw pv(e),new Error(e)}function Ca(n,e){n||Js(e)}function MT(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function GW(){return jF()==="http:"||jF()==="https:"}function jF(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function WW(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(GW()||PO()||"connection"in navigator)?navigator.onLine:!0}function KW(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var sl=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ca(t>e,"Short delay should be less than long delay!"),this.isMobile=kO()||MO()}get(){return WW()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function JT(n,e){Ca(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var vv=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Js("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Js("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Js("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var QW={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var YW=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],JW=new sl(3e4,6e4);function XT(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function ad(n,e,t,r,i={}){return iV(n,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});let a=dp(Object.assign({key:n.config.apiKey},o)).slice(1),c=await n._getAdditionalHeaders();c["Content-Type"]="application/json",n.languageCode&&(c["X-Firebase-Locale"]=n.languageCode);let l=Object.assign({method:e,headers:c},s);return NO()||(l.referrerPolicy="no-referrer"),n.emulatorConfig&&ha(n.emulatorConfig.host)&&(l.credentials="include"),vv.fetch()(await sV(n,n.config.apiHost,t,a),l)})}async function iV(n,e,t){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},QW),e);try{let i=new OT(n),s=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();let o=await s.json();if("needConfirmation"in o)throw fv(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[c,l]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw fv(n,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw fv(n,"email-already-in-use",o);if(c==="USER_DISABLED")throw fv(n,"user-disabled",o);let h=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw rV(n,h,l);ba(n,h)}}catch(i){if(i instanceof Sr)throw i;ba(n,"network-request-failed",{message:String(i)})}}async function XW(n,e,t,r,i={}){let s=await ad(n,e,t,r,i);return"mfaPendingCredential"in s&&ba(n,"multi-factor-auth-required",{_serverResponse:s}),s}async function sV(n,e,t,r){let i=`${e}${t}?${r}`,s=n,o=s.config.emulator?JT(n.config,i):`${n.config.apiScheme}://${i}`;return YW.includes(t)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o}var OT=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(il(this.auth,"network-request-failed")),JW.get())})}};function fv(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=il(n,e,r);return i.customData._tokenResponse=t,i}async function ZW(n,e){return ad(n,"POST","/v1/accounts:delete",e)}async function wv(n,e){return ad(n,"POST","/v1/accounts:lookup",e)}function Cp(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function ZT(n,e=!1){let t=pn(n),r=await t.getIdToken(e),i=eS(r);Te(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:Cp(kT(i.auth_time)),issuedAtTime:Cp(kT(i.iat)),expirationTime:Cp(kT(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}}function kT(n){return Number(n)*1e3}function eS(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return pv("JWT malformed, contained fewer than 3 sections"),null;try{let i=Z_(t);return i?JSON.parse(i):(pv("Failed to decode base64 JWT payload"),null)}catch(i){return pv("Caught error parsing JWT payload as JSON",i?.toString()),null}}function BF(n){let e=eS(n);return Te(e,"internal-error"),Te(typeof e.exp<"u","internal-error"),Te(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Tp(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Sr&&eK(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function eK({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var FT=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}};var Sp=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Cp(this.lastLoginAt),this.creationTime=Cp(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};async function Iv(n){var e;let t=n.auth,r=await n.getIdToken(),i=await Tp(n,wv(t,{idToken:r}));Te(i?.users.length,t,"internal-error");let s=i.users[0];n._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?oV(s.providerUserInfo):[],a=tK(n.providerData,o),c=n.isAnonymous,l=!(n.email&&s.passwordHash)&&!a?.length,h=c?l:!1,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Sp(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(n,p)}async function tS(n){let e=pn(n);await Iv(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function tK(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function oV(n){return n.map(e=>{var{providerId:t}=e,r=RI(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}async function nK(n,e){let t=await iV(n,{},async()=>{let r=dp({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,o=await sV(n,i,"/v1/token",`key=${s}`),a=await n._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let c={method:"POST",headers:a,body:r};return n.emulatorConfig&&ha(n.emulatorConfig.host)&&(c.credentials="include"),vv.fetch()(o,c)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function rK(n,e){return ad(n,"POST","/v2/accounts:revokeToken",XT(n,e))}var Ep=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Te(e.idToken,"internal-error"),Te(typeof e.idToken<"u","internal-error"),Te(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):BF(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Te(e.length!==0,"internal-error");let t=BF(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Te(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){let{accessToken:r,refreshToken:i,expiresIn:s}=await nK(e,t);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:s}=t,o=new n;return r&&(Te(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(Te(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(Te(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return Js("not implemented")}};function wa(n,e){Te(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var Ia=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,s=RI(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new FT(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Sp(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){let t=await Tp(this,this.stsTokenManager.getToken(this.auth,e));return Te(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return ZT(this,e)}reload(){return tS(this)}_assign(e){this!==e&&(Te(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Te(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Iv(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(qr(this.auth.app))return Promise.reject(rl(this.auth));let e=await this.getIdToken();return await Tp(this,ZW(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,s,o,a,c,l,h;let p=(r=t.displayName)!==null&&r!==void 0?r:void 0,m=(i=t.email)!==null&&i!==void 0?i:void 0,b=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,k=(o=t.photoURL)!==null&&o!==void 0?o:void 0,O=(a=t.tenantId)!==null&&a!==void 0?a:void 0,N=(c=t._redirectEventId)!==null&&c!==void 0?c:void 0,z=(l=t.createdAt)!==null&&l!==void 0?l:void 0,Q=(h=t.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:Z,emailVerified:Ce,isAnonymous:Je,providerData:Ie,stsTokenManager:T}=t;Te(Z&&T,e,"internal-error");let v=Ep.fromJSON(this.name,T);Te(typeof Z=="string",e,"internal-error"),wa(p,e.name),wa(m,e.name),Te(typeof Ce=="boolean",e,"internal-error"),Te(typeof Je=="boolean",e,"internal-error"),wa(b,e.name),wa(k,e.name),wa(O,e.name),wa(N,e.name),wa(z,e.name),wa(Q,e.name);let I=new n({uid:Z,auth:e,email:m,emailVerified:Ce,displayName:p,isAnonymous:Je,photoURL:k,phoneNumber:b,tenantId:O,stsTokenManager:v,createdAt:z,lastLoginAt:Q});return Ie&&Array.isArray(Ie)&&(I.providerData=Ie.map(E=>Object.assign({},E))),N&&(I._redirectEventId=N),I}static async _fromIdTokenResponse(e,t,r=!1){let i=new Ep;i.updateFromServerResponse(t);let s=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Iv(s),s}static async _fromGetAccountInfoResponse(e,t,r){let i=t.users[0];Te(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?oV(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,a=new Ep;a.updateFromIdToken(r);let c=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Sp(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(c,l),c}};var $F=new Map;function Xs(n){Ca(n instanceof Function,"Expected a class definition");let e=$F.get(n);return e?(Ca(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,$F.set(n,e),e)}var iK=(()=>{class n{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,r){this.storage[t]=r}async _get(t){let r=this.storage[t];return r===void 0?null:r}async _remove(t){delete this.storage[t]}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),VT=iK;function gv(n,e,t){return`firebase:${n}:${e}:${t}`}var bv=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=gv(this.userKey,i.apiKey,s),this.fullPersistenceKey=gv("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){let e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=await wv(this.auth,{idToken:e}).catch(()=>{});return t?Ia._fromGetAccountInfoResponse(this.auth,t,e):null}return Ia._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;let t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new n(Xs(VT),e,r);let i=(await Promise.all(t.map(async l=>{if(await l._isAvailable())return l}))).filter(l=>l),s=i[0]||Xs(VT),o=gv(r,e.config.apiKey,e.name),a=null;for(let l of t)try{let h=await l._get(o);if(h){let p;if(typeof h=="string"){let m=await wv(e,{idToken:h}).catch(()=>{});if(!m)break;p=await Ia._fromGetAccountInfoResponse(e,m,h)}else p=Ia._fromJSON(e,h);l!==s&&(a=p),s=l;break}}catch{}let c=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new n(s,e,r):(s=c[0],a&&await s._set(o,a.toJSON()),await Promise.all(t.map(async l=>{if(l!==s)try{await l._remove(o)}catch{}})),new n(s,e,r))}};function zF(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(uV(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(aV(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(hV(e))return"Blackberry";if(fV(e))return"Webos";if(cV(e))return"Safari";if((e.includes("chrome/")||lV(e))&&!e.includes("edge/"))return"Chrome";if(dV(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function aV(n=In()){return/firefox\//i.test(n)}function cV(n=In()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function lV(n=In()){return/crios\//i.test(n)}function uV(n=In()){return/iemobile/i.test(n)}function dV(n=In()){return/android/i.test(n)}function hV(n=In()){return/blackberry/i.test(n)}function fV(n=In()){return/webos/i.test(n)}function nS(n=In()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function sK(n=In()){var e;return nS(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function oK(){return OO()&&document.documentMode===10}function pV(n=In()){return nS(n)||dV(n)||fV(n)||hV(n)||/windows phone/i.test(n)||uV(n)}function gV(n,e=[]){let t;switch(n){case"Browser":t=zF(In());break;case"Worker":t=`${zF(In())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${pa}/${r}`}var LT=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=s=>new Promise((o,a)=>{try{let c=e(s);o(c)}catch(c){a(c)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}};async function aK(n,e={}){return ad(n,"GET","/v2/passwordPolicy",XT(n,e))}var cK=6,UT=class{constructor(e){var t,r,i,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=o.minPasswordLength)!==null&&t!==void 0?t:cK,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,s,o,a;let c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(t=c.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(s=c.containsUppercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var jT=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Cv(this),this.idTokenSubscription=new Cv(this),this.beforeStateQueue=new LT(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=nV,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Xs(t)),this._initializationPromise=this.queue(async()=>{var r,i,s;if(!this._deleted&&(this.persistenceManager=await bv.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;let e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{let t=await wv(this,{idToken:e}),r=await Ia._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(qr(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}let r=await this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();let o=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=i?._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===a)&&c?.user&&(i=c.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Te(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Iv(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=KW()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(qr(this.app))return Promise.reject(rl(this));let t=e?pn(e):null;return t&&Te(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Te(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return qr(this.app)?Promise.reject(rl(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return qr(this.app)?Promise.reject(rl(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Xs(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){let e=await aK(this),t=new UT(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Ci("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){let t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await rK(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){let r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){let t=e&&Xs(e)||this._popupRedirectResolver;Te(t,this,"argument-error"),this.redirectPersistenceManager=await bv.create(this,[Xs(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let s=typeof t=="function"?t:t.next.bind(t),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Te(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof t=="function"){let c=e.addObserver(t,r,i);return()=>{o=!0,c()}}else{let c=e.addObserver(t);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Te(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=gV(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);let i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;if(qr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t?.error&&qW(`Error while retrieving App Check token: ${t.error}`),t?.token}};function rS(n){return pn(n)}var Cv=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=UO(t=>this.observer=t)}get next(){return Te(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var iS={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function lK(n){iS=n}function uK(n){return iS.loadJS(n)}function dK(){return iS.gapiScript}function mV(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function sS(n,e){let t=td(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),s=t.getOptions();if(is(s,e??{}))return i;ba(i,"already-initialized")}return t.initialize({options:e})}function hK(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Xs);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function oS(n,e,t){let r=rS(n);Te(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,s=yV(e),{host:o,port:a}=fK(e),c=a===null?"":`:${a}`,l={url:`${s}//${o}${c}/`},h=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){Te(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Te(is(l,r.config.emulator)&&is(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=l,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,ha(o)?(tv(`${s}//${o}${c}`),nv("Auth",!0)):i||pK()}function yV(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function fK(n){let e=yV(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let s=i[1];return{host:s,port:HF(r.substr(s.length+1))}}else{let[s,o]=r.split(":");return{host:s,port:HF(o)}}}function HF(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function pK(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var Ev=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Js("not implemented")}_getIdTokenResponse(e){return Js("not implemented")}_linkToIdToken(e,t){return Js("not implemented")}_getReauthenticationResolver(e){return Js("not implemented")}};async function NT(n,e){return XW(n,"POST","/v1/accounts:signInWithIdp",XT(n,e))}var Tv=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var BT=class extends Tv{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var Dp=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){let s=await Ia._fromIdTokenResponse(e,r,i),o=qF(r);return new n({user:s,providerId:o,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);let i=qF(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})}};function qF(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var $T=class n extends Sr{constructor(e,t,r,i){var s;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function _V(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?$T._fromErrorAndOperation(n,s,e,r):s})}async function gK(n,e,t=!1){let r=await Tp(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Dp._forOperation(n,"link",r)}async function mK(n,e,t=!1){let{auth:r}=n;if(qr(r.app))return Promise.reject(rl(r));let i="reauthenticate";try{let s=await Tp(n,_V(r,i,e,n),t);Te(s.idToken,r,"internal-error");let o=eS(s.idToken);Te(o,r,"internal-error");let{sub:a}=o;return Te(n.uid===a,r,"user-mismatch"),Dp._forOperation(n,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&ba(r,"user-mismatch"),s}}async function yK(n,e,t=!1){if(qr(n.app))return Promise.reject(rl(n));let r="signIn",i=await _V(n,r,e),s=await Dp._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(s.user),s}function aS(n,e,t,r){return pn(n).onIdTokenChanged(e,t,r)}function cS(n,e,t){return pn(n).beforeAuthStateChanged(e,t)}var Sv="__sak";var Dv=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Sv,"1"),this.storage.removeItem(Sv),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var _K=1e3,vK=10,wK=(()=>{class n extends Dv{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=pV(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),s=this.localCache[r];i!==s&&t(r,s,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((a,c,l)=>{this.notifyListeners(a,l)});return}let i=t.key;r?this.detachListener():this.stopPolling();let s=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},o=this.storage.getItem(i);oK()&&o!==t.newValue&&t.newValue!==t.oldValue?setTimeout(s,vK):s()}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},_K)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,r){await super._set(t,r),this.localCache[t]=JSON.stringify(r)}async _get(t){let r=await super._get(t);return this.localCache[t]=JSON.stringify(r),r}async _remove(t){await super._remove(t),delete this.localCache[t]}}return n.type="LOCAL",n})(),vV=wK;var IK=(()=>{class n extends Dv{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),lS=IK;function bK(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}var CK=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let r=this.receivers.find(s=>s.isListeningto(t));if(r)return r;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}async handleEvent(t){let r=t,{eventId:i,eventType:s,data:o}=r.data,a=this.handlersMap[s];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:s});let c=Array.from(a).map(async h=>h(r.origin,o)),l=await bK(c);r.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:l})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function wV(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var zT=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,c)=>{let l=wV("",20);i.port1.start();let h=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(p){let m=p;if(m.data.eventId===l)switch(m.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(m.data.response);break;default:clearTimeout(h),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}};function as(){return window}function EK(n){as().location.href=n}function IV(){return typeof as().WorkerGlobalScope<"u"&&typeof as().importScripts=="function"}async function TK(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function SK(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function DK(){return IV()?self:null}var bV="firebaseLocalStorageDb",xK=1,xv="firebaseLocalStorage",CV="fbase_key",ol=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function Rv(n,e){return n.transaction([xv],e?"readwrite":"readonly").objectStore(xv)}function AK(){let n=indexedDB.deleteDatabase(bV);return new ol(n).toPromise()}function HT(){let n=indexedDB.open(bV,xK);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(xv,{keyPath:CV})}catch(i){t(i)}}),n.addEventListener("success",async()=>{let r=n.result;r.objectStoreNames.contains(xv)?e(r):(r.close(),await AK(),e(await HT()))})})}async function GF(n,e,t){let r=Rv(n,!0).put({[CV]:e,value:t});return new ol(r).toPromise()}async function RK(n,e){let t=Rv(n,!1).get(e),r=await new ol(t).toPromise();return r===void 0?null:r.value}function WF(n,e){let t=Rv(n,!0).delete(e);return new ol(t).toPromise()}var kK=800,NK=3,PK=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await HT(),this.db)}async _withRetries(t){let r=0;for(;;)try{let i=await this._openDb();return await t(i)}catch(i){if(r++>NK)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return IV()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=CK._getInstance(DK()),this.receiver._subscribe("keyChanged",async(t,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(t,r)=>["keyChanged"])}async initializeSender(){var t,r;if(this.activeServiceWorker=await TK(),!this.activeServiceWorker)return;this.sender=new zT(this.activeServiceWorker);let i=await this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||SK()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;let t=await HT();return await GF(t,Sv,"1"),await WF(t,Sv),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,r){return this._withPendingWrite(async()=>(await this._withRetries(i=>GF(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)))}async _get(t){let r=await this._withRetries(i=>RK(i,t));return this.localCache[t]=r,r}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(r=>WF(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){let t=await this._withRetries(s=>{let o=Rv(s,!1).getAll();return new ol(o).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(t.length!==0)for(let{fbase_key:s,value:o}of t)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),r.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),r.push(s));return r}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let s of Array.from(i))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),kK)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),EV=PK;var uIe=mV("rcb"),dIe=new sl(3e4,6e4);function MK(n,e){return e?Xs(e):(Te(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var xp=class extends Ev{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return NT(e,this._buildIdpRequest())}_linkToIdToken(e,t){return NT(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return NT(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function OK(n){return yK(n.auth,new xp(n),n.bypassAuthState)}function FK(n){let{auth:e,user:t}=n;return Te(t,e,"internal-error"),mK(t,new xp(n),n.bypassAuthState)}async function VK(n){let{auth:e,user:t}=n;return Te(t,e,"internal-error"),gK(t,new xp(n),n.bypassAuthState)}var qT=class{constructor(e,t,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){let{urlResponse:t,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}let c={auth:this.auth,requestUri:t,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(c))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return OK;case"linkViaPopup":case"linkViaRedirect":return VK;case"reauthViaPopup":case"reauthViaRedirect":return FK;default:ba(this.auth,"internal-error")}}resolve(e){Ca(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ca(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var hIe=new sl(2e3,1e4);var LK="pendingRedirect",mv=new Map,GT=class extends qT{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=mv.get(this.auth._key());if(!e){try{let r=await UK(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}mv.set(this.auth._key(),e)}return this.bypassAuthState||mv.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}};async function UK(n,e){let t=$K(e),r=BK(n);if(!await r._isAvailable())return!1;let i=await r._get(t)==="true";return await r._remove(t),i}function jK(n,e){mv.set(n._key(),e)}function BK(n){return Xs(n._redirectPersistence)}function $K(n){return gv(LK,n.config.apiKey,n.name)}async function zK(n,e,t=!1){if(qr(n.app))return Promise.reject(rl(n));let r=rS(n),i=MK(r,e),o=await new GT(r,i,t).execute();return o&&!t&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}var HK=600*1e3,WT=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!qK(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!TV(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(il(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=HK&&this.cachedEventUids.clear(),this.cachedEventUids.has(KF(e))}saveEventToCache(e){this.cachedEventUids.add(KF(e)),this.lastProcessedEventTime=Date.now()}};function KF(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function TV({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function qK(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return TV(n);default:return!1}}async function GK(n,e={}){return ad(n,"GET","/v1/projects",e)}var WK=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,KK=/^https?/;async function QK(n){if(n.config.emulator)return;let{authorizedDomains:e}=await GK(n);for(let t of e)try{if(YK(t))return}catch{}ba(n,"unauthorized-domain")}function YK(n){let e=MT(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let o=new URL(n);return o.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===r}if(!KK.test(t))return!1;if(WK.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var JK=new sl(3e4,6e4);function QF(){let n=as().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function XK(n){return new Promise((e,t)=>{var r,i,s;function o(){QF(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{QF(),t(il(n,"network-request-failed"))},timeout:JK.get()})}if(!((i=(r=as().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=as().gapi)===null||s===void 0)&&s.load)o();else{let a=mV("iframefcb");return as()[a]=()=>{gapi.load?o():t(il(n,"network-request-failed"))},uK(`${dK()}?onload=${a}`).catch(c=>t(c))}}).catch(e=>{throw yv=null,e})}var yv=null;function ZK(n){return yv=yv||XK(n),yv}var eQ=new sl(5e3,15e3),tQ="__/auth/iframe",nQ="emulator/auth/iframe",rQ={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},iQ=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function sQ(n){let e=n.config;Te(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?JT(e,nQ):`https://${n.config.authDomain}/${tQ}`,r={apiKey:e.apiKey,appName:n.name,v:pa},i=iQ.get(n.config.apiHost);i&&(r.eid=i);let s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${t}?${dp(r).slice(1)}`}async function oQ(n){let e=await ZK(n),t=as().gapi;return Te(t,n,"internal-error"),e.open({where:document.body,url:sQ(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:rQ,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});let o=il(n,"network-request-failed"),a=as().setTimeout(()=>{s(o)},eQ.get());function c(){as().clearTimeout(a),i(r)}r.ping(c).then(c,()=>{s(o)})}))}var aQ={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},cQ=500,lQ=600,uQ="_blank",dQ="http://localhost",Av=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function hQ(n,e,t,r=cQ,i=lQ){let s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",c=Object.assign(Object.assign({},aQ),{width:r.toString(),height:i.toString(),top:s,left:o}),l=In().toLowerCase();t&&(a=lV(l)?uQ:t),aV(l)&&(e=e||dQ,c.scrollbars="yes");let h=Object.entries(c).reduce((m,[b,k])=>`${m}${b}=${k},`,"");if(sK(l)&&a!=="_self")return fQ(e||"",a),new Av(null);let p=window.open(e||"",a,h);Te(p,n,"popup-blocked");try{p.focus()}catch{}return new Av(p)}function fQ(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var pQ="__/auth/handler",gQ="emulator/auth/handler",mQ=encodeURIComponent("fac");async function YF(n,e,t,r,i,s){Te(n.config.authDomain,n,"auth-domain-config-required"),Te(n.config.apiKey,n,"invalid-api-key");let o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:pa,eventId:i};if(e instanceof Tv){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",LO(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(let[h,p]of Object.entries(s||{}))o[h]=p}if(e instanceof BT){let h=e.getScopes().filter(p=>p!=="");h.length>0&&(o.scopes=h.join(","))}n.tenantId&&(o.tid=n.tenantId);let a=o;for(let h of Object.keys(a))a[h]===void 0&&delete a[h];let c=await n._getAppCheckToken(),l=c?`#${mQ}=${encodeURIComponent(c)}`:"";return`${yQ(n)}?${dp(a).slice(1)}${l}`}function yQ({config:n}){return n.emulator?JT(n,gQ):`https://${n.authDomain}/${pQ}`}var PT="webStorageSupport",KT=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=lS,this._completeRedirectFn=zK,this._overrideRedirectResult=jK}async _openPopup(e,t,r,i){var s;Ca((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let o=await YF(e,t,r,MT(),i);return hQ(e,o,wV())}async _openRedirect(e,t,r,i){await this._originValidation(e);let s=await YF(e,t,r,MT(),i);return EK(s),new Promise(()=>{})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(Ca(s,"If manager is not set, promise should be"),s)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){let t=await oQ(e),r=new WT(e);return t.register("authEvent",i=>(Te(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(PT,{type:PT},i=>{var s;let o=(s=i?.[0])===null||s===void 0?void 0:s[PT];o!==void 0&&t(!!o),ba(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=QK(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return pV()||cV()||nS()}},SV=KT;var JF="@firebase/auth",XF="1.10.8";var QT=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Te(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function _Q(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function vQ(n){Ei(new Yn("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;Te(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:o,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:gV(n)},l=new jT(r,i,s,c);return hK(l,t),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Ei(new Yn("auth-internal",e=>{let t=rS(e.getProvider("auth").getImmediate());return(r=>new QT(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ft(JF,XF,_Q(n)),Ft(JF,XF,"esm2017")}var wQ=300,IQ=QE("authIdTokenMaxAge")||wQ,ZF=null,bQ=n=>async e=>{let t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>IQ)return;let i=t?.token;ZF!==i&&(ZF=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function uS(n=Zc()){let e=td(n,"auth");if(e.isInitialized())return e.getImmediate();let t=sS(n,{popupRedirectResolver:SV,persistence:[EV,vV,lS]}),r=QE("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let s=new URL(r,location.origin);if(location.origin===s.origin){let o=bQ(s.toString());cS(t,o,()=>o(t.currentUser)),aS(t,a=>o(a))}}let i=WE("auth");return i&&oS(t,`http://${i}`),t}function CQ(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}lK({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let s=il("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",CQ().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});vQ("Browser");var DV="auth",Ap=class{constructor(e){return e}},Rp=class{constructor(){return rd(DV)}};var dS=new re("angularfire2.auth-instances");function mY(n,e){let t=pp(DV,n,e);return t&&new Ap(t)}function yY(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Ap(r)}}var _Y={provide:Rp,deps:[[new Ir,dS]]},vY={provide:Ap,useFactory:mY,deps:[[new Ir,dS],Ws]};function xV(n,...e){return Ft("angularfire",ga.full,"auth"),gr([vY,_Y,{provide:dS,useFactory:yY(n),multi:!0,deps:[it,wt,ma,tl,[new Ir,id],...e]}])}var AV=bn(uS,!0);var RV=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},kV={};var Zs,hS;(function(){var n;function e(T,v){function I(){}I.prototype=v.prototype,T.F=v.prototype,T.prototype=new I,T.prototype.constructor=T,T.D=function(E,C,x){for(var w=Array(arguments.length-2),Et=2;Et<arguments.length;Et++)w[Et-2]=arguments[Et];return v.prototype[C].apply(E,w)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(T,v,I){I||(I=0);let E=Array(16);if(typeof v=="string")for(var C=0;C<16;++C)E[C]=v.charCodeAt(I++)|v.charCodeAt(I++)<<8|v.charCodeAt(I++)<<16|v.charCodeAt(I++)<<24;else for(C=0;C<16;++C)E[C]=v[I++]|v[I++]<<8|v[I++]<<16|v[I++]<<24;v=T.g[0],I=T.g[1],C=T.g[2];let x=T.g[3],w;w=v+(x^I&(C^x))+E[0]+3614090360&4294967295,v=I+(w<<7&4294967295|w>>>25),w=x+(C^v&(I^C))+E[1]+3905402710&4294967295,x=v+(w<<12&4294967295|w>>>20),w=C+(I^x&(v^I))+E[2]+606105819&4294967295,C=x+(w<<17&4294967295|w>>>15),w=I+(v^C&(x^v))+E[3]+3250441966&4294967295,I=C+(w<<22&4294967295|w>>>10),w=v+(x^I&(C^x))+E[4]+4118548399&4294967295,v=I+(w<<7&4294967295|w>>>25),w=x+(C^v&(I^C))+E[5]+1200080426&4294967295,x=v+(w<<12&4294967295|w>>>20),w=C+(I^x&(v^I))+E[6]+2821735955&4294967295,C=x+(w<<17&4294967295|w>>>15),w=I+(v^C&(x^v))+E[7]+4249261313&4294967295,I=C+(w<<22&4294967295|w>>>10),w=v+(x^I&(C^x))+E[8]+1770035416&4294967295,v=I+(w<<7&4294967295|w>>>25),w=x+(C^v&(I^C))+E[9]+2336552879&4294967295,x=v+(w<<12&4294967295|w>>>20),w=C+(I^x&(v^I))+E[10]+4294925233&4294967295,C=x+(w<<17&4294967295|w>>>15),w=I+(v^C&(x^v))+E[11]+2304563134&4294967295,I=C+(w<<22&4294967295|w>>>10),w=v+(x^I&(C^x))+E[12]+1804603682&4294967295,v=I+(w<<7&4294967295|w>>>25),w=x+(C^v&(I^C))+E[13]+4254626195&4294967295,x=v+(w<<12&4294967295|w>>>20),w=C+(I^x&(v^I))+E[14]+2792965006&4294967295,C=x+(w<<17&4294967295|w>>>15),w=I+(v^C&(x^v))+E[15]+1236535329&4294967295,I=C+(w<<22&4294967295|w>>>10),w=v+(C^x&(I^C))+E[1]+4129170786&4294967295,v=I+(w<<5&4294967295|w>>>27),w=x+(I^C&(v^I))+E[6]+3225465664&4294967295,x=v+(w<<9&4294967295|w>>>23),w=C+(v^I&(x^v))+E[11]+643717713&4294967295,C=x+(w<<14&4294967295|w>>>18),w=I+(x^v&(C^x))+E[0]+3921069994&4294967295,I=C+(w<<20&4294967295|w>>>12),w=v+(C^x&(I^C))+E[5]+3593408605&4294967295,v=I+(w<<5&4294967295|w>>>27),w=x+(I^C&(v^I))+E[10]+38016083&4294967295,x=v+(w<<9&4294967295|w>>>23),w=C+(v^I&(x^v))+E[15]+3634488961&4294967295,C=x+(w<<14&4294967295|w>>>18),w=I+(x^v&(C^x))+E[4]+3889429448&4294967295,I=C+(w<<20&4294967295|w>>>12),w=v+(C^x&(I^C))+E[9]+568446438&4294967295,v=I+(w<<5&4294967295|w>>>27),w=x+(I^C&(v^I))+E[14]+3275163606&4294967295,x=v+(w<<9&4294967295|w>>>23),w=C+(v^I&(x^v))+E[3]+4107603335&4294967295,C=x+(w<<14&4294967295|w>>>18),w=I+(x^v&(C^x))+E[8]+1163531501&4294967295,I=C+(w<<20&4294967295|w>>>12),w=v+(C^x&(I^C))+E[13]+2850285829&4294967295,v=I+(w<<5&4294967295|w>>>27),w=x+(I^C&(v^I))+E[2]+4243563512&4294967295,x=v+(w<<9&4294967295|w>>>23),w=C+(v^I&(x^v))+E[7]+1735328473&4294967295,C=x+(w<<14&4294967295|w>>>18),w=I+(x^v&(C^x))+E[12]+2368359562&4294967295,I=C+(w<<20&4294967295|w>>>12),w=v+(I^C^x)+E[5]+4294588738&4294967295,v=I+(w<<4&4294967295|w>>>28),w=x+(v^I^C)+E[8]+2272392833&4294967295,x=v+(w<<11&4294967295|w>>>21),w=C+(x^v^I)+E[11]+1839030562&4294967295,C=x+(w<<16&4294967295|w>>>16),w=I+(C^x^v)+E[14]+4259657740&4294967295,I=C+(w<<23&4294967295|w>>>9),w=v+(I^C^x)+E[1]+2763975236&4294967295,v=I+(w<<4&4294967295|w>>>28),w=x+(v^I^C)+E[4]+1272893353&4294967295,x=v+(w<<11&4294967295|w>>>21),w=C+(x^v^I)+E[7]+4139469664&4294967295,C=x+(w<<16&4294967295|w>>>16),w=I+(C^x^v)+E[10]+3200236656&4294967295,I=C+(w<<23&4294967295|w>>>9),w=v+(I^C^x)+E[13]+681279174&4294967295,v=I+(w<<4&4294967295|w>>>28),w=x+(v^I^C)+E[0]+3936430074&4294967295,x=v+(w<<11&4294967295|w>>>21),w=C+(x^v^I)+E[3]+3572445317&4294967295,C=x+(w<<16&4294967295|w>>>16),w=I+(C^x^v)+E[6]+76029189&4294967295,I=C+(w<<23&4294967295|w>>>9),w=v+(I^C^x)+E[9]+3654602809&4294967295,v=I+(w<<4&4294967295|w>>>28),w=x+(v^I^C)+E[12]+3873151461&4294967295,x=v+(w<<11&4294967295|w>>>21),w=C+(x^v^I)+E[15]+530742520&4294967295,C=x+(w<<16&4294967295|w>>>16),w=I+(C^x^v)+E[2]+3299628645&4294967295,I=C+(w<<23&4294967295|w>>>9),w=v+(C^(I|~x))+E[0]+4096336452&4294967295,v=I+(w<<6&4294967295|w>>>26),w=x+(I^(v|~C))+E[7]+1126891415&4294967295,x=v+(w<<10&4294967295|w>>>22),w=C+(v^(x|~I))+E[14]+2878612391&4294967295,C=x+(w<<15&4294967295|w>>>17),w=I+(x^(C|~v))+E[5]+4237533241&4294967295,I=C+(w<<21&4294967295|w>>>11),w=v+(C^(I|~x))+E[12]+1700485571&4294967295,v=I+(w<<6&4294967295|w>>>26),w=x+(I^(v|~C))+E[3]+2399980690&4294967295,x=v+(w<<10&4294967295|w>>>22),w=C+(v^(x|~I))+E[10]+4293915773&4294967295,C=x+(w<<15&4294967295|w>>>17),w=I+(x^(C|~v))+E[1]+2240044497&4294967295,I=C+(w<<21&4294967295|w>>>11),w=v+(C^(I|~x))+E[8]+1873313359&4294967295,v=I+(w<<6&4294967295|w>>>26),w=x+(I^(v|~C))+E[15]+4264355552&4294967295,x=v+(w<<10&4294967295|w>>>22),w=C+(v^(x|~I))+E[6]+2734768916&4294967295,C=x+(w<<15&4294967295|w>>>17),w=I+(x^(C|~v))+E[13]+1309151649&4294967295,I=C+(w<<21&4294967295|w>>>11),w=v+(C^(I|~x))+E[4]+4149444226&4294967295,v=I+(w<<6&4294967295|w>>>26),w=x+(I^(v|~C))+E[11]+3174756917&4294967295,x=v+(w<<10&4294967295|w>>>22),w=C+(v^(x|~I))+E[2]+718787259&4294967295,C=x+(w<<15&4294967295|w>>>17),w=I+(x^(C|~v))+E[9]+3951481745&4294967295,T.g[0]=T.g[0]+v&4294967295,T.g[1]=T.g[1]+(C+(w<<21&4294967295|w>>>11))&4294967295,T.g[2]=T.g[2]+C&4294967295,T.g[3]=T.g[3]+x&4294967295}r.prototype.v=function(T,v){v===void 0&&(v=T.length);let I=v-this.blockSize,E=this.C,C=this.h,x=0;for(;x<v;){if(C==0)for(;x<=I;)i(this,T,x),x+=this.blockSize;if(typeof T=="string"){for(;x<v;)if(E[C++]=T.charCodeAt(x++),C==this.blockSize){i(this,E),C=0;break}}else for(;x<v;)if(E[C++]=T[x++],C==this.blockSize){i(this,E),C=0;break}}this.h=C,this.o+=v},r.prototype.A=function(){var T=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);T[0]=128;for(var v=1;v<T.length-8;++v)T[v]=0;v=this.o*8;for(var I=T.length-8;I<T.length;++I)T[I]=v&255,v/=256;for(this.v(T),T=Array(16),v=0,I=0;I<4;++I)for(let E=0;E<32;E+=8)T[v++]=this.g[I]>>>E&255;return T};function s(T,v){var I=a;return Object.prototype.hasOwnProperty.call(I,T)?I[T]:I[T]=v(T)}function o(T,v){this.h=v;let I=[],E=!0;for(let C=T.length-1;C>=0;C--){let x=T[C]|0;E&&x==v||(I[C]=x,E=!1)}this.g=I}var a={};function c(T){return-128<=T&&T<128?s(T,function(v){return new o([v|0],v<0?-1:0)}):new o([T|0],T<0?-1:0)}function l(T){if(isNaN(T)||!isFinite(T))return p;if(T<0)return N(l(-T));let v=[],I=1;for(let E=0;T>=I;E++)v[E]=T/I|0,I*=4294967296;return new o(v,0)}function h(T,v){if(T.length==0)throw Error("number format error: empty string");if(v=v||10,v<2||36<v)throw Error("radix out of range: "+v);if(T.charAt(0)=="-")return N(h(T.substring(1),v));if(T.indexOf("-")>=0)throw Error('number format error: interior "-" character');let I=l(Math.pow(v,8)),E=p;for(let x=0;x<T.length;x+=8){var C=Math.min(8,T.length-x);let w=parseInt(T.substring(x,x+C),v);C<8?(C=l(Math.pow(v,C)),E=E.j(C).add(l(w))):(E=E.j(I),E=E.add(l(w)))}return E}var p=c(0),m=c(1),b=c(16777216);n=o.prototype,n.m=function(){if(O(this))return-N(this).m();let T=0,v=1;for(let I=0;I<this.g.length;I++){let E=this.i(I);T+=(E>=0?E:4294967296+E)*v,v*=4294967296}return T},n.toString=function(T){if(T=T||10,T<2||36<T)throw Error("radix out of range: "+T);if(k(this))return"0";if(O(this))return"-"+N(this).toString(T);let v=l(Math.pow(T,6));var I=this;let E="";for(;;){let C=Ce(I,v).g;I=z(I,C.j(v));let x=((I.g.length>0?I.g[0]:I.h)>>>0).toString(T);if(I=C,k(I))return x+E;for(;x.length<6;)x="0"+x;E=x+E}},n.i=function(T){return T<0?0:T<this.g.length?this.g[T]:this.h};function k(T){if(T.h!=0)return!1;for(let v=0;v<T.g.length;v++)if(T.g[v]!=0)return!1;return!0}function O(T){return T.h==-1}n.l=function(T){return T=z(this,T),O(T)?-1:k(T)?0:1};function N(T){let v=T.g.length,I=[];for(let E=0;E<v;E++)I[E]=~T.g[E];return new o(I,~T.h).add(m)}n.abs=function(){return O(this)?N(this):this},n.add=function(T){let v=Math.max(this.g.length,T.g.length),I=[],E=0;for(let C=0;C<=v;C++){let x=E+(this.i(C)&65535)+(T.i(C)&65535),w=(x>>>16)+(this.i(C)>>>16)+(T.i(C)>>>16);E=w>>>16,x&=65535,w&=65535,I[C]=w<<16|x}return new o(I,I[I.length-1]&-2147483648?-1:0)};function z(T,v){return T.add(N(v))}n.j=function(T){if(k(this)||k(T))return p;if(O(this))return O(T)?N(this).j(N(T)):N(N(this).j(T));if(O(T))return N(this.j(N(T)));if(this.l(b)<0&&T.l(b)<0)return l(this.m()*T.m());let v=this.g.length+T.g.length,I=[];for(var E=0;E<2*v;E++)I[E]=0;for(E=0;E<this.g.length;E++)for(let C=0;C<T.g.length;C++){let x=this.i(E)>>>16,w=this.i(E)&65535,Et=T.i(C)>>>16,Zn=T.i(C)&65535;I[2*E+2*C]+=w*Zn,Q(I,2*E+2*C),I[2*E+2*C+1]+=x*Zn,Q(I,2*E+2*C+1),I[2*E+2*C+1]+=w*Et,Q(I,2*E+2*C+1),I[2*E+2*C+2]+=x*Et,Q(I,2*E+2*C+2)}for(T=0;T<v;T++)I[T]=I[2*T+1]<<16|I[2*T];for(T=v;T<2*v;T++)I[T]=0;return new o(I,0)};function Q(T,v){for(;(T[v]&65535)!=T[v];)T[v+1]+=T[v]>>>16,T[v]&=65535,v++}function Z(T,v){this.g=T,this.h=v}function Ce(T,v){if(k(v))throw Error("division by zero");if(k(T))return new Z(p,p);if(O(T))return v=Ce(N(T),v),new Z(N(v.g),N(v.h));if(O(v))return v=Ce(T,N(v)),new Z(N(v.g),v.h);if(T.g.length>30){if(O(T)||O(v))throw Error("slowDivide_ only works with positive integers.");for(var I=m,E=v;E.l(T)<=0;)I=Je(I),E=Je(E);var C=Ie(I,1),x=Ie(E,1);for(E=Ie(E,2),I=Ie(I,2);!k(E);){var w=x.add(E);w.l(T)<=0&&(C=C.add(I),x=w),E=Ie(E,1),I=Ie(I,1)}return v=z(T,C.j(v)),new Z(C,v)}for(C=p;T.l(v)>=0;){for(I=Math.max(1,Math.floor(T.m()/v.m())),E=Math.ceil(Math.log(I)/Math.LN2),E=E<=48?1:Math.pow(2,E-48),x=l(I),w=x.j(v);O(w)||w.l(T)>0;)I-=E,x=l(I),w=x.j(v);k(x)&&(x=m),C=C.add(x),T=z(T,w)}return new Z(C,T)}n.B=function(T){return Ce(this,T).h},n.and=function(T){let v=Math.max(this.g.length,T.g.length),I=[];for(let E=0;E<v;E++)I[E]=this.i(E)&T.i(E);return new o(I,this.h&T.h)},n.or=function(T){let v=Math.max(this.g.length,T.g.length),I=[];for(let E=0;E<v;E++)I[E]=this.i(E)|T.i(E);return new o(I,this.h|T.h)},n.xor=function(T){let v=Math.max(this.g.length,T.g.length),I=[];for(let E=0;E<v;E++)I[E]=this.i(E)^T.i(E);return new o(I,this.h^T.h)};function Je(T){let v=T.g.length+1,I=[];for(let E=0;E<v;E++)I[E]=T.i(E)<<1|T.i(E-1)>>>31;return new o(I,T.h)}function Ie(T,v){let I=v>>5;v%=32;let E=T.g.length-I,C=[];for(let x=0;x<E;x++)C[x]=v>0?T.i(x+I)>>>v|T.i(x+I+1)<<32-v:T.i(x+I);return new o(C,T.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,hS=kV.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=h,Zs=kV.Integer=o}).apply(typeof RV<"u"?RV:typeof self<"u"?self:typeof window<"u"?window:{});var kv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},eo={};var fS,wY,cd,pS,kp,Nv,gS,mS,yS;(function(){var n,e=Object.defineProperty;function t(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof kv=="object"&&kv];for(var g=0;g<d.length;++g){var _=d[g];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var r=t(this);function i(d,g){if(g)e:{var _=r;d=d.split(".");for(var D=0;D<d.length-1;D++){var F=d[D];if(!(F in _))break e;_=_[F]}d=d[d.length-1],D=_[d],g=g(D),g!=D&&g!=null&&e(_,d,{configurable:!0,writable:!0,value:g})}}i("Symbol.dispose",function(d){return d||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(d){return d||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(d){return d||function(g){var _=[],D;for(D in g)Object.prototype.hasOwnProperty.call(g,D)&&_.push([D,g[D]]);return _}});var s=s||{},o=this||self;function a(d){var g=typeof d;return g=="object"&&d!=null||g=="function"}function c(d,g,_){return d.call.apply(d.bind,arguments)}function l(d,g,_){return l=c,l.apply(null,arguments)}function h(d,g){var _=Array.prototype.slice.call(arguments,1);return function(){var D=_.slice();return D.push.apply(D,arguments),d.apply(this,D)}}function p(d,g){function _(){}_.prototype=g.prototype,d.Z=g.prototype,d.prototype=new _,d.prototype.constructor=d,d.Ob=function(D,F,U){for(var J=Array(arguments.length-2),be=2;be<arguments.length;be++)J[be-2]=arguments[be];return g.prototype[F].apply(D,J)}}var m=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?d=>d&&AsyncContext.Snapshot.wrap(d):d=>d;function b(d){let g=d.length;if(g>0){let _=Array(g);for(let D=0;D<g;D++)_[D]=d[D];return _}return[]}function k(d,g){for(let D=1;D<arguments.length;D++){let F=arguments[D];var _=typeof F;if(_=_!="object"?_:F?Array.isArray(F)?"array":_:"null",_=="array"||_=="object"&&typeof F.length=="number"){_=d.length||0;let U=F.length||0;d.length=_+U;for(let J=0;J<U;J++)d[_+J]=F[J]}else d.push(F)}}class O{constructor(g,_){this.i=g,this.j=_,this.h=0,this.g=null}get(){let g;return this.h>0?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function N(d){o.setTimeout(()=>{throw d},0)}function z(){var d=T;let g=null;return d.g&&(g=d.g,d.g=d.g.next,d.g||(d.h=null),g.next=null),g}class Q{constructor(){this.h=this.g=null}add(g,_){let D=Z.get();D.set(g,_),this.h?this.h.next=D:this.g=D,this.h=D}}var Z=new O(()=>new Ce,d=>d.reset());class Ce{constructor(){this.next=this.g=this.h=null}set(g,_){this.h=g,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let Je,Ie=!1,T=new Q,v=()=>{let d=Promise.resolve(void 0);Je=()=>{d.then(I)}};function I(){for(var d;d=z();){try{d.h.call(d.g)}catch(_){N(_)}var g=Z;g.j(d),g.h<100&&(g.h++,d.next=g.g,g.g=d)}Ie=!1}function E(){this.u=this.u,this.C=this.C}E.prototype.u=!1,E.prototype.dispose=function(){this.u||(this.u=!0,this.N())},E.prototype[Symbol.dispose]=function(){this.dispose()},E.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function C(d,g){this.type=d,this.g=this.target=g,this.defaultPrevented=!1}C.prototype.h=function(){this.defaultPrevented=!0};var x=(function(){if(!o.addEventListener||!Object.defineProperty)return!1;var d=!1,g=Object.defineProperty({},"passive",{get:function(){d=!0}});try{let _=()=>{};o.addEventListener("test",_,g),o.removeEventListener("test",_,g)}catch{}return d})();function w(d){return/^[\s\xa0]*$/.test(d)}function Et(d,g){C.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d&&this.init(d,g)}p(Et,C),Et.prototype.init=function(d,g){let _=this.type=d.type,D=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;this.target=d.target||d.srcElement,this.g=g,g=d.relatedTarget,g||(_=="mouseover"?g=d.fromElement:_=="mouseout"&&(g=d.toElement)),this.relatedTarget=g,D?(this.clientX=D.clientX!==void 0?D.clientX:D.pageX,this.clientY=D.clientY!==void 0?D.clientY:D.pageY,this.screenX=D.screenX||0,this.screenY=D.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=d.pointerType,this.state=d.state,this.i=d,d.defaultPrevented&&Et.Z.h.call(this)},Et.prototype.h=function(){Et.Z.h.call(this);let d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var Zn="closure_listenable_"+(Math.random()*1e6|0),Zw=0;function Ka(d,g,_,D,F){this.listener=d,this.proxy=null,this.src=g,this.type=_,this.capture=!!D,this.ha=F,this.key=++Zw,this.da=this.fa=!1}function Oi(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function Io(d,g,_){for(let D in d)g.call(_,d[D],D,d)}function jg(d,g){for(let _ in d)g.call(void 0,d[_],_,d)}function Bg(d){let g={};for(let _ in d)g[_]=d[_];return g}let ei="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function sn(d,g){let _,D;for(let F=1;F<arguments.length;F++){D=arguments[F];for(_ in D)d[_]=D[_];for(let U=0;U<ei.length;U++)_=ei[U],Object.prototype.hasOwnProperty.call(D,_)&&(d[_]=D[_])}}function Ol(d){this.src=d,this.g={},this.h=0}Ol.prototype.add=function(d,g,_,D,F){let U=d.toString();d=this.g[U],d||(d=this.g[U]=[],this.h++);let J=vh(d,g,D,F);return J>-1?(g=d[J],_||(g.fa=!1)):(g=new Ka(g,this.src,U,!!D,F),g.fa=_,d.push(g)),g};function Is(d,g){let _=g.type;if(_ in d.g){var D=d.g[_],F=Array.prototype.indexOf.call(D,g,void 0),U;(U=F>=0)&&Array.prototype.splice.call(D,F,1),U&&(Oi(g),d.g[_].length==0&&(delete d.g[_],d.h--))}}function vh(d,g,_,D){for(let F=0;F<d.length;++F){let U=d[F];if(!U.da&&U.listener==g&&U.capture==!!_&&U.ha==D)return F}return-1}var bs="closure_lm_"+(Math.random()*1e6|0),wh={};function $g(d,g,_,D,F){if(D&&D.once)return Vl(d,g,_,D,F);if(Array.isArray(g)){for(let U=0;U<g.length;U++)$g(d,g[U],_,D,F);return null}return _=Bl(_),d&&d[Zn]?d.J(g,_,a(D)?!!D.capture:!!D,F):Qa(d,g,_,!1,D,F)}function Qa(d,g,_,D,F,U){if(!g)throw Error("Invalid event type");let J=a(F)?!!F.capture:!!F,be=jl(d);if(be||(d[bs]=be=new Ol(d)),_=be.add(g,_,D,J,U),_.proxy)return _;if(D=Fl(),_.proxy=D,D.src=d,D.listener=_,d.addEventListener)x||(F=J),F===void 0&&(F=!1),d.addEventListener(g.toString(),D,F);else if(d.attachEvent)d.attachEvent(Ul(g.toString()),D);else if(d.addListener&&d.removeListener)d.addListener(D);else throw Error("addEventListener and attachEvent are unavailable.");return _}function Fl(){function d(_){return g.call(d.src,d.listener,_)}let g=zg;return d}function Vl(d,g,_,D,F){if(Array.isArray(g)){for(let U=0;U<g.length;U++)Vl(d,g[U],_,D,F);return null}return _=Bl(_),d&&d[Zn]?d.K(g,_,a(D)?!!D.capture:!!D,F):Qa(d,g,_,!0,D,F)}function Ll(d,g,_,D,F){if(Array.isArray(g))for(var U=0;U<g.length;U++)Ll(d,g[U],_,D,F);else D=a(D)?!!D.capture:!!D,_=Bl(_),d&&d[Zn]?(d=d.i,U=String(g).toString(),U in d.g&&(g=d.g[U],_=vh(g,_,D,F),_>-1&&(Oi(g[_]),Array.prototype.splice.call(g,_,1),g.length==0&&(delete d.g[U],d.h--)))):d&&(d=jl(d))&&(g=d.g[g.toString()],d=-1,g&&(d=vh(g,_,D,F)),(_=d>-1?g[d]:null)&&Ya(_))}function Ya(d){if(typeof d!="number"&&d&&!d.da){var g=d.src;if(g&&g[Zn])Is(g.i,d);else{var _=d.type,D=d.proxy;g.removeEventListener?g.removeEventListener(_,D,d.capture):g.detachEvent?g.detachEvent(Ul(_),D):g.addListener&&g.removeListener&&g.removeListener(D),(_=jl(g))?(Is(_,d),_.h==0&&(_.src=null,g[bs]=null)):Oi(d)}}}function Ul(d){return d in wh?wh[d]:wh[d]="on"+d}function zg(d,g){if(d.da)d=!0;else{g=new Et(g,this);let _=d.listener,D=d.ha||d.src;d.fa&&Ya(d),d=_.call(D,g)}return d}function jl(d){return d=d[bs],d instanceof Ol?d:null}var Ih="__closure_events_fn_"+(Math.random()*1e9>>>0);function Bl(d){return typeof d=="function"?d:(d[Ih]||(d[Ih]=function(g){return d.handleEvent(g)}),d[Ih])}function on(){E.call(this),this.i=new Ol(this),this.M=this,this.G=null}p(on,E),on.prototype[Zn]=!0,on.prototype.removeEventListener=function(d,g,_,D){Ll(this,d,g,_,D)};function an(d,g){var _,D=d.G;if(D)for(_=[];D;D=D.G)_.push(D);if(d=d.M,D=g.type||g,typeof g=="string")g=new C(g,d);else if(g instanceof C)g.target=g.target||d;else{var F=g;g=new C(D,d),sn(g,F)}F=!0;let U,J;if(_)for(J=_.length-1;J>=0;J--)U=g.g=_[J],F=Ja(U,D,!0,g)&&F;if(U=g.g=d,F=Ja(U,D,!0,g)&&F,F=Ja(U,D,!1,g)&&F,_)for(J=0;J<_.length;J++)U=g.g=_[J],F=Ja(U,D,!1,g)&&F}on.prototype.N=function(){if(on.Z.N.call(this),this.i){var d=this.i;for(let g in d.g){let _=d.g[g];for(let D=0;D<_.length;D++)Oi(_[D]);delete d.g[g],d.h--}}this.G=null},on.prototype.J=function(d,g,_,D){return this.i.add(String(d),g,!1,_,D)},on.prototype.K=function(d,g,_,D){return this.i.add(String(d),g,!0,_,D)};function Ja(d,g,_,D){if(g=d.i.g[String(g)],!g)return!0;g=g.concat();let F=!0;for(let U=0;U<g.length;++U){let J=g[U];if(J&&!J.da&&J.capture==_){let be=J.listener,u=J.ha||J.src;J.fa&&Is(d.i,J),F=be.call(u,D)!==!1&&F}}return F&&!D.defaultPrevented}function eI(d,g){if(typeof d!="function")if(d&&typeof d.handleEvent=="function")d=l(d.handleEvent,d);else throw Error("Invalid listener argument");return Number(g)>2147483647?-1:o.setTimeout(d,g||0)}function $l(d){d.g=eI(()=>{d.g=null,d.i&&(d.i=!1,$l(d))},d.l);let g=d.h;d.h=null,d.m.apply(null,g)}class bh extends E{constructor(g,_){super(),this.m=g,this.l=_,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:$l(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Cs(d){E.call(this),this.h=d,this.g={}}p(Cs,E);var cn=[];function gn(d){Io(d.g,function(g,_){this.g.hasOwnProperty(_)&&Ya(g)},d),d.g={}}Cs.prototype.N=function(){Cs.Z.N.call(this),gn(this)},Cs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var bo=o.JSON.stringify,Hg=o.JSON.parse,qg=class{stringify(d){return o.JSON.stringify(d,void 0)}parse(d){return o.JSON.parse(d,void 0)}};function Gg(){}function Co(){}var Eo={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function zl(){C.call(this,"d")}p(zl,C);function Xa(){C.call(this,"c")}p(Xa,C);var Es={},Wg=null;function To(){return Wg=Wg||new on}Es.Ia="serverreachability";function Ch(d){C.call(this,Es.Ia,d)}p(Ch,C);function So(d){let g=To();an(g,new Ch(g))}Es.STAT_EVENT="statevent";function Do(d,g){C.call(this,Es.STAT_EVENT,d),this.stat=g}p(Do,C);function ln(d){let g=To();an(g,new Do(g,d))}Es.Ja="timingevent";function Hl(d,g){C.call(this,Es.Ja,d),this.size=g}p(Hl,C);function ur(d,g){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){d()},g)}function xo(){this.g=!0}xo.prototype.ua=function(){this.g=!1};function ql(d,g,_,D,F,U){d.info(function(){if(d.g)if(U){var J="",be=U.split("&");for(let f=0;f<be.length;f++){var u=be[f].split("=");if(u.length>1){let y=u[0];u=u[1];let S=y.split("_");J=S.length>=2&&S[1]=="type"?J+(y+"="+u+"&"):J+(y+"=redacted&")}}}else J=null;else J=U;return"XMLHTTP REQ ("+D+") [attempt "+F+"]: "+g+`
`+_+`
`+J})}function Kg(d,g,_,D,F,U,J){d.info(function(){return"XMLHTTP RESP ("+D+") [ attempt "+F+"]: "+g+`
`+_+`
`+U+" "+J})}function Nr(d,g,_,D){d.info(function(){return"XMLHTTP TEXT ("+g+"): "+An(d,_)+(D?" "+D:"")})}function Qg(d,g){d.info(function(){return"TIMEOUT: "+g})}xo.prototype.info=function(){};function An(d,g){if(!d.g)return g;if(!g)return null;try{let U=JSON.parse(g);if(U){for(d=0;d<U.length;d++)if(Array.isArray(U[d])){var _=U[d];if(!(_.length<2)){var D=_[1];if(Array.isArray(D)&&!(D.length<1)){var F=D[0];if(F!="noop"&&F!="stop"&&F!="close")for(let J=1;J<D.length;J++)D[J]=""}}}}return bo(U)}catch{return g}}var Za={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Ao={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Ro;function Eh(){}p(Eh,Gg),Eh.prototype.g=function(){return new XMLHttpRequest},Ro=new Eh;function ec(d){return encodeURIComponent(String(d))}function ko(d){var g=1;d=d.split(":");let _=[];for(;g>0&&d.length;)_.push(d.shift()),g--;return d.length&&_.push(d.join(":")),_}function Fi(d,g,_,D){this.j=d,this.i=g,this.l=_,this.S=D||1,this.V=new Cs(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Yg}function Yg(){this.i=null,this.g="",this.h=!1}var tc={},Gl={};function nc(d,g,_){d.M=1,d.A=oc(dr(g)),d.u=_,d.R=!0,rc(d,null)}function rc(d,g){d.F=Date.now(),No(d),d.B=dr(d.A);var _=d.B,D=d.S;Array.isArray(D)||(D=[String(D)]),nm(_.i,"t",D),d.C=0,_=d.j.L,d.h=new Yg,d.g=su(d.j,_?g:null,!d.u),d.P>0&&(d.O=new bh(l(d.Y,d,d.g),d.P)),g=d.V,_=d.g,D=d.ba;var F="readystatechange";Array.isArray(F)||(F&&(cn[0]=F.toString()),F=cn);for(let U=0;U<F.length;U++){let J=$g(_,F[U],D||g.handleEvent,!1,g.h||g);if(!J)break;g.g[J.key]=J}g=d.J?Bg(d.J):{},d.u?(d.v||(d.v="POST"),g["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.B,d.v,d.u,g)):(d.v="GET",d.g.ea(d.B,d.v,null,g)),So(),ql(d.i,d.v,d.B,d.l,d.S,d.u)}Fi.prototype.ba=function(d){d=d.target;let g=this.O;g&&rt(d)==3?g.j():this.Y(d)},Fi.prototype.Y=function(d){try{if(d==this.g)e:{let be=rt(this.g),u=this.g.ya(),f=this.g.ca();if(!(be<3)&&(be!=3||this.g&&(this.h.h||this.g.la()||lm(this.g)))){this.K||be!=4||u==7||(u==8||f<=0?So(3):So(2)),Kl(this);var g=this.g.ca();this.X=g;var _=Vi(this);if(this.o=g==200,Kg(this.i,this.v,this.B,this.l,this.S,be,g),this.o){if(this.U&&!this.L){t:{if(this.g){var D,F=this.g;if((D=F.g?F.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(D)){var U=D;break t}}U=null}if(d=U)Nr(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Mo(this,d);else{this.o=!1,this.m=3,ln(12),Ts(this),Po(this);break e}}if(this.R){d=!0;let y;for(;!this.K&&this.C<_.length;)if(y=Jg(this,_),y==Gl){be==4&&(this.m=4,ln(14),d=!1),Nr(this.i,this.l,null,"[Incomplete Response]");break}else if(y==tc){this.m=4,ln(15),Nr(this.i,this.l,_,"[Invalid Chunk]"),d=!1;break}else Nr(this.i,this.l,y,null),Mo(this,y);if(Th(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),be!=4||_.length!=0||this.h.h||(this.m=1,ln(16),d=!1),this.o=this.o&&d,!d)Nr(this.i,this.l,_,"[Invalid Chunked Response]"),Ts(this),Po(this);else if(_.length>0&&!this.W){this.W=!0;var J=this.j;J.g==this&&J.aa&&!J.P&&(J.j.info("Great, no buffering proxy detected. Bytes received: "+_.length),nu(J),J.P=!0,ln(11))}}else Nr(this.i,this.l,_,null),Mo(this,_);be==4&&Ts(this),this.o&&!this.K&&(be==4?Lh(this.j,this):(this.o=!1,No(this)))}else tI(this.g),g==400&&_.indexOf("Unknown SID")>0?(this.m=3,ln(12)):(this.m=0,ln(13)),Ts(this),Po(this)}}}catch{}finally{}};function Vi(d){if(!Th(d))return d.g.la();let g=lm(d.g);if(g==="")return"";let _="",D=g.length,F=rt(d.g)==4;if(!d.h.i){if(typeof TextDecoder>"u")return Ts(d),Po(d),"";d.h.i=new o.TextDecoder}for(let U=0;U<D;U++)d.h.h=!0,_+=d.h.i.decode(g[U],{stream:!(F&&U==D-1)});return g.length=0,d.h.g+=_,d.C=0,d.h.g}function Th(d){return d.g?d.v=="GET"&&d.M!=2&&d.j.Aa:!1}function Jg(d,g){var _=d.C,D=g.indexOf(`
`,_);return D==-1?Gl:(_=Number(g.substring(_,D)),isNaN(_)?tc:(D+=1,D+_>g.length?Gl:(g=g.slice(D,D+_),d.C=D+_,g)))}Fi.prototype.cancel=function(){this.K=!0,Ts(this)};function No(d){d.T=Date.now()+d.H,Wl(d,d.H)}function Wl(d,g){if(d.D!=null)throw Error("WatchDog timer not null");d.D=ur(l(d.aa,d),g)}function Kl(d){d.D&&(o.clearTimeout(d.D),d.D=null)}Fi.prototype.aa=function(){this.D=null;let d=Date.now();d-this.T>=0?(Qg(this.i,this.B),this.M!=2&&(So(),ln(17)),Ts(this),this.m=2,Po(this)):Wl(this,this.T-d)};function Po(d){d.j.I==0||d.K||Lh(d.j,d)}function Ts(d){Kl(d);var g=d.O;g&&typeof g.dispose=="function"&&g.dispose(),d.O=null,gn(d.V),d.g&&(g=d.g,d.g=null,g.abort(),g.dispose())}function Mo(d,g){try{var _=d.j;if(_.I!=0&&(_.g==d||ic(_.h,d))){if(!d.L&&ic(_.h,d)&&_.I==3){try{var D=_.Ba.g.parse(g)}catch{D=null}if(Array.isArray(D)&&D.length==3){var F=D;if(F[0]==0){e:if(!_.v){if(_.g)if(_.g.F+3e3<d.F)ru(_),Ss(_);else break e;$o(_),ln(18)}}else _.xa=F[1],0<_.xa-_.K&&F[2]<37500&&_.F&&_.A==0&&!_.C&&(_.C=ur(l(_.Va,_),6e3));Li(_.h)<=1&&_.ta&&(_.ta=void 0)}else ji(_,11)}else if((d.L||_.g==d)&&ru(_),!w(g))for(F=_.Ba.g.parse(g),g=0;g<F.length;g++){let f=F[g],y=f[0];if(!(y<=_.K))if(_.K=y,f=f[1],_.I==2)if(f[0]=="c"){_.M=f[1],_.ba=f[2];let S=f[3];S!=null&&(_.ka=S,_.j.info("VER="+_.ka));let L=f[4];L!=null&&(_.za=L,_.j.info("SVER="+_.za));let j=f[5];j!=null&&typeof j=="number"&&j>0&&(D=1.5*j,_.O=D,_.j.info("backChannelRequestTimeoutMs_="+D)),D=_;let K=d.g;if(K){let et=K.g?K.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(et){var U=D.h;U.g||et.indexOf("spdy")==-1&&et.indexOf("quic")==-1&&et.indexOf("h2")==-1||(U.j=U.l,U.g=new Set,U.h&&(Sh(U,U.h),U.h=null))}if(D.G){let Ut=K.g?K.g.getResponseHeader("X-HTTP-Session-Id"):null;Ut&&(D.wa=Ut,pt(D.J,D.G,Ut))}}_.I=3,_.l&&_.l.ra(),_.aa&&(_.T=Date.now()-d.F,_.j.info("Handshake RTT: "+_.T+"ms")),D=_;var J=d;if(D.na=iu(D,D.L?D.ba:null,D.W),J.L){Dh(D.h,J);var be=J,u=D.O;u&&(be.H=u),be.D&&(Kl(be),No(be)),D.g=J}else tu(D);_.i.length>0&&tr(_)}else f[0]!="stop"&&f[0]!="close"||ji(_,7);else _.I==3&&(f[0]=="stop"||f[0]=="close"?f[0]=="stop"?ji(_,7):eu(_):f[0]!="noop"&&_.l&&_.l.qa(f),_.A=0)}}So(4)}catch{}}var Xg=class{constructor(d,g){this.g=d,this.map=g}};function Ql(d){this.l=d||10,o.PerformanceNavigationTiming?(d=o.performance.getEntriesByType("navigation"),d=d.length>0&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Oo(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function Li(d){return d.h?1:d.g?d.g.size:0}function ic(d,g){return d.h?d.h==g:d.g?d.g.has(g):!1}function Sh(d,g){d.g?d.g.add(g):d.h=g}function Dh(d,g){d.h&&d.h==g?d.h=null:d.g&&d.g.has(g)&&d.g.delete(g)}Ql.prototype.cancel=function(){if(this.i=xh(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let d of this.g.values())d.cancel();this.g.clear()}};function xh(d){if(d.h!=null)return d.i.concat(d.h.G);if(d.g!=null&&d.g.size!==0){let g=d.i;for(let _ of d.g.values())g=g.concat(_.G);return g}return b(d.i)}var Ah=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Rh(d,g){if(d){d=d.split("&");for(let _=0;_<d.length;_++){let D=d[_].indexOf("="),F,U=null;D>=0?(F=d[_].substring(0,D),U=d[_].substring(D+1)):F=d[_],g(F,U?decodeURIComponent(U.replace(/\+/g," ")):"")}}}function Pr(d){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let g;d instanceof Pr?(this.l=d.l,Fo(this,d.j),this.o=d.o,this.g=d.g,sc(this,d.u),this.h=d.h,kh(this,rm(d.i)),this.m=d.m):d&&(g=String(d).match(Ah))?(this.l=!1,Fo(this,g[1]||"",!0),this.o=ac(g[2]||""),this.g=ac(g[3]||"",!0),sc(this,g[4]),this.h=ac(g[5]||"",!0),kh(this,g[6]||"",!0),this.m=ac(g[7]||"")):(this.l=!1,this.i=new ni(null,this.l))}Pr.prototype.toString=function(){let d=[];var g=this.j;g&&d.push(hr(g,cc,!0),":");var _=this.g;return(_||g=="file")&&(d.push("//"),(g=this.o)&&d.push(hr(g,cc,!0),"@"),d.push(ec(_).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.u,_!=null&&d.push(":",String(_))),(_=this.h)&&(this.g&&_.charAt(0)!="/"&&d.push("/"),d.push(hr(_,_.charAt(0)=="/"?Zg:Yl,!0))),(_=this.i.toString())&&d.push("?",_),(_=this.m)&&d.push("#",hr(_,Jl)),d.join("")},Pr.prototype.resolve=function(d){let g=dr(this),_=!!d.j;_?Fo(g,d.j):_=!!d.o,_?g.o=d.o:_=!!d.g,_?g.g=d.g:_=d.u!=null;var D=d.h;if(_)sc(g,d.u);else if(_=!!d.h){if(D.charAt(0)!="/")if(this.g&&!this.h)D="/"+D;else{var F=g.h.lastIndexOf("/");F!=-1&&(D=g.h.slice(0,F+1)+D)}if(F=D,F==".."||F==".")D="";else if(F.indexOf("./")!=-1||F.indexOf("/.")!=-1){D=F.lastIndexOf("/",0)==0,F=F.split("/");let U=[];for(let J=0;J<F.length;){let be=F[J++];be=="."?D&&J==F.length&&U.push(""):be==".."?((U.length>1||U.length==1&&U[0]!="")&&U.pop(),D&&J==F.length&&U.push("")):(U.push(be),D=!0)}D=U.join("/")}else D=F}return _?g.h=D:_=d.i.toString()!=="",_?kh(g,rm(d.i)):_=!!d.m,_&&(g.m=d.m),g};function dr(d){return new Pr(d)}function Fo(d,g,_){d.j=_?ac(g,!0):g,d.j&&(d.j=d.j.replace(/:$/,""))}function sc(d,g){if(g){if(g=Number(g),isNaN(g)||g<0)throw Error("Bad port number "+g);d.u=g}else d.u=null}function kh(d,g,_){g instanceof ni?(d.i=g,lc(d.i,d.l)):(_||(g=hr(g,vt)),d.i=new ni(g,d.l))}function pt(d,g,_){d.i.set(g,_)}function oc(d){return pt(d,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),d}function ac(d,g){return d?g?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function hr(d,g,_){return typeof d=="string"?(d=encodeURI(d).replace(g,ti),_&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function ti(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var cc=/[#\/\?@]/g,Yl=/[#\?:]/g,Zg=/[#\?]/g,vt=/[#\?@]/g,Jl=/#/g;function ni(d,g){this.h=this.g=null,this.i=d||null,this.j=!!g}function fr(d){d.g||(d.g=new Map,d.h=0,d.i&&Rh(d.i,function(g,_){d.add(decodeURIComponent(g.replace(/\+/g," ")),_)}))}n=ni.prototype,n.add=function(d,g){fr(this),this.i=null,d=Vo(this,d);let _=this.g.get(d);return _||this.g.set(d,_=[]),_.push(g),this.h+=1,this};function em(d,g){fr(d),g=Vo(d,g),d.g.has(g)&&(d.i=null,d.h-=d.g.get(g).length,d.g.delete(g))}function Nh(d,g){return fr(d),g=Vo(d,g),d.g.has(g)}n.forEach=function(d,g){fr(this),this.g.forEach(function(_,D){_.forEach(function(F){d.call(g,F,D,this)},this)},this)};function tm(d,g){fr(d);let _=[];if(typeof g=="string")Nh(d,g)&&(_=_.concat(d.g.get(Vo(d,g))));else for(d=Array.from(d.g.values()),g=0;g<d.length;g++)_=_.concat(d[g]);return _}n.set=function(d,g){return fr(this),this.i=null,d=Vo(this,d),Nh(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[g]),this.h+=1,this},n.get=function(d,g){return d?(d=tm(this,d),d.length>0?String(d[0]):g):g};function nm(d,g,_){em(d,g),_.length>0&&(d.i=null,d.g.set(Vo(d,g),b(_)),d.h+=_.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let d=[],g=Array.from(this.g.keys());for(let D=0;D<g.length;D++){var _=g[D];let F=ec(_);_=tm(this,_);for(let U=0;U<_.length;U++){let J=F;_[U]!==""&&(J+="="+ec(_[U])),d.push(J)}}return this.i=d.join("&")};function rm(d){let g=new ni;return g.i=d.i,d.g&&(g.g=new Map(d.g),g.h=d.h),g}function Vo(d,g){return g=String(g),d.j&&(g=g.toLowerCase()),g}function lc(d,g){g&&!d.j&&(fr(d),d.i=null,d.g.forEach(function(_,D){let F=D.toLowerCase();D!=F&&(em(this,D),nm(this,F,_))},d)),d.j=g}function Ui(d,g){let _=new xo;if(o.Image){let D=new Image;D.onload=h(ri,_,"TestLoadImage: loaded",!0,g,D),D.onerror=h(ri,_,"TestLoadImage: error",!1,g,D),D.onabort=h(ri,_,"TestLoadImage: abort",!1,g,D),D.ontimeout=h(ri,_,"TestLoadImage: timeout",!1,g,D),o.setTimeout(function(){D.ontimeout&&D.ontimeout()},1e4),D.src=d}else g(!1)}function im(d,g){let _=new xo,D=new AbortController,F=setTimeout(()=>{D.abort(),ri(_,"TestPingServer: timeout",!1,g)},1e4);fetch(d,{signal:D.signal}).then(U=>{clearTimeout(F),U.ok?ri(_,"TestPingServer: ok",!0,g):ri(_,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(F),ri(_,"TestPingServer: error",!1,g)})}function ri(d,g,_,D,F){try{F&&(F.onload=null,F.onerror=null,F.onabort=null,F.ontimeout=null),D(_)}catch{}}function sm(){this.g=new qg}function ii(d){this.i=d.Sb||null,this.h=d.ab||!1}p(ii,Gg),ii.prototype.g=function(){return new Xl(this.i,this.h)};function Xl(d,g){on.call(this),this.H=d,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}p(Xl,on),n=Xl.prototype,n.open=function(d,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=d,this.D=g,this.readyState=1,er(this)},n.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;let g={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};d&&(g.body=d),(this.H||o).fetch(new Request(this.D,g)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,uc(this)),this.readyState=0},n.Pa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,er(this)),this.g&&(this.readyState=3,er(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;om(this)}else d.text().then(this.Oa.bind(this),this.ga.bind(this))};function om(d){d.j.read().then(d.Ma.bind(d)).catch(d.ga.bind(d))}n.Ma=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var g=d.value?d.value:new Uint8Array(0);(g=this.B.decode(g,{stream:!d.done}))&&(this.response=this.responseText+=g)}d.done?uc(this):er(this),this.readyState==3&&om(this)}},n.Oa=function(d){this.g&&(this.response=this.responseText=d,uc(this))},n.Na=function(d){this.g&&(this.response=d,uc(this))},n.ga=function(){this.g&&uc(this)};function uc(d){d.readyState=4,d.l=null,d.j=null,d.B=null,er(d)}n.setRequestHeader=function(d,g){this.A.append(d,g)},n.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let d=[],g=this.h.entries();for(var _=g.next();!_.done;)_=_.value,d.push(_[0]+": "+_[1]),_=g.next();return d.join(`\r
`)};function er(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(Xl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function am(d){let g="";return Io(d,function(_,D){g+=D,g+=":",g+=_,g+=`\r
`}),g}function Ph(d,g,_){e:{for(D in _){var D=!1;break e}D=!0}D||(_=am(_),typeof d=="string"?_!=null&&ec(_):pt(d,g,_))}function gt(d){on.call(this),this.headers=new Map,this.L=d||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}p(gt,on);var Zl=/^https?$/i,cm=["POST","PUT"];n=gt.prototype,n.Fa=function(d){this.H=d},n.ea=function(d,g,_,D){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);g=g?g.toUpperCase():"GET",this.D=d,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Ro.g(),this.g.onreadystatechange=m(l(this.Ca,this));try{this.B=!0,this.g.open(g,String(d),!0),this.B=!1}catch(U){Lo(this,U);return}if(d=_||"",_=new Map(this.headers),D)if(Object.getPrototypeOf(D)===Object.prototype)for(var F in D)_.set(F,D[F]);else if(typeof D.keys=="function"&&typeof D.get=="function")for(let U of D.keys())_.set(U,D.get(U));else throw Error("Unknown input type for opt_headers: "+String(D));D=Array.from(_.keys()).find(U=>U.toLowerCase()=="content-type"),F=o.FormData&&d instanceof o.FormData,!(Array.prototype.indexOf.call(cm,g,void 0)>=0)||D||F||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[U,J]of _)this.g.setRequestHeader(U,J);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(d),this.v=!1}catch(U){Lo(this,U)}};function Lo(d,g){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=g,d.o=5,Uo(d),jo(d)}function Uo(d){d.A||(d.A=!0,an(d,"complete"),an(d,"error"))}n.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=d||7,an(this,"complete"),an(this,"abort"),jo(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),jo(this,!0)),gt.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Mh(this):this.Xa())},n.Xa=function(){Mh(this)};function Mh(d){if(d.h&&typeof s<"u"){if(d.v&&rt(d)==4)setTimeout(d.Ca.bind(d),0);else if(an(d,"readystatechange"),rt(d)==4){d.h=!1;try{let U=d.ca();e:switch(U){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var _;if(!(_=g)){var D;if(D=U===0){let J=String(d.D).match(Ah)[1]||null;!J&&o.self&&o.self.location&&(J=o.self.location.protocol.slice(0,-1)),D=!Zl.test(J?J.toLowerCase():"")}_=D}if(_)an(d,"complete"),an(d,"success");else{d.o=6;try{var F=rt(d)>2?d.g.statusText:""}catch{F=""}d.l=F+" ["+d.ca()+"]",Uo(d)}}finally{jo(d)}}}}function jo(d,g){if(d.g){d.m&&(clearTimeout(d.m),d.m=null);let _=d.g;d.g=null,g||an(d,"ready");try{_.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function rt(d){return d.g?d.g.readyState:0}n.ca=function(){try{return rt(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(d){if(this.g){var g=this.g.responseText;return d&&g.indexOf(d)==0&&(g=g.substring(d.length)),Hg(g)}};function lm(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.F){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function tI(d){let g={};d=(d.g&&rt(d)>=2&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let D=0;D<d.length;D++){if(w(d[D]))continue;var _=ko(d[D]);let F=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();let U=g[F]||[];g[F]=U,U.push(_)}jg(g,function(D){return D.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Bo(d,g,_){return _&&_.internalChannelParams&&_.internalChannelParams[d]||g}function Oh(d){this.za=0,this.i=[],this.j=new xo,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Bo("failFast",!1,d),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Bo("baseRetryDelayMs",5e3,d),this.Za=Bo("retryDelaySeedMs",1e4,d),this.Ta=Bo("forwardChannelMaxRetries",2,d),this.va=Bo("forwardChannelRequestTimeoutMs",2e4,d),this.ma=d&&d.xmlHttpFactory||void 0,this.Ua=d&&d.Rb||void 0,this.Aa=d&&d.useFetchStreams||!1,this.O=void 0,this.L=d&&d.supportsCrossDomainXhr||!1,this.M="",this.h=new Ql(d&&d.concurrentRequestLimit),this.Ba=new sm,this.S=d&&d.fastHandshake||!1,this.R=d&&d.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=d&&d.Pb||!1,d&&d.ua&&this.j.ua(),d&&d.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&d&&d.detectBufferingProxy||!1,this.ia=void 0,d&&d.longPollingTimeout&&d.longPollingTimeout>0&&(this.ia=d.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Oh.prototype,n.ka=8,n.I=1,n.connect=function(d,g,_,D){ln(0),this.W=d,this.H=g||{},_&&D!==void 0&&(this.H.OSID=_,this.H.OAID=D),this.F=this.X,this.J=iu(this,null,this.W),tr(this)};function eu(d){if(Fh(d),d.I==3){var g=d.V++,_=dr(d.J);if(pt(_,"SID",d.M),pt(_,"RID",g),pt(_,"TYPE","terminate"),si(d,_),g=new Fi(d,d.j,g),g.M=2,g.A=oc(dr(_)),_=!1,o.navigator&&o.navigator.sendBeacon)try{_=o.navigator.sendBeacon(g.A.toString(),"")}catch{}!_&&o.Image&&(new Image().src=g.A,_=!0),_||(g.g=su(g.j,null),g.g.ea(g.A)),g.F=Date.now(),No(g)}Uh(d)}function Ss(d){d.g&&(nu(d),d.g.cancel(),d.g=null)}function Fh(d){Ss(d),d.v&&(o.clearTimeout(d.v),d.v=null),ru(d),d.h.cancel(),d.m&&(typeof d.m=="number"&&o.clearTimeout(d.m),d.m=null)}function tr(d){if(!Oo(d.h)&&!d.m){d.m=!0;var g=d.Ea;Je||v(),Ie||(Je(),Ie=!0),T.add(g,d),d.D=0}}function um(d,g){return Li(d.h)>=d.h.j-(d.m?1:0)?!1:d.m?(d.i=g.G.concat(d.i),!0):d.I==1||d.I==2||d.D>=(d.Sa?0:d.Ta)?!1:(d.m=ur(l(d.Ea,d,g),zo(d,d.D)),d.D++,!0)}n.Ea=function(d){if(this.m)if(this.m=null,this.I==1){if(!d){this.V=Math.floor(Math.random()*1e5),d=this.V++;let F=new Fi(this,this.j,d),U=this.o;if(this.U&&(U?(U=Bg(U),sn(U,this.U)):U=this.U),this.u!==null||this.R||(F.J=U,U=null),this.S)e:{for(var g=0,_=0;_<this.i.length;_++){t:{var D=this.i[_];if("__data__"in D.map&&(D=D.map.__data__,typeof D=="string")){D=D.length;break t}D=void 0}if(D===void 0)break;if(g+=D,g>4096){g=_;break e}if(g===4096||_===this.i.length-1){g=_+1;break e}}g=1e3}else g=1e3;g=Vh(this,F,g),_=dr(this.J),pt(_,"RID",d),pt(_,"CVER",22),this.G&&pt(_,"X-HTTP-Session-Id",this.G),si(this,_),U&&(this.R?g="headers="+ec(am(U))+"&"+g:this.u&&Ph(_,this.u,U)),Sh(this.h,F),this.Ra&&pt(_,"TYPE","init"),this.S?(pt(_,"$req",g),pt(_,"SID","null"),F.U=!0,nc(F,_,null)):nc(F,_,g),this.I=2}}else this.I==3&&(d?dm(this,d):this.i.length==0||Oo(this.h)||dm(this))};function dm(d,g){var _;g?_=g.l:_=d.V++;let D=dr(d.J);pt(D,"SID",d.M),pt(D,"RID",_),pt(D,"AID",d.K),si(d,D),d.u&&d.o&&Ph(D,d.u,d.o),_=new Fi(d,d.j,_,d.D+1),d.u===null&&(_.J=d.o),g&&(d.i=g.G.concat(d.i)),g=Vh(d,_,1e3),_.H=Math.round(d.va*.5)+Math.round(d.va*.5*Math.random()),Sh(d.h,_),nc(_,D,g)}function si(d,g){d.H&&Io(d.H,function(_,D){pt(g,D,_)}),d.l&&Io({},function(_,D){pt(g,D,_)})}function Vh(d,g,_){_=Math.min(d.i.length,_);let D=d.l?l(d.l.Ka,d.l,d):null;e:{var F=d.i;let be=-1;for(;;){let u=["count="+_];be==-1?_>0?(be=F[0].g,u.push("ofs="+be)):be=0:u.push("ofs="+be);let f=!0;for(let y=0;y<_;y++){var U=F[y].g;let S=F[y].map;if(U-=be,U<0)be=Math.max(0,F[y].g-100),f=!1;else try{U="req"+U+"_"||"";try{var J=S instanceof Map?S:Object.entries(S);for(let[L,j]of J){let K=j;a(j)&&(K=bo(j)),u.push(U+L+"="+encodeURIComponent(K))}}catch(L){throw u.push(U+"type="+encodeURIComponent("_badmap")),L}}catch{D&&D(S)}}if(f){J=u.join("&");break e}}J=void 0}return d=d.i.splice(0,_),g.G=d,J}function tu(d){if(!d.g&&!d.v){d.Y=1;var g=d.Da;Je||v(),Ie||(Je(),Ie=!0),T.add(g,d),d.A=0}}function $o(d){return d.g||d.v||d.A>=3?!1:(d.Y++,d.v=ur(l(d.Da,d),zo(d,d.A)),d.A++,!0)}n.Da=function(){if(this.v=null,dc(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var d=4*this.T;this.j.info("BP detection timer enabled: "+d),this.B=ur(l(this.Wa,this),d)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,ln(10),Ss(this),dc(this))};function nu(d){d.B!=null&&(o.clearTimeout(d.B),d.B=null)}function dc(d){d.g=new Fi(d,d.j,"rpc",d.Y),d.u===null&&(d.g.J=d.o),d.g.P=0;var g=dr(d.na);pt(g,"RID","rpc"),pt(g,"SID",d.M),pt(g,"AID",d.K),pt(g,"CI",d.F?"0":"1"),!d.F&&d.ia&&pt(g,"TO",d.ia),pt(g,"TYPE","xmlhttp"),si(d,g),d.u&&d.o&&Ph(g,d.u,d.o),d.O&&(d.g.H=d.O);var _=d.g;d=d.ba,_.M=1,_.A=oc(dr(g)),_.u=null,_.R=!0,rc(_,d)}n.Va=function(){this.C!=null&&(this.C=null,Ss(this),$o(this),ln(19))};function ru(d){d.C!=null&&(o.clearTimeout(d.C),d.C=null)}function Lh(d,g){var _=null;if(d.g==g){ru(d),nu(d),d.g=null;var D=2}else if(ic(d.h,g))_=g.G,Dh(d.h,g),D=1;else return;if(d.I!=0){if(g.o)if(D==1){_=g.u?g.u.length:0,g=Date.now()-g.F;var F=d.D;D=To(),an(D,new Hl(D,_)),tr(d)}else tu(d);else if(F=g.m,F==3||F==0&&g.X>0||!(D==1&&um(d,g)||D==2&&$o(d)))switch(_&&_.length>0&&(g=d.h,g.i=g.i.concat(_)),F){case 1:ji(d,5);break;case 4:ji(d,10);break;case 3:ji(d,6);break;default:ji(d,2)}}}function zo(d,g){let _=d.Qa+Math.floor(Math.random()*d.Za);return d.isActive()||(_*=2),_*g}function ji(d,g){if(d.j.info("Error code "+g),g==2){var _=l(d.bb,d),D=d.Ua;let F=!D;D=new Pr(D||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||Fo(D,"https"),oc(D),F?Ui(D.toString(),_):im(D.toString(),_)}else ln(2);d.I=0,d.l&&d.l.pa(g),Uh(d),Fh(d)}n.bb=function(d){d?(this.j.info("Successfully pinged google.com"),ln(2)):(this.j.info("Failed to ping google.com"),ln(1))};function Uh(d){if(d.I=0,d.ja=[],d.l){let g=xh(d.h);(g.length!=0||d.i.length!=0)&&(k(d.ja,g),k(d.ja,d.i),d.h.i.length=0,b(d.i),d.i.length=0),d.l.oa()}}function iu(d,g,_){var D=_ instanceof Pr?dr(_):new Pr(_);if(D.g!="")g&&(D.g=g+"."+D.g),sc(D,D.u);else{var F=o.location;D=F.protocol,g=g?g+"."+F.hostname:F.hostname,F=+F.port;let U=new Pr(null);D&&Fo(U,D),g&&(U.g=g),F&&sc(U,F),_&&(U.h=_),D=U}return _=d.G,g=d.wa,_&&g&&pt(D,_,g),pt(D,"VER",d.ka),si(d,D),D}function su(d,g,_){if(g&&!d.L)throw Error("Can't create secondary domain capable XhrIo object.");return g=d.Aa&&!d.ma?new gt(new ii({ab:_})):new gt(d.ma),g.Fa(d.L),g}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function jh(){}n=jh.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Ds(){}Ds.prototype.g=function(d,g){return new kn(d,g)};function kn(d,g){on.call(this),this.g=new Oh(g),this.l=d,this.h=g&&g.messageUrlParams||null,d=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(d?d["X-WebChannel-Content-Type"]=g.messageContentType:d={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.sa&&(d?d["X-WebChannel-Client-Profile"]=g.sa:d={"X-WebChannel-Client-Profile":g.sa}),this.g.U=d,(d=g&&g.Qb)&&!w(d)&&(this.g.u=d),this.A=g&&g.supportsCrossDomainXhr||!1,this.v=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!w(g)&&(this.g.G=g,d=this.h,d!==null&&g in d&&(d=this.h,g in d&&delete d[g])),this.j=new xs(this)}p(kn,on),kn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},kn.prototype.close=function(){eu(this.g)},kn.prototype.o=function(d){var g=this.g;if(typeof d=="string"){var _={};_.__data__=d,d=_}else this.v&&(_={},_.__data__=bo(d),d=_);g.i.push(new Xg(g.Ya++,d)),g.I==3&&tr(g)},kn.prototype.N=function(){this.g.l=null,delete this.j,eu(this.g),delete this.g,kn.Z.N.call(this)};function Bh(d){zl.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var g=d.__sm__;if(g){e:{for(let _ in g){d=_;break e}d=void 0}(this.i=d)&&(d=this.i,g=g!==null&&d in g?g[d]:void 0),this.data=g}else this.data=d}p(Bh,zl);function Bi(){Xa.call(this),this.status=1}p(Bi,Xa);function xs(d){this.g=d}p(xs,jh),xs.prototype.ra=function(){an(this.g,"a")},xs.prototype.qa=function(d){an(this.g,new Bh(d))},xs.prototype.pa=function(d){an(this.g,new Bi)},xs.prototype.oa=function(){an(this.g,"b")},Ds.prototype.createWebChannel=Ds.prototype.g,kn.prototype.send=kn.prototype.o,kn.prototype.open=kn.prototype.m,kn.prototype.close=kn.prototype.close,yS=eo.createWebChannelTransport=function(){return new Ds},mS=eo.getStatEventTarget=function(){return To()},gS=eo.Event=Es,Nv=eo.Stat={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Za.NO_ERROR=0,Za.TIMEOUT=8,Za.HTTP_ERROR=6,kp=eo.ErrorCode=Za,Ao.COMPLETE="complete",pS=eo.EventType=Ao,Co.EventType=Eo,Eo.OPEN="a",Eo.CLOSE="b",Eo.ERROR="c",Eo.MESSAGE="d",on.prototype.listen=on.prototype.J,cd=eo.WebChannel=Co,wY=eo.FetchXmlHttpFactory=ii,gt.prototype.listenOnce=gt.prototype.K,gt.prototype.getLastError=gt.prototype.Ha,gt.prototype.getLastErrorCode=gt.prototype.ya,gt.prototype.getStatus=gt.prototype.ca,gt.prototype.getResponseJson=gt.prototype.La,gt.prototype.getResponseText=gt.prototype.la,gt.prototype.send=gt.prototype.ea,gt.prototype.setWithCredentials=gt.prototype.Fa,fS=eo.XhrIo=gt}).apply(typeof kv<"u"?kv:typeof self<"u"?self:typeof window<"u"?window:{});var NV="@firebase/firestore",PV="4.9.2";var Cn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Cn.UNAUTHENTICATED=new Cn(null),Cn.GOOGLE_CREDENTIALS=new Cn("google-credentials-uid"),Cn.FIRST_PARTY=new Cn("first-party-uid"),Cn.MOCK_USER=new Cn("mock-user");var Nd="12.3.0";var dl=new od("@firebase/firestore");function ld(){return dl.logLevel}function oe(n,...e){if(dl.logLevel<=Ke.DEBUG){let t=e.map(cx);dl.debug(`Firestore (${Nd}): ${n}`,...t)}}function io(n,...e){if(dl.logLevel<=Ke.ERROR){let t=e.map(cx);dl.error(`Firestore (${Nd}): ${n}`,...t)}}function yd(n,...e){if(dl.logLevel<=Ke.WARN){let t=e.map(cx);dl.warn(`Firestore (${Nd}): ${n}`,...t)}}function cx(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function ve(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,EL(n,r,t)}function EL(n,e,t){let r=`FIRESTORE (${Nd}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw io(r),new Error(r)}function ht(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||EL(e,i,r)}function Ae(n,e){return n}var q={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},ie=class extends Ks{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var to=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var Uv=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},CS=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Cn.UNAUTHENTICATED))}shutdown(){}},ES=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},TS=class{constructor(e){this.t=e,this.currentUser=Cn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ht(this.o===void 0,42304);let r=this.i,i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve(),s=new to;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new to,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let c=s;e.enqueueRetryable(async()=>{await c.promise,await i(this.currentUser)})},a=c=>{oe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(oe("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new to)}},0),o()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(oe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ht(typeof r.accessToken=="string",31837,{l:r}),new Uv(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return ht(e===null||typeof e=="string",2055,{h:e}),new Cn(e)}},SS=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=Cn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},DS=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new SS(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(Cn.FIRST_PARTY))}shutdown(){}invalidateToken(){}},jv=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},xS=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,OF(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){ht(this.o===void 0,3512);let r=s=>{s.error!=null&&oe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.m;return this.m=s.token,oe("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{oe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.V.getImmediate({optional:!0});s?i(s):oe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new jv(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(ht(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new jv(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function IY(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var Vp=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=IY(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%62))}return r}};function He(n,e){return n<e?-1:n>e?1:0}function AS(n,e){let t=Math.min(n.length,e.length);for(let r=0;r<t;r++){let i=n.charAt(r),s=e.charAt(r);if(i!==s)return _S(i)===_S(s)?He(i,s):_S(i)?1:-1}return He(n.length,e.length)}var bY=55296,CY=57343;function _S(n){let e=n.charCodeAt(0);return e>=bY&&e<=CY}function _d(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var MV="__name__",Bv=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&ve(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&ve(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let s=n.compareSegments(e.get(i),t.get(i));if(s!==0)return s}return He(e.length,t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):AS(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Zs.fromString(e.substring(4,e.length-2))}},Dt=class n extends Bv{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new ie(q.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},EY=/^[_a-zA-Z][_a-zA-Z0-9]*$/,xr=class n extends Bv{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return EY.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===MV}static keyField(){return new n([MV])}static fromServerFormat(e){let t=[],r="",i=0,s=()=>{if(r.length===0)throw new ie(q.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},o=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new ie(q.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new ie(q.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new ie(q.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var fe=class n{constructor(e){this.path=e}static fromPath(e){return new n(Dt.fromString(e))}static fromName(e){return new n(Dt.fromString(e).popFirst(5))}static empty(){return new n(Dt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Dt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Dt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new Dt(e.slice()))}};function TL(n,e,t){if(!t)throw new ie(q.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function TY(n,e,t,r){if(e===!0&&r===!0)throw new ie(q.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function OV(n){if(!fe.isDocumentKey(n))throw new ie(q.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function FV(n){if(fe.isDocumentKey(n))throw new ie(q.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function SL(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function _0(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":ve(12329,{type:typeof n})}function no(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ie(q.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=_0(n);throw new ie(q.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Jt(n,e){let t={typeString:n};return e&&(t.value=e),t}function Qp(n,e){if(!SL(n))throw new ie(q.INVALID_ARGUMENT,"JSON must be an object");let t;for(let r in e)if(e[r]){let i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}let o=n[r];if(i&&typeof o!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&o!==s.value){t=`Expected '${r}' field to equal '${s.value}'`;break}}if(t)throw new ie(q.INVALID_ARGUMENT,t);return!0}var VV=-62135596800,LV=1e6,Xt=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*LV);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ie(q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ie(q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<VV)throw new ie(q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ie(q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/LV}_compareTo(e){return this.seconds===e.seconds?He(this.nanoseconds,e.nanoseconds):He(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:n._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Qp(e,n._jsonSchema))return new n(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-VV;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};Xt._jsonSchemaVersion="firestore/timestamp/1.0",Xt._jsonSchema={type:Jt("string",Xt._jsonSchemaVersion),seconds:Jt("number"),nanoseconds:Jt("number")};var Pe=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new Xt(0,0))}static max(){return new n(new Xt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Lp=-1,RS=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};RS.UNKNOWN_ID=-1;function SY(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Pe.fromTimestamp(r===1e9?new Xt(t+1,0):new Xt(t,r));return new hl(i,fe.empty(),e)}function DY(n){return new hl(n.readTime,n.key,Lp)}var hl=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(Pe.min(),fe.empty(),Lp)}static max(){return new n(Pe.max(),fe.empty(),Lp)}};function xY(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=fe.comparator(n.documentKey,e.documentKey),t!==0?t:He(n.largestBatchId,e.largestBatchId))}var AY="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",kS=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};async function Pd(n){if(n.code!==q.FAILED_PRECONDITION||n.message!==AY)throw n;oe("LocalStore","Unexpectedly lost primary lease")}var G=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ve(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&t()},c=>r(c))}),o=!0,s===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let s=e.length,o=new Array(s),a=0;for(let c=0;c<s;c++){let l=c;t(e[l]).next(h=>{o[l]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,t){return new n((r,i)=>{let s=()=>{e()===!0?t().next(()=>{s()},i):r()};s()})}};function RY(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Md(n){return n.name==="IndexedDbTransactionError"}var lx=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>r.writeSequenceNumber(i))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.ue&&this.ue(t),t}}n.ce=-1;return n})(),ux=-1;function v0(n){return n==null}function Up(n){return n===0&&1/n==-1/0}function kY(n){return typeof n=="number"&&Number.isInteger(n)&&!Up(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var DL="";function NY(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=UV(e)),e=PY(n.get(t),e);return UV(e)}function PY(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let s=n.charAt(i);switch(s){case"\0":t+="";break;case DL:t+="";break;default:t+=s}}return t}function UV(n){return n+DL+""}var MY="remoteDocuments",xL="owner";var AL="mutationQueues";var RL="mutations";var kL="documentMutations",OY="remoteDocumentsV14";var NL="remoteDocumentGlobal";var PL="targets";var ML="targetDocuments";var OL="targetGlobal",FL="collectionParents";var VL="clientMetadata";var LL="bundles";var UL="namedQueries";var FY="indexConfiguration";var VY="indexState";var LY="indexEntries";var jL="documentOverlays";var UY="globals";var jY=[AL,RL,kL,MY,PL,xL,OL,ML,VL,NL,FL,LL,UL],pbe=[...jY,jL],BY=[AL,RL,kL,OY,PL,xL,OL,ML,VL,NL,FL,LL,UL,jL],$Y=BY,zY=[...$Y,FY,VY,LY];var gbe=[...zY,UY];function jV(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Na(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function BL(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Vt=class n{constructor(e,t){this.comparator=e,this.root=t||cs.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,cs.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,cs.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new fd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new fd(this.root,e,this.comparator,!1)}getReverseIterator(){return new fd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new fd(this.root,e,this.comparator,!0)}},fd=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},cs=class n{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=s??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new n(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ve(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ve(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw ve(27949);return e+(this.isRed()?0:1)}};cs.EMPTY=null,cs.RED=!0,cs.BLACK=!1;cs.EMPTY=new class{constructor(){this.size=0}get key(){throw ve(57766)}get value(){throw ve(16141)}get color(){throw ve(16727)}get left(){throw ve(29726)}get right(){throw ve(36894)}copy(e,t,r,i,s){return this}insert(e,t,r){return new cs(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var En=class n{constructor(e){this.comparator=e,this.data=new Vt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new $v(this.data.getIterator())}getIteratorFrom(e){return new $v(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},$v=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Wr=class n{constructor(e){this.fields=e,e.sort(xr.comparator)}static empty(){return new n([])}unionWith(e){let t=new En(xr.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return _d(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var zv=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Bn=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=(function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new zv("Invalid base64 string: "+s):s}})(e);return new n(t)}static fromUint8Array(e){let t=(function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s})(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return He(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Bn.EMPTY_BYTE_STRING=new Bn("");var HY=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function so(n){if(ht(!!n,39018),typeof n=="string"){let e=0,t=HY.exec(n);if(ht(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:St(n.seconds),nanos:St(n.nanos)}}function St(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function oo(n){return typeof n=="string"?Bn.fromBase64String(n):Bn.fromUint8Array(n)}var $L="server_timestamp",zL="__type__",HL="__previous_value__",qL="__local_write_time__";function dx(n){return(n?.mapValue?.fields||{})[zL]?.stringValue===$L}function w0(n){let e=n.mapValue.fields[HL];return dx(e)?w0(e):e}function jp(n){let e=so(n.mapValue.fields[qL].timestampValue);return new Xt(e.seconds,e.nanos)}var NS=class{constructor(e,t,r,i,s,o,a,c,l,h){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=l,this.isUsingEmulator=h}},Hv="(default)",qv=class n{constructor(e,t){this.projectId=e,this.database=t||Hv}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===Hv}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var hx="__type__",GL="__max__",Pv={mapValue:{fields:{__type__:{stringValue:GL}}}},fx="__vector__",vd="value";function xa(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?dx(n)?4:KL(n)?9007199254740991:WL(n)?10:11:ve(28295,{value:n})}function ds(n,e){if(n===e)return!0;let t=xa(n);if(t!==xa(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return jp(n).isEqual(jp(e));case 3:return(function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=so(i.timestampValue),a=so(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(i,s){return oo(i.bytesValue).isEqual(oo(s.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(i,s){return St(i.geoPointValue.latitude)===St(s.geoPointValue.latitude)&&St(i.geoPointValue.longitude)===St(s.geoPointValue.longitude)})(n,e);case 2:return(function(i,s){if("integerValue"in i&&"integerValue"in s)return St(i.integerValue)===St(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=St(i.doubleValue),a=St(s.doubleValue);return o===a?Up(o)===Up(a):isNaN(o)&&isNaN(a)}return!1})(n,e);case 9:return _d(n.arrayValue.values||[],e.arrayValue.values||[],ds);case 10:case 11:return(function(i,s){let o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(jV(o)!==jV(a))return!1;for(let c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!ds(o[c],a[c])))return!1;return!0})(n,e);default:return ve(52216,{left:n})}}function Bp(n,e){return(n.values||[]).find(t=>ds(t,e))!==void 0}function wd(n,e){if(n===e)return 0;let t=xa(n),r=xa(e);if(t!==r)return He(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return He(n.booleanValue,e.booleanValue);case 2:return(function(s,o){let a=St(s.integerValue||s.doubleValue),c=St(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1})(n,e);case 3:return BV(n.timestampValue,e.timestampValue);case 4:return BV(jp(n),jp(e));case 5:return AS(n.stringValue,e.stringValue);case 6:return(function(s,o){let a=oo(s),c=oo(o);return a.compareTo(c)})(n.bytesValue,e.bytesValue);case 7:return(function(s,o){let a=s.split("/"),c=o.split("/");for(let l=0;l<a.length&&l<c.length;l++){let h=He(a[l],c[l]);if(h!==0)return h}return He(a.length,c.length)})(n.referenceValue,e.referenceValue);case 8:return(function(s,o){let a=He(St(s.latitude),St(o.latitude));return a!==0?a:He(St(s.longitude),St(o.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return $V(n.arrayValue,e.arrayValue);case 10:return(function(s,o){let a=s.fields||{},c=o.fields||{},l=a[vd]?.arrayValue,h=c[vd]?.arrayValue,p=He(l?.values?.length||0,h?.values?.length||0);return p!==0?p:$V(l,h)})(n.mapValue,e.mapValue);case 11:return(function(s,o){if(s===Pv.mapValue&&o===Pv.mapValue)return 0;if(s===Pv.mapValue)return 1;if(o===Pv.mapValue)return-1;let a=s.fields||{},c=Object.keys(a),l=o.fields||{},h=Object.keys(l);c.sort(),h.sort();for(let p=0;p<c.length&&p<h.length;++p){let m=AS(c[p],h[p]);if(m!==0)return m;let b=wd(a[c[p]],l[h[p]]);if(b!==0)return b}return He(c.length,h.length)})(n.mapValue,e.mapValue);default:throw ve(23264,{he:t})}}function BV(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return He(n,e);let t=so(n),r=so(e),i=He(t.seconds,r.seconds);return i!==0?i:He(t.nanos,r.nanos)}function $V(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let s=wd(t[i],r[i]);if(s)return s}return He(t.length,r.length)}function Id(n){return PS(n)}function PS(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){let r=so(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return oo(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return fe.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",i=!0;for(let s of t.values||[])i?i=!1:r+=",",r+=PS(s);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){let r=Object.keys(t.fields||{}).sort(),i="{",s=!0;for(let o of r)s?s=!1:i+=",",i+=`${o}:${PS(t.fields[o])}`;return i+"}"})(n.mapValue):ve(61005,{value:n})}function Fv(n){switch(xa(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=w0(n);return e?16+Fv(e):16;case 5:return 2*n.stringValue.length;case 6:return oo(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce((i,s)=>i+Fv(s),0)})(n.arrayValue);case 10:case 11:return(function(r){let i=0;return Na(r.fields,(s,o)=>{i+=s.length+Fv(o)}),i})(n.mapValue);default:throw ve(13486,{value:n})}}function zV(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function MS(n){return!!n&&"integerValue"in n}function px(n){return!!n&&"arrayValue"in n}function HV(n){return!!n&&"nullValue"in n}function qV(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Vv(n){return!!n&&"mapValue"in n}function WL(n){return(n?.mapValue?.fields||{})[hx]?.stringValue===fx}function Pp(n){if(n.geoPointValue)return{geoPointValue:B({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:B({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return Na(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Pp(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Pp(n.arrayValue.values[t]);return e}return B({},n)}function KL(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===GL}var ybe={mapValue:{fields:{[hx]:{stringValue:fx},[vd]:{arrayValue:{}}}}};var Dr=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Vv(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Pp(t)}setAll(e){let t=xr.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){let c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=a.popLast()}o?r[a.lastSegment()]=Pp(o):i.push(a.lastSegment())});let s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){let t=this.field(e.popLast());Vv(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ds(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Vv(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Na(t,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new n(Pp(this.value))}};function QL(n){let e=[];return Na(n.fields,(t,r)=>{let i=new xr([t]);if(Vv(r)){let s=QL(r.mapValue).fields;if(s.length===0)e.push(i);else for(let o of s)e.push(i.child(o))}else e.push(i)}),new Wr(e)}var Di=class n{constructor(e,t,r,i,s,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new n(e,0,Pe.min(),Pe.min(),Pe.min(),Dr.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,Pe.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,Pe.min(),Pe.min(),Dr.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,Pe.min(),Pe.min(),Dr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Pe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Dr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Dr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Pe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var bd=class{constructor(e,t){this.position=e,this.inclusive=t}};function GV(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let s=e[i],o=n.position[i];if(s.field.isKeyField()?r=fe.comparator(fe.fromName(o.referenceValue),t.key):r=wd(o,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function WV(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ds(n.position[t],e.position[t]))return!1;return!0}var Cd=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function qY(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var Gv=class{},Yt=class n extends Gv{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new FS(e,t,r):t==="array-contains"?new US(e,r):t==="in"?new jS(e,r):t==="not-in"?new BS(e,r):t==="array-contains-any"?new $S(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new VS(e,r):new LS(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(wd(t,this.value)):t!==null&&xa(this.value)===xa(t)&&this.matchesComparison(wd(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ve(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},xi=class n extends Gv{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new n(e,t)}matches(e){return YL(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}};function YL(n){return n.op==="and"}function JL(n){return GY(n)&&YL(n)}function GY(n){for(let e of n.filters)if(e instanceof xi)return!1;return!0}function OS(n){if(n instanceof Yt)return n.field.canonicalString()+n.op.toString()+Id(n.value);if(JL(n))return n.filters.map(e=>OS(e)).join(",");{let e=n.filters.map(t=>OS(t)).join(",");return`${n.op}(${e})`}}function XL(n,e){return n instanceof Yt?(function(r,i){return i instanceof Yt&&r.op===i.op&&r.field.isEqual(i.field)&&ds(r.value,i.value)})(n,e):n instanceof xi?(function(r,i){return i instanceof xi&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&XL(o,i.filters[a]),!0):!1})(n,e):void ve(19439)}function ZL(n){return n instanceof Yt?(function(t){return`${t.field.canonicalString()} ${t.op} ${Id(t.value)}`})(n):n instanceof xi?(function(t){return t.op.toString()+" {"+t.getFilters().map(ZL).join(" ,")+"}"})(n):"Filter"}var FS=class extends Yt{constructor(e,t,r){super(e,t,r),this.key=fe.fromName(r.referenceValue)}matches(e){let t=fe.comparator(e.key,this.key);return this.matchesComparison(t)}},VS=class extends Yt{constructor(e,t){super(e,"in",t),this.keys=eU("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},LS=class extends Yt{constructor(e,t){super(e,"not-in",t),this.keys=eU("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function eU(n,e){return(e.arrayValue?.values||[]).map(t=>fe.fromName(t.referenceValue))}var US=class extends Yt{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return px(t)&&Bp(t.arrayValue,this.value)}},jS=class extends Yt{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&Bp(this.value.arrayValue,t)}},BS=class extends Yt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Bp(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Bp(this.value.arrayValue,t)}},$S=class extends Yt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!px(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Bp(this.value.arrayValue,r))}};var zS=class{constructor(e,t=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.Te=null}};function KV(n,e=null,t=[],r=[],i=null,s=null,o=null){return new zS(n,e,t,r,i,s,o)}function gx(n){let e=Ae(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>OS(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>(function(s){return s.field.canonicalString()+s.dir})(r)).join(","),v0(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Id(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Id(r)).join(",")),e.Te=t}return e.Te}function mx(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!qY(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!XL(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!WV(n.startAt,e.startAt)&&WV(n.endAt,e.endAt)}function HS(n){return fe.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var fl=class{constructor(e,t=null,r=[],i=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}};function WY(n,e,t,r,i,s,o,a){return new fl(n,e,t,r,i,s,o,a)}function yx(n){return new fl(n)}function QV(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function tU(n){return n.collectionGroup!==null}function Mp(n){let e=Ae(n);if(e.Ie===null){e.Ie=[];let t=new Set;for(let s of e.explicitOrderBy)e.Ie.push(s),t.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new En(xr.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.Ie.push(new Cd(s,r))}),t.has(xr.keyField().canonicalString())||e.Ie.push(new Cd(xr.keyField(),r))}return e.Ie}function ls(n){let e=Ae(n);return e.Ee||(e.Ee=KY(e,Mp(n))),e.Ee}function KY(n,e){if(n.limitType==="F")return KV(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new Cd(i.field,s)});let t=n.endAt?new bd(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new bd(n.startAt.position,n.startAt.inclusive):null;return KV(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function qS(n,e){let t=n.filters.concat([e]);return new fl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function GS(n,e,t){return new fl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function I0(n,e){return mx(ls(n),ls(e))&&n.limitType===e.limitType}function nU(n){return`${gx(ls(n))}|lt:${n.limitType}`}function ud(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>ZL(i)).join(", ")}]`),v0(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>(function(o){return`${o.field.canonicalString()} (${o.dir})`})(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Id(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Id(i)).join(",")),`Target(${r})`})(ls(n))}; limitType=${n.limitType})`}function b0(n,e){return e.isFoundDocument()&&(function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):fe.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)})(n,e)&&(function(r,i){for(let s of Mp(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0})(n,e)&&(function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0})(n,e)&&(function(r,i){return!(r.startAt&&!(function(o,a,c){let l=GV(o,a,c);return o.inclusive?l<=0:l<0})(r.startAt,Mp(r),i)||r.endAt&&!(function(o,a,c){let l=GV(o,a,c);return o.inclusive?l>=0:l>0})(r.endAt,Mp(r),i))})(n,e)}function QY(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function rU(n){return(e,t)=>{let r=!1;for(let i of Mp(n)){let s=YY(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function YY(n,e,t){let r=n.field.isKeyField()?fe.comparator(e.key,t.key):(function(s,o,a){let c=o.data.field(s),l=a.data.field(s);return c!==null&&l!==null?wd(c,l):ve(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ve(19790,{direction:n.dir})}}var ao=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Na(this.inner,(t,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return BL(this.inner)}size(){return this.innerSize}};var JY=new Vt(fe.comparator);function co(){return JY}var iU=new Vt(fe.comparator);function Np(...n){let e=iU;for(let t of n)e=e.insert(t.key,t);return e}function sU(n){let e=iU;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function al(){return Op()}function oU(){return Op()}function Op(){return new ao(n=>n.toString(),(n,e)=>n.isEqual(e))}var XY=new Vt(fe.comparator),ZY=new En(fe.comparator);function qe(...n){let e=ZY;for(let t of n)e=e.add(t);return e}var eJ=new En(He);function tJ(){return eJ}function _x(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Up(e)?"-0":e}}function aU(n){return{integerValue:""+n}}function nJ(n,e){return kY(e)?aU(e):_x(n,e)}var Ed=class{constructor(){this._=void 0}};function rJ(n,e,t){return n instanceof Td?(function(i,s){let o={fields:{[zL]:{stringValue:$L},[qL]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&dx(s)&&(s=w0(s)),s&&(o.fields[HL]=s),{mapValue:o}})(t,e):n instanceof pl?lU(n,e):n instanceof gl?uU(n,e):(function(i,s){let o=cU(i,s),a=YV(o)+YV(i.Ae);return MS(o)&&MS(i.Ae)?aU(a):_x(i.serializer,a)})(n,e)}function iJ(n,e,t){return n instanceof pl?lU(n,e):n instanceof gl?uU(n,e):t}function cU(n,e){return n instanceof Sd?(function(r){return MS(r)||(function(s){return!!s&&"doubleValue"in s})(r)})(e)?e:{integerValue:0}:null}var Td=class extends Ed{},pl=class extends Ed{constructor(e){super(),this.elements=e}};function lU(n,e){let t=dU(e);for(let r of n.elements)t.some(i=>ds(i,r))||t.push(r);return{arrayValue:{values:t}}}var gl=class extends Ed{constructor(e){super(),this.elements=e}};function uU(n,e){let t=dU(e);for(let r of n.elements)t=t.filter(i=>!ds(i,r));return{arrayValue:{values:t}}}var Sd=class extends Ed{constructor(e,t){super(),this.serializer=e,this.Ae=t}};function YV(n){return St(n.integerValue||n.doubleValue)}function dU(n){return px(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function sJ(n,e){return n.field.isEqual(e.field)&&(function(r,i){return r instanceof pl&&i instanceof pl||r instanceof gl&&i instanceof gl?_d(r.elements,i.elements,ds):r instanceof Sd&&i instanceof Sd?ds(r.Ae,i.Ae):r instanceof Td&&i instanceof Td})(n.transform,e.transform)}var WS=class{constructor(e,t){this.version=e,this.transformResults=t}},ro=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Lv(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var Dd=class{};function hU(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new $p(n.key,ro.none()):new ml(n.key,n.data,ro.none());{let t=n.data,r=Dr.empty(),i=new En(xr.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new hs(n.key,r,new Wr(i.toArray()),ro.none())}}function oJ(n,e,t){n instanceof ml?(function(i,s,o){let a=i.value.clone(),c=XV(i.fieldTransforms,s,o.transformResults);a.setAll(c),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()})(n,e,t):n instanceof hs?(function(i,s,o){if(!Lv(i.precondition,s))return void s.convertToUnknownDocument(o.version);let a=XV(i.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(fU(i)),c.setAll(a),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()})(n,e,t):(function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()})(0,e,t)}function Fp(n,e,t,r){return n instanceof ml?(function(s,o,a,c){if(!Lv(s.precondition,o))return a;let l=s.value.clone(),h=ZV(s.fieldTransforms,c,o);return l.setAll(h),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null})(n,e,t,r):n instanceof hs?(function(s,o,a,c){if(!Lv(s.precondition,o))return a;let l=ZV(s.fieldTransforms,c,o),h=o.data;return h.setAll(fU(s)),h.setAll(l),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(p=>p.field))})(n,e,t,r):(function(s,o,a){return Lv(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a})(n,e,t)}function aJ(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),s=cU(r.transform,i||null);s!=null&&(t===null&&(t=Dr.empty()),t.set(r.field,s))}return t||null}function JV(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&_d(r,i,(s,o)=>sJ(s,o))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var ml=class extends Dd{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},hs=class extends Dd{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function fU(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function XV(n,e,t){let r=new Map;ht(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let i=0;i<t.length;i++){let s=n[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,iJ(o,a,t[i]))}return r}function ZV(n,e,t){let r=new Map;for(let i of n){let s=i.transform,o=t.data.field(i.field);r.set(i.field,rJ(s,o,e))}return r}var $p=class extends Dd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},KS=class extends Dd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var QS=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&oJ(s,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=Fp(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=Fp(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=oU();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=t.has(i.key)?null:a;let c=hU(o,a);c!==null&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(Pe.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),qe())}isEqual(e){return this.batchId===e.batchId&&_d(this.mutations,e.mutations,(t,r)=>JV(t,r))&&_d(this.baseMutations,e.baseMutations,(t,r)=>JV(t,r))}},YS=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){ht(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=(function(){return XY})(),s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new n(e,t,r,i)}};var JS=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var XS=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var Kt,Qe;function cJ(n){switch(n){case q.OK:return ve(64938);case q.CANCELLED:case q.UNKNOWN:case q.DEADLINE_EXCEEDED:case q.RESOURCE_EXHAUSTED:case q.INTERNAL:case q.UNAVAILABLE:case q.UNAUTHENTICATED:return!1;case q.INVALID_ARGUMENT:case q.NOT_FOUND:case q.ALREADY_EXISTS:case q.PERMISSION_DENIED:case q.FAILED_PRECONDITION:case q.ABORTED:case q.OUT_OF_RANGE:case q.UNIMPLEMENTED:case q.DATA_LOSS:return!0;default:return ve(15467,{code:n})}}function pU(n){if(n===void 0)return io("GRPC error has no .code"),q.UNKNOWN;switch(n){case Kt.OK:return q.OK;case Kt.CANCELLED:return q.CANCELLED;case Kt.UNKNOWN:return q.UNKNOWN;case Kt.DEADLINE_EXCEEDED:return q.DEADLINE_EXCEEDED;case Kt.RESOURCE_EXHAUSTED:return q.RESOURCE_EXHAUSTED;case Kt.INTERNAL:return q.INTERNAL;case Kt.UNAVAILABLE:return q.UNAVAILABLE;case Kt.UNAUTHENTICATED:return q.UNAUTHENTICATED;case Kt.INVALID_ARGUMENT:return q.INVALID_ARGUMENT;case Kt.NOT_FOUND:return q.NOT_FOUND;case Kt.ALREADY_EXISTS:return q.ALREADY_EXISTS;case Kt.PERMISSION_DENIED:return q.PERMISSION_DENIED;case Kt.FAILED_PRECONDITION:return q.FAILED_PRECONDITION;case Kt.ABORTED:return q.ABORTED;case Kt.OUT_OF_RANGE:return q.OUT_OF_RANGE;case Kt.UNIMPLEMENTED:return q.UNIMPLEMENTED;case Kt.DATA_LOSS:return q.DATA_LOSS;default:return ve(39323,{code:n})}}(Qe=Kt||(Kt={}))[Qe.OK=0]="OK",Qe[Qe.CANCELLED=1]="CANCELLED",Qe[Qe.UNKNOWN=2]="UNKNOWN",Qe[Qe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Qe[Qe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Qe[Qe.NOT_FOUND=5]="NOT_FOUND",Qe[Qe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Qe[Qe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Qe[Qe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Qe[Qe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Qe[Qe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Qe[Qe.ABORTED=10]="ABORTED",Qe[Qe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Qe[Qe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Qe[Qe.INTERNAL=13]="INTERNAL",Qe[Qe.UNAVAILABLE=14]="UNAVAILABLE",Qe[Qe.DATA_LOSS=15]="DATA_LOSS";var lJ=null;function uJ(){return new TextEncoder}var dJ=new Zs([4294967295,4294967295],0);function eL(n){let e=uJ().encode(n),t=new hS;return t.update(e),new Uint8Array(t.digest())}function tL(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Zs([t,r],0),new Zs([i,s],0)]}var ZS=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new cl(`Invalid padding: ${t}`);if(r<0)throw new cl(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new cl(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new cl(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Zs.fromNumber(this.ge)}ye(e,t,r){let i=e.add(t.multiply(Zs.fromNumber(r)));return i.compare(dJ)===1&&(i=new Zs([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;let t=eL(e),[r,i]=tL(t);for(let s=0;s<this.hashCount;s++){let o=this.ye(r,i,s);if(!this.we(o))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new n(s,i,t);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.ge===0)return;let t=eL(e),[r,i]=tL(t);for(let s=0;s<this.hashCount;s++){let o=this.ye(r,i,s);this.Se(o)}}Se(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},cl=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Wv=class n{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,zp.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(Pe.min(),i,new Vt(He),co(),qe())}},zp=class n{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,qe(),qe(),qe())}};var pd=class{constructor(e,t,r,i){this.be=e,this.removedTargetIds=t,this.key=r,this.De=i}},Kv=class{constructor(e,t){this.targetId=e,this.Ce=t}},Qv=class{constructor(e,t,r=Bn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},Yv=class{constructor(){this.ve=0,this.Fe=nL(),this.Me=Bn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=qe(),t=qe(),r=qe();return this.Fe.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:ve(38017,{changeType:s})}}),new zp(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=nL()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,ht(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}},eD=class{constructor(e){this.Ge=e,this.ze=new Map,this.je=co(),this.Je=Mv(),this.He=Mv(),this.Ye=new Vt(He)}Ze(e){for(let t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(let t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,t=>{let r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:ve(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach((r,i)=>{this.rt(i)&&t(i)})}st(e){let t=e.targetId,r=e.Ce.count,i=this.ot(t);if(i){let s=i.target;if(HS(s))if(r===0){let o=new fe(s.path);this.et(t,o,Di.newNoDocument(o,Pe.min()))}else ht(r===1,20013,{expectedCount:r});else{let o=this._t(t);if(o!==r){let a=this.ut(e),c=a?this.ct(a,e,o):1;if(c!==0){this.it(t);let l=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,l)}lJ?.lt((function(h,p,m,b,k){let O={localCacheCount:h,existenceFilterCount:p.count,databaseId:m.database,projectId:m.projectId},N=p.unchangedNames;return N&&(O.bloomFilter={applied:k===0,hashCount:N?.hashCount??0,bitmapLength:N?.bits?.bitmap?.length??0,padding:N?.bits?.padding??0,mightContain:z=>b?.mightContain(z)??!1}),O})(o,e.Ce,this.Ge.ht(),a,c))}}}}ut(e){let t=e.Ce.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t,o,a;try{o=oo(r).toUint8Array()}catch(c){if(c instanceof zv)return yd("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new ZS(o,i,s)}catch(c){return yd(c instanceof cl?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.ge===0?null:a}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){let r=this.Ge.getRemoteKeysForTarget(t),i=0;return r.forEach(s=>{let o=this.Ge.ht(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.et(t,s,null),i++)}),i}Tt(e){let t=new Map;this.ze.forEach((s,o)=>{let a=this.ot(o);if(a){if(s.current&&HS(a.target)){let c=new fe(a.target.path);this.It(c).has(o)||this.Et(o,c)||this.et(o,c,Di.newNoDocument(c,e))}s.Be&&(t.set(o,s.ke()),s.qe())}});let r=qe();this.He.forEach((s,o)=>{let a=!0;o.forEachWhile(c=>{let l=this.ot(c);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.je.forEach((s,o)=>o.setReadTime(e));let i=new Wv(e,t,this.Ye,this.je,r);return this.je=co(),this.Je=Mv(),this.He=Mv(),this.Ye=new Vt(He),i}Xe(e,t){if(!this.rt(e))return;let r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;let i=this.nt(e);this.Et(e,t)?i.Qe(t,1):i.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){let t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new Yv,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new En(He),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new En(He),this.Je=this.Je.insert(e,t)),t}rt(e){let t=this.ot(e)!==null;return t||oe("WatchChangeAggregator","Detected inactive target",e),t}ot(e){let t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Yv),this.Ge.getRemoteKeysForTarget(e).forEach(t=>{this.et(e,t,null)})}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}};function Mv(){return new Vt(fe.comparator)}function nL(){return new Vt(fe.comparator)}var hJ={asc:"ASCENDING",desc:"DESCENDING"},fJ={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},pJ={and:"AND",or:"OR"},tD=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function nD(n,e){return n.useProto3Json||v0(e)?e:{value:e}}function Jv(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function gU(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function gJ(n,e){return Jv(n,e.toTimestamp())}function us(n){return ht(!!n,49232),Pe.fromTimestamp((function(t){let r=so(t);return new Xt(r.seconds,r.nanos)})(n))}function vx(n,e){return rD(n,e).canonicalString()}function rD(n,e){let t=(function(i){return new Dt(["projects",i.projectId,"databases",i.database])})(n).child("documents");return e===void 0?t:t.child(e)}function mU(n){let e=Dt.fromString(n);return ht(IU(e),10190,{key:e.toString()}),e}function iD(n,e){return vx(n.databaseId,e.path)}function vS(n,e){let t=mU(e);if(t.get(1)!==n.databaseId.projectId)throw new ie(q.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ie(q.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new fe(_U(t))}function yU(n,e){return vx(n.databaseId,e)}function mJ(n){let e=mU(n);return e.length===4?Dt.emptyPath():_U(e)}function sD(n){return new Dt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function _U(n){return ht(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function rL(n,e,t){return{name:iD(n,e),fields:t.value.mapValue.fields}}function yJ(n,e){let t;if("targetChange"in e){e.targetChange;let r=(function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:ve(39313,{state:l})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=(function(l,h){return l.useProto3Json?(ht(h===void 0||typeof h=="string",58123),Bn.fromBase64String(h||"")):(ht(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),Bn.fromUint8Array(h||new Uint8Array))})(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&(function(l){let h=l.code===void 0?q.UNKNOWN:pU(l.code);return new ie(h,l.message||"")})(o);t=new Qv(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=vS(n,r.document.name),s=us(r.document.updateTime),o=r.document.createTime?us(r.document.createTime):Pe.min(),a=new Dr({mapValue:{fields:r.document.fields}}),c=Di.newFoundDocument(i,s,o,a),l=r.targetIds||[],h=r.removedTargetIds||[];t=new pd(l,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=vS(n,r.document),s=r.readTime?us(r.readTime):Pe.min(),o=Di.newNoDocument(i,s),a=r.removedTargetIds||[];t=new pd([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=vS(n,r.document),s=r.removedTargetIds||[];t=new pd([],s,i,null)}else{if(!("filter"in e))return ve(11601,{Rt:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,o=new XS(i,s),a=r.targetId;t=new Kv(a,o)}}return t}function _J(n,e){let t;if(e instanceof ml)t={update:rL(n,e.key,e.value)};else if(e instanceof $p)t={delete:iD(n,e.key)};else if(e instanceof hs)t={update:rL(n,e.key,e.data),updateMask:DJ(e.fieldMask)};else{if(!(e instanceof KS))return ve(16599,{Vt:e.type});t={verify:iD(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>(function(s,o){let a=o.transform;if(a instanceof Td)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof pl)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof gl)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Sd)return{fieldPath:o.field.canonicalString(),increment:a.Ae};throw ve(20930,{transform:o.transform})})(0,r))),e.precondition.isNone||(t.currentDocument=(function(i,s){return s.updateTime!==void 0?{updateTime:gJ(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:ve(27497)})(n,e.precondition)),t}function vJ(n,e){return n&&n.length>0?(ht(e!==void 0,14353),n.map(t=>(function(i,s){let o=i.updateTime?us(i.updateTime):us(s);return o.isEqual(Pe.min())&&(o=us(s)),new WS(o,i.transformResults||[])})(t,e))):[]}function wJ(n,e){return{documents:[yU(n,e.path)]}}function IJ(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=yU(n,i);let s=(function(l){if(l.length!==0)return wU(xi.create(l,"and"))})(e.filters);s&&(t.structuredQuery.where=s);let o=(function(l){if(l.length!==0)return l.map(h=>(function(m){return{field:dd(m.field),direction:EJ(m.dir)}})(h))})(e.orderBy);o&&(t.structuredQuery.orderBy=o);let a=nD(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=(function(l){return{before:l.inclusive,values:l.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(l){return{before:!l.inclusive,values:l.position}})(e.endAt)),{ft:t,parent:i}}function bJ(n){let e=mJ(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){ht(r===1,65062);let h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];t.where&&(s=(function(p){let m=vU(p);return m instanceof xi&&JL(m)?m.getFilters():[m]})(t.where));let o=[];t.orderBy&&(o=(function(p){return p.map(m=>(function(k){return new Cd(hd(k.field),(function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(k.direction))})(m))})(t.orderBy));let a=null;t.limit&&(a=(function(p){let m;return m=typeof p=="object"?p.value:p,v0(m)?null:m})(t.limit));let c=null;t.startAt&&(c=(function(p){let m=!!p.before,b=p.values||[];return new bd(b,m)})(t.startAt));let l=null;return t.endAt&&(l=(function(p){let m=!p.before,b=p.values||[];return new bd(b,m)})(t.endAt)),WY(e,i,o,s,a,"F",c,l)}function CJ(n,e){let t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ve(28987,{purpose:i})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function vU(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=hd(t.unaryFilter.field);return Yt.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=hd(t.unaryFilter.field);return Yt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=hd(t.unaryFilter.field);return Yt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=hd(t.unaryFilter.field);return Yt.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ve(61313);default:return ve(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Yt.create(hd(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ve(58110);default:return ve(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return xi.create(t.compositeFilter.filters.map(r=>vU(r)),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ve(1026)}})(t.compositeFilter.op))})(n):ve(30097,{filter:n})}function EJ(n){return hJ[n]}function TJ(n){return fJ[n]}function SJ(n){return pJ[n]}function dd(n){return{fieldPath:n.canonicalString()}}function hd(n){return xr.fromServerFormat(n.fieldPath)}function wU(n){return n instanceof Yt?(function(t){if(t.op==="=="){if(qV(t.value))return{unaryFilter:{field:dd(t.field),op:"IS_NAN"}};if(HV(t.value))return{unaryFilter:{field:dd(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(qV(t.value))return{unaryFilter:{field:dd(t.field),op:"IS_NOT_NAN"}};if(HV(t.value))return{unaryFilter:{field:dd(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:dd(t.field),op:TJ(t.op),value:t.value}}})(n):n instanceof xi?(function(t){let r=t.getFilters().map(i=>wU(i));return r.length===1?r[0]:{compositeFilter:{op:SJ(t.op),filters:r}}})(n):ve(54877,{filter:n})}function DJ(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function IU(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Hp=class n{constructor(e,t,r,i,s=Pe.min(),o=Pe.min(),a=Bn.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var oD=class{constructor(e){this.yt=e}};function xJ(n){let e=bJ({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?GS(e,e.limit,"L"):e}var Xv=class{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(St(e.integerValue));else if("doubleValue"in e){let r=St(e.doubleValue);isNaN(r)?this.Ft(t,13):(this.Ft(t,15),Up(r)?t.Mt(0):t.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(t,20),typeof r=="string"&&(r=so(r)),t.xt(`${r.seconds||""}`),t.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(oo(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ft(t,45),t.Mt(r.latitude||0),t.Mt(r.longitude||0)}else"mapValue"in e?KL(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):WL(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):ve(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){let r=e.fields||{};this.Ft(t,55);for(let i of Object.keys(r))this.Ot(i,t),this.Ct(r[i],t)}kt(e,t){let r=e.fields||{};this.Ft(t,53);let i=vd,s=r[i].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(St(s)),this.Ot(i,t),this.Ct(r[i],t)}Qt(e,t){let r=e.values||[];this.Ft(t,50);for(let i of r)this.Ct(i,t)}Lt(e,t){this.Ft(t,37),fe.fromName(e).path.forEach(r=>{this.Ft(t,60),this.Ut(r,t)})}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}};Xv.Kt=new Xv;var aD=class{constructor(){this.Cn=new cD}addToCollectionParentIndex(e,t){return this.Cn.add(t),G.resolve()}getCollectionParents(e,t){return G.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return G.resolve()}deleteFieldIndex(e,t){return G.resolve()}deleteAllFieldIndexes(e){return G.resolve()}createTargetIndexes(e,t){return G.resolve()}getDocumentsMatchingTarget(e,t){return G.resolve(null)}getIndexType(e,t){return G.resolve(0)}getFieldIndexes(e,t){return G.resolve([])}getNextCollectionGroupToUpdate(e){return G.resolve(null)}getMinOffset(e,t){return G.resolve(hl.min())}getMinOffsetFromCollectionGroup(e,t){return G.resolve(hl.min())}updateCollectionGroup(e,t,r){return G.resolve()}updateIndexEntries(e,t){return G.resolve()}},cD=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new En(Dt.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new En(Dt.comparator)).toArray()}};var _be=new Uint8Array(0);var iL={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},bU=41943040,Gr=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};Gr.DEFAULT_COLLECTION_PERCENTILE=10,Gr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Gr.DEFAULT=new Gr(bU,Gr.DEFAULT_COLLECTION_PERCENTILE,Gr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Gr.DISABLED=new Gr(-1,0,0);var qp=class n{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new n(0)}static cr(){return new n(-1)}};var sL="LruGarbageCollector",AJ=1048576;function oL([n,e],[t,r]){let i=He(n,t);return i===0?He(e,r):i}var lD=class{constructor(e){this.Ir=e,this.buffer=new En(oL),this.Er=0}dr(){return++this.Er}Ar(e){let t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();oL(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},uD=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){oe(sL,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Md(t)?oe(sL,"Ignoring IndexedDB error during garbage collection: ",t):await Pd(t)}await this.Vr(3e5)})}},dD=class{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return G.resolve(lx.ce);let r=new lD(t);return this.mr.forEachTarget(e,i=>r.Ar(i.sequenceNumber)).next(()=>this.mr.pr(e,i=>r.Ar(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(oe("LruGarbageCollector","Garbage collection skipped; disabled"),G.resolve(iL)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(oe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),iL):this.yr(e,t))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,i,s,o,a,c,l,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(oe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,o=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,a=Date.now(),this.removeTargets(e,r,t))).next(p=>(s=p,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(l=Date.now(),ld()<=Ke.DEBUG&&oe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(c-a)+`ms
	Removed ${p} documents in `+(l-c)+`ms
Total Duration: ${l-h}ms`),G.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:p})))}};function RJ(n,e){return new dD(n,e)}var hD=class{constructor(){this.changes=new ao(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Di.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?G.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var fD=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var pD=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&Fp(r.mutation,i,Wr.empty(),Xt.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,qe()).next(()=>r))}getLocalViewOfDocuments(e,t,r=qe()){let i=al();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=Np();return s.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){let r=al();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,qe()))}populateOverlays(e,t,r){let i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,r,i){let s=co(),o=Op(),a=(function(){return Op()})();return t.forEach((c,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof hs)?s=s.insert(l.key,l):h!==void 0?(o.set(l.key,h.mutation.getFieldMask()),Fp(h.mutation,l,h.mutation.getFieldMask(),Xt.now())):o.set(l.key,Wr.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((l,h)=>o.set(l,h)),t.forEach((l,h)=>a.set(l,new fD(h,o.get(l)??null))),a))}recalculateAndSaveOverlays(e,t){let r=Op(),i=new Vt((o,a)=>o-a),s=qe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(let a of o)a.keys().forEach(c=>{let l=t.get(c);if(l===null)return;let h=r.get(c)||Wr.empty();h=a.applyToLocalView(l,h),r.set(c,h);let p=(i.get(a.batchId)||qe()).add(c);i=i.insert(a.batchId,p)})}).next(()=>{let o=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),l=c.key,h=c.value,p=oU();h.forEach(m=>{if(!s.has(m)){let b=hU(t.get(m),r.get(m));b!==null&&p.set(m,b),s=s.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,l,p))}return G.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return(function(o){return fe.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):tU(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):G.resolve(al()),a=Lp,c=s;return o.next(l=>G.forEach(l,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),s.get(h)?G.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{c=c.insert(h,m)}))).next(()=>this.populateOverlays(e,l,s)).next(()=>this.computeViews(e,c,l,qe())).next(h=>({batchId:a,changes:sU(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new fe(t)).next(r=>{let i=Np();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let s=t.collectionGroup,o=Np();return this.indexManager.getCollectionParents(e,s).next(a=>G.forEach(a,c=>{let l=(function(p,m){return new fl(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)})(t,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((p,m)=>{o=o.insert(p,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((c,l)=>{let h=l.getKey();o.get(h)===null&&(o=o.insert(h,Di.newInvalidDocument(h)))});let a=Np();return o.forEach((c,l)=>{let h=s.get(c);h!==void 0&&Fp(h.mutation,l,Wr.empty(),Xt.now()),b0(t,l)&&(a=a.insert(c,l))}),a})}};var gD=class{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return G.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:us(i.createTime)}})(t)),G.resolve()}getNamedQuery(e,t){return G.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(i){return{name:i.name,query:xJ(i.bundledQuery),readTime:us(i.readTime)}})(t)),G.resolve()}};var mD=class{constructor(){this.overlays=new Vt(fe.comparator),this.qr=new Map}getOverlay(e,t){return G.resolve(this.overlays.get(t))}getOverlays(e,t){let r=al();return G.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.St(e,t,s)}),G.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.qr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.qr.delete(r)),G.resolve()}getOverlaysForCollection(e,t,r){let i=al(),s=t.length+1,o=new fe(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let c=a.getNext().value,l=c.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return G.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new Vt((l,h)=>l-h),o=this.overlays.getIterator();for(;o.hasNext();){let l=o.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let h=s.get(l.largestBatchId);h===null&&(h=al(),s=s.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let a=al(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return G.resolve(a)}St(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new JS(t,r));let s=this.qr.get(t);s===void 0&&(s=qe(),this.qr.set(t,s)),this.qr.set(t,s.add(r.key))}};var yD=class{constructor(){this.sessionToken=Bn.EMPTY_BYTE_STRING}getSessionToken(e){return G.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,G.resolve()}};var Gp=class{constructor(){this.Qr=new En(Qt.$r),this.Ur=new En(Qt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){let r=new Qt(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Gr(new Qt(e,t))}zr(e,t){e.forEach(r=>this.removeReference(r,t))}jr(e){let t=new fe(new Dt([])),r=new Qt(t,e),i=new Qt(t,e+1),s=[];return this.Ur.forEachInRange([r,i],o=>{this.Gr(o),s.push(o.key)}),s}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){let t=new fe(new Dt([])),r=new Qt(t,e),i=new Qt(t,e+1),s=qe();return this.Ur.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let t=new Qt(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},Qt=class{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return fe.comparator(e.key,t.key)||He(e.Yr,t.Yr)}static Kr(e,t){return He(e.Yr,t.Yr)||fe.comparator(e.key,t.key)}};var _D=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new En(Qt.$r)}checkEmpty(e){return G.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new QS(s,t,r,i);this.mutationQueue.push(o);for(let a of i)this.Zr=this.Zr.add(new Qt(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return G.resolve(o)}lookupMutationBatch(e,t){return G.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.ei(r),s=i<0?0:i;return G.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return G.resolve(this.mutationQueue.length===0?ux:this.tr-1)}getAllMutationBatches(e){return G.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new Qt(t,0),i=new Qt(t,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([r,i],o=>{let a=this.Xr(o.Yr);s.push(a)}),G.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new En(He);return t.forEach(i=>{let s=new Qt(i,0),o=new Qt(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,o],a=>{r=r.add(a.Yr)})}),G.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,s=r;fe.isDocumentKey(s)||(s=s.child(""));let o=new Qt(new fe(s),0),a=new En(He);return this.Zr.forEachWhile(c=>{let l=c.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(c.Yr)),!0)},o),G.resolve(this.ti(a))}ti(e){let t=[];return e.forEach(r=>{let i=this.Xr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){ht(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return G.forEach(t.mutations,i=>{let s=new Qt(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,t){let r=new Qt(t,0),i=this.Zr.firstAfterOrEqual(r);return G.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,G.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){let t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var vD=class{constructor(e){this.ri=e,this.docs=(function(){return new Vt(fe.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return G.resolve(r?r.document.mutableCopy():Di.newInvalidDocument(t))}getEntries(e,t){let r=co();return t.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Di.newInvalidDocument(i))}),G.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=co(),o=t.path,a=new fe(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:l,value:{document:h}}=c.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||xY(DY(h),r)<=0||(i.has(h.key)||b0(t,h))&&(s=s.insert(h.key,h.mutableCopy()))}return G.resolve(s)}getAllFromCollectionGroup(e,t,r,i){ve(9500)}ii(e,t){return G.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new wD(this)}getSize(e){return G.resolve(this.size)}},wD=class extends hD{constructor(e){super(),this.Nr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)}),G.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}};var ID=class{constructor(e){this.persistence=e,this.si=new ao(t=>gx(t),mx),this.lastRemoteSnapshotVersion=Pe.min(),this.highestTargetId=0,this.oi=0,this._i=new Gp,this.targetCount=0,this.ai=qp.ur()}forEachTarget(e,t){return this.si.forEach((r,i)=>t(i)),G.resolve()}getLastRemoteSnapshotVersion(e){return G.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return G.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),G.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),G.resolve()}Pr(e){this.si.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.ai=new qp(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,G.resolve()}updateTargetData(e,t){return this.Pr(t),G.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,G.resolve()}removeTargets(e,t,r){let i=0,s=[];return this.si.forEach((o,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.si.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),G.waitFor(s).next(()=>i)}getTargetCount(e){return G.resolve(this.targetCount)}getTargetData(e,t){let r=this.si.get(t)||null;return G.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),G.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);let i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),G.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),G.resolve()}getMatchingKeysForTargetId(e,t){let r=this._i.Hr(t);return G.resolve(r)}containsKey(e,t){return G.resolve(this._i.containsKey(t))}};var Zv=class{constructor(e,t){this.ui={},this.overlays={},this.ci=new lx(0),this.li=!1,this.li=!0,this.hi=new yD,this.referenceDelegate=e(this),this.Pi=new ID(this),this.indexManager=new aD,this.remoteDocumentCache=(function(i){return new vD(i)})(r=>this.referenceDelegate.Ti(r)),this.serializer=new oD(t),this.Ii=new gD(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new mD,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new _D(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){oe("MemoryPersistence","Starting transaction:",e);let i=new bD(this.ci.next());return this.referenceDelegate.Ei(),r(i).next(s=>this.referenceDelegate.di(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ai(e,t){return G.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,t)))}},bD=class extends kS{constructor(e){super(),this.currentSequenceNumber=e}},CD=class n{constructor(e){this.persistence=e,this.Ri=new Gp,this.Vi=null}static mi(e){return new n(e)}get fi(){if(this.Vi)return this.Vi;throw ve(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),G.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),G.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),G.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach(i=>this.fi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.fi.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}Ei(){this.Vi=new Set}di(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return G.forEach(this.fi,r=>{let i=fe.fromPath(r);return this.gi(e,i).next(s=>{s||t.removeEntry(i,Pe.min())})}).next(()=>(this.Vi=null,t.apply(e)))}updateLimboDocument(e,t){return this.gi(e,t).next(r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())})}Ti(e){return 0}gi(e,t){return G.or([()=>G.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}},e0=class n{constructor(e,t){this.persistence=e,this.pi=new ao(r=>NY(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=RJ(this,t)}static mi(e,t){return new n(e,t)}Ei(){}di(e){return G.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){let t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}wr(e){let t=0;return this.pr(e,r=>{t++}).next(()=>t)}pr(e,t){return G.forEach(this.pi,(r,i)=>this.br(e,r,i).next(s=>s?G.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ii(e,o=>this.br(e,o,t).next(a=>{a||(r++,s.removeEntry(o,Pe.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),G.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),G.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),G.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),G.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Fv(e.data.value)),t}br(e,t,r){return G.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let i=this.pi.get(t);return G.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var ED=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=i}static As(e,t){let r=qe(),i=qe();for(let s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new n(e,t.fromCache,r,i)}};var TD=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var SD=class{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return DF()?8:RY(SF())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,i){let s={result:null};return this.ys(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ws(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new TD;return this.Ss(e,t,o).next(a=>{if(s.result=a,this.Vs)return this.bs(e,t,o,a.size)})}).next(()=>s.result)}bs(e,t,r,i){return r.documentReadCount<this.fs?(ld()<=Ke.DEBUG&&oe("QueryEngine","SDK will not create cache indexes for query:",ud(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),G.resolve()):(ld()<=Ke.DEBUG&&oe("QueryEngine","Query:",ud(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(ld()<=Ke.DEBUG&&oe("QueryEngine","The SDK decides to create cache indexes for query:",ud(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ls(t))):G.resolve())}ys(e,t){if(QV(t))return G.resolve(null);let r=ls(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=GS(t,null,"F"),r=ls(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=qe(...s);return this.ps.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let l=this.Ds(t,a);return this.Cs(t,l,o,c.readTime)?this.ys(e,GS(t,null,"F")):this.vs(e,l,t,c)}))})))}ws(e,t,r,i){return QV(t)||i.isEqual(Pe.min())?G.resolve(null):this.ps.getDocuments(e,r).next(s=>{let o=this.Ds(t,s);return this.Cs(t,o,r,i)?G.resolve(null):(ld()<=Ke.DEBUG&&oe("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ud(t)),this.vs(e,o,t,SY(i,Lp)).next(a=>a))})}Ds(e,t){let r=new En(rU(e));return t.forEach((i,s)=>{b0(e,s)&&(r=r.add(s))}),r}Cs(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ss(e,t,r){return ld()<=Ke.DEBUG&&oe("QueryEngine","Using full collection scan to execute query:",ud(t)),this.ps.getDocumentsMatchingQuery(e,t,hl.min(),r)}vs(e,t,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}};var wx="LocalStore",kJ=3e8,DD=class{constructor(e,t,r,i){this.persistence=e,this.Fs=t,this.serializer=i,this.Ms=new Vt(He),this.xs=new ao(s=>gx(s),mx),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new pD(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}};function NJ(n,e,t,r){return new DD(n,e,t,r)}async function CU(n,e){let t=Ae(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.Bs(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{let o=[],a=[],c=qe();for(let l of i){o.push(l.batchId);for(let h of l.mutations)c=c.add(h.key)}for(let l of s){a.push(l.batchId);for(let h of l.mutations)c=c.add(h.key)}return t.localDocuments.getDocuments(r,c).next(l=>({Ls:l,removedBatchIds:o,addedBatchIds:a}))})})}function PJ(n,e){let t=Ae(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),s=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(a,c,l,h){let p=l.batch,m=p.keys(),b=G.resolve();return m.forEach(k=>{b=b.next(()=>h.getEntry(c,k)).next(O=>{let N=l.docVersions.get(k);ht(N!==null,48541),O.version.compareTo(N)<0&&(p.applyToRemoteDocument(O,l),O.isValidDocument()&&(O.setReadTime(l.commitVersion),h.addEntry(O)))})}),b.next(()=>a.mutationQueue.removeMutationBatch(c,p))})(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(a){let c=qe();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(c=c.add(a.batch.mutations[l].key));return c})(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function EU(n){let e=Ae(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Pi.getLastRemoteSnapshotVersion(t))}function MJ(n,e){let t=Ae(n),r=e.snapshotVersion,i=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=t.Ns.newChangeBuffer({trackRemovals:!0});i=t.Ms;let a=[];e.targetChanges.forEach((h,p)=>{let m=i.get(p);if(!m)return;a.push(t.Pi.removeMatchingKeys(s,h.removedDocuments,p).next(()=>t.Pi.addMatchingKeys(s,h.addedDocuments,p)));let b=m.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(p)!==null?b=b.withResumeToken(Bn.EMPTY_BYTE_STRING,Pe.min()).withLastLimboFreeSnapshotVersion(Pe.min()):h.resumeToken.approximateByteSize()>0&&(b=b.withResumeToken(h.resumeToken,r)),i=i.insert(p,b),(function(O,N,z){return O.resumeToken.approximateByteSize()===0||N.snapshotVersion.toMicroseconds()-O.snapshotVersion.toMicroseconds()>=kJ?!0:z.addedDocuments.size+z.modifiedDocuments.size+z.removedDocuments.size>0})(m,b,h)&&a.push(t.Pi.updateTargetData(s,b))});let c=co(),l=qe();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(OJ(s,o,e.documentUpdates).next(h=>{c=h.ks,l=h.qs})),!r.isEqual(Pe.min())){let h=t.Pi.getLastRemoteSnapshotVersion(s).next(p=>t.Pi.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(h)}return G.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,c,l)).next(()=>c)}).then(s=>(t.Ms=i,s))}function OJ(n,e,t){let r=qe(),i=qe();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=co();return t.forEach((a,c)=>{let l=s.get(a);c.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(Pe.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||c.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):oe(wx,"Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version)}),{ks:o,qs:i}})}function FJ(n,e){let t=Ae(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=ux),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function VJ(n,e){let t=Ae(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Pi.getTargetData(r,e).next(s=>s?(i=s,G.resolve(i)):t.Pi.allocateTargetId(r).next(o=>(i=new Hp(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Pi.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.xs.set(e,r.targetId)),r})}async function xD(n,e,t){let r=Ae(n),i=r.Ms.get(e),s=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Md(o))throw o;oe(wx,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function aL(n,e,t){let r=Ae(n),i=Pe.min(),s=qe();return r.persistence.runTransaction("Execute query","readwrite",o=>(function(c,l,h){let p=Ae(c),m=p.xs.get(h);return m!==void 0?G.resolve(p.Ms.get(m)):p.Pi.getTargetData(l,h)})(r,o,ls(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,a.targetId).next(c=>{s=c})}).next(()=>r.Fs.getDocumentsMatchingQuery(o,e,t?i:Pe.min(),t?s:qe())).next(a=>(LJ(r,QY(e),a),{documents:a,Qs:s})))}function LJ(n,e,t){let r=n.Os.get(e)||Pe.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.Os.set(e,r)}var t0=class{constructor(){this.activeTargetIds=tJ()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var AD=class{constructor(){this.Mo=new t0,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new t0,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var RD=class{Oo(e){}shutdown(){}};var cL="ConnectivityMonitor",n0=class{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){oe(cL,"Network connectivity changed: AVAILABLE");for(let e of this.qo)e(0)}ko(){oe(cL,"Network connectivity changed: UNAVAILABLE");for(let e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Ov=null;function kD(){return Ov===null?Ov=(function(){return 268435456+Math.round(2147483648*Math.random())})():Ov++,"0x"+Ov.toString(16)}var wS="RestConnection",UJ={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},ND=class{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===Hv?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,t,r,i,s){let o=kD(),a=this.zo(e,t.toUriEncodedString());oe(wS,`Sending RPC '${e}' ${o}:`,a,r);let c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,i,s);let{host:l}=new URL(a),h=uv(l);return this.Jo(e,a,c,r,h).then(p=>(oe(wS,`Received RPC '${e}' ${o}: `,p),p),p=>{throw yd(wS,`RPC '${e}' ${o} failed with error: `,p,"url: ",a,"request:",r),p})}Ho(e,t,r,i,s,o){return this.Go(e,t,r,i,s)}jo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Nd})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}zo(e,t){let r=UJ[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}};var PD=class{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}};var jn="WebChannelConnection",MD=class extends ND{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,i,s){let o=kD();return new Promise((a,c)=>{let l=new fS;l.setWithCredentials(!0),l.listenOnce(pS.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case kp.NO_ERROR:let p=l.getResponseJson();oe(jn,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(p)),a(p);break;case kp.TIMEOUT:oe(jn,`RPC '${e}' ${o} timed out`),c(new ie(q.DEADLINE_EXCEEDED,"Request time out"));break;case kp.HTTP_ERROR:let m=l.getStatus();if(oe(jn,`RPC '${e}' ${o} failed with status:`,m,"response text:",l.getResponseText()),m>0){let b=l.getResponseJson();Array.isArray(b)&&(b=b[0]);let k=b?.error;if(k&&k.status&&k.message){let O=(function(z){let Q=z.toLowerCase().replace(/_/g,"-");return Object.values(q).indexOf(Q)>=0?Q:q.UNKNOWN})(k.status);c(new ie(O,k.message))}else c(new ie(q.UNKNOWN,"Server responded with status "+l.getStatus()))}else c(new ie(q.UNAVAILABLE,"Connection failed."));break;default:ve(9055,{l_:e,streamId:o,h_:l.getLastErrorCode(),P_:l.getLastError()})}}finally{oe(jn,`RPC '${e}' ${o} completed.`)}});let h=JSON.stringify(i);oe(jn,`RPC '${e}' ${o} sending request:`,i),l.send(t,"POST",h,r,15)})}T_(e,t,r){let i=kD(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=yS(),a=mS(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(c.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;let h=s.join("");oe(jn,`Creating RPC '${e}' stream ${i}: ${h}`,c);let p=o.createWebChannel(h,c);this.I_(p);let m=!1,b=!1,k=new PD({Yo:N=>{b?oe(jn,`Not sending because RPC '${e}' stream ${i} is closed:`,N):(m||(oe(jn,`Opening RPC '${e}' stream ${i} transport.`),p.open(),m=!0),oe(jn,`RPC '${e}' stream ${i} sending:`,N),p.send(N))},Zo:()=>p.close()}),O=(N,z,Q)=>{N.listen(z,Z=>{try{Q(Z)}catch(Ce){setTimeout(()=>{throw Ce},0)}})};return O(p,cd.EventType.OPEN,()=>{b||(oe(jn,`RPC '${e}' stream ${i} transport opened.`),k.o_())}),O(p,cd.EventType.CLOSE,()=>{b||(b=!0,oe(jn,`RPC '${e}' stream ${i} transport closed`),k.a_(),this.E_(p))}),O(p,cd.EventType.ERROR,N=>{b||(b=!0,yd(jn,`RPC '${e}' stream ${i} transport errored. Name:`,N.name,"Message:",N.message),k.a_(new ie(q.UNAVAILABLE,"The operation could not be completed")))}),O(p,cd.EventType.MESSAGE,N=>{if(!b){let z=N.data[0];ht(!!z,16349);let Q=z,Z=Q?.error||Q[0]?.error;if(Z){oe(jn,`RPC '${e}' stream ${i} received error:`,Z);let Ce=Z.status,Je=(function(v){let I=Kt[v];if(I!==void 0)return pU(I)})(Ce),Ie=Z.message;Je===void 0&&(Je=q.INTERNAL,Ie="Unknown error status: "+Ce+" with message "+Z.message),b=!0,k.a_(new ie(Je,Ie)),p.close()}else oe(jn,`RPC '${e}' stream ${i} received:`,z),k.u_(z)}}),O(a,gS.STAT_EVENT,N=>{N.stat===Nv.PROXY?oe(jn,`RPC '${e}' stream ${i} detected buffering proxy`):N.stat===Nv.NOPROXY&&oe(jn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{k.__()},0),k}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(t=>t===e)}};function IS(){return typeof document<"u"?document:null}function C0(n){return new tD(n,!0)}var r0=class{constructor(e,t,r=1e3,i=1.5,s=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=i,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();let t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,t-r);i>0&&oe("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}};var lL="PersistentStream",i0=class{constructor(e,t,r,i,s,o,a,c){this.Mi=e,this.S_=r,this.b_=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new r0(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===q.RESOURCE_EXHAUSTED?(io(t.toString()),io("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===q.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;let e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===t&&this.G_(r,i)},r=>{e(()=>{let i=new ie(q.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(e,t){let r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.J_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return oe(lL,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget(()=>this.D_===e?t():(oe(lL,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},OD=class extends i0{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();let t=yJ(this.serializer,e),r=(function(s){if(!("targetChange"in s))return Pe.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?Pe.min():o.readTime?us(o.readTime):Pe.min()})(e);return this.listener.H_(t,r)}Y_(e){let t={};t.database=sD(this.serializer),t.addTarget=(function(s,o){let a,c=o.target;if(a=HS(c)?{documents:wJ(s,c)}:{query:IJ(s,c).ft},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=gU(s,o.resumeToken);let l=nD(s,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(Pe.min())>0){a.readTime=Jv(s,o.snapshotVersion.toTimestamp());let l=nD(s,o.expectedCount);l!==null&&(a.expectedCount=l)}return a})(this.serializer,e);let r=CJ(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){let t={};t.database=sD(this.serializer),t.removeTarget=e,this.q_(t)}},FD=class extends i0{constructor(e,t,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return ht(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ht(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ht(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();let t=vJ(e.writeResults,e.commitTime),r=us(e.commitTime);return this.listener.na(r,t)}ra(){let e={};e.database=sD(this.serializer),this.q_(e)}ea(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>_J(this.serializer,r))};this.q_(t)}};var VD=class{},LD=class extends VD{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new ie(q.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Go(e,rD(t,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new ie(q.UNKNOWN,s.toString())})}Ho(e,t,r,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Ho(e,rD(t,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ie(q.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}},UD=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(io(t),this.aa=!1):oe("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}};var yl="RemoteStore",jD=class{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo(o=>{r.enqueueAndForget(async()=>{_l(this)&&(oe(yl,"Restarting streams for network reachability change."),await(async function(c){let l=Ae(c);l.Ea.add(4),await Yp(l),l.Ra.set("Unknown"),l.Ea.delete(4),await E0(l)})(this))})}),this.Ra=new UD(r,i)}};async function E0(n){if(_l(n))for(let e of n.da)await e(!0)}async function Yp(n){for(let e of n.da)await e(!1)}function TU(n,e){let t=Ae(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Ex(t)?Cx(t):Od(t).O_()&&bx(t,e))}function Ix(n,e){let t=Ae(n),r=Od(t);t.Ia.delete(e),r.O_()&&SU(t,e),t.Ia.size===0&&(r.O_()?r.L_():_l(t)&&t.Ra.set("Unknown"))}function bx(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Pe.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Od(n).Y_(e)}function SU(n,e){n.Va.Ue(e),Od(n).Z_(e)}function Cx(n){n.Va=new eD({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),Od(n).start(),n.Ra.ua()}function Ex(n){return _l(n)&&!Od(n).x_()&&n.Ia.size>0}function _l(n){return Ae(n).Ea.size===0}function DU(n){n.Va=void 0}async function jJ(n){n.Ra.set("Online")}async function BJ(n){n.Ia.forEach((e,t)=>{bx(n,e)})}async function $J(n,e){DU(n),Ex(n)?(n.Ra.ha(e),Cx(n)):n.Ra.set("Unknown")}async function zJ(n,e,t){if(n.Ra.set("Online"),e instanceof Qv&&e.state===2&&e.cause)try{await(async function(i,s){let o=s.cause;for(let a of s.targetIds)i.Ia.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.Ia.delete(a),i.Va.removeTarget(a))})(n,e)}catch(r){oe(yl,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await s0(n,r)}else if(e instanceof pd?n.Va.Ze(e):e instanceof Kv?n.Va.st(e):n.Va.tt(e),!t.isEqual(Pe.min()))try{let r=await EU(n.localStore);t.compareTo(r)>=0&&await(function(s,o){let a=s.Va.Tt(o);return a.targetChanges.forEach((c,l)=>{if(c.resumeToken.approximateByteSize()>0){let h=s.Ia.get(l);h&&s.Ia.set(l,h.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,l)=>{let h=s.Ia.get(c);if(!h)return;s.Ia.set(c,h.withResumeToken(Bn.EMPTY_BYTE_STRING,h.snapshotVersion)),SU(s,c);let p=new Hp(h.target,c,l,h.sequenceNumber);bx(s,p)}),s.remoteSyncer.applyRemoteEvent(a)})(n,t)}catch(r){oe(yl,"Failed to raise snapshot:",r),await s0(n,r)}}async function s0(n,e,t){if(!Md(e))throw e;n.Ea.add(1),await Yp(n),n.Ra.set("Offline"),t||(t=()=>EU(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{oe(yl,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await E0(n)})}function xU(n,e){return e().catch(t=>s0(n,t,e))}async function T0(n){let e=Ae(n),t=Aa(e),r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:ux;for(;HJ(e);)try{let i=await FJ(e.localStore,r);if(i===null){e.Ta.length===0&&t.L_();break}r=i.batchId,qJ(e,i)}catch(i){await s0(e,i)}AU(e)&&RU(e)}function HJ(n){return _l(n)&&n.Ta.length<10}function qJ(n,e){n.Ta.push(e);let t=Aa(n);t.O_()&&t.X_&&t.ea(e.mutations)}function AU(n){return _l(n)&&!Aa(n).x_()&&n.Ta.length>0}function RU(n){Aa(n).start()}async function GJ(n){Aa(n).ra()}async function WJ(n){let e=Aa(n);for(let t of n.Ta)e.ea(t.mutations)}async function KJ(n,e,t){let r=n.Ta.shift(),i=YS.from(r,e,t);await xU(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),await T0(n)}async function QJ(n,e){e&&Aa(n).X_&&await(async function(r,i){if((function(o){return cJ(o)&&o!==q.ABORTED})(i.code)){let s=r.Ta.shift();Aa(r).B_(),await xU(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await T0(r)}})(n,e),AU(n)&&RU(n)}async function uL(n,e){let t=Ae(n);t.asyncQueue.verifyOperationInProgress(),oe(yl,"RemoteStore received new credentials");let r=_l(t);t.Ea.add(3),await Yp(t),r&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await E0(t)}async function YJ(n,e){let t=Ae(n);e?(t.Ea.delete(2),await E0(t)):e||(t.Ea.add(2),await Yp(t),t.Ra.set("Unknown"))}function Od(n){return n.ma||(n.ma=(function(t,r,i){let s=Ae(t);return s.sa(),new OD(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(n.datastore,n.asyncQueue,{Xo:jJ.bind(null,n),t_:BJ.bind(null,n),r_:$J.bind(null,n),H_:zJ.bind(null,n)}),n.da.push(async e=>{e?(n.ma.B_(),Ex(n)?Cx(n):n.Ra.set("Unknown")):(await n.ma.stop(),DU(n))})),n.ma}function Aa(n){return n.fa||(n.fa=(function(t,r,i){let s=Ae(t);return s.sa(),new FD(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:GJ.bind(null,n),r_:QJ.bind(null,n),ta:WJ.bind(null,n),na:KJ.bind(null,n)}),n.da.push(async e=>{e?(n.fa.B_(),await T0(n)):(await n.fa.stop(),n.Ta.length>0&&(oe(yl,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))})),n.fa}var BD=class n{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new to,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){let o=Date.now()+r,a=new n(e,t,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ie(q.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Tx(n,e){if(io("AsyncQueue",`${e}: ${n}`),Md(n))return new ie(q.UNAVAILABLE,`${e}: ${n}`);throw n}var o0=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||fe.comparator(t.key,r.key):(t,r)=>fe.comparator(t.key,r.key),this.keyedMap=Np(),this.sortedSet=new Vt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var a0=class{constructor(){this.ga=new Vt(fe.comparator)}track(e){let t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):ve(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){let e=[];return this.ga.inorderTraversal((t,r)=>{e.push(r)}),e}},xd=class n{constructor(e,t,r,i,s,o,a,c,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,s){let o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new n(e,t,o0.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&I0(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var $D=class{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}},zD=class{constructor(){this.queries=dL(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){let i=Ae(t),s=i.queries;i.queries=dL(),s.forEach((o,a)=>{for(let c of a.Sa)c.onError(r)})})(this,new ie(q.ABORTED,"Firestore shutting down"))}};function dL(){return new ao(n=>nU(n),I0)}async function JJ(n,e){let t=Ae(n),r=3,i=e.query,s=t.queries.get(i);s?!s.ba()&&e.Da()&&(r=2):(s=new $D,r=e.Da()?0:1);try{switch(r){case 0:s.wa=await t.onListen(i,!0);break;case 1:s.wa=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(o){let a=Tx(o,`Initialization of query '${ud(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,s),s.Sa.push(e),e.va(t.onlineState),s.wa&&e.Fa(s.wa)&&Sx(t)}async function XJ(n,e){let t=Ae(n),r=e.query,i=3,s=t.queries.get(r);if(s){let o=s.Sa.indexOf(e);o>=0&&(s.Sa.splice(o,1),s.Sa.length===0?i=e.Da()?0:1:!s.ba()&&e.Da()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function ZJ(n,e){let t=Ae(n),r=!1;for(let i of e){let s=i.query,o=t.queries.get(s);if(o){for(let a of o.Sa)a.Fa(i)&&(r=!0);o.wa=i}}r&&Sx(t)}function eX(n,e,t){let r=Ae(n),i=r.queries.get(e);if(i)for(let s of i.Sa)s.onError(t);r.queries.delete(e)}function Sx(n){n.Ca.forEach(e=>{e.next()})}var HD,hL;(hL=HD||(HD={})).Ma="default",hL.Cache="cache";var qD=class{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new xd(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;let r=t!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;let t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=xd.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==HD.Cache}};var c0=class{constructor(e){this.key=e}},l0=class{constructor(e){this.key=e}},GD=class{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=qe(),this.mutatedKeys=qe(),this.eu=rU(e),this.tu=new o0(this.eu)}get nu(){return this.Ya}ru(e,t){let r=t?t.iu:new a0,i=t?t.tu:this.tu,s=t?t.mutatedKeys:this.mutatedKeys,o=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let m=i.get(h),b=b0(this.query,p)?p:null,k=!!m&&this.mutatedKeys.has(m.key),O=!!b&&(b.hasLocalMutations||this.mutatedKeys.has(b.key)&&b.hasCommittedMutations),N=!1;m&&b?m.data.isEqual(b.data)?k!==O&&(r.track({type:3,doc:b}),N=!0):this.su(m,b)||(r.track({type:2,doc:b}),N=!0,(c&&this.eu(b,c)>0||l&&this.eu(b,l)<0)&&(a=!0)):!m&&b?(r.track({type:0,doc:b}),N=!0):m&&!b&&(r.track({type:1,doc:m}),N=!0,(c||l)&&(a=!0)),N&&(b?(o=o.add(b),s=O?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{tu:o,iu:r,Cs:a,mutatedKeys:s}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;let o=e.iu.ya();o.sort((h,p)=>(function(b,k){let O=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ve(20277,{Rt:N})}};return O(b)-O(k)})(h.type,p.type)||this.eu(h.doc,p.doc)),this.ou(r),i=i??!1;let a=t&&!i?this._u():[],c=this.Xa.size===0&&this.current&&!i?1:0,l=c!==this.Za;return this.Za=c,o.length!==0||l?{snapshot:new xd(this.query,e.tu,s,o,e.mutatedKeys,c===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new a0,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(t=>this.Ya=this.Ya.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ya=this.Ya.delete(t)),this.current=e.current)}_u(){if(!this.current)return[];let e=this.Xa;this.Xa=qe(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});let t=[];return e.forEach(r=>{this.Xa.has(r)||t.push(new l0(r))}),this.Xa.forEach(r=>{e.has(r)||t.push(new c0(r))}),t}cu(e){this.Ya=e.Qs,this.Xa=qe();let t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return xd.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}},Dx="SyncEngine",WD=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},KD=class{constructor(e){this.key=e,this.hu=!1}},QD=class{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new ao(a=>nU(a),I0),this.Iu=new Map,this.Eu=new Set,this.du=new Vt(fe.comparator),this.Au=new Map,this.Ru=new Gp,this.Vu={},this.mu=new Map,this.fu=qp.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}};async function tX(n,e,t=!0){let r=FU(n),i,s=r.Tu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=await kU(r,e,t,!0),i}async function nX(n,e){let t=FU(n);await kU(t,e,!0,!1)}async function kU(n,e,t,r){let i=await VJ(n.localStore,ls(e)),s=i.targetId,o=n.sharedClientState.addLocalQueryTarget(s,t),a;return r&&(a=await rX(n,e,s,o==="current",i.resumeToken)),n.isPrimaryClient&&t&&TU(n.remoteStore,i),a}async function rX(n,e,t,r,i){n.pu=(p,m,b)=>(async function(O,N,z,Q){let Z=N.view.ru(z);Z.Cs&&(Z=await aL(O.localStore,N.query,!1).then(({documents:T})=>N.view.ru(T,Z)));let Ce=Q&&Q.targetChanges.get(N.targetId),Je=Q&&Q.targetMismatches.get(N.targetId)!=null,Ie=N.view.applyChanges(Z,O.isPrimaryClient,Ce,Je);return pL(O,N.targetId,Ie.au),Ie.snapshot})(n,p,m,b);let s=await aL(n.localStore,e,!0),o=new GD(e,s.Qs),a=o.ru(s.documents),c=zp.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),l=o.applyChanges(a,n.isPrimaryClient,c);pL(n,t,l.au);let h=new WD(e,t,o);return n.Tu.set(e,h),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),l.snapshot}async function iX(n,e,t){let r=Ae(n),i=r.Tu.get(e),s=r.Iu.get(i.targetId);if(s.length>1)return r.Iu.set(i.targetId,s.filter(o=>!I0(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await xD(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&Ix(r.remoteStore,i.targetId),YD(r,i.targetId)}).catch(Pd)):(YD(r,i.targetId),await xD(r.localStore,i.targetId,!0))}async function sX(n,e){let t=Ae(n),r=t.Tu.get(e),i=t.Iu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Ix(t.remoteStore,r.targetId))}async function oX(n,e,t){let r=fX(n);try{let i=await(function(o,a){let c=Ae(o),l=Xt.now(),h=a.reduce((b,k)=>b.add(k.key),qe()),p,m;return c.persistence.runTransaction("Locally write mutations","readwrite",b=>{let k=co(),O=qe();return c.Ns.getEntries(b,h).next(N=>{k=N,k.forEach((z,Q)=>{Q.isValidDocument()||(O=O.add(z))})}).next(()=>c.localDocuments.getOverlayedDocuments(b,k)).next(N=>{p=N;let z=[];for(let Q of a){let Z=aJ(Q,p.get(Q.key).overlayedDocument);Z!=null&&z.push(new hs(Q.key,Z,QL(Z.value.mapValue),ro.exists(!0)))}return c.mutationQueue.addMutationBatch(b,l,z,a)}).next(N=>{m=N;let z=N.applyToLocalDocumentSet(p,O);return c.documentOverlayCache.saveOverlays(b,N.batchId,z)})}).then(()=>({batchId:m.batchId,changes:sU(p)}))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(o,a,c){let l=o.Vu[o.currentUser.toKey()];l||(l=new Vt(He)),l=l.insert(a,c),o.Vu[o.currentUser.toKey()]=l})(r,i.batchId,t),await Jp(r,i.changes),await T0(r.remoteStore)}catch(i){let s=Tx(i,"Failed to persist write");t.reject(s)}}async function NU(n,e){let t=Ae(n);try{let r=await MJ(t.localStore,e);e.targetChanges.forEach((i,s)=>{let o=t.Au.get(s);o&&(ht(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.hu=!0:i.modifiedDocuments.size>0?ht(o.hu,14607):i.removedDocuments.size>0&&(ht(o.hu,42227),o.hu=!1))}),await Jp(t,r,e)}catch(r){await Pd(r)}}function fL(n,e,t){let r=Ae(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Tu.forEach((s,o)=>{let a=o.view.va(e);a.snapshot&&i.push(a.snapshot)}),(function(o,a){let c=Ae(o);c.onlineState=a;let l=!1;c.queries.forEach((h,p)=>{for(let m of p.Sa)m.va(a)&&(l=!0)}),l&&Sx(c)})(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function aX(n,e,t){let r=Ae(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Au.get(e),s=i&&i.key;if(s){let o=new Vt(fe.comparator);o=o.insert(s,Di.newNoDocument(s,Pe.min()));let a=qe().add(s),c=new Wv(Pe.min(),new Map,new Vt(He),o,a);await NU(r,c),r.du=r.du.remove(s),r.Au.delete(e),xx(r)}else await xD(r.localStore,e,!1).then(()=>YD(r,e,t)).catch(Pd)}async function cX(n,e){let t=Ae(n),r=e.batch.batchId;try{let i=await PJ(t.localStore,e);MU(t,r,null),PU(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await Jp(t,i)}catch(i){await Pd(i)}}async function lX(n,e,t){let r=Ae(n);try{let i=await(function(o,a){let c=Ae(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return c.mutationQueue.lookupMutationBatch(l,a).next(p=>(ht(p!==null,37113),h=p.keys(),c.mutationQueue.removeMutationBatch(l,p))).next(()=>c.mutationQueue.performConsistencyCheck(l)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>c.localDocuments.getDocuments(l,h))})})(r.localStore,e);MU(r,e,t),PU(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await Jp(r,i)}catch(i){await Pd(i)}}function PU(n,e){(n.mu.get(e)||[]).forEach(t=>{t.resolve()}),n.mu.delete(e)}function MU(n,e,t){let r=Ae(n),i=r.Vu[r.currentUser.toKey()];if(i){let s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function YD(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach(r=>{n.Ru.containsKey(r)||OU(n,r)})}function OU(n,e){n.Eu.delete(e.path.canonicalString());let t=n.du.get(e);t!==null&&(Ix(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),xx(n))}function pL(n,e,t){for(let r of t)r instanceof c0?(n.Ru.addReference(r.key,e),uX(n,r)):r instanceof l0?(oe(Dx,"Document no longer in limbo: "+r.key),n.Ru.removeReference(r.key,e),n.Ru.containsKey(r.key)||OU(n,r.key)):ve(19791,{wu:r})}function uX(n,e){let t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Eu.has(r)||(oe(Dx,"New document in limbo: "+t),n.Eu.add(r),xx(n))}function xx(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){let e=n.Eu.values().next().value;n.Eu.delete(e);let t=new fe(Dt.fromString(e)),r=n.fu.next();n.Au.set(r,new KD(t)),n.du=n.du.insert(t,r),TU(n.remoteStore,new Hp(ls(yx(t.path)),r,"TargetPurposeLimboResolution",lx.ce))}}async function Jp(n,e,t){let r=Ae(n),i=[],s=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((a,c)=>{o.push(r.pu(c,e,t).then(l=>{if((l||t)&&r.isPrimaryClient){let h=l?!l.fromCache:t?.targetChanges.get(c.targetId)?.current;r.sharedClientState.updateQueryState(c.targetId,h?"current":"not-current")}if(l){i.push(l);let h=ED.As(c.targetId,l);s.push(h)}}))}),await Promise.all(o),r.Pu.H_(i),await(async function(c,l){let h=Ae(c);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>G.forEach(l,m=>G.forEach(m.Es,b=>h.persistence.referenceDelegate.addReference(p,m.targetId,b)).next(()=>G.forEach(m.ds,b=>h.persistence.referenceDelegate.removeReference(p,m.targetId,b)))))}catch(p){if(!Md(p))throw p;oe(wx,"Failed to update sequence numbers: "+p)}for(let p of l){let m=p.targetId;if(!p.fromCache){let b=h.Ms.get(m),k=b.snapshotVersion,O=b.withLastLimboFreeSnapshotVersion(k);h.Ms=h.Ms.insert(m,O)}}})(r.localStore,s))}async function dX(n,e){let t=Ae(n);if(!t.currentUser.isEqual(e)){oe(Dx,"User change. New user:",e.toKey());let r=await CU(t.localStore,e);t.currentUser=e,(function(s,o){s.mu.forEach(a=>{a.forEach(c=>{c.reject(new ie(q.CANCELLED,o))})}),s.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Jp(t,r.Ls)}}function hX(n,e){let t=Ae(n),r=t.Au.get(e);if(r&&r.hu)return qe().add(r.key);{let i=qe(),s=t.Iu.get(e);if(!s)return i;for(let o of s){let a=t.Tu.get(o);i=i.unionWith(a.view.nu)}return i}}function FU(n){let e=Ae(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=NU.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=hX.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=aX.bind(null,e),e.Pu.H_=ZJ.bind(null,e.eventManager),e.Pu.yu=eX.bind(null,e.eventManager),e}function fX(n){let e=Ae(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=cX.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=lX.bind(null,e),e}var VU=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=C0(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,r){return null}Mu(t,r){return null}vu(t){return NJ(this.persistence,new SD,t.initialUser,this.serializer)}Cu(t){return new Zv(CD.mi,this.serializer)}Du(t){return new AD}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}return n.provider={build:()=>new n},n})(),JD=class extends VU{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){ht(this.persistence.referenceDelegate instanceof e0,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new uD(r,e.asyncQueue,t)}Cu(e){let t=this.cacheSizeBytes!==void 0?Gr.withCacheSize(this.cacheSizeBytes):Gr.DEFAULT;return new Zv(r=>e0.mi(r,t),this.serializer)}};var pX=(()=>{class n{async initialize(t,r){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>fL(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=dX.bind(null,this.syncEngine),await YJ(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new zD})()}createDatastore(t){let r=C0(t.databaseInfo.databaseId),i=(function(o){return new MD(o)})(t.databaseInfo);return(function(o,a,c,l){return new LD(o,a,c,l)})(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return(function(i,s,o,a,c){return new jD(i,s,o,a,c)})(this.localStore,this.datastore,t.asyncQueue,r=>fL(this.syncEngine,r,0),(function(){return n0.v()?new n0:new RD})())}createSyncEngine(t,r){return(function(s,o,a,c,l,h,p){let m=new QD(s,o,a,c,l,h);return p&&(m.gu=!0),m})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}async terminate(){await(async function(r){let i=Ae(r);oe(yl,"RemoteStore shutting down."),i.Ea.add(5),await Yp(i),i.Aa.shutdown(),i.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}return n.provider={build:()=>new n},n})();var XD=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):io("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var Ra="FirestoreClient",ZD=class{constructor(e,t,r,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Cn.UNAUTHENTICATED,this.clientId=Vp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{oe(Ra,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(oe(Ra,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new to;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=Tx(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}};async function bS(n,e){n.asyncQueue.verifyOperationInProgress(),oe(Ra,"Initializing OfflineComponentProvider");let t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async i=>{r.isEqual(i)||(await CU(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function gL(n,e){n.asyncQueue.verifyOperationInProgress();let t=await gX(n);oe(Ra,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>uL(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>uL(e.remoteStore,i)),n._onlineComponents=e}async function gX(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){oe(Ra,"Using user provided OfflineComponentProvider");try{await bS(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===q.FAILED_PRECONDITION||i.code===q.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;yd("Error using user provided cache. Falling back to memory cache: "+t),await bS(n,new VU)}}else oe(Ra,"Using default OfflineComponentProvider"),await bS(n,new JD(void 0));return n._offlineComponents}async function LU(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(oe(Ra,"Using user provided OnlineComponentProvider"),await gL(n,n._uninitializedComponentsProvider._online)):(oe(Ra,"Using default OnlineComponentProvider"),await gL(n,new pX))),n._onlineComponents}function mX(n){return LU(n).then(e=>e.syncEngine)}async function mL(n){let e=await LU(n),t=e.eventManager;return t.onListen=tX.bind(null,e.syncEngine),t.onUnlisten=iX.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=nX.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=sX.bind(null,e.syncEngine),t}function UU(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var yL=new Map;var jU="firestore.googleapis.com",_L=!0,u0=class{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ie(q.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=jU,this.ssl=_L}else this.host=e.host,this.ssl=e.ssl??_L;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=bU;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<AJ)throw new ie(q.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}TY("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=UU(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new ie(q.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new ie(q.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new ie(q.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Ad=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new u0({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ie(q.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ie(q.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new u0(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new CS;switch(r.type){case"firstParty":return new DS(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ie(q.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){let r=yL.get(t);r&&(oe("ComponentProvider","Removing Datastore"),yL.delete(t),r.terminate())})(this),Promise.resolve()}};function yX(n,e,t,r={}){n=no(n,Ad);let i=uv(e),s=n._getSettings(),o=ae(B({},s),{emulatorOptions:n._getEmulatorOptions()}),a=`${e}:${t}`;i&&(CF(`https://${a}`),TF("Firestore",!0)),s.host!==jU&&s.host!==a&&yd("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let c=ae(B({},s),{host:a,ssl:i,emulatorOptions:r});if(!sd(c,o)&&(n._setSettings(c),r.mockUserToken)){let l,h;if(typeof r.mockUserToken=="string")l=r.mockUserToken,h=Cn.MOCK_USER;else{l=EF(r.mockUserToken,n._app?.options.projectId);let p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new ie(q.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new Cn(p)}n._authCredentials=new ES(new Uv(l,h))}}var Rd=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Tn=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ea(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}toJSON(){return{type:n._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(Qp(t,n._jsonSchema))return new n(e,r||null,new fe(Dt.fromString(t.referencePath)))}};Tn._jsonSchemaVersion="firestore/documentReference/1.0",Tn._jsonSchema={type:Jt("string",Tn._jsonSchemaVersion),referencePath:Jt("string")};var Ea=class n extends Rd{constructor(e,t,r){super(e,t,yx(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Tn(this.firestore,null,new fe(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function Xp(n,e,...t){if(n=Si(n),TL("collection","path",e),n instanceof Ad){let r=Dt.fromString(e,...t);return FV(r),new Ea(n,null,r)}{if(!(n instanceof Tn||n instanceof Ea))throw new ie(q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Dt.fromString(e,...t));return FV(r),new Ea(n.firestore,null,r)}}function Jn(n,e,...t){if(n=Si(n),arguments.length===1&&(e=Vp.newId()),TL("doc","path",e),n instanceof Ad){let r=Dt.fromString(e,...t);return OV(r),new Tn(n,null,new fe(r))}{if(!(n instanceof Tn||n instanceof Ea))throw new ie(q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Dt.fromString(e,...t));return OV(r),new Tn(n.firestore,n instanceof Ea?n.converter:null,new fe(r))}}var vL="AsyncQueue",d0=class{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new r0(this,"async_queue_retry"),this._c=()=>{let r=IS();r&&oe(vL,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;let t=IS();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;let t=IS();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});let t=new to;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Md(e))throw e;oe(vL,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){let t=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,io("INTERNAL UNHANDLED ERROR: ",wL(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);let i=BD.createAndSchedule(this,e,t,r,s=>this.hc(s));return this.tc.push(i),i}uc(){this.nc&&ve(47125,{Pc:wL(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(let t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){let t=this.tc.indexOf(e);this.tc.splice(t,1)}};function wL(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}function IL(n){return(function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let s of r)if(s in i&&typeof i[s]=="function")return!0;return!1})(n,["next","error","complete"])}var ka=class extends Ad{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new d0,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new d0(e),this._firestoreClient=void 0,await e}}};function S0(n,e){let t=typeof n=="object"?n:VF(),r=typeof n=="string"?n:e||Hv,i=MF(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let s=bF("firestore");s&&yX(i,...s)}return i}function BU(n){if(n._terminated)throw new ie(q.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||_X(n),n._firestoreClient}function _X(n){let e=n._freezeSettings(),t=(function(i,s,o,a){return new NS(i,s,o,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,UU(a.experimentalLongPollingOptions),a.useFetchStreams,a.isUsingEmulator)})(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new ZD(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(i){let s=i?._online.build();return{_offline:i?._offline.build(s),_online:s}})(n._componentsProvider))}var Ta=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(Bn.fromBase64String(e))}catch(t){throw new ie(q.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(Bn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Qp(e,n._jsonSchema))return n.fromBase64String(e.bytes)}};Ta._jsonSchemaVersion="firestore/bytes/1.0",Ta._jsonSchema={type:Jt("string",Ta._jsonSchemaVersion),bytes:Jt("string")};var kd=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ie(q.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new xr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Wp=class{constructor(e){this._methodName=e}};var Sa=class n{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ie(q.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ie(q.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return He(this._lat,e._lat)||He(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:n._jsonSchemaVersion}}static fromJSON(e){if(Qp(e,n._jsonSchema))return new n(e.latitude,e.longitude)}};Sa._jsonSchemaVersion="firestore/geoPoint/1.0",Sa._jsonSchema={type:Jt("string",Sa._jsonSchemaVersion),latitude:Jt("number"),longitude:Jt("number")};var Da=class n{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0})(this._values,e._values)}toJSON(){return{type:n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Qp(e,n._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new n(e.vectorValues);throw new ie(q.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};Da._jsonSchemaVersion="firestore/vectorValue/1.0",Da._jsonSchema={type:Jt("string",Da._jsonSchemaVersion),vectorValues:Jt("object")};var vX=/^__.*__$/,ex=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new hs(e,this.data,this.fieldMask,t,this.fieldTransforms):new ml(e,this.data,t,this.fieldTransforms)}},h0=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new hs(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function $U(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ve(40011,{Ac:n})}}var tx=class n{constructor(e,t,r,i,s,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new n(B(B({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){let t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.gc(e),r}yc(e){let t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return p0(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if($U(this.Ac)&&vX.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}},nx=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||C0(e)}Cc(e,t,r,i=!1){return new tx({Ac:e,methodName:t,Dc:r,path:xr.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function Ax(n){let e=n._freezeSettings(),t=C0(n._databaseId);return new nx(n._databaseId,!!e.ignoreUndefinedProperties,t)}function wX(n,e,t,r,i,s={}){let o=n.Cc(s.merge||s.mergeFields?2:0,e,t,i);Rx("Data must be an object, but it was:",o,r);let a=zU(r,o),c,l;if(s.merge)c=new Wr(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){let h=[];for(let p of s.mergeFields){let m=rx(e,p,t);if(!o.contains(m))throw new ie(q.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);qU(h,m)||h.push(m)}c=new Wr(h),l=o.fieldTransforms.filter(p=>c.covers(p.field))}else c=null,l=o.fieldTransforms;return new ex(new Dr(a),c,l)}var f0=class n extends Wp{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function IX(n,e,t,r){let i=n.Cc(1,e,t);Rx("Data must be an object, but it was:",i,r);let s=[],o=Dr.empty();Na(r,(c,l)=>{let h=kx(e,c,t);l=Si(l);let p=i.yc(h);if(l instanceof f0)s.push(h);else{let m=Zp(l,p);m!=null&&(s.push(h),o.set(h,m))}});let a=new Wr(s);return new h0(o,a,i.fieldTransforms)}function bX(n,e,t,r,i,s){let o=n.Cc(1,e,t),a=[rx(e,r,t)],c=[i];if(s.length%2!=0)throw new ie(q.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<s.length;m+=2)a.push(rx(e,s[m])),c.push(s[m+1]);let l=[],h=Dr.empty();for(let m=a.length-1;m>=0;--m)if(!qU(l,a[m])){let b=a[m],k=c[m];k=Si(k);let O=o.yc(b);if(k instanceof f0)l.push(b);else{let N=Zp(k,O);N!=null&&(l.push(b),h.set(b,N))}}let p=new Wr(l);return new h0(h,p,o.fieldTransforms)}function CX(n,e,t,r=!1){return Zp(t,n.Cc(r?4:3,e))}function Zp(n,e){if(HU(n=Si(n)))return Rx("Unsupported field value:",e,n),zU(n,e);if(n instanceof Wp)return(function(r,i){if(!$U(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);let s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,i){let s=[],o=0;for(let a of r){let c=Zp(a,i.wc(o));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}})(n,e)}return(function(r,i){if((r=Si(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return nJ(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let s=Xt.fromDate(r);return{timestampValue:Jv(i.serializer,s)}}if(r instanceof Xt){let s=new Xt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Jv(i.serializer,s)}}if(r instanceof Sa)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ta)return{bytesValue:gU(i.serializer,r._byteString)};if(r instanceof Tn){let s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:vx(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Da)return(function(o,a){return{mapValue:{fields:{[hx]:{stringValue:fx},[vd]:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.Sc("VectorValues must only contain numeric values.");return _x(a.serializer,l)})}}}}}})(r,i);throw i.Sc(`Unsupported field value: ${_0(r)}`)})(n,e)}function zU(n,e){let t={};return BL(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Na(n,(r,i)=>{let s=Zp(i,e.mc(r));s!=null&&(t[r]=s)}),{mapValue:{fields:t}}}function HU(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Xt||n instanceof Sa||n instanceof Ta||n instanceof Tn||n instanceof Wp||n instanceof Da)}function Rx(n,e,t){if(!HU(t)||!SL(t)){let r=_0(t);throw r==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+r)}}function rx(n,e,t){if((e=Si(e))instanceof kd)return e._internalPath;if(typeof e=="string")return kx(n,e);throw p0("Field path arguments must be of type string or ",n,!1,void 0,t)}var EX=new RegExp("[~\\*/\\[\\]]");function kx(n,e,t){if(e.search(EX)>=0)throw p0(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new kd(...e.split("."))._internalPath}catch{throw p0(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function p0(n,e,t,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new ie(q.INVALID_ARGUMENT,a+n+c)}function qU(n,e){return n.some(t=>t.isEqual(e))}var g0=class{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Tn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new ix(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(Nx("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},ix=class extends g0{data(){return super.data()}};function Nx(n,e){return typeof e=="string"?kx(n,e):e instanceof kd?e._internalPath:e._delegate._internalPath}function TX(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ie(q.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Kp=class{},sx=class extends Kp{};function eg(n,e,...t){let r=[];e instanceof Kp&&r.push(e),r=r.concat(t),(function(s){let o=s.filter(c=>c instanceof ox).length,a=s.filter(c=>c instanceof m0).length;if(o>1||o>0&&a>0)throw new ie(q.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(let i of r)n=i._apply(n);return n}var m0=class n extends sx{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return GU(e._query,t),new Rd(e.firestore,e.converter,qS(e._query,t))}_parse(e){let t=Ax(e.firestore);return(function(s,o,a,c,l,h,p){let m;if(l.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new ie(q.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){CL(p,h);let k=[];for(let O of p)k.push(bL(c,s,O));m={arrayValue:{values:k}}}else m=bL(c,s,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||CL(p,h),m=CX(a,o,p,h==="in"||h==="not-in");return Yt.create(l,h,m)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function tg(n,e,t){let r=e,i=Nx("where",n);return m0._create(i,r,t)}var ox=class n extends Kp{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:xi.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:((function(i,s){let o=i,a=s.getFlattenedFilters();for(let c of a)GU(o,c),o=qS(o,c)})(e._query,t),new Rd(e.firestore,e.converter,qS(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};function bL(n,e,t){if(typeof(t=Si(t))=="string"){if(t==="")throw new ie(q.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!tU(e)&&t.indexOf("/")!==-1)throw new ie(q.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(Dt.fromString(t));if(!fe.isDocumentKey(r))throw new ie(q.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return zV(n,new fe(r))}if(t instanceof Tn)return zV(n,t._key);throw new ie(q.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${_0(t)}.`)}function CL(n,e){if(!Array.isArray(n)||n.length===0)throw new ie(q.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function GU(n,e){let t=(function(i,s){for(let o of i)for(let a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null})(n.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new ie(q.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ie(q.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var ax=class{convertValue(e,t="none"){switch(xa(e)){case 0:return null;case 1:return e.booleanValue;case 2:return St(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(oo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ve(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return Na(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertVectorValue(e){let t=e.fields?.[vd].arrayValue?.values?.map(r=>St(r.doubleValue));return new Da(t)}convertGeoPoint(e){return new Sa(St(e.latitude),St(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=w0(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(jp(e));default:return null}}convertTimestamp(e){let t=so(e);return new Xt(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=Dt.fromString(e);ht(IU(r),9688,{name:e});let i=new qv(r.get(1),r.get(3)),s=new fe(r.popFirst(5));return i.isEqual(t)||io(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}};function SX(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var ll=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},ul=class n extends g0{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new gd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(Nx("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ie(q.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,t={};return t.type=n._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};ul._jsonSchemaVersion="firestore/documentSnapshot/1.0",ul._jsonSchema={type:Jt("string",ul._jsonSchemaVersion),bundleSource:Jt("string","DocumentSnapshot"),bundleName:Jt("string"),bundle:Jt("string")};var gd=class extends ul{data(e={}){return super.data(e)}},md=class n{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new ll(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new gd(this._firestore,this._userDataWriter,r.key,r,new ll(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ie(q.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{let c=new gd(i._firestore,i._userDataWriter,a.doc.key,a.doc,new ll(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{let c=new gd(i._firestore,i._userDataWriter,a.doc.key,a.doc,new ll(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,h=-1;return a.type!==0&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:DX(a.type),doc:c,oldIndex:l,newIndex:h}})}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ie(q.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=n._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Vp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let t=[],r=[],i=[];return this.docs.forEach(s=>{s._document!==null&&(t.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function DX(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ve(61501,{type:n})}}md._jsonSchemaVersion="firestore/querySnapshot/1.0",md._jsonSchema={type:Jt("string",md._jsonSchemaVersion),bundleSource:Jt("string","QuerySnapshot"),bundleName:Jt("string"),bundle:Jt("string")};var y0=class extends ax{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ta(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Tn(this.firestore,null,t)}};function vl(n,e,t){n=no(n,Tn);let r=no(n.firestore,ka),i=SX(n.converter,e,t);return Px(r,[wX(Ax(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,ro.none())])}function Fd(n,e,t,...r){n=no(n,Tn);let i=no(n.firestore,ka),s=Ax(i),o;return o=typeof(e=Si(e))=="string"||e instanceof kd?bX(s,"updateDoc",n._key,e,t,r):IX(s,"updateDoc",n._key,e),Px(i,[o.toMutation(n._key,ro.exists(!0))])}function Vd(n){return Px(no(n.firestore,ka),[new $p(n._key,ro.none())])}function ng(n,...e){n=Si(n);let t={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||IL(e[r])||(t=e[r++]);let i={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(IL(e[r])){let c=e[r];e[r]=c.next?.bind(c),e[r+1]=c.error?.bind(c),e[r+2]=c.complete?.bind(c)}let s,o,a;if(n instanceof Tn)o=no(n.firestore,ka),a=yx(n._key.path),s={next:c=>{e[r]&&e[r](xX(o,n,c))},error:e[r+1],complete:e[r+2]};else{let c=no(n,Rd);o=no(c.firestore,ka),a=c._query;let l=new y0(o);s={next:h=>{e[r]&&e[r](new md(o,l,c,h))},error:e[r+1],complete:e[r+2]},TX(n._query)}return(function(l,h,p,m){let b=new XD(m),k=new qD(h,b,p);return l.asyncQueue.enqueueAndForget(async()=>JJ(await mL(l),k)),()=>{b.Nu(),l.asyncQueue.enqueueAndForget(async()=>XJ(await mL(l),k))}})(BU(o),a,i,s)}function Px(n,e){return(function(r,i){let s=new to;return r.asyncQueue.enqueueAndForget(async()=>oX(await mX(r),i,s)),s.promise})(BU(n),e)}function xX(n,e,t){let r=t.docs.get(e._key),i=new y0(n);return new ul(n,i,e._key,r,new ll(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(i){Nd=i})(FF),wp(new Qs("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),a=new ka(new TS(r.getProvider("auth-internal")),new xS(o,r.getProvider("app-check-internal")),(function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new ie(q.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new qv(l.options.projectId,h)})(o,i),o);return s=B({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),va(NV,PV,e),va(NV,PV,"esm2020")})();var WU=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},KU={};var lo,Mx;(function(){var n;function e(T,v){function I(){}I.prototype=v.prototype,T.D=v.prototype,T.prototype=new I,T.prototype.constructor=T,T.C=function(E,C,x){for(var w=Array(arguments.length-2),Et=2;Et<arguments.length;Et++)w[Et-2]=arguments[Et];return v.prototype[C].apply(E,w)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(T,v,I){I||(I=0);var E=Array(16);if(typeof v=="string")for(var C=0;16>C;++C)E[C]=v.charCodeAt(I++)|v.charCodeAt(I++)<<8|v.charCodeAt(I++)<<16|v.charCodeAt(I++)<<24;else for(C=0;16>C;++C)E[C]=v[I++]|v[I++]<<8|v[I++]<<16|v[I++]<<24;v=T.g[0],I=T.g[1],C=T.g[2];var x=T.g[3],w=v+(x^I&(C^x))+E[0]+3614090360&4294967295;v=I+(w<<7&4294967295|w>>>25),w=x+(C^v&(I^C))+E[1]+3905402710&4294967295,x=v+(w<<12&4294967295|w>>>20),w=C+(I^x&(v^I))+E[2]+606105819&4294967295,C=x+(w<<17&4294967295|w>>>15),w=I+(v^C&(x^v))+E[3]+3250441966&4294967295,I=C+(w<<22&4294967295|w>>>10),w=v+(x^I&(C^x))+E[4]+4118548399&4294967295,v=I+(w<<7&4294967295|w>>>25),w=x+(C^v&(I^C))+E[5]+1200080426&4294967295,x=v+(w<<12&4294967295|w>>>20),w=C+(I^x&(v^I))+E[6]+2821735955&4294967295,C=x+(w<<17&4294967295|w>>>15),w=I+(v^C&(x^v))+E[7]+4249261313&4294967295,I=C+(w<<22&4294967295|w>>>10),w=v+(x^I&(C^x))+E[8]+1770035416&4294967295,v=I+(w<<7&4294967295|w>>>25),w=x+(C^v&(I^C))+E[9]+2336552879&4294967295,x=v+(w<<12&4294967295|w>>>20),w=C+(I^x&(v^I))+E[10]+4294925233&4294967295,C=x+(w<<17&4294967295|w>>>15),w=I+(v^C&(x^v))+E[11]+2304563134&4294967295,I=C+(w<<22&4294967295|w>>>10),w=v+(x^I&(C^x))+E[12]+1804603682&4294967295,v=I+(w<<7&4294967295|w>>>25),w=x+(C^v&(I^C))+E[13]+4254626195&4294967295,x=v+(w<<12&4294967295|w>>>20),w=C+(I^x&(v^I))+E[14]+2792965006&4294967295,C=x+(w<<17&4294967295|w>>>15),w=I+(v^C&(x^v))+E[15]+1236535329&4294967295,I=C+(w<<22&4294967295|w>>>10),w=v+(C^x&(I^C))+E[1]+4129170786&4294967295,v=I+(w<<5&4294967295|w>>>27),w=x+(I^C&(v^I))+E[6]+3225465664&4294967295,x=v+(w<<9&4294967295|w>>>23),w=C+(v^I&(x^v))+E[11]+643717713&4294967295,C=x+(w<<14&4294967295|w>>>18),w=I+(x^v&(C^x))+E[0]+3921069994&4294967295,I=C+(w<<20&4294967295|w>>>12),w=v+(C^x&(I^C))+E[5]+3593408605&4294967295,v=I+(w<<5&4294967295|w>>>27),w=x+(I^C&(v^I))+E[10]+38016083&4294967295,x=v+(w<<9&4294967295|w>>>23),w=C+(v^I&(x^v))+E[15]+3634488961&4294967295,C=x+(w<<14&4294967295|w>>>18),w=I+(x^v&(C^x))+E[4]+3889429448&4294967295,I=C+(w<<20&4294967295|w>>>12),w=v+(C^x&(I^C))+E[9]+568446438&4294967295,v=I+(w<<5&4294967295|w>>>27),w=x+(I^C&(v^I))+E[14]+3275163606&4294967295,x=v+(w<<9&4294967295|w>>>23),w=C+(v^I&(x^v))+E[3]+4107603335&4294967295,C=x+(w<<14&4294967295|w>>>18),w=I+(x^v&(C^x))+E[8]+1163531501&4294967295,I=C+(w<<20&4294967295|w>>>12),w=v+(C^x&(I^C))+E[13]+2850285829&4294967295,v=I+(w<<5&4294967295|w>>>27),w=x+(I^C&(v^I))+E[2]+4243563512&4294967295,x=v+(w<<9&4294967295|w>>>23),w=C+(v^I&(x^v))+E[7]+1735328473&4294967295,C=x+(w<<14&4294967295|w>>>18),w=I+(x^v&(C^x))+E[12]+2368359562&4294967295,I=C+(w<<20&4294967295|w>>>12),w=v+(I^C^x)+E[5]+4294588738&4294967295,v=I+(w<<4&4294967295|w>>>28),w=x+(v^I^C)+E[8]+2272392833&4294967295,x=v+(w<<11&4294967295|w>>>21),w=C+(x^v^I)+E[11]+1839030562&4294967295,C=x+(w<<16&4294967295|w>>>16),w=I+(C^x^v)+E[14]+4259657740&4294967295,I=C+(w<<23&4294967295|w>>>9),w=v+(I^C^x)+E[1]+2763975236&4294967295,v=I+(w<<4&4294967295|w>>>28),w=x+(v^I^C)+E[4]+1272893353&4294967295,x=v+(w<<11&4294967295|w>>>21),w=C+(x^v^I)+E[7]+4139469664&4294967295,C=x+(w<<16&4294967295|w>>>16),w=I+(C^x^v)+E[10]+3200236656&4294967295,I=C+(w<<23&4294967295|w>>>9),w=v+(I^C^x)+E[13]+681279174&4294967295,v=I+(w<<4&4294967295|w>>>28),w=x+(v^I^C)+E[0]+3936430074&4294967295,x=v+(w<<11&4294967295|w>>>21),w=C+(x^v^I)+E[3]+3572445317&4294967295,C=x+(w<<16&4294967295|w>>>16),w=I+(C^x^v)+E[6]+76029189&4294967295,I=C+(w<<23&4294967295|w>>>9),w=v+(I^C^x)+E[9]+3654602809&4294967295,v=I+(w<<4&4294967295|w>>>28),w=x+(v^I^C)+E[12]+3873151461&4294967295,x=v+(w<<11&4294967295|w>>>21),w=C+(x^v^I)+E[15]+530742520&4294967295,C=x+(w<<16&4294967295|w>>>16),w=I+(C^x^v)+E[2]+3299628645&4294967295,I=C+(w<<23&4294967295|w>>>9),w=v+(C^(I|~x))+E[0]+4096336452&4294967295,v=I+(w<<6&4294967295|w>>>26),w=x+(I^(v|~C))+E[7]+1126891415&4294967295,x=v+(w<<10&4294967295|w>>>22),w=C+(v^(x|~I))+E[14]+2878612391&4294967295,C=x+(w<<15&4294967295|w>>>17),w=I+(x^(C|~v))+E[5]+4237533241&4294967295,I=C+(w<<21&4294967295|w>>>11),w=v+(C^(I|~x))+E[12]+1700485571&4294967295,v=I+(w<<6&4294967295|w>>>26),w=x+(I^(v|~C))+E[3]+2399980690&4294967295,x=v+(w<<10&4294967295|w>>>22),w=C+(v^(x|~I))+E[10]+4293915773&4294967295,C=x+(w<<15&4294967295|w>>>17),w=I+(x^(C|~v))+E[1]+2240044497&4294967295,I=C+(w<<21&4294967295|w>>>11),w=v+(C^(I|~x))+E[8]+1873313359&4294967295,v=I+(w<<6&4294967295|w>>>26),w=x+(I^(v|~C))+E[15]+4264355552&4294967295,x=v+(w<<10&4294967295|w>>>22),w=C+(v^(x|~I))+E[6]+2734768916&4294967295,C=x+(w<<15&4294967295|w>>>17),w=I+(x^(C|~v))+E[13]+1309151649&4294967295,I=C+(w<<21&4294967295|w>>>11),w=v+(C^(I|~x))+E[4]+4149444226&4294967295,v=I+(w<<6&4294967295|w>>>26),w=x+(I^(v|~C))+E[11]+3174756917&4294967295,x=v+(w<<10&4294967295|w>>>22),w=C+(v^(x|~I))+E[2]+718787259&4294967295,C=x+(w<<15&4294967295|w>>>17),w=I+(x^(C|~v))+E[9]+3951481745&4294967295,T.g[0]=T.g[0]+v&4294967295,T.g[1]=T.g[1]+(C+(w<<21&4294967295|w>>>11))&4294967295,T.g[2]=T.g[2]+C&4294967295,T.g[3]=T.g[3]+x&4294967295}r.prototype.u=function(T,v){v===void 0&&(v=T.length);for(var I=v-this.blockSize,E=this.B,C=this.h,x=0;x<v;){if(C==0)for(;x<=I;)i(this,T,x),x+=this.blockSize;if(typeof T=="string"){for(;x<v;)if(E[C++]=T.charCodeAt(x++),C==this.blockSize){i(this,E),C=0;break}}else for(;x<v;)if(E[C++]=T[x++],C==this.blockSize){i(this,E),C=0;break}}this.h=C,this.o+=v},r.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var v=1;v<T.length-8;++v)T[v]=0;var I=8*this.o;for(v=T.length-8;v<T.length;++v)T[v]=I&255,I/=256;for(this.u(T),T=Array(16),v=I=0;4>v;++v)for(var E=0;32>E;E+=8)T[I++]=this.g[v]>>>E&255;return T};function s(T,v){var I=a;return Object.prototype.hasOwnProperty.call(I,T)?I[T]:I[T]=v(T)}function o(T,v){this.h=v;for(var I=[],E=!0,C=T.length-1;0<=C;C--){var x=T[C]|0;E&&x==v||(I[C]=x,E=!1)}this.g=I}var a={};function c(T){return-128<=T&&128>T?s(T,function(v){return new o([v|0],0>v?-1:0)}):new o([T|0],0>T?-1:0)}function l(T){if(isNaN(T)||!isFinite(T))return p;if(0>T)return N(l(-T));for(var v=[],I=1,E=0;T>=I;E++)v[E]=T/I|0,I*=4294967296;return new o(v,0)}function h(T,v){if(T.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(T.charAt(0)=="-")return N(h(T.substring(1),v));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=l(Math.pow(v,8)),E=p,C=0;C<T.length;C+=8){var x=Math.min(8,T.length-C),w=parseInt(T.substring(C,C+x),v);8>x?(x=l(Math.pow(v,x)),E=E.j(x).add(l(w))):(E=E.j(I),E=E.add(l(w)))}return E}var p=c(0),m=c(1),b=c(16777216);n=o.prototype,n.m=function(){if(O(this))return-N(this).m();for(var T=0,v=1,I=0;I<this.g.length;I++){var E=this.i(I);T+=(0<=E?E:4294967296+E)*v,v*=4294967296}return T},n.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(k(this))return"0";if(O(this))return"-"+N(this).toString(T);for(var v=l(Math.pow(T,6)),I=this,E="";;){var C=Ce(I,v).g;I=z(I,C.j(v));var x=((0<I.g.length?I.g[0]:I.h)>>>0).toString(T);if(I=C,k(I))return x+E;for(;6>x.length;)x="0"+x;E=x+E}},n.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function k(T){if(T.h!=0)return!1;for(var v=0;v<T.g.length;v++)if(T.g[v]!=0)return!1;return!0}function O(T){return T.h==-1}n.l=function(T){return T=z(this,T),O(T)?-1:k(T)?0:1};function N(T){for(var v=T.g.length,I=[],E=0;E<v;E++)I[E]=~T.g[E];return new o(I,~T.h).add(m)}n.abs=function(){return O(this)?N(this):this},n.add=function(T){for(var v=Math.max(this.g.length,T.g.length),I=[],E=0,C=0;C<=v;C++){var x=E+(this.i(C)&65535)+(T.i(C)&65535),w=(x>>>16)+(this.i(C)>>>16)+(T.i(C)>>>16);E=w>>>16,x&=65535,w&=65535,I[C]=w<<16|x}return new o(I,I[I.length-1]&-2147483648?-1:0)};function z(T,v){return T.add(N(v))}n.j=function(T){if(k(this)||k(T))return p;if(O(this))return O(T)?N(this).j(N(T)):N(N(this).j(T));if(O(T))return N(this.j(N(T)));if(0>this.l(b)&&0>T.l(b))return l(this.m()*T.m());for(var v=this.g.length+T.g.length,I=[],E=0;E<2*v;E++)I[E]=0;for(E=0;E<this.g.length;E++)for(var C=0;C<T.g.length;C++){var x=this.i(E)>>>16,w=this.i(E)&65535,Et=T.i(C)>>>16,Zn=T.i(C)&65535;I[2*E+2*C]+=w*Zn,Q(I,2*E+2*C),I[2*E+2*C+1]+=x*Zn,Q(I,2*E+2*C+1),I[2*E+2*C+1]+=w*Et,Q(I,2*E+2*C+1),I[2*E+2*C+2]+=x*Et,Q(I,2*E+2*C+2)}for(E=0;E<v;E++)I[E]=I[2*E+1]<<16|I[2*E];for(E=v;E<2*v;E++)I[E]=0;return new o(I,0)};function Q(T,v){for(;(T[v]&65535)!=T[v];)T[v+1]+=T[v]>>>16,T[v]&=65535,v++}function Z(T,v){this.g=T,this.h=v}function Ce(T,v){if(k(v))throw Error("division by zero");if(k(T))return new Z(p,p);if(O(T))return v=Ce(N(T),v),new Z(N(v.g),N(v.h));if(O(v))return v=Ce(T,N(v)),new Z(N(v.g),v.h);if(30<T.g.length){if(O(T)||O(v))throw Error("slowDivide_ only works with positive integers.");for(var I=m,E=v;0>=E.l(T);)I=Je(I),E=Je(E);var C=Ie(I,1),x=Ie(E,1);for(E=Ie(E,2),I=Ie(I,2);!k(E);){var w=x.add(E);0>=w.l(T)&&(C=C.add(I),x=w),E=Ie(E,1),I=Ie(I,1)}return v=z(T,C.j(v)),new Z(C,v)}for(C=p;0<=T.l(v);){for(I=Math.max(1,Math.floor(T.m()/v.m())),E=Math.ceil(Math.log(I)/Math.LN2),E=48>=E?1:Math.pow(2,E-48),x=l(I),w=x.j(v);O(w)||0<w.l(T);)I-=E,x=l(I),w=x.j(v);k(x)&&(x=m),C=C.add(x),T=z(T,w)}return new Z(C,T)}n.A=function(T){return Ce(this,T).h},n.and=function(T){for(var v=Math.max(this.g.length,T.g.length),I=[],E=0;E<v;E++)I[E]=this.i(E)&T.i(E);return new o(I,this.h&T.h)},n.or=function(T){for(var v=Math.max(this.g.length,T.g.length),I=[],E=0;E<v;E++)I[E]=this.i(E)|T.i(E);return new o(I,this.h|T.h)},n.xor=function(T){for(var v=Math.max(this.g.length,T.g.length),I=[],E=0;E<v;E++)I[E]=this.i(E)^T.i(E);return new o(I,this.h^T.h)};function Je(T){for(var v=T.g.length+1,I=[],E=0;E<v;E++)I[E]=T.i(E)<<1|T.i(E-1)>>>31;return new o(I,T.h)}function Ie(T,v){var I=v>>5;v%=32;for(var E=T.g.length-I,C=[],x=0;x<E;x++)C[x]=0<v?T.i(x+I)>>>v|T.i(x+I+1)<<32-v:T.i(x+I);return new o(C,T.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Mx=KU.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=h,lo=KU.Integer=o}).apply(typeof WU<"u"?WU:typeof self<"u"?self:typeof window<"u"?window:{});var D0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},uo={};var Ox,AX,Ld,Fx,rg,x0,Vx,Lx,Ux;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,f,y){return u==Array.prototype||u==Object.prototype||(u[f]=y.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof D0=="object"&&D0];for(var f=0;f<u.length;++f){var y=u[f];if(y&&y.Math==Math)return y}throw Error("Cannot find global object")}var r=t(this);function i(u,f){if(f)e:{var y=r;u=u.split(".");for(var S=0;S<u.length-1;S++){var L=u[S];if(!(L in y))break e;y=y[L]}u=u[u.length-1],S=y[u],f=f(S),f!=S&&f!=null&&e(y,u,{configurable:!0,writable:!0,value:f})}}function s(u,f){u instanceof String&&(u+="");var y=0,S=!1,L={next:function(){if(!S&&y<u.length){var j=y++;return{value:f(j,u[j]),done:!1}}return S=!0,{done:!0,value:void 0}}};return L[Symbol.iterator]=function(){return L},L}i("Array.prototype.values",function(u){return u||function(){return s(this,function(f,y){return y})}});var o=o||{},a=this||self;function c(u){var f=typeof u;return f=f!="object"?f:u?Array.isArray(u)?"array":f:"null",f=="array"||f=="object"&&typeof u.length=="number"}function l(u){var f=typeof u;return f=="object"&&u!=null||f=="function"}function h(u,f,y){return u.call.apply(u.bind,arguments)}function p(u,f,y){if(!u)throw Error();if(2<arguments.length){var S=Array.prototype.slice.call(arguments,2);return function(){var L=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(L,S),u.apply(f,L)}}return function(){return u.apply(f,arguments)}}function m(u,f,y){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,m.apply(null,arguments)}function b(u,f){var y=Array.prototype.slice.call(arguments,1);return function(){var S=y.slice();return S.push.apply(S,arguments),u.apply(this,S)}}function k(u,f){function y(){}y.prototype=f.prototype,u.aa=f.prototype,u.prototype=new y,u.prototype.constructor=u,u.Qb=function(S,L,j){for(var K=Array(arguments.length-2),et=2;et<arguments.length;et++)K[et-2]=arguments[et];return f.prototype[L].apply(S,K)}}function O(u){let f=u.length;if(0<f){let y=Array(f);for(let S=0;S<f;S++)y[S]=u[S];return y}return[]}function N(u,f){for(let y=1;y<arguments.length;y++){let S=arguments[y];if(c(S)){let L=u.length||0,j=S.length||0;u.length=L+j;for(let K=0;K<j;K++)u[L+K]=S[K]}else u.push(S)}}class z{constructor(f,y){this.i=f,this.j=y,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function Q(u){return/^[\s\xa0]*$/.test(u)}function Z(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function Ce(u){return Ce[" "](u),u}Ce[" "]=function(){};var Je=Z().indexOf("Gecko")!=-1&&!(Z().toLowerCase().indexOf("webkit")!=-1&&Z().indexOf("Edge")==-1)&&!(Z().indexOf("Trident")!=-1||Z().indexOf("MSIE")!=-1)&&Z().indexOf("Edge")==-1;function Ie(u,f,y){for(let S in u)f.call(y,u[S],S,u)}function T(u,f){for(let y in u)f.call(void 0,u[y],y,u)}function v(u){let f={};for(let y in u)f[y]=u[y];return f}let I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function E(u,f){let y,S;for(let L=1;L<arguments.length;L++){S=arguments[L];for(y in S)u[y]=S[y];for(let j=0;j<I.length;j++)y=I[j],Object.prototype.hasOwnProperty.call(S,y)&&(u[y]=S[y])}}function C(u){var f=1;u=u.split(":");let y=[];for(;0<f&&u.length;)y.push(u.shift()),f--;return u.length&&y.push(u.join(":")),y}function x(u){a.setTimeout(()=>{throw u},0)}function w(){var u=Io;let f=null;return u.g&&(f=u.g,u.g=u.g.next,u.g||(u.h=null),f.next=null),f}class Et{constructor(){this.h=this.g=null}add(f,y){let S=Zn.get();S.set(f,y),this.h?this.h.next=S:this.g=S,this.h=S}}var Zn=new z(()=>new Zw,u=>u.reset());class Zw{constructor(){this.next=this.g=this.h=null}set(f,y){this.h=f,this.g=y,this.next=null}reset(){this.next=this.g=this.h=null}}let Ka,Oi=!1,Io=new Et,jg=()=>{let u=a.Promise.resolve(void 0);Ka=()=>{u.then(Bg)}};var Bg=()=>{for(var u;u=w();){try{u.h.call(u.g)}catch(y){x(y)}var f=Zn;f.j(u),100>f.h&&(f.h++,u.next=f.g,f.g=u)}Oi=!1};function ei(){this.s=this.s,this.C=this.C}ei.prototype.s=!1,ei.prototype.ma=function(){this.s||(this.s=!0,this.N())},ei.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function sn(u,f){this.type=u,this.g=this.target=f,this.defaultPrevented=!1}sn.prototype.h=function(){this.defaultPrevented=!0};var Ol=(function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,f=Object.defineProperty({},"passive",{get:function(){u=!0}});try{let y=()=>{};a.addEventListener("test",y,f),a.removeEventListener("test",y,f)}catch{}return u})();function Is(u,f){if(sn.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var y=this.type=u.type,S=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=f,f=u.relatedTarget){if(Je){e:{try{Ce(f.nodeName);var L=!0;break e}catch{}L=!1}L||(f=null)}}else y=="mouseover"?f=u.fromElement:y=="mouseout"&&(f=u.toElement);this.relatedTarget=f,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:vh[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Is.aa.h.call(this)}}k(Is,sn);var vh={2:"touch",3:"pen",4:"mouse"};Is.prototype.h=function(){Is.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var bs="closure_listenable_"+(1e6*Math.random()|0),wh=0;function $g(u,f,y,S,L){this.listener=u,this.proxy=null,this.src=f,this.type=y,this.capture=!!S,this.ha=L,this.key=++wh,this.da=this.fa=!1}function Qa(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Fl(u){this.src=u,this.g={},this.h=0}Fl.prototype.add=function(u,f,y,S,L){var j=u.toString();u=this.g[j],u||(u=this.g[j]=[],this.h++);var K=Ll(u,f,S,L);return-1<K?(f=u[K],y||(f.fa=!1)):(f=new $g(f,this.src,j,!!S,L),f.fa=y,u.push(f)),f};function Vl(u,f){var y=f.type;if(y in u.g){var S=u.g[y],L=Array.prototype.indexOf.call(S,f,void 0),j;(j=0<=L)&&Array.prototype.splice.call(S,L,1),j&&(Qa(f),u.g[y].length==0&&(delete u.g[y],u.h--))}}function Ll(u,f,y,S){for(var L=0;L<u.length;++L){var j=u[L];if(!j.da&&j.listener==f&&j.capture==!!y&&j.ha==S)return L}return-1}var Ya="closure_lm_"+(1e6*Math.random()|0),Ul={};function zg(u,f,y,S,L){if(S&&S.once)return Bl(u,f,y,S,L);if(Array.isArray(f)){for(var j=0;j<f.length;j++)zg(u,f[j],y,S,L);return null}return y=Cs(y),u&&u[bs]?u.K(f,y,l(S)?!!S.capture:!!S,L):jl(u,f,y,!1,S,L)}function jl(u,f,y,S,L,j){if(!f)throw Error("Invalid event type");var K=l(L)?!!L.capture:!!L,et=$l(u);if(et||(u[Ya]=et=new Fl(u)),y=et.add(f,y,S,K,j),y.proxy)return y;if(S=Ih(),y.proxy=S,S.src=u,S.listener=y,u.addEventListener)Ol||(L=K),L===void 0&&(L=!1),u.addEventListener(f.toString(),S,L);else if(u.attachEvent)u.attachEvent(Ja(f.toString()),S);else if(u.addListener&&u.removeListener)u.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return y}function Ih(){function u(y){return f.call(u.src,u.listener,y)}let f=eI;return u}function Bl(u,f,y,S,L){if(Array.isArray(f)){for(var j=0;j<f.length;j++)Bl(u,f[j],y,S,L);return null}return y=Cs(y),u&&u[bs]?u.L(f,y,l(S)?!!S.capture:!!S,L):jl(u,f,y,!0,S,L)}function on(u,f,y,S,L){if(Array.isArray(f))for(var j=0;j<f.length;j++)on(u,f[j],y,S,L);else S=l(S)?!!S.capture:!!S,y=Cs(y),u&&u[bs]?(u=u.i,f=String(f).toString(),f in u.g&&(j=u.g[f],y=Ll(j,y,S,L),-1<y&&(Qa(j[y]),Array.prototype.splice.call(j,y,1),j.length==0&&(delete u.g[f],u.h--)))):u&&(u=$l(u))&&(f=u.g[f.toString()],u=-1,f&&(u=Ll(f,y,S,L)),(y=-1<u?f[u]:null)&&an(y))}function an(u){if(typeof u!="number"&&u&&!u.da){var f=u.src;if(f&&f[bs])Vl(f.i,u);else{var y=u.type,S=u.proxy;f.removeEventListener?f.removeEventListener(y,S,u.capture):f.detachEvent?f.detachEvent(Ja(y),S):f.addListener&&f.removeListener&&f.removeListener(S),(y=$l(f))?(Vl(y,u),y.h==0&&(y.src=null,f[Ya]=null)):Qa(u)}}}function Ja(u){return u in Ul?Ul[u]:Ul[u]="on"+u}function eI(u,f){if(u.da)u=!0;else{f=new Is(f,this);var y=u.listener,S=u.ha||u.src;u.fa&&an(u),u=y.call(S,f)}return u}function $l(u){return u=u[Ya],u instanceof Fl?u:null}var bh="__closure_events_fn_"+(1e9*Math.random()>>>0);function Cs(u){return typeof u=="function"?u:(u[bh]||(u[bh]=function(f){return u.handleEvent(f)}),u[bh])}function cn(){ei.call(this),this.i=new Fl(this),this.M=this,this.F=null}k(cn,ei),cn.prototype[bs]=!0,cn.prototype.removeEventListener=function(u,f,y,S){on(this,u,f,y,S)};function gn(u,f){var y,S=u.F;if(S)for(y=[];S;S=S.F)y.push(S);if(u=u.M,S=f.type||f,typeof f=="string")f=new sn(f,u);else if(f instanceof sn)f.target=f.target||u;else{var L=f;f=new sn(S,u),E(f,L)}if(L=!0,y)for(var j=y.length-1;0<=j;j--){var K=f.g=y[j];L=bo(K,S,!0,f)&&L}if(K=f.g=u,L=bo(K,S,!0,f)&&L,L=bo(K,S,!1,f)&&L,y)for(j=0;j<y.length;j++)K=f.g=y[j],L=bo(K,S,!1,f)&&L}cn.prototype.N=function(){if(cn.aa.N.call(this),this.i){var u=this.i,f;for(f in u.g){for(var y=u.g[f],S=0;S<y.length;S++)Qa(y[S]);delete u.g[f],u.h--}}this.F=null},cn.prototype.K=function(u,f,y,S){return this.i.add(String(u),f,!1,y,S)},cn.prototype.L=function(u,f,y,S){return this.i.add(String(u),f,!0,y,S)};function bo(u,f,y,S){if(f=u.i.g[String(f)],!f)return!0;f=f.concat();for(var L=!0,j=0;j<f.length;++j){var K=f[j];if(K&&!K.da&&K.capture==y){var et=K.listener,Ut=K.ha||K.src;K.fa&&Vl(u.i,K),L=et.call(Ut,S)!==!1&&L}}return L&&!S.defaultPrevented}function Hg(u,f,y){if(typeof u=="function")y&&(u=m(u,y));else if(u&&typeof u.handleEvent=="function")u=m(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:a.setTimeout(u,f||0)}function qg(u){u.g=Hg(()=>{u.g=null,u.i&&(u.i=!1,qg(u))},u.l);let f=u.h;u.h=null,u.m.apply(null,f)}class Gg extends ei{constructor(f,y){super(),this.m=f,this.l=y,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:qg(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Co(u){ei.call(this),this.h=u,this.g={}}k(Co,ei);var Eo=[];function zl(u){Ie(u.g,function(f,y){this.g.hasOwnProperty(y)&&an(f)},u),u.g={}}Co.prototype.N=function(){Co.aa.N.call(this),zl(this)},Co.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Xa=a.JSON.stringify,Es=a.JSON.parse,Wg=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function To(){}To.prototype.h=null;function Ch(u){return u.h||(u.h=u.i())}function So(){}var Do={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ln(){sn.call(this,"d")}k(ln,sn);function Hl(){sn.call(this,"c")}k(Hl,sn);var ur={},xo=null;function ql(){return xo=xo||new cn}ur.La="serverreachability";function Kg(u){sn.call(this,ur.La,u)}k(Kg,sn);function Nr(u){let f=ql();gn(f,new Kg(f))}ur.STAT_EVENT="statevent";function Qg(u,f){sn.call(this,ur.STAT_EVENT,u),this.stat=f}k(Qg,sn);function An(u){let f=ql();gn(f,new Qg(f,u))}ur.Ma="timingevent";function Za(u,f){sn.call(this,ur.Ma,u),this.size=f}k(Za,sn);function Ao(u,f){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},f)}function Ro(){this.g=!0}Ro.prototype.xa=function(){this.g=!1};function Eh(u,f,y,S,L,j){u.info(function(){if(u.g)if(j)for(var K="",et=j.split("&"),Ut=0;Ut<et.length;Ut++){var tt=et[Ut].split("=");if(1<tt.length){var Nn=tt[0];tt=tt[1];var Pn=Nn.split("_");K=2<=Pn.length&&Pn[1]=="type"?K+(Nn+"="+tt+"&"):K+(Nn+"=redacted&")}}else K=null;else K=j;return"XMLHTTP REQ ("+S+") [attempt "+L+"]: "+f+`
`+y+`
`+K})}function ec(u,f,y,S,L,j,K){u.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+L+"]: "+f+`
`+y+`
`+j+" "+K})}function ko(u,f,y,S){u.info(function(){return"XMLHTTP TEXT ("+f+"): "+Yg(u,y)+(S?" "+S:"")})}function Fi(u,f){u.info(function(){return"TIMEOUT: "+f})}Ro.prototype.info=function(){};function Yg(u,f){if(!u.g)return f;if(!f)return null;try{var y=JSON.parse(f);if(y){for(u=0;u<y.length;u++)if(Array.isArray(y[u])){var S=y[u];if(!(2>S.length)){var L=S[1];if(Array.isArray(L)&&!(1>L.length)){var j=L[0];if(j!="noop"&&j!="stop"&&j!="close")for(var K=1;K<L.length;K++)L[K]=""}}}}return Xa(y)}catch{return f}}var tc={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Gl={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},nc;function rc(){}k(rc,To),rc.prototype.g=function(){return new XMLHttpRequest},rc.prototype.i=function(){return{}},nc=new rc;function Vi(u,f,y,S){this.j=u,this.i=f,this.l=y,this.R=S||1,this.U=new Co(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Th}function Th(){this.i=null,this.g="",this.h=!1}var Jg={},No={};function Wl(u,f,y){u.L=1,u.v=Jl(ti(f)),u.m=y,u.P=!0,Kl(u,null)}function Kl(u,f){u.F=Date.now(),Mo(u),u.A=ti(u.v);var y=u.A,S=u.R;Array.isArray(S)||(S=[String(S)]),sm(y.i,"t",S),u.C=0,y=u.j.J,u.h=new Th,u.g=g(u.j,y?f:null,!u.m),0<u.O&&(u.M=new Gg(m(u.Y,u,u.g),u.O)),f=u.U,y=u.g,S=u.ca;var L="readystatechange";Array.isArray(L)||(L&&(Eo[0]=L.toString()),L=Eo);for(var j=0;j<L.length;j++){var K=zg(y,L[j],S||f.handleEvent,!1,f.h||f);if(!K)break;f.g[K.key]=K}f=u.H?v(u.H):{},u.m?(u.u||(u.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,f)):(u.u="GET",u.g.ea(u.A,u.u,null,f)),Nr(),Eh(u.i,u.u,u.A,u.l,u.R,u.m)}Vi.prototype.ca=function(u){u=u.target;let f=this.M;f&&tr(u)==3?f.j():this.Y(u)},Vi.prototype.Y=function(u){try{if(u==this.g)e:{let Pn=tr(this.g);var f=this.g.Ba();let ou=this.g.Z();if(!(3>Pn)&&(Pn!=3||this.g&&(this.h.h||this.g.oa()||um(this.g)))){this.J||Pn!=4||f==7||(f==8||0>=ou?Nr(3):Nr(2)),Ql(this);var y=this.g.Z();this.X=y;t:if(Po(this)){var S=um(this.g);u="";var L=S.length,j=tr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Li(this),Oo(this);var K="";break t}this.h.i=new a.TextDecoder}for(f=0;f<L;f++)this.h.h=!0,u+=this.h.i.decode(S[f],{stream:!(j&&f==L-1)});S.length=0,this.h.g+=u,this.C=0,K=this.h.g}else K=this.g.oa();if(this.o=y==200,ec(this.i,this.u,this.A,this.l,this.R,Pn,y),this.o){if(this.T&&!this.K){t:{if(this.g){var et,Ut=this.g;if((et=Ut.g?Ut.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Q(et)){var tt=et;break t}}tt=null}if(y=tt)ko(this.i,this.l,y,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ic(this,y);else{this.o=!1,this.s=3,An(12),Li(this),Oo(this);break e}}if(this.P){y=!0;let oi;for(;!this.J&&this.C<K.length;)if(oi=Ts(this,K),oi==No){Pn==4&&(this.s=4,An(14),y=!1),ko(this.i,this.l,null,"[Incomplete Response]");break}else if(oi==Jg){this.s=4,An(15),ko(this.i,this.l,K,"[Invalid Chunk]"),y=!1;break}else ko(this.i,this.l,oi,null),ic(this,oi);if(Po(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Pn!=4||K.length!=0||this.h.h||(this.s=1,An(16),y=!1),this.o=this.o&&y,!y)ko(this.i,this.l,K,"[Invalid Chunked Response]"),Li(this),Oo(this);else if(0<K.length&&!this.W){this.W=!0;var Nn=this.j;Nn.g==this&&Nn.ba&&!Nn.M&&(Nn.j.info("Great, no buffering proxy detected. Bytes received: "+K.length),su(Nn),Nn.M=!0,An(11))}}else ko(this.i,this.l,K,null),ic(this,K);Pn==4&&Li(this),this.o&&!this.J&&(Pn==4?kn(this.j,this):(this.o=!1,Mo(this)))}else dm(this.g),y==400&&0<K.indexOf("Unknown SID")?(this.s=3,An(12)):(this.s=0,An(13)),Li(this),Oo(this)}}}catch{}finally{}};function Po(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function Ts(u,f){var y=u.C,S=f.indexOf(`
`,y);return S==-1?No:(y=Number(f.substring(y,S)),isNaN(y)?Jg:(S+=1,S+y>f.length?No:(f=f.slice(S,S+y),u.C=S+y,f)))}Vi.prototype.cancel=function(){this.J=!0,Li(this)};function Mo(u){u.S=Date.now()+u.I,Xg(u,u.I)}function Xg(u,f){if(u.B!=null)throw Error("WatchDog timer not null");u.B=Ao(m(u.ba,u),f)}function Ql(u){u.B&&(a.clearTimeout(u.B),u.B=null)}Vi.prototype.ba=function(){this.B=null;let u=Date.now();0<=u-this.S?(Fi(this.i,this.A),this.L!=2&&(Nr(),An(17)),Li(this),this.s=2,Oo(this)):Xg(this,this.S-u)};function Oo(u){u.j.G==0||u.J||kn(u.j,u)}function Li(u){Ql(u);var f=u.M;f&&typeof f.ma=="function"&&f.ma(),u.M=null,zl(u.U),u.g&&(f=u.g,u.g=null,f.abort(),f.ma())}function ic(u,f){try{var y=u.j;if(y.G!=0&&(y.g==u||Rh(y.h,u))){if(!u.K&&Rh(y.h,u)&&y.G==3){try{var S=y.Da.g.parse(f)}catch{S=null}if(Array.isArray(S)&&S.length==3){var L=S;if(L[0]==0){e:if(!y.u){if(y.g)if(y.g.F+3e3<u.F)Ds(y),$o(y);else break e;iu(y),An(18)}}else y.za=L[1],0<y.za-y.T&&37500>L[2]&&y.F&&y.v==0&&!y.C&&(y.C=Ao(m(y.Za,y),6e3));if(1>=Ah(y.h)&&y.ca){try{y.ca()}catch{}y.ca=void 0}}else Bi(y,11)}else if((u.K||y.g==u)&&Ds(y),!Q(f))for(L=y.Da.g.parse(f),f=0;f<L.length;f++){let tt=L[f];if(y.T=tt[0],tt=tt[1],y.G==2)if(tt[0]=="c"){y.K=tt[1],y.ia=tt[2];let Nn=tt[3];Nn!=null&&(y.la=Nn,y.j.info("VER="+y.la));let Pn=tt[4];Pn!=null&&(y.Aa=Pn,y.j.info("SVER="+y.Aa));let ou=tt[5];ou!=null&&typeof ou=="number"&&0<ou&&(S=1.5*ou,y.L=S,y.j.info("backChannelRequestTimeoutMs_="+S)),S=y;let oi=u.g;if(oi){let hm=oi.g?oi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(hm){var j=S.h;j.g||hm.indexOf("spdy")==-1&&hm.indexOf("quic")==-1&&hm.indexOf("h2")==-1||(j.j=j.l,j.g=new Set,j.h&&(Pr(j,j.h),j.h=null))}if(S.D){let nI=oi.g?oi.g.getResponseHeader("X-HTTP-Session-Id"):null;nI&&(S.ya=nI,vt(S.I,S.D,nI))}}y.G=3,y.l&&y.l.ua(),y.ba&&(y.R=Date.now()-u.F,y.j.info("Handshake RTT: "+y.R+"ms")),S=y;var K=u;if(S.qa=d(S,S.J?S.ia:null,S.W),K.K){dr(S.h,K);var et=K,Ut=S.L;Ut&&(et.I=Ut),et.B&&(Ql(et),Mo(et)),S.g=K}else Uh(S);0<y.i.length&&dc(y)}else tt[0]!="stop"&&tt[0]!="close"||Bi(y,7);else y.G==3&&(tt[0]=="stop"||tt[0]=="close"?tt[0]=="stop"?Bi(y,7):tu(y):tt[0]!="noop"&&y.l&&y.l.ta(tt),y.v=0)}}Nr(4)}catch{}}var Sh=class{constructor(u,f){this.g=u,this.map=f}};function Dh(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function xh(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Ah(u){return u.h?1:u.g?u.g.size:0}function Rh(u,f){return u.h?u.h==f:u.g?u.g.has(f):!1}function Pr(u,f){u.g?u.g.add(f):u.h=f}function dr(u,f){u.h&&u.h==f?u.h=null:u.g&&u.g.has(f)&&u.g.delete(f)}Dh.prototype.cancel=function(){if(this.i=Fo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let u of this.g.values())u.cancel();this.g.clear()}};function Fo(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let f=u.i;for(let y of u.g.values())f=f.concat(y.D);return f}return O(u.i)}function sc(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(c(u)){for(var f=[],y=u.length,S=0;S<y;S++)f.push(u[S]);return f}f=[],y=0;for(S in u)f[y++]=u[S];return f}function kh(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(c(u)||typeof u=="string"){var f=[];u=u.length;for(var y=0;y<u;y++)f.push(y);return f}f=[],y=0;for(let S in u)f[y++]=S;return f}}}function pt(u,f){if(u.forEach&&typeof u.forEach=="function")u.forEach(f,void 0);else if(c(u)||typeof u=="string")Array.prototype.forEach.call(u,f,void 0);else for(var y=kh(u),S=sc(u),L=S.length,j=0;j<L;j++)f.call(void 0,S[j],y&&y[j],u)}var oc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ac(u,f){if(u){u=u.split("&");for(var y=0;y<u.length;y++){var S=u[y].indexOf("="),L=null;if(0<=S){var j=u[y].substring(0,S);L=u[y].substring(S+1)}else j=u[y];f(j,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function hr(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof hr){this.h=u.h,cc(this,u.j),this.o=u.o,this.g=u.g,Yl(this,u.s),this.l=u.l;var f=u.i,y=new lc;y.i=f.i,f.g&&(y.g=new Map(f.g),y.h=f.h),Zg(this,y),this.m=u.m}else u&&(f=String(u).match(oc))?(this.h=!1,cc(this,f[1]||"",!0),this.o=ni(f[2]||""),this.g=ni(f[3]||"",!0),Yl(this,f[4]),this.l=ni(f[5]||"",!0),Zg(this,f[6]||"",!0),this.m=ni(f[7]||"")):(this.h=!1,this.i=new lc(null,this.h))}hr.prototype.toString=function(){var u=[],f=this.j;f&&u.push(fr(f,Nh,!0),":");var y=this.g;return(y||f=="file")&&(u.push("//"),(f=this.o)&&u.push(fr(f,Nh,!0),"@"),u.push(encodeURIComponent(String(y)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y=this.s,y!=null&&u.push(":",String(y))),(y=this.l)&&(this.g&&y.charAt(0)!="/"&&u.push("/"),u.push(fr(y,y.charAt(0)=="/"?nm:tm,!0))),(y=this.i.toString())&&u.push("?",y),(y=this.m)&&u.push("#",fr(y,Vo)),u.join("")};function ti(u){return new hr(u)}function cc(u,f,y){u.j=y?ni(f,!0):f,u.j&&(u.j=u.j.replace(/:$/,""))}function Yl(u,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);u.s=f}else u.s=null}function Zg(u,f,y){f instanceof lc?(u.i=f,Xl(u.i,u.h)):(y||(f=fr(f,rm)),u.i=new lc(f,u.h))}function vt(u,f,y){u.i.set(f,y)}function Jl(u){return vt(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function ni(u,f){return u?f?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function fr(u,f,y){return typeof u=="string"?(u=encodeURI(u).replace(f,em),y&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function em(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Nh=/[#\/\?@]/g,tm=/[#\?:]/g,nm=/[#\?]/g,rm=/[#\?@]/g,Vo=/#/g;function lc(u,f){this.h=this.g=null,this.i=u||null,this.j=!!f}function Ui(u){u.g||(u.g=new Map,u.h=0,u.i&&ac(u.i,function(f,y){u.add(decodeURIComponent(f.replace(/\+/g," ")),y)}))}n=lc.prototype,n.add=function(u,f){Ui(this),this.i=null,u=ii(this,u);var y=this.g.get(u);return y||this.g.set(u,y=[]),y.push(f),this.h+=1,this};function im(u,f){Ui(u),f=ii(u,f),u.g.has(f)&&(u.i=null,u.h-=u.g.get(f).length,u.g.delete(f))}function ri(u,f){return Ui(u),f=ii(u,f),u.g.has(f)}n.forEach=function(u,f){Ui(this),this.g.forEach(function(y,S){y.forEach(function(L){u.call(f,L,S,this)},this)},this)},n.na=function(){Ui(this);let u=Array.from(this.g.values()),f=Array.from(this.g.keys()),y=[];for(let S=0;S<f.length;S++){let L=u[S];for(let j=0;j<L.length;j++)y.push(f[S])}return y},n.V=function(u){Ui(this);let f=[];if(typeof u=="string")ri(this,u)&&(f=f.concat(this.g.get(ii(this,u))));else{u=Array.from(this.g.values());for(let y=0;y<u.length;y++)f=f.concat(u[y])}return f},n.set=function(u,f){return Ui(this),this.i=null,u=ii(this,u),ri(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[f]),this.h+=1,this},n.get=function(u,f){return u?(u=this.V(u),0<u.length?String(u[0]):f):f};function sm(u,f,y){im(u,f),0<y.length&&(u.i=null,u.g.set(ii(u,f),O(y)),u.h+=y.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let u=[],f=Array.from(this.g.keys());for(var y=0;y<f.length;y++){var S=f[y];let j=encodeURIComponent(String(S)),K=this.V(S);for(S=0;S<K.length;S++){var L=j;K[S]!==""&&(L+="="+encodeURIComponent(String(K[S]))),u.push(L)}}return this.i=u.join("&")};function ii(u,f){return f=String(f),u.j&&(f=f.toLowerCase()),f}function Xl(u,f){f&&!u.j&&(Ui(u),u.i=null,u.g.forEach(function(y,S){var L=S.toLowerCase();S!=L&&(im(this,S),sm(this,L,y))},u)),u.j=f}function om(u,f){let y=new Ro;if(a.Image){let S=new Image;S.onload=b(er,y,"TestLoadImage: loaded",!0,f,S),S.onerror=b(er,y,"TestLoadImage: error",!1,f,S),S.onabort=b(er,y,"TestLoadImage: abort",!1,f,S),S.ontimeout=b(er,y,"TestLoadImage: timeout",!1,f,S),a.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=u}else f(!1)}function uc(u,f){let y=new Ro,S=new AbortController,L=setTimeout(()=>{S.abort(),er(y,"TestPingServer: timeout",!1,f)},1e4);fetch(u,{signal:S.signal}).then(j=>{clearTimeout(L),j.ok?er(y,"TestPingServer: ok",!0,f):er(y,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(L),er(y,"TestPingServer: error",!1,f)})}function er(u,f,y,S,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),S(y)}catch{}}function am(){this.g=new Wg}function Ph(u,f,y){let S=y||"";try{pt(u,function(L,j){let K=L;l(L)&&(K=Xa(L)),f.push(S+j+"="+encodeURIComponent(K))})}catch(L){throw f.push(S+"type="+encodeURIComponent("_badmap")),L}}function gt(u){this.l=u.Ub||null,this.j=u.eb||!1}k(gt,To),gt.prototype.g=function(){return new Zl(this.l,this.j)},gt.prototype.i=(function(u){return function(){return u}})({});function Zl(u,f){cn.call(this),this.D=u,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}k(Zl,cn),n=Zl.prototype,n.open=function(u,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=f,this.readyState=1,Uo(this)},n.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(f.body=u),(this.D||a).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Lo(this)),this.readyState=0},n.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Uo(this)),this.g&&(this.readyState=3,Uo(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;cm(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function cm(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}n.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var f=u.value?u.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!u.done}))&&(this.response=this.responseText+=f)}u.done?Lo(this):Uo(this),this.readyState==3&&cm(this)}},n.Ra=function(u){this.g&&(this.response=this.responseText=u,Lo(this))},n.Qa=function(u){this.g&&(this.response=u,Lo(this))},n.ga=function(){this.g&&Lo(this)};function Lo(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Uo(u)}n.setRequestHeader=function(u,f){this.u.append(u,f)},n.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let u=[],f=this.h.entries();for(var y=f.next();!y.done;)y=y.value,u.push(y[0]+": "+y[1]),y=f.next();return u.join(`\r
`)};function Uo(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Zl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Mh(u){let f="";return Ie(u,function(y,S){f+=S,f+=":",f+=y,f+=`\r
`}),f}function jo(u,f,y){e:{for(S in y){var S=!1;break e}S=!0}S||(y=Mh(y),typeof u=="string"?y!=null&&encodeURIComponent(String(y)):vt(u,f,y))}function rt(u){cn.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}k(rt,cn);var lm=/^https?$/i,tI=["POST","PUT"];n=rt.prototype,n.Ha=function(u){this.J=u},n.ea=function(u,f,y,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);f=f?f.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():nc.g(),this.v=this.o?Ch(this.o):Ch(nc),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(f,String(u),!0),this.B=!1}catch(j){Bo(this,j);return}if(u=y||"",y=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var L in S)y.set(L,S[L]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(let j of S.keys())y.set(j,S.get(j));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(y.keys()).find(j=>j.toLowerCase()=="content-type"),L=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(tI,f,void 0))||S||L||y.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[j,K]of y)this.g.setRequestHeader(j,K);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Fh(this),this.u=!0,this.g.send(u),this.u=!1}catch(j){Bo(this,j)}};function Bo(u,f){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=f,u.m=5,Oh(u),Ss(u)}function Oh(u){u.A||(u.A=!0,gn(u,"complete"),gn(u,"error"))}n.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,gn(this,"complete"),gn(this,"abort"),Ss(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ss(this,!0)),rt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?eu(this):this.bb())},n.bb=function(){eu(this)};function eu(u){if(u.h&&typeof o<"u"&&(!u.v[1]||tr(u)!=4||u.Z()!=2)){if(u.u&&tr(u)==4)Hg(u.Ea,0,u);else if(gn(u,"readystatechange"),tr(u)==4){u.h=!1;try{let K=u.Z();e:switch(K){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var y;if(!(y=f)){var S;if(S=K===0){var L=String(u.D).match(oc)[1]||null;!L&&a.self&&a.self.location&&(L=a.self.location.protocol.slice(0,-1)),S=!lm.test(L?L.toLowerCase():"")}y=S}if(y)gn(u,"complete"),gn(u,"success");else{u.m=6;try{var j=2<tr(u)?u.g.statusText:""}catch{j=""}u.l=j+" ["+u.Z()+"]",Oh(u)}}finally{Ss(u)}}}}function Ss(u,f){if(u.g){Fh(u);let y=u.g,S=u.v[0]?()=>{}:null;u.g=null,u.v=null,f||gn(u,"ready");try{y.onreadystatechange=S}catch{}}}function Fh(u){u.I&&(a.clearTimeout(u.I),u.I=null)}n.isActive=function(){return!!this.g};function tr(u){return u.g?u.g.readyState:0}n.Z=function(){try{return 2<tr(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(u){if(this.g){var f=this.g.responseText;return u&&f.indexOf(u)==0&&(f=f.substring(u.length)),Es(f)}};function um(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function dm(u){let f={};u=(u.g&&2<=tr(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<u.length;S++){if(Q(u[S]))continue;var y=C(u[S]);let L=y[0];if(y=y[1],typeof y!="string")continue;y=y.trim();let j=f[L]||[];f[L]=j,j.push(y)}T(f,function(S){return S.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function si(u,f,y){return y&&y.internalChannelParams&&y.internalChannelParams[u]||f}function Vh(u){this.Aa=0,this.i=[],this.j=new Ro,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=si("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=si("baseRetryDelayMs",5e3,u),this.cb=si("retryDelaySeedMs",1e4,u),this.Wa=si("forwardChannelMaxRetries",2,u),this.wa=si("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new Dh(u&&u.concurrentRequestLimit),this.Da=new am,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Vh.prototype,n.la=8,n.G=1,n.connect=function(u,f,y,S){An(0),this.W=u,this.H=f||{},y&&S!==void 0&&(this.H.OSID=y,this.H.OAID=S),this.F=this.X,this.I=d(this,null,this.W),dc(this)};function tu(u){if(nu(u),u.G==3){var f=u.U++,y=ti(u.I);if(vt(y,"SID",u.K),vt(y,"RID",f),vt(y,"TYPE","terminate"),zo(u,y),f=new Vi(u,u.j,f),f.L=2,f.v=Jl(ti(y)),y=!1,a.navigator&&a.navigator.sendBeacon)try{y=a.navigator.sendBeacon(f.v.toString(),"")}catch{}!y&&a.Image&&(new Image().src=f.v,y=!0),y||(f.g=g(f.j,null),f.g.ea(f.v)),f.F=Date.now(),Mo(f)}xs(u)}function $o(u){u.g&&(su(u),u.g.cancel(),u.g=null)}function nu(u){$o(u),u.u&&(a.clearTimeout(u.u),u.u=null),Ds(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function dc(u){if(!xh(u.h)&&!u.s){u.s=!0;var f=u.Ga;Ka||jg(),Oi||(Ka(),Oi=!0),Io.add(f,u),u.B=0}}function ru(u,f){return Ah(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=f.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=Ao(m(u.Ga,u,f),Bh(u,u.B)),u.B++,!0)}n.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;let L=new Vi(this,this.j,u),j=this.o;if(this.S&&(j?(j=v(j),E(j,this.S)):j=this.S),this.m!==null||this.O||(L.H=j,j=null),this.P)e:{for(var f=0,y=0;y<this.i.length;y++){t:{var S=this.i[y];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(f+=S,4096<f){f=y;break e}if(f===4096||y===this.i.length-1){f=y+1;break e}}f=1e3}else f=1e3;f=ji(this,L,f),y=ti(this.I),vt(y,"RID",u),vt(y,"CVER",22),this.D&&vt(y,"X-HTTP-Session-Id",this.D),zo(this,y),j&&(this.O?f="headers="+encodeURIComponent(String(Mh(j)))+"&"+f:this.m&&jo(y,this.m,j)),Pr(this.h,L),this.Ua&&vt(y,"TYPE","init"),this.P?(vt(y,"$req",f),vt(y,"SID","null"),L.T=!0,Wl(L,y,null)):Wl(L,y,f),this.G=2}}else this.G==3&&(u?Lh(this,u):this.i.length==0||xh(this.h)||Lh(this))};function Lh(u,f){var y;f?y=f.l:y=u.U++;let S=ti(u.I);vt(S,"SID",u.K),vt(S,"RID",y),vt(S,"AID",u.T),zo(u,S),u.m&&u.o&&jo(S,u.m,u.o),y=new Vi(u,u.j,y,u.B+1),u.m===null&&(y.H=u.o),f&&(u.i=f.D.concat(u.i)),f=ji(u,y,1e3),y.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),Pr(u.h,y),Wl(y,S,f)}function zo(u,f){u.H&&Ie(u.H,function(y,S){vt(f,S,y)}),u.l&&pt({},function(y,S){vt(f,S,y)})}function ji(u,f,y){y=Math.min(u.i.length,y);var S=u.l?m(u.l.Na,u.l,u):null;e:{var L=u.i;let j=-1;for(;;){let K=["count="+y];j==-1?0<y?(j=L[0].g,K.push("ofs="+j)):j=0:K.push("ofs="+j);let et=!0;for(let Ut=0;Ut<y;Ut++){let tt=L[Ut].g,Nn=L[Ut].map;if(tt-=j,0>tt)j=Math.max(0,L[Ut].g-100),et=!1;else try{Ph(Nn,K,"req"+tt+"_")}catch{S&&S(Nn)}}if(et){S=K.join("&");break e}}}return u=u.i.splice(0,y),f.D=u,S}function Uh(u){if(!u.g&&!u.u){u.Y=1;var f=u.Fa;Ka||jg(),Oi||(Ka(),Oi=!0),Io.add(f,u),u.v=0}}function iu(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=Ao(m(u.Fa,u),Bh(u,u.v)),u.v++,!0)}n.Fa=function(){if(this.u=null,jh(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=Ao(m(this.ab,this),u)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,An(10),$o(this),jh(this))};function su(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function jh(u){u.g=new Vi(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var f=ti(u.qa);vt(f,"RID","rpc"),vt(f,"SID",u.K),vt(f,"AID",u.T),vt(f,"CI",u.F?"0":"1"),!u.F&&u.ja&&vt(f,"TO",u.ja),vt(f,"TYPE","xmlhttp"),zo(u,f),u.m&&u.o&&jo(f,u.m,u.o),u.L&&(u.g.I=u.L);var y=u.g;u=u.ia,y.L=1,y.v=Jl(ti(f)),y.m=null,y.P=!0,Kl(y,u)}n.Za=function(){this.C!=null&&(this.C=null,$o(this),iu(this),An(19))};function Ds(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function kn(u,f){var y=null;if(u.g==f){Ds(u),su(u),u.g=null;var S=2}else if(Rh(u.h,f))y=f.D,dr(u.h,f),S=1;else return;if(u.G!=0){if(f.o)if(S==1){y=f.m?f.m.length:0,f=Date.now()-f.F;var L=u.B;S=ql(),gn(S,new Za(S,y)),dc(u)}else Uh(u);else if(L=f.s,L==3||L==0&&0<f.X||!(S==1&&ru(u,f)||S==2&&iu(u)))switch(y&&0<y.length&&(f=u.h,f.i=f.i.concat(y)),L){case 1:Bi(u,5);break;case 4:Bi(u,10);break;case 3:Bi(u,6);break;default:Bi(u,2)}}}function Bh(u,f){let y=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(y*=2),y*f}function Bi(u,f){if(u.j.info("Error code "+f),f==2){var y=m(u.fb,u),S=u.Xa;let L=!S;S=new hr(S||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||cc(S,"https"),Jl(S),L?om(S.toString(),y):uc(S.toString(),y)}else An(2);u.G=0,u.l&&u.l.sa(f),xs(u),nu(u)}n.fb=function(u){u?(this.j.info("Successfully pinged google.com"),An(2)):(this.j.info("Failed to ping google.com"),An(1))};function xs(u){if(u.G=0,u.ka=[],u.l){let f=Fo(u.h);(f.length!=0||u.i.length!=0)&&(N(u.ka,f),N(u.ka,u.i),u.h.i.length=0,O(u.i),u.i.length=0),u.l.ra()}}function d(u,f,y){var S=y instanceof hr?ti(y):new hr(y);if(S.g!="")f&&(S.g=f+"."+S.g),Yl(S,S.s);else{var L=a.location;S=L.protocol,f=f?f+"."+L.hostname:L.hostname,L=+L.port;var j=new hr(null);S&&cc(j,S),f&&(j.g=f),L&&Yl(j,L),y&&(j.l=y),S=j}return y=u.D,f=u.ya,y&&f&&vt(S,y,f),vt(S,"VER",u.la),zo(u,S),S}function g(u,f,y){if(f&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=u.Ca&&!u.pa?new rt(new gt({eb:y})):new rt(u.pa),f.Ha(u.J),f}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function _(){}n=_.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function D(){}D.prototype.g=function(u,f){return new F(u,f)};function F(u,f){cn.call(this),this.g=new Vh(f),this.l=u,this.h=f&&f.messageUrlParams||null,u=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(u?u["X-WebChannel-Content-Type"]=f.messageContentType:u={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(u?u["X-WebChannel-Client-Profile"]=f.va:u={"X-WebChannel-Client-Profile":f.va}),this.g.S=u,(u=f&&f.Sb)&&!Q(u)&&(this.g.m=u),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!Q(f)&&(this.g.D=f,u=this.h,u!==null&&f in u&&(u=this.h,f in u&&delete u[f])),this.j=new be(this)}k(F,cn),F.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},F.prototype.close=function(){tu(this.g)},F.prototype.o=function(u){var f=this.g;if(typeof u=="string"){var y={};y.__data__=u,u=y}else this.u&&(y={},y.__data__=Xa(u),u=y);f.i.push(new Sh(f.Ya++,u)),f.G==3&&dc(f)},F.prototype.N=function(){this.g.l=null,delete this.j,tu(this.g),delete this.g,F.aa.N.call(this)};function U(u){ln.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var f=u.__sm__;if(f){e:{for(let y in f){u=y;break e}u=void 0}(this.i=u)&&(u=this.i,f=f!==null&&u in f?f[u]:void 0),this.data=f}else this.data=u}k(U,ln);function J(){Hl.call(this),this.status=1}k(J,Hl);function be(u){this.g=u}k(be,_),be.prototype.ua=function(){gn(this.g,"a")},be.prototype.ta=function(u){gn(this.g,new U(u))},be.prototype.sa=function(u){gn(this.g,new J)},be.prototype.ra=function(){gn(this.g,"b")},D.prototype.createWebChannel=D.prototype.g,F.prototype.send=F.prototype.o,F.prototype.open=F.prototype.m,F.prototype.close=F.prototype.close,Ux=uo.createWebChannelTransport=function(){return new D},Lx=uo.getStatEventTarget=function(){return ql()},Vx=uo.Event=ur,x0=uo.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},tc.NO_ERROR=0,tc.TIMEOUT=8,tc.HTTP_ERROR=6,rg=uo.ErrorCode=tc,Gl.COMPLETE="complete",Fx=uo.EventType=Gl,So.EventType=Do,Do.OPEN="a",Do.CLOSE="b",Do.ERROR="c",Do.MESSAGE="d",cn.prototype.listen=cn.prototype.K,Ld=uo.WebChannel=So,AX=uo.FetchXmlHttpFactory=gt,rt.prototype.listenOnce=rt.prototype.L,rt.prototype.getLastError=rt.prototype.Ka,rt.prototype.getLastErrorCode=rt.prototype.Ba,rt.prototype.getStatus=rt.prototype.Z,rt.prototype.getResponseJson=rt.prototype.Oa,rt.prototype.getResponseText=rt.prototype.oa,rt.prototype.send=rt.prototype.ea,rt.prototype.setWithCredentials=rt.prototype.Ha,Ox=uo.XhrIo=rt}).apply(typeof D0<"u"?D0:typeof self<"u"?self:typeof window<"u"?window:{});var QU="@firebase/firestore",YU="4.8.0";var Sn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Sn.UNAUTHENTICATED=new Sn(null),Sn.GOOGLE_CREDENTIALS=new Sn("google-credentials-uid"),Sn.FIRST_PARTY=new Sn("first-party-uid"),Sn.MOCK_USER=new Sn("mock-user");var ih="11.10.0";var Tl=new ss("@firebase/firestore");function Ud(){return Tl.logLevel}function se(n,...e){if(Tl.logLevel<=$e.DEBUG){let t=e.map(A1);Tl.debug(`Firestore (${ih}): ${n}`,...t)}}function fo(n,...e){if(Tl.logLevel<=$e.ERROR){let t=e.map(A1);Tl.error(`Firestore (${ih}): ${n}`,...t)}}function Va(n,...e){if(Tl.logLevel<=$e.WARN){let t=e.map(A1);Tl.warn(`Firestore (${ih}): ${n}`,...t)}}function A1(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function we(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,$4(n,r,t)}function $4(n,e,t){let r=`FIRESTORE (${ih}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw fo(r),new Error(r)}function ft(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||$4(e,i,r)}function Re(n,e){return n}var H={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},ne=class extends Sr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Ai=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var O0=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Hx=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Sn.UNAUTHENTICATED))}shutdown(){}},qx=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},Gx=class{constructor(e){this.t=e,this.currentUser=Sn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ft(this.o===void 0,42304);let r=this.i,i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve(),s=new Ai;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Ai,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let c=s;e.enqueueRetryable(async()=>{await c.promise,await i(this.currentUser)})},a=c=>{se("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(se("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Ai)}},0),o()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(se("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ft(typeof r.accessToken=="string",31837,{l:r}),new O0(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return ft(e===null||typeof e=="string",2055,{h:e}),new Sn(e)}},Wx=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=Sn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},Kx=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new Wx(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(Sn.FIRST_PARTY))}shutdown(){}invalidateToken(){}},F0=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Qx=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,qr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){ft(this.o===void 0,3512);let r=s=>{s.error!=null&&se("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.m;return this.m=s.token,se("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{se("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.V.getImmediate({optional:!0});s?i(s):se("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new F0(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(ft(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new F0(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function RX(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}function z4(){return new TextEncoder}var lg=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=RX(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%62))}return r}};function Ue(n,e){return n<e?-1:n>e?1:0}function Yx(n,e){let t=0;for(;t<n.length&&t<e.length;){let r=n.codePointAt(t),i=e.codePointAt(t);if(r!==i){if(r<128&&i<128)return Ue(r,i);{let s=z4(),o=kX(s.encode(JU(n,t)),s.encode(JU(e,t)));return o!==0?o:Ue(r,i)}}t+=r>65535?2:1}return Ue(n.length,e.length)}function JU(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function kX(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return Ue(n[t],e[t]);return Ue(n.length,e.length)}function Gd(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var XU="__name__",V0=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&we(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&we(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let s=n.compareSegments(e.get(i),t.get(i));if(s!==0)return s}return Ue(e.length,t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):Yx(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return lo.fromString(e.substring(4,e.length-2))}},At=class n extends V0{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new ne(H.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},NX=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Rr=class n extends V0{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return NX.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===XU}static keyField(){return new n([XU])}static fromServerFormat(e){let t=[],r="",i=0,s=()=>{if(r.length===0)throw new ne(H.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},o=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new ne(H.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new ne(H.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new ne(H.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var pe=class n{constructor(e){this.path=e}static fromPath(e){return new n(At.fromString(e))}static fromName(e){return new n(At.fromString(e).popFirst(5))}static empty(){return new n(At.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&At.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return At.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new At(e.slice()))}};function H4(n,e,t){if(!t)throw new ne(H.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function PX(n,e,t,r){if(e===!0&&r===!0)throw new ne(H.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function ZU(n){if(!pe.isDocumentKey(n))throw new ne(H.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function e4(n){if(pe.isDocumentKey(n))throw new ne(H.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function q4(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function gw(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":we(12329,{type:typeof n})}function Yr(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ne(H.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=gw(n);throw new ne(H.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function nn(n,e){let t={typeString:n};return e&&(t.value=e),t}function Cg(n,e){if(!q4(n))throw new ne(H.INVALID_ARGUMENT,"JSON must be an object");let t;for(let r in e)if(e[r]){let i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}let o=n[r];if(i&&typeof o!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&o!==s.value){t=`Expected '${r}' field to equal '${s.value}'`;break}}if(t)throw new ne(H.INVALID_ARGUMENT,t);return!0}var t4=-62135596800,n4=1e6,rn=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*n4);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ne(H.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ne(H.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<t4)throw new ne(H.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ne(H.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/n4}_compareTo(e){return this.seconds===e.seconds?Ue(this.nanoseconds,e.nanoseconds):Ue(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:n._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Cg(e,n._jsonSchema))return new n(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-t4;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};rn._jsonSchemaVersion="firestore/timestamp/1.0",rn._jsonSchema={type:nn("string",rn._jsonSchemaVersion),seconds:nn("number"),nanoseconds:nn("number")};var Me=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new rn(0,0))}static max(){return new n(new rn(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var ug=-1,Jx=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};Jx.UNKNOWN_ID=-1;function MX(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Me.fromTimestamp(r===1e9?new rn(t+1,0):new rn(t,r));return new Sl(i,pe.empty(),e)}function OX(n){return new Sl(n.readTime,n.key,ug)}var Sl=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(Me.min(),pe.empty(),ug)}static max(){return new n(Me.max(),pe.empty(),ug)}};function FX(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=pe.comparator(n.documentKey,e.documentKey),t!==0?t:Ue(n.largestBatchId,e.largestBatchId))}var VX="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Xx=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};async function sh(n){if(n.code!==H.FAILED_PRECONDITION||n.message!==VX)throw n;se("LocalStore","Unexpectedly lost primary lease")}var W=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&we(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&t()},c=>r(c))}),o=!0,s===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let s=e.length,o=new Array(s),a=0;for(let c=0;c<s;c++){let l=c;t(e[l]).next(h=>{o[l]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,t){return new n((r,i)=>{let s=()=>{e()===!0?t().next(()=>{s()},i):r()};s()})}};function LX(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function oh(n){return n.name==="IndexedDbTransactionError"}var R1=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this._e(i),this.ae=i=>r.writeSequenceNumber(i))}_e(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.ae&&this.ae(t),t}}n.ue=-1;return n})(),k1=-1;function mw(n){return n==null}function dg(n){return n===0&&1/n==-1/0}function UX(n){return typeof n=="number"&&Number.isInteger(n)&&!dg(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var G4="";function jX(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=r4(e)),e=BX(n.get(t),e);return r4(e)}function BX(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let s=n.charAt(i);switch(s){case"\0":t+="";break;case G4:t+="";break;default:t+=s}}return t}function r4(n){return n+G4+""}var $X="remoteDocuments",W4="owner";var K4="mutationQueues";var Q4="mutations";var Y4="documentMutations",zX="remoteDocumentsV14";var J4="remoteDocumentGlobal";var X4="targets";var Z4="targetDocuments";var ej="targetGlobal",tj="collectionParents";var nj="clientMetadata";var rj="bundles";var ij="namedQueries";var HX="indexConfiguration";var qX="indexState";var GX="indexEntries";var sj="documentOverlays";var WX="globals";var KX=[K4,Q4,Y4,$X,X4,W4,ej,Z4,nj,J4,tj,rj,ij],Obe=[...KX,sj],QX=[K4,Q4,Y4,zX,X4,W4,ej,Z4,nj,J4,tj,rj,ij,sj],YX=QX,JX=[...YX,HX,qX,GX];var Fbe=[...JX,WX];function i4(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function za(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function oj(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Lt=class n{constructor(e,t){this.comparator=e,this.root=t||fs.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,fs.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,fs.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new zd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new zd(this.root,e,this.comparator,!1)}getReverseIterator(){return new zd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new zd(this.root,e,this.comparator,!0)}},zd=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},fs=class n{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=s??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new n(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw we(43730,{key:this.key,value:this.value});if(this.right.isRed())throw we(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw we(27949);return e+(this.isRed()?0:1)}};fs.EMPTY=null,fs.RED=!0,fs.BLACK=!1;fs.EMPTY=new class{constructor(){this.size=0}get key(){throw we(57766)}get value(){throw we(16141)}get color(){throw we(16727)}get left(){throw we(29726)}get right(){throw we(36894)}copy(e,t,r,i,s){return this}insert(e,t,r){return new fs(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Dn=class n{constructor(e){this.comparator=e,this.data=new Lt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new L0(this.data.getIterator())}getIteratorFrom(e){return new L0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},L0=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Qr=class n{constructor(e){this.fields=e,e.sort(Rr.comparator)}static empty(){return new n([])}unionWith(e){let t=new Dn(Rr.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Gd(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var U0=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var zn=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=(function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new U0("Invalid base64 string: "+s):s}})(e);return new n(t)}static fromUint8Array(e){let t=(function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s})(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ue(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};zn.EMPTY_BYTE_STRING=new zn("");var XX=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function po(n){if(ft(!!n,39018),typeof n=="string"){let e=0,t=XX.exec(n);if(ft(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:xt(n.seconds),nanos:xt(n.nanos)}}function xt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function go(n){return typeof n=="string"?zn.fromBase64String(n):zn.fromUint8Array(n)}var aj="server_timestamp",cj="__type__",lj="__previous_value__",uj="__local_write_time__";function N1(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[cj])===null||t===void 0?void 0:t.stringValue)===aj}function yw(n){let e=n.mapValue.fields[lj];return N1(e)?yw(e):e}function hg(n){let e=po(n.mapValue.fields[uj].timestampValue);return new rn(e.seconds,e.nanos)}var Zx=class{constructor(e,t,r,i,s,o,a,c,l,h){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=l,this.isUsingEmulator=h}},j0="(default)",B0=class n{constructor(e,t){this.projectId=e,this.database=t||j0}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===j0}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var P1="__type__",dj="__max__",A0={mapValue:{fields:{__type__:{stringValue:dj}}}},M1="__vector__",Wd="value";function La(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?N1(n)?4:fj(n)?9007199254740991:hj(n)?10:11:we(28295,{value:n})}function ms(n,e){if(n===e)return!0;let t=La(n);if(t!==La(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return hg(n).isEqual(hg(e));case 3:return(function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=po(i.timestampValue),a=po(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(i,s){return go(i.bytesValue).isEqual(go(s.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(i,s){return xt(i.geoPointValue.latitude)===xt(s.geoPointValue.latitude)&&xt(i.geoPointValue.longitude)===xt(s.geoPointValue.longitude)})(n,e);case 2:return(function(i,s){if("integerValue"in i&&"integerValue"in s)return xt(i.integerValue)===xt(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=xt(i.doubleValue),a=xt(s.doubleValue);return o===a?dg(o)===dg(a):isNaN(o)&&isNaN(a)}return!1})(n,e);case 9:return Gd(n.arrayValue.values||[],e.arrayValue.values||[],ms);case 10:case 11:return(function(i,s){let o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(i4(o)!==i4(a))return!1;for(let c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!ms(o[c],a[c])))return!1;return!0})(n,e);default:return we(52216,{left:n})}}function fg(n,e){return(n.values||[]).find(t=>ms(t,e))!==void 0}function Kd(n,e){if(n===e)return 0;let t=La(n),r=La(e);if(t!==r)return Ue(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ue(n.booleanValue,e.booleanValue);case 2:return(function(s,o){let a=xt(s.integerValue||s.doubleValue),c=xt(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1})(n,e);case 3:return s4(n.timestampValue,e.timestampValue);case 4:return s4(hg(n),hg(e));case 5:return Yx(n.stringValue,e.stringValue);case 6:return(function(s,o){let a=go(s),c=go(o);return a.compareTo(c)})(n.bytesValue,e.bytesValue);case 7:return(function(s,o){let a=s.split("/"),c=o.split("/");for(let l=0;l<a.length&&l<c.length;l++){let h=Ue(a[l],c[l]);if(h!==0)return h}return Ue(a.length,c.length)})(n.referenceValue,e.referenceValue);case 8:return(function(s,o){let a=Ue(xt(s.latitude),xt(o.latitude));return a!==0?a:Ue(xt(s.longitude),xt(o.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return o4(n.arrayValue,e.arrayValue);case 10:return(function(s,o){var a,c,l,h;let p=s.fields||{},m=o.fields||{},b=(a=p[Wd])===null||a===void 0?void 0:a.arrayValue,k=(c=m[Wd])===null||c===void 0?void 0:c.arrayValue,O=Ue(((l=b?.values)===null||l===void 0?void 0:l.length)||0,((h=k?.values)===null||h===void 0?void 0:h.length)||0);return O!==0?O:o4(b,k)})(n.mapValue,e.mapValue);case 11:return(function(s,o){if(s===A0.mapValue&&o===A0.mapValue)return 0;if(s===A0.mapValue)return 1;if(o===A0.mapValue)return-1;let a=s.fields||{},c=Object.keys(a),l=o.fields||{},h=Object.keys(l);c.sort(),h.sort();for(let p=0;p<c.length&&p<h.length;++p){let m=Yx(c[p],h[p]);if(m!==0)return m;let b=Kd(a[c[p]],l[h[p]]);if(b!==0)return b}return Ue(c.length,h.length)})(n.mapValue,e.mapValue);default:throw we(23264,{le:t})}}function s4(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Ue(n,e);let t=po(n),r=po(e),i=Ue(t.seconds,r.seconds);return i!==0?i:Ue(t.nanos,r.nanos)}function o4(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let s=Kd(t[i],r[i]);if(s)return s}return Ue(t.length,r.length)}function Qd(n){return eA(n)}function eA(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){let r=po(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return go(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return pe.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",i=!0;for(let s of t.values||[])i?i=!1:r+=",",r+=eA(s);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){let r=Object.keys(t.fields||{}).sort(),i="{",s=!0;for(let o of r)s?s=!1:i+=",",i+=`${o}:${eA(t.fields[o])}`;return i+"}"})(n.mapValue):we(61005,{value:n})}function N0(n){switch(La(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=yw(n);return e?16+N0(e):16;case 5:return 2*n.stringValue.length;case 6:return go(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce((i,s)=>i+N0(s),0)})(n.arrayValue);case 10:case 11:return(function(r){let i=0;return za(r.fields,(s,o)=>{i+=s.length+N0(o)}),i})(n.mapValue);default:throw we(13486,{value:n})}}function a4(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function tA(n){return!!n&&"integerValue"in n}function O1(n){return!!n&&"arrayValue"in n}function c4(n){return!!n&&"nullValue"in n}function l4(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function P0(n){return!!n&&"mapValue"in n}function hj(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[P1])===null||t===void 0?void 0:t.stringValue)===M1}function sg(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return za(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=sg(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=sg(n.arrayValue.values[t]);return e}return Object.assign({},n)}function fj(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===dj}var Lbe={mapValue:{fields:{[P1]:{stringValue:M1},[Wd]:{arrayValue:{}}}}};var Ar=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!P0(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=sg(t)}setAll(e){let t=Rr.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){let c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=a.popLast()}o?r[a.lastSegment()]=sg(o):i.push(a.lastSegment())});let s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){let t=this.field(e.popLast());P0(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ms(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];P0(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){za(t,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new n(sg(this.value))}};function pj(n){let e=[];return za(n.fields,(t,r)=>{let i=new Rr([t]);if(P0(r)){let s=pj(r.mapValue).fields;if(s.length===0)e.push(i);else for(let o of s)e.push(i.child(o))}else e.push(i)}),new Qr(e)}var Ri=class n{constructor(e,t,r,i,s,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new n(e,0,Me.min(),Me.min(),Me.min(),Ar.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,Me.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,Me.min(),Me.min(),Ar.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,Me.min(),Me.min(),Ar.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Me.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ar.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ar.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Me.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Yd=class{constructor(e,t){this.position=e,this.inclusive=t}};function u4(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let s=e[i],o=n.position[i];if(s.field.isKeyField()?r=pe.comparator(pe.fromName(o.referenceValue),t.key):r=Kd(o,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function d4(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ms(n.position[t],e.position[t]))return!1;return!0}var Dl=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function ZX(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var $0=class{},tn=class n extends $0{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new rA(e,t,r):t==="array-contains"?new oA(e,r):t==="in"?new aA(e,r):t==="not-in"?new cA(e,r):t==="array-contains-any"?new lA(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new iA(e,r):new sA(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Kd(t,this.value)):t!==null&&La(this.value)===La(t)&&this.matchesComparison(Kd(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return we(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},ki=class n extends $0{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new n(e,t)}matches(e){return gj(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}};function gj(n){return n.op==="and"}function mj(n){return eZ(n)&&gj(n)}function eZ(n){for(let e of n.filters)if(e instanceof ki)return!1;return!0}function nA(n){if(n instanceof tn)return n.field.canonicalString()+n.op.toString()+Qd(n.value);if(mj(n))return n.filters.map(e=>nA(e)).join(",");{let e=n.filters.map(t=>nA(t)).join(",");return`${n.op}(${e})`}}function yj(n,e){return n instanceof tn?(function(r,i){return i instanceof tn&&r.op===i.op&&r.field.isEqual(i.field)&&ms(r.value,i.value)})(n,e):n instanceof ki?(function(r,i){return i instanceof ki&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&yj(o,i.filters[a]),!0):!1})(n,e):void we(19439)}function _j(n){return n instanceof tn?(function(t){return`${t.field.canonicalString()} ${t.op} ${Qd(t.value)}`})(n):n instanceof ki?(function(t){return t.op.toString()+" {"+t.getFilters().map(_j).join(" ,")+"}"})(n):"Filter"}var rA=class extends tn{constructor(e,t,r){super(e,t,r),this.key=pe.fromName(r.referenceValue)}matches(e){let t=pe.comparator(e.key,this.key);return this.matchesComparison(t)}},iA=class extends tn{constructor(e,t){super(e,"in",t),this.keys=vj("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},sA=class extends tn{constructor(e,t){super(e,"not-in",t),this.keys=vj("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function vj(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>pe.fromName(r.referenceValue))}var oA=class extends tn{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return O1(t)&&fg(t.arrayValue,this.value)}},aA=class extends tn{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&fg(this.value.arrayValue,t)}},cA=class extends tn{constructor(e,t){super(e,"not-in",t)}matches(e){if(fg(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!fg(this.value.arrayValue,t)}},lA=class extends tn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!O1(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>fg(this.value.arrayValue,r))}};var uA=class{constructor(e,t=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.Pe=null}};function h4(n,e=null,t=[],r=[],i=null,s=null,o=null){return new uA(n,e,t,r,i,s,o)}function F1(n){let e=Re(n);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>nA(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>(function(s){return s.field.canonicalString()+s.dir})(r)).join(","),mw(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Qd(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Qd(r)).join(",")),e.Pe=t}return e.Pe}function V1(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!ZX(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!yj(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!d4(n.startAt,e.startAt)&&d4(n.endAt,e.endAt)}function dA(n){return pe.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var Ua=class{constructor(e,t=null,r=[],i=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}};function tZ(n,e,t,r,i,s,o,a){return new Ua(n,e,t,r,i,s,o,a)}function _w(n){return new Ua(n)}function f4(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function wj(n){return n.collectionGroup!==null}function og(n){let e=Re(n);if(e.Te===null){e.Te=[];let t=new Set;for(let s of e.explicitOrderBy)e.Te.push(s),t.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Dn(Rr.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.Te.push(new Dl(s,r))}),t.has(Rr.keyField().canonicalString())||e.Te.push(new Dl(Rr.keyField(),r))}return e.Te}function ps(n){let e=Re(n);return e.Ie||(e.Ie=nZ(e,og(n))),e.Ie}function nZ(n,e){if(n.limitType==="F")return h4(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new Dl(i.field,s)});let t=n.endAt?new Yd(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Yd(n.startAt.position,n.startAt.inclusive):null;return h4(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function hA(n,e){let t=n.filters.concat([e]);return new Ua(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function fA(n,e,t){return new Ua(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function vw(n,e){return V1(ps(n),ps(e))&&n.limitType===e.limitType}function Ij(n){return`${F1(ps(n))}|lt:${n.limitType}`}function jd(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>_j(i)).join(", ")}]`),mw(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>(function(o){return`${o.field.canonicalString()} (${o.dir})`})(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Qd(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Qd(i)).join(",")),`Target(${r})`})(ps(n))}; limitType=${n.limitType})`}function ww(n,e){return e.isFoundDocument()&&(function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):pe.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)})(n,e)&&(function(r,i){for(let s of og(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0})(n,e)&&(function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0})(n,e)&&(function(r,i){return!(r.startAt&&!(function(o,a,c){let l=u4(o,a,c);return o.inclusive?l<=0:l<0})(r.startAt,og(r),i)||r.endAt&&!(function(o,a,c){let l=u4(o,a,c);return o.inclusive?l>=0:l>0})(r.endAt,og(r),i))})(n,e)}function rZ(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function bj(n){return(e,t)=>{let r=!1;for(let i of og(n)){let s=iZ(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function iZ(n,e,t){let r=n.field.isKeyField()?pe.comparator(e.key,t.key):(function(s,o,a){let c=o.data.field(s),l=a.data.field(s);return c!==null&&l!==null?Kd(c,l):we(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return we(19790,{direction:n.dir})}}var mo=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){za(this.inner,(t,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return oj(this.inner)}size(){return this.innerSize}};var sZ=new Lt(pe.comparator);function yo(){return sZ}var Cj=new Lt(pe.comparator);function ig(...n){let e=Cj;for(let t of n)e=e.insert(t.key,t);return e}function Ej(n){let e=Cj;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function wl(){return ag()}function Tj(){return ag()}function ag(){return new mo(n=>n.toString(),(n,e)=>n.isEqual(e))}var oZ=new Lt(pe.comparator),aZ=new Dn(pe.comparator);function Ge(...n){let e=aZ;for(let t of n)e=e.add(t);return e}var cZ=new Dn(Ue);function lZ(){return cZ}function L1(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:dg(e)?"-0":e}}function Sj(n){return{integerValue:""+n}}function uZ(n,e){return UX(e)?Sj(e):L1(n,e)}var Jd=class{constructor(){this._=void 0}};function dZ(n,e,t){return n instanceof xl?(function(i,s){let o={fields:{[cj]:{stringValue:aj},[uj]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&N1(s)&&(s=yw(s)),s&&(o.fields[lj]=s),{mapValue:o}})(t,e):n instanceof Al?xj(n,e):n instanceof Rl?Aj(n,e):(function(i,s){let o=Dj(i,s),a=p4(o)+p4(i.Ee);return tA(o)&&tA(i.Ee)?Sj(a):L1(i.serializer,a)})(n,e)}function hZ(n,e,t){return n instanceof Al?xj(n,e):n instanceof Rl?Aj(n,e):t}function Dj(n,e){return n instanceof Xd?(function(r){return tA(r)||(function(s){return!!s&&"doubleValue"in s})(r)})(e)?e:{integerValue:0}:null}var xl=class extends Jd{},Al=class extends Jd{constructor(e){super(),this.elements=e}};function xj(n,e){let t=Rj(e);for(let r of n.elements)t.some(i=>ms(i,r))||t.push(r);return{arrayValue:{values:t}}}var Rl=class extends Jd{constructor(e){super(),this.elements=e}};function Aj(n,e){let t=Rj(e);for(let r of n.elements)t=t.filter(i=>!ms(i,r));return{arrayValue:{values:t}}}var Xd=class extends Jd{constructor(e,t){super(),this.serializer=e,this.Ee=t}};function p4(n){return xt(n.integerValue||n.doubleValue)}function Rj(n){return O1(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}var pA=class{constructor(e,t){this.field=e,this.transform=t}};function fZ(n,e){return n.field.isEqual(e.field)&&(function(r,i){return r instanceof Al&&i instanceof Al||r instanceof Rl&&i instanceof Rl?Gd(r.elements,i.elements,ms):r instanceof Xd&&i instanceof Xd?ms(r.Ee,i.Ee):r instanceof xl&&i instanceof xl})(n.transform,e.transform)}var gA=class{constructor(e,t){this.version=e,this.transformResults=t}},ho=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function M0(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var Zd=class{};function kj(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new pg(n.key,ho.none()):new kl(n.key,n.data,ho.none());{let t=n.data,r=Ar.empty(),i=new Dn(Rr.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new ys(n.key,r,new Qr(i.toArray()),ho.none())}}function pZ(n,e,t){n instanceof kl?(function(i,s,o){let a=i.value.clone(),c=m4(i.fieldTransforms,s,o.transformResults);a.setAll(c),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()})(n,e,t):n instanceof ys?(function(i,s,o){if(!M0(i.precondition,s))return void s.convertToUnknownDocument(o.version);let a=m4(i.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(Nj(i)),c.setAll(a),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()})(n,e,t):(function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()})(0,e,t)}function cg(n,e,t,r){return n instanceof kl?(function(s,o,a,c){if(!M0(s.precondition,o))return a;let l=s.value.clone(),h=y4(s.fieldTransforms,c,o);return l.setAll(h),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null})(n,e,t,r):n instanceof ys?(function(s,o,a,c){if(!M0(s.precondition,o))return a;let l=y4(s.fieldTransforms,c,o),h=o.data;return h.setAll(Nj(s)),h.setAll(l),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(p=>p.field))})(n,e,t,r):(function(s,o,a){return M0(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a})(n,e,t)}function gZ(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),s=Dj(r.transform,i||null);s!=null&&(t===null&&(t=Ar.empty()),t.set(r.field,s))}return t||null}function g4(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Gd(r,i,(s,o)=>fZ(s,o))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var kl=class extends Zd{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},ys=class extends Zd{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function Nj(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function m4(n,e,t){let r=new Map;ft(n.length===t.length,32656,{Ae:t.length,Re:n.length});for(let i=0;i<t.length;i++){let s=n[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,hZ(o,a,t[i]))}return r}function y4(n,e,t){let r=new Map;for(let i of n){let s=i.transform,o=t.data.field(i.field);r.set(i.field,dZ(s,o,e))}return r}var pg=class extends Zd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},mA=class extends Zd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var yA=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&pZ(s,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=cg(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=cg(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=Tj();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=t.has(i.key)?null:a;let c=kj(o,a);c!==null&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(Me.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Ge())}isEqual(e){return this.batchId===e.batchId&&Gd(this.mutations,e.mutations,(t,r)=>g4(t,r))&&Gd(this.baseMutations,e.baseMutations,(t,r)=>g4(t,r))}},_A=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){ft(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let i=(function(){return oZ})(),s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new n(e,t,r,i)}};var vA=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var wA=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var Zt,Ye;function mZ(n){switch(n){case H.OK:return we(64938);case H.CANCELLED:case H.UNKNOWN:case H.DEADLINE_EXCEEDED:case H.RESOURCE_EXHAUSTED:case H.INTERNAL:case H.UNAVAILABLE:case H.UNAUTHENTICATED:return!1;case H.INVALID_ARGUMENT:case H.NOT_FOUND:case H.ALREADY_EXISTS:case H.PERMISSION_DENIED:case H.FAILED_PRECONDITION:case H.ABORTED:case H.OUT_OF_RANGE:case H.UNIMPLEMENTED:case H.DATA_LOSS:return!0;default:return we(15467,{code:n})}}function Pj(n){if(n===void 0)return fo("GRPC error has no .code"),H.UNKNOWN;switch(n){case Zt.OK:return H.OK;case Zt.CANCELLED:return H.CANCELLED;case Zt.UNKNOWN:return H.UNKNOWN;case Zt.DEADLINE_EXCEEDED:return H.DEADLINE_EXCEEDED;case Zt.RESOURCE_EXHAUSTED:return H.RESOURCE_EXHAUSTED;case Zt.INTERNAL:return H.INTERNAL;case Zt.UNAVAILABLE:return H.UNAVAILABLE;case Zt.UNAUTHENTICATED:return H.UNAUTHENTICATED;case Zt.INVALID_ARGUMENT:return H.INVALID_ARGUMENT;case Zt.NOT_FOUND:return H.NOT_FOUND;case Zt.ALREADY_EXISTS:return H.ALREADY_EXISTS;case Zt.PERMISSION_DENIED:return H.PERMISSION_DENIED;case Zt.FAILED_PRECONDITION:return H.FAILED_PRECONDITION;case Zt.ABORTED:return H.ABORTED;case Zt.OUT_OF_RANGE:return H.OUT_OF_RANGE;case Zt.UNIMPLEMENTED:return H.UNIMPLEMENTED;case Zt.DATA_LOSS:return H.DATA_LOSS;default:return we(39323,{code:n})}}(Ye=Zt||(Zt={}))[Ye.OK=0]="OK",Ye[Ye.CANCELLED=1]="CANCELLED",Ye[Ye.UNKNOWN=2]="UNKNOWN",Ye[Ye.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ye[Ye.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ye[Ye.NOT_FOUND=5]="NOT_FOUND",Ye[Ye.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ye[Ye.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ye[Ye.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ye[Ye.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ye[Ye.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ye[Ye.ABORTED=10]="ABORTED",Ye[Ye.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ye[Ye.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ye[Ye.INTERNAL=13]="INTERNAL",Ye[Ye.UNAVAILABLE=14]="UNAVAILABLE",Ye[Ye.DATA_LOSS=15]="DATA_LOSS";var _4=null;var yZ=new lo([4294967295,4294967295],0);function v4(n){let e=z4().encode(n),t=new Mx;return t.update(e),new Uint8Array(t.digest())}function w4(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new lo([t,r],0),new lo([i,s],0)]}var IA=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Il(`Invalid padding: ${t}`);if(r<0)throw new Il(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Il(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Il(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=lo.fromNumber(this.fe)}pe(e,t,r){let i=e.add(t.multiply(lo.fromNumber(r)));return i.compare(yZ)===1&&(i=new lo([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;let t=v4(e),[r,i]=w4(t);for(let s=0;s<this.hashCount;s++){let o=this.pe(r,i,s);if(!this.ye(o))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new n(s,i,t);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.fe===0)return;let t=v4(e),[r,i]=w4(t);for(let s=0;s<this.hashCount;s++){let o=this.pe(r,i,s);this.we(o)}}we(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},Il=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var z0=class n{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,gg.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(Me.min(),i,new Lt(Ue),yo(),Ge())}},gg=class n{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,Ge(),Ge(),Ge())}};var Hd=class{constructor(e,t,r,i){this.Se=e,this.removedTargetIds=t,this.key=r,this.be=i}},H0=class{constructor(e,t){this.targetId=e,this.De=t}},q0=class{constructor(e,t,r=zn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},G0=class{constructor(){this.ve=0,this.Ce=I4(),this.Fe=zn.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=Ge(),t=Ge(),r=Ge();return this.Ce.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:we(38017,{changeType:s})}}),new gg(this.Fe,this.Me,e,t,r)}ke(){this.xe=!1,this.Ce=I4()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,ft(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}},bA=class{constructor(e){this.We=e,this.Ge=new Map,this.ze=yo(),this.je=R0(),this.Je=R0(),this.He=new Lt(Ue)}Ye(e){for(let t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(let t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,t=>{let r=this.tt(t);switch(e.state){case 0:this.nt(t)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),r.Be(e.resumeToken));break;default:we(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach((r,i)=>{this.nt(i)&&t(i)})}it(e){let t=e.targetId,r=e.De.count,i=this.st(t);if(i){let s=i.target;if(dA(s))if(r===0){let o=new pe(s.path);this.Xe(t,o,Ri.newNoDocument(o,Me.min()))}else ft(r===1,20013,{expectedCount:r});else{let o=this.ot(t);if(o!==r){let a=this._t(e),c=a?this.ut(a,e,o):1;if(c!==0){this.rt(t);let l=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,l)}_4?.ct((function(h,p,m,b,k){var O,N,z,Q,Z,Ce;let Je={localCacheCount:h,existenceFilterCount:p.count,databaseId:m.database,projectId:m.projectId},Ie=p.unchangedNames;return Ie&&(Je.bloomFilter={applied:k===0,hashCount:(O=Ie?.hashCount)!==null&&O!==void 0?O:0,bitmapLength:(Q=(z=(N=Ie?.bits)===null||N===void 0?void 0:N.bitmap)===null||z===void 0?void 0:z.length)!==null&&Q!==void 0?Q:0,padding:(Ce=(Z=Ie?.bits)===null||Z===void 0?void 0:Z.padding)!==null&&Ce!==void 0?Ce:0,mightContain:T=>{var v;return(v=b?.mightContain(T))!==null&&v!==void 0&&v}}),Je})(o,e.De,this.We.lt(),a,c))}}}}_t(e){let t=e.De.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t,o,a;try{o=go(r).toUint8Array()}catch(c){if(c instanceof U0)return Va("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new IA(o,i,s)}catch(c){return Va(c instanceof Il?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.fe===0?null:a}ut(e,t,r){return t.De.count===r-this.ht(e,t.targetId)?0:2}ht(e,t){let r=this.We.getRemoteKeysForTarget(t),i=0;return r.forEach(s=>{let o=this.We.lt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Xe(t,s,null),i++)}),i}Pt(e){let t=new Map;this.Ge.forEach((s,o)=>{let a=this.st(o);if(a){if(s.current&&dA(a.target)){let c=new pe(a.target.path);this.Tt(c).has(o)||this.It(o,c)||this.Xe(o,c,Ri.newNoDocument(c,e))}s.Ne&&(t.set(o,s.Le()),s.ke())}});let r=Ge();this.Je.forEach((s,o)=>{let a=!0;o.forEachWhile(c=>{let l=this.st(c);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ze.forEach((s,o)=>o.setReadTime(e));let i=new z0(e,t,this.He,this.ze,r);return this.ze=yo(),this.je=R0(),this.Je=R0(),this.He=new Lt(Ue),i}Ze(e,t){if(!this.nt(e))return;let r=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,r),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,r){if(!this.nt(e))return;let i=this.tt(e);this.It(e,t)?i.qe(t,1):i.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),r&&(this.ze=this.ze.insert(t,r))}removeTarget(e){this.Ge.delete(e)}ot(e){let t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new G0,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new Dn(Ue),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new Dn(Ue),this.je=this.je.insert(e,t)),t}nt(e){let t=this.st(e)!==null;return t||se("WatchChangeAggregator","Detected inactive target",e),t}st(e){let t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new G0),this.We.getRemoteKeysForTarget(e).forEach(t=>{this.Xe(e,t,null)})}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}};function R0(){return new Lt(pe.comparator)}function I4(){return new Lt(pe.comparator)}var _Z={asc:"ASCENDING",desc:"DESCENDING"},vZ={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},wZ={and:"AND",or:"OR"},CA=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function EA(n,e){return n.useProto3Json||mw(e)?e:{value:e}}function W0(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Mj(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function IZ(n,e){return W0(n,e.toTimestamp())}function gs(n){return ft(!!n,49232),Me.fromTimestamp((function(t){let r=po(t);return new rn(r.seconds,r.nanos)})(n))}function U1(n,e){return TA(n,e).canonicalString()}function TA(n,e){let t=(function(i){return new At(["projects",i.projectId,"databases",i.database])})(n).child("documents");return e===void 0?t:t.child(e)}function Oj(n){let e=At.fromString(n);return ft(jj(e),10190,{key:e.toString()}),e}function SA(n,e){return U1(n.databaseId,e.path)}function jx(n,e){let t=Oj(e);if(t.get(1)!==n.databaseId.projectId)throw new ne(H.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ne(H.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new pe(Vj(t))}function Fj(n,e){return U1(n.databaseId,e)}function bZ(n){let e=Oj(n);return e.length===4?At.emptyPath():Vj(e)}function DA(n){return new At(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Vj(n){return ft(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function b4(n,e,t){return{name:SA(n,e),fields:t.value.mapValue.fields}}function CZ(n,e){let t;if("targetChange"in e){e.targetChange;let r=(function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:we(39313,{state:l})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=(function(l,h){return l.useProto3Json?(ft(h===void 0||typeof h=="string",58123),zn.fromBase64String(h||"")):(ft(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),zn.fromUint8Array(h||new Uint8Array))})(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&(function(l){let h=l.code===void 0?H.UNKNOWN:Pj(l.code);return new ne(h,l.message||"")})(o);t=new q0(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=jx(n,r.document.name),s=gs(r.document.updateTime),o=r.document.createTime?gs(r.document.createTime):Me.min(),a=new Ar({mapValue:{fields:r.document.fields}}),c=Ri.newFoundDocument(i,s,o,a),l=r.targetIds||[],h=r.removedTargetIds||[];t=new Hd(l,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=jx(n,r.document),s=r.readTime?gs(r.readTime):Me.min(),o=Ri.newNoDocument(i,s),a=r.removedTargetIds||[];t=new Hd([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=jx(n,r.document),s=r.removedTargetIds||[];t=new Hd([],s,i,null)}else{if(!("filter"in e))return we(11601,{At:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,o=new wA(i,s),a=r.targetId;t=new H0(a,o)}}return t}function EZ(n,e){let t;if(e instanceof kl)t={update:b4(n,e.key,e.value)};else if(e instanceof pg)t={delete:SA(n,e.key)};else if(e instanceof ys)t={update:b4(n,e.key,e.data),updateMask:PZ(e.fieldMask)};else{if(!(e instanceof mA))return we(16599,{Rt:e.type});t={verify:SA(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>(function(s,o){let a=o.transform;if(a instanceof xl)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Al)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Rl)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Xd)return{fieldPath:o.field.canonicalString(),increment:a.Ee};throw we(20930,{transform:o.transform})})(0,r))),e.precondition.isNone||(t.currentDocument=(function(i,s){return s.updateTime!==void 0?{updateTime:IZ(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:we(27497)})(n,e.precondition)),t}function TZ(n,e){return n&&n.length>0?(ft(e!==void 0,14353),n.map(t=>(function(i,s){let o=i.updateTime?gs(i.updateTime):gs(s);return o.isEqual(Me.min())&&(o=gs(s)),new gA(o,i.transformResults||[])})(t,e))):[]}function SZ(n,e){return{documents:[Fj(n,e.path)]}}function DZ(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=Fj(n,i);let s=(function(l){if(l.length!==0)return Uj(ki.create(l,"and"))})(e.filters);s&&(t.structuredQuery.where=s);let o=(function(l){if(l.length!==0)return l.map(h=>(function(m){return{field:Bd(m.field),direction:RZ(m.dir)}})(h))})(e.orderBy);o&&(t.structuredQuery.orderBy=o);let a=EA(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=(function(l){return{before:l.inclusive,values:l.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(l){return{before:!l.inclusive,values:l.position}})(e.endAt)),{Vt:t,parent:i}}function xZ(n){let e=bZ(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){ft(r===1,65062);let h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];t.where&&(s=(function(p){let m=Lj(p);return m instanceof ki&&mj(m)?m.getFilters():[m]})(t.where));let o=[];t.orderBy&&(o=(function(p){return p.map(m=>(function(k){return new Dl($d(k.field),(function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(k.direction))})(m))})(t.orderBy));let a=null;t.limit&&(a=(function(p){let m;return m=typeof p=="object"?p.value:p,mw(m)?null:m})(t.limit));let c=null;t.startAt&&(c=(function(p){let m=!!p.before,b=p.values||[];return new Yd(b,m)})(t.startAt));let l=null;return t.endAt&&(l=(function(p){let m=!p.before,b=p.values||[];return new Yd(b,m)})(t.endAt)),tZ(e,i,o,s,a,"F",c,l)}function AZ(n,e){let t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return we(28987,{purpose:i})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Lj(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=$d(t.unaryFilter.field);return tn.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=$d(t.unaryFilter.field);return tn.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=$d(t.unaryFilter.field);return tn.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=$d(t.unaryFilter.field);return tn.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return we(61313);default:return we(60726)}})(n):n.fieldFilter!==void 0?(function(t){return tn.create($d(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return we(58110);default:return we(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return ki.create(t.compositeFilter.filters.map(r=>Lj(r)),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return we(1026)}})(t.compositeFilter.op))})(n):we(30097,{filter:n})}function RZ(n){return _Z[n]}function kZ(n){return vZ[n]}function NZ(n){return wZ[n]}function Bd(n){return{fieldPath:n.canonicalString()}}function $d(n){return Rr.fromServerFormat(n.fieldPath)}function Uj(n){return n instanceof tn?(function(t){if(t.op==="=="){if(l4(t.value))return{unaryFilter:{field:Bd(t.field),op:"IS_NAN"}};if(c4(t.value))return{unaryFilter:{field:Bd(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(l4(t.value))return{unaryFilter:{field:Bd(t.field),op:"IS_NOT_NAN"}};if(c4(t.value))return{unaryFilter:{field:Bd(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Bd(t.field),op:kZ(t.op),value:t.value}}})(n):n instanceof ki?(function(t){let r=t.getFilters().map(i=>Uj(i));return r.length===1?r[0]:{compositeFilter:{op:NZ(t.op),filters:r}}})(n):we(54877,{filter:n})}function PZ(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function jj(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var mg=class n{constructor(e,t,r,i,s=Me.min(),o=Me.min(),a=zn.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var xA=class{constructor(e){this.gt=e}};function MZ(n){let e=xZ({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?fA(e,e.limit,"L"):e}var K0=class{constructor(){}bt(e,t){this.Dt(e,t),t.vt()}Dt(e,t){if("nullValue"in e)this.Ct(t,5);else if("booleanValue"in e)this.Ct(t,10),t.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(t,15),t.Ft(xt(e.integerValue));else if("doubleValue"in e){let r=xt(e.doubleValue);isNaN(r)?this.Ct(t,13):(this.Ct(t,15),dg(r)?t.Ft(0):t.Ft(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ct(t,20),typeof r=="string"&&(r=po(r)),t.Mt(`${r.seconds||""}`),t.Ft(r.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,t),this.Ot(t);else if("bytesValue"in e)this.Ct(t,30),t.Nt(go(e.bytesValue)),this.Ot(t);else if("referenceValue"in e)this.Bt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ct(t,45),t.Ft(r.latitude||0),t.Ft(r.longitude||0)}else"mapValue"in e?fj(e)?this.Ct(t,Number.MAX_SAFE_INTEGER):hj(e)?this.Lt(e.mapValue,t):(this.kt(e.mapValue,t),this.Ot(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Ot(t)):we(19022,{Qt:e})}xt(e,t){this.Ct(t,25),this.$t(e,t)}$t(e,t){t.Mt(e)}kt(e,t){let r=e.fields||{};this.Ct(t,55);for(let i of Object.keys(r))this.xt(i,t),this.Dt(r[i],t)}Lt(e,t){var r,i;let s=e.fields||{};this.Ct(t,53);let o=Wd,a=((i=(r=s[o].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.Ct(t,15),t.Ft(xt(a)),this.xt(o,t),this.Dt(s[o],t)}qt(e,t){let r=e.values||[];this.Ct(t,50);for(let i of r)this.Dt(i,t)}Bt(e,t){this.Ct(t,37),pe.fromName(e).path.forEach(r=>{this.Ct(t,60),this.$t(r,t)})}Ct(e,t){e.Ft(t)}Ot(e){e.Ft(2)}};K0.Ut=new K0;var AA=class{constructor(){this.Dn=new RA}addToCollectionParentIndex(e,t){return this.Dn.add(t),W.resolve()}getCollectionParents(e,t){return W.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return W.resolve()}deleteFieldIndex(e,t){return W.resolve()}deleteAllFieldIndexes(e){return W.resolve()}createTargetIndexes(e,t){return W.resolve()}getDocumentsMatchingTarget(e,t){return W.resolve(null)}getIndexType(e,t){return W.resolve(0)}getFieldIndexes(e,t){return W.resolve([])}getNextCollectionGroupToUpdate(e){return W.resolve(null)}getMinOffset(e,t){return W.resolve(Sl.min())}getMinOffsetFromCollectionGroup(e,t){return W.resolve(Sl.min())}updateCollectionGroup(e,t,r){return W.resolve()}updateIndexEntries(e,t){return W.resolve()}},RA=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Dn(At.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Dn(At.comparator)).toArray()}};var Ube=new Uint8Array(0);var C4={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Bj=41943040,Kr=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};Kr.DEFAULT_COLLECTION_PERCENTILE=10,Kr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Kr.DEFAULT=new Kr(Bj,Kr.DEFAULT_COLLECTION_PERCENTILE,Kr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Kr.DISABLED=new Kr(-1,0,0);var yg=class n{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new n(0)}static ur(){return new n(-1)}};var E4="LruGarbageCollector",OZ=1048576;function T4([n,e],[t,r]){let i=Ue(n,t);return i===0?Ue(e,r):i}var kA=class{constructor(e){this.Tr=e,this.buffer=new Dn(T4),this.Ir=0}dr(){return++this.Ir}Er(e){let t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();T4(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},NA=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){se(E4,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){oh(t)?se(E4,"Ignoring IndexedDB error during garbage collection: ",t):await sh(t)}await this.Rr(3e5)})}},PA=class{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return W.resolve(R1.ue);let r=new kA(t);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(se("LruGarbageCollector","Garbage collection skipped; disabled"),W.resolve(C4)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(se("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),C4):this.pr(e,t))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let r,i,s,o,a,c,l,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(se("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,o=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,a=Date.now(),this.removeTargets(e,r,t))).next(p=>(s=p,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(l=Date.now(),Ud()<=$e.DEBUG&&se("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(c-a)+`ms
	Removed ${p} documents in `+(l-c)+`ms
Total Duration: ${l-h}ms`),W.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:p})))}};function FZ(n,e){return new PA(n,e)}var MA=class{constructor(){this.changes=new mo(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ri.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?W.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var OA=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var FA=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&cg(r.mutation,i,Qr.empty(),rn.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Ge()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Ge()){let i=wl();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=ig();return s.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){let r=wl();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Ge()))}populateOverlays(e,t,r){let i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,r,i){let s=yo(),o=ag(),a=(function(){return ag()})();return t.forEach((c,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof ys)?s=s.insert(l.key,l):h!==void 0?(o.set(l.key,h.mutation.getFieldMask()),cg(h.mutation,l,h.mutation.getFieldMask(),rn.now())):o.set(l.key,Qr.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((l,h)=>o.set(l,h)),t.forEach((l,h)=>{var p;return a.set(l,new OA(h,(p=o.get(l))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,t){let r=ag(),i=new Lt((o,a)=>o-a),s=Ge();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(let a of o)a.keys().forEach(c=>{let l=t.get(c);if(l===null)return;let h=r.get(c)||Qr.empty();h=a.applyToLocalView(l,h),r.set(c,h);let p=(i.get(a.batchId)||Ge()).add(c);i=i.insert(a.batchId,p)})}).next(()=>{let o=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),l=c.key,h=c.value,p=Tj();h.forEach(m=>{if(!s.has(m)){let b=kj(t.get(m),r.get(m));b!==null&&p.set(m,b),s=s.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,l,p))}return W.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return(function(o){return pe.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):wj(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):W.resolve(wl()),a=ug,c=s;return o.next(l=>W.forEach(l,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),s.get(h)?W.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{c=c.insert(h,m)}))).next(()=>this.populateOverlays(e,l,s)).next(()=>this.computeViews(e,c,l,Ge())).next(h=>({batchId:a,changes:Ej(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new pe(t)).next(r=>{let i=ig();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let s=t.collectionGroup,o=ig();return this.indexManager.getCollectionParents(e,s).next(a=>W.forEach(a,c=>{let l=(function(p,m){return new Ua(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)})(t,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((p,m)=>{o=o.insert(p,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((c,l)=>{let h=l.getKey();o.get(h)===null&&(o=o.insert(h,Ri.newInvalidDocument(h)))});let a=ig();return o.forEach((c,l)=>{let h=s.get(c);h!==void 0&&cg(h.mutation,l,Qr.empty(),rn.now()),ww(t,l)&&(a=a.insert(c,l))}),a})}};var VA=class{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return W.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:gs(i.createTime)}})(t)),W.resolve()}getNamedQuery(e,t){return W.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,(function(i){return{name:i.name,query:MZ(i.bundledQuery),readTime:gs(i.readTime)}})(t)),W.resolve()}};var LA=class{constructor(){this.overlays=new Lt(pe.comparator),this.kr=new Map}getOverlay(e,t){return W.resolve(this.overlays.get(t))}getOverlays(e,t){let r=wl();return W.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.wt(e,t,s)}),W.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.kr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.kr.delete(r)),W.resolve()}getOverlaysForCollection(e,t,r){let i=wl(),s=t.length+1,o=new pe(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let c=a.getNext().value,l=c.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return W.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new Lt((l,h)=>l-h),o=this.overlays.getIterator();for(;o.hasNext();){let l=o.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let h=s.get(l.largestBatchId);h===null&&(h=wl(),s=s.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let a=wl(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return W.resolve(a)}wt(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new vA(t,r));let s=this.kr.get(t);s===void 0&&(s=Ge(),this.kr.set(t,s)),this.kr.set(t,s.add(r.key))}};var UA=class{constructor(){this.sessionToken=zn.EMPTY_BYTE_STRING}getSessionToken(e){return W.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,W.resolve()}};var _g=class{constructor(){this.qr=new Dn(en.Qr),this.$r=new Dn(en.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){let r=new en(e,t);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Wr(new en(e,t))}Gr(e,t){e.forEach(r=>this.removeReference(r,t))}zr(e){let t=new pe(new At([])),r=new en(t,e),i=new en(t,e+1),s=[];return this.$r.forEachInRange([r,i],o=>{this.Wr(o),s.push(o.key)}),s}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){let t=new pe(new At([])),r=new en(t,e),i=new en(t,e+1),s=Ge();return this.$r.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let t=new en(e,0),r=this.qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},en=class{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return pe.comparator(e.key,t.key)||Ue(e.Hr,t.Hr)}static Ur(e,t){return Ue(e.Hr,t.Hr)||pe.comparator(e.key,t.key)}};var jA=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new Dn(en.Qr)}checkEmpty(e){return W.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let s=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new yA(s,t,r,i);this.mutationQueue.push(o);for(let a of i)this.Yr=this.Yr.add(new en(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return W.resolve(o)}lookupMutationBatch(e,t){return W.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.Xr(r),s=i<0?0:i;return W.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return W.resolve(this.mutationQueue.length===0?k1:this.er-1)}getAllMutationBatches(e){return W.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new en(t,0),i=new en(t,Number.POSITIVE_INFINITY),s=[];return this.Yr.forEachInRange([r,i],o=>{let a=this.Zr(o.Hr);s.push(a)}),W.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Dn(Ue);return t.forEach(i=>{let s=new en(i,0),o=new en(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([s,o],a=>{r=r.add(a.Hr)})}),W.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,s=r;pe.isDocumentKey(s)||(s=s.child(""));let o=new en(new pe(s),0),a=new Dn(Ue);return this.Yr.forEachWhile(c=>{let l=c.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(c.Hr)),!0)},o),W.resolve(this.ei(a))}ei(e){let t=[];return e.forEach(r=>{let i=this.Zr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){ft(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return W.forEach(t.mutations,i=>{let s=new en(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,t){let r=new en(t,0),i=this.Yr.firstAfterOrEqual(r);return W.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,W.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){let t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var BA=class{constructor(e){this.ni=e,this.docs=(function(){return new Lt(pe.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.ni(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return W.resolve(r?r.document.mutableCopy():Ri.newInvalidDocument(t))}getEntries(e,t){let r=yo();return t.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Ri.newInvalidDocument(i))}),W.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=yo(),o=t.path,a=new pe(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:l,value:{document:h}}=c.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||FX(OX(h),r)<=0||(i.has(h.key)||ww(t,h))&&(s=s.insert(h.key,h.mutableCopy()))}return W.resolve(s)}getAllFromCollectionGroup(e,t,r,i){we(9500)}ri(e,t){return W.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new $A(this)}getSize(e){return W.resolve(this.size)}},$A=class extends MA{constructor(e){super(),this.Or=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Or.addEntry(e,i)):this.Or.removeEntry(r)}),W.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}};var zA=class{constructor(e){this.persistence=e,this.ii=new mo(t=>F1(t),V1),this.lastRemoteSnapshotVersion=Me.min(),this.highestTargetId=0,this.si=0,this.oi=new _g,this.targetCount=0,this._i=yg.ar()}forEachTarget(e,t){return this.ii.forEach((r,i)=>t(i)),W.resolve()}getLastRemoteSnapshotVersion(e){return W.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return W.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),W.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.si&&(this.si=t),W.resolve()}hr(e){this.ii.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this._i=new yg(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,W.resolve()}updateTargetData(e,t){return this.hr(t),W.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,W.resolve()}removeTargets(e,t,r){let i=0,s=[];return this.ii.forEach((o,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.ii.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),W.waitFor(s).next(()=>i)}getTargetCount(e){return W.resolve(this.targetCount)}getTargetData(e,t){let r=this.ii.get(t)||null;return W.resolve(r)}addMatchingKeys(e,t,r){return this.oi.Kr(t,r),W.resolve()}removeMatchingKeys(e,t,r){this.oi.Gr(t,r);let i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),W.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),W.resolve()}getMatchingKeysForTargetId(e,t){let r=this.oi.Jr(t);return W.resolve(r)}containsKey(e,t){return W.resolve(this.oi.containsKey(t))}};var Q0=class{constructor(e,t){this.ai={},this.overlays={},this.ui=new R1(0),this.ci=!1,this.ci=!0,this.li=new UA,this.referenceDelegate=e(this),this.hi=new zA(this),this.indexManager=new AA,this.remoteDocumentCache=(function(i){return new BA(i)})(r=>this.referenceDelegate.Pi(r)),this.serializer=new xA(t),this.Ti=new VA(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new LA,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ai[e.toKey()];return r||(r=new jA(t,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,r){se("MemoryPersistence","Starting transaction:",e);let i=new HA(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(s=>this.referenceDelegate.di(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ei(e,t){return W.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,t)))}},HA=class extends Xx{constructor(e){super(),this.currentSequenceNumber=e}},qA=class n{constructor(e){this.persistence=e,this.Ai=new _g,this.Ri=null}static Vi(e){return new n(e)}get mi(){if(this.Ri)return this.Ri;throw we(60996)}addReference(e,t,r){return this.Ai.addReference(r,t),this.mi.delete(r.toString()),W.resolve()}removeReference(e,t,r){return this.Ai.removeReference(r,t),this.mi.add(r.toString()),W.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),W.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach(i=>this.mi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.mi.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}Ii(){this.Ri=new Set}di(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return W.forEach(this.mi,r=>{let i=pe.fromPath(r);return this.fi(e,i).next(s=>{s||t.removeEntry(i,Me.min())})}).next(()=>(this.Ri=null,t.apply(e)))}updateLimboDocument(e,t){return this.fi(e,t).next(r=>{r?this.mi.delete(t.toString()):this.mi.add(t.toString())})}Pi(e){return 0}fi(e,t){return W.or([()=>W.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}},Y0=class n{constructor(e,t){this.persistence=e,this.gi=new mo(r=>jX(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=FZ(this,t)}static Vi(e,t){return new n(e,t)}Ii(){}di(e){return W.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){let t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}yr(e){let t=0;return this.gr(e,r=>{t++}).next(()=>t)}gr(e,t){return W.forEach(this.gi,(r,i)=>this.Sr(e,r,i).next(s=>s?W.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ri(e,o=>this.Sr(e,o,t).next(a=>{a||(r++,s.removeEntry(o,Me.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),W.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),W.resolve()}removeReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),W.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),W.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=N0(e.data.value)),t}Sr(e,t,r){return W.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let i=this.gi.get(t);return W.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var GA=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Is=r,this.ds=i}static Es(e,t){let r=Ge(),i=Ge();for(let s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new n(e,t.fromCache,r,i)}};var WA=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var KA=class{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return FO()?8:LX(In())>0?6:4})()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,r,i){let s={result:null};return this.ps(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ys(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new WA;return this.ws(e,t,o).next(a=>{if(s.result=a,this.Rs)return this.Ss(e,t,o,a.size)})}).next(()=>s.result)}Ss(e,t,r,i){return r.documentReadCount<this.Vs?(Ud()<=$e.DEBUG&&se("QueryEngine","SDK will not create cache indexes for query:",jd(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),W.resolve()):(Ud()<=$e.DEBUG&&se("QueryEngine","Query:",jd(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?(Ud()<=$e.DEBUG&&se("QueryEngine","The SDK decides to create cache indexes for query:",jd(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ps(t))):W.resolve())}ps(e,t){if(f4(t))return W.resolve(null);let r=ps(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=fA(t,null,"F"),r=ps(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=Ge(...s);return this.gs.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let l=this.bs(t,a);return this.Ds(t,l,o,c.readTime)?this.ps(e,fA(t,null,"F")):this.vs(e,l,t,c)}))})))}ys(e,t,r,i){return f4(t)||i.isEqual(Me.min())?W.resolve(null):this.gs.getDocuments(e,r).next(s=>{let o=this.bs(t,s);return this.Ds(t,o,r,i)?W.resolve(null):(Ud()<=$e.DEBUG&&se("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),jd(t)),this.vs(e,o,t,MX(i,ug)).next(a=>a))})}bs(e,t){let r=new Dn(bj(e));return t.forEach((i,s)=>{ww(e,s)&&(r=r.add(s))}),r}Ds(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}ws(e,t,r){return Ud()<=$e.DEBUG&&se("QueryEngine","Using full collection scan to execute query:",jd(t)),this.gs.getDocumentsMatchingQuery(e,t,Sl.min(),r)}vs(e,t,r,i){return this.gs.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}};var j1="LocalStore",VZ=3e8,QA=class{constructor(e,t,r,i){this.persistence=e,this.Cs=t,this.serializer=i,this.Fs=new Lt(Ue),this.Ms=new mo(s=>F1(s),V1),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new FA(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Fs))}};function LZ(n,e,t,r){return new QA(n,e,t,r)}async function $j(n,e){let t=Re(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.Ns(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{let o=[],a=[],c=Ge();for(let l of i){o.push(l.batchId);for(let h of l.mutations)c=c.add(h.key)}for(let l of s){a.push(l.batchId);for(let h of l.mutations)c=c.add(h.key)}return t.localDocuments.getDocuments(r,c).next(l=>({Bs:l,removedBatchIds:o,addedBatchIds:a}))})})}function UZ(n,e){let t=Re(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),s=t.Os.newChangeBuffer({trackRemovals:!0});return(function(a,c,l,h){let p=l.batch,m=p.keys(),b=W.resolve();return m.forEach(k=>{b=b.next(()=>h.getEntry(c,k)).next(O=>{let N=l.docVersions.get(k);ft(N!==null,48541),O.version.compareTo(N)<0&&(p.applyToRemoteDocument(O,l),O.isValidDocument()&&(O.setReadTime(l.commitVersion),h.addEntry(O)))})}),b.next(()=>a.mutationQueue.removeMutationBatch(c,p))})(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(a){let c=Ge();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(c=c.add(a.batch.mutations[l].key));return c})(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function zj(n){let e=Re(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.hi.getLastRemoteSnapshotVersion(t))}function jZ(n,e){let t=Re(n),r=e.snapshotVersion,i=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=t.Os.newChangeBuffer({trackRemovals:!0});i=t.Fs;let a=[];e.targetChanges.forEach((h,p)=>{let m=i.get(p);if(!m)return;a.push(t.hi.removeMatchingKeys(s,h.removedDocuments,p).next(()=>t.hi.addMatchingKeys(s,h.addedDocuments,p)));let b=m.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(p)!==null?b=b.withResumeToken(zn.EMPTY_BYTE_STRING,Me.min()).withLastLimboFreeSnapshotVersion(Me.min()):h.resumeToken.approximateByteSize()>0&&(b=b.withResumeToken(h.resumeToken,r)),i=i.insert(p,b),(function(O,N,z){return O.resumeToken.approximateByteSize()===0||N.snapshotVersion.toMicroseconds()-O.snapshotVersion.toMicroseconds()>=VZ?!0:z.addedDocuments.size+z.modifiedDocuments.size+z.removedDocuments.size>0})(m,b,h)&&a.push(t.hi.updateTargetData(s,b))});let c=yo(),l=Ge();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(BZ(s,o,e.documentUpdates).next(h=>{c=h.Ls,l=h.ks})),!r.isEqual(Me.min())){let h=t.hi.getLastRemoteSnapshotVersion(s).next(p=>t.hi.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(h)}return W.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,c,l)).next(()=>c)}).then(s=>(t.Fs=i,s))}function BZ(n,e,t){let r=Ge(),i=Ge();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=yo();return t.forEach((a,c)=>{let l=s.get(a);c.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(Me.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||c.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):se(j1,"Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version)}),{Ls:o,ks:i}})}function $Z(n,e){let t=Re(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=k1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function zZ(n,e){let t=Re(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.hi.getTargetData(r,e).next(s=>s?(i=s,W.resolve(i)):t.hi.allocateTargetId(r).next(o=>(i=new mg(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.hi.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.Fs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(r.targetId,r),t.Ms.set(e,r.targetId)),r})}async function YA(n,e,t){let r=Re(n),i=r.Fs.get(e),s=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!oh(o))throw o;se(j1,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(i.target)}function S4(n,e,t){let r=Re(n),i=Me.min(),s=Ge();return r.persistence.runTransaction("Execute query","readwrite",o=>(function(c,l,h){let p=Re(c),m=p.Ms.get(h);return m!==void 0?W.resolve(p.Fs.get(m)):p.hi.getTargetData(l,h)})(r,o,ps(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(o,a.targetId).next(c=>{s=c})}).next(()=>r.Cs.getDocumentsMatchingQuery(o,e,t?i:Me.min(),t?s:Ge())).next(a=>(HZ(r,rZ(e),a),{documents:a,qs:s})))}function HZ(n,e,t){let r=n.xs.get(e)||Me.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.xs.set(e,r)}var J0=class{constructor(){this.activeTargetIds=lZ()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var JA=class{constructor(){this.Fo=new J0,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,r){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new J0,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var XA=class{xo(e){}shutdown(){}};var D4="ConnectivityMonitor",X0=class{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){se(D4,"Network connectivity changed: AVAILABLE");for(let e of this.ko)e(0)}Lo(){se(D4,"Network connectivity changed: UNAVAILABLE");for(let e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var k0=null;function ZA(){return k0===null?k0=(function(){return 268435456+Math.round(2147483648*Math.random())})():k0++,"0x"+k0.toString(16)}var Bx="RestConnection",qZ={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},e1=class{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===j0?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,t,r,i,s){let o=ZA(),a=this.Go(e,t.toUriEncodedString());se(Bx,`Sending RPC '${e}' ${o}:`,a,r);let c={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(c,i,s);let{host:l}=new URL(a),h=ha(l);return this.jo(e,a,c,r,h).then(p=>(se(Bx,`Received RPC '${e}' ${o}: `,p),p),p=>{throw Va(Bx,`RPC '${e}' ${o} failed with error: `,p,"url: ",a,"request:",r),p})}Jo(e,t,r,i,s,o){return this.Wo(e,t,r,i,s)}zo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+ih})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}Go(e,t){let r=qZ[e];return`${this.$o}/v1/${t}:${r}`}terminate(){}};var t1=class{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}};var $n="WebChannelConnection",n1=class extends e1{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,r,i,s){let o=ZA();return new Promise((a,c)=>{let l=new Ox;l.setWithCredentials(!0),l.listenOnce(Fx.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case rg.NO_ERROR:let p=l.getResponseJson();se($n,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(p)),a(p);break;case rg.TIMEOUT:se($n,`RPC '${e}' ${o} timed out`),c(new ne(H.DEADLINE_EXCEEDED,"Request time out"));break;case rg.HTTP_ERROR:let m=l.getStatus();if(se($n,`RPC '${e}' ${o} failed with status:`,m,"response text:",l.getResponseText()),m>0){let b=l.getResponseJson();Array.isArray(b)&&(b=b[0]);let k=b?.error;if(k&&k.status&&k.message){let O=(function(z){let Q=z.toLowerCase().replace(/_/g,"-");return Object.values(H).indexOf(Q)>=0?Q:H.UNKNOWN})(k.status);c(new ne(O,k.message))}else c(new ne(H.UNKNOWN,"Server responded with status "+l.getStatus()))}else c(new ne(H.UNAVAILABLE,"Connection failed."));break;default:we(9055,{c_:e,streamId:o,l_:l.getLastErrorCode(),h_:l.getLastError()})}}finally{se($n,`RPC '${e}' ${o} completed.`)}});let h=JSON.stringify(i);se($n,`RPC '${e}' ${o} sending request:`,i),l.send(t,"POST",h,r,15)})}P_(e,t,r){let i=ZA(),s=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Ux(),a=Lx(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(c.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(c.useFetchStreams=!0),this.zo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;let h=s.join("");se($n,`Creating RPC '${e}' stream ${i}: ${h}`,c);let p=o.createWebChannel(h,c);this.T_(p);let m=!1,b=!1,k=new t1({Ho:N=>{b?se($n,`Not sending because RPC '${e}' stream ${i} is closed:`,N):(m||(se($n,`Opening RPC '${e}' stream ${i} transport.`),p.open(),m=!0),se($n,`RPC '${e}' stream ${i} sending:`,N),p.send(N))},Yo:()=>p.close()}),O=(N,z,Q)=>{N.listen(z,Z=>{try{Q(Z)}catch(Ce){setTimeout(()=>{throw Ce},0)}})};return O(p,Ld.EventType.OPEN,()=>{b||(se($n,`RPC '${e}' stream ${i} transport opened.`),k.s_())}),O(p,Ld.EventType.CLOSE,()=>{b||(b=!0,se($n,`RPC '${e}' stream ${i} transport closed`),k.__(),this.I_(p))}),O(p,Ld.EventType.ERROR,N=>{b||(b=!0,Va($n,`RPC '${e}' stream ${i} transport errored. Name:`,N.name,"Message:",N.message),k.__(new ne(H.UNAVAILABLE,"The operation could not be completed")))}),O(p,Ld.EventType.MESSAGE,N=>{var z;if(!b){let Q=N.data[0];ft(!!Q,16349);let Z=Q,Ce=Z?.error||((z=Z[0])===null||z===void 0?void 0:z.error);if(Ce){se($n,`RPC '${e}' stream ${i} received error:`,Ce);let Je=Ce.status,Ie=(function(I){let E=Zt[I];if(E!==void 0)return Pj(E)})(Je),T=Ce.message;Ie===void 0&&(Ie=H.INTERNAL,T="Unknown error status: "+Je+" with message "+Ce.message),b=!0,k.__(new ne(Ie,T)),p.close()}else se($n,`RPC '${e}' stream ${i} received:`,Q),k.a_(Q)}}),O(a,Vx.STAT_EVENT,N=>{N.stat===x0.PROXY?se($n,`RPC '${e}' stream ${i} detected buffering proxy`):N.stat===x0.NOPROXY&&se($n,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{k.o_()},0),k}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(t=>t===e)}};function $x(){return typeof document<"u"?document:null}function Iw(n){return new CA(n,!0)}var Z0=class{constructor(e,t,r=1e3,i=1.5,s=6e4){this.Fi=e,this.timerId=t,this.d_=r,this.E_=i,this.A_=s,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();let t=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,t-r);i>0&&se("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}};var x4="PersistentStream",ew=class{constructor(e,t,r,i,s,o,a,c){this.Fi=e,this.w_=r,this.S_=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new Z0(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===H.RESOURCE_EXHAUSTED?(fo(t.toString()),fo("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===H.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(t)}U_(){}auth(){this.state=1;let e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===t&&this.W_(r,i)},r=>{e(()=>{let i=new ne(H.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(e,t){let r=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>++this.C_==1?this.j_(i):this.onNext(i))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return se(x4,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget(()=>this.b_===e?t():(se(x4,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},r1=class extends ew{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();let t=CZ(this.serializer,e),r=(function(s){if(!("targetChange"in s))return Me.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?Me.min():o.readTime?gs(o.readTime):Me.min()})(e);return this.listener.J_(t,r)}H_(e){let t={};t.database=DA(this.serializer),t.addTarget=(function(s,o){let a,c=o.target;if(a=dA(c)?{documents:SZ(s,c)}:{query:DZ(s,c).Vt},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=Mj(s,o.resumeToken);let l=EA(s,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(Me.min())>0){a.readTime=W0(s,o.snapshotVersion.toTimestamp());let l=EA(s,o.expectedCount);l!==null&&(a.expectedCount=l)}return a})(this.serializer,e);let r=AZ(this.serializer,e);r&&(t.labels=r),this.k_(t)}Y_(e){let t={};t.database=DA(this.serializer),t.removeTarget=e,this.k_(t)}},i1=class extends ew{constructor(e,t,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return ft(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ft(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){ft(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();let t=TZ(e.writeResults,e.commitTime),r=gs(e.commitTime);return this.listener.ta(r,t)}na(){let e={};e.database=DA(this.serializer),this.k_(e)}X_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>EZ(this.serializer,r))};this.k_(t)}};var s1=class{},o1=class extends s1{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new ne(H.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Wo(e,TA(t,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===H.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new ne(H.UNKNOWN,s.toString())})}Jo(e,t,r,i,s){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Jo(e,TA(t,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===H.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ne(H.UNKNOWN,o.toString())})}terminate(){this.ra=!0,this.connection.terminate()}},a1=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(fo(t),this._a=!1):se("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}};var Nl="RemoteStore",c1=class{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=s,this.Ea.xo(o=>{r.enqueueAndForget(async()=>{Pl(this)&&(se(Nl,"Restarting streams for network reachability change."),await(async function(c){let l=Re(c);l.Ia.add(4),await Eg(l),l.Aa.set("Unknown"),l.Ia.delete(4),await bw(l)})(this))})}),this.Aa=new a1(r,i)}};async function bw(n){if(Pl(n))for(let e of n.da)await e(!0)}async function Eg(n){for(let e of n.da)await e(!1)}function Hj(n,e){let t=Re(n);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),H1(t)?z1(t):ah(t).x_()&&$1(t,e))}function B1(n,e){let t=Re(n),r=ah(t);t.Ta.delete(e),r.x_()&&qj(t,e),t.Ta.size===0&&(r.x_()?r.B_():Pl(t)&&t.Aa.set("Unknown"))}function $1(n,e){if(n.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Me.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}ah(n).H_(e)}function qj(n,e){n.Ra.$e(e),ah(n).Y_(e)}function z1(n){n.Ra=new bA({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Ta.get(e)||null,lt:()=>n.datastore.serializer.databaseId}),ah(n).start(),n.Aa.aa()}function H1(n){return Pl(n)&&!ah(n).M_()&&n.Ta.size>0}function Pl(n){return Re(n).Ia.size===0}function Gj(n){n.Ra=void 0}async function GZ(n){n.Aa.set("Online")}async function WZ(n){n.Ta.forEach((e,t)=>{$1(n,e)})}async function KZ(n,e){Gj(n),H1(n)?(n.Aa.la(e),z1(n)):n.Aa.set("Unknown")}async function QZ(n,e,t){if(n.Aa.set("Online"),e instanceof q0&&e.state===2&&e.cause)try{await(async function(i,s){let o=s.cause;for(let a of s.targetIds)i.Ta.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.Ta.delete(a),i.Ra.removeTarget(a))})(n,e)}catch(r){se(Nl,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await tw(n,r)}else if(e instanceof Hd?n.Ra.Ye(e):e instanceof H0?n.Ra.it(e):n.Ra.et(e),!t.isEqual(Me.min()))try{let r=await zj(n.localStore);t.compareTo(r)>=0&&await(function(s,o){let a=s.Ra.Pt(o);return a.targetChanges.forEach((c,l)=>{if(c.resumeToken.approximateByteSize()>0){let h=s.Ta.get(l);h&&s.Ta.set(l,h.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,l)=>{let h=s.Ta.get(c);if(!h)return;s.Ta.set(c,h.withResumeToken(zn.EMPTY_BYTE_STRING,h.snapshotVersion)),qj(s,c);let p=new mg(h.target,c,l,h.sequenceNumber);$1(s,p)}),s.remoteSyncer.applyRemoteEvent(a)})(n,t)}catch(r){se(Nl,"Failed to raise snapshot:",r),await tw(n,r)}}async function tw(n,e,t){if(!oh(e))throw e;n.Ia.add(1),await Eg(n),n.Aa.set("Offline"),t||(t=()=>zj(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{se(Nl,"Retrying IndexedDB access"),await t(),n.Ia.delete(1),await bw(n)})}function Wj(n,e){return e().catch(t=>tw(n,t,e))}async function Cw(n){let e=Re(n),t=ja(e),r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:k1;for(;YZ(e);)try{let i=await $Z(e.localStore,r);if(i===null){e.Pa.length===0&&t.B_();break}r=i.batchId,JZ(e,i)}catch(i){await tw(e,i)}Kj(e)&&Qj(e)}function YZ(n){return Pl(n)&&n.Pa.length<10}function JZ(n,e){n.Pa.push(e);let t=ja(n);t.x_()&&t.Z_&&t.X_(e.mutations)}function Kj(n){return Pl(n)&&!ja(n).M_()&&n.Pa.length>0}function Qj(n){ja(n).start()}async function XZ(n){ja(n).na()}async function ZZ(n){let e=ja(n);for(let t of n.Pa)e.X_(t.mutations)}async function eee(n,e,t){let r=n.Pa.shift(),i=_A.from(r,e,t);await Wj(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),await Cw(n)}async function tee(n,e){e&&ja(n).Z_&&await(async function(r,i){if((function(o){return mZ(o)&&o!==H.ABORTED})(i.code)){let s=r.Pa.shift();ja(r).N_(),await Wj(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await Cw(r)}})(n,e),Kj(n)&&Qj(n)}async function A4(n,e){let t=Re(n);t.asyncQueue.verifyOperationInProgress(),se(Nl,"RemoteStore received new credentials");let r=Pl(t);t.Ia.add(3),await Eg(t),r&&t.Aa.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),await bw(t)}async function nee(n,e){let t=Re(n);e?(t.Ia.delete(2),await bw(t)):e||(t.Ia.add(2),await Eg(t),t.Aa.set("Unknown"))}function ah(n){return n.Va||(n.Va=(function(t,r,i){let s=Re(t);return s.ia(),new r1(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(n.datastore,n.asyncQueue,{Zo:GZ.bind(null,n),e_:WZ.bind(null,n),n_:KZ.bind(null,n),J_:QZ.bind(null,n)}),n.da.push(async e=>{e?(n.Va.N_(),H1(n)?z1(n):n.Aa.set("Unknown")):(await n.Va.stop(),Gj(n))})),n.Va}function ja(n){return n.ma||(n.ma=(function(t,r,i){let s=Re(t);return s.ia(),new i1(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:XZ.bind(null,n),n_:tee.bind(null,n),ea:ZZ.bind(null,n),ta:eee.bind(null,n)}),n.da.push(async e=>{e?(n.ma.N_(),await Cw(n)):(await n.ma.stop(),n.Pa.length>0&&(se(Nl,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))})),n.ma}var l1=class n{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Ai,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){let o=Date.now()+r,a=new n(e,t,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ne(H.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function q1(n,e){if(fo("AsyncQueue",`${e}: ${n}`),oh(n))return new ne(H.UNAVAILABLE,`${e}: ${n}`);throw n}var nw=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||pe.comparator(t.key,r.key):(t,r)=>pe.comparator(t.key,r.key),this.keyedMap=ig(),this.sortedSet=new Lt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var rw=class{constructor(){this.fa=new Lt(pe.comparator)}track(e){let t=e.doc.key,r=this.fa.get(t);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(t,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(t):e.type===1&&r.type===2?this.fa=this.fa.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):we(63341,{At:e,ga:r}):this.fa=this.fa.insert(t,e)}pa(){let e=[];return this.fa.inorderTraversal((t,r)=>{e.push(r)}),e}},eh=class n{constructor(e,t,r,i,s,o,a,c,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,s){let o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new n(e,t,nw.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&vw(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var u1=class{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}},d1=class{constructor(){this.queries=R4(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,r){let i=Re(t),s=i.queries;i.queries=R4(),s.forEach((o,a)=>{for(let c of a.wa)c.onError(r)})})(this,new ne(H.ABORTED,"Firestore shutting down"))}};function R4(){return new mo(n=>Ij(n),vw)}async function G1(n,e){let t=Re(n),r=3,i=e.query,s=t.queries.get(i);s?!s.Sa()&&e.ba()&&(r=2):(s=new u1,r=e.ba()?0:1);try{switch(r){case 0:s.ya=await t.onListen(i,!0);break;case 1:s.ya=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(o){let a=q1(o,`Initialization of query '${jd(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,s),s.wa.push(e),e.va(t.onlineState),s.ya&&e.Ca(s.ya)&&K1(t)}async function W1(n,e){let t=Re(n),r=e.query,i=3,s=t.queries.get(r);if(s){let o=s.wa.indexOf(e);o>=0&&(s.wa.splice(o,1),s.wa.length===0?i=e.ba()?0:1:!s.Sa()&&e.ba()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function ree(n,e){let t=Re(n),r=!1;for(let i of e){let s=i.query,o=t.queries.get(s);if(o){for(let a of o.wa)a.Ca(i)&&(r=!0);o.ya=i}}r&&K1(t)}function iee(n,e,t){let r=Re(n),i=r.queries.get(e);if(i)for(let s of i.wa)s.onError(t);r.queries.delete(e)}function K1(n){n.Da.forEach(e=>{e.next()})}var h1,k4;(k4=h1||(h1={})).Fa="default",k4.Cache="cache";var vg=class{constructor(e,t,r){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new eh(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;let r=t!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;let t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=eh.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==h1.Cache}};var iw=class{constructor(e){this.key=e}},sw=class{constructor(e){this.key=e}},f1=class{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=Ge(),this.mutatedKeys=Ge(),this.Xa=bj(e),this.eu=new nw(this.Xa)}get tu(){return this.Ha}nu(e,t){let r=t?t.ru:new rw,i=t?t.eu:this.eu,s=t?t.mutatedKeys:this.mutatedKeys,o=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let m=i.get(h),b=ww(this.query,p)?p:null,k=!!m&&this.mutatedKeys.has(m.key),O=!!b&&(b.hasLocalMutations||this.mutatedKeys.has(b.key)&&b.hasCommittedMutations),N=!1;m&&b?m.data.isEqual(b.data)?k!==O&&(r.track({type:3,doc:b}),N=!0):this.iu(m,b)||(r.track({type:2,doc:b}),N=!0,(c&&this.Xa(b,c)>0||l&&this.Xa(b,l)<0)&&(a=!0)):!m&&b?(r.track({type:0,doc:b}),N=!0):m&&!b&&(r.track({type:1,doc:m}),N=!0,(c||l)&&(a=!0)),N&&(b?(o=o.add(b),s=O?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{eu:o,ru:r,Ds:a,mutatedKeys:s}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let s=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;let o=e.ru.pa();o.sort((h,p)=>(function(b,k){let O=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return we(20277,{At:N})}};return O(b)-O(k)})(h.type,p.type)||this.Xa(h.doc,p.doc)),this.su(r),i=i!=null&&i;let a=t&&!i?this.ou():[],c=this.Za.size===0&&this.current&&!i?1:0,l=c!==this.Ya;return this.Ya=c,o.length!==0||l?{snapshot:new eh(this.query,e.eu,s,o,e.mutatedKeys,c===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:a}:{_u:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new rw,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(t=>this.Ha=this.Ha.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ha=this.Ha.delete(t)),this.current=e.current)}ou(){if(!this.current)return[];let e=this.Za;this.Za=Ge(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});let t=[];return e.forEach(r=>{this.Za.has(r)||t.push(new sw(r))}),this.Za.forEach(r=>{e.has(r)||t.push(new iw(r))}),t}uu(e){this.Ha=e.qs,this.Za=Ge();let t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return eh.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}},Q1="SyncEngine",p1=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},g1=class{constructor(e){this.key=e,this.lu=!1}},m1=class{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.hu={},this.Pu=new mo(a=>Ij(a),vw),this.Tu=new Map,this.Iu=new Set,this.du=new Lt(pe.comparator),this.Eu=new Map,this.Au=new _g,this.Ru={},this.Vu=new Map,this.mu=yg.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}};async function see(n,e,t=!0){let r=t3(n),i,s=r.Pu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.cu()):i=await Yj(r,e,t,!0),i}async function oee(n,e){let t=t3(n);await Yj(t,e,!0,!1)}async function Yj(n,e,t,r){let i=await zZ(n.localStore,ps(e)),s=i.targetId,o=n.sharedClientState.addLocalQueryTarget(s,t),a;return r&&(a=await aee(n,e,s,o==="current",i.resumeToken)),n.isPrimaryClient&&t&&Hj(n.remoteStore,i),a}async function aee(n,e,t,r,i){n.gu=(p,m,b)=>(async function(O,N,z,Q){let Z=N.view.nu(z);Z.Ds&&(Z=await S4(O.localStore,N.query,!1).then(({documents:T})=>N.view.nu(T,Z)));let Ce=Q&&Q.targetChanges.get(N.targetId),Je=Q&&Q.targetMismatches.get(N.targetId)!=null,Ie=N.view.applyChanges(Z,O.isPrimaryClient,Ce,Je);return P4(O,N.targetId,Ie._u),Ie.snapshot})(n,p,m,b);let s=await S4(n.localStore,e,!0),o=new f1(e,s.qs),a=o.nu(s.documents),c=gg.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),l=o.applyChanges(a,n.isPrimaryClient,c);P4(n,t,l._u);let h=new p1(e,t,o);return n.Pu.set(e,h),n.Tu.has(t)?n.Tu.get(t).push(e):n.Tu.set(t,[e]),l.snapshot}async function cee(n,e,t){let r=Re(n),i=r.Pu.get(e),s=r.Tu.get(i.targetId);if(s.length>1)return r.Tu.set(i.targetId,s.filter(o=>!vw(o,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await YA(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&B1(r.remoteStore,i.targetId),y1(r,i.targetId)}).catch(sh)):(y1(r,i.targetId),await YA(r.localStore,i.targetId,!0))}async function lee(n,e){let t=Re(n),r=t.Pu.get(e),i=t.Tu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),B1(t.remoteStore,r.targetId))}async function uee(n,e,t){let r=yee(n);try{let i=await(function(o,a){let c=Re(o),l=rn.now(),h=a.reduce((b,k)=>b.add(k.key),Ge()),p,m;return c.persistence.runTransaction("Locally write mutations","readwrite",b=>{let k=yo(),O=Ge();return c.Os.getEntries(b,h).next(N=>{k=N,k.forEach((z,Q)=>{Q.isValidDocument()||(O=O.add(z))})}).next(()=>c.localDocuments.getOverlayedDocuments(b,k)).next(N=>{p=N;let z=[];for(let Q of a){let Z=gZ(Q,p.get(Q.key).overlayedDocument);Z!=null&&z.push(new ys(Q.key,Z,pj(Z.value.mapValue),ho.exists(!0)))}return c.mutationQueue.addMutationBatch(b,l,z,a)}).next(N=>{m=N;let z=N.applyToLocalDocumentSet(p,O);return c.documentOverlayCache.saveOverlays(b,N.batchId,z)})}).then(()=>({batchId:m.batchId,changes:Ej(p)}))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(o,a,c){let l=o.Ru[o.currentUser.toKey()];l||(l=new Lt(Ue)),l=l.insert(a,c),o.Ru[o.currentUser.toKey()]=l})(r,i.batchId,t),await Tg(r,i.changes),await Cw(r.remoteStore)}catch(i){let s=q1(i,"Failed to persist write");t.reject(s)}}async function Jj(n,e){let t=Re(n);try{let r=await jZ(t.localStore,e);e.targetChanges.forEach((i,s)=>{let o=t.Eu.get(s);o&&(ft(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.lu=!0:i.modifiedDocuments.size>0?ft(o.lu,14607):i.removedDocuments.size>0&&(ft(o.lu,42227),o.lu=!1))}),await Tg(t,r,e)}catch(r){await sh(r)}}function N4(n,e,t){let r=Re(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Pu.forEach((s,o)=>{let a=o.view.va(e);a.snapshot&&i.push(a.snapshot)}),(function(o,a){let c=Re(o);c.onlineState=a;let l=!1;c.queries.forEach((h,p)=>{for(let m of p.wa)m.va(a)&&(l=!0)}),l&&K1(c)})(r.eventManager,e),i.length&&r.hu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function dee(n,e,t){let r=Re(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Eu.get(e),s=i&&i.key;if(s){let o=new Lt(pe.comparator);o=o.insert(s,Ri.newNoDocument(s,Me.min()));let a=Ge().add(s),c=new z0(Me.min(),new Map,new Lt(Ue),o,a);await Jj(r,c),r.du=r.du.remove(s),r.Eu.delete(e),Y1(r)}else await YA(r.localStore,e,!1).then(()=>y1(r,e,t)).catch(sh)}async function hee(n,e){let t=Re(n),r=e.batch.batchId;try{let i=await UZ(t.localStore,e);Zj(t,r,null),Xj(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await Tg(t,i)}catch(i){await sh(i)}}async function fee(n,e,t){let r=Re(n);try{let i=await(function(o,a){let c=Re(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return c.mutationQueue.lookupMutationBatch(l,a).next(p=>(ft(p!==null,37113),h=p.keys(),c.mutationQueue.removeMutationBatch(l,p))).next(()=>c.mutationQueue.performConsistencyCheck(l)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>c.localDocuments.getDocuments(l,h))})})(r.localStore,e);Zj(r,e,t),Xj(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await Tg(r,i)}catch(i){await sh(i)}}function Xj(n,e){(n.Vu.get(e)||[]).forEach(t=>{t.resolve()}),n.Vu.delete(e)}function Zj(n,e,t){let r=Re(n),i=r.Ru[r.currentUser.toKey()];if(i){let s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Ru[r.currentUser.toKey()]=i}}function y1(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Tu.get(e))n.Pu.delete(r),t&&n.hu.pu(r,t);n.Tu.delete(e),n.isPrimaryClient&&n.Au.zr(e).forEach(r=>{n.Au.containsKey(r)||e3(n,r)})}function e3(n,e){n.Iu.delete(e.path.canonicalString());let t=n.du.get(e);t!==null&&(B1(n.remoteStore,t),n.du=n.du.remove(e),n.Eu.delete(t),Y1(n))}function P4(n,e,t){for(let r of t)r instanceof iw?(n.Au.addReference(r.key,e),pee(n,r)):r instanceof sw?(se(Q1,"Document no longer in limbo: "+r.key),n.Au.removeReference(r.key,e),n.Au.containsKey(r.key)||e3(n,r.key)):we(19791,{yu:r})}function pee(n,e){let t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Iu.has(r)||(se(Q1,"New document in limbo: "+t),n.Iu.add(r),Y1(n))}function Y1(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){let e=n.Iu.values().next().value;n.Iu.delete(e);let t=new pe(At.fromString(e)),r=n.mu.next();n.Eu.set(r,new g1(t)),n.du=n.du.insert(t,r),Hj(n.remoteStore,new mg(ps(_w(t.path)),r,"TargetPurposeLimboResolution",R1.ue))}}async function Tg(n,e,t){let r=Re(n),i=[],s=[],o=[];r.Pu.isEmpty()||(r.Pu.forEach((a,c)=>{o.push(r.gu(c,e,t).then(l=>{var h;if((l||t)&&r.isPrimaryClient){let p=l?!l.fromCache:(h=t?.targetChanges.get(c.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(c.targetId,p?"current":"not-current")}if(l){i.push(l);let p=GA.Es(c.targetId,l);s.push(p)}}))}),await Promise.all(o),r.hu.J_(i),await(async function(c,l){let h=Re(c);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>W.forEach(l,m=>W.forEach(m.Is,b=>h.persistence.referenceDelegate.addReference(p,m.targetId,b)).next(()=>W.forEach(m.ds,b=>h.persistence.referenceDelegate.removeReference(p,m.targetId,b)))))}catch(p){if(!oh(p))throw p;se(j1,"Failed to update sequence numbers: "+p)}for(let p of l){let m=p.targetId;if(!p.fromCache){let b=h.Fs.get(m),k=b.snapshotVersion,O=b.withLastLimboFreeSnapshotVersion(k);h.Fs=h.Fs.insert(m,O)}}})(r.localStore,s))}async function gee(n,e){let t=Re(n);if(!t.currentUser.isEqual(e)){se(Q1,"User change. New user:",e.toKey());let r=await $j(t.localStore,e);t.currentUser=e,(function(s,o){s.Vu.forEach(a=>{a.forEach(c=>{c.reject(new ne(H.CANCELLED,o))})}),s.Vu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Tg(t,r.Bs)}}function mee(n,e){let t=Re(n),r=t.Eu.get(e);if(r&&r.lu)return Ge().add(r.key);{let i=Ge(),s=t.Tu.get(e);if(!s)return i;for(let o of s){let a=t.Pu.get(o);i=i.unionWith(a.view.tu)}return i}}function t3(n){let e=Re(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Jj.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=mee.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=dee.bind(null,e),e.hu.J_=ree.bind(null,e.eventManager),e.hu.pu=iee.bind(null,e.eventManager),e}function yee(n){let e=Re(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=hee.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=fee.bind(null,e),e}var n3=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Iw(t.databaseInfo.databaseId),this.sharedClientState=this.bu(t),this.persistence=this.Du(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Cu(t,this.localStore),this.indexBackfillerScheduler=this.Fu(t,this.localStore)}Cu(t,r){return null}Fu(t,r){return null}vu(t){return LZ(this.persistence,new KA,t.initialUser,this.serializer)}Du(t){return new Q0(qA.Vi,this.serializer)}bu(t){return new JA}async terminate(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}return n.provider={build:()=>new n},n})(),_1=class extends n3{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){ft(this.persistence.referenceDelegate instanceof Y0,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new NA(r,e.asyncQueue,t)}Du(e){let t=this.cacheSizeBytes!==void 0?Kr.withCacheSize(this.cacheSizeBytes):Kr.DEFAULT;return new Q0(r=>Y0.Vi(r,t),this.serializer)}};var _ee=(()=>{class n{async initialize(t,r){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>N4(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=gee.bind(null,this.syncEngine),await nee(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new d1})()}createDatastore(t){let r=Iw(t.databaseInfo.databaseId),i=(function(o){return new n1(o)})(t.databaseInfo);return(function(o,a,c,l){return new o1(o,a,c,l)})(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return(function(i,s,o,a,c){return new c1(i,s,o,a,c)})(this.localStore,this.datastore,t.asyncQueue,r=>N4(this.syncEngine,r,0),(function(){return X0.C()?new X0:new XA})())}createSyncEngine(t,r){return(function(s,o,a,c,l,h,p){let m=new m1(s,o,a,c,l,h);return p&&(m.fu=!0),m})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}async terminate(){var t,r;await(async function(s){let o=Re(s);se(Nl,"RemoteStore shutting down."),o.Ia.add(5),await Eg(o),o.Ea.shutdown(),o.Aa.set("Unknown")})(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()}}return n.provider={build:()=>new n},n})();var wg=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):fo("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var Ba="FirestoreClient",v1=class{constructor(e,t,r,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Sn.UNAUTHENTICATED,this.clientId=lg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{se(Ba,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(se(Ba,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Ai;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=q1(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}};async function zx(n,e){n.asyncQueue.verifyOperationInProgress(),se(Ba,"Initializing OfflineComponentProvider");let t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async i=>{r.isEqual(i)||(await $j(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>{Va("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then(()=>{se("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{Va("Terminating Firestore due to IndexedDb database deletion failed",i)})}),n._offlineComponents=e}async function M4(n,e){n.asyncQueue.verifyOperationInProgress();let t=await vee(n);se(Ba,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>A4(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>A4(e.remoteStore,i)),n._onlineComponents=e}async function vee(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){se(Ba,"Using user provided OfflineComponentProvider");try{await zx(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===H.FAILED_PRECONDITION||i.code===H.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;Va("Error using user provided cache. Falling back to memory cache: "+t),await zx(n,new n3)}}else se(Ba,"Using default OfflineComponentProvider"),await zx(n,new _1(void 0));return n._offlineComponents}async function r3(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(se(Ba,"Using user provided OnlineComponentProvider"),await M4(n,n._uninitializedComponentsProvider._online)):(se(Ba,"Using default OnlineComponentProvider"),await M4(n,new _ee))),n._onlineComponents}function wee(n){return r3(n).then(e=>e.syncEngine)}async function ow(n){let e=await r3(n),t=e.eventManager;return t.onListen=see.bind(null,e.syncEngine),t.onUnlisten=cee.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=oee.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=lee.bind(null,e.syncEngine),t}function Iee(n,e,t={}){let r=new Ai;return n.asyncQueue.enqueueAndForget(async()=>(function(s,o,a,c,l){let h=new wg({next:m=>{h.Ou(),o.enqueueAndForget(()=>W1(s,p));let b=m.docs.has(a);!b&&m.fromCache?l.reject(new ne(H.UNAVAILABLE,"Failed to get document because the client is offline.")):b&&m.fromCache&&c&&c.source==="server"?l.reject(new ne(H.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(m)},error:m=>l.reject(m)}),p=new vg(_w(a.path),h,{includeMetadataChanges:!0,ka:!0});return G1(s,p)})(await ow(n),n.asyncQueue,e,t,r)),r.promise}function bee(n,e,t={}){let r=new Ai;return n.asyncQueue.enqueueAndForget(async()=>(function(s,o,a,c,l){let h=new wg({next:m=>{h.Ou(),o.enqueueAndForget(()=>W1(s,p)),m.fromCache&&c.source==="server"?l.reject(new ne(H.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(m)},error:m=>l.reject(m)}),p=new vg(a,h,{includeMetadataChanges:!0,ka:!0});return G1(s,p)})(await ow(n),n.asyncQueue,e,t,r)),r.promise}function i3(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var O4=new Map;var s3="firestore.googleapis.com",F4=!0,aw=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new ne(H.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=s3,this.ssl=F4}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:F4;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Bj;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<OZ)throw new ne(H.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}PX("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=i3((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new ne(H.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new ne(H.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new ne(H.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},th=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new aw({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ne(H.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ne(H.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new aw(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new Hx;switch(r.type){case"firstParty":return new Kx(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ne(H.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){let r=O4.get(t);r&&(se("ComponentProvider","Removing Datastore"),O4.delete(t),r.terminate())})(this),Promise.resolve()}};function o3(n,e,t,r={}){var i;n=Yr(n,th);let s=ha(e),o=n._getSettings(),a=Object.assign(Object.assign({},o),{emulatorOptions:n._getEmulatorOptions()}),c=`${e}:${t}`;s&&(tv(`https://${c}`),nv("Firestore",!0)),o.host!==s3&&o.host!==c&&Va("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let l=Object.assign(Object.assign({},o),{host:c,ssl:s,emulatorOptions:r});if(!is(l,a)&&(n._setSettings(l),r.mockUserToken)){let h,p;if(typeof r.mockUserToken=="string")h=r.mockUserToken,p=Sn.MOCK_USER;else{h=RO(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new ne(H.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new Sn(m)}n._authCredentials=new qx(new O0(h,p))}}var $a=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},xn=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Pa(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}toJSON(){return{type:n._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(Cg(t,n._jsonSchema))return new n(e,r||null,new pe(At.fromString(t.referencePath)))}};xn._jsonSchemaVersion="firestore/documentReference/1.0",xn._jsonSchema={type:nn("string",xn._jsonSchemaVersion),referencePath:nn("string")};var Pa=class n extends $a{constructor(e,t,r){super(e,t,_w(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new xn(this.firestore,null,new pe(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function a3(n,e,...t){if(n=pn(n),H4("collection","path",e),n instanceof th){let r=At.fromString(e,...t);return e4(r),new Pa(n,null,r)}{if(!(n instanceof xn||n instanceof Pa))throw new ne(H.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(At.fromString(e,...t));return e4(r),new Pa(n.firestore,null,r)}}function J1(n,e,...t){if(n=pn(n),arguments.length===1&&(e=lg.newId()),H4("doc","path",e),n instanceof th){let r=At.fromString(e,...t);return ZU(r),new xn(n,null,new pe(r))}{if(!(n instanceof xn||n instanceof Pa))throw new ne(H.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(At.fromString(e,...t));return ZU(r),new xn(n.firestore,n instanceof Pa?n.converter:null,new pe(r))}}var V4="AsyncQueue",cw=class{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new Z0(this,"async_queue_retry"),this.oc=()=>{let r=$x();r&&se(V4,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;let t=$x();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;let t=$x();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});let t=new Ai;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!oh(e))throw e;se(V4,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){let t=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,fo("INTERNAL UNHANDLED ERROR: ",L4(r)),r}).then(r=>(this.nc=!1,r))));return this._c=t,t}enqueueAfterDelay(e,t,r){this.ac(),this.sc.indexOf(e)>-1&&(t=0);let i=l1.createAndSchedule(this,e,t,r,s=>this.lc(s));return this.ec.push(i),i}ac(){this.tc&&we(47125,{hc:L4(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(let t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){let t=this.ec.indexOf(e);this.ec.splice(t,1)}};function L4(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}function U4(n){return(function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let s of r)if(s in i&&typeof i[s]=="function")return!0;return!1})(n,["next","error","complete"])}var _s=class extends th{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new cw,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new cw(e),this._firestoreClient=void 0,await e}}};function c3(n,e){let t=typeof n=="object"?n:Zc(),r=typeof n=="string"?n:e||j0,i=td(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let s=AO("firestore");s&&o3(i,...s)}return i}function Ew(n){if(n._terminated)throw new ne(H.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||Cee(n),n._firestoreClient}function Cee(n){var e,t,r;let i=n._freezeSettings(),s=(function(a,c,l,h){return new Zx(a,c,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,i3(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)})(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new v1(n._authCredentials,n._appCheckCredentials,n._queue,s,n._componentsProvider&&(function(a){let c=a?._online.build();return{_offline:a?._offline.build(c),_online:c}})(n._componentsProvider))}var Ma=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(zn.fromBase64String(e))}catch(t){throw new ne(H.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(zn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Cg(e,n._jsonSchema))return n.fromBase64String(e.bytes)}};Ma._jsonSchemaVersion="firestore/bytes/1.0",Ma._jsonSchema={type:nn("string",Ma._jsonSchemaVersion),bytes:nn("string")};var nh=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ne(H.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Rr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var rh=class{constructor(e){this._methodName=e}};var Oa=class n{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ne(H.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ne(H.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ue(this._lat,e._lat)||Ue(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:n._jsonSchemaVersion}}static fromJSON(e){if(Cg(e,n._jsonSchema))return new n(e.latitude,e.longitude)}};Oa._jsonSchemaVersion="firestore/geoPoint/1.0",Oa._jsonSchema={type:nn("string",Oa._jsonSchemaVersion),latitude:nn("number"),longitude:nn("number")};var Fa=class n{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0})(this._values,e._values)}toJSON(){return{type:n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Cg(e,n._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new n(e.vectorValues);throw new ne(H.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};Fa._jsonSchemaVersion="firestore/vectorValue/1.0",Fa._jsonSchema={type:nn("string",Fa._jsonSchemaVersion),vectorValues:nn("object")};var Eee=/^__.*__$/,w1=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new ys(e,this.data,this.fieldMask,t,this.fieldTransforms):new kl(e,this.data,t,this.fieldTransforms)}},lw=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new ys(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function l3(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw we(40011,{Ec:n})}}var I1=class n{constructor(e,t,r,i,s,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Ac(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.fc(e),i}gc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return dw(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(l3(this.Ec)&&Eee.test(e))throw this.wc('Document fields cannot begin and end with "__"')}},b1=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Iw(e)}Dc(e,t,r,i=!1){return new I1({Ec:e,methodName:t,bc:r,path:Rr.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function X1(n){let e=n._freezeSettings(),t=Iw(n._databaseId);return new b1(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Tee(n,e,t,r,i,s={}){let o=n.Dc(s.merge||s.mergeFields?2:0,e,t,i);Z1("Data must be an object, but it was:",o,r);let a=u3(r,o),c,l;if(s.merge)c=new Qr(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){let h=[];for(let p of s.mergeFields){let m=E1(e,p,t);if(!o.contains(m))throw new ne(H.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);h3(h,m)||h.push(m)}c=new Qr(h),l=o.fieldTransforms.filter(p=>c.covers(p.field))}else c=null,l=o.fieldTransforms;return new w1(new Ar(a),c,l)}var uw=class n extends rh{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};var C1=class n extends rh{_toFieldTransform(e){return new pA(e.path,new xl)}isEqual(e){return e instanceof n}};function See(n,e,t,r){let i=n.Dc(1,e,t);Z1("Data must be an object, but it was:",i,r);let s=[],o=Ar.empty();za(r,(c,l)=>{let h=eR(e,c,t);l=pn(l);let p=i.gc(h);if(l instanceof uw)s.push(h);else{let m=Sg(l,p);m!=null&&(s.push(h),o.set(h,m))}});let a=new Qr(s);return new lw(o,a,i.fieldTransforms)}function Dee(n,e,t,r,i,s){let o=n.Dc(1,e,t),a=[E1(e,r,t)],c=[i];if(s.length%2!=0)throw new ne(H.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<s.length;m+=2)a.push(E1(e,s[m])),c.push(s[m+1]);let l=[],h=Ar.empty();for(let m=a.length-1;m>=0;--m)if(!h3(l,a[m])){let b=a[m],k=c[m];k=pn(k);let O=o.gc(b);if(k instanceof uw)l.push(b);else{let N=Sg(k,O);N!=null&&(l.push(b),h.set(b,N))}}let p=new Qr(l);return new lw(h,p,o.fieldTransforms)}function xee(n,e,t,r=!1){return Sg(t,n.Dc(r?4:3,e))}function Sg(n,e){if(d3(n=pn(n)))return Z1("Unsupported field value:",e,n),u3(n,e);if(n instanceof rh)return(function(r,i){if(!l3(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);let s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(r,i){let s=[],o=0;for(let a of r){let c=Sg(a,i.yc(o));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}})(n,e)}return(function(r,i){if((r=pn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return uZ(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let s=rn.fromDate(r);return{timestampValue:W0(i.serializer,s)}}if(r instanceof rn){let s=new rn(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:W0(i.serializer,s)}}if(r instanceof Oa)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ma)return{bytesValue:Mj(i.serializer,r._byteString)};if(r instanceof xn){let s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.wc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:U1(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Fa)return(function(o,a){return{mapValue:{fields:{[P1]:{stringValue:M1},[Wd]:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.wc("VectorValues must only contain numeric values.");return L1(a.serializer,l)})}}}}}})(r,i);throw i.wc(`Unsupported field value: ${gw(r)}`)})(n,e)}function u3(n,e){let t={};return oj(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):za(n,(r,i)=>{let s=Sg(i,e.Vc(r));s!=null&&(t[r]=s)}),{mapValue:{fields:t}}}function d3(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof rn||n instanceof Oa||n instanceof Ma||n instanceof xn||n instanceof rh||n instanceof Fa)}function Z1(n,e,t){if(!d3(t)||!q4(t)){let r=gw(t);throw r==="an object"?e.wc(n+" a custom object"):e.wc(n+" "+r)}}function E1(n,e,t){if((e=pn(e))instanceof nh)return e._internalPath;if(typeof e=="string")return eR(n,e);throw dw("Field path arguments must be of type string or ",n,!1,void 0,t)}var Aee=new RegExp("[~\\*/\\[\\]]");function eR(n,e,t){if(e.search(Aee)>=0)throw dw(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new nh(...e.split("."))._internalPath}catch{throw dw(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function dw(n,e,t,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new ne(H.INVALID_ARGUMENT,a+n+c)}function h3(n,e){return n.some(t=>t.isEqual(e))}var hw=class{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new xn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new T1(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(Tw("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},T1=class extends hw{data(){return super.data()}};function Tw(n,e){return typeof e=="string"?eR(n,e):e instanceof nh?e._internalPath:e._delegate._internalPath}function f3(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ne(H.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Ig=class{},fw=class extends Ig{};function p3(n,e,...t){let r=[];e instanceof Ig&&r.push(e),r=r.concat(t),(function(s){let o=s.filter(c=>c instanceof S1).length,a=s.filter(c=>c instanceof pw).length;if(o>1||o>0&&a>0)throw new ne(H.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(let i of r)n=i._apply(n);return n}var pw=class n extends fw{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return y3(e._query,t),new $a(e.firestore,e.converter,hA(e._query,t))}_parse(e){let t=X1(e.firestore);return(function(s,o,a,c,l,h,p){let m;if(l.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new ne(H.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){B4(p,h);let k=[];for(let O of p)k.push(j4(c,s,O));m={arrayValue:{values:k}}}else m=j4(c,s,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||B4(p,h),m=xee(a,o,p,h==="in"||h==="not-in");return tn.create(l,h,m)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function g3(n,e,t){let r=e,i=Tw("where",n);return pw._create(i,r,t)}var S1=class n extends Ig{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:ki.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:((function(i,s){let o=i,a=s.getFlattenedFilters();for(let c of a)y3(o,c),o=hA(o,c)})(e._query,t),new $a(e.firestore,e.converter,hA(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var D1=class n extends fw{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=(function(i,s,o){if(i.startAt!==null)throw new ne(H.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new ne(H.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Dl(s,o)})(e._query,this._field,this._direction);return new $a(e.firestore,e.converter,(function(i,s){let o=i.explicitOrderBy.concat([s]);return new Ua(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)})(e._query,t))}};function m3(n,e="asc"){let t=e,r=Tw("orderBy",n);return D1._create(r,t)}function j4(n,e,t){if(typeof(t=pn(t))=="string"){if(t==="")throw new ne(H.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!wj(e)&&t.indexOf("/")!==-1)throw new ne(H.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(At.fromString(t));if(!pe.isDocumentKey(r))throw new ne(H.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return a4(n,new pe(r))}if(t instanceof xn)return a4(n,t._key);throw new ne(H.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${gw(t)}.`)}function B4(n,e){if(!Array.isArray(n)||n.length===0)throw new ne(H.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function y3(n,e){let t=(function(i,s){for(let o of i)for(let a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null})(n.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new ne(H.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ne(H.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var x1=class{convertValue(e,t="none"){switch(La(e)){case 0:return null;case 1:return e.booleanValue;case 2:return xt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(go(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw we(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return za(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertVectorValue(e){var t,r,i;let s=(i=(r=(t=e.fields)===null||t===void 0?void 0:t[Wd].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>xt(o.doubleValue));return new Fa(s)}convertGeoPoint(e){return new Oa(xt(e.latitude),xt(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=yw(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(hg(e));default:return null}}convertTimestamp(e){let t=po(e);return new rn(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=At.fromString(e);ft(jj(r),9688,{name:e});let i=new B0(r.get(1),r.get(3)),s=new pe(r.popFirst(5));return i.isEqual(t)||fo(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}};function Ree(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var bl=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Cl=class n extends hw{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new qd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(Tw("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ne(H.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,t={};return t.type=n._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};Cl._jsonSchemaVersion="firestore/documentSnapshot/1.0",Cl._jsonSchema={type:nn("string",Cl._jsonSchemaVersion),bundleSource:nn("string","DocumentSnapshot"),bundleName:nn("string"),bundle:nn("string")};var qd=class extends Cl{data(e={}){return super.data(e)}},El=class n{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new bl(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new qd(this._firestore,this._userDataWriter,r.key,r,new bl(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ne(H.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{let c=new qd(i._firestore,i._userDataWriter,a.doc.key,a.doc,new bl(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{let c=new qd(i._firestore,i._userDataWriter,a.doc.key,a.doc,new bl(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,h=-1;return a.type!==0&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:kee(a.type),doc:c,oldIndex:l,newIndex:h}})}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ne(H.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=n._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=lg.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let t=[],r=[],i=[];return this.docs.forEach(s=>{s._document!==null&&(t.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function kee(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return we(61501,{type:n})}}function _3(n){n=Yr(n,xn);let e=Yr(n.firestore,_s);return Iee(Ew(e),n._key).then(t=>E3(e,n,t))}El._jsonSchemaVersion="firestore/querySnapshot/1.0",El._jsonSchema={type:nn("string",El._jsonSchemaVersion),bundleSource:nn("string","QuerySnapshot"),bundleName:nn("string"),bundle:nn("string")};var bg=class extends x1{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ma(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new xn(this.firestore,null,t)}};function v3(n){n=Yr(n,$a);let e=Yr(n.firestore,_s),t=Ew(e),r=new bg(e);return f3(n._query),bee(t,n._query).then(i=>new El(e,r,n,i))}function w3(n,e,t,...r){n=Yr(n,xn);let i=Yr(n.firestore,_s),s=X1(i),o;return o=typeof(e=pn(e))=="string"||e instanceof nh?Dee(s,"updateDoc",n._key,e,t,r):See(s,"updateDoc",n._key,e),tR(i,[o.toMutation(n._key,ho.exists(!0))])}function I3(n){return tR(Yr(n.firestore,_s),[new pg(n._key,ho.none())])}function b3(n,e){let t=Yr(n.firestore,_s),r=J1(n),i=Ree(n.converter,e);return tR(t,[Tee(X1(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,ho.exists(!1))]).then(()=>r)}function C3(n,...e){var t,r,i;n=pn(n);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||U4(e[o])||(s=e[o++]);let a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(U4(e[o])){let p=e[o];e[o]=(t=p.next)===null||t===void 0?void 0:t.bind(p),e[o+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[o+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let c,l,h;if(n instanceof xn)l=Yr(n.firestore,_s),h=_w(n._key.path),c={next:p=>{e[o]&&e[o](E3(l,n,p))},error:e[o+1],complete:e[o+2]};else{let p=Yr(n,$a);l=Yr(p.firestore,_s),h=p._query;let m=new bg(l);c={next:b=>{e[o]&&e[o](new El(l,m,p,b))},error:e[o+1],complete:e[o+2]},f3(n._query)}return(function(m,b,k,O){let N=new wg(O),z=new vg(b,N,k);return m.asyncQueue.enqueueAndForget(async()=>G1(await ow(m),z)),()=>{N.Ou(),m.asyncQueue.enqueueAndForget(async()=>W1(await ow(m),z))}})(Ew(l),h,a,c)}function tR(n,e){return(function(r,i){let s=new Ai;return r.asyncQueue.enqueueAndForget(async()=>uee(await wee(r),i,s)),s.promise})(Ew(n),e)}function E3(n,e,t){let r=t.docs.get(e._key),i=new bg(n);return new Cl(n,i,e._key,r,new bl(t.hasPendingWrites,t.fromCache),e.converter)}function Ni(){return new C1("serverTimestamp")}(function(e,t=!0){(function(i){ih=i})(pa),Ei(new Yn("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),a=new _s(new Gx(r.getProvider("auth-internal")),new Qx(o,r.getProvider("app-check-internal")),(function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new ne(H.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new B0(l.options.projectId,h)})(o,i),o);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Ft(QU,YU,e),Ft(QU,YU,"esm2017")})();var Pi=class{constructor(e){return e}},T3="firestore",nR=class{constructor(){return rd(T3)}};var rR=new re("angularfire2.firestore-instances");function Nee(n,e){let t=pp(T3,n,e);return t&&new Pi(t)}function Pee(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Pi(r)}}var Mee={provide:nR,deps:[[new Ir,rR]]},Oee={provide:Pi,useFactory:Nee,deps:[[new Ir,rR],Ws]};function S3(n,...e){return Ft("angularfire",ga.full,"fst"),gr([Oee,Mee,{provide:rR,useFactory:Pee(n),multi:!0,deps:[it,wt,ma,tl,[new Ir,Rp],[new Ir,id],...e]}])}var ch=bn(b3,!0,2);var _o=bn(a3,!0,2);var lh=bn(I3,!0,2);var kr=bn(J1,!0,2);var D3=bn(_3,!0);var iR=bn(v3,!0);var x3=bn(c3,!0);var Dg=bn(C3,!0);var sR=bn(m3,!0,2),xg=bn(p3,!0,2);var Ha=bn(w3,!0,2);var Sw=bn(g3,!0,2);var uh={production:!0,firebase:{apiKey:"AIzaSyA3FfYeMQ9WiWHlNKU1wsaMt8v3TOuNn_I",authDomain:"homeneeds-21223.firebaseapp.com",projectId:"homeneeds-21223",storageBucket:"homeneeds-21223.firebasestorage.app",messagingSenderId:"278167644572",appId:"1:278167644572:web:c5ca2a5c3e4da71fda4059",measurementId:"G-HXX054VJJ6"},apiUrl:"https://home-needs-psi.vercel.app"};var V3=(()=>{class n{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,r){this._renderer=t,this._elementRef=r}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(r){return new(r||n)(je(yi),je(zt))};static \u0275dir=Rt({type:n})}return n})(),dR=(()=>{class n extends V3{static \u0275fac=(()=>{let t;return function(i){return(t||(t=js(n)))(i||n)}})();static \u0275dir=Rt({type:n,features:[ts]})}return n})(),kw=new re("");var Fee={provide:kw,useExisting:qi(()=>vs),multi:!0};function Vee(){let n=zr()?zr().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var Lee=new re(""),vs=(()=>{class n extends V3{_compositionMode;_composing=!1;constructor(t,r,i){super(t,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!Vee())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(r){return new(r||n)(je(yi),je(zt),je(Lee,8))};static \u0275dir=Rt({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&Y("input",function(o){return i._handleInput(o.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(o){return i._compositionEnd(o.target.value)})},standalone:!1,features:[Br([Fee]),ts]})}return n})();var Uee=new re(""),jee=new re("");function L3(n){return n!=null}function U3(n){return aa(n)?De(n):n}function j3(n){let e={};return n.forEach(t=>{e=t!=null?B(B({},e),t):e}),Object.keys(e).length===0?null:e}function B3(n,e){return e.map(t=>t(n))}function Bee(n){return!n.validate}function $3(n){return n.map(e=>Bee(e)?e:t=>e.validate(t))}function $ee(n){if(!n)return null;let e=n.filter(L3);return e.length==0?null:function(t){return j3(B3(t,e))}}function z3(n){return n!=null?$ee($3(n)):null}function zee(n){if(!n)return null;let e=n.filter(L3);return e.length==0?null:function(t){let r=B3(t,e).map(U3);return li(r).pipe(ge(j3))}}function H3(n){return n!=null?zee($3(n)):null}function A3(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function Hee(n){return n._rawValidators}function qee(n){return n._rawAsyncValidators}function oR(n){return n?Array.isArray(n)?n:[n]:[]}function xw(n,e){return Array.isArray(n)?n.includes(e):n===e}function R3(n,e){let t=oR(e);return oR(n).forEach(i=>{xw(t,i)||t.push(i)}),t}function k3(n,e){return oR(e).filter(t=>!xw(n,t))}var Aw=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=z3(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=H3(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},aR=class extends Aw{name;get formDirective(){return null}get path(){return null}},Pg=class extends Aw{_parent=null;name=null;valueAccessor=null},cR=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}};var qa=(()=>{class n extends cR{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(je(Pg,2))};static \u0275dir=Rt({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&_n("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[ts]})}return n})();var Ag="VALID",Dw="INVALID",dh="PENDING",Rg="DISABLED",Ml=class{},Rw=class extends Ml{value;source;constructor(e,t){super(),this.value=e,this.source=t}},kg=class extends Ml{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}},Ng=class extends Ml{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}},hh=class extends Ml{status;source;constructor(e,t){super(),this.status=e,this.source=t}};var lR=class extends Ml{source;constructor(e){super(),this.source=e}};function Gee(n){return(Nw(n)?n.validators:n)||null}function Wee(n){return Array.isArray(n)?z3(n):n||null}function Kee(n,e){return(Nw(e)?e.asyncValidators:n)||null}function Qee(n){return Array.isArray(n)?H3(n):n||null}function Nw(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}var uR=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return qt(this.statusReactive)}set status(e){qt(()=>this.statusReactive.set(e))}_status=ze(()=>this.statusReactive());statusReactive=he(void 0);get valid(){return this.status===Ag}get invalid(){return this.status===Dw}get pending(){return this.status==dh}get disabled(){return this.status===Rg}get enabled(){return this.status!==Rg}errors;get pristine(){return qt(this.pristineReactive)}set pristine(e){qt(()=>this.pristineReactive.set(e))}_pristine=ze(()=>this.pristineReactive());pristineReactive=he(!0);get dirty(){return!this.pristine}get touched(){return qt(this.touchedReactive)}set touched(e){qt(()=>this.touchedReactive.set(e))}_touched=ze(()=>this.touchedReactive());touchedReactive=he(!1);get untouched(){return!this.touched}_events=new ye;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(R3(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(R3(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(k3(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(k3(e,this._rawAsyncValidators))}hasValidator(e){return xw(this._rawValidators,e)}hasAsyncValidator(e){return xw(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(ae(B({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Ng(!0,r))}markAllAsDirty(e={}){this.markAsDirty({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsDirty(e))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new Ng(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(ae(B({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new kg(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new kg(!0,r))}markAsPending(e={}){this.status=dh;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new hh(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(ae(B({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Rg,this.errors=null,this._forEachChild(i=>{i.disable(ae(B({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Rw(this.value,r)),this._events.next(new hh(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(ae(B({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Ag,this._forEachChild(r=>{r.enable(ae(B({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(ae(B({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Ag||this.status===dh)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Rw(this.value,t)),this._events.next(new hh(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(ae(B({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Rg:Ag}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=dh,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1,shouldHaveEmitted:e!==!1};let r=U3(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new hh(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new We,this.statusChanges=new We}_calculateStatus(){return this._allControlsDisabled()?Rg:this.errors?Dw:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(dh)?dh:this._anyControlsHaveStatus(Dw)?Dw:Ag}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new kg(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new Ng(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Nw(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=Wee(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=Qee(this._rawAsyncValidators)}};var q3=new re("",{factory:()=>hR}),hR="always";function Yee(n,e){return[...e.path,n]}function Jee(n,e,t=hR){Zee(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),ete(n,e),nte(n,e),tte(n,e),Xee(n,e)}function N3(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function Xee(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function Zee(n,e){let t=Hee(n);e.validator!==null?n.setValidators(A3(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=qee(n);e.asyncValidator!==null?n.setAsyncValidators(A3(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();N3(e._rawValidators,i),N3(e._rawAsyncValidators,i)}function ete(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&G3(n,e)})}function tte(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&G3(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function G3(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function nte(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function rte(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function ite(n){return Object.getPrototypeOf(n.constructor)===dR}function ste(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(s=>{s.constructor===vs?t=s:ite(s)?r=s:i=s}),i||r||t||null}function P3(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function M3(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var ote=class extends uR{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,r){super(Gee(t),Kee(r,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Nw(t)&&(t.nonNullable||t.initialValueIsDefault)&&(M3(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),t.overwriteDefaultValue&&(this.defaultValue=this.value),this._pendingChange=!1,t?.emitEvent!==!1&&this._events.next(new lR(this))}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){P3(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){P3(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){M3(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var ate={provide:Pg,useExisting:qi(()=>vo)},O3=Promise.resolve(),vo=(()=>{class n extends Pg{_changeDetectorRef;callSetDisabledState;control=new ote;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new We;constructor(t,r,i,s,o,a){super(),this._changeDetectorRef=o,this.callSetDisabledState=a,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=ste(this,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),rte(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){Jee(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){O3.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&or(r);O3.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?Yee(t,this._parent):[t]}static \u0275fac=function(r){return new(r||n)(je(aR,9),je(Uee,10),je(jee,10),je(kw,10),je($r,8),je(q3,8))};static \u0275dir=Rt({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[Br([ate]),ts,jr]})}return n})();var cte={provide:kw,useExisting:qi(()=>Ga),multi:!0};function W3(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function lte(n){return n.split(":")[0]}var Ga=(()=>{class n extends dR{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;appRefInjector=M(_i).injector;destroyRef=M(Kn);cdr=M($r);_queuedWrite=!1;_writeValueAfterRender(){this._queuedWrite||this.appRefInjector.destroyed||(this._queuedWrite=!0,Bc({write:()=>{this.destroyRef.destroyed||(this._queuedWrite=!1,this.writeValue(this.value))}},{injector:this.appRefInjector}))}writeValue(t){this.cdr.markForCheck(),this.value=t;let r=this._getOptionId(t),i=W3(r,t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){let r=lte(t);return this._optionMap.has(r)?this._optionMap.get(r):t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=js(n)))(i||n)}})();static \u0275dir=Rt({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&Y("change",function(o){return i.onChange(o.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[Br([cte]),ts]})}return n})(),fh=(()=>{class n{_element;_renderer;_select;id;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(W3(this.id,t)),this._select._writeValueAfterRender())}set value(t){this._setElementValue(t),this._select&&this._select._writeValueAfterRender()}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select._writeValueAfterRender())}static \u0275fac=function(r){return new(r||n)(je(zt),je(yi),je(Ga,9))};static \u0275dir=Rt({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})(),ute={provide:kw,useExisting:qi(()=>K3),multi:!0};function F3(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function dte(n){return n.split(":")[0]}var K3=(()=>{class n extends dR{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){this.value=t;let r;if(Array.isArray(t)){let i=t.map(s=>this._getOptionId(s));r=(s,o)=>{s._setSelected(i.indexOf(o.toString())>-1)}}else r=(i,s)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{let i=[],s=r.selectedOptions;if(s!==void 0){let o=s;for(let a=0;a<o.length;a++){let c=o[a],l=this._getOptionValue(c.value);i.push(l)}}else{let o=r.options;for(let a=0;a<o.length;a++){let c=o[a];if(c.selected){let l=this._getOptionValue(c.value);i.push(l)}}}this.value=i,t(i)}}_registerOption(t){let r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){let r=dte(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=js(n)))(i||n)}})();static \u0275dir=Rt({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&Y("change",function(o){return i.onChange(o.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[Br([ute]),ts]})}return n})(),ph=(()=>{class n{_element;_renderer;_select;id;_value;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(F3(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(F3(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||n)(je(zt),je(yi),je(K3,9))};static \u0275dir=Rt({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})();var hte=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=br({type:n});static \u0275inj=rr({})}return n})();var Wa=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:q3,useValue:t.callSetDisabledState??hR}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=br({type:n});static \u0275inj=rr({imports:[hte]})}return n})();var fR;function fte(){if(fR==null){let n=typeof document<"u"?document.head:null;fR=!!(n&&(n.createShadowRoot||n.attachShadow))}return fR}function Mw(n){if(fte()){let e=n.getRootNode?n.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}function Mg(n){return n.composedPath?n.composedPath()[0]:n.target}function Q3(n){return n.buttons===0||n.detail===0}function Y3(n){let e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!!e&&e.identifier===-1&&(e.radiusX==null||e.radiusX===1)&&(e.radiusY==null||e.radiusY===1)}function Ow(n,e=0){return pte(n)?Number(n):arguments.length===2?e:0}function pte(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}function Mi(n){return n instanceof zt?n.nativeElement:n}var Fw=new WeakMap,J3=(()=>{class n{_appRef;_injector=M(wt);_environmentInjector=M(Nt);load(t){let r=this._appRef=this._appRef||this._injector.get(_i),i=Fw.get(r);i||(i={loaders:new Set,refs:[]},Fw.set(r,i),r.onDestroy(()=>{Fw.get(r)?.refs.forEach(s=>s.destroy()),Fw.delete(r)})),i.loaders.has(t)||(i.loaders.add(t),i.refs.push(ZM(t,{environmentInjector:this._environmentInjector})))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var pR;try{pR=typeof Intl<"u"&&Intl.v8BreakIterator}catch{pR=!1}var gR=(()=>{class n{_platformId=M(Bs);isBrowser=this._platformId?v2(this._platformId):typeof document=="object"&&!!document;EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent);TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent);BLINK=this.isBrowser&&!!(window.chrome||pR)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT;WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT;IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window);FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent);ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT;SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT;constructor(){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var gte=new re("cdk-dir-doc",{providedIn:"root",factory:()=>M(It)}),mte=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;function yte(n){let e=n?.toLowerCase()||"";return e==="auto"&&typeof navigator<"u"&&navigator?.language?mte.test(navigator.language)?"rtl":"ltr":e==="rtl"?"rtl":"ltr"}var mR=(()=>{class n{get value(){return this.valueSignal()}valueSignal=he("ltr");change=new We;constructor(){let t=M(gte,{optional:!0});if(t){let r=t.body?t.body.dir:null,i=t.documentElement?t.documentElement.dir:null;this.valueSignal.set(yte(r||i||"ltr"))}}ngOnDestroy(){this.change.complete()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var _te=20,X3=(()=>{class n{_ngZone=M(it);_platform=M(gR);_renderer=M(wr).createRenderer(null,null);_cleanupGlobalListener;constructor(){}_scrolled=new ye;_scrolledCount=0;scrollContainers=new Map;register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){let r=this.scrollContainers.get(t);r&&(r.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=_te){return this._platform.isBrowser?new Se(r=>{this._cleanupGlobalListener||(this._cleanupGlobalListener=this._ngZone.runOutsideAngular(()=>this._renderer.listen("document","scroll",()=>this._scrolled.next())));let i=t>0?this._scrolled.pipe(Gm(t)).subscribe(r):this._scrolled.subscribe(r);return this._scrolledCount++,()=>{i.unsubscribe(),this._scrolledCount--,this._scrolledCount||(this._cleanupGlobalListener?.(),this._cleanupGlobalListener=void 0)}}):le()}ngOnDestroy(){this._cleanupGlobalListener?.(),this._cleanupGlobalListener=void 0,this.scrollContainers.forEach((t,r)=>this.deregister(r)),this._scrolled.complete()}ancestorScrolled(t,r){let i=this.getAncestorScrollContainers(t);return this.scrolled(r).pipe(pr(s=>!s||i.indexOf(s)>-1))}getAncestorScrollContainers(t){let r=[];return this.scrollContainers.forEach((i,s)=>{this._scrollableContainsElement(s,t)&&r.push(s)}),r}_scrollableContainsElement(t,r){let i=Mi(r),s=t.getElementRef().nativeElement;do if(i==s)return!0;while(i=i.parentElement);return!1}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var vte=20,Z3=(()=>{class n{_platform=M(gR);_listeners;_viewportSize;_change=new ye;_document=M(It);constructor(){let t=M(it),r=M(wr).createRenderer(null,null);t.runOutsideAngular(()=>{if(this._platform.isBrowser){let i=s=>this._change.next(s);this._listeners=[r.listen("window","resize",i),r.listen("window","orientationchange",i)]}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){this._listeners?.forEach(t=>t()),this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();let t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){let t=this.getViewportScrollPosition(),{width:r,height:i}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+i,right:t.left+r,height:i,width:r}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};let t=this._document,r=this._getWindow(),i=t.documentElement,s=i.getBoundingClientRect(),o=-s.top||t.body.scrollTop||r.scrollY||i.scrollTop||0,a=-s.left||t.body.scrollLeft||r.scrollX||i.scrollLeft||0;return{top:o,left:a}}change(t=vte){return t>0?this._change.pipe(Gm(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){let t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var eB=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=br({type:n});static \u0275inj=rr({})}return n})();var yR={},Vw=class n{_appId=M(Fu);static _infix=`a${Math.floor(Math.random()*1e5).toString()}`;getId(e,t=!1){return this._appId!=="ng"&&(e+=this._appId),yR.hasOwnProperty(e)||(yR[e]=0),`${e}${t?n._infix+"-":""}${yR[e]++}`}static \u0275fac=function(t){return new(t||n)};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})};function tB(n){return Array.isArray(n)?n:[n]}function wR(n){let e=n.cloneNode(!0),t=e.querySelectorAll("[id]"),r=n.nodeName.toLowerCase();e.removeAttribute("id");for(let i=0;i<t.length;i++)t[i].removeAttribute("id");return r==="canvas"?iB(n,e):(r==="input"||r==="select"||r==="textarea")&&rB(n,e),nB("canvas",n,e,iB),nB("input, textarea, select",n,e,rB),e}function nB(n,e,t,r){let i=e.querySelectorAll(n);if(i.length){let s=t.querySelectorAll(n);for(let o=0;o<i.length;o++)r(i[o],s[o])}}var wte=0;function rB(n,e){e.type!=="file"&&(e.value=n.value),e.type==="radio"&&e.name&&(e.name=`mat-clone-${e.name}-${wte++}`)}function iB(n,e){let t=e.getContext("2d");if(t)try{t.drawImage(n,0,0)}catch{}}function SR(n){let e=n.getBoundingClientRect();return{top:e.top,right:e.right,bottom:e.bottom,left:e.left,width:e.width,height:e.height,x:e.x,y:e.y}}function IR(n,e,t){let{top:r,bottom:i,left:s,right:o}=n;return t>=r&&t<=i&&e>=s&&e<=o}function Ite(n,e){let t=e.left<n.left,r=e.left+e.width>n.right,i=e.top<n.top,s=e.top+e.height>n.bottom;return t||r||i||s}function Vg(n,e,t){n.top+=e,n.bottom=n.top+n.height,n.left+=t,n.right=n.left+n.width}function sB(n,e,t,r){let{top:i,right:s,bottom:o,left:a,width:c,height:l}=n,h=c*e,p=l*e;return r>i-p&&r<o+p&&t>a-h&&t<s+h}var Lw=class{_document;positions=new Map;constructor(e){this._document=e}clear(){this.positions.clear()}cache(e){this.clear(),this.positions.set(this._document,{scrollPosition:this.getViewportScrollPosition()}),e.forEach(t=>{this.positions.set(t,{scrollPosition:{top:t.scrollTop,left:t.scrollLeft},clientRect:SR(t)})})}handleScroll(e){let t=Mg(e),r=this.positions.get(t);if(!r)return null;let i=r.scrollPosition,s,o;if(t===this._document){let l=this.getViewportScrollPosition();s=l.top,o=l.left}else s=t.scrollTop,o=t.scrollLeft;let a=i.top-s,c=i.left-o;return this.positions.forEach((l,h)=>{l.clientRect&&t!==h&&t.contains(h)&&Vg(l.clientRect,a,c)}),i.top=s,i.left=o,{top:a,left:c}}getViewportScrollPosition(){return{top:window.scrollY,left:window.scrollX}}};function yB(n,e){let t=n.rootNodes;if(t.length===1&&t[0].nodeType===e.ELEMENT_NODE)return t[0];let r=e.createElement("div");return t.forEach(i=>r.appendChild(i)),r}function DR(n,e,t){for(let r in e)if(e.hasOwnProperty(r)){let i=e[r];i?n.setProperty(r,i,t?.has(r)?"important":""):n.removeProperty(r)}return n}function gh(n,e){let t=e?"":"none";DR(n.style,{"touch-action":e?"":"none","-webkit-user-drag":e?"":"none","-webkit-tap-highlight-color":e?"":"transparent","user-select":t,"-ms-user-select":t,"-webkit-user-select":t,"-moz-user-select":t})}function oB(n,e,t){DR(n.style,{position:e?"":"fixed",top:e?"":"0",opacity:e?"":"0",left:e?"":"-999em"},t)}function Uw(n,e){return e&&e!="none"?n+" "+e:n}function aB(n,e){n.style.width=`${e.width}px`,n.style.height=`${e.height}px`,n.style.transform=Lg(e.left,e.top)}function Lg(n,e){return`translate3d(${Math.round(n)}px, ${Math.round(e)}px, 0)`}function cB(n){let e=n.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(n)*e}function bte(n){let e=getComputedStyle(n),t=_R(e,"transition-property"),r=t.find(a=>a==="transform"||a==="all");if(!r)return 0;let i=t.indexOf(r),s=_R(e,"transition-duration"),o=_R(e,"transition-delay");return cB(s[i])+cB(o[i])}function _R(n,e){return n.getPropertyValue(e).split(",").map(r=>r.trim())}var Cte=new Set(["position"]),bR=class{_document;_rootElement;_direction;_initialDomRect;_previewTemplate;_previewClass;_pickupPositionOnPage;_initialTransform;_zIndex;_renderer;_previewEmbeddedView;_preview;get element(){return this._preview}constructor(e,t,r,i,s,o,a,c,l,h){this._document=e,this._rootElement=t,this._direction=r,this._initialDomRect=i,this._previewTemplate=s,this._previewClass=o,this._pickupPositionOnPage=a,this._initialTransform=c,this._zIndex=l,this._renderer=h}attach(e){this._preview=this._createPreview(),e.appendChild(this._preview),lB(this._preview)&&this._preview.showPopover()}destroy(){this._preview.remove(),this._previewEmbeddedView?.destroy(),this._preview=this._previewEmbeddedView=null}setTransform(e){this._preview.style.transform=e}getBoundingClientRect(){return this._preview.getBoundingClientRect()}addClass(e){this._preview.classList.add(e)}getTransitionDuration(){return bte(this._preview)}addEventListener(e,t){return this._renderer.listen(this._preview,e,t)}_createPreview(){let e=this._previewTemplate,t=this._previewClass,r=e?e.template:null,i;if(r&&e){let s=e.matchSize?this._initialDomRect:null,o=e.viewContainer.createEmbeddedView(r,e.context);o.detectChanges(),i=yB(o,this._document),this._previewEmbeddedView=o,e.matchSize?aB(i,s):i.style.transform=Lg(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else i=wR(this._rootElement),aB(i,this._initialDomRect),this._initialTransform&&(i.style.transform=this._initialTransform);return DR(i.style,{"pointer-events":"none",margin:lB(i)?"0 auto 0 0":"0",position:"fixed",top:"0",left:"0","z-index":this._zIndex+""},Cte),gh(i,!1),i.classList.add("cdk-drag-preview"),i.setAttribute("popover","manual"),i.setAttribute("dir",this._direction),t&&(Array.isArray(t)?t.forEach(s=>i.classList.add(s)):i.classList.add(t)),i}};function lB(n){return"showPopover"in n}var Ete={passive:!0},uB={passive:!1},Tte={passive:!1,capture:!0},Ste=800,dB="cdk-drag-placeholder",hB=new Set(["position"]),CR=class{_config;_document;_ngZone;_viewportRuler;_dragDropRegistry;_renderer;_rootElementCleanups;_cleanupShadowRootSelectStart;_preview;_previewContainer;_placeholderRef;_placeholder;_pickupPositionInElement;_pickupPositionOnPage;_marker;_anchor=null;_passiveTransform={x:0,y:0};_activeTransform={x:0,y:0};_initialTransform;_hasStartedDragging=he(!1);_hasMoved;_initialContainer;_initialIndex;_parentPositions;_moveEvents=new ye;_pointerDirectionDelta;_pointerPositionAtLastDirectionChange;_lastKnownPointerPosition;_rootElement;_ownerSVGElement;_rootElementTapHighlight;_pointerMoveSubscription=mt.EMPTY;_pointerUpSubscription=mt.EMPTY;_scrollSubscription=mt.EMPTY;_resizeSubscription=mt.EMPTY;_lastTouchEventTime;_dragStartTime;_boundaryElement=null;_nativeInteractionsEnabled=!0;_initialDomRect;_previewRect;_boundaryRect;_previewTemplate;_placeholderTemplate;_handles=[];_disabledHandles=new Set;_dropContainer;_direction="ltr";_parentDragRef;_cachedShadowRoot;lockAxis=null;dragStartDelay=0;previewClass;scale=1;get disabled(){return this._disabled||!!(this._dropContainer&&this._dropContainer.disabled)}set disabled(e){e!==this._disabled&&(this._disabled=e,this._toggleNativeDragInteractions(),this._handles.forEach(t=>gh(t,e)))}_disabled=!1;beforeStarted=new ye;started=new ye;released=new ye;ended=new ye;entered=new ye;exited=new ye;dropped=new ye;moved=this._moveEvents;data;constrainPosition;constructor(e,t,r,i,s,o,a){this._config=t,this._document=r,this._ngZone=i,this._viewportRuler=s,this._dragDropRegistry=o,this._renderer=a,this.withRootElement(e).withParent(t.parentDragRef||null),this._parentPositions=new Lw(r),o.registerDragItem(this)}getPlaceholderElement(){return this._placeholder}getRootElement(){return this._rootElement}getVisibleElement(){return this.isDragging()?this.getPlaceholderElement():this.getRootElement()}withHandles(e){this._handles=e.map(r=>Mi(r)),this._handles.forEach(r=>gh(r,this.disabled)),this._toggleNativeDragInteractions();let t=new Set;return this._disabledHandles.forEach(r=>{this._handles.indexOf(r)>-1&&t.add(r)}),this._disabledHandles=t,this}withPreviewTemplate(e){return this._previewTemplate=e,this}withPlaceholderTemplate(e){return this._placeholderTemplate=e,this}withRootElement(e){let t=Mi(e);if(t!==this._rootElement){this._removeRootElementListeners();let r=this._renderer;this._rootElementCleanups=this._ngZone.runOutsideAngular(()=>[r.listen(t,"mousedown",this._pointerDown,uB),r.listen(t,"touchstart",this._pointerDown,Ete),r.listen(t,"dragstart",this._nativeDragStart,uB)]),this._initialTransform=void 0,this._rootElement=t}return typeof SVGElement<"u"&&this._rootElement instanceof SVGElement&&(this._ownerSVGElement=this._rootElement.ownerSVGElement),this}withBoundaryElement(e){return this._boundaryElement=e?Mi(e):null,this._resizeSubscription.unsubscribe(),e&&(this._resizeSubscription=this._viewportRuler.change(10).subscribe(()=>this._containInsideBoundaryOnResize())),this}withParent(e){return this._parentDragRef=e,this}dispose(){this._removeRootElementListeners(),this.isDragging()&&this._rootElement?.remove(),this._marker?.remove(),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeListeners(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._resizeSubscription.unsubscribe(),this._parentPositions.clear(),this._boundaryElement=this._rootElement=this._ownerSVGElement=this._placeholderTemplate=this._previewTemplate=this._marker=this._parentDragRef=null}isDragging(){return this._hasStartedDragging()&&this._dragDropRegistry.isDragging(this)}reset(){this._rootElement.style.transform=this._initialTransform||"",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}resetToBoundary(){if(this._boundaryElement&&this._rootElement&&Ite(this._boundaryElement.getBoundingClientRect(),this._rootElement.getBoundingClientRect())){let e=this._boundaryElement.getBoundingClientRect(),t=this._rootElement.getBoundingClientRect(),r=0,i=0;t.left<e.left?r=e.left-t.left:t.right>e.right&&(r=e.right-t.right),t.top<e.top?i=e.top-t.top:t.bottom>e.bottom&&(i=e.bottom-t.bottom);let s=this._activeTransform.x,o=this._activeTransform.y,a=s+r,c=o+i;this._rootElement.style.transform=Lg(a,c),this._activeTransform={x:a,y:c},this._passiveTransform={x:a,y:c}}}disableHandle(e){!this._disabledHandles.has(e)&&this._handles.indexOf(e)>-1&&(this._disabledHandles.add(e),gh(e,!0))}enableHandle(e){this._disabledHandles.has(e)&&(this._disabledHandles.delete(e),gh(e,this.disabled))}withDirection(e){return this._direction=e,this}_withDropContainer(e){this._dropContainer=e}getFreeDragPosition(){let e=this.isDragging()?this._activeTransform:this._passiveTransform;return{x:e.x,y:e.y}}setFreeDragPosition(e){return this._activeTransform={x:0,y:0},this._passiveTransform.x=e.x,this._passiveTransform.y=e.y,this._dropContainer||this._applyRootElementTransform(e.x,e.y),this}withPreviewContainer(e){return this._previewContainer=e,this}_sortFromLastPointerPosition(){let e=this._lastKnownPointerPosition;e&&this._dropContainer&&this._updateActiveDropContainer(this._getConstrainedPointerPosition(e),e)}_removeListeners(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe(),this._scrollSubscription.unsubscribe(),this._cleanupShadowRootSelectStart?.(),this._cleanupShadowRootSelectStart=void 0}_destroyPreview(){this._preview?.destroy(),this._preview=null}_destroyPlaceholder(){this._anchor?.remove(),this._placeholder?.remove(),this._placeholderRef?.destroy(),this._placeholder=this._anchor=this._placeholderRef=null}_pointerDown=e=>{if(this.beforeStarted.next(),this._handles.length){let t=this._getTargetHandle(e);t&&!this._disabledHandles.has(t)&&!this.disabled&&this._initializeDragSequence(t,e)}else this.disabled||this._initializeDragSequence(this._rootElement,e)};_pointerMove=e=>{let t=this._getPointerPositionOnPage(e);if(!this._hasStartedDragging()){let i=Math.abs(t.x-this._pickupPositionOnPage.x),s=Math.abs(t.y-this._pickupPositionOnPage.y);if(i+s>=this._config.dragStartThreshold){let a=Date.now()>=this._dragStartTime+this._getDragStartDelay(e),c=this._dropContainer;if(!a){this._endDragSequence(e);return}(!c||!c.isDragging()&&!c.isReceiving())&&(e.cancelable&&e.preventDefault(),this._hasStartedDragging.set(!0),this._ngZone.run(()=>this._startDragSequence(e)))}return}e.cancelable&&e.preventDefault();let r=this._getConstrainedPointerPosition(t);if(this._hasMoved=!0,this._lastKnownPointerPosition=t,this._updatePointerDirectionDelta(r),this._dropContainer)this._updateActiveDropContainer(r,t);else{let i=this.constrainPosition?this._initialDomRect:this._pickupPositionOnPage,s=this._activeTransform;s.x=r.x-i.x+this._passiveTransform.x,s.y=r.y-i.y+this._passiveTransform.y,this._applyRootElementTransform(s.x,s.y)}this._moveEvents.observers.length&&this._ngZone.run(()=>{this._moveEvents.next({source:this,pointerPosition:r,event:e,distance:this._getDragDistance(r),delta:this._pointerDirectionDelta})})};_pointerUp=e=>{this._endDragSequence(e)};_endDragSequence(e){if(this._dragDropRegistry.isDragging(this)&&(this._removeListeners(),this._dragDropRegistry.stopDragging(this),this._toggleNativeDragInteractions(),this._handles&&(this._rootElement.style.webkitTapHighlightColor=this._rootElementTapHighlight),!!this._hasStartedDragging()))if(this.released.next({source:this,event:e}),this._dropContainer)this._dropContainer._stopScrolling(),this._animatePreviewToPlaceholder().then(()=>{this._cleanupDragArtifacts(e),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)});else{this._passiveTransform.x=this._activeTransform.x;let t=this._getPointerPositionOnPage(e);this._passiveTransform.y=this._activeTransform.y,this._ngZone.run(()=>{this.ended.next({source:this,distance:this._getDragDistance(t),dropPoint:t,event:e})}),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)}}_startDragSequence(e){Og(e)&&(this._lastTouchEventTime=Date.now()),this._toggleNativeDragInteractions();let t=this._getShadowRoot(),r=this._dropContainer;if(t&&this._ngZone.runOutsideAngular(()=>{this._cleanupShadowRootSelectStart=this._renderer.listen(t,"selectstart",Dte,Tte)}),r){let i=this._rootElement,s=i.parentNode,o=this._placeholder=this._createPlaceholderElement(),a=this._marker=this._marker||this._document.createComment("");s.insertBefore(a,i),this._initialTransform=i.style.transform||"",this._preview=new bR(this._document,this._rootElement,this._direction,this._initialDomRect,this._previewTemplate||null,this.previewClass||null,this._pickupPositionOnPage,this._initialTransform,this._config.zIndex||1e3,this._renderer),this._preview.attach(this._getPreviewInsertionPoint(s,t)),oB(i,!1,hB),this._document.body.appendChild(s.replaceChild(o,i)),this.started.next({source:this,event:e}),r.start(),this._initialContainer=r,this._initialIndex=r.getItemIndex(this)}else this.started.next({source:this,event:e}),this._initialContainer=this._initialIndex=void 0;this._parentPositions.cache(r?r.getScrollableParents():[])}_initializeDragSequence(e,t){this._parentDragRef&&t.stopPropagation();let r=this.isDragging(),i=Og(t),s=!i&&t.button!==0,o=this._rootElement,a=Mg(t),c=!i&&this._lastTouchEventTime&&this._lastTouchEventTime+Ste>Date.now(),l=i?Y3(t):Q3(t);if(a&&a.draggable&&t.type==="mousedown"&&t.preventDefault(),r||s||c||l)return;if(this._handles.length){let m=o.style;this._rootElementTapHighlight=m.webkitTapHighlightColor||"",m.webkitTapHighlightColor="transparent"}this._hasMoved=!1,this._hasStartedDragging.set(this._hasMoved),this._removeListeners(),this._initialDomRect=this._rootElement.getBoundingClientRect(),this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(m=>this._updateOnScroll(m)),this._boundaryElement&&(this._boundaryRect=SR(this._boundaryElement));let h=this._previewTemplate;this._pickupPositionInElement=h&&h.template&&!h.matchSize?{x:0,y:0}:this._getPointerPositionInElement(this._initialDomRect,e,t);let p=this._pickupPositionOnPage=this._lastKnownPointerPosition=this._getPointerPositionOnPage(t);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:p.x,y:p.y},this._dragStartTime=Date.now(),this._dragDropRegistry.startDragging(this,t)}_cleanupDragArtifacts(e){oB(this._rootElement,!0,hB),this._marker.parentNode.replaceChild(this._rootElement,this._marker),this._destroyPreview(),this._destroyPlaceholder(),this._initialDomRect=this._boundaryRect=this._previewRect=this._initialTransform=void 0,this._ngZone.run(()=>{let t=this._dropContainer,r=t.getItemIndex(this),i=this._getPointerPositionOnPage(e),s=this._getDragDistance(i),o=t._isOverContainer(i.x,i.y);this.ended.next({source:this,distance:s,dropPoint:i,event:e}),this.dropped.next({item:this,currentIndex:r,previousIndex:this._initialIndex,container:t,previousContainer:this._initialContainer,isPointerOverContainer:o,distance:s,dropPoint:i,event:e}),t.drop(this,r,this._initialIndex,this._initialContainer,o,s,i,e),this._dropContainer=this._initialContainer})}_updateActiveDropContainer({x:e,y:t},{x:r,y:i}){let s=this._initialContainer._getSiblingContainerFromPosition(this,e,t);!s&&this._dropContainer!==this._initialContainer&&this._initialContainer._isOverContainer(e,t)&&(s=this._initialContainer),s&&s!==this._dropContainer&&this._ngZone.run(()=>{let o=this._dropContainer.getItemIndex(this),a=this._dropContainer.getItemAtIndex(o+1)?.getVisibleElement()||null;this.exited.next({item:this,container:this._dropContainer}),this._dropContainer.exit(this),this._conditionallyInsertAnchor(s,this._dropContainer,a),this._dropContainer=s,this._dropContainer.enter(this,e,t,s===this._initialContainer&&s.sortingDisabled?this._initialIndex:void 0),this.entered.next({item:this,container:s,currentIndex:s.getItemIndex(this)})}),this.isDragging()&&(this._dropContainer._startScrollingIfNecessary(r,i),this._dropContainer._sortItem(this,e,t,this._pointerDirectionDelta),this.constrainPosition?this._applyPreviewTransform(e,t):this._applyPreviewTransform(e-this._pickupPositionInElement.x,t-this._pickupPositionInElement.y))}_animatePreviewToPlaceholder(){if(!this._hasMoved)return Promise.resolve();let e=this._placeholder.getBoundingClientRect();this._preview.addClass("cdk-drag-animating"),this._applyPreviewTransform(e.left,e.top);let t=this._preview.getTransitionDuration();return t===0?Promise.resolve():this._ngZone.runOutsideAngular(()=>new Promise(r=>{let i=a=>{(!a||this._preview&&Mg(a)===this._preview.element&&a.propertyName==="transform")&&(o(),r(),clearTimeout(s))},s=setTimeout(i,t*1.5),o=this._preview.addEventListener("transitionend",i)}))}_createPlaceholderElement(){let e=this._placeholderTemplate,t=e?e.template:null,r;return t?(this._placeholderRef=e.viewContainer.createEmbeddedView(t,e.context),this._placeholderRef.detectChanges(),r=yB(this._placeholderRef,this._document)):r=wR(this._rootElement),r.style.pointerEvents="none",r.classList.add(dB),r}_getPointerPositionInElement(e,t,r){let i=t===this._rootElement?null:t,s=i?i.getBoundingClientRect():e,o=Og(r)?r.targetTouches[0]:r,a=this._getViewportScrollPosition(),c=o.pageX-s.left-a.left,l=o.pageY-s.top-a.top;return{x:s.left-e.left+c,y:s.top-e.top+l}}_getPointerPositionOnPage(e){let t=this._getViewportScrollPosition(),r=Og(e)?e.touches[0]||e.changedTouches[0]||{pageX:0,pageY:0}:e,i=r.pageX-t.left,s=r.pageY-t.top;if(this._ownerSVGElement){let o=this._ownerSVGElement.getScreenCTM();if(o){let a=this._ownerSVGElement.createSVGPoint();return a.x=i,a.y=s,a.matrixTransform(o.inverse())}}return{x:i,y:s}}_getConstrainedPointerPosition(e){let t=this._dropContainer?this._dropContainer.lockAxis:null,{x:r,y:i}=this.constrainPosition?this.constrainPosition(e,this,this._initialDomRect,this._pickupPositionInElement):e;if(this.lockAxis==="x"||t==="x"?i=this._pickupPositionOnPage.y-(this.constrainPosition?this._pickupPositionInElement.y:0):(this.lockAxis==="y"||t==="y")&&(r=this._pickupPositionOnPage.x-(this.constrainPosition?this._pickupPositionInElement.x:0)),this._boundaryRect){let{x:s,y:o}=this.constrainPosition?{x:0,y:0}:this._pickupPositionInElement,a=this._boundaryRect,{width:c,height:l}=this._getPreviewRect(),h=a.top+o,p=a.bottom-(l-o),m=a.left+s,b=a.right-(c-s);r=fB(r,m,b),i=fB(i,h,p)}return{x:r,y:i}}_updatePointerDirectionDelta(e){let{x:t,y:r}=e,i=this._pointerDirectionDelta,s=this._pointerPositionAtLastDirectionChange,o=Math.abs(t-s.x),a=Math.abs(r-s.y);return o>this._config.pointerDirectionChangeThreshold&&(i.x=t>s.x?1:-1,s.x=t),a>this._config.pointerDirectionChangeThreshold&&(i.y=r>s.y?1:-1,s.y=r),i}_toggleNativeDragInteractions(){if(!this._rootElement||!this._handles)return;let e=this._handles.length>0||!this.isDragging();e!==this._nativeInteractionsEnabled&&(this._nativeInteractionsEnabled=e,gh(this._rootElement,e))}_removeRootElementListeners(){this._rootElementCleanups?.forEach(e=>e()),this._rootElementCleanups=void 0}_applyRootElementTransform(e,t){let r=1/this.scale,i=Lg(e*r,t*r),s=this._rootElement.style;this._initialTransform==null&&(this._initialTransform=s.transform&&s.transform!="none"?s.transform:""),s.transform=Uw(i,this._initialTransform)}_applyPreviewTransform(e,t){let r=this._previewTemplate?.template?void 0:this._initialTransform,i=Lg(e,t);this._preview.setTransform(Uw(i,r))}_getDragDistance(e){let t=this._pickupPositionOnPage;return t?{x:e.x-t.x,y:e.y-t.y}:{x:0,y:0}}_cleanupCachedDimensions(){this._boundaryRect=this._previewRect=void 0,this._parentPositions.clear()}_containInsideBoundaryOnResize(){let{x:e,y:t}=this._passiveTransform;if(e===0&&t===0||this.isDragging()||!this._boundaryElement)return;let r=this._rootElement.getBoundingClientRect(),i=this._boundaryElement.getBoundingClientRect();if(i.width===0&&i.height===0||r.width===0&&r.height===0)return;let s=i.left-r.left,o=r.right-i.right,a=i.top-r.top,c=r.bottom-i.bottom;i.width>r.width?(s>0&&(e+=s),o>0&&(e-=o)):e=0,i.height>r.height?(a>0&&(t+=a),c>0&&(t-=c)):t=0,(e!==this._passiveTransform.x||t!==this._passiveTransform.y)&&this.setFreeDragPosition({y:t,x:e})}_getDragStartDelay(e){let t=this.dragStartDelay;return typeof t=="number"?t:Og(e)?t.touch:t?t.mouse:0}_updateOnScroll(e){let t=this._parentPositions.handleScroll(e);if(t){let r=Mg(e);this._boundaryRect&&r!==this._boundaryElement&&r.contains(this._boundaryElement)&&Vg(this._boundaryRect,t.top,t.left),this._pickupPositionOnPage.x+=t.left,this._pickupPositionOnPage.y+=t.top,this._dropContainer||(this._activeTransform.x-=t.left,this._activeTransform.y-=t.top,this._applyRootElementTransform(this._activeTransform.x,this._activeTransform.y))}}_getViewportScrollPosition(){return this._parentPositions.positions.get(this._document)?.scrollPosition||this._parentPositions.getViewportScrollPosition()}_getShadowRoot(){return this._cachedShadowRoot===void 0&&(this._cachedShadowRoot=Mw(this._rootElement)),this._cachedShadowRoot}_getPreviewInsertionPoint(e,t){let r=this._previewContainer||"global";if(r==="parent")return e;if(r==="global"){let i=this._document;return t||i.fullscreenElement||i.webkitFullscreenElement||i.mozFullScreenElement||i.msFullscreenElement||i.body}return Mi(r)}_getPreviewRect(){return(!this._previewRect||!this._previewRect.width&&!this._previewRect.height)&&(this._previewRect=this._preview?this._preview.getBoundingClientRect():this._initialDomRect),this._previewRect}_nativeDragStart=e=>{if(this._handles.length){let t=this._getTargetHandle(e);t&&!this._disabledHandles.has(t)&&!this.disabled&&e.preventDefault()}else this.disabled||e.preventDefault()};_getTargetHandle(e){return this._handles.find(t=>e.target&&(e.target===t||t.contains(e.target)))}_conditionallyInsertAnchor(e,t,r){if(e===this._initialContainer)this._anchor?.remove(),this._anchor=null;else if(t===this._initialContainer&&t.hasAnchor){let i=this._anchor??=wR(this._placeholder);i.classList.remove(dB),i.classList.add("cdk-drag-anchor"),i.style.transform="",r?r.before(i):Mi(t.element).appendChild(i)}}};function fB(n,e,t){return Math.max(e,Math.min(t,n))}function Og(n){return n.type[0]==="t"}function Dte(n){n.preventDefault()}function $w(n,e,t){let r=pB(e,n.length-1),i=pB(t,n.length-1);if(r===i)return;let s=n[r],o=i<r?-1:1;for(let a=r;a!==i;a+=o)n[a]=n[a+o];n[i]=s}function pB(n,e){return Math.max(0,Math.min(e,n))}var jw=class{_dragDropRegistry;_element;_sortPredicate;_itemPositions=[];_activeDraggables;orientation="vertical";direction;constructor(e){this._dragDropRegistry=e}_previousSwap={drag:null,delta:0,overlaps:!1};start(e){this.withItems(e)}sort(e,t,r,i){let s=this._itemPositions,o=this._getItemIndexFromPointerPosition(e,t,r,i);if(o===-1&&s.length>0)return null;let a=this.orientation==="horizontal",c=s.findIndex(N=>N.drag===e),l=s[o],h=s[c].clientRect,p=l.clientRect,m=c>o?1:-1,b=this._getItemOffsetPx(h,p,m),k=this._getSiblingOffsetPx(c,s,m),O=s.slice();return $w(s,c,o),s.forEach((N,z)=>{if(O[z]===N)return;let Q=N.drag===e,Z=Q?b:k,Ce=Q?e.getPlaceholderElement():N.drag.getRootElement();N.offset+=Z;let Je=Math.round(N.offset*(1/N.drag.scale));a?(Ce.style.transform=Uw(`translate3d(${Je}px, 0, 0)`,N.initialTransform),Vg(N.clientRect,0,Z)):(Ce.style.transform=Uw(`translate3d(0, ${Je}px, 0)`,N.initialTransform),Vg(N.clientRect,Z,0))}),this._previousSwap.overlaps=IR(p,t,r),this._previousSwap.drag=l.drag,this._previousSwap.delta=a?i.x:i.y,{previousIndex:c,currentIndex:o}}enter(e,t,r,i){let s=i==null||i<0?this._getItemIndexFromPointerPosition(e,t,r):i,o=this._activeDraggables,a=o.indexOf(e),c=e.getPlaceholderElement(),l=o[s];if(l===e&&(l=o[s+1]),!l&&(s==null||s===-1||s<o.length-1)&&this._shouldEnterAsFirstChild(t,r)&&(l=o[0]),a>-1&&o.splice(a,1),l&&!this._dragDropRegistry.isDragging(l)){let h=l.getRootElement();h.parentElement.insertBefore(c,h),o.splice(s,0,e)}else this._element.appendChild(c),o.push(e);c.style.transform="",this._cacheItemPositions()}withItems(e){this._activeDraggables=e.slice(),this._cacheItemPositions()}withSortPredicate(e){this._sortPredicate=e}reset(){this._activeDraggables?.forEach(e=>{let t=e.getRootElement();if(t){let r=this._itemPositions.find(i=>i.drag===e)?.initialTransform;t.style.transform=r||""}}),this._itemPositions=[],this._activeDraggables=[],this._previousSwap.drag=null,this._previousSwap.delta=0,this._previousSwap.overlaps=!1}getActiveItemsSnapshot(){return this._activeDraggables}getItemIndex(e){return this._getVisualItemPositions().findIndex(t=>t.drag===e)}getItemAtIndex(e){return this._getVisualItemPositions()[e]?.drag||null}updateOnScroll(e,t){this._itemPositions.forEach(({clientRect:r})=>{Vg(r,e,t)}),this._itemPositions.forEach(({drag:r})=>{this._dragDropRegistry.isDragging(r)&&r._sortFromLastPointerPosition()})}withElementContainer(e){this._element=e}_cacheItemPositions(){let e=this.orientation==="horizontal";this._itemPositions=this._activeDraggables.map(t=>{let r=t.getVisibleElement();return{drag:t,offset:0,initialTransform:r.style.transform||"",clientRect:SR(r)}}).sort((t,r)=>e?t.clientRect.left-r.clientRect.left:t.clientRect.top-r.clientRect.top)}_getVisualItemPositions(){return this.orientation==="horizontal"&&this.direction==="rtl"?this._itemPositions.slice().reverse():this._itemPositions}_getItemOffsetPx(e,t,r){let i=this.orientation==="horizontal",s=i?t.left-e.left:t.top-e.top;return r===-1&&(s+=i?t.width-e.width:t.height-e.height),s}_getSiblingOffsetPx(e,t,r){let i=this.orientation==="horizontal",s=t[e].clientRect,o=t[e+r*-1],a=s[i?"width":"height"]*r;if(o){let c=i?"left":"top",l=i?"right":"bottom";r===-1?a-=o.clientRect[c]-s[l]:a+=s[c]-o.clientRect[l]}return a}_shouldEnterAsFirstChild(e,t){if(!this._activeDraggables.length)return!1;let r=this._itemPositions,i=this.orientation==="horizontal";if(r[0].drag!==this._activeDraggables[0]){let o=r[r.length-1].clientRect;return i?e>=o.right:t>=o.bottom}else{let o=r[0].clientRect;return i?e<=o.left:t<=o.top}}_getItemIndexFromPointerPosition(e,t,r,i){let s=this.orientation==="horizontal",o=this._itemPositions.findIndex(({drag:a,clientRect:c})=>{if(a===e)return!1;if(i){let l=s?i.x:i.y;if(a===this._previousSwap.drag&&this._previousSwap.overlaps&&l===this._previousSwap.delta)return!1}return s?t>=Math.floor(c.left)&&t<Math.floor(c.right):r>=Math.floor(c.top)&&r<Math.floor(c.bottom)});return o===-1||!this._sortPredicate(o,e)?-1:o}},ER=class{_document;_dragDropRegistry;_element;_sortPredicate;_rootNode;_activeItems;_previousSwap={drag:null,deltaX:0,deltaY:0,overlaps:!1};_relatedNodes=[];constructor(e,t){this._document=e,this._dragDropRegistry=t}start(e){let t=this._element.childNodes;this._relatedNodes=[];for(let r=0;r<t.length;r++){let i=t[r];this._relatedNodes.push([i,i.nextSibling])}this.withItems(e)}sort(e,t,r,i){let s=this._getItemIndexFromPointerPosition(e,t,r),o=this._previousSwap;if(s===-1||this._activeItems[s]===e)return null;let a=this._activeItems[s];if(o.drag===a&&o.overlaps&&o.deltaX===i.x&&o.deltaY===i.y)return null;let c=this.getItemIndex(e),l=e.getPlaceholderElement(),h=a.getRootElement();s>c?h.after(l):h.before(l),$w(this._activeItems,c,s);let p=this._getRootNode().elementFromPoint(t,r);return o.deltaX=i.x,o.deltaY=i.y,o.drag=a,o.overlaps=h===p||h.contains(p),{previousIndex:c,currentIndex:s}}enter(e,t,r,i){let s=this._activeItems.indexOf(e);s>-1&&this._activeItems.splice(s,1);let o=i==null||i<0?this._getItemIndexFromPointerPosition(e,t,r):i;o===-1&&(o=this._getClosestItemIndexToPointer(e,t,r));let a=this._activeItems[o];a&&!this._dragDropRegistry.isDragging(a)?(this._activeItems.splice(o,0,e),a.getRootElement().before(e.getPlaceholderElement())):(this._activeItems.push(e),this._element.appendChild(e.getPlaceholderElement()))}withItems(e){this._activeItems=e.slice()}withSortPredicate(e){this._sortPredicate=e}reset(){let e=this._element,t=this._previousSwap;for(let r=this._relatedNodes.length-1;r>-1;r--){let[i,s]=this._relatedNodes[r];i.parentNode===e&&i.nextSibling!==s&&(s===null?e.appendChild(i):s.parentNode===e&&e.insertBefore(i,s))}this._relatedNodes=[],this._activeItems=[],t.drag=null,t.deltaX=t.deltaY=0,t.overlaps=!1}getActiveItemsSnapshot(){return this._activeItems}getItemIndex(e){return this._activeItems.indexOf(e)}getItemAtIndex(e){return this._activeItems[e]||null}updateOnScroll(){this._activeItems.forEach(e=>{this._dragDropRegistry.isDragging(e)&&e._sortFromLastPointerPosition()})}withElementContainer(e){e!==this._element&&(this._element=e,this._rootNode=void 0)}_getItemIndexFromPointerPosition(e,t,r){let i=this._getRootNode().elementFromPoint(Math.floor(t),Math.floor(r)),s=i?this._activeItems.findIndex(o=>{let a=o.getRootElement();return i===a||a.contains(i)}):-1;return s===-1||!this._sortPredicate(s,e)?-1:s}_getRootNode(){return this._rootNode||(this._rootNode=Mw(this._element)||this._document),this._rootNode}_getClosestItemIndexToPointer(e,t,r){if(this._activeItems.length===0)return-1;if(this._activeItems.length===1)return 0;let i=1/0,s=-1;for(let o=0;o<this._activeItems.length;o++){let a=this._activeItems[o];if(a!==e){let{x:c,y:l}=a.getRootElement().getBoundingClientRect(),h=Math.hypot(t-c,r-l);h<i&&(i=h,s=o)}}return s}},gB=.05,_B=.05,Jr=(function(n){return n[n.NONE=0]="NONE",n[n.UP=1]="UP",n[n.DOWN=2]="DOWN",n})(Jr||{}),Xn=(function(n){return n[n.NONE=0]="NONE",n[n.LEFT=1]="LEFT",n[n.RIGHT=2]="RIGHT",n})(Xn||{}),TR=class{_dragDropRegistry;_ngZone;_viewportRuler;element;disabled=!1;sortingDisabled=!1;lockAxis=null;autoScrollDisabled=!1;autoScrollStep=2;hasAnchor=!1;enterPredicate=()=>!0;sortPredicate=()=>!0;beforeStarted=new ye;entered=new ye;exited=new ye;dropped=new ye;sorted=new ye;receivingStarted=new ye;receivingStopped=new ye;data;_container;_isDragging=!1;_parentPositions;_sortStrategy;_domRect;_draggables=[];_siblings=[];_activeSiblings=new Set;_viewportScrollSubscription=mt.EMPTY;_verticalScrollDirection=Jr.NONE;_horizontalScrollDirection=Xn.NONE;_scrollNode;_stopScrollTimers=new ye;_cachedShadowRoot=null;_document;_scrollableElements=[];_initialScrollSnap;_direction="ltr";constructor(e,t,r,i,s){this._dragDropRegistry=t,this._ngZone=i,this._viewportRuler=s;let o=this.element=Mi(e);this._document=r,this.withOrientation("vertical").withElementContainer(o),t.registerDropContainer(this),this._parentPositions=new Lw(r)}dispose(){this._stopScrolling(),this._stopScrollTimers.complete(),this._viewportScrollSubscription.unsubscribe(),this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this.receivingStarted.complete(),this.receivingStopped.complete(),this._activeSiblings.clear(),this._scrollNode=null,this._parentPositions.clear(),this._dragDropRegistry.removeDropContainer(this)}isDragging(){return this._isDragging}start(){this._draggingStarted(),this._notifyReceivingSiblings()}enter(e,t,r,i){this._draggingStarted(),i==null&&this.sortingDisabled&&(i=this._draggables.indexOf(e)),this._sortStrategy.enter(e,t,r,i),this._cacheParentPositions(),this._notifyReceivingSiblings(),this.entered.next({item:e,container:this,currentIndex:this.getItemIndex(e)})}exit(e){this._reset(),this.exited.next({item:e,container:this})}drop(e,t,r,i,s,o,a,c={}){this._reset(),this.dropped.next({item:e,currentIndex:t,previousIndex:r,container:this,previousContainer:i,isPointerOverContainer:s,distance:o,dropPoint:a,event:c})}withItems(e){let t=this._draggables;return this._draggables=e,e.forEach(r=>r._withDropContainer(this)),this.isDragging()&&(t.filter(i=>i.isDragging()).every(i=>e.indexOf(i)===-1)?this._reset():this._sortStrategy.withItems(this._draggables)),this}withDirection(e){return this._direction=e,this._sortStrategy instanceof jw&&(this._sortStrategy.direction=e),this}connectedTo(e){return this._siblings=e.slice(),this}withOrientation(e){if(e==="mixed")this._sortStrategy=new ER(this._document,this._dragDropRegistry);else{let t=new jw(this._dragDropRegistry);t.direction=this._direction,t.orientation=e,this._sortStrategy=t}return this._sortStrategy.withElementContainer(this._container),this._sortStrategy.withSortPredicate((t,r)=>this.sortPredicate(t,r,this)),this}withScrollableParents(e){let t=this._container;return this._scrollableElements=e.indexOf(t)===-1?[t,...e]:e.slice(),this}withElementContainer(e){if(e===this._container)return this;let t=Mi(this.element),r=this._scrollableElements.indexOf(this._container),i=this._scrollableElements.indexOf(e);return r>-1&&this._scrollableElements.splice(r,1),i>-1&&this._scrollableElements.splice(i,1),this._sortStrategy&&this._sortStrategy.withElementContainer(e),this._cachedShadowRoot=null,this._scrollableElements.unshift(e),this._container=e,this}getScrollableParents(){return this._scrollableElements}getItemIndex(e){return this._isDragging?this._sortStrategy.getItemIndex(e):this._draggables.indexOf(e)}getItemAtIndex(e){return this._isDragging?this._sortStrategy.getItemAtIndex(e):this._draggables[e]||null}isReceiving(){return this._activeSiblings.size>0}_sortItem(e,t,r,i){if(this.sortingDisabled||!this._domRect||!sB(this._domRect,gB,t,r))return;let s=this._sortStrategy.sort(e,t,r,i);s&&this.sorted.next({previousIndex:s.previousIndex,currentIndex:s.currentIndex,container:this,item:e})}_startScrollingIfNecessary(e,t){if(this.autoScrollDisabled)return;let r,i=Jr.NONE,s=Xn.NONE;if(this._parentPositions.positions.forEach((o,a)=>{a===this._document||!o.clientRect||r||sB(o.clientRect,gB,e,t)&&([i,s]=xte(a,o.clientRect,this._direction,e,t),(i||s)&&(r=a))}),!i&&!s){let{width:o,height:a}=this._viewportRuler.getViewportSize(),c={width:o,height:a,top:0,right:o,bottom:a,left:0};i=vB(c,t),s=wB(c,e),r=window}r&&(i!==this._verticalScrollDirection||s!==this._horizontalScrollDirection||r!==this._scrollNode)&&(this._verticalScrollDirection=i,this._horizontalScrollDirection=s,this._scrollNode=r,(i||s)&&r?this._ngZone.runOutsideAngular(this._startScrollInterval):this._stopScrolling())}_stopScrolling(){this._stopScrollTimers.next()}_draggingStarted(){let e=this._container.style;this.beforeStarted.next(),this._isDragging=!0,this._initialScrollSnap=e.msScrollSnapType||e.scrollSnapType||"",e.scrollSnapType=e.msScrollSnapType="none",this._sortStrategy.start(this._draggables),this._cacheParentPositions(),this._viewportScrollSubscription.unsubscribe(),this._listenToScrollEvents()}_cacheParentPositions(){this._parentPositions.cache(this._scrollableElements),this._domRect=this._parentPositions.positions.get(this._container).clientRect}_reset(){this._isDragging=!1;let e=this._container.style;e.scrollSnapType=e.msScrollSnapType=this._initialScrollSnap,this._siblings.forEach(t=>t._stopReceiving(this)),this._sortStrategy.reset(),this._stopScrolling(),this._viewportScrollSubscription.unsubscribe(),this._parentPositions.clear()}_startScrollInterval=()=>{this._stopScrolling(),NI(0,xm).pipe(ui(this._stopScrollTimers)).subscribe(()=>{let e=this._scrollNode,t=this.autoScrollStep;this._verticalScrollDirection===Jr.UP?e.scrollBy(0,-t):this._verticalScrollDirection===Jr.DOWN&&e.scrollBy(0,t),this._horizontalScrollDirection===Xn.LEFT?e.scrollBy(-t,0):this._horizontalScrollDirection===Xn.RIGHT&&e.scrollBy(t,0)})};_isOverContainer(e,t){return this._domRect!=null&&IR(this._domRect,e,t)}_getSiblingContainerFromPosition(e,t,r){return this._siblings.find(i=>i._canReceive(e,t,r))}_canReceive(e,t,r){if(!this._domRect||!IR(this._domRect,t,r)||!this.enterPredicate(e,this))return!1;let i=this._getShadowRoot().elementFromPoint(t,r);return i?i===this._container||this._container.contains(i):!1}_startReceiving(e,t){let r=this._activeSiblings;!r.has(e)&&t.every(i=>this.enterPredicate(i,this)||this._draggables.indexOf(i)>-1)&&(r.add(e),this._cacheParentPositions(),this._listenToScrollEvents(),this.receivingStarted.next({initiator:e,receiver:this,items:t}))}_stopReceiving(e){this._activeSiblings.delete(e),this._viewportScrollSubscription.unsubscribe(),this.receivingStopped.next({initiator:e,receiver:this})}_listenToScrollEvents(){this._viewportScrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(e=>{if(this.isDragging()){let t=this._parentPositions.handleScroll(e);t&&this._sortStrategy.updateOnScroll(t.top,t.left)}else this.isReceiving()&&this._cacheParentPositions()})}_getShadowRoot(){if(!this._cachedShadowRoot){let e=Mw(this._container);this._cachedShadowRoot=e||this._document}return this._cachedShadowRoot}_notifyReceivingSiblings(){let e=this._sortStrategy.getActiveItemsSnapshot().filter(t=>t.isDragging());this._siblings.forEach(t=>t._startReceiving(this,e))}};function vB(n,e){let{top:t,bottom:r,height:i}=n,s=i*_B;return e>=t-s&&e<=t+s?Jr.UP:e>=r-s&&e<=r+s?Jr.DOWN:Jr.NONE}function wB(n,e){let{left:t,right:r,width:i}=n,s=i*_B;return e>=t-s&&e<=t+s?Xn.LEFT:e>=r-s&&e<=r+s?Xn.RIGHT:Xn.NONE}function xte(n,e,t,r,i){let s=vB(e,i),o=wB(e,r),a=Jr.NONE,c=Xn.NONE;if(s){let l=n.scrollTop;s===Jr.UP?l>0&&(a=Jr.UP):n.scrollHeight-l>n.clientHeight&&(a=Jr.DOWN)}if(o){let l=n.scrollLeft;t==="rtl"?o===Xn.RIGHT?l<0&&(c=Xn.RIGHT):n.scrollWidth+l>n.clientWidth&&(c=Xn.LEFT):o===Xn.LEFT?l>0&&(c=Xn.LEFT):n.scrollWidth-l>n.clientWidth&&(c=Xn.RIGHT)}return[a,c]}var Fg={capture:!0},vR={passive:!1,capture:!0},Ate=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=Gt({type:n,selectors:[["ng-component"]],hostAttrs:["cdk-drag-resets-container",""],decls:0,vars:0,template:function(r,i){},styles:[`@layer cdk-resets{.cdk-drag-preview{background:none;border:none;padding:0;color:inherit;inset:auto}}.cdk-drag-placeholder *,.cdk-drag-preview *{pointer-events:none !important}
`],encapsulation:2,changeDetection:0})}return n})(),xR=(()=>{class n{_ngZone=M(it);_document=M(It);_styleLoader=M(J3);_renderer=M(wr).createRenderer(null,null);_cleanupDocumentTouchmove;_scroll=new ye;_dropInstances=new Set;_dragInstances=new Set;_activeDragInstances=he([]);_globalListeners;_draggingPredicate=t=>t.isDragging();_domNodesToDirectives=null;pointerMove=new ye;pointerUp=new ye;constructor(){}registerDropContainer(t){this._dropInstances.has(t)||this._dropInstances.add(t)}registerDragItem(t){this._dragInstances.add(t),this._dragInstances.size===1&&this._ngZone.runOutsideAngular(()=>{this._cleanupDocumentTouchmove?.(),this._cleanupDocumentTouchmove=this._renderer.listen(this._document,"touchmove",this._persistentTouchmoveListener,vR)})}removeDropContainer(t){this._dropInstances.delete(t)}removeDragItem(t){this._dragInstances.delete(t),this.stopDragging(t),this._dragInstances.size===0&&this._cleanupDocumentTouchmove?.()}startDragging(t,r){if(!(this._activeDragInstances().indexOf(t)>-1)&&(this._styleLoader.load(Ate),this._activeDragInstances.update(i=>[...i,t]),this._activeDragInstances().length===1)){let i=r.type.startsWith("touch"),s=a=>this.pointerUp.next(a),o=[["scroll",a=>this._scroll.next(a),Fg],["selectstart",this._preventDefaultWhileDragging,vR]];i?o.push(["touchend",s,Fg],["touchcancel",s,Fg]):o.push(["mouseup",s,Fg]),i||o.push(["mousemove",a=>this.pointerMove.next(a),vR]),this._ngZone.runOutsideAngular(()=>{this._globalListeners=o.map(([a,c,l])=>this._renderer.listen(this._document,a,c,l))})}}stopDragging(t){this._activeDragInstances.update(r=>{let i=r.indexOf(t);return i>-1?(r.splice(i,1),[...r]):r}),this._activeDragInstances().length===0&&this._clearGlobalListeners()}isDragging(t){return this._activeDragInstances().indexOf(t)>-1}scrolled(t){let r=[this._scroll];return t&&t!==this._document&&r.push(new Se(i=>this._ngZone.runOutsideAngular(()=>{let s=this._renderer.listen(t,"scroll",o=>{this._activeDragInstances().length&&i.next(o)},Fg);return()=>{s()}}))),Yh(...r)}registerDirectiveNode(t,r){this._domNodesToDirectives??=new WeakMap,this._domNodesToDirectives.set(t,r)}removeDirectiveNode(t){this._domNodesToDirectives?.delete(t)}getDragDirectiveForNode(t){return this._domNodesToDirectives?.get(t)||null}ngOnDestroy(){this._dragInstances.forEach(t=>this.removeDragItem(t)),this._dropInstances.forEach(t=>this.removeDropContainer(t)),this._domNodesToDirectives=null,this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}_preventDefaultWhileDragging=t=>{this._activeDragInstances().length>0&&t.preventDefault()};_persistentTouchmoveListener=t=>{this._activeDragInstances().length>0&&(this._activeDragInstances().some(this._draggingPredicate)&&t.preventDefault(),this.pointerMove.next(t))};_clearGlobalListeners(){this._globalListeners?.forEach(t=>t()),this._globalListeners=void 0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Rte={dragStartThreshold:5,pointerDirectionChangeThreshold:5},AR=(()=>{class n{_document=M(It);_ngZone=M(it);_viewportRuler=M(Z3);_dragDropRegistry=M(xR);_renderer=M(wr).createRenderer(null,null);constructor(){}createDrag(t,r=Rte){return new CR(t,r,this._document,this._ngZone,this._viewportRuler,this._dragDropRegistry,this._renderer)}createDropList(t){return new TR(t,this._dragDropRegistry,this._document,this._ngZone,this._viewportRuler)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Bw=new re("CDK_DRAG_PARENT");var IB=new re("CdkDragHandle"),bB=(()=>{class n{element=M(zt);_parentDrag=M(Bw,{optional:!0,skipSelf:!0});_dragDropRegistry=M(xR);_stateChanges=new ye;get disabled(){return this._disabled}set disabled(t){this._disabled=t,this._stateChanges.next(this)}_disabled=!1;constructor(){this._parentDrag?._addHandle(this)}ngAfterViewInit(){if(!this._parentDrag){let t=this.element.nativeElement.parentElement;for(;t;){let r=this._dragDropRegistry.getDragDirectiveForNode(t);if(r){this._parentDrag=r,r._addHandle(this);break}t=t.parentElement}}}ngOnDestroy(){this._parentDrag?._removeHandle(this),this._stateChanges.complete()}static \u0275fac=function(r){return new(r||n)};static \u0275dir=Rt({type:n,selectors:[["","cdkDragHandle",""]],hostAttrs:[1,"cdk-drag-handle"],inputs:{disabled:[2,"cdkDragHandleDisabled","disabled",or]},features:[Br([{provide:IB,useExisting:n}])]})}return n})(),CB=new re("CDK_DRAG_CONFIG"),EB=new re("CdkDropList"),TB=(()=>{class n{element=M(zt);dropContainer=M(EB,{optional:!0,skipSelf:!0});_ngZone=M(it);_viewContainerRef=M(es);_dir=M(mR,{optional:!0});_changeDetectorRef=M($r);_selfHandle=M(IB,{optional:!0,self:!0});_parentDrag=M(Bw,{optional:!0,skipSelf:!0});_dragDropRegistry=M(xR);_destroyed=new ye;_handles=new at([]);_previewTemplate;_placeholderTemplate;_dragRef;data;lockAxis=null;rootElementSelector;boundaryElement;dragStartDelay;freeDragPosition;get disabled(){return this._disabled||!!(this.dropContainer&&this.dropContainer.disabled)}set disabled(t){this._disabled=t,this._dragRef.disabled=this._disabled}_disabled;constrainPosition;previewClass;previewContainer;scale=1;started=new We;released=new We;ended=new We;entered=new We;exited=new We;dropped=new We;moved=new Se(t=>{let r=this._dragRef.moved.pipe(ge(i=>({source:this,pointerPosition:i.pointerPosition,event:i.event,delta:i.delta,distance:i.distance}))).subscribe(t);return()=>{r.unsubscribe()}});_injector=M(wt);constructor(){let t=this.dropContainer,r=M(CB,{optional:!0}),i=M(AR);this._dragRef=i.createDrag(this.element,{dragStartThreshold:r&&r.dragStartThreshold!=null?r.dragStartThreshold:5,pointerDirectionChangeThreshold:r&&r.pointerDirectionChangeThreshold!=null?r.pointerDirectionChangeThreshold:5,zIndex:r?.zIndex}),this._dragRef.data=this,this._dragDropRegistry.registerDirectiveNode(this.element.nativeElement,this),r&&this._assignDefaults(r),t&&(t.addItem(this),t._dropListRef.beforeStarted.pipe(ui(this._destroyed)).subscribe(()=>{this._dragRef.scale=this.scale})),this._syncInputs(this._dragRef),this._handleEvents(this._dragRef)}getPlaceholderElement(){return this._dragRef.getPlaceholderElement()}getRootElement(){return this._dragRef.getRootElement()}reset(){this._dragRef.reset()}resetToBoundary(){this._dragRef.resetToBoundary()}getFreeDragPosition(){return this._dragRef.getFreeDragPosition()}setFreeDragPosition(t){this._dragRef.setFreeDragPosition(t)}ngAfterViewInit(){Bc(()=>{this._updateRootElement(),this._setupHandlesListener(),this._dragRef.scale=this.scale,this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)},{injector:this._injector})}ngOnChanges(t){let r=t.rootElementSelector,i=t.freeDragPosition;r&&!r.firstChange&&this._updateRootElement(),this._dragRef.scale=this.scale,i&&!i.firstChange&&this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)}ngOnDestroy(){this.dropContainer&&this.dropContainer.removeItem(this),this._dragDropRegistry.removeDirectiveNode(this.element.nativeElement),this._ngZone.runOutsideAngular(()=>{this._handles.complete(),this._destroyed.next(),this._destroyed.complete(),this._dragRef.dispose()})}_addHandle(t){let r=this._handles.getValue();r.push(t),this._handles.next(r)}_removeHandle(t){let r=this._handles.getValue(),i=r.indexOf(t);i>-1&&(r.splice(i,1),this._handles.next(r))}_setPreviewTemplate(t){this._previewTemplate=t}_resetPreviewTemplate(t){t===this._previewTemplate&&(this._previewTemplate=null)}_setPlaceholderTemplate(t){this._placeholderTemplate=t}_resetPlaceholderTemplate(t){t===this._placeholderTemplate&&(this._placeholderTemplate=null)}_updateRootElement(){let t=this.element.nativeElement,r=t;this.rootElementSelector&&(r=t.closest!==void 0?t.closest(this.rootElementSelector):t.parentElement?.closest(this.rootElementSelector)),this._dragRef.withRootElement(r||t)}_getBoundaryElement(){let t=this.boundaryElement;return t?typeof t=="string"?this.element.nativeElement.closest(t):Mi(t):null}_syncInputs(t){t.beforeStarted.subscribe(()=>{if(!t.isDragging()){let r=this._dir,i=this.dragStartDelay,s=this._placeholderTemplate?{template:this._placeholderTemplate.templateRef,context:this._placeholderTemplate.data,viewContainer:this._viewContainerRef}:null,o=this._previewTemplate?{template:this._previewTemplate.templateRef,context:this._previewTemplate.data,matchSize:this._previewTemplate.matchSize,viewContainer:this._viewContainerRef}:null;t.disabled=this.disabled,t.lockAxis=this.lockAxis,t.scale=this.scale,t.dragStartDelay=typeof i=="object"&&i?i:Ow(i),t.constrainPosition=this.constrainPosition,t.previewClass=this.previewClass,t.withBoundaryElement(this._getBoundaryElement()).withPlaceholderTemplate(s).withPreviewTemplate(o).withPreviewContainer(this.previewContainer||"global"),r&&t.withDirection(r.value)}}),t.beforeStarted.pipe(Vn(1)).subscribe(()=>{if(this._parentDrag){t.withParent(this._parentDrag._dragRef);return}let r=this.element.nativeElement.parentElement;for(;r;){let i=this._dragDropRegistry.getDragDirectiveForNode(r);if(i){t.withParent(i._dragRef);break}r=r.parentElement}})}_handleEvents(t){t.started.subscribe(r=>{this.started.emit({source:this,event:r.event}),this._changeDetectorRef.markForCheck()}),t.released.subscribe(r=>{this.released.emit({source:this,event:r.event})}),t.ended.subscribe(r=>{this.ended.emit({source:this,distance:r.distance,dropPoint:r.dropPoint,event:r.event}),this._changeDetectorRef.markForCheck()}),t.entered.subscribe(r=>{this.entered.emit({container:r.container.data,item:this,currentIndex:r.currentIndex})}),t.exited.subscribe(r=>{this.exited.emit({container:r.container.data,item:this})}),t.dropped.subscribe(r=>{this.dropped.emit({previousIndex:r.previousIndex,currentIndex:r.currentIndex,previousContainer:r.previousContainer.data,container:r.container.data,isPointerOverContainer:r.isPointerOverContainer,item:this,distance:r.distance,dropPoint:r.dropPoint,event:r.event})})}_assignDefaults(t){let{lockAxis:r,dragStartDelay:i,constrainPosition:s,previewClass:o,boundaryElement:a,draggingDisabled:c,rootElementSelector:l,previewContainer:h}=t;this.disabled=c??!1,this.dragStartDelay=i||0,this.lockAxis=r||null,s&&(this.constrainPosition=s),o&&(this.previewClass=o),a&&(this.boundaryElement=a),l&&(this.rootElementSelector=l),h&&(this.previewContainer=h)}_setupHandlesListener(){this._handles.pipe(yt(t=>{let r=t.map(i=>i.element);this._selfHandle&&this.rootElementSelector&&r.push(this.element),this._dragRef.withHandles(r)}),qn(t=>Yh(...t.map(r=>r._stateChanges.pipe(yc(r))))),ui(this._destroyed)).subscribe(t=>{let r=this._dragRef,i=t.element.nativeElement;t.disabled?r.disableHandle(i):r.enableHandle(i)})}static \u0275fac=function(r){return new(r||n)};static \u0275dir=Rt({type:n,selectors:[["","cdkDrag",""]],hostAttrs:[1,"cdk-drag"],hostVars:4,hostBindings:function(r,i){r&2&&_n("cdk-drag-disabled",i.disabled)("cdk-drag-dragging",i._dragRef.isDragging())},inputs:{data:[0,"cdkDragData","data"],lockAxis:[0,"cdkDragLockAxis","lockAxis"],rootElementSelector:[0,"cdkDragRootElement","rootElementSelector"],boundaryElement:[0,"cdkDragBoundary","boundaryElement"],dragStartDelay:[0,"cdkDragStartDelay","dragStartDelay"],freeDragPosition:[0,"cdkDragFreeDragPosition","freeDragPosition"],disabled:[2,"cdkDragDisabled","disabled",or],constrainPosition:[0,"cdkDragConstrainPosition","constrainPosition"],previewClass:[0,"cdkDragPreviewClass","previewClass"],previewContainer:[0,"cdkDragPreviewContainer","previewContainer"],scale:[2,"cdkDragScale","scale",XM]},outputs:{started:"cdkDragStarted",released:"cdkDragReleased",ended:"cdkDragEnded",entered:"cdkDragEntered",exited:"cdkDragExited",dropped:"cdkDragDropped",moved:"cdkDragMoved"},exportAs:["cdkDrag"],features:[Br([{provide:Bw,useExisting:n}]),jr]})}return n})(),mB=new re("CdkDropListGroup");var SB=(()=>{class n{element=M(zt);_changeDetectorRef=M($r);_scrollDispatcher=M(X3);_dir=M(mR,{optional:!0});_group=M(mB,{optional:!0,skipSelf:!0});_latestSortedRefs;_destroyed=new ye;_scrollableParentsResolved;static _dropLists=[];_dropListRef;connectedTo=[];data;orientation;id=M(Vw).getId("cdk-drop-list-");lockAxis=null;get disabled(){return this._disabled||!!this._group&&this._group.disabled}set disabled(t){this._dropListRef.disabled=this._disabled=t}_disabled;sortingDisabled;enterPredicate=()=>!0;sortPredicate=()=>!0;autoScrollDisabled;autoScrollStep;elementContainerSelector;hasAnchor;dropped=new We;entered=new We;exited=new We;sorted=new We;_unsortedItems=new Set;constructor(){let t=M(AR),r=M(CB,{optional:!0});this._dropListRef=t.createDropList(this.element),this._dropListRef.data=this,r&&this._assignDefaults(r),this._dropListRef.enterPredicate=(i,s)=>this.enterPredicate(i.data,s.data),this._dropListRef.sortPredicate=(i,s,o)=>this.sortPredicate(i,s.data,o.data),this._setupInputSyncSubscription(this._dropListRef),this._handleEvents(this._dropListRef),n._dropLists.push(this),this._group&&this._group._items.add(this)}addItem(t){this._unsortedItems.add(t),t._dragRef._withDropContainer(this._dropListRef),this._dropListRef.isDragging()&&this._syncItemsWithRef(this.getSortedItems().map(r=>r._dragRef))}removeItem(t){if(this._unsortedItems.delete(t),this._latestSortedRefs){let r=this._latestSortedRefs.indexOf(t._dragRef);r>-1&&(this._latestSortedRefs.splice(r,1),this._syncItemsWithRef(this._latestSortedRefs))}}getSortedItems(){return Array.from(this._unsortedItems).sort((t,r)=>t._dragRef.getVisibleElement().compareDocumentPosition(r._dragRef.getVisibleElement())&Node.DOCUMENT_POSITION_FOLLOWING?-1:1)}ngOnDestroy(){let t=n._dropLists.indexOf(this);t>-1&&n._dropLists.splice(t,1),this._group&&this._group._items.delete(this),this._latestSortedRefs=void 0,this._unsortedItems.clear(),this._dropListRef.dispose(),this._destroyed.next(),this._destroyed.complete()}_setupInputSyncSubscription(t){this._dir&&this._dir.change.pipe(yc(this._dir.value),ui(this._destroyed)).subscribe(r=>t.withDirection(r)),t.beforeStarted.subscribe(()=>{let r=tB(this.connectedTo).map(i=>{if(typeof i=="string"){let s=n._dropLists.find(o=>o.id===i);return s}return i});if(this._group&&this._group._items.forEach(i=>{r.indexOf(i)===-1&&r.push(i)}),!this._scrollableParentsResolved){let i=this._scrollDispatcher.getAncestorScrollContainers(this.element).map(s=>s.getElementRef().nativeElement);this._dropListRef.withScrollableParents(i),this._scrollableParentsResolved=!0}if(this.elementContainerSelector){let i=this.element.nativeElement.querySelector(this.elementContainerSelector);t.withElementContainer(i)}t.disabled=this.disabled,t.lockAxis=this.lockAxis,t.sortingDisabled=this.sortingDisabled,t.autoScrollDisabled=this.autoScrollDisabled,t.autoScrollStep=Ow(this.autoScrollStep,2),t.hasAnchor=this.hasAnchor,t.connectedTo(r.filter(i=>i&&i!==this).map(i=>i._dropListRef)).withOrientation(this.orientation)})}_handleEvents(t){t.beforeStarted.subscribe(()=>{this._syncItemsWithRef(this.getSortedItems().map(r=>r._dragRef)),this._changeDetectorRef.markForCheck()}),t.entered.subscribe(r=>{this.entered.emit({container:this,item:r.item.data,currentIndex:r.currentIndex})}),t.exited.subscribe(r=>{this.exited.emit({container:this,item:r.item.data}),this._changeDetectorRef.markForCheck()}),t.sorted.subscribe(r=>{this.sorted.emit({previousIndex:r.previousIndex,currentIndex:r.currentIndex,container:this,item:r.item.data})}),t.dropped.subscribe(r=>{this.dropped.emit({previousIndex:r.previousIndex,currentIndex:r.currentIndex,previousContainer:r.previousContainer.data,container:r.container.data,item:r.item.data,isPointerOverContainer:r.isPointerOverContainer,distance:r.distance,dropPoint:r.dropPoint,event:r.event}),this._changeDetectorRef.markForCheck()}),Yh(t.receivingStarted,t.receivingStopped).subscribe(()=>this._changeDetectorRef.markForCheck())}_assignDefaults(t){let{lockAxis:r,draggingDisabled:i,sortingDisabled:s,listAutoScrollDisabled:o,listOrientation:a}=t;this.disabled=i??!1,this.sortingDisabled=s??!1,this.autoScrollDisabled=o??!1,this.orientation=a||"vertical",this.lockAxis=r||null}_syncItemsWithRef(t){this._latestSortedRefs=t,this._dropListRef.withItems(t)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=Rt({type:n,selectors:[["","cdkDropList",""],["cdk-drop-list"]],hostAttrs:[1,"cdk-drop-list"],hostVars:7,hostBindings:function(r,i){r&2&&($c("id",i.id),_n("cdk-drop-list-disabled",i.disabled)("cdk-drop-list-dragging",i._dropListRef.isDragging())("cdk-drop-list-receiving",i._dropListRef.isReceiving()))},inputs:{connectedTo:[0,"cdkDropListConnectedTo","connectedTo"],data:[0,"cdkDropListData","data"],orientation:[0,"cdkDropListOrientation","orientation"],id:"id",lockAxis:[0,"cdkDropListLockAxis","lockAxis"],disabled:[2,"cdkDropListDisabled","disabled",or],sortingDisabled:[2,"cdkDropListSortingDisabled","sortingDisabled",or],enterPredicate:[0,"cdkDropListEnterPredicate","enterPredicate"],sortPredicate:[0,"cdkDropListSortPredicate","sortPredicate"],autoScrollDisabled:[2,"cdkDropListAutoScrollDisabled","autoScrollDisabled",or],autoScrollStep:[0,"cdkDropListAutoScrollStep","autoScrollStep"],elementContainerSelector:[0,"cdkDropListElementContainer","elementContainerSelector"],hasAnchor:[2,"cdkDropListHasAnchor","hasAnchor",or]},outputs:{dropped:"cdkDropListDropped",entered:"cdkDropListEntered",exited:"cdkDropListExited",sorted:"cdkDropListSorted"},exportAs:["cdkDropList"],features:[Br([{provide:mB,useValue:void 0},{provide:EB,useExisting:n}])]})}return n})();var kte=new re("CdkDragPlaceholder"),DB=(()=>{class n{templateRef=M(Us);_drag=M(Bw,{optional:!0});data;constructor(){this._drag?._setPlaceholderTemplate(this)}ngOnDestroy(){this._drag?._resetPlaceholderTemplate(this)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=Rt({type:n,selectors:[["ng-template","cdkDragPlaceholder",""]],inputs:{data:"data"},features:[Br([{provide:kte,useExisting:n}])]})}return n})();var xB=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=br({type:n});static \u0275inj=rr({providers:[AR],imports:[eB]})}return n})();var Pte="firebase",Mte="12.6.0";va(Pte,Mte,"app");var Xr=class n{firestore=M(Pi);usersCollection=_o(this.firestore,"users");unsubUsers=null;unsubAllUsers=null;users=he([]);allUsers=he([]);currentUser=he(null);loading=he(!0);error=he(null);usersSubject=new at([]);users$=this.usersSubject.asObservable();migrationInProgress=he(!1);constructor(){this.subscribeToAllUsers(),this.restoreSession(),vr(()=>{let e=this.currentUser();this.subscribeToUsers(e?.userId)})}subscribeToAllUsers(){let e=xg(this.usersCollection,sR("name"));this.unsubAllUsers=Dg(e,t=>{let r=t.docs.map(i=>{let s=i.data();return ae(B({id:i.id},s),{userId:s.userId||null,lastActive:s.lastActive?.toDate?s.lastActive.toDate():s.lastActive,createdAt:s.createdAt?.toDate?s.createdAt.toDate():s.createdAt})});this.allUsers.set(r),this.migrateUsersWithoutUserId(r).subscribe()},t=>{console.error("Error fetching all users",t)})}subscribeToUsers(e){if(this.unsubUsers&&(this.unsubUsers(),this.unsubUsers=null),!e){this.users.set([]),this.usersSubject.next([]),this.loading.set(!1);return}let t=xg(this.usersCollection,Sw("createdBy","==",e),sR("name"));this.unsubUsers=Dg(t,r=>{let i=r.docs.map(o=>{let a=o.data();return ae(B({id:o.id},a),{userId:a.userId||null,lastActive:a.lastActive?.toDate?a.lastActive.toDate():a.lastActive,createdAt:a.createdAt?.toDate?a.createdAt.toDate():a.createdAt})}),s=this.currentUser();s&&!i.find(o=>o.id===s.id)&&i.unshift(s),i.sort((o,a)=>o.name.localeCompare(a.name)),this.users.set(i),this.usersSubject.next(i),this.loading.set(!1),this.migrateUsersWithoutUserId(i).subscribe()},r=>{console.error("Error fetching users",r),this.error.set(r.message),this.loading.set(!1)})}migrateUsersWithoutUserId(e){if(this.migrationInProgress())return le(void 0);let t=e.filter(i=>!i.userId);if(t.length===0)return le(void 0);this.migrationInProgress.set(!0),console.log(`\u{1F504} Migrating ${t.length} user(s) without userId...`);let r=t.map(i=>{let s=this.generateUserId();return console.log(`  \u2192 Migrating user "${i.name}" (${i.id}) \u2192 userId: ${s}`),this.updateUser$(i.id,{userId:s}).pipe(ge(()=>({name:i.name,userId:s})))});return De(Promise.all(r.map(i=>i.toPromise()))).pipe(yt(i=>{console.log(`\u2705 Successfully migrated ${i.length} user(s):`,i)}),Rs(i=>(console.error("\u274C Error during user migration:",i),le(void 0))),yt(()=>{this.migrationInProgress.set(!1)}),ge(()=>{}))}async restoreSession(){let e=localStorage.getItem("currentUserId");if(!e){this.loading.set(!1);return}try{let t=await D3(kr(this.firestore,"users",e));if(t.exists()){let r=t.data(),i=ae(B({id:t.id},r),{userId:r.userId||null,lastActive:r.lastActive?.toDate?r.lastActive.toDate():r.lastActive,createdAt:r.createdAt?.toDate?r.createdAt.toDate():r.createdAt});this.currentUser.set(i),i.status!=="active"&&this.updateUser$(i.id,{status:"active",lastActive:Ni()}).subscribe()}else localStorage.removeItem("currentUserId"),this.loading.set(!1)}catch(t){console.error("Error restoring session:",t),localStorage.removeItem("currentUserId"),this.loading.set(!1)}}updateCurrentUserReference(e){let t=localStorage.getItem("currentUserId");if(t){let r=e.find(i=>i.id===t);r&&(this.currentUser.set(r),r.status!=="active"&&this.updateUser$(r.id,{status:"active",lastActive:Ni()}).subscribe())}}login$(e){return(e.userId?le(void 0):this.updateUser$(e.id,{userId:this.generateUserId()}).pipe(yt(()=>e=ae(B({},e),{userId:this.generateUserId()})))).pipe(qn(()=>(localStorage.setItem("currentUserId",e.id),this.currentUser.set(e),this.updateUser$(e.id,{status:"active",lastActive:Ni()}))))}async login(e){if(!e.userId){let t=this.generateUserId();await this.updateUser(e.id,{userId:t}),e=ae(B({},e),{userId:t})}localStorage.setItem("currentUserId",e.id),this.currentUser.set(e),await this.updateUser(e.id,{status:"active",lastActive:Ni()})}logout$(){let e=this.currentUser();return e?this.updateUser$(e.id,{status:"offline",lastActive:Ni()}).pipe(yt(()=>{localStorage.removeItem("currentUserId"),this.currentUser.set(null)})):(localStorage.removeItem("currentUserId"),this.currentUser.set(null),le(void 0))}async logout(){let e=this.currentUser();e&&await this.updateUser(e.id,{status:"offline",lastActive:Ni()}),localStorage.removeItem("currentUserId"),this.currentUser.set(null)}createUser$(e){let t=this.generateUserId(),r=this.currentUser()?.userId;return De(ch(this.usersCollection,ae(B({},e),{userId:t,createdBy:r,status:e.status||"pending",lastActive:Ni(),createdAt:Ni()}))).pipe(ge(()=>{}))}async createUser(e){let t=this.generateUserId(),r=this.currentUser()?.userId;await ch(this.usersCollection,ae(B({},e),{userId:t,createdBy:r,status:e.status||"pending",lastActive:Ni(),createdAt:Ni()}))}generateUserId(){let e=Date.now().toString(36),t=Math.random().toString(36).substring(2,8);return`user_${e}_${t}`}updateUser$(e,t){return De(Ha(kr(this.firestore,"users",e),t))}async updateUser(e,t){await Ha(kr(this.firestore,"users",e),t)}deleteUser$(e){return De(lh(kr(this.firestore,"users",e)))}async deleteUser(e){await lh(kr(this.firestore,"users",e))}manualMigrateAllUsers$(){let t=this.users().filter(o=>!o.userId);if(t.length===0)return console.log("\u2705 All users already have userId assigned."),le({migrated:0,errors:0});let r=0,i=0,s=t.map(o=>{let a=this.generateUserId();return this.updateUser$(o.id,{userId:a}).pipe(yt(()=>{console.log(`\u2705 Migrated user "${o.name}" \u2192 ${a}`),r++}),Rs(c=>(console.error(`\u274C Failed to migrate user "${o.name}":`,c),i++,le(void 0))))});return De(Promise.all(s.map(o=>o.toPromise()))).pipe(ge(()=>({migrated:r,errors:i})))}async manualMigrateAllUsers(){let t=this.users().filter(s=>!s.userId);if(t.length===0)return console.log("\u2705 All users already have userId assigned."),{migrated:0,errors:0};let r=0,i=0;for(let s of t)try{let o=this.generateUserId();await this.updateUser(s.id,{userId:o}),console.log(`\u2705 Migrated user "${s.name}" \u2192 ${o}`),r++}catch(o){console.error(`\u274C Failed to migrate user "${s.name}":`,o),i++}return{migrated:r,errors:i}}getUsersNeedingMigration(){return this.users().filter(e=>!e.userId)}static \u0275fac=function(t){return new(t||n)};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})};var ws=class n{userService=M(Xr);firestore;TASKS_COLLECTION="overview_tasks";tasksSignal=he([]);tasks=ze(()=>this.tasksSignal());tasksSubject=new at([]);tasks$=this.tasksSubject.asObservable();unsubTasks=null;constructor(){let e=bp(uh.firebase);this.firestore=S0(e),vr(()=>{let t=this.userService.currentUser();this.cleanupSubscription(),t&&t.userId?(console.log("\u{1F4CB} Loading tasks for user:",t.userId),this.initRealtimeData(t.userId)):(console.log("\u{1F512} No user logged in - clearing task data"),this.tasksSignal.set([]),this.tasksSubject.next([]))})}getCurrentUserId(){return this.userService.currentUser()?.userId||""}cleanupSubscription(){this.unsubTasks&&(this.unsubTasks(),this.unsubTasks=null)}initRealtimeData(e){if(!e)return;let t=eg(Xp(this.firestore,this.TASKS_COLLECTION),tg("userId","==",e));this.unsubTasks=ng(t,r=>{let i=r.docs.map(s=>{let o=s.data(),a=o.dueDate&&typeof o.dueDate.toDate=="function"?o.dueDate.toDate():o.dueDate?new Date(o.dueDate):null,c=o.createdAt&&typeof o.createdAt.toDate=="function"?o.createdAt.toDate():new Date;return ae(B({},o),{dueDate:a,createdAt:c,order:o.order??Date.now()})});i.sort((s,o)=>(s.order??0)-(o.order??0)),this.tasksSignal.set(i),this.tasksSubject.next(i)})}createTask$(e){let t=this.getCurrentUserId();if(!t)return Mr(()=>new Error("User must be logged in to create tasks"));let r=this.tasksSignal().filter(o=>o.category===e.category),i=r.length>0?Math.max(...r.map(o=>o.order??0)):0,s=`task_${Date.now()}_${Math.random().toString(36).substr(2,5)}`;return De(vl(Jn(this.firestore,this.TASKS_COLLECTION,s),ae(B({},e),{id:s,userId:t,order:i+1e3,createdAt:new Date}))).pipe(ge(()=>s))}async createTask(e){let t=this.getCurrentUserId();if(!t)throw new Error("User must be logged in to create tasks");let r=this.tasksSignal().filter(o=>o.category===e.category),i=r.length>0?Math.max(...r.map(o=>o.order??0)):0,s=`task_${Date.now()}_${Math.random().toString(36).substr(2,5)}`;await vl(Jn(this.firestore,this.TASKS_COLLECTION,s),ae(B({},e),{id:s,userId:t,order:i+1e3,createdAt:new Date}))}updateTask$(e,t){return De(Fd(Jn(this.firestore,this.TASKS_COLLECTION,e),t))}async updateTask(e,t){await Fd(Jn(this.firestore,this.TASKS_COLLECTION,e),t)}deleteTask$(e){return De(Vd(Jn(this.firestore,this.TASKS_COLLECTION,e)))}async deleteTask(e){await Vd(Jn(this.firestore,this.TASKS_COLLECTION,e))}ngOnDestroy(){this.cleanupSubscription()}reorderTasks$(e){let t=e.map((r,i)=>this.updateTask$(r.id,{order:i*1e3}));return li(t).pipe(ge(()=>{}))}static \u0275fac=function(t){return new(t||n)};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})};var Ug=["bg-red-500","bg-orange-500","bg-amber-500","bg-green-500","bg-emerald-500","bg-teal-500","bg-cyan-500","bg-blue-500","bg-indigo-500","bg-violet-500","bg-purple-500","bg-fuchsia-500","bg-pink-500","bg-rose-500","bg-slate-500"],AB=[{id:"groceries",label:"Groceries",color:"bg-amber-400",textColor:"text-amber-400"},{id:"chores",label:"Chores",color:"bg-blue-400",textColor:"text-blue-400"},{id:"repairs",label:"Repairs",color:"bg-purple-500",textColor:"text-purple-400"},{id:"other",label:"Other",color:"bg-slate-400",textColor:"text-slate-400"}];var Zr=class n{dialog=he(null);confirm$(e,t="Confirm"){let r=new ye;return this.dialog.set({message:e,title:t,type:"confirm",confirmText:"Confirm",cancelText:"Cancel",result$:r}),r.pipe(Vn(1))}confirm(e,t="Confirm"){return Bm(this.confirm$(e,t))}alert$(e,t="Alert"){let r=new ye;return this.dialog.set({message:e,title:t,type:"info",confirmText:"OK",result$:r}),r.pipe(Vn(1))}alert(e,t="Alert"){return Bm(this.alert$(e,t))}success$(e,t="Success"){let r=new ye;return this.dialog.set({message:e,title:t,type:"success",confirmText:"OK",result$:r}),r.pipe(Vn(1))}error$(e,t="Error"){let r=new ye;return this.dialog.set({message:e,title:t,type:"error",confirmText:"OK",result$:r}),r.pipe(Vn(1))}close(e){let t=this.dialog();t&&(t.result$.next(e),t.result$.complete(),this.dialog.set(null))}static \u0275fac=function(t){return new(t||n)};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})};var mh=class n{firestore=M(Pi);userService=M(Xr);COLLECTION="assignees";assigneesSignal=he([]);assignees=ze(()=>this.assigneesSignal());assigneesSubject=new at([]);assignees$=this.assigneesSubject.asObservable();unsubAssignees=null;constructor(){vr(()=>{let e=this.userService.currentUser();this.cleanupSubscription(),e&&e.userId?(console.log("\u{1F465} Loading assignees for user:",e.userId),this.subscribeToAssignees(e.userId)):(console.log("\u{1F512} No user logged in - clearing assignee data"),this.assigneesSignal.set([]),this.assigneesSubject.next([]))})}getCurrentUserId(){return this.userService.currentUser()?.userId||""}cleanupSubscription(){this.unsubAssignees&&(this.unsubAssignees(),this.unsubAssignees=null)}subscribeToAssignees(e){if(!e)return;let t=xg(_o(this.firestore,this.COLLECTION),Sw("userId","==",e));this.unsubAssignees=Dg(t,r=>{let i=r.docs.map(s=>B({id:s.id},s.data()));i.sort((s,o)=>s.name.localeCompare(o.name)),this.assigneesSignal.set(i),this.assigneesSubject.next(i)},r=>{console.error("Error fetching assignees:",r)})}createAssignee$(e,t){let r=this.getCurrentUserId();if(!r)return Mr(()=>new Error("User must be logged in to create assignees"));let i=e.charAt(0).toUpperCase();return De(ch(_o(this.firestore,this.COLLECTION),{name:e,color:t,initial:i,userId:r})).pipe(ge(s=>s.id))}async createAssignee(e,t){let r=this.getCurrentUserId();if(!r)throw new Error("User must be logged in to create assignees");let i=e.charAt(0).toUpperCase();await ch(_o(this.firestore,this.COLLECTION),{name:e,color:t,initial:i,userId:r})}updateAssignee$(e,t){let r=B({},t);return t.name&&(r.initial=t.name.charAt(0).toUpperCase()),De(Ha(kr(this.firestore,this.COLLECTION,e),r))}async updateAssignee(e,t){t.name&&(t.initial=t.name.charAt(0).toUpperCase()),await Ha(kr(this.firestore,this.COLLECTION,e),t)}deleteAssignee$(e){return De(lh(kr(this.firestore,this.COLLECTION,e)))}async deleteAssignee(e){await lh(kr(this.firestore,this.COLLECTION,e))}getAssignee(e){return this.assigneesSignal().find(t=>t.id===e)}ngOnDestroy(){this.cleanupSubscription()}static \u0275fac=function(t){return new(t||n)};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})};var lr=class n{loadingSignal=he({isLoading:!1});loadingSubject=new at({isLoading:!1});loading$=this.loadingSubject.asObservable();activeRequests=0;loading=this.loadingSignal.asReadonly();get isLoading(){return this.loadingSignal().isLoading}show(e){this.activeRequests++;let t={isLoading:!0,message:e};this.loadingSignal.set(t),this.loadingSubject.next(t)}hide(){if(this.activeRequests=Math.max(0,this.activeRequests-1),this.activeRequests===0){let e={isLoading:!1};this.loadingSignal.set(e),this.loadingSubject.next(e)}}forceHide(){this.activeRequests=0;let e={isLoading:!1};this.loadingSignal.set(e),this.loadingSubject.next(e)}setMessage(e){let t=this.loadingSignal();if(t.isLoading){let r=ae(B({},t),{message:e});this.loadingSignal.set(r),this.loadingSubject.next(r)}}setProgress(e){let t=this.loadingSignal();if(t.isLoading){let r=ae(B({},t),{progress:Math.min(100,Math.max(0,e))});this.loadingSignal.set(r),this.loadingSubject.next(r)}}withLoading(e){return t=>(this.show(e),t.pipe(yu(()=>this.hide())))}async wrapPromise(e,t){this.show(t);try{return await e}finally{this.hide()}}static \u0275fac=function(t){return new(t||n)};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})};function Ote(n,e){if(n&1&&(yn(0,"p",5),P(1),Ln()),n&2){let t=$(2);V(),Ne(t.message())}}function Fte(n,e){if(n&1&&(yn(0,"div",6),Lu(1,"div",7),Ln(),yn(2,"p",8),P(3),Ln()),n&2){let t=$(2);V(),zc("width",t.progress(),"%"),V(2),dt("",t.progress(),"%")}}function Vte(n,e){if(n&1&&(yn(0,"div",0)(1,"div",1)(2,"div",2),Lu(3,"div",3)(4,"div",3)(5,"div",3),yn(6,"span",4),P(7,"home"),Ln()(),ue(8,Ote,2,1,"p",5),ue(9,Fte,4,3),Ln()()),n&2){let t=$();V(8),de(t.message()?8:-1),V(),de(t.progress()!==void 0?9:-1)}}var zw=class n{loadingService=M(lr);loadingState=ZO(this.loadingService.loading$,{initialValue:{isLoading:!1}});isLoading=ze(()=>this.loadingState().isLoading);message=ze(()=>this.loadingState().message);progress=ze(()=>this.loadingState().progress);static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Gt({type:n,selectors:[["app-loading"]],decls:1,vars:1,consts:[[1,"loading-overlay"],[1,"loading-container"],[1,"spinner"],[1,"spinner-ring"],[1,"material-symbols-outlined","spinner-icon"],[1,"loading-message"],[1,"progress-container"],[1,"progress-bar"],[1,"progress-text"]],template:function(t,r){t&1&&ue(0,Vte,10,2,"div",0),t&2&&de(r.isLoading()?0:-1)},dependencies:[cr],styles:[".loading-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;z-index:9999;display:flex;align-items:center;justify-content:center;background:#111317d9;-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px);animation:_ngcontent-%COMP%_fadeIn .2s ease}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}.loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:1.5rem}.spinner[_ngcontent-%COMP%]{position:relative;width:80px;height:80px}.spinner-ring[_ngcontent-%COMP%]{position:absolute;inset:0;border-radius:50%;border:3px solid transparent;animation:_ngcontent-%COMP%_spin 1.5s linear infinite}.spinner-ring[_ngcontent-%COMP%]:nth-child(1){border-top-color:#9fe870;animation-delay:0s}.spinner-ring[_ngcontent-%COMP%]:nth-child(2){inset:8px;border-right-color:#9fe870;animation-delay:.15s;animation-direction:reverse}.spinner-ring[_ngcontent-%COMP%]:nth-child(3){inset:16px;border-bottom-color:#9fe870;animation-delay:.3s}.spinner-icon[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);font-size:28px;color:#9fe870;animation:_ngcontent-%COMP%_pulse 1.5s ease-in-out infinite}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}@keyframes _ngcontent-%COMP%_pulse{0%,to{opacity:1;transform:translate(-50%,-50%) scale(1)}50%{opacity:.6;transform:translate(-50%,-50%) scale(.9)}}.loading-message[_ngcontent-%COMP%]{color:#fff;font-size:1rem;font-weight:500;text-align:center;max-width:280px;animation:_ngcontent-%COMP%_fadeIn .3s ease .1s both}.progress-container[_ngcontent-%COMP%]{width:200px;height:4px;background:#ffffff1a;border-radius:9999px;overflow:hidden}.progress-bar[_ngcontent-%COMP%]{height:100%;background:linear-gradient(90deg,#9fe870,#7dd956);border-radius:9999px;transition:width .3s ease}.progress-text[_ngcontent-%COMP%]{color:#9ea7b7;font-size:.75rem;font-weight:600}"],changeDetection:0})};var Lte=(n,e)=>e.id;function Ute(n,e){if(n&1){let t=Be();A(0,"button",17),Y("click",function(){let i=ee(t).$implicit,s=$();return te(s.assigneeColor=i)}),R()}if(n&2){let t=e.$implicit,r=$();ut(t),_n("ring-slate-400",r.assigneeColor===t)("ring-transparent",r.assigneeColor!==t)}}function jte(n,e){if(n&1){let t=Be();A(0,"button",18),Y("click",function(){ee(t);let i=$();return te(i.resetForm())}),P(1," Cancel "),R()}}function Bte(n,e){if(n&1){let t=Be();A(0,"div",15)(1,"div",19)(2,"div",20),P(3),R(),A(4,"span",21),P(5),R()(),A(6,"div",22)(7,"button",23),Y("click",function(){let i=ee(t).$implicit,s=$();return te(s.editAssignee(i))}),A(8,"span",24),P(9,"edit"),R()(),A(10,"button",25),Y("click",function(){let i=ee(t).$implicit,s=$();return te(s.deleteAssignee(i.id))}),A(11,"span",24),P(12,"delete"),R()()()()}if(n&2){let t=e.$implicit;V(2),ut(t.color),V(),dt(" ",t.initial," "),V(2),Ne(t.name)}}function $te(n,e){n&1&&(A(0,"div",16),P(1,"No assignees yet"),R())}var Hw=class n{close=new We;assigneeService=M(mh);overviewService=M(ws);dialogService=M(Zr);loadingService=M(lr);assignees=this.assigneeService.assignees;assigneeColors=Ug;editingAssignee=null;assigneeName="";assigneeColor=Ug[0];onClose(){this.close.emit()}resetForm(){this.editingAssignee=null,this.assigneeName="",this.assigneeColor=this.assigneeColors[0]}editAssignee(e){this.editingAssignee=e,this.assigneeName=e.name,this.assigneeColor=e.color}saveAssignee(){this.assigneeName.trim()&&(this.loadingService.show("Saving..."),this.editingAssignee?this.assigneeService.updateAssignee$(this.editingAssignee.id,{name:this.assigneeName,color:this.assigneeColor}).subscribe({next:()=>{this.loadingService.hide(),this.resetForm()},error:()=>this.loadingService.hide()}):this.assigneeService.createAssignee$(this.assigneeName,this.assigneeColor).subscribe({next:()=>{this.loadingService.hide(),this.resetForm()},error:()=>this.loadingService.hide()}))}deleteAssignee(e){if(this.overviewService.tasks().filter(r=>r.assigneeId===e).length>0){this.dialogService.alert$("Cannot delete assignee with active tasks.").subscribe();return}this.dialogService.confirm$("Delete this assignee?","Confirm").subscribe(r=>{r&&(this.loadingService.show("Deleting..."),this.assigneeService.deleteAssignee$(e).subscribe({next:()=>this.loadingService.hide(),error:()=>this.loadingService.hide()}))})}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Gt({type:n,selectors:[["app-assignee-management"]],outputs:{close:"close"},decls:22,vars:5,consts:[[1,"fixed","inset-0","z-[60]","flex","items-center","justify-center","p-4","bg-black/50","backdrop-blur-sm","animate-in","fade-in","duration-200"],[1,"bg-white","dark:bg-surface-dark","w-full","max-w-sm","rounded-2xl","shadow-xl","overflow-hidden","animate-in","zoom-in-95","duration-200","border","border-slate-200","dark:border-border-dark","flex","flex-col","max-h-[80vh]"],[1,"p-4","border-b","border-slate-100","dark:border-border-dark","flex","justify-between","items-center","bg-slate-50/50","dark:bg-black/20"],[1,"font-bold","text-lg","text-slate-900","dark:text-white"],[1,"p-1","rounded-full","hover:bg-slate-200","dark:hover:bg-border-dark","transition-colors",3,"click"],[1,"material-symbols-outlined"],[1,"flex-1","overflow-y-auto","p-4","space-y-3"],[1,"bg-slate-50","dark:bg-black/20","p-3","rounded-xl","space-y-3"],["type","text","placeholder","Name (e.g. Alex)",1,"w-full","h-10","px-3","rounded-lg","bg-white","dark:bg-surface-dark","border","border-slate-200","dark:border-border-dark","text-sm","focus:border-primary","focus:ring-1","focus:ring-primary","outline-none","text-slate-900","dark:text-white",3,"ngModelChange","ngModel"],[1,"flex","flex-wrap","gap-2"],[1,"size-6","rounded-full","transition-transform","hover:scale-110","ring-2","ring-offset-1","dark:ring-offset-surface-dark",3,"class","ring-slate-400","ring-transparent"],[1,"flex","justify-end","gap-2"],[1,"text-xs","text-slate-500","font-bold","hover:text-slate-700","dark:hover:text-slate-300","px-2"],[1,"h-8","px-4","bg-primary","text-slate-900","rounded-lg","text-xs","font-bold","hover:bg-primary-hover","disabled:opacity-50","disabled:cursor-not-allowed","transition-colors",3,"click","disabled"],[1,"space-y-2"],[1,"flex","items-center","justify-between","p-2","rounded-lg","hover:bg-slate-50","dark:hover:bg-white/5","group","border","border-transparent","hover:border-slate-100","dark:hover:border-border-dark","transition-all"],[1,"text-center","py-6","text-slate-400","text-sm"],[1,"size-6","rounded-full","transition-transform","hover:scale-110","ring-2","ring-offset-1","dark:ring-offset-surface-dark",3,"click"],[1,"text-xs","text-slate-500","font-bold","hover:text-slate-700","dark:hover:text-slate-300","px-2",3,"click"],[1,"flex","items-center","gap-3"],[1,"size-8","rounded-full","flex","items-center","justify-center","text-xs","font-bold","text-white","shadow-sm"],[1,"text-sm","font-bold","text-slate-900","dark:text-white"],[1,"flex","gap-1","opacity-0","group-hover:opacity-100","transition-opacity"],[1,"size-7","rounded","bg-white","dark:bg-black/20","border","border-slate-200","dark:border-border-dark","flex","items-center","justify-center","text-slate-500","hover:text-primary","transition-colors",3,"click"],[1,"material-symbols-outlined","text-[14px]"],[1,"size-7","rounded","bg-white","dark:bg-black/20","border","border-slate-200","dark:border-border-dark","flex","items-center","justify-center","text-slate-500","hover:text-red-500","transition-colors",3,"click"]],template:function(t,r){t&1&&(A(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),P(4,"Manage Assignees"),R(),A(5,"button",4),Y("click",function(){return r.onClose()}),A(6,"span",5),P(7,"close"),R()()(),A(8,"div",6)(9,"div",7)(10,"input",8),fn("ngModelChange",function(s){return vn(r.assigneeName,s)||(r.assigneeName=s),s}),R(),A(11,"div",9),Mt(12,Ute,1,6,"button",10,Vu),R(),A(14,"div",11),ue(15,jte,2,0,"button",12),A(16,"button",13),Y("click",function(){return r.saveAssignee()}),P(17),R()()(),A(18,"div",14),Mt(19,Bte,13,4,"div",15,Lte,!1,$te,2,0,"div",16),R()()()()),t&2&&(V(10),hn("ngModel",r.assigneeName),V(2),Ot(r.assigneeColors),V(3),de(r.editingAssignee?15:-1),V(),Le("disabled",!r.assigneeName.trim()),V(),dt(" ",r.editingAssignee?"Update":"Add"," "),V(2),Ot(r.assignees()))},dependencies:[cr,Wa,vs,qa,vo],encapsulation:2})};var wo=[{id:"produce",userId:"system",name:"Produce",icon:"nutrition",color:"text-green-500",isDefault:!0,createdAt:new Date},{id:"dairy",userId:"system",name:"Dairy & Eggs",icon:"water_drop",color:"text-blue-400",isDefault:!0,createdAt:new Date},{id:"meat",userId:"system",name:"Meat & Seafood",icon:"set_meal",color:"text-red-500",isDefault:!0,createdAt:new Date},{id:"frozen",userId:"system",name:"Frozen Foods",icon:"ac_unit",color:"text-indigo-500",isDefault:!0,createdAt:new Date},{id:"bakery",userId:"system",name:"Bakery & Bread",icon:"bakery_dining",color:"text-amber-500",isDefault:!0,createdAt:new Date},{id:"beverages",userId:"system",name:"Beverages",icon:"local_cafe",color:"text-orange-600",isDefault:!0,createdAt:new Date},{id:"snacks",userId:"system",name:"Snacks",icon:"cookie",color:"text-yellow-500",isDefault:!0,createdAt:new Date},{id:"canned",userId:"system",name:"Canned Goods",icon:"inventory_2",color:"text-gray-500",isDefault:!0,createdAt:new Date},{id:"condiments",userId:"system",name:"Condiments & Sauces",icon:"kebab_dining",color:"text-rose-500",isDefault:!0,createdAt:new Date},{id:"pantry",userId:"system",name:"Pantry",icon:"soup_kitchen",color:"text-orange-400",isDefault:!0,createdAt:new Date},{id:"baby",userId:"system",name:"Baby Needs",icon:"child_care",color:"text-pink-500",isDefault:!0,createdAt:new Date},{id:"health",userId:"system",name:"Health & Personal Care",icon:"health_and_safety",color:"text-purple-500",isDefault:!0,createdAt:new Date},{id:"pets",userId:"system",name:"Pet Supplies",icon:"pets",color:"text-teal-500",isDefault:!0,createdAt:new Date},{id:"deli",userId:"system",name:"Deli",icon:"lunch_dining",color:"text-lime-500",isDefault:!0,createdAt:new Date},{id:"cleaning",userId:"system",name:"Cleaning Items",icon:"cleaning_services",color:"text-cyan-500",isDefault:!0,createdAt:new Date},{id:"other",userId:"system",name:"Other",icon:"category",color:"text-slate-400",isDefault:!0,createdAt:new Date}],RB=["nutrition","water_drop","soup_kitchen","category","local_dining","bakery_dining","icecream","liquor","coffee","lunch_dining","restaurant","fastfood","ramen_dining","set_meal","egg","cake","cookie","local_pizza","kebab_dining","rice_bowl","cleaning_services","child_care"],kB=["text-green-500","text-blue-400","text-orange-400","text-slate-400","text-red-500","text-purple-500","text-pink-500","text-yellow-500","text-teal-500","text-indigo-500","text-cyan-500","text-lime-500"];var RR=[{name:"Red Apples",category:"produce",imageUrl:"https://images.pexels.com/photos/102104/pexels-photo-102104.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Bananas",category:"produce",imageUrl:"https://images.pexels.com/photos/2872755/pexels-photo-2872755.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Oranges",category:"produce",imageUrl:"https://images.pexels.com/photos/327098/pexels-photo-327098.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Strawberries",category:"produce",imageUrl:"https://images.pexels.com/photos/46174/strawberries-berries-fruit-freshness-46174.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Blueberries",category:"produce",imageUrl:"https://images.pexels.com/photos/1153655/pexels-photo-1153655.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Grapes",category:"produce",imageUrl:"https://images.pexels.com/photos/60021/grapes-wine-fruit-vines-60021.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Lemons",category:"produce",imageUrl:"https://images.pexels.com/photos/1414110/pexels-photo-1414110.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Limes",category:"produce",imageUrl:"https://images.pexels.com/photos/1435736/pexels-photo-1435736.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Watermelon",category:"produce",imageUrl:"https://images.pexels.com/photos/1313267/pexels-photo-1313267.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Pineapple",category:"produce",imageUrl:"https://images.pexels.com/photos/947879/pexels-photo-947879.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Mangoes",category:"produce",imageUrl:"https://images.pexels.com/photos/918643/pexels-photo-918643.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Avocados",category:"produce",imageUrl:"https://images.pexels.com/photos/557659/pexels-photo-557659.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Peaches",category:"produce",imageUrl:"https://images.pexels.com/photos/1028599/pexels-photo-1028599.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Pears",category:"produce",imageUrl:"https://images.pexels.com/photos/568471/pexels-photo-568471.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Cherries",category:"produce",imageUrl:"https://images.pexels.com/photos/175727/pexels-photo-175727.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Kiwi",category:"produce",imageUrl:"https://images.pexels.com/photos/51312/kiwi-fruit-vitamins-healthy-eating-51312.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Raspberries",category:"produce",imageUrl:"https://images.pexels.com/photos/892808/pexels-photo-892808.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Pomegranate",category:"produce",imageUrl:"https://images.pexels.com/photos/65256/pomegranate-open-cores-fruit-65256.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Grapefruit",category:"produce",imageUrl:"https://images.pexels.com/photos/1171170/pexels-photo-1171170.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Coconut",category:"produce",imageUrl:"https://images.pexels.com/photos/1030973/pexels-photo-1030973.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Broccoli",category:"produce",imageUrl:"https://images.pexels.com/photos/47347/broccoli-vegetable-food-healthy-47347.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Carrots",category:"produce",imageUrl:"https://images.pexels.com/photos/143133/pexels-photo-143133.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Spinach",category:"produce",imageUrl:"https://images.pexels.com/photos/2325843/pexels-photo-2325843.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Tomatoes",category:"produce",imageUrl:"https://images.pexels.com/photos/1367242/pexels-photo-1367242.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Cucumbers",category:"produce",imageUrl:"https://images.pexels.com/photos/37528/cucumber-salad-food-healthy-37528.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Bell Peppers",category:"produce",imageUrl:"https://images.pexels.com/photos/128536/pexels-photo-128536.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Onions",category:"produce",imageUrl:"https://images.pexels.com/photos/144206/pexels-photo-144206.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Garlic",category:"produce",imageUrl:"https://images.pexels.com/photos/1392585/pexels-photo-1392585.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Potatoes",category:"produce",imageUrl:"https://images.pexels.com/photos/144248/potatoes-vegetables-erdfrucht-bio-144248.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Sweet Potatoes",category:"produce",imageUrl:"https://images.pexels.com/photos/2284166/pexels-photo-2284166.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Lettuce",category:"produce",imageUrl:"https://images.pexels.com/photos/1199562/pexels-photo-1199562.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Cabbage",category:"produce",imageUrl:"https://images.pexels.com/photos/2518893/pexels-photo-2518893.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Cauliflower",category:"produce",imageUrl:"https://images.pexels.com/photos/6316515/pexels-photo-6316515.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Zucchini",category:"produce",imageUrl:"https://images.pexels.com/photos/128420/pexels-photo-128420.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Eggplant",category:"produce",imageUrl:"https://images.pexels.com/photos/321551/pexels-photo-321551.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Green Beans",category:"produce",imageUrl:"https://images.pexels.com/photos/63286/peas-green-beans-vegetables-63286.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Asparagus",category:"produce",imageUrl:"https://images.pexels.com/photos/351679/pexels-photo-351679.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Celery",category:"produce",imageUrl:"https://images.pexels.com/photos/2893635/pexels-photo-2893635.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Mushrooms",category:"produce",imageUrl:"https://images.pexels.com/photos/36438/mushrooms-brown-mushrooms-cook-eat.jpg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Corn",category:"produce",imageUrl:"https://images.pexels.com/photos/547263/pexels-photo-547263.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Ginger",category:"produce",imageUrl:"https://images.pexels.com/photos/161556/ginger-plant-asia-rhizome-161556.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Fresh Basil",category:"produce",imageUrl:"https://images.pexels.com/photos/1171182/pexels-photo-1171182.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Green Onions",category:"produce",imageUrl:"https://images.pexels.com/photos/4197447/pexels-photo-4197447.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Red Cabbage",category:"produce",imageUrl:"https://images.pexels.com/photos/6316517/pexels-photo-6316517.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Radishes",category:"produce",imageUrl:"https://images.pexels.com/photos/244393/pexels-photo-244393.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1}];var kR=[{name:"Whole Milk",category:"dairy",imageUrl:"https://images.pexels.com/photos/248412/pexels-photo-248412.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"2% Reduced Fat Milk",category:"dairy",imageUrl:"https://images.pexels.com/photos/2198626/pexels-photo-2198626.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Skim Milk",category:"dairy",imageUrl:"https://images.pexels.com/photos/725998/pexels-photo-725998.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Heavy Cream",category:"dairy",imageUrl:"https://images.pexels.com/photos/357573/pexels-photo-357573.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Half & Half",category:"dairy",imageUrl:"https://images.pexels.com/photos/416528/pexels-photo-416528.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Almond Milk",category:"dairy",imageUrl:"https://images.pexels.com/photos/3735180/pexels-photo-3735180.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Oat Milk",category:"dairy",imageUrl:"https://images.pexels.com/photos/5946627/pexels-photo-5946627.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Coconut Milk",category:"dairy",imageUrl:"https://images.pexels.com/photos/4202490/pexels-photo-4202490.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Large Eggs",category:"dairy",imageUrl:"https://images.pexels.com/photos/162712/egg-white-food-protein-162712.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Organic Free Range Eggs",category:"dairy",imageUrl:"https://images.pexels.com/photos/6941041/pexels-photo-6941041.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Egg Whites",category:"dairy",imageUrl:"https://images.pexels.com/photos/4110008/pexels-photo-4110008.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Brown Eggs",category:"dairy",imageUrl:"https://images.pexels.com/photos/4045570/pexels-photo-4045570.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Cheddar Cheese",category:"dairy",imageUrl:"https://images.pexels.com/photos/821365/pexels-photo-821365.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Mozzarella",category:"dairy",imageUrl:"https://images.pexels.com/photos/4109943/pexels-photo-4109943.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Parmesan",category:"dairy",imageUrl:"https://images.pexels.com/photos/4187779/pexels-photo-4187779.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Swiss Cheese",category:"dairy",imageUrl:"https://images.pexels.com/photos/773253/pexels-photo-773253.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Cream Cheese",category:"dairy",imageUrl:"https://images.pexels.com/photos/4397919/pexels-photo-4397919.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Feta Cheese",category:"dairy",imageUrl:"https://images.pexels.com/photos/4197908/pexels-photo-4197908.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Blue Cheese",category:"dairy",imageUrl:"https://images.pexels.com/photos/4198018/pexels-photo-4198018.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Goat Cheese",category:"dairy",imageUrl:"https://images.pexels.com/photos/4198041/pexels-photo-4198041.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Brie",category:"dairy",imageUrl:"https://images.pexels.com/photos/6287530/pexels-photo-6287530.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Cottage Cheese",category:"dairy",imageUrl:"https://images.pexels.com/photos/5946609/pexels-photo-5946609.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Ricotta",category:"dairy",imageUrl:"https://images.pexels.com/photos/6287535/pexels-photo-6287535.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Shredded Cheese",category:"dairy",imageUrl:"https://images.pexels.com/photos/4198024/pexels-photo-4198024.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"String Cheese",category:"dairy",imageUrl:"https://images.pexels.com/photos/4198020/pexels-photo-4198020.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Butter",category:"dairy",imageUrl:"https://images.pexels.com/photos/531334/pexels-photo-531334.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Unsalted Butter",category:"dairy",imageUrl:"https://images.pexels.com/photos/4110003/pexels-photo-4110003.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Margarine",category:"dairy",imageUrl:"https://images.pexels.com/photos/4397916/pexels-photo-4397916.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Greek Yogurt",category:"dairy",imageUrl:"https://images.pexels.com/photos/1435706/pexels-photo-1435706.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Plain Yogurt",category:"dairy",imageUrl:"https://images.pexels.com/photos/3669638/pexels-photo-3669638.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Flavored Yogurt",category:"dairy",imageUrl:"https://images.pexels.com/photos/4051580/pexels-photo-4051580.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Yogurt Drinks",category:"dairy",imageUrl:"https://images.pexels.com/photos/3625372/pexels-photo-3625372.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Sour Cream",category:"dairy",imageUrl:"https://images.pexels.com/photos/4397923/pexels-photo-4397923.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Whipped Cream",category:"dairy",imageUrl:"https://images.pexels.com/photos/3026806/pexels-photo-3026806.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1}];var NR=[{name:"Spaghetti",category:"pantry",imageUrl:"https://images.pexels.com/photos/4518844/pexels-photo-4518844.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Penne Pasta",category:"pantry",imageUrl:"https://images.pexels.com/photos/1437267/pexels-photo-1437267.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Macaroni",category:"pantry",imageUrl:"https://images.pexels.com/photos/4518710/pexels-photo-4518710.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Jasmine Rice",category:"pantry",imageUrl:"https://images.pexels.com/photos/4110251/pexels-photo-4110251.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Brown Rice",category:"pantry",imageUrl:"https://images.pexels.com/photos/4110377/pexels-photo-4110377.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Quinoa",category:"pantry",imageUrl:"https://images.pexels.com/photos/6740535/pexels-photo-6740535.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Oatmeal",category:"pantry",imageUrl:"https://images.pexels.com/photos/216951/pexels-photo-216951.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Bread Crumbs",category:"pantry",imageUrl:"https://images.pexels.com/photos/4110476/pexels-photo-4110476.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Canned Tomatoes",category:"pantry",imageUrl:"https://images.pexels.com/photos/5945755/pexels-photo-5945755.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Tomato Sauce",category:"pantry",imageUrl:"https://images.pexels.com/photos/4198012/pexels-photo-4198012.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Tomato Paste",category:"pantry",imageUrl:"https://images.pexels.com/photos/5945757/pexels-photo-5945757.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Black Beans",category:"pantry",imageUrl:"https://images.pexels.com/photos/4198019/pexels-photo-4198019.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Kidney Beans",category:"pantry",imageUrl:"https://images.pexels.com/photos/4198015/pexels-photo-4198015.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Chickpeas",category:"pantry",imageUrl:"https://images.pexels.com/photos/4198017/pexels-photo-4198017.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Canned Corn",category:"pantry",imageUrl:"https://images.pexels.com/photos/7469406/pexels-photo-7469406.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Canned Tuna",category:"pantry",imageUrl:"https://images.pexels.com/photos/5718026/pexels-photo-5718026.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Chicken Broth",category:"pantry",imageUrl:"https://images.pexels.com/photos/5938358/pexels-photo-5938358.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Vegetable Broth",category:"pantry",imageUrl:"https://images.pexels.com/photos/5938356/pexels-photo-5938356.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Coconut Milk (Canned)",category:"pantry",imageUrl:"https://images.pexels.com/photos/4202490/pexels-photo-4202490.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Olive Oil",category:"pantry",imageUrl:"https://images.pexels.com/photos/1022385/pexels-photo-1022385.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Vegetable Oil",category:"pantry",imageUrl:"https://images.pexels.com/photos/4202482/pexels-photo-4202482.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Coconut Oil",category:"pantry",imageUrl:"https://images.pexels.com/photos/4202486/pexels-photo-4202486.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Balsamic Vinegar",category:"pantry",imageUrl:"https://images.pexels.com/photos/4198037/pexels-photo-4198037.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Apple Cider Vinegar",category:"pantry",imageUrl:"https://images.pexels.com/photos/6957100/pexels-photo-6957100.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Soy Sauce",category:"pantry",imageUrl:"https://images.pexels.com/photos/4518578/pexels-photo-4518578.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"All-Purpose Flour",category:"pantry",imageUrl:"https://images.pexels.com/photos/5765/flour-powder-wheat-jar.jpg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Whole Wheat Flour",category:"pantry",imageUrl:"https://images.pexels.com/photos/4110256/pexels-photo-4110256.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Sugar",category:"pantry",imageUrl:"https://images.pexels.com/photos/2523650/pexels-photo-2523650.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Brown Sugar",category:"pantry",imageUrl:"https://images.pexels.com/photos/4110521/pexels-photo-4110521.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Powdered Sugar",category:"pantry",imageUrl:"https://images.pexels.com/photos/5946613/pexels-photo-5946613.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Baking Soda",category:"pantry",imageUrl:"https://images.pexels.com/photos/5946608/pexels-photo-5946608.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Baking Powder",category:"pantry",imageUrl:"https://images.pexels.com/photos/5946610/pexels-photo-5946610.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Vanilla Extract",category:"pantry",imageUrl:"https://images.pexels.com/photos/5946611/pexels-photo-5946611.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Cocoa Powder",category:"pantry",imageUrl:"https://images.pexels.com/photos/65882/chocolate-dark-coffee-confiserie-65882.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Chocolate Chips",category:"pantry",imageUrl:"https://images.pexels.com/photos/918327/pexels-photo-918327.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Yeast",category:"pantry",imageUrl:"https://images.pexels.com/photos/5946612/pexels-photo-5946612.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Honey",category:"pantry",imageUrl:"https://images.pexels.com/photos/302163/pexels-photo-302163.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Maple Syrup",category:"pantry",imageUrl:"https://images.pexels.com/photos/7474239/pexels-photo-7474239.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Peanut Butter",category:"pantry",imageUrl:"https://images.pexels.com/photos/5469076/pexels-photo-5469076.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Almond Butter",category:"pantry",imageUrl:"https://images.pexels.com/photos/5469079/pexels-photo-5469079.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Jam/Jelly",category:"pantry",imageUrl:"https://images.pexels.com/photos/1638927/pexels-photo-1638927.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Nutella",category:"pantry",imageUrl:"https://images.pexels.com/photos/4110533/pexels-photo-4110533.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Salt",category:"pantry",imageUrl:"https://images.pexels.com/photos/3296398/pexels-photo-3296398.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Black Pepper",category:"pantry",imageUrl:"https://images.pexels.com/photos/4198056/pexels-photo-4198056.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Garlic Powder",category:"pantry",imageUrl:"https://images.pexels.com/photos/4198051/pexels-photo-4198051.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Onion Powder",category:"pantry",imageUrl:"https://images.pexels.com/photos/4198053/pexels-photo-4198053.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Paprika",category:"pantry",imageUrl:"https://images.pexels.com/photos/4198054/pexels-photo-4198054.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Cumin",category:"pantry",imageUrl:"https://images.pexels.com/photos/4198060/pexels-photo-4198060.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Cinnamon",category:"pantry",imageUrl:"https://images.pexels.com/photos/4198055/pexels-photo-4198055.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Italian Seasoning",category:"pantry",imageUrl:"https://images.pexels.com/photos/4198057/pexels-photo-4198057.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Chili Powder",category:"pantry",imageUrl:"https://images.pexels.com/photos/4198059/pexels-photo-4198059.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Oregano",category:"pantry",imageUrl:"https://images.pexels.com/photos/4198062/pexels-photo-4198062.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Bay Leaves",category:"pantry",imageUrl:"https://images.pexels.com/photos/4198064/pexels-photo-4198064.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Ketchup",category:"pantry",imageUrl:"https://images.pexels.com/photos/5945565/pexels-photo-5945565.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Mustard",category:"pantry",imageUrl:"https://images.pexels.com/photos/5945566/pexels-photo-5945566.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Mayonnaise",category:"pantry",imageUrl:"https://images.pexels.com/photos/4397921/pexels-photo-4397921.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Hot Sauce",category:"pantry",imageUrl:"https://images.pexels.com/photos/4198048/pexels-photo-4198048.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"BBQ Sauce",category:"pantry",imageUrl:"https://images.pexels.com/photos/4198047/pexels-photo-4198047.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Worcestershire Sauce",category:"pantry",imageUrl:"https://images.pexels.com/photos/4198044/pexels-photo-4198044.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Almonds",category:"pantry",imageUrl:"https://images.pexels.com/photos/1013420/pexels-photo-1013420.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Walnuts",category:"pantry",imageUrl:"https://images.pexels.com/photos/4202493/pexels-photo-4202493.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Cashews",category:"pantry",imageUrl:"https://images.pexels.com/photos/4202491/pexels-photo-4202491.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Raisins",category:"pantry",imageUrl:"https://images.pexels.com/photos/4198033/pexels-photo-4198033.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Dried Cranberries",category:"pantry",imageUrl:"https://images.pexels.com/photos/4198031/pexels-photo-4198031.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Cereal",category:"pantry",imageUrl:"https://images.pexels.com/photos/135525/pexels-photo-135525.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Granola",category:"pantry",imageUrl:"https://images.pexels.com/photos/3872433/pexels-photo-3872433.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Crackers",category:"pantry",imageUrl:"https://images.pexels.com/photos/4110452/pexels-photo-4110452.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Tortilla Chips",category:"pantry",imageUrl:"https://images.pexels.com/photos/5737254/pexels-photo-5737254.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Popcorn",category:"pantry",imageUrl:"https://images.pexels.com/photos/33129/popcorn-movie-party-entertainment.jpg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Coffee",category:"pantry",imageUrl:"https://images.pexels.com/photos/585753/pexels-photo-585753.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Tea",category:"pantry",imageUrl:"https://images.pexels.com/photos/227908/pexels-photo-227908.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Hot Chocolate Mix",category:"pantry",imageUrl:"https://images.pexels.com/photos/5946618/pexels-photo-5946618.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1}];var PR=[{name:"Diapers (Newborn)",category:"baby",imageUrl:"https://placehold.co/200x200/E6E6FA/555555?text=Newborn+Diapers",isInCart:!1,isChecked:!1},{name:"Diapers (Size 1)",category:"baby",imageUrl:"https://placehold.co/200x200/E6E6FA/555555?text=Size+1+Diapers",isInCart:!1,isChecked:!1},{name:"Diapers (Size 2)",category:"baby",imageUrl:"https://placehold.co/200x200/E6E6FA/555555?text=Size+2+Diapers",isInCart:!1,isChecked:!1},{name:"Diapers (Size 3)",category:"baby",imageUrl:"https://placehold.co/200x200/E6E6FA/555555?text=Size+3+Diapers",isInCart:!1,isChecked:!1},{name:"Baby Wipes",category:"baby",imageUrl:"https://placehold.co/200x200/F0FFFF/555555?text=Baby+Wipes",isInCart:!1,isChecked:!1},{name:"Diaper Rash Cream",category:"baby",imageUrl:"https://images.pexels.com/photos/6941883/pexels-photo-6941883.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Diaper Disposal Bags",category:"baby",imageUrl:"https://images.pexels.com/photos/4239013/pexels-photo-4239013.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Baby Formula",category:"baby",imageUrl:"https://images.pexels.com/photos/6941096/pexels-photo-6941096.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Baby Cereal",category:"baby",imageUrl:"https://images.pexels.com/photos/6941098/pexels-photo-6941098.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Baby Food Pouches",category:"baby",imageUrl:"https://images.pexels.com/photos/6941099/pexels-photo-6941099.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Baby Food Jars",category:"baby",imageUrl:"https://images.pexels.com/photos/6941100/pexels-photo-6941100.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Baby Snacks",category:"baby",imageUrl:"https://images.pexels.com/photos/6941101/pexels-photo-6941101.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Baby Puffs",category:"baby",imageUrl:"https://images.pexels.com/photos/6941102/pexels-photo-6941102.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Teething Biscuits",category:"baby",imageUrl:"https://images.pexels.com/photos/6941103/pexels-photo-6941103.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Baby Water",category:"baby",imageUrl:"https://images.pexels.com/photos/1000084/pexels-photo-1000084.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Baby Bottles",category:"baby",imageUrl:"https://placehold.co/200x200/FFFACD/555555?text=Baby+Bottles",isInCart:!1,isChecked:!1},{name:"Bottle Nipples",category:"baby",imageUrl:"https://placehold.co/200x200/FFFACD/555555?text=Bottle+Nipples",isInCart:!1,isChecked:!1},{name:"Sippy Cups",category:"baby",imageUrl:"https://images.pexels.com/photos/3663068/pexels-photo-3663068.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Baby Spoons",category:"baby",imageUrl:"https://images.pexels.com/photos/6941885/pexels-photo-6941885.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Baby Bowls",category:"baby",imageUrl:"https://images.pexels.com/photos/6941886/pexels-photo-6941886.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Baby Bibs",category:"baby",imageUrl:"https://placehold.co/200x200/FFE4E1/555555?text=Baby+Bibs",isInCart:!1,isChecked:!1},{name:"Bottle Brush",category:"baby",imageUrl:"https://images.pexels.com/photos/6941887/pexels-photo-6941887.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Bottle Sterilizer",category:"baby",imageUrl:"https://images.pexels.com/photos/6941888/pexels-photo-6941888.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Baby Shampoo",category:"baby",imageUrl:"https://images.pexels.com/photos/3993398/pexels-photo-3993398.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Baby Body Wash",category:"baby",imageUrl:"https://images.pexels.com/photos/3993399/pexels-photo-3993399.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Baby Lotion",category:"baby",imageUrl:"https://images.pexels.com/photos/6941889/pexels-photo-6941889.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Baby Oil",category:"baby",imageUrl:"https://images.pexels.com/photos/6941890/pexels-photo-6941890.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Baby Powder",category:"baby",imageUrl:"https://images.pexels.com/photos/6941891/pexels-photo-6941891.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Baby Sunscreen",category:"baby",imageUrl:"https://images.pexels.com/photos/6941892/pexels-photo-6941892.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Baby Nail Clippers",category:"baby",imageUrl:"https://images.pexels.com/photos/6941893/pexels-photo-6941893.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Baby Thermometer",category:"baby",imageUrl:"https://images.pexels.com/photos/6941894/pexels-photo-6941894.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Nasal Aspirator",category:"baby",imageUrl:"https://images.pexels.com/photos/6941895/pexels-photo-6941895.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Baby Cotton Balls",category:"baby",imageUrl:"https://images.pexels.com/photos/4465124/pexels-photo-4465124.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Baby Q-Tips",category:"baby",imageUrl:"https://images.pexels.com/photos/4465125/pexels-photo-4465125.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Baby Tylenol",category:"baby",imageUrl:"https://images.pexels.com/photos/6941900/pexels-photo-6941900.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Baby Ibuprofen",category:"baby",imageUrl:"https://images.pexels.com/photos/6941901/pexels-photo-6941901.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Gripe Water",category:"baby",imageUrl:"https://images.pexels.com/photos/6941902/pexels-photo-6941902.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Gas Drops",category:"baby",imageUrl:"https://images.pexels.com/photos/6941903/pexels-photo-6941903.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Teething Gel",category:"baby",imageUrl:"https://images.pexels.com/photos/6941904/pexels-photo-6941904.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Saline Drops",category:"baby",imageUrl:"https://images.pexels.com/photos/6941905/pexels-photo-6941905.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Vitamin D Drops",category:"baby",imageUrl:"https://images.pexels.com/photos/6941906/pexels-photo-6941906.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Pacifiers",category:"baby",imageUrl:"https://placehold.co/200x200/FFB6C1/555555?text=Pacifiers",isInCart:!1,isChecked:!1},{name:"Teething Toys",category:"baby",imageUrl:"https://placehold.co/200x200/FFB6C1/555555?text=Teething+Toys",isInCart:!1,isChecked:!1},{name:"Baby Blanket",category:"baby",imageUrl:"https://placehold.co/200x200/FFE4E1/555555?text=Baby+Blanket",isInCart:!1,isChecked:!1},{name:"Swaddle Wrap",category:"baby",imageUrl:"https://placehold.co/200x200/FFE4E1/555555?text=Swaddle+Wrap",isInCart:!1,isChecked:!1},{name:"Burp Cloths",category:"baby",imageUrl:"https://placehold.co/200x200/FFE4E1/555555?text=Burp+Cloths",isInCart:!1,isChecked:!1},{name:"Baby Detergent",category:"baby",imageUrl:"https://images.pexels.com/photos/4239091/pexels-photo-4239091.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Stain Remover",category:"baby",imageUrl:"https://images.pexels.com/photos/4239092/pexels-photo-4239092.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Fabric Softener",category:"baby",imageUrl:"https://images.pexels.com/photos/4239093/pexels-photo-4239093.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1}];var MR=[{name:"All-Purpose Cleaner",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4239035/pexels-photo-4239035.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Glass Cleaner",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4239036/pexels-photo-4239036.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Disinfectant Spray",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4239091/pexels-photo-4239091.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Bleach",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4239013/pexels-photo-4239013.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Floor Cleaner",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4108715/pexels-photo-4108715.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Bathroom Cleaner",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4239037/pexels-photo-4239037.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Toilet Bowl Cleaner",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4239038/pexels-photo-4239038.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Tile & Grout Cleaner",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4108714/pexels-photo-4108714.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Oven Cleaner",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4239039/pexels-photo-4239039.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Stainless Steel Cleaner",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4239040/pexels-photo-4239040.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Laundry Detergent",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4239091/pexels-photo-4239091.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Fabric Softener",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4239092/pexels-photo-4239092.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Stain Remover",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4239093/pexels-photo-4239093.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Dryer Sheets",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4239094/pexels-photo-4239094.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Bleach Alternative",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4239095/pexels-photo-4239095.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Dish Soap",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4239031/pexels-photo-4239031.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Dishwasher Detergent",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4239032/pexels-photo-4239032.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Dishwasher Rinse Aid",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4239033/pexels-photo-4239033.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Dish Sponges",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4239015/pexels-photo-4239015.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Steel Wool Pads",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4239016/pexels-photo-4239016.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Broom",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4108716/pexels-photo-4108716.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Dustpan",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4108717/pexels-photo-4108717.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Mop",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4108718/pexels-photo-4108718.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Mop Bucket",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4108719/pexels-photo-4108719.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Duster",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4108720/pexels-photo-4108720.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Microfiber Cloths",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4239017/pexels-photo-4239017.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Cleaning Rags",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4239018/pexels-photo-4239018.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Scrub Brush",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4239019/pexels-photo-4239019.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Toilet Brush",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4239020/pexels-photo-4239020.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Rubber Gloves",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4239021/pexels-photo-4239021.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Trash Bags (Small)",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4239022/pexels-photo-4239022.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Trash Bags (Large)",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4239023/pexels-photo-4239023.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Recycling Bags",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4239024/pexels-photo-4239024.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Paper Towels",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4239025/pexels-photo-4239025.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Toilet Paper",category:"cleaning",imageUrl:"https://images.pexels.com/photos/3958210/pexels-photo-3958210.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Facial Tissues",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4239026/pexels-photo-4239026.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Napkins",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4239027/pexels-photo-4239027.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Air Freshener Spray",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4239028/pexels-photo-4239028.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Plug-in Air Freshener",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4239029/pexels-photo-4239029.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Scented Candles",category:"cleaning",imageUrl:"https://images.pexels.com/photos/3270223/pexels-photo-3270223.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Carpet Cleaner",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4108713/pexels-photo-4108713.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Furniture Polish",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4239041/pexels-photo-4239041.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Wood Cleaner",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4239042/pexels-photo-4239042.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Drain Cleaner",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4239043/pexels-photo-4239043.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Hand Sanitizer",category:"cleaning",imageUrl:"https://images.pexels.com/photos/3987142/pexels-photo-3987142.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Disinfecting Wipes",category:"cleaning",imageUrl:"https://images.pexels.com/photos/4239010/pexels-photo-4239010.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1}];var OR=[{name:"White Bread",category:"bakery",imageUrl:"https://images.pexels.com/photos/1775043/pexels-photo-1775043.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Whole Wheat Bread",category:"bakery",imageUrl:"https://images.pexels.com/photos/1586947/pexels-photo-1586947.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Sourdough Bread",category:"bakery",imageUrl:"https://images.pexels.com/photos/2280545/pexels-photo-2280545.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"French Baguette",category:"bakery",imageUrl:"https://images.pexels.com/photos/461060/pexels-photo-461060.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Ciabatta",category:"bakery",imageUrl:"https://images.pexels.com/photos/1387070/pexels-photo-1387070.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Rye Bread",category:"bakery",imageUrl:"https://images.pexels.com/photos/1756062/pexels-photo-1756062.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Multigrain Bread",category:"bakery",imageUrl:"https://images.pexels.com/photos/1510684/pexels-photo-1510684.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Brioche",category:"bakery",imageUrl:"https://images.pexels.com/photos/2135/food-france-morning-breakfast.jpg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Hamburger Buns",category:"bakery",imageUrl:"https://images.pexels.com/photos/1633578/pexels-photo-1633578.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Hot Dog Buns",category:"bakery",imageUrl:"https://images.pexels.com/photos/4676401/pexels-photo-4676401.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Dinner Rolls",category:"bakery",imageUrl:"https://images.pexels.com/photos/2280573/pexels-photo-2280573.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Kaiser Rolls",category:"bakery",imageUrl:"https://images.pexels.com/photos/209206/pexels-photo-209206.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Croissants",category:"bakery",imageUrl:"https://images.pexels.com/photos/3724354/pexels-photo-3724354.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Danish Pastry",category:"bakery",imageUrl:"https://images.pexels.com/photos/2693447/pexels-photo-2693447.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Cinnamon Rolls",category:"bakery",imageUrl:"https://images.pexels.com/photos/267308/pexels-photo-267308.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Muffins",category:"bakery",imageUrl:"https://images.pexels.com/photos/1657343/pexels-photo-1657343.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Donuts",category:"bakery",imageUrl:"https://images.pexels.com/photos/1854652/pexels-photo-1854652.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Scones",category:"bakery",imageUrl:"https://images.pexels.com/photos/3992134/pexels-photo-3992134.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Bagels",category:"bakery",imageUrl:"https://images.pexels.com/photos/5419336/pexels-photo-5419336.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"English Muffins",category:"bakery",imageUrl:"https://images.pexels.com/photos/4331489/pexels-photo-4331489.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Pita Bread",category:"bakery",imageUrl:"https://images.pexels.com/photos/5409009/pexels-photo-5409009.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Naan Bread",category:"bakery",imageUrl:"https://images.pexels.com/photos/2474661/pexels-photo-2474661.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Tortillas",category:"bakery",imageUrl:"https://images.pexels.com/photos/5737254/pexels-photo-5737254.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Flatbread",category:"bakery",imageUrl:"https://images.pexels.com/photos/1117862/pexels-photo-1117862.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Wraps",category:"bakery",imageUrl:"https://images.pexels.com/photos/461198/pexels-photo-461198.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Cake",category:"bakery",imageUrl:"https://images.pexels.com/photos/1721932/pexels-photo-1721932.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Cupcakes",category:"bakery",imageUrl:"https://images.pexels.com/photos/913136/pexels-photo-913136.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Brownies",category:"bakery",imageUrl:"https://images.pexels.com/photos/2067396/pexels-photo-2067396.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Cookies",category:"bakery",imageUrl:"https://images.pexels.com/photos/890577/pexels-photo-890577.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Pie",category:"bakery",imageUrl:"https://images.pexels.com/photos/1126359/pexels-photo-1126359.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Breadsticks",category:"bakery",imageUrl:"https://images.pexels.com/photos/1435901/pexels-photo-1435901.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Garlic Bread",category:"bakery",imageUrl:"https://images.pexels.com/photos/1460872/pexels-photo-1460872.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Focaccia",category:"bakery",imageUrl:"https://images.pexels.com/photos/5419268/pexels-photo-5419268.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Pretzel",category:"bakery",imageUrl:"https://images.pexels.com/photos/40801/pretzel-baked-goods-eat-pastries-40801.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Cornbread",category:"bakery",imageUrl:"https://images.pexels.com/photos/9510029/pexels-photo-9510029.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1}];var FR=[{name:"Bottled Water",category:"beverages",imageUrl:"https://images.pexels.com/photos/1000084/pexels-photo-1000084.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Sparkling Water",category:"beverages",imageUrl:"https://images.pexels.com/photos/2479614/pexels-photo-2479614.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Mineral Water",category:"beverages",imageUrl:"https://images.pexels.com/photos/327090/pexels-photo-327090.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Flavored Water",category:"beverages",imageUrl:"https://images.pexels.com/photos/1484669/pexels-photo-1484669.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Cola",category:"beverages",imageUrl:"https://images.pexels.com/photos/50593/coca-cola-cold-drink-soft-drink-coke-50593.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Lemon-Lime Soda",category:"beverages",imageUrl:"https://images.pexels.com/photos/2789328/pexels-photo-2789328.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Ginger Ale",category:"beverages",imageUrl:"https://images.pexels.com/photos/4021983/pexels-photo-4021983.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Root Beer",category:"beverages",imageUrl:"https://images.pexels.com/photos/4553027/pexels-photo-4553027.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Orange Soda",category:"beverages",imageUrl:"https://images.pexels.com/photos/2668308/pexels-photo-2668308.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Orange Juice",category:"beverages",imageUrl:"https://images.pexels.com/photos/158053/fresh-orange-juice-squeezed-refreshing-citrus-158053.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Apple Juice",category:"beverages",imageUrl:"https://images.pexels.com/photos/1337825/pexels-photo-1337825.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Grape Juice",category:"beverages",imageUrl:"https://images.pexels.com/photos/3028500/pexels-photo-3028500.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Cranberry Juice",category:"beverages",imageUrl:"https://images.pexels.com/photos/3323682/pexels-photo-3323682.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Pineapple Juice",category:"beverages",imageUrl:"https://images.pexels.com/photos/1536868/pexels-photo-1536868.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Tomato Juice",category:"beverages",imageUrl:"https://images.pexels.com/photos/1327838/pexels-photo-1327838.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Mixed Fruit Juice",category:"beverages",imageUrl:"https://images.pexels.com/photos/1132047/pexels-photo-1132047.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Lemonade",category:"beverages",imageUrl:"https://images.pexels.com/photos/2109099/pexels-photo-2109099.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Ground Coffee",category:"beverages",imageUrl:"https://images.pexels.com/photos/894695/pexels-photo-894695.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Coffee Beans",category:"beverages",imageUrl:"https://images.pexels.com/photos/1695052/pexels-photo-1695052.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Instant Coffee",category:"beverages",imageUrl:"https://images.pexels.com/photos/585753/pexels-photo-585753.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Coffee Pods",category:"beverages",imageUrl:"https://images.pexels.com/photos/3020919/pexels-photo-3020919.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Black Tea",category:"beverages",imageUrl:"https://images.pexels.com/photos/1417945/pexels-photo-1417945.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Green Tea",category:"beverages",imageUrl:"https://images.pexels.com/photos/1638280/pexels-photo-1638280.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Herbal Tea",category:"beverages",imageUrl:"https://images.pexels.com/photos/1549686/pexels-photo-1549686.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Chamomile Tea",category:"beverages",imageUrl:"https://images.pexels.com/photos/734983/pexels-photo-734983.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Iced Tea",category:"beverages",imageUrl:"https://images.pexels.com/photos/792613/pexels-photo-792613.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Energy Drink",category:"beverages",imageUrl:"https://images.pexels.com/photos/3756523/pexels-photo-3756523.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Sports Drink",category:"beverages",imageUrl:"https://images.pexels.com/photos/3621168/pexels-photo-3621168.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Electrolyte Drink",category:"beverages",imageUrl:"https://images.pexels.com/photos/4397840/pexels-photo-4397840.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Hot Chocolate",category:"beverages",imageUrl:"https://images.pexels.com/photos/3551717/pexels-photo-3551717.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Cocoa Powder",category:"beverages",imageUrl:"https://images.pexels.com/photos/65882/chocolate-dark-coffee-confiserie-65882.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Smoothie Mix",category:"beverages",imageUrl:"https://images.pexels.com/photos/1346347/pexels-photo-1346347.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Protein Shake",category:"beverages",imageUrl:"https://images.pexels.com/photos/3735792/pexels-photo-3735792.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Coconut Water",category:"beverages",imageUrl:"https://images.pexels.com/photos/1030973/pexels-photo-1030973.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Kombucha",category:"beverages",imageUrl:"https://images.pexels.com/photos/4553036/pexels-photo-4553036.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Tonic Water",category:"beverages",imageUrl:"https://images.pexels.com/photos/1187766/pexels-photo-1187766.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Club Soda",category:"beverages",imageUrl:"https://images.pexels.com/photos/2531184/pexels-photo-2531184.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1}];var VR=[{name:"Canned Corn",category:"canned",imageUrl:"https://images.pexels.com/photos/5945755/pexels-photo-5945755.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Canned Green Beans",category:"canned",imageUrl:"https://images.pexels.com/photos/6316515/pexels-photo-6316515.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Canned Peas",category:"canned",imageUrl:"https://images.pexels.com/photos/6316668/pexels-photo-6316668.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Canned Carrots",category:"canned",imageUrl:"https://images.pexels.com/photos/143133/pexels-photo-143133.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Canned Mushrooms",category:"canned",imageUrl:"https://images.pexels.com/photos/36438/mushrooms-brown-mushrooms-cook-eat.jpg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Canned Tomatoes",category:"canned",imageUrl:"https://images.pexels.com/photos/533280/pexels-photo-533280.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Tomato Paste",category:"canned",imageUrl:"https://images.pexels.com/photos/4197447/pexels-photo-4197447.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Tomato Sauce",category:"canned",imageUrl:"https://images.pexels.com/photos/6287520/pexels-photo-6287520.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Canned Artichokes",category:"canned",imageUrl:"https://images.pexels.com/photos/4033324/pexels-photo-4033324.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Canned Olives",category:"canned",imageUrl:"https://images.pexels.com/photos/4109900/pexels-photo-4109900.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Canned Black Beans",category:"canned",imageUrl:"https://images.pexels.com/photos/4198171/pexels-photo-4198171.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Canned Kidney Beans",category:"canned",imageUrl:"https://images.pexels.com/photos/6824475/pexels-photo-6824475.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Canned Chickpeas",category:"canned",imageUrl:"https://images.pexels.com/photos/6316514/pexels-photo-6316514.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Baked Beans",category:"canned",imageUrl:"https://images.pexels.com/photos/6287276/pexels-photo-6287276.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Canned Lentils",category:"canned",imageUrl:"https://images.pexels.com/photos/8108102/pexels-photo-8108102.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Refried Beans",category:"canned",imageUrl:"https://images.pexels.com/photos/5737247/pexels-photo-5737247.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Canned Peaches",category:"canned",imageUrl:"https://images.pexels.com/photos/5945660/pexels-photo-5945660.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Canned Pears",category:"canned",imageUrl:"https://images.pexels.com/photos/568471/pexels-photo-568471.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Canned Pineapple",category:"canned",imageUrl:"https://images.pexels.com/photos/1071878/pexels-photo-1071878.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Canned Mandarin Oranges",category:"canned",imageUrl:"https://images.pexels.com/photos/2294471/pexels-photo-2294471.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Fruit Cocktail",category:"canned",imageUrl:"https://images.pexels.com/photos/1132558/pexels-photo-1132558.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Canned Cherries",category:"canned",imageUrl:"https://images.pexels.com/photos/175727/pexels-photo-175727.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Canned Tuna",category:"canned",imageUrl:"https://images.pexels.com/photos/5908058/pexels-photo-5908058.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Canned Salmon",category:"canned",imageUrl:"https://images.pexels.com/photos/3296279/pexels-photo-3296279.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Canned Sardines",category:"canned",imageUrl:"https://images.pexels.com/photos/4553028/pexels-photo-4553028.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Canned Chicken",category:"canned",imageUrl:"https://images.pexels.com/photos/6210876/pexels-photo-6210876.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Canned Ham",category:"canned",imageUrl:"https://images.pexels.com/photos/8753653/pexels-photo-8753653.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Spam",category:"canned",imageUrl:"https://images.pexels.com/photos/6210747/pexels-photo-6210747.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Canned Crab",category:"canned",imageUrl:"https://images.pexels.com/photos/566344/pexels-photo-566344.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Chicken Soup",category:"canned",imageUrl:"https://images.pexels.com/photos/2474661/pexels-photo-2474661.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Tomato Soup",category:"canned",imageUrl:"https://images.pexels.com/photos/539451/pexels-photo-539451.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Vegetable Soup",category:"canned",imageUrl:"https://images.pexels.com/photos/1731535/pexels-photo-1731535.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Chicken Broth",category:"canned",imageUrl:"https://images.pexels.com/photos/6072054/pexels-photo-6072054.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Beef Broth",category:"canned",imageUrl:"https://images.pexels.com/photos/5409020/pexels-photo-5409020.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Vegetable Broth",category:"canned",imageUrl:"https://images.pexels.com/photos/5419336/pexels-photo-5419336.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Coconut Milk (Canned)",category:"canned",imageUrl:"https://images.pexels.com/photos/4202490/pexels-photo-4202490.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Evaporated Milk",category:"canned",imageUrl:"https://images.pexels.com/photos/4397917/pexels-photo-4397917.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Condensed Milk",category:"canned",imageUrl:"https://images.pexels.com/photos/4110008/pexels-photo-4110008.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Canned Pumpkin",category:"canned",imageUrl:"https://images.pexels.com/photos/5419268/pexels-photo-5419268.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1}];var LR=[{name:"Ketchup",category:"condiments",imageUrl:"https://images.pexels.com/photos/5900422/pexels-photo-5900422.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Mustard",category:"condiments",imageUrl:"https://images.pexels.com/photos/4198018/pexels-photo-4198018.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Mayonnaise",category:"condiments",imageUrl:"https://images.pexels.com/photos/4397919/pexels-photo-4397919.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Relish",category:"condiments",imageUrl:"https://images.pexels.com/photos/5945758/pexels-photo-5945758.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Hot Sauce",category:"condiments",imageUrl:"https://images.pexels.com/photos/5737380/pexels-photo-5737380.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Sriracha",category:"condiments",imageUrl:"https://images.pexels.com/photos/6287533/pexels-photo-6287533.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Tabasco",category:"condiments",imageUrl:"https://images.pexels.com/photos/5945659/pexels-photo-5945659.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Soy Sauce",category:"condiments",imageUrl:"https://images.pexels.com/photos/5409015/pexels-photo-5409015.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Teriyaki Sauce",category:"condiments",imageUrl:"https://images.pexels.com/photos/3186654/pexels-photo-3186654.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Hoisin Sauce",category:"condiments",imageUrl:"https://images.pexels.com/photos/4198029/pexels-photo-4198029.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Fish Sauce",category:"condiments",imageUrl:"https://images.pexels.com/photos/5945757/pexels-photo-5945757.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Oyster Sauce",category:"condiments",imageUrl:"https://images.pexels.com/photos/4198028/pexels-photo-4198028.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Marinara Sauce",category:"condiments",imageUrl:"https://images.pexels.com/photos/1438672/pexels-photo-1438672.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Alfredo Sauce",category:"condiments",imageUrl:"https://images.pexels.com/photos/1527603/pexels-photo-1527603.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Pesto",category:"condiments",imageUrl:"https://images.pexels.com/photos/1435895/pexels-photo-1435895.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"BBQ Sauce",category:"condiments",imageUrl:"https://images.pexels.com/photos/4198036/pexels-photo-4198036.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Steak Sauce",category:"condiments",imageUrl:"https://images.pexels.com/photos/3535383/pexels-photo-3535383.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Worcestershire Sauce",category:"condiments",imageUrl:"https://images.pexels.com/photos/4198027/pexels-photo-4198027.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Ranch Dressing",category:"condiments",imageUrl:"https://images.pexels.com/photos/4198031/pexels-photo-4198031.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Italian Dressing",category:"condiments",imageUrl:"https://images.pexels.com/photos/5945756/pexels-photo-5945756.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Caesar Dressing",category:"condiments",imageUrl:"https://images.pexels.com/photos/2097090/pexels-photo-2097090.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Balsamic Vinaigrette",category:"condiments",imageUrl:"https://images.pexels.com/photos/1193335/pexels-photo-1193335.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Olive Oil",category:"condiments",imageUrl:"https://images.pexels.com/photos/33783/olive-oil-salad-dressing-cooking-olive.jpg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Vegetable Oil",category:"condiments",imageUrl:"https://images.pexels.com/photos/4198035/pexels-photo-4198035.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Balsamic Vinegar",category:"condiments",imageUrl:"https://images.pexels.com/photos/4198030/pexels-photo-4198030.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Apple Cider Vinegar",category:"condiments",imageUrl:"https://images.pexels.com/photos/5945754/pexels-photo-5945754.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Honey",category:"condiments",imageUrl:"https://images.pexels.com/photos/1638280/pexels-photo-1638280.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Maple Syrup",category:"condiments",imageUrl:"https://images.pexels.com/photos/4198025/pexels-photo-4198025.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Jam",category:"condiments",imageUrl:"https://images.pexels.com/photos/1328887/pexels-photo-1328887.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Peanut Butter",category:"condiments",imageUrl:"https://images.pexels.com/photos/4187779/pexels-photo-4187779.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Hummus",category:"condiments",imageUrl:"https://images.pexels.com/photos/1618898/pexels-photo-1618898.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Salsa",category:"condiments",imageUrl:"https://images.pexels.com/photos/5737247/pexels-photo-5737247.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Guacamole",category:"condiments",imageUrl:"https://images.pexels.com/photos/1640777/pexels-photo-1640777.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1}];var UR=[{name:"Ham Slices",category:"deli",imageUrl:"https://images.pexels.com/photos/8753653/pexels-photo-8753653.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Turkey Breast",category:"deli",imageUrl:"https://images.pexels.com/photos/6210876/pexels-photo-6210876.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Roast Beef",category:"deli",imageUrl:"https://images.pexels.com/photos/6941041/pexels-photo-6941041.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Salami",category:"deli",imageUrl:"https://images.pexels.com/photos/4198018/pexels-photo-4198018.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Pepperoni",category:"deli",imageUrl:"https://images.pexels.com/photos/4109943/pexels-photo-4109943.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Bologna",category:"deli",imageUrl:"https://images.pexels.com/photos/6210747/pexels-photo-6210747.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Pastrami",category:"deli",imageUrl:"https://images.pexels.com/photos/3535383/pexels-photo-3535383.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Prosciutto",category:"deli",imageUrl:"https://images.pexels.com/photos/4198036/pexels-photo-4198036.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Capicola",category:"deli",imageUrl:"https://images.pexels.com/photos/4198028/pexels-photo-4198028.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Corned Beef",category:"deli",imageUrl:"https://images.pexels.com/photos/5409020/pexels-photo-5409020.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Provolone",category:"deli",imageUrl:"https://images.pexels.com/photos/821365/pexels-photo-821365.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"American Cheese",category:"deli",imageUrl:"https://images.pexels.com/photos/773253/pexels-photo-773253.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Muenster Cheese",category:"deli",imageUrl:"https://images.pexels.com/photos/4198024/pexels-photo-4198024.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Pepper Jack",category:"deli",imageUrl:"https://images.pexels.com/photos/4198020/pexels-photo-4198020.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Rotisserie Chicken",category:"deli",imageUrl:"https://images.pexels.com/photos/2338407/pexels-photo-2338407.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Potato Salad",category:"deli",imageUrl:"https://images.pexels.com/photos/1640774/pexels-photo-1640774.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Coleslaw",category:"deli",imageUrl:"https://images.pexels.com/photos/1640777/pexels-photo-1640777.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Macaroni Salad",category:"deli",imageUrl:"https://images.pexels.com/photos/1438672/pexels-photo-1438672.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Chicken Salad",category:"deli",imageUrl:"https://images.pexels.com/photos/2097090/pexels-photo-2097090.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Tuna Salad",category:"deli",imageUrl:"https://images.pexels.com/photos/5908058/pexels-photo-5908058.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Hot Dogs",category:"deli",imageUrl:"https://images.pexels.com/photos/4676401/pexels-photo-4676401.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Bratwurst",category:"deli",imageUrl:"https://images.pexels.com/photos/929137/pexels-photo-929137.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Italian Sausage",category:"deli",imageUrl:"https://images.pexels.com/photos/3535383/pexels-photo-3535383.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Breakfast Sausage",category:"deli",imageUrl:"https://images.pexels.com/photos/6210747/pexels-photo-6210747.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Kielbasa",category:"deli",imageUrl:"https://images.pexels.com/photos/4198028/pexels-photo-4198028.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Bacon",category:"deli",imageUrl:"https://images.pexels.com/photos/1059943/pexels-photo-1059943.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Turkey Bacon",category:"deli",imageUrl:"https://images.pexels.com/photos/6210876/pexels-photo-6210876.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Canadian Bacon",category:"deli",imageUrl:"https://images.pexels.com/photos/8753653/pexels-photo-8753653.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1}];var jR=[{name:"Frozen Peas",category:"frozen",imageUrl:"https://images.pexels.com/photos/6316668/pexels-photo-6316668.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Frozen Corn",category:"frozen",imageUrl:"https://images.pexels.com/photos/5945755/pexels-photo-5945755.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Frozen Broccoli",category:"frozen",imageUrl:"https://images.pexels.com/photos/1359326/pexels-photo-1359326.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Mixed Vegetables",category:"frozen",imageUrl:"https://images.pexels.com/photos/1435904/pexels-photo-1435904.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Frozen Spinach",category:"frozen",imageUrl:"https://images.pexels.com/photos/2325843/pexels-photo-2325843.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Frozen Green Beans",category:"frozen",imageUrl:"https://images.pexels.com/photos/6316515/pexels-photo-6316515.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Stir Fry Vegetables",category:"frozen",imageUrl:"https://images.pexels.com/photos/1640774/pexels-photo-1640774.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Frozen Berries",category:"frozen",imageUrl:"https://images.pexels.com/photos/1292294/pexels-photo-1292294.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Frozen Strawberries",category:"frozen",imageUrl:"https://images.pexels.com/photos/934066/pexels-photo-934066.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Frozen Blueberries",category:"frozen",imageUrl:"https://images.pexels.com/photos/1395958/pexels-photo-1395958.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Frozen Mango",category:"frozen",imageUrl:"https://images.pexels.com/photos/918643/pexels-photo-918643.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Vanilla Ice Cream",category:"frozen",imageUrl:"https://images.pexels.com/photos/1352278/pexels-photo-1352278.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Chocolate Ice Cream",category:"frozen",imageUrl:"https://images.pexels.com/photos/3625372/pexels-photo-3625372.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Ice Cream Bars",category:"frozen",imageUrl:"https://images.pexels.com/photos/1294943/pexels-photo-1294943.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Frozen Yogurt",category:"frozen",imageUrl:"https://images.pexels.com/photos/1362534/pexels-photo-1362534.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Frozen Pie",category:"frozen",imageUrl:"https://images.pexels.com/photos/1126359/pexels-photo-1126359.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Popsicles",category:"frozen",imageUrl:"https://images.pexels.com/photos/1294942/pexels-photo-1294942.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Frozen Pizza",category:"frozen",imageUrl:"https://images.pexels.com/photos/1146760/pexels-photo-1146760.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Frozen Lasagna",category:"frozen",imageUrl:"https://images.pexels.com/photos/4079520/pexels-photo-4079520.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"TV Dinners",category:"frozen",imageUrl:"https://images.pexels.com/photos/2097090/pexels-photo-2097090.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Frozen Burritos",category:"frozen",imageUrl:"https://images.pexels.com/photos/461198/pexels-photo-461198.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Pot Pies",category:"frozen",imageUrl:"https://images.pexels.com/photos/1126359/pexels-photo-1126359.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Frozen Chicken Breasts",category:"frozen",imageUrl:"https://images.pexels.com/photos/2338407/pexels-photo-2338407.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Frozen Ground Beef",category:"frozen",imageUrl:"https://images.pexels.com/photos/6941041/pexels-photo-6941041.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Frozen Shrimp",category:"frozen",imageUrl:"https://images.pexels.com/photos/566344/pexels-photo-566344.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Frozen Fish Fillets",category:"frozen",imageUrl:"https://images.pexels.com/photos/3296279/pexels-photo-3296279.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Fish Sticks",category:"frozen",imageUrl:"https://images.pexels.com/photos/4553028/pexels-photo-4553028.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Frozen French Fries",category:"frozen",imageUrl:"https://images.pexels.com/photos/1583884/pexels-photo-1583884.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Tater Tots",category:"frozen",imageUrl:"https://images.pexels.com/photos/1640774/pexels-photo-1640774.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Chicken Nuggets",category:"frozen",imageUrl:"https://images.pexels.com/photos/6210876/pexels-photo-6210876.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Mozzarella Sticks",category:"frozen",imageUrl:"https://images.pexels.com/photos/4109943/pexels-photo-4109943.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Egg Rolls",category:"frozen",imageUrl:"https://images.pexels.com/photos/5409009/pexels-photo-5409009.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Frozen Dumplings",category:"frozen",imageUrl:"https://images.pexels.com/photos/4198019/pexels-photo-4198019.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Frozen Waffles",category:"frozen",imageUrl:"https://images.pexels.com/photos/2280545/pexels-photo-2280545.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Frozen Pancakes",category:"frozen",imageUrl:"https://images.pexels.com/photos/376464/pexels-photo-376464.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Breakfast Sandwiches",category:"frozen",imageUrl:"https://images.pexels.com/photos/1633578/pexels-photo-1633578.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Hash Browns",category:"frozen",imageUrl:"https://images.pexels.com/photos/1640774/pexels-photo-1640774.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1}];var BR=[{name:"Toothpaste",category:"health",imageUrl:"https://images.pexels.com/photos/3762879/pexels-photo-3762879.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Toothbrush",category:"health",imageUrl:"https://images.pexels.com/photos/3762880/pexels-photo-3762880.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Mouthwash",category:"health",imageUrl:"https://images.pexels.com/photos/4465124/pexels-photo-4465124.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Dental Floss",category:"health",imageUrl:"https://images.pexels.com/photos/4465127/pexels-photo-4465127.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Shampoo",category:"health",imageUrl:"https://images.pexels.com/photos/3735218/pexels-photo-3735218.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Conditioner",category:"health",imageUrl:"https://images.pexels.com/photos/3735217/pexels-photo-3735217.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Hair Gel",category:"health",imageUrl:"https://images.pexels.com/photos/3993320/pexels-photo-3993320.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Hair Spray",category:"health",imageUrl:"https://images.pexels.com/photos/3993324/pexels-photo-3993324.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Body Wash",category:"health",imageUrl:"https://images.pexels.com/photos/4041392/pexels-photo-4041392.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Bar Soap",category:"health",imageUrl:"https://images.pexels.com/photos/3737586/pexels-photo-3737586.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Body Lotion",category:"health",imageUrl:"https://images.pexels.com/photos/3997373/pexels-photo-3997373.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Deodorant",category:"health",imageUrl:"https://images.pexels.com/photos/4465831/pexels-photo-4465831.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Hand Soap",category:"health",imageUrl:"https://images.pexels.com/photos/4239013/pexels-photo-4239013.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Hand Sanitizer",category:"health",imageUrl:"https://images.pexels.com/photos/3987142/pexels-photo-3987142.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Face Wash",category:"health",imageUrl:"https://images.pexels.com/photos/3762879/pexels-photo-3762879.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Moisturizer",category:"health",imageUrl:"https://images.pexels.com/photos/3997373/pexels-photo-3997373.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Sunscreen",category:"health",imageUrl:"https://images.pexels.com/photos/3622614/pexels-photo-3622614.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Lip Balm",category:"health",imageUrl:"https://images.pexels.com/photos/3997374/pexels-photo-3997374.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Razors",category:"health",imageUrl:"https://images.pexels.com/photos/3771109/pexels-photo-3771109.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Shaving Cream",category:"health",imageUrl:"https://images.pexels.com/photos/3771115/pexels-photo-3771115.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Aftershave",category:"health",imageUrl:"https://images.pexels.com/photos/3771122/pexels-photo-3771122.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Pain Reliever",category:"health",imageUrl:"https://images.pexels.com/photos/3683074/pexels-photo-3683074.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Cold Medicine",category:"health",imageUrl:"https://images.pexels.com/photos/3683053/pexels-photo-3683053.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Allergy Medicine",category:"health",imageUrl:"https://images.pexels.com/photos/3683098/pexels-photo-3683098.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Antacid",category:"health",imageUrl:"https://images.pexels.com/photos/3683051/pexels-photo-3683051.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Bandages",category:"health",imageUrl:"https://images.pexels.com/photos/4386467/pexels-photo-4386467.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"First Aid Kit",category:"health",imageUrl:"https://images.pexels.com/photos/4386466/pexels-photo-4386466.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Vitamins",category:"health",imageUrl:"https://images.pexels.com/photos/3683074/pexels-photo-3683074.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Feminine Pads",category:"health",imageUrl:"https://images.pexels.com/photos/4465124/pexels-photo-4465124.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Tampons",category:"health",imageUrl:"https://images.pexels.com/photos/4465831/pexels-photo-4465831.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Tissues",category:"health",imageUrl:"https://images.pexels.com/photos/4239036/pexels-photo-4239036.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Cotton Balls",category:"health",imageUrl:"https://images.pexels.com/photos/4465124/pexels-photo-4465124.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Cotton Swabs",category:"health",imageUrl:"https://images.pexels.com/photos/4465127/pexels-photo-4465127.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1}];var $R=[{name:"Ground Beef",category:"meat",imageUrl:"https://images.pexels.com/photos/6941041/pexels-photo-6941041.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Beef Steak",category:"meat",imageUrl:"https://images.pexels.com/photos/1251208/pexels-photo-1251208.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Ribeye Steak",category:"meat",imageUrl:"https://images.pexels.com/photos/3535383/pexels-photo-3535383.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Beef Roast",category:"meat",imageUrl:"https://images.pexels.com/photos/5409020/pexels-photo-5409020.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Beef Ribs",category:"meat",imageUrl:"https://images.pexels.com/photos/929137/pexels-photo-929137.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Beef Stew Meat",category:"meat",imageUrl:"https://images.pexels.com/photos/6210747/pexels-photo-6210747.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Whole Chicken",category:"meat",imageUrl:"https://images.pexels.com/photos/2338407/pexels-photo-2338407.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Chicken Breast",category:"meat",imageUrl:"https://images.pexels.com/photos/6210876/pexels-photo-6210876.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Chicken Thighs",category:"meat",imageUrl:"https://images.pexels.com/photos/6210747/pexels-photo-6210747.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Chicken Wings",category:"meat",imageUrl:"https://images.pexels.com/photos/2338407/pexels-photo-2338407.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Chicken Drumsticks",category:"meat",imageUrl:"https://images.pexels.com/photos/6210876/pexels-photo-6210876.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Ground Chicken",category:"meat",imageUrl:"https://images.pexels.com/photos/6941041/pexels-photo-6941041.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Pork Chops",category:"meat",imageUrl:"https://images.pexels.com/photos/3535383/pexels-photo-3535383.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Pork Tenderloin",category:"meat",imageUrl:"https://images.pexels.com/photos/8753653/pexels-photo-8753653.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Ground Pork",category:"meat",imageUrl:"https://images.pexels.com/photos/6941041/pexels-photo-6941041.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Pork Ribs",category:"meat",imageUrl:"https://images.pexels.com/photos/929137/pexels-photo-929137.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Pork Belly",category:"meat",imageUrl:"https://images.pexels.com/photos/1059943/pexels-photo-1059943.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Ground Turkey",category:"meat",imageUrl:"https://images.pexels.com/photos/6941041/pexels-photo-6941041.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Turkey Breast",category:"meat",imageUrl:"https://images.pexels.com/photos/6210876/pexels-photo-6210876.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Lamb Chops",category:"meat",imageUrl:"https://images.pexels.com/photos/3535383/pexels-photo-3535383.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Ground Lamb",category:"meat",imageUrl:"https://images.pexels.com/photos/6941041/pexels-photo-6941041.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Salmon Fillet",category:"meat",imageUrl:"https://images.pexels.com/photos/3296279/pexels-photo-3296279.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Tilapia",category:"meat",imageUrl:"https://images.pexels.com/photos/3296279/pexels-photo-3296279.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Cod Fillet",category:"meat",imageUrl:"https://images.pexels.com/photos/4553028/pexels-photo-4553028.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Tuna Steak",category:"meat",imageUrl:"https://images.pexels.com/photos/5908058/pexels-photo-5908058.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Trout",category:"meat",imageUrl:"https://images.pexels.com/photos/3296279/pexels-photo-3296279.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Catfish",category:"meat",imageUrl:"https://images.pexels.com/photos/4553028/pexels-photo-4553028.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Shrimp",category:"meat",imageUrl:"https://images.pexels.com/photos/566344/pexels-photo-566344.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Crab Legs",category:"meat",imageUrl:"https://images.pexels.com/photos/566344/pexels-photo-566344.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Lobster",category:"meat",imageUrl:"https://images.pexels.com/photos/566344/pexels-photo-566344.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Scallops",category:"meat",imageUrl:"https://images.pexels.com/photos/566344/pexels-photo-566344.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Mussels",category:"meat",imageUrl:"https://images.pexels.com/photos/3655916/pexels-photo-3655916.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Clams",category:"meat",imageUrl:"https://images.pexels.com/photos/3655916/pexels-photo-3655916.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Oysters",category:"meat",imageUrl:"https://images.pexels.com/photos/3655916/pexels-photo-3655916.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Calamari",category:"meat",imageUrl:"https://images.pexels.com/photos/566344/pexels-photo-566344.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1}];var zR=[{name:"Dry Dog Food",category:"pets",imageUrl:"https://images.pexels.com/photos/1390361/pexels-photo-1390361.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Wet Dog Food",category:"pets",imageUrl:"https://images.pexels.com/photos/1390361/pexels-photo-1390361.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Dog Treats",category:"pets",imageUrl:"https://images.pexels.com/photos/1390361/pexels-photo-1390361.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Dog Biscuits",category:"pets",imageUrl:"https://images.pexels.com/photos/1390361/pexels-photo-1390361.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Dog Chews",category:"pets",imageUrl:"https://images.pexels.com/photos/2607544/pexels-photo-2607544.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Dry Cat Food",category:"pets",imageUrl:"https://images.pexels.com/photos/1741205/pexels-photo-1741205.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Wet Cat Food",category:"pets",imageUrl:"https://images.pexels.com/photos/1741205/pexels-photo-1741205.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Cat Treats",category:"pets",imageUrl:"https://images.pexels.com/photos/1741205/pexels-photo-1741205.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Cat Litter",category:"pets",imageUrl:"https://images.pexels.com/photos/1741205/pexels-photo-1741205.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Catnip",category:"pets",imageUrl:"https://images.pexels.com/photos/1741205/pexels-photo-1741205.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Flea & Tick Treatment",category:"pets",imageUrl:"https://images.pexels.com/photos/2607544/pexels-photo-2607544.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Pet Shampoo",category:"pets",imageUrl:"https://images.pexels.com/photos/2607544/pexels-photo-2607544.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Pet Brush",category:"pets",imageUrl:"https://images.pexels.com/photos/2607544/pexels-photo-2607544.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Pet Nail Clippers",category:"pets",imageUrl:"https://images.pexels.com/photos/2607544/pexels-photo-2607544.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Dog Collar",category:"pets",imageUrl:"https://images.pexels.com/photos/1390361/pexels-photo-1390361.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Dog Leash",category:"pets",imageUrl:"https://images.pexels.com/photos/1390361/pexels-photo-1390361.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Pet Bed",category:"pets",imageUrl:"https://images.pexels.com/photos/1390361/pexels-photo-1390361.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Food Bowl",category:"pets",imageUrl:"https://images.pexels.com/photos/1390361/pexels-photo-1390361.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Water Bowl",category:"pets",imageUrl:"https://images.pexels.com/photos/1390361/pexels-photo-1390361.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Pet Toys",category:"pets",imageUrl:"https://images.pexels.com/photos/2607544/pexels-photo-2607544.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Fish Food",category:"pets",imageUrl:"https://images.pexels.com/photos/128756/pexels-photo-128756.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Bird Seed",category:"pets",imageUrl:"https://images.pexels.com/photos/1661179/pexels-photo-1661179.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Poop Bags",category:"pets",imageUrl:"https://images.pexels.com/photos/2607544/pexels-photo-2607544.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Litter Box Liners",category:"pets",imageUrl:"https://images.pexels.com/photos/1741205/pexels-photo-1741205.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Pet Stain Remover",category:"pets",imageUrl:"https://images.pexels.com/photos/4239013/pexels-photo-4239013.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1}];var HR=[{name:"Potato Chips",category:"snacks",imageUrl:"https://images.pexels.com/photos/1583884/pexels-photo-1583884.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Tortilla Chips",category:"snacks",imageUrl:"https://images.pexels.com/photos/5737380/pexels-photo-5737380.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Corn Chips",category:"snacks",imageUrl:"https://images.pexels.com/photos/5737247/pexels-photo-5737247.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Veggie Chips",category:"snacks",imageUrl:"https://images.pexels.com/photos/1583884/pexels-photo-1583884.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Kettle Chips",category:"snacks",imageUrl:"https://images.pexels.com/photos/1583884/pexels-photo-1583884.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Saltine Crackers",category:"snacks",imageUrl:"https://images.pexels.com/photos/890577/pexels-photo-890577.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Graham Crackers",category:"snacks",imageUrl:"https://images.pexels.com/photos/890577/pexels-photo-890577.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Cheese Crackers",category:"snacks",imageUrl:"https://images.pexels.com/photos/890577/pexels-photo-890577.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Rice Crackers",category:"snacks",imageUrl:"https://images.pexels.com/photos/890577/pexels-photo-890577.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Chocolate Chip Cookies",category:"snacks",imageUrl:"https://images.pexels.com/photos/890577/pexels-photo-890577.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Oreos",category:"snacks",imageUrl:"https://images.pexels.com/photos/890577/pexels-photo-890577.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Butter Cookies",category:"snacks",imageUrl:"https://images.pexels.com/photos/890577/pexels-photo-890577.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Oatmeal Cookies",category:"snacks",imageUrl:"https://images.pexels.com/photos/890577/pexels-photo-890577.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Mixed Nuts",category:"snacks",imageUrl:"https://images.pexels.com/photos/1295572/pexels-photo-1295572.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Peanuts",category:"snacks",imageUrl:"https://images.pexels.com/photos/1295572/pexels-photo-1295572.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Almonds",category:"snacks",imageUrl:"https://images.pexels.com/photos/1295572/pexels-photo-1295572.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Cashews",category:"snacks",imageUrl:"https://images.pexels.com/photos/1295572/pexels-photo-1295572.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Sunflower Seeds",category:"snacks",imageUrl:"https://images.pexels.com/photos/1295572/pexels-photo-1295572.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Trail Mix",category:"snacks",imageUrl:"https://images.pexels.com/photos/1295572/pexels-photo-1295572.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Microwave Popcorn",category:"snacks",imageUrl:"https://images.pexels.com/photos/33129/popcorn-movie-party-entertainment.jpg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Caramel Popcorn",category:"snacks",imageUrl:"https://images.pexels.com/photos/33129/popcorn-movie-party-entertainment.jpg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Cheese Popcorn",category:"snacks",imageUrl:"https://images.pexels.com/photos/33129/popcorn-movie-party-entertainment.jpg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Chocolate Bar",category:"snacks",imageUrl:"https://images.pexels.com/photos/65882/chocolate-dark-coffee-confiserie-65882.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Gummy Bears",category:"snacks",imageUrl:"https://images.pexels.com/photos/4016596/pexels-photo-4016596.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Hard Candy",category:"snacks",imageUrl:"https://images.pexels.com/photos/4016596/pexels-photo-4016596.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Licorice",category:"snacks",imageUrl:"https://images.pexels.com/photos/4016596/pexels-photo-4016596.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Mints",category:"snacks",imageUrl:"https://images.pexels.com/photos/4016596/pexels-photo-4016596.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Granola Bars",category:"snacks",imageUrl:"https://images.pexels.com/photos/1295572/pexels-photo-1295572.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Protein Bars",category:"snacks",imageUrl:"https://images.pexels.com/photos/1295572/pexels-photo-1295572.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Cereal Bars",category:"snacks",imageUrl:"https://images.pexels.com/photos/1295572/pexels-photo-1295572.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Fruit Bars",category:"snacks",imageUrl:"https://images.pexels.com/photos/1295572/pexels-photo-1295572.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Raisins",category:"snacks",imageUrl:"https://images.pexels.com/photos/1295572/pexels-photo-1295572.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Dried Mango",category:"snacks",imageUrl:"https://images.pexels.com/photos/918643/pexels-photo-918643.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Dried Apricots",category:"snacks",imageUrl:"https://images.pexels.com/photos/1295572/pexels-photo-1295572.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Fruit Snacks",category:"snacks",imageUrl:"https://images.pexels.com/photos/4016596/pexels-photo-4016596.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Pretzels",category:"snacks",imageUrl:"https://images.pexels.com/photos/40801/pretzel-baked-goods-eat-pastries-40801.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Beef Jerky",category:"snacks",imageUrl:"https://images.pexels.com/photos/3535383/pexels-photo-3535383.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Rice Cakes",category:"snacks",imageUrl:"https://images.pexels.com/photos/890577/pexels-photo-890577.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1},{name:"Cheese Puffs",category:"snacks",imageUrl:"https://images.pexels.com/photos/1583884/pexels-photo-1583884.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&fit=crop",isInCart:!1,isChecked:!1}];var yh=class n{userService=M(Xr);firestore;GROCERIES_COLLECTION="groceries";CATEGORIES_COLLECTION="categories";HISTORY_COLLECTION="shopping_history";unsubGroceries=null;unsubCategories=null;groceriesSignal=he([]);categoriesSignal=he([...wo]);searchQuerySignal=he("");selectedCategorySignal=he("all");sortBySignal=he("name");isLoadingSignal=he(!0);errorSignal=he(null);isSeededSignal=he(!1);hasMigratedThisSession=!1;groceriesSubject=new at([]);categoriesSubject=new at([...wo]);groceries$=this.groceriesSubject.asObservable();categories$=this.categoriesSubject.asObservable();categories=ze(()=>this.categoriesSignal());categoryIds=ze(()=>this.categoriesSignal().map(e=>e.id));isLoading=ze(()=>this.isLoadingSignal());groceries=ze(()=>{let e=this.groceriesSignal(),t=this.searchQuerySignal().toLowerCase(),r=this.selectedCategorySignal(),i=this.sortBySignal();return t&&(e=e.filter(s=>s.name.toLowerCase().includes(t))),r==="cart"?e=e.filter(s=>s.isInCart):r!=="all"&&(e=e.filter(s=>s.category===r)),e=[...e].sort((s,o)=>{switch(i){case"name":return s.name.localeCompare(o.name);case"category":return s.category.localeCompare(o.category);case"date":return new Date(o.createdAt).getTime()-new Date(s.createdAt).getTime();default:return 0}}),e});cartItems=ze(()=>this.groceriesSignal().filter(e=>e.isInCart));checkedItems=ze(()=>this.cartItems().filter(e=>e.isChecked));uncheckedItems=ze(()=>this.cartItems().filter(e=>!e.isChecked));searchQuery=ze(()=>this.searchQuerySignal());selectedCategory=ze(()=>this.selectedCategorySignal());sortBy=ze(()=>this.sortBySignal());error=ze(()=>this.errorSignal());groceriesByCategory=ze(()=>{let e=this.groceries(),t=this.categoriesSignal(),r={};return t.forEach(i=>{r[i.id]=[]}),e.forEach(i=>{r[i.category]?r[i.category].push(i):r.other&&r.other.push(i)}),r});constructor(){let e=bp(uh.firebase);this.firestore=S0(e),vr(()=>{let t=this.userService.currentUser();this.cleanupSubscriptions(),this.hasMigratedThisSession=!1,t&&t.userId?(console.log("\u{1F4E6} Loading groceries for user:",t.userId),this.initializeFirestoreListeners(t.userId)):(console.log("\u{1F512} No user logged in - clearing grocery data"),this.groceriesSignal.set([]),this.groceriesSubject.next([]),this.categoriesSignal.set([...wo]),this.categoriesSubject.next([...wo]),this.isLoadingSignal.set(!1))})}getCurrentUserId(){return this.userService.currentUser()?.userId||""}cleanupSubscriptions(){this.unsubGroceries&&(this.unsubGroceries(),this.unsubGroceries=null),this.unsubCategories&&(this.unsubCategories(),this.unsubCategories=null)}initializeFirestoreListeners(e){if(!e)return;this.isLoadingSignal.set(!0);let t=eg(Xp(this.firestore,this.GROCERIES_COLLECTION),tg("userId","==",e));this.unsubGroceries=ng(t,i=>{let s=i.docs.map(o=>{let a=o.data();return ae(B({id:o.id},a),{createdAt:a.createdAt?.toDate?a.createdAt.toDate():new Date(a.createdAt),updatedAt:a.updatedAt?.toDate?a.updatedAt.toDate():new Date(a.updatedAt)})});this.groceriesSignal.set(s),this.groceriesSubject.next(s),this.isLoadingSignal.set(!1),s.length===0&&!this.isSeededSignal()?this.seedInitialData$(e).subscribe():this.checkAndMigrateData(e,s)},i=>{console.error("Error loading groceries:",i),this.errorSignal.set(i.message),this.isLoadingSignal.set(!1)});let r=eg(Xp(this.firestore,this.CATEGORIES_COLLECTION),tg("userId","in",[e,"system"]));this.unsubCategories=ng(r,i=>{if(i.docs.length>0){let s=i.docs.map(a=>ae(B({id:a.id},a.data()),{createdAt:a.data().createdAt?.toDate?a.data().createdAt.toDate():new Date}));s.sort((a,c)=>a.name.localeCompare(c.name));let o=wo.filter(a=>!s.some(c=>c.id===a.id));if(o.length>0){o.forEach(c=>this.saveCategoryToFirestore$(c).subscribe());let a=[...s,...o];this.categoriesSignal.set(a),this.categoriesSubject.next(a)}else this.categoriesSignal.set(s),this.categoriesSubject.next(s)}else wo.forEach(s=>this.saveCategoryToFirestore$(s).subscribe()),this.categoriesSignal.set([...wo]),this.categoriesSubject.next([...wo])},i=>{console.error("Error loading categories:",i)})}seedInitialData$(e){if(this.isSeededSignal())return le(void 0);this.isSeededSignal.set(!0),console.log("Seeding initial grocery data for user:",e);let t=[...RR,...kR,...NR,...PR,...MR,...OR,...FR,...VR,...LR,...UR,...jR,...BR,...$R,...zR,...HR],r=t.map(i=>this.create$(i));return li(r).pipe(yt(()=>console.log(`Seeded ${t.length} grocery items for user ${e}`)),ge(()=>{}))}saveCategoryToFirestore$(e){let t=Jn(this.firestore,this.CATEGORIES_COLLECTION,e.id);return De(vl(t,ae(B({},e),{createdAt:e.createdAt})))}createCategory$(e){let t=this.getCurrentUserId();if(!t)return Mr(()=>new Error("User must be logged in to create categories"));let r=ae(B({},e),{id:this.generateCategoryId(e.name),userId:t,isDefault:!1,createdAt:new Date});return this.saveCategoryToFirestore$(r).pipe(ge(()=>r))}getCategory(e){return this.categoriesSignal().find(t=>t.id===e)}updateCategory$(e,t){let r=this.getCategory(e);if(!r||r.isDefault)return le(void 0);let i=Jn(this.firestore,this.CATEGORIES_COLLECTION,e);return De(Fd(i,t)).pipe(ge(()=>B(B({},r),t)))}deleteCategory(e){let t=this.getCategory(e);if(!t)return{success:!1,error:"Category not found"};if(t.isDefault)return{success:!1,error:"Cannot delete default categories"};let r=this.groceriesSignal().filter(s=>s.category===e);if(r.length>0)return{success:!1,error:`Cannot delete category "${t.name}" because it has ${r.length} item(s). Please move or delete the items first.`};let i=Jn(this.firestore,this.CATEGORIES_COLLECTION,e);return Vd(i),{success:!0}}getItemCountInCategory(e){return this.groceriesSignal().filter(t=>t.category===e).length}getCategoryLabel(e){return this.getCategory(e)?.name||e}getCategoryIcon(e){return this.getCategory(e)?.icon||"category"}getCategoryColor(e){return this.getCategory(e)?.color||"text-slate-400"}setSearchQuery(e){this.searchQuerySignal.set(e)}setCategory(e){this.selectedCategorySignal.set(e)}setSortBy(e){this.sortBySignal.set(e)}itemExists(e){let t=e.trim().toLowerCase();return this.groceriesSignal().some(r=>r.name.toLowerCase()===t)}getItemByName(e){let t=e.trim().toLowerCase();return this.groceriesSignal().find(r=>r.name.toLowerCase()===t)}create$(e){let t=this.getCurrentUserId();if(!t)return Mr(()=>new Error("User must be logged in to create items"));let r=this.getItemByName(e.name);if(r)return Mr(()=>new Error(`An item named "${r.name}" already exists.`));let i=ae(B({},e),{id:this.generateId(),userId:t,createdAt:new Date,updatedAt:new Date}),s=Jn(this.firestore,this.GROCERIES_COLLECTION,i.id);return De(vl(s,i)).pipe(ge(()=>i))}update$(e,t){let r=this.groceriesSignal().find(s=>s.id===e);if(!r)return le(void 0);if(t.name){let s=t.name.trim().toLowerCase(),o=this.groceriesSignal().find(a=>a.id!==e&&a.name.toLowerCase()===s);if(o)return Mr(()=>new Error(`An item named "${o.name}" already exists.`))}let i=Jn(this.firestore,this.GROCERIES_COLLECTION,e);return De(Fd(i,ae(B({},t),{updatedAt:new Date}))).pipe(ge(()=>ae(B(B({},r),t),{updatedAt:new Date})))}delete$(e){let t=Jn(this.firestore,this.GROCERIES_COLLECTION,e);return De(Vd(t)).pipe(ge(()=>!0))}getById(e){return this.groceriesSignal().find(t=>t.id===e)}addToCart$(e){return this.update$(e,{isInCart:!0}).pipe(ge(()=>{}))}removeFromCart$(e){return this.update$(e,{isInCart:!1,isChecked:!1}).pipe(ge(()=>{}))}toggleChecked$(e){let t=this.getById(e);return t?this.update$(e,{isChecked:!t.isChecked}).pipe(ge(()=>{})):le(void 0)}clearCart$(){let e=this.cartItems();if(e.length===0)return le(void 0);let t=e.map(r=>this.update$(r.id,{isInCart:!1,isChecked:!1}));return li(t).pipe(ge(()=>{}))}findDuplicateIds(){let e=this.groceriesSignal(),t=new Map,r=[],i=[...e].sort((s,o)=>new Date(s.createdAt).getTime()-new Date(o.createdAt).getTime());for(let s of i){let o=s.name.toLowerCase().trim();t.has(o)?r.push(s.id):t.set(o,s)}return r}removeDuplicates$(){let e=this.findDuplicateIds();if(e.length===0)return console.log("\u2705 No duplicate items found."),le(0);console.log(`\u{1F5D1}\uFE0F Removing ${e.length} duplicate item(s)...`);let t=e.map(r=>this.delete$(r));return li(t).pipe(yt(()=>console.log(`\u2705 Removed ${e.length} duplicate items.`)),ge(()=>e.length))}resetToSeedData$(){let e=this.groceriesSignal();if(e.length===0)return this.isSeededSignal.set(!1),le(void 0);let t=e.map(r=>this.delete$(r.id));return li(t).pipe(yt(()=>this.isSeededSignal.set(!1)),ge(()=>{}))}saveToHistory$(){let e=this.getCurrentUserId();if(!e)return le(void 0);let t=this.cartItems();if(t.length===0)return le(void 0);let r=`history_${Date.now()}`,i=Jn(this.firestore,this.HISTORY_COLLECTION,r),s={id:r,userId:e,date:new Date,itemCount:t.length,items:t.map(o=>({id:o.id,name:o.name,category:o.category,checked:o.isChecked})),completed:!0};return De(vl(i,s))}generateId(){return`grocery_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}generateCategoryId(e){return`cat_${e.toLowerCase().replace(/\s+/g,"_")}_${Date.now()}`}checkAndMigrateData(e,t){if(this.hasMigratedThisSession)return;let r="v18";localStorage.getItem(`homeneeds_seed_version_${e}`)!==r&&(console.log(`Migrating data to ${r} for user ${e}...`),this.hasMigratedThisSession=!0,this.migrateMissingSeedData$(t).subscribe(()=>{localStorage.setItem(`homeneeds_seed_version_${e}`,r)}))}migrateMissingSeedData$(e){console.log("Checking for missing seed items...");let t=e??this.groceriesSignal();console.log(`Current items count: ${t.length}`);let r=[...RR,...kR,...NR,...PR,...MR,...OR,...FR,...VR,...LR,...UR,...jR,...BR,...$R,...zR,...HR];console.log(`Total seed data count: ${r.length}`);let i=new Set(t.map(o=>o.name.toLowerCase().trim())),s=r.filter(o=>{let a=o.name.toLowerCase().trim();return!i.has(a)});if(s.length>0){console.log(`Adding ${s.length} missing items...`);let o=s.map(a=>this.create$(a));return li(o).pipe(yt(()=>console.log(`\u2705 Successfully added ${s.length} items`)),ge(()=>{}))}else return console.log("\u2705 All seed items are present."),le(void 0)}ngOnDestroy(){this.cleanupSubscriptions()}static \u0275fac=function(t){return new(t||n)};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})};var Gw=(n,e)=>e.id;function zte(n,e){n&1&&kt(0,"div",47)}function Hte(n,e){if(n&1&&kt(0,"img",39),n&2){let t=$().$implicit;Le("src",t.imageUrl,ir)}}function qte(n,e){if(n&1&&(A(0,"span",41)(1,"span",48),P(2,"alarm"),R(),P(3),Rf(4,"date"),R()),n&2){let t=$().$implicit;V(3),dt(" ",kf(4,1,t.dueDate,"MMM d, h:mm a")," ")}}function Gte(n,e){if(n&1&&(A(0,"div",50),P(1),R()),n&2){let t=e;ut(t.color),Le("title","Assigned to "+t.name),V(),dt(" ",t.initial," ")}}function Wte(n,e){if(n&1&&ue(0,Gte,2,4,"div",49),n&2){let t,r=$(4);de((t=r.getAssigneeById(e))?0:-1,t)}}function Kte(n,e){if(n&1&&(A(0,"span",42),P(1),R()),n&2){let t=$().$implicit;V(),Ne(t.description)}}function Qte(n,e){if(n&1){let t=Be();A(0,"div",31),s_(1,zte,1,0,"div",32),A(2,"span",33),P(3,"drag_indicator"),R(),A(4,"label",34)(5,"input",35),Y("change",function(){let i=ee(t).$implicit,s=$(3);return te(s.toggleComplete(i))}),R(),A(6,"span",36),P(7,"check"),R()(),A(8,"div",37),Y("click",function(){let i=ee(t).$implicit,s=$(3);return te(s.edit(i))}),A(9,"div",38),ue(10,Hte,1,1,"img",39),A(11,"span",40),P(12),R(),ue(13,qte,5,4,"span",41),ue(14,Wte,1,1),R(),ue(15,Kte,2,1,"span",42),R(),A(16,"div",43)(17,"button",44),Y("click",function(){let i=ee(t).$implicit,s=$(3);return te(s.edit(i))}),A(18,"span",45),P(19,"edit"),R()(),A(20,"button",46),Y("click",function(){let i=ee(t).$implicit,s=$(3);return te(s.delete(i.id))}),A(21,"span",45),P(22,"delete"),R()()()()}if(n&2){let t,r=e.$implicit;_n("opacity-50",r.isCompleted),Le("cdkDragData",r),V(5),Le("checked",r.isCompleted),V(5),de(r.imageUrl?10:-1),V(),_n("line-through",r.isCompleted)("text-slate-500",r.isCompleted),V(),dt(" ",r.title," "),V(),de(r.dueDate?13:-1),V(),de((t=r.assigneeId)?14:-1,t),V(),de(r.description?15:-1)}}function Yte(n,e){if(n&1){let t=Be();A(0,"section",24)(1,"div",25)(2,"h3",26),kt(3,"span",27),P(4),R(),A(5,"span",28),P(6),R()(),A(7,"div",29),Y("cdkDropListDropped",function(i){ee(t);let s=$().$implicit,o=$();return te(o.onDrop(i,s.id))}),Mt(8,Qte,23,13,"div",30,Gw),R()()}if(n&2){let t=$().$implicit,r=$();Le("id","section-"+t.id),V(3),ut(t.color),V(),dt(" ",t.label," "),V(),ut(t.color+" "+t.textColor+" bg-opacity-10"),V(),dt(" ",r.groupedTasks()[t.id].length," Items "),V(),Le("cdkDropListData",r.groupedTasks()[t.id]),V(),Ot(r.groupedTasks()[t.id])}}function Jte(n,e){if(n&1&&ue(0,Yte,10,8,"section",24),n&2){let t=e.$implicit,r=$();de(r.groupedTasks()[t.id]&&r.groupedTasks()[t.id].length>0?0:-1)}}function Xte(n,e){n&1&&(A(0,"div",20)(1,"span",51),P(2,"task_alt"),R(),A(3,"h3",52),P(4,"All caught up!"),R(),A(5,"p",53),P(6,"Create a task to get started."),R()())}function Zte(n,e){n&1&&(A(0,"span",79),P(1,"check"),R())}function ene(n,e){if(n&1){let t=Be();A(0,"button",77),Y("click",function(){let i=ee(t).$implicit,s=$(3);return te(s.selectCategory(i.id))}),kt(1,"span",78),P(2),ue(3,Zte,2,0,"span",79),R()}if(n&2){let t=e.$implicit,r=$(3);V(),ut(t.color),V(),dt(" ",t.label," "),V(),de(r.taskCategory===t.id?3:-1)}}function tne(n,e){if(n&1&&(A(0,"div",65),Mt(1,ene,4,4,"button",76,Gw),R()),n&2){let t=$(2);V(),Ot(t.categories)}}function nne(n,e){if(n&1&&(A(0,"option",71),P(1),R()),n&2){let t=e.$implicit;Le("value",t.id),V(),Ne(t.name)}}function rne(n,e){if(n&1){let t=Be();A(0,"div",23)(1,"div",54)(2,"div",55)(3,"h3",56),P(4),R(),A(5,"button",57),Y("click",function(){ee(t);let i=$();return te(i.toggleAddModal(!1))}),A(6,"span",58),P(7,"close"),R()()(),A(8,"div",59)(9,"div")(10,"label",60),P(11,"Task Title"),R(),A(12,"input",61),fn("ngModelChange",function(i){ee(t);let s=$();return vn(s.taskTitle,i)||(s.taskTitle=i),te(i)}),R()(),A(13,"div")(14,"label",60),P(15,"Category"),R(),A(16,"div",62)(17,"button",63),Y("click",function(){ee(t);let i=$();return te(i.toggleCategoryDropdown())}),A(18,"span"),P(19),R(),A(20,"span",64),P(21,"expand_more"),R()(),ue(22,tne,3,0,"div",65),R()(),A(23,"div")(24,"div",66)(25,"label",67),P(26,"Assignee"),R(),A(27,"button",68),Y("click",function(){ee(t);let i=$();return te(i.openManageAssignees())}),P(28,"Manage"),R()(),A(29,"select",69),fn("ngModelChange",function(i){ee(t);let s=$();return vn(s.taskAssigneeId,i)||(s.taskAssigneeId=i),te(i)}),A(30,"option",70),P(31,"Unassigned"),R(),Mt(32,nne,2,2,"option",71,Gw),R()(),A(34,"div")(35,"label",60),P(36,"Due Date"),R(),A(37,"input",72),fn("ngModelChange",function(i){ee(t);let s=$();return vn(s.taskDueDate,i)||(s.taskDueDate=i),te(i)}),R()()(),A(38,"div",73)(39,"button",74),Y("click",function(){ee(t);let i=$();return te(i.toggleAddModal(!1))}),P(40,"Cancel"),R(),A(41,"button",75),Y("click",function(){ee(t);let i=$();return te(i.saveTask())}),P(42,"Save Task"),R()()()()}if(n&2){let t=$();V(4),Ne(t.editingTask?"Edit Task":"New Task"),V(8),hn("ngModel",t.taskTitle),V(7),Ne(t.getSelectedCategoryLabel()),V(3),de(t.showCategoryDropdown?22:-1),V(7),hn("ngModel",t.taskAssigneeId),V(3),Ot(t.assignees()),V(5),hn("ngModel",t.taskDueDate)}}function ine(n,e){if(n&1){let t=Be();A(0,"app-assignee-management",80),Y("close",function(){ee(t);let i=$();return te(i.closeAssigneeModal())}),R()}}var qw=class n{overviewService=M(ws);dialogService=M(Zr);assigneeService=M(mh);groceryService=M(yh);loadingService=M(lr);tasks=this.overviewService.tasks;assignees=this.assigneeService.assignees;categories=AB;assigneeColors=Ug;groupedTasks=ze(()=>{let e=this.tasks(),t={};return this.categories.forEach(r=>t[r.id]=[]),t.other=[],e.forEach(r=>{let i=r.category;t[i]?t[i].push(r):t.other.push(r)}),t});totalPending=ze(()=>this.tasks().filter(e=>!e.isCompleted).length);activeCategoriesCount=ze(()=>{let e=this.groupedTasks();return Object.values(e).filter(t=>t.length>0).length});showAddModal=!1;editingTask=null;taskTitle="";taskCategory="groceries";taskDueDate="";taskAssigneeId="";showCategoryDropdown=!1;showAssigneeModal=!1;constructor(){}toggleAddModal(e){this.showAddModal=e,e||this.resetForm()}resetForm(){this.editingTask=null,this.taskTitle="",this.taskCategory="groceries",this.taskDueDate="",this.taskAssigneeId="",this.showCategoryDropdown=!1}toggleCategoryDropdown(){this.showCategoryDropdown=!this.showCategoryDropdown}selectCategory(e){this.taskCategory=e,this.showCategoryDropdown=!1}getSelectedCategoryLabel(){return this.categories.find(e=>e.id===this.taskCategory)?.label||"Select Category"}saveTask(){if(!this.taskTitle.trim())return;this.loadingService.show("Saving task...");let e={title:this.taskTitle,category:this.taskCategory,assigneeId:this.taskAssigneeId||void 0,isCompleted:!1,dueDate:this.taskDueDate?new Date(this.taskDueDate):null};this.editingTask?this.overviewService.updateTask$(this.editingTask.id,{title:this.taskTitle,category:this.taskCategory,assigneeId:this.taskAssigneeId||void 0,dueDate:this.taskDueDate?new Date(this.taskDueDate):null}).subscribe({next:()=>{this.loadingService.hide(),this.toggleAddModal(!1)},error:()=>this.loadingService.hide()}):this.overviewService.createTask$(e).subscribe({next:()=>{this.loadingService.hide(),this.toggleAddModal(!1)},error:()=>this.loadingService.hide()})}toggleComplete(e){let t=!e.isCompleted;this.overviewService.updateTask$(e.id,{isCompleted:t}).subscribe({next:()=>{if(t&&e.category==="groceries"){let r=this.groceryService.groceries().find(i=>i.name===e.title);r&&r.isInCart&&this.groceryService.update$(r.id,{isInCart:!1,isChecked:!1}).subscribe()}}})}delete(e){this.dialogService.confirm$("Delete this task?","Delete Task").subscribe(t=>{if(t){let r=this.tasks().find(i=>i.id===e);this.loadingService.show("Deleting..."),this.overviewService.deleteTask$(e).subscribe({next:()=>{if(r&&r.category==="groceries"){let i=this.groceryService.groceries().find(s=>s.name===r.title);i&&i.isInCart&&this.groceryService.update$(i.id,{isInCart:!1,isChecked:!1}).subscribe()}this.loadingService.hide()},error:()=>this.loadingService.hide()})}})}edit(e){this.editingTask=e,this.taskTitle=e.title,this.taskCategory=e.category,this.taskAssigneeId=e.assigneeId||"",this.taskDueDate=e.dueDate?new Date(e.dueDate.getTime()-e.dueDate.getTimezoneOffset()*6e4).toISOString().slice(0,16):"",this.showAddModal=!0}openManageAssignees(){this.showAssigneeModal=!0}closeAssigneeModal(){this.showAssigneeModal=!1}getAssigneeById(e){if(e)return this.assignees().find(t=>t.id===e)}onDrop(e,t){if(e.previousIndex===e.currentIndex)return;let r=[...this.groupedTasks()[t]||[]];$w(r,e.previousIndex,e.currentIndex),this.loadingService.show("Reordering..."),this.overviewService.reorderTasks$(r).subscribe({next:()=>this.loadingService.hide(),error:()=>this.loadingService.hide()})}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Gt({type:n,selectors:[["app-overview"]],hostAttrs:[1,"flex-1","h-screen","flex","flex-col","overflow-hidden"],decls:39,vars:5,consts:[["id","overview-page",1,"flex-1","flex","flex-col","h-screen","overflow-y-auto","relative","bg-slate-50","dark:bg-background-dark"],[1,"px-8","pt-8","pb-4","w-full","z-10","flex","flex-col","gap-4","sticky","top-0","bg-slate-50/90","dark:bg-background-dark/90","backdrop-blur-sm"],[1,"flex","flex-col","w-full","group"],[1,"flex","w-full","items-center","rounded-full","h-14","bg-white","dark:bg-surface-dark","shadow-sm","border","border-slate-200","dark:border-border-dark","focus-within:border-primary","focus-within:ring-1","focus-within:ring-primary","transition-all","duration-300","px-6"],[1,"material-symbols-outlined","text-slate-400","dark:text-text-muted","group-focus-within:text-primary","transition-colors"],["id","overview-search-input","placeholder","Search for items to buy, fix, or clean...",1,"w-full","bg-transparent","border-none","focus:ring-0","text-base","font-medium","text-slate-900","dark:text-white","placeholder:text-slate-400","dark:placeholder:text-text-muted-darker","ml-3"],[1,"bg-primary","hover:bg-primary-hover","text-slate-900","p-2","rounded-full","transition-colors","flex","items-center","justify-center",3,"click"],[1,"material-symbols-outlined","text-[20px]","font-bold"],[1,"flex","items-center","gap-3","px-2"],[1,"text-xs","uppercase","font-bold","text-slate-500","dark:text-text-muted","tracking-wider"],["id","filter-chips",1,"flex","gap-2","text-slate-600","dark:text-slate-400","text-sm"],[1,"px-3","py-1","bg-white","dark:bg-surface-dark","rounded-full","border","border-slate-200","dark:border-border-dark","cursor-pointer","hover:border-primary"],[1,"flex-1","overflow-y-auto","px-8","pb-20","scroll-smooth"],[1,"w-full","flex","flex-col","gap-10"],[1,"flex","flex-wrap","justify-between","items-end","gap-4","mt-4","border-b","border-border-dark","pb-6"],[1,"text-4xl","font-black","text-slate-900","dark:text-white","tracking-tight","mb-2"],[1,"text-slate-500","dark:text-text-muted"],[1,"flex","gap-3"],[1,"flex","items-center","gap-2","px-5","py-2.5","rounded-full","bg-primary","text-slate-900","font-bold","text-sm","hover:bg-primary-hover","transition-colors","shadow-lg","shadow-primary/20",3,"click"],[1,"material-symbols-outlined","text-sm"],[1,"text-center","py-20","animate-in","fade-in","zoom-in-50","duration-500"],[1,"absolute","bottom-10","right-10","w-16","h-16","bg-primary","hover:bg-primary-hover","rounded-full","shadow-2xl","shadow-primary/20","text-slate-900","flex","items-center","justify-center","transition-transform","hover:scale-105","active:scale-95","z-40",3,"click"],[1,"material-symbols-outlined",2,"font-size","32px"],[1,"fixed","inset-0","z-50","flex","items-center","justify-center","p-4","bg-black/50","backdrop-blur-sm","animate-in","fade-in","duration-200"],[3,"id"],[1,"flex","items-center","justify-between","mb-5"],[1,"text-2xl","font-bold","text-slate-900","dark:text-white","flex","items-center","gap-3"],[1,"w-2","h-8","rounded-full","block"],[1,"text-xs","font-bold","px-3","py-1","rounded-full","bg-opacity-10"],["cdkDropList","",1,"grid","grid-cols-1","gap-3",3,"cdkDropListDropped","cdkDropListData"],["cdkDrag","",1,"group","flex","items-center","gap-3","p-4","rounded-xl","bg-white","dark:bg-surface-dark","border","border-transparent","dark:border-border-dark","hover:border-primary/30","transition-all","duration-200","shadow-sm","hover:shadow-md","dark:shadow-none","relative","overflow-hidden","active:scale-[0.99]","active:shadow-inner","cursor-grab",3,"cdkDragData","opacity-50"],["cdkDrag","",1,"group","flex","items-center","gap-3","p-4","rounded-xl","bg-white","dark:bg-surface-dark","border","border-transparent","dark:border-border-dark","hover:border-primary/30","transition-all","duration-200","shadow-sm","hover:shadow-md","dark:shadow-none","relative","overflow-hidden","active:scale-[0.99]","active:shadow-inner","cursor-grab",3,"cdkDragData"],["class","w-full h-16 rounded-xl bg-primary/10 border-2 border-dashed border-primary/30",4,"cdkDragPlaceholder"],["cdkDragHandle","",1,"material-symbols-outlined","text-slate-300","dark:text-border-dark","group-hover:text-slate-400","dark:group-hover:text-slate-500","cursor-grab","select-none","transition-colors"],[1,"relative","flex","items-center","p-2","rounded-full","cursor-pointer"],["type","checkbox",1,"peer","h-6","w-6","cursor-pointer","appearance-none","rounded-full","border-2","border-slate-400","dark:border-slate-500","transition-all","checked:border-primary","checked:bg-primary",3,"change","checked"],[1,"material-symbols-outlined","absolute","inset-0","flex","items-center","justify-center","text-white","text-[18px]","opacity-0","peer-checked:opacity-100","pointer-events-none","transition-opacity"],[1,"flex","flex-col","flex-1","min-w-0","cursor-pointer",3,"click"],[1,"flex","items-center","gap-3"],["alt","",1,"size-8","rounded-lg","object-cover","bg-slate-100","dark:bg-black/20","border","border-slate-200","dark:border-border-dark","shrink-0",3,"src"],[1,"text-base","font-bold","text-slate-900","dark:text-white","group-hover:text-primary","transition-colors","truncate"],[1,"hidden","sm:inline-flex","items-center","gap-1","px-2","py-0.5","rounded-md","text-[10px]","font-bold","uppercase","tracking-wider","bg-slate-100","text-slate-500","dark:bg-slate-800","dark:text-slate-400"],[1,"text-sm","text-slate-500","dark:text-text-muted-darker","truncate"],[1,"flex","items-center","gap-1","sm:gap-2","opacity-100","sm:opacity-0","group-hover:opacity-100","transition-opacity","z-20"],["title","Edit",1,"p-2","text-slate-400","hover:text-white","hover:bg-border-dark","rounded-full","transition-colors",3,"click"],[1,"material-symbols-outlined","text-[20px]"],["title","Delete",1,"p-2","text-slate-400","hover:text-rose-400","hover:bg-border-dark","rounded-full","transition-colors",3,"click"],[1,"w-full","h-16","rounded-xl","bg-primary/10","border-2","border-dashed","border-primary/30"],[1,"material-symbols-outlined","text-[12px]"],[1,"size-6","rounded-full","flex","items-center","justify-center","text-[10px]","font-bold","text-white","ring-2","ring-white","dark:ring-surface-dark","ml-1",3,"title","class"],[1,"size-6","rounded-full","flex","items-center","justify-center","text-[10px]","font-bold","text-white","ring-2","ring-white","dark:ring-surface-dark","ml-1",3,"title"],[1,"material-symbols-outlined","text-6xl","text-slate-300","dark:text-slate-600"],[1,"mt-4","text-xl","font-bold","text-slate-500","dark:text-slate-400"],[1,"text-slate-400","dark:text-slate-500"],[1,"bg-white","dark:bg-surface-dark","w-full","max-w-md","rounded-2xl","shadow-xl","overflow-hidden","animate-in","zoom-in-95","duration-200","border","border-slate-200","dark:border-border-dark"],[1,"p-4","border-b","border-slate-100","dark:border-border-dark","flex","justify-between","items-center"],[1,"font-bold","text-lg","text-slate-900","dark:text-white"],[1,"p-1","rounded-full","hover:bg-slate-100","dark:hover:bg-border-dark","transition-colors",3,"click"],[1,"material-symbols-outlined"],[1,"p-6","space-y-4"],[1,"block","text-sm","font-medium","text-slate-700","dark:text-slate-300","mb-1"],["type","text","placeholder","e.g. Buy Milk",1,"w-full","px-4","py-2","rounded-lg","bg-slate-50","dark:bg-black/20","border","border-slate-200","dark:border-border-dark","focus:border-primary","focus:ring-1","focus:ring-primary","outline-none","text-slate-900","dark:text-white",3,"ngModelChange","ngModel"],[1,"relative"],[1,"w-full","px-4","py-2","rounded-lg","bg-slate-50","dark:bg-black/20","border","border-slate-200","dark:border-border-dark","focus:border-primary","focus:ring-1","focus:ring-primary","outline-none","text-slate-900","dark:text-white","text-left","flex","justify-between","items-center",3,"click"],[1,"material-symbols-outlined","text-slate-500"],[1,"absolute","top-full","left-0","right-0","mt-1","bg-white","dark:bg-surface-dark","border","border-slate-200","dark:border-border-dark","rounded-lg","shadow-xl","z-50","overflow-hidden","animate-in","fade-in","zoom-in-95","duration-100","max-h-48","overflow-y-auto"],[1,"flex","justify-between","items-center","mb-1"],[1,"block","text-sm","font-medium","text-slate-700","dark:text-slate-300"],[1,"text-xs","text-primary","font-bold","hover:underline",3,"click"],[1,"w-full","px-4","py-2","rounded-lg","bg-slate-50","dark:bg-black/20","border","border-slate-200","dark:border-border-dark","focus:border-primary","focus:ring-1","focus:ring-primary","outline-none","text-slate-900","dark:text-white",3,"ngModelChange","ngModel"],["value",""],[3,"value"],["type","datetime-local",1,"w-full","px-4","py-2","rounded-lg","bg-slate-50","dark:bg-black/20","border","border-slate-200","dark:border-border-dark","focus:border-primary","focus:ring-1","focus:ring-primary","outline-none","text-slate-900","dark:text-white",3,"ngModelChange","ngModel"],[1,"p-4","bg-slate-50","dark:bg-black/20","flex","justify-end","gap-3"],[1,"px-4","py-2","rounded-lg","text-slate-600","dark:text-slate-400","font-medium","hover:bg-slate-200","dark:hover:bg-border-dark","transition-colors",3,"click"],[1,"px-4","py-2","rounded-lg","bg-primary","text-slate-900","font-bold","hover:bg-primary-hover","transition-colors","shadow-lg","shadow-primary/20",3,"click"],[1,"w-full","px-4","py-3","text-left","text-slate-700","dark:text-white","hover:bg-slate-50","dark:hover:bg-border-dark","transition-colors","flex","items-center","gap-2"],[1,"w-full","px-4","py-3","text-left","text-slate-700","dark:text-white","hover:bg-slate-50","dark:hover:bg-border-dark","transition-colors","flex","items-center","gap-2",3,"click"],[1,"w-3","h-3","rounded-full"],[1,"material-symbols-outlined","ml-auto","text-primary","text-sm"],[3,"close"]],template:function(t,r){t&1&&(A(0,"main",0)(1,"div",1)(2,"label",2)(3,"div",3)(4,"span",4),P(5,"search"),R(),kt(6,"input",5),A(7,"button",6),Y("click",function(){return r.toggleAddModal(!0)}),A(8,"span",7),P(9,"add"),R()()()(),A(10,"div",8)(11,"span",9),P(12,"Filter by Due Date:"),R(),A(13,"div",10)(14,"span",11),P(15,"All"),R(),A(16,"span",11),P(17,"Today"),R()()()(),A(18,"div",12)(19,"div",13)(20,"div",14)(21,"div")(22,"h2",15),P(23,"My Lists"),R(),A(24,"p",16),P(25),R()(),A(26,"div",17)(27,"button",18),Y("click",function(){return r.toggleAddModal(!0)}),A(28,"span",19),P(29,"add_task"),R(),P(30," New Task "),R()()(),Mt(31,Jte,1,1,null,null,Gw),ue(33,Xte,7,0,"div",20),R()(),A(34,"button",21),Y("click",function(){return r.toggleAddModal(!0)}),A(35,"span",22),P(36,"add"),R()(),ue(37,rne,43,6,"div",23),ue(38,ine,1,0,"app-assignee-management"),R()),t&2&&(V(25),u_("You have ",r.totalPending()," pending items across ",r.activeCategoriesCount()," categories."),V(6),Ot(r.categories),V(2),de(r.activeCategoriesCount()===0&&(!r.groupedTasks().other||r.groupedTasks().other.length===0)?33:-1),V(4),de(r.showAddModal?37:-1),V(),de(r.showAssigneeModal?38:-1))},dependencies:[cr,Wa,fh,ph,vs,Ga,qa,vo,Hw,xB,SB,TB,bB,DB,Uf],styles:[".cdk-drag-preview[_ngcontent-%COMP%]{box-sizing:border-box;border-radius:.75rem;box-shadow:0 10px 40px #0000004d,0 0 0 2px #9fe87080;background:var(--surface-dark, #1a1d21);opacity:.95;transform:scale(1.02)}.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:.3;background:#9fe8701a;border:2px dashed rgba(159,232,112,.3);border-radius:.75rem}.cdk-drag-animating[_ngcontent-%COMP%], .cdk-drop-list-dragging[_ngcontent-%COMP%]   .cdk-drag[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(.25,.8,.25,1)}[cdkDragHandle][_ngcontent-%COMP%]{cursor:grab}[cdkDragHandle][_ngcontent-%COMP%]:active, .cdk-drag[_ngcontent-%COMP%]:active{cursor:grabbing}"]})};var _h=class n{MAX_WIDTH=400;MAX_HEIGHT=400;QUALITY=.7;async compressImage(e){return new Promise((t,r)=>{let i=new FileReader;i.onload=s=>{let o=new Image;o.onload=()=>{try{let a=document.createElement("canvas"),{width:c,height:l}=o;c>l?c>this.MAX_WIDTH&&(l=Math.round(l*this.MAX_WIDTH/c),c=this.MAX_WIDTH):l>this.MAX_HEIGHT&&(c=Math.round(c*this.MAX_HEIGHT/l),l=this.MAX_HEIGHT),a.width=c,a.height=l;let h=a.getContext("2d");if(!h){r(new Error("Could not get canvas context"));return}h.drawImage(o,0,0,c,l);let p=a.toDataURL("image/jpeg",this.QUALITY);t(p)}catch(a){r(a)}},o.onerror=()=>{r(new Error("Failed to load image"))},o.src=s.target?.result},i.onerror=()=>{r(new Error("Failed to read file"))},i.readAsDataURL(e)})}isValidImageFile(e){return["image/jpeg","image/png","image/gif","image/webp"].includes(e.type)}formatFileSize(e){return e<1024?e+" B":e<1024*1024?(e/1024).toFixed(1)+" KB":(e/(1024*1024)).toFixed(1)+" MB"}static \u0275fac=function(t){return new(t||n)};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})};var Ww=(n,e)=>e.id;function sne(n,e){if(n&1&&(A(0,"div",13)(1,"div",36)(2,"div",37)(3,"span",38),P(4,"error"),R()(),A(5,"div",39)(6,"h3",40),P(7,"Connection Error"),R(),A(8,"div",41)(9,"p"),P(10),R(),A(11,"p",42),P(12,"Please check your Firestore Security Rules or Auth configuration."),R()()()()()),n&2){let t=$();V(10),Ne(t.error())}}function one(n,e){if(n&1){let t=Be();A(0,"div",44)(1,"button",45),Y("click",function(i){ee(t);let s=$().$implicit;return $().startEditCategory(s),te(i.stopPropagation())}),A(2,"span",46),P(3,"edit"),R()(),A(4,"button",47),Y("click",function(i){ee(t);let s=$().$implicit;return $().deleteCategory(s.id),te(i.stopPropagation())}),A(5,"span",46),P(6,"close"),R()()()}}function ane(n,e){if(n&1){let t=Be();A(0,"div",27)(1,"button",26),Y("click",function(){let i=ee(t).$implicit,s=$();return te(s.onCategoryChange(i.id))}),A(2,"span",43),P(3),R(),A(4,"p"),P(5),R(),ue(6,one,7,0,"div",44),R()()}if(n&2){let t=e.$implicit,r=$();V(),ut(r.selectedCategory()===t.id?"flex h-9 shrink-0 items-center justify-center gap-x-2 rounded-lg bg-slate-900 dark:bg-white px-4 pr-2 hover:opacity-90 transition-opacity":"flex h-9 shrink-0 items-center justify-center gap-x-2 rounded-lg bg-white dark:bg-surface-dark border border-slate-200 dark:border-border-dark px-4 pr-2 hover:bg-slate-50 dark:hover:bg-border-dark transition-colors"),V(),ut(t.color),V(),Ne(t.icon),V(),ut(r.selectedCategory()===t.id?"text-white dark:text-slate-900 text-sm font-bold":"text-slate-600 dark:text-slate-300 text-sm font-medium"),V(),dt(" ",t.name," "),V(),de(t.isDefault?-1:6)}}function cne(n,e){if(n&1){let t=Be();A(0,"img",61),Y("error",function(i){ee(t);let s=$(4);return te(s.handleImageError(i))}),R()}if(n&2){let t=$().$implicit;Le("alt",t.name)("src",t.imageUrl,ir)}}function lne(n,e){n&1&&(A(0,"div",56)(1,"span",62),P(2,"grocery"),R()())}function une(n,e){if(n&1){let t=Be();A(0,"span",63),P(1,"In Cart"),R(),A(2,"button",64),Y("click",function(){ee(t);let i=$().$implicit,s=$(3);return te(s.removeFromCart(i.id))}),A(3,"span",29),P(4,"remove_shopping_cart"),R()()}}function dne(n,e){if(n&1){let t=Be();A(0,"button",65),Y("click",function(){ee(t);let i=$().$implicit,s=$(3);return te(s.addToCart(i.id))}),A(1,"span",4),P(2,"add_shopping_cart"),R()()}}function hne(n,e){if(n&1){let t=Be();A(0,"div",53)(1,"div",2)(2,"div",54),ue(3,cne,1,2,"img",55)(4,lne,3,0,"div",56),R(),A(5,"div")(6,"h4",57),P(7),R()()(),A(8,"div",58),ue(9,une,5,0)(10,dne,3,0,"button",59),A(11,"button",60),Y("click",function(){let i=ee(t).$implicit,s=$(3);return te(s.startEdit(i))}),A(12,"span",29),P(13,"edit"),R()()()()}if(n&2){let t=e.$implicit;V(3),de(t.imageUrl?3:4),V(4),Ne(t.name),V(2),de(t.isInCart?9:10)}}function fne(n,e){if(n&1&&(A(0,"section",48)(1,"div",49)(2,"h3",50)(3,"span",17),P(4),R(),P(5),R(),A(6,"span",51),P(7),R()(),A(8,"div",52),Mt(9,hne,14,3,"div",53,Ww),R()()),n&2){let t=$().$implicit,r=$();Le("id","section-"+t.id),V(3),ut(t.color),V(),Ne(t.icon),V(),dt(" ",t.name," "),V(2),dt("",r.getItemCount(t.id)," items"),V(2),Ot(r.groceriesByCategory()[t.id])}}function pne(n,e){if(n&1&&ue(0,fne,11,6,"section",48),n&2){let t=e.$implicit,r=$();de(r.groceriesByCategory()[t.id]&&r.groceriesByCategory()[t.id].length>0?0:-1)}}function gne(n,e){if(n&1){let t=Be();A(0,"button",71),Y("click",function(){ee(t);let i=$(2);return te(i.onCategoryChange("all"))}),P(1," Browse all items "),R()}}function mne(n,e){if(n&1&&(A(0,"div",31)(1,"div",66)(2,"span",67),P(3,"search_off"),R()(),A(4,"h3",68),P(5,"No items found"),R(),A(6,"p",69),P(7," We couldn't find any items matching your current filters. "),R(),ue(8,gne,2,0,"button",70),R()),n&2){let t=$();V(8),de(t.selectedCategory()!=="all"?8:-1)}}function yne(n,e){if(n&1&&(A(0,"span",34),P(1),R()),n&2){let t=$();V(),Ne(t.getTotalCartItems())}}function _ne(n,e){n&1&&(A(0,"div",79)(1,"span",94),P(2,"progress_activity"),R(),A(3,"span",95),P(4,"Compressing..."),R()())}function vne(n,e){if(n&1){let t=Be();A(0,"img",96),Y("error",function(i){ee(t);let s=$(2);return te(s.handleImageError(i))}),R()}if(n&2){let t=$(2);Le("src",t.editItemImageUrl,ir)}}function wne(n,e){n&1&&(A(0,"span",81),P(1,"image"),R())}function Ine(n,e){if(n&1){let t=Be();A(0,"button",97),Y("click",function(){ee(t);let i=$(2);return te(i.removeImage())}),A(1,"span",46),P(2,"close"),R()()}}function bne(n,e){if(n&1&&(A(0,"option",90),P(1),R()),n&2){let t=e.$implicit;Le("value",t.id),V(),Ne(t.name)}}function Cne(n,e){if(n&1){let t=Be();A(0,"div",72),Y("click",function(){ee(t);let i=$();return te(i.cancelEdit())}),A(1,"div",73),Y("click",function(i){return ee(t),te(i.stopPropagation())}),A(2,"h3",74),P(3),R(),A(4,"div",75)(5,"div",76)(6,"div",77)(7,"div",78),ue(8,_ne,5,0,"div",79)(9,vne,1,1,"img",80)(10,wne,2,0,"span",81),R(),ue(11,Ine,3,0,"button",82),R(),A(12,"label",83)(13,"input",84),Y("change",function(i){ee(t);let s=$();return te(s.onImageFileSelected(i))}),R(),A(14,"span",85)(15,"span",29),P(16,"upload"),R(),P(17),R()(),A(18,"p",86),P(19,"Images are compressed automatically"),R()(),A(20,"div")(21,"label",87),P(22,"Item Name"),R(),A(23,"input",88),fn("ngModelChange",function(i){ee(t);let s=$();return vn(s.editItemName,i)||(s.editItemName=i),te(i)}),R()(),A(24,"div")(25,"label",87),P(26,"Category"),R(),A(27,"select",89),fn("ngModelChange",function(i){ee(t);let s=$();return vn(s.editItemCategory,i)||(s.editItemCategory=i),te(i)}),Mt(28,bne,2,2,"option",90,Ww),R()()(),A(30,"div",91)(31,"button",92),Y("click",function(){ee(t);let i=$();return te(i.cancelEdit())}),P(32,"Cancel"),R(),A(33,"button",93),Y("click",function(){ee(t);let i=$();return te(i.saveEdit())}),P(34,"Save"),R()()()()}if(n&2){let t=$();V(3),Ne(t.editingItem?"Edit Item":"Add Item"),V(5),de(t.isUploadingImage?8:t.editItemImageUrl?9:10),V(3),de(t.editItemImageUrl&&!t.isUploadingImage?11:-1),V(2),Le("disabled",t.isUploadingImage),V(4),dt(" ",t.editItemImageUrl?"Change Image":"Upload Image"," "),V(6),hn("ngModel",t.editItemName),V(4),hn("ngModel",t.editItemCategory),V(),Ot(t.categories()),V(5),Le("disabled",t.isUploadingImage)}}function Ene(n,e){if(n&1){let t=Be();A(0,"button",26),Y("click",function(){let i=ee(t).$implicit,s=$(2);return te(s.editCategoryIcon=i)}),A(1,"span",17),P(2),R()()}if(n&2){let t=e.$implicit,r=$(2);ut(r.editCategoryIcon===t?"size-10 rounded-lg bg-primary text-white flex items-center justify-center":"size-10 rounded-lg bg-white dark:bg-surface-dark border border-slate-200 dark:border-border-dark flex items-center justify-center hover:border-primary transition-colors"),V(2),Ne(t)}}function Tne(n,e){if(n&1){let t=Be();A(0,"button",26),Y("click",function(){let i=ee(t).$implicit,s=$(2);return te(s.editCategoryColor=i)}),A(1,"span",17),P(2,"circle"),R()()}if(n&2){let t=e.$implicit,r=$(2);ut(r.editCategoryColor===t?"size-10 rounded-lg bg-white dark:bg-surface-dark border-2 border-primary flex items-center justify-center":"size-10 rounded-lg bg-white dark:bg-surface-dark border border-slate-200 dark:border-border-dark flex items-center justify-center hover:border-primary transition-colors"),V(),ut(t)}}function Sne(n,e){if(n&1){let t=Be();A(0,"div",72),Y("click",function(){ee(t);let i=$();return te(i.closeCategoryModal())}),A(1,"div",73),Y("click",function(i){return ee(t),te(i.stopPropagation())}),A(2,"h3",74),P(3),R(),A(4,"div",75)(5,"div",98)(6,"div",99)(7,"span",100),P(8),R(),A(9,"span",101),P(10),R()()(),A(11,"div")(12,"label",87),P(13,"Category Name"),R(),A(14,"input",102),fn("ngModelChange",function(i){ee(t);let s=$();return vn(s.editCategoryName,i)||(s.editCategoryName=i),te(i)}),R()(),A(15,"div")(16,"label",103),P(17,"Icon"),R(),A(18,"div",104),Mt(19,Ene,3,3,"button",105,Vu),R()(),A(21,"div")(22,"label",103),P(23,"Color"),R(),A(24,"div",106),Mt(25,Tne,3,4,"button",105,Vu),R()()(),A(27,"div",91)(28,"button",92),Y("click",function(){ee(t);let i=$();return te(i.closeCategoryModal())}),P(29,"Cancel"),R(),A(30,"button",107),Y("click",function(){ee(t);let i=$();return te(i.saveCategory())}),P(31,"Save"),R()()()()}if(n&2){let t=$();V(3),Ne(t.editingCategory?"Edit Category":"Add Category"),V(4),ut(t.editCategoryColor),V(),Ne(t.editCategoryIcon),V(2),Ne(t.editCategoryName||"Category Name"),V(4),hn("ngModel",t.editCategoryName),V(5),Ot(t.availableIcons),V(6),Ot(t.availableColors)}}var Kw=class n{groceryService=M(yh);imageService=M(_h);dialogService=M(Zr);overviewService=M(ws);loadingService=M(lr);groceries=this.groceryService.groceries;groceriesByCategory=this.groceryService.groceriesByCategory;cartItems=this.groceryService.cartItems;checkedItems=this.groceryService.checkedItems;uncheckedItems=this.groceryService.uncheckedItems;searchQuery=this.groceryService.searchQuery;selectedCategory=this.groceryService.selectedCategory;sortBy=this.groceryService.sortBy;categories=this.groceryService.categories;categoryIds=this.groceryService.categoryIds;error=this.groceryService.error;isLoading=this.groceryService.isLoading;availableIcons=RB;availableColors=kB;newItemName="";showAddModal=!1;isAddingFromSidebar=!1;editingItem=null;editItemName="";editItemCategory="other";editItemImageUrl="";isUploadingImage=!1;showMobileCart=!1;toggleMobileCart(){this.showMobileCart=!this.showMobileCart}showCategoryModal=!1;editingCategory=null;editCategoryName="";editCategoryIcon="category";editCategoryColor="text-slate-400";sortOptions=[{value:"name",label:"Name"},{value:"category",label:"Category"},{value:"date",label:"Date Added"}];showSortDropdown=!1;openAddCategoryModal(){this.editingCategory=null,this.editCategoryName="",this.editCategoryIcon="category",this.editCategoryColor="text-slate-400",this.showCategoryModal=!0}startEditCategory(e){e.isDefault||(this.editingCategory=e,this.editCategoryName=e.name,this.editCategoryIcon=e.icon,this.editCategoryColor=e.color,this.showCategoryModal=!0)}saveCategory(){this.editCategoryName.trim()&&(this.loadingService.show("Saving category..."),this.editingCategory?this.groceryService.updateCategory$(this.editingCategory.id,{name:this.editCategoryName.trim(),icon:this.editCategoryIcon,color:this.editCategoryColor}).subscribe({next:()=>{this.loadingService.hide(),this.closeCategoryModal()},error:()=>this.loadingService.hide()}):this.groceryService.createCategory$({name:this.editCategoryName.trim(),icon:this.editCategoryIcon,color:this.editCategoryColor}).subscribe({next:()=>{this.loadingService.hide(),this.closeCategoryModal()},error:()=>this.loadingService.hide()}))}deleteCategory(e){let t=this.groceryService.getCategory(e);if(!t||t.isDefault)return;let r=this.groceryService.getItemCountInCategory(e);if(r>0){this.dialogService.alert$(`Cannot delete category "${t.name}" because it has ${r} item(s). Please move or delete the items first.`).subscribe();return}this.dialogService.confirm$(`Delete category "${t.name}"?`,"Delete Category").subscribe(i=>{if(i){let s=this.groceryService.deleteCategory(e);!s.success&&s.error&&this.dialogService.alert$(s.error).subscribe()}})}closeCategoryModal(){this.editingCategory=null,this.editCategoryName="",this.editCategoryIcon="category",this.editCategoryColor="text-slate-400",this.showCategoryModal=!1}onImageFileSelected(e){let t=e.target,r=t.files?.[0];if(r){if(!this.imageService.isValidImageFile(r)){this.dialogService.alert$("Please select a valid image file (JPEG, PNG, GIF, or WebP)").subscribe();return}this.isUploadingImage=!0,this.loadingService.show("Processing image..."),this.imageService.compressImage(r).then(i=>{this.editItemImageUrl=i}).catch(i=>{console.error("Error compressing image:",i),this.dialogService.alert$("Failed to process image. Please try again.").subscribe()}).finally(()=>{this.isUploadingImage=!1,this.loadingService.hide(),t.value=""})}}removeImage(){this.editItemImageUrl=""}onSearch(e){let t=e.target;this.groceryService.setSearchQuery(t.value)}onCategoryChange(e){this.groceryService.setCategory(e)}onSortChange(e){this.groceryService.setSortBy(e),this.showSortDropdown=!1}toggleSortDropdown(){this.showSortDropdown=!this.showSortDropdown}addItem(){this.newItemName.trim()&&this.groceryService.create$({name:this.newItemName.trim(),category:"other",isInCart:!1,isChecked:!1}).subscribe({next:()=>{this.newItemName=""},error:e=>{this.dialogService.alert$(e.message).subscribe()}})}addItemWithCategory(e,t){e.trim()&&this.groceryService.create$({name:e.trim(),category:t,isInCart:!1,isChecked:!1}).subscribe({error:r=>{this.dialogService.alert$(r.message).subscribe()}})}deleteItem(e){this.groceryService.delete$(e).subscribe()}startEdit(e){this.editingItem=e,this.editItemName=e.name,this.editItemCategory=e.category,this.editItemImageUrl=e.imageUrl||"",this.showAddModal=!0}openAddModal(e=!1){this.isAddingFromSidebar=e,this.editingItem=null,this.editItemName="",this.editItemCategory="other",this.editItemImageUrl="",this.showAddModal=!0}saveEdit(){this.editItemName.trim()&&(this.loadingService.show("Saving..."),this.editingItem?this.groceryService.update$(this.editingItem.id,{name:this.editItemName.trim(),category:this.editItemCategory,imageUrl:this.editItemImageUrl.trim()||void 0}).subscribe({next:()=>{this.loadingService.hide(),this.cancelEdit()},error:e=>{this.loadingService.hide(),this.dialogService.alert$(e.message).subscribe()}}):this.groceryService.create$({name:this.editItemName.trim(),category:this.editItemCategory,imageUrl:this.editItemImageUrl.trim()||void 0,isInCart:this.isAddingFromSidebar,isChecked:!1}).subscribe({next:()=>{this.isAddingFromSidebar&&this.createOverviewTask(this.editItemName.trim(),this.editItemImageUrl.trim()||void 0),this.loadingService.hide(),this.cancelEdit()},error:e=>{this.loadingService.hide(),this.dialogService.alert$(e.message).subscribe()}}))}cancelEdit(){this.editingItem=null,this.editItemName="",this.editItemCategory="other",this.editItemImageUrl="",this.showAddModal=!1}addToCart(e){this.groceryService.addToCart$(e).subscribe(()=>{let t=this.groceries().find(r=>r.id===e);t&&this.createOverviewTask(t.name,t.imageUrl)})}removeFromCart(e){let t=this.groceries().find(r=>r.id===e);this.groceryService.removeFromCart$(e).subscribe(()=>{t&&this.removeOverviewTask(t.name)})}toggleChecked(e){this.groceryService.toggleChecked$(e).subscribe()}clearCart(){let e=this.cartItems();this.loadingService.show("Clearing cart..."),this.groceryService.clearCart$().subscribe({next:()=>{for(let t of e)this.removeOverviewTask(t.name);this.loadingService.hide()},error:()=>this.loadingService.hide()})}checkout(){this.cartItems().length!==0&&this.dialogService.confirm$("Complete shopping trip and save to history?","Checkout").subscribe(e=>{e&&(this.loadingService.show("Saving to history..."),this.groceryService.saveToHistory$().subscribe({next:()=>{this.groceryService.clearCart$().subscribe({next:()=>this.loadingService.hide(),error:()=>this.loadingService.hide()})},error:t=>{console.error("Checkout failed",t),this.loadingService.hide(),this.dialogService.alert$("Failed to save history. Please check your connection.").subscribe()}}))})}getCategoryLabel(e){return this.groceryService.getCategoryLabel(e)}getCategoryIcon(e){return this.groceryService.getCategoryIcon(e)}getCategoryColor(e){return this.groceryService.getCategoryColor(e)}getItemCount(e){return this.groceriesByCategory()[e]?.length||0}getTotalCartItems(){return this.cartItems().length}getProgress(){let e=this.cartItems().length;return e===0?0:this.checkedItems().length/e*100}isDefaultCategory(e){return this.groceryService.getCategory(e)?.isDefault??!1}handleImageError(e){let t=e.target;t.src="https://placehold.co/200x200/cccccc/ffffff?text=No+Image"}resetData(){this.dialogService.confirm$("This will reset all grocery data to the default seed data. Continue?","Reset Data").subscribe(e=>{e&&(this.loadingService.show("Resetting data..."),this.groceryService.resetToSeedData$().subscribe({next:()=>this.loadingService.hide(),error:()=>this.loadingService.hide()}))})}removeDuplicates(){let e=this.groceryService.findDuplicateIds().length;if(e===0){this.dialogService.alert$("No duplicate items found.").subscribe();return}this.dialogService.confirm$(`Found ${e} duplicate item(s). Remove them?`,"Remove Duplicates").subscribe(t=>{t&&(this.loadingService.show("Removing duplicates..."),this.groceryService.removeDuplicates$().subscribe({next:r=>{this.loadingService.hide(),this.dialogService.alert$(`Removed ${r} duplicate item(s).`).subscribe()},error:r=>{this.loadingService.hide(),this.dialogService.alert$(r.message).subscribe()}}))})}createOverviewTask(e,t){let r=new Date;r.setDate(r.getDate()+3),this.overviewService.createTask$({title:e,category:"groceries",isCompleted:!1,dueDate:r,imageUrl:t}).subscribe()}removeOverviewTask(e){let r=this.overviewService.tasks().find(i=>i.title===e&&i.category==="groceries");r&&this.overviewService.deleteTask$(r.id).subscribe()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Gt({type:n,selectors:[["app-groceries"]],hostAttrs:[1,"flex-1","h-screen","flex","flex-col","overflow-hidden"],decls:58,vars:11,consts:[["id","groceries-page",1,"flex","flex-col","h-screen","w-full","overflow-hidden"],["id","groceries-header",1,"flex","items-center","justify-between","whitespace-nowrap","border-b","border-solid","border-[#e5e7eb]","dark:border-border-dark","bg-white","dark:bg-background-dark","px-6","py-3","shrink-0","z-20"],[1,"flex","items-center","gap-4"],[1,"size-8","bg-primary","rounded-lg","flex","items-center","justify-center","text-white"],[1,"material-symbols-outlined","text-[20px]"],[1,"text-slate-900","dark:text-white","text-xl","font-bold","leading-tight","tracking-[-0.015em]"],[1,"flex","flex-1","justify-end","gap-6","items-center"],[1,"flex","gap-2"],["id","btn-remove-duplicates","title","Remove duplicate items",1,"flex","size-10","cursor-pointer","items-center","justify-center","overflow-hidden","rounded-lg","bg-slate-100","dark:bg-border-dark","text-slate-900","dark:text-white","hover:bg-amber-500","hover:text-white","transition-colors",3,"click"],["id","btn-reset","title","Reset to seed data",1,"flex","size-10","cursor-pointer","items-center","justify-center","overflow-hidden","rounded-lg","bg-slate-100","dark:bg-border-dark","text-slate-900","dark:text-white","hover:bg-red-500","hover:text-white","transition-colors",3,"click"],[1,"flex","flex-1","min-h-0"],["id","groceries-main-content",1,"flex-1","min-w-0","overflow-y-auto","bg-background-light","dark:bg-background-dark","relative"],[1,"w-full","mx-auto","px-6","py-8","flex","flex-col","gap-6"],[1,"bg-red-50","dark:bg-red-900/20","border-l-4","border-red-500","p-4","rounded-r-lg"],[1,"flex","flex-col","md:flex-row","gap-4"],[1,"flex-1","relative","group"],[1,"absolute","left-4","top-1/2","-translate-y-1/2","text-slate-400"],[1,"material-symbols-outlined"],["id","groceries-search-input","placeholder","Search for items (e.g. Avocado, Milk)...","type","text",1,"w-full","h-12","pl-12","pr-4","bg-white","dark:bg-surface-dark","border","border-slate-200","dark:border-border-dark","rounded-xl","text-slate-900","dark:text-white","placeholder:text-slate-400","focus:outline-none","focus:ring-2","focus:ring-primary","focus:border-transparent","transition-all","shadow-sm",3,"input","value"],[1,"md:w-[350px]","relative","flex","gap-2"],[1,"flex-1","relative"],["id","groceries-quick-add-input","placeholder","Quick add item...","type","text",1,"w-full","h-12","pl-4","pr-12","bg-white","dark:bg-surface-dark","border","border-slate-200","dark:border-border-dark","rounded-xl","text-slate-900","dark:text-white","placeholder:text-slate-400","focus:outline-none","focus:ring-2","focus:ring-primary","focus:border-transparent","transition-all","shadow-sm",3,"ngModelChange","keyup.enter","ngModel"],["id","btn-quick-add",1,"absolute","right-2","top-2","size-8","bg-primary/10","hover:bg-primary/20","text-primary","rounded-lg","flex","items-center","justify-center","transition-colors",3,"click"],["id","btn-add-custom",1,"h-12","px-4","bg-primary","text-white","rounded-xl","flex","items-center","justify-center","gap-2","hover:bg-blue-600","transition-colors","shadow-lg","shadow-blue-500/20","whitespace-nowrap",3,"click"],[1,"hidden","sm:inline","font-semibold","text-sm"],["id","groceries-filter-chips",1,"flex","gap-3","overflow-x-auto","pb-2","scrollbar-hide","items-center"],[3,"click"],[1,"relative","group","shrink-0"],[1,"flex","h-9","shrink-0","items-center","justify-center","gap-x-2","rounded-lg","border-2","border-dashed","border-slate-300","dark:border-slate-600","px-4","hover:border-primary","hover:text-primary","transition-colors","text-slate-400",3,"click"],[1,"material-symbols-outlined","text-[18px]"],[1,"text-sm","font-medium"],[1,"flex","flex-col","items-center","justify-center","py-20","text-center","animate-in","fade-in","duration-300"],[1,"h-12"],["id","btn-mobile-cart",1,"xl:hidden","fixed","bottom-6","right-6","size-14","bg-primary","text-white","rounded-full","shadow-xl","shadow-blue-500/40","flex","items-center","justify-center","z-50",3,"click"],[1,"absolute","top-0","right-0","size-5","bg-red-500","rounded-full","border-2","border-background-light","dark:border-background-dark","text-[10px]","font-bold","flex","items-center","justify-center"],[1,"fixed","inset-0","bg-black/50","flex","items-center","justify-center","z-50"],[1,"flex"],[1,"flex-shrink-0"],[1,"material-symbols-outlined","text-red-500"],[1,"ml-3"],[1,"text-sm","font-medium","text-red-800","dark:text-red-200"],[1,"mt-2","text-sm","text-red-700","dark:text-red-300"],[1,"mt-1","font-semibold"],[1,"material-symbols-outlined","text-[16px]"],[1,"flex","items-center","gap-1","ml-1"],[1,"size-5","flex","items-center","justify-center","rounded","hover:bg-black/10","dark:hover:bg-white/10",3,"click"],[1,"material-symbols-outlined","text-[14px]"],[1,"size-5","flex","items-center","justify-center","rounded","hover:bg-red-500/20","text-red-500",3,"click"],[3,"id"],[1,"flex","items-center","justify-between","mb-4"],[1,"text-lg","font-bold","text-slate-900","dark:text-white","flex","items-center","gap-2"],[1,"text-xs","font-medium","text-slate-500","bg-slate-100","dark:bg-border-dark","px-2","py-1","rounded"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],[1,"group","bg-white","dark:bg-surface-dark","p-4","rounded-xl","border","border-slate-200","dark:border-border-dark","hover:border-primary/50","dark:hover:border-primary/50","transition-colors","shadow-sm","flex","items-center","justify-between"],[1,"size-12","rounded-lg","bg-slate-50","dark:bg-black/20","overflow-hidden","flex-shrink-0"],[1,"w-full","h-full","object-cover",3,"alt","src"],[1,"w-full","h-full","flex","items-center","justify-center"],[1,"font-semibold","text-slate-900","dark:text-white"],[1,"flex","items-center","gap-2"],["title","Add to cart",1,"size-9","bg-primary","text-white","rounded-lg","flex","items-center","justify-center","hover:bg-blue-600","transition-colors","shadow-lg","shadow-blue-500/20"],["title","Edit",1,"p-2","text-slate-400","hover:text-primary","rounded-full","hover:bg-slate-100","dark:hover:bg-border-dark","transition-colors",3,"click"],[1,"w-full","h-full","object-cover",3,"error","alt","src"],[1,"material-symbols-outlined","text-slate-400"],[1,"text-xs","text-green-500","font-medium"],["title","Remove from cart",1,"p-2","text-slate-400","hover:text-red-500","rounded-full","hover:bg-slate-100","dark:hover:bg-border-dark","transition-colors",3,"click"],["title","Add to cart",1,"size-9","bg-primary","text-white","rounded-lg","flex","items-center","justify-center","hover:bg-blue-600","transition-colors","shadow-lg","shadow-blue-500/20",3,"click"],[1,"size-24","rounded-full","bg-slate-100","dark:bg-black/20","flex","items-center","justify-center","mb-4"],[1,"material-symbols-outlined","text-4xl","text-slate-300"],[1,"text-lg","font-bold","text-slate-900","dark:text-white"],[1,"text-slate-500","dark:text-slate-400","mt-2","max-w-xs","mx-auto"],[1,"mt-6","text-primary","font-medium","hover:underline"],[1,"mt-6","text-primary","font-medium","hover:underline",3,"click"],[1,"fixed","inset-0","bg-black/50","flex","items-center","justify-center","z-50",3,"click"],[1,"bg-white","dark:bg-surface-dark","rounded-2xl","p-6","w-full","max-w-md","shadow-2xl",3,"click"],[1,"text-lg","font-bold","text-slate-900","dark:text-white","mb-4"],[1,"space-y-4"],[1,"flex","flex-col","items-center","gap-3"],[1,"relative"],[1,"size-24","rounded-xl","bg-slate-100","dark:bg-black/20","overflow-hidden","flex","items-center","justify-center"],[1,"flex","flex-col","items-center"],["alt","Preview",1,"w-full","h-full","object-cover",3,"src"],[1,"material-symbols-outlined","text-4xl","text-slate-400"],[1,"absolute","-top-2","-right-2","size-6","bg-red-500","text-white","rounded-full","flex","items-center","justify-center","hover:bg-red-600","transition-colors","shadow-lg"],[1,"cursor-pointer"],["type","file","accept","image/jpeg,image/png,image/gif,image/webp",1,"hidden",3,"change","disabled"],[1,"flex","items-center","gap-2","px-4","py-2","bg-slate-100","dark:bg-border-dark","text-slate-600","dark:text-slate-300","rounded-lg","hover:bg-slate-200","dark:hover:bg-slate-600","transition-colors","text-sm","font-medium"],[1,"text-xs","text-slate-400"],[1,"block","text-sm","font-medium","text-slate-700","dark:text-slate-300","mb-1"],["type","text","placeholder","Enter item name...",1,"w-full","h-12","px-4","bg-white","dark:bg-background-dark","border","border-slate-200","dark:border-border-dark","rounded-xl","text-slate-900","dark:text-white","focus:outline-none","focus:ring-2","focus:ring-primary",3,"ngModelChange","ngModel"],[1,"w-full","h-12","px-4","bg-white","dark:bg-background-dark","border","border-slate-200","dark:border-border-dark","rounded-xl","text-slate-900","dark:text-white","focus:outline-none","focus:ring-2","focus:ring-primary",3,"ngModelChange","ngModel"],[3,"value"],[1,"flex","gap-3","mt-6"],[1,"flex-1","h-10","rounded-lg","border","border-slate-200","dark:border-border-dark","text-slate-600","dark:text-slate-300","font-semibold","text-sm","hover:bg-slate-50","dark:hover:bg-border-dark","transition-colors",3,"click"],[1,"flex-1","h-10","rounded-lg","bg-primary","text-white","font-semibold","text-sm","hover:bg-blue-600","shadow-lg","shadow-blue-500/20","transition-colors","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],[1,"material-symbols-outlined","text-2xl","text-primary","animate-spin"],[1,"text-xs","text-slate-400","mt-1"],["alt","Preview",1,"w-full","h-full","object-cover",3,"error","src"],[1,"absolute","-top-2","-right-2","size-6","bg-red-500","text-white","rounded-full","flex","items-center","justify-center","hover:bg-red-600","transition-colors","shadow-lg",3,"click"],[1,"flex","justify-center"],[1,"flex","items-center","gap-3","px-6","py-3","rounded-xl","bg-slate-100","dark:bg-black/20"],[1,"material-symbols-outlined","text-2xl"],[1,"font-bold","text-slate-900","dark:text-white"],["type","text","placeholder","e.g., Frozen Foods, Beverages...",1,"w-full","h-12","px-4","bg-white","dark:bg-background-dark","border","border-slate-200","dark:border-border-dark","rounded-xl","text-slate-900","dark:text-white","focus:outline-none","focus:ring-2","focus:ring-primary",3,"ngModelChange","ngModel"],[1,"block","text-sm","font-medium","text-slate-700","dark:text-slate-300","mb-2"],[1,"flex","flex-wrap","gap-2","max-h-24","overflow-y-auto","p-2","bg-slate-50","dark:bg-black/20","rounded-xl"],[3,"class"],[1,"flex","flex-wrap","gap-2","p-2","bg-slate-50","dark:bg-black/20","rounded-xl"],[1,"flex-1","h-10","rounded-lg","bg-primary","text-white","font-semibold","text-sm","hover:bg-blue-600","shadow-lg","shadow-blue-500/20","transition-colors",3,"click"]],template:function(t,r){t&1&&(A(0,"div",0)(1,"header",1)(2,"div",2)(3,"div",3)(4,"span",4),P(5,"shopping_basket"),R()(),A(6,"h2",5),P(7,"Groceries"),R()(),A(8,"div",6)(9,"div",7)(10,"button",8),Y("click",function(){return r.removeDuplicates()}),A(11,"span",4),P(12,"delete_sweep"),R()(),A(13,"button",9),Y("click",function(){return r.resetData()}),A(14,"span",4),P(15,"restart_alt"),R()()()()(),A(16,"div",10)(17,"main",11)(18,"div",12),ue(19,sne,13,1,"div",13),A(20,"div",14)(21,"div",15)(22,"div",16)(23,"span",17),P(24,"search"),R()(),A(25,"input",18),Y("input",function(s){return r.onSearch(s)}),R()(),A(26,"div",19)(27,"div",20)(28,"input",21),fn("ngModelChange",function(s){return vn(r.newItemName,s)||(r.newItemName=s),s}),Y("keyup.enter",function(){return r.addItem()}),R(),A(29,"button",22),Y("click",function(){return r.addItem()}),A(30,"span",4),P(31,"add"),R()()(),A(32,"button",23),Y("click",function(){return r.openAddModal()}),A(33,"span",4),P(34,"add_circle"),R(),A(35,"span",24),P(36,"New"),R()()()(),A(37,"div",25)(38,"button",26),Y("click",function(){return r.onCategoryChange("all")}),A(39,"p"),P(40," All Items "),R()(),Mt(41,ane,7,9,"div",27,Ww),A(43,"button",28),Y("click",function(){return r.openAddCategoryModal()}),A(44,"span",29),P(45,"add"),R(),A(46,"span",30),P(47,"Add Category"),R()()(),Mt(48,pne,1,1,null,null,Ww),ue(50,mne,9,1,"div",31),kt(51,"div",32),R()(),A(52,"button",33),Y("click",function(){return r.toggleMobileCart()}),A(53,"span",17),P(54,"shopping_cart"),R(),ue(55,yne,2,1,"span",34),R()(),ue(56,Cne,35,8,"div",35),ue(57,Sne,32,6,"div",35),R()),t&2&&(V(19),de(r.error()?19:-1),V(6),Le("value",r.searchQuery()),V(3),hn("ngModel",r.newItemName),V(10),ut(r.selectedCategory()==="all"?"flex h-9 shrink-0 items-center justify-center gap-x-2 rounded-lg bg-slate-900 dark:bg-white px-4 hover:opacity-90 transition-opacity":"flex h-9 shrink-0 items-center justify-center gap-x-2 rounded-lg bg-white dark:bg-surface-dark border border-slate-200 dark:border-border-dark px-4 hover:bg-slate-50 dark:hover:bg-border-dark transition-colors"),V(),ut(r.selectedCategory()==="all"?"text-white dark:text-slate-900 text-sm font-bold":"text-slate-600 dark:text-slate-300 text-sm font-medium"),V(2),Ot(r.categories()),V(7),Ot(r.categories()),V(2),de(r.groceries().length===0&&!r.isLoading()?50:-1),V(5),de(r.getTotalCartItems()>0?55:-1),V(),de(r.showAddModal?56:-1),V(),de(r.showCategoryModal?57:-1))},dependencies:[cr,Wa,fh,ph,vs,Ga,qa,vo],styles:["#groceries-page[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex:1;height:100%;overflow:hidden}#groceries-main-content[_ngcontent-%COMP%]{flex:1;overflow-y:auto;overflow-x:hidden}#groceries-main-content[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}#groceries-main-content[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:transparent}#groceries-main-content[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:#9ca3af66;border-radius:4px}#groceries-main-content[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background-color:#9ca3af99}#shopping-list-sidebar[_ngcontent-%COMP%]{max-height:100%;height:100%}#cart-items-container[_ngcontent-%COMP%]{flex:1 1 0%;min-height:0;max-height:calc(100vh - 280px);overflow-y:auto}#cart-items-container[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}#cart-items-container[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:transparent}#cart-items-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:#9ca3af80;border-radius:3px}#cart-items-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background-color:#9ca3afb3}"]})};var NB=[{value:"admin",label:"Admin",colorClass:"bg-primary/10 text-primary border-primary/20"},{value:"member",label:"Member",colorClass:"bg-surface-dark text-slate-300 border-border-dark"},{value:"guest",label:"Guest",colorClass:"bg-surface-dark text-text-muted border-border-dark"}];var PB=(n,e)=>e.value,Dne=(n,e)=>e.id;function xne(n,e){if(n&1&&(A(0,"option",22),P(1),R()),n&2){let t=e.$implicit;Le("value",t.value),V(),Ne(t.label)}}function Ane(n,e){if(n&1&&(A(0,"div",43),P(1),R()),n&2){let t=$().$implicit;V(),Ne(t.name.charAt(0).toUpperCase())}}function Rne(n,e){if(n&1){let t=Be();A(0,"tr",36)(1,"td",41)(2,"div",5)(3,"div",42),ue(4,Ane,2,1,"div",43),R(),A(5,"div",44)(6,"span",45),P(7),R()()()(),A(8,"td",41)(9,"span",46),P(10),R()(),A(11,"td",41)(12,"div",47),kt(13,"div",48),A(14,"span",49),P(15),R()()(),A(16,"td",41)(17,"span",50),P(18),Rf(19,"date"),R()(),A(20,"td",51)(21,"div",52)(22,"button",53),Y("click",function(){let i=ee(t).$implicit,s=$();return te(s.openLoginModal(i))}),A(23,"span",9),P(24,"login"),R()(),A(25,"button",54),Y("click",function(){let i=ee(t).$implicit,s=$();return te(s.openEditModal(i))}),A(26,"span",9),P(27,"edit"),R()(),A(28,"button",55),Y("click",function(){let i=ee(t).$implicit,s=$();return te(s.deleteUser(i))}),A(29,"span",9),P(30,"delete"),R()()()()()}if(n&2){let t,r,i,s=e.$implicit,o=$();V(3),zc("background-image",s.avatarUrl?"url("+s.avatarUrl+")":""),V(),de(s.avatarUrl?-1:4),V(3),Ne(s.name),V(2),ut(o.getRoleClass(s.role)),V(),dt(" ",o.getRoleLabel(s.role)," "),V(3),ut(o.getStatusColor(s.status)),V(),_n("text-primary",s.status==="pending")("text-white",s.status!=="pending"),V(),dt(" ",o.getStatusLabel(s.status)," "),V(3),dt(" ",s.lastActive?kf(19,19,s.lastActive,"short"):"Never"," "),V(4),Le("title",((t=o.currentUser())==null?null:t.id)===s.id?"Currently Logged In":"Switch to User")("disabled",((r=o.currentUser())==null?null:r.id)===s.id),V(),_n("text-primary",((i=o.currentUser())==null?null:i.id)===s.id)}}function kne(n,e){n&1&&(A(0,"tr")(1,"td",56)(2,"span",57),P(3,"person_off"),R(),A(4,"p"),P(5,"No users found matching your criteria."),R()()())}function Nne(n,e){if(n&1&&kt(0,"img",65),n&2){let t=$(2);Le("src",t.formAvatarUrl,ir)}}function Pne(n,e){n&1&&(A(0,"span",66),P(1,"person"),R())}function Mne(n,e){if(n&1){let t=Be();A(0,"button",80),Y("click",function(i){ee(t);let s=$(2);return te(s.removeAvatar(i))}),A(1,"span",81),P(2,"close"),R()()}}function One(n,e){if(n&1&&(A(0,"option",22),P(1),R()),n&2){let t=e.$implicit;Le("value",t.value),V(),Ne(t.label)}}function Fne(n,e){if(n&1){let t=Be();A(0,"div")(1,"label",73),P(2,"Status"),R(),A(3,"select",76),fn("ngModelChange",function(i){ee(t);let s=$(2);return vn(s.formStatus,i)||(s.formStatus=i),te(i)}),A(4,"option",24),P(5,"Active"),R(),A(6,"option",26),P(7,"Inactive"),R(),A(8,"option",25),P(9,"Pending"),R(),A(10,"option",28),P(11,"Away"),R(),A(12,"option",27),P(13,"Offline"),R()()()}if(n&2){let t=$(2);V(3),hn("ngModel",t.formStatus)}}function Vne(n,e){if(n&1){let t=Be();A(0,"div",40)(1,"div",58)(2,"div",59)(3,"h3",60),P(4),R(),A(5,"button",61),Y("click",function(){ee(t);let i=$();return te(i.closeModal())}),A(6,"span",7),P(7,"close"),R()()(),A(8,"div",62)(9,"div",63)(10,"div",64),Y("click",function(){ee(t);let i=eE(23);return te(i.click())}),ue(11,Nne,1,1,"img",65)(12,Pne,2,0,"span",66),A(13,"div",67)(14,"span",68),P(15,"upload"),R()(),ue(16,Mne,3,0,"button",69),R(),A(17,"div",44)(18,"span",70),P(19,"Profile Photo"),R(),A(20,"span",71),P(21,"Click to upload"),R()(),A(22,"input",72,0),Y("change",function(i){ee(t);let s=$();return te(s.onAvatarSelected(i))}),R()(),A(24,"div")(25,"label",73),P(26,"Full Name"),R(),A(27,"input",74),fn("ngModelChange",function(i){ee(t);let s=$();return vn(s.formName,i)||(s.formName=i),te(i)}),R()(),A(28,"div")(29,"label",73),P(30),R(),A(31,"input",75),fn("ngModelChange",function(i){ee(t);let s=$();return vn(s.formPassword,i)||(s.formPassword=i),te(i)}),R()(),A(32,"div")(33,"label",73),P(34,"Role"),R(),A(35,"select",76),fn("ngModelChange",function(i){ee(t);let s=$();return vn(s.formRole,i)||(s.formRole=i),te(i)}),Mt(36,One,2,2,"option",22,PB),R()(),ue(38,Fne,14,1,"div"),R(),A(39,"div",77)(40,"button",78),Y("click",function(){ee(t);let i=$();return te(i.closeModal())}),P(41,"Cancel"),R(),A(42,"button",79),Y("click",function(){ee(t);let i=$();return te(i.saveUser())}),P(43,"Save User"),R()()()()}if(n&2){let t=$();V(4),Ne(t.editingUser?"Edit User":"New User"),V(7),de(t.formAvatarUrl?11:12),V(5),de(t.formAvatarUrl?16:-1),V(11),hn("ngModel",t.formName),V(3),Ne(t.editingUser?"New Password (Optional)":"Password"),V(),hn("ngModel",t.formPassword),Le("placeholder",t.editingUser?"Leave blank to keep current":"Enter password"),V(4),hn("ngModel",t.formRole),V(),Ot(t.userRoles),V(2),de(t.editingUser?38:-1)}}function Lne(n,e){if(n&1&&(A(0,"p",86),P(1),R()),n&2){let t=$(2);V(),Ne(t.loginError)}}function Une(n,e){if(n&1){let t=Be();A(0,"div",40)(1,"div",82)(2,"div",59)(3,"h3",60),P(4),R(),A(5,"button",61),Y("click",function(){ee(t);let i=$();return te(i.closeLoginModal())}),A(6,"span",7),P(7,"close"),R()()(),A(8,"div",62)(9,"div",83)(10,"div",84),kt(11,"img",65),R()(),A(12,"div")(13,"label",73),P(14,"Password"),R(),A(15,"input",85),fn("ngModelChange",function(i){ee(t);let s=$();return vn(s.loginPasswordInput,i)||(s.loginPasswordInput=i),te(i)}),Y("keyup.enter",function(){ee(t);let i=$();return te(i.attemptLogin())}),R(),ue(16,Lne,2,1,"p",86),R()(),A(17,"div",77)(18,"button",78),Y("click",function(){ee(t);let i=$();return te(i.closeLoginModal())}),P(19,"Cancel"),R(),A(20,"button",79),Y("click",function(){ee(t);let i=$();return te(i.attemptLogin())}),P(21,"Login"),R()()()()}if(n&2){let t=$();V(4),dt("Login as ",t.loginTargetUser==null?null:t.loginTargetUser.name),V(7),Le("src",(t.loginTargetUser==null?null:t.loginTargetUser.avatarUrl)||"https://ui-avatars.com/api/?name="+(t.loginTargetUser==null?null:t.loginTargetUser.name)+"&background=random",ir),V(4),hn("ngModel",t.loginPasswordInput),V(),de(t.loginError?16:-1)}}var Qw=class n{userService=M(Xr);dialogService=M(Zr);imageService=M(_h);loadingService=M(lr);users=this.userService.users;currentUser=this.userService.currentUser;userRoles=NB;showLoginModal=!1;loginTargetUser=null;loginPasswordInput="";loginError="";openLoginModal(e){this.loginTargetUser=e,this.loginPasswordInput="",this.loginError="",this.showLoginModal=!0}closeLoginModal(){this.showLoginModal=!1}attemptLogin(){if(!this.loginTargetUser)return;if((this.loginTargetUser.password||"")!==this.loginPasswordInput){this.loginError="Incorrect password";return}this.loadingService.show("Logging in..."),this.userService.login$(this.loginTargetUser).subscribe({next:()=>{this.loadingService.hide(),this.closeLoginModal()},error:()=>{this.loadingService.hide(),this.closeLoginModal()}})}searchQuery=he("");roleFilter=he("All");statusFilter=he("All");filteredUsers=ze(()=>{let e=this.users(),t=this.searchQuery().toLowerCase(),r=this.roleFilter(),i=this.statusFilter();return t&&(e=e.filter(s=>s.name.toLowerCase().includes(t))),r!=="All"&&(e=e.filter(s=>s.role===r)),i!=="All"&&(e=e.filter(s=>s.status===i)),e});showModal=!1;editingUser=null;formName="";formPassword="";formRole="member";formStatus="active";formAvatarUrl="";openAddModal(){this.editingUser=null,this.resetForm(),this.showModal=!0}openEditModal(e){this.editingUser=e,this.formName=e.name,this.formRole=e.role,this.formStatus=e.status,this.formAvatarUrl=e.avatarUrl||"",this.showModal=!0}closeModal(){this.showModal=!1}resetForm(){this.formName="",this.formPassword="",this.formRole="member",this.formStatus="active",this.formAvatarUrl=""}removeAvatar(e){e.stopPropagation(),this.formAvatarUrl=""}saveUser(){if(this.formName.trim())if(this.loadingService.show("Saving user..."),this.editingUser){let e={name:this.formName,role:this.formRole,status:this.formStatus,avatarUrl:this.formAvatarUrl};this.formPassword&&(e.password=this.formPassword),this.userService.updateUser$(this.editingUser.id,e).subscribe({next:()=>{this.loadingService.hide(),this.closeModal()},error:()=>this.loadingService.hide()})}else this.userService.createUser$({name:this.formName,password:this.formPassword,role:this.formRole,status:"pending",avatarUrl:this.formAvatarUrl||`https://ui-avatars.com/api/?name=${this.formName}&background=random`}).subscribe({next:()=>{this.loadingService.hide(),this.closeModal()},error:()=>this.loadingService.hide()})}deleteUser(e){this.dialogService.confirm$(`Delete user ${e.name}?`,"Delete User").subscribe(t=>{t&&(this.loadingService.show("Deleting user..."),this.userService.deleteUser$(e.id).subscribe({next:()=>this.loadingService.hide(),error:()=>this.loadingService.hide()}))})}getRoleLabel(e){return this.userRoles.find(t=>t.value===e)?.label||e}getRoleClass(e){return this.userRoles.find(t=>t.value===e)?.colorClass||"bg-gray-100 text-gray-800"}getStatusColor(e){switch(e){case"active":return"bg-emerald-500 shadow-[0_0_8px_rgba(16,185,129,0.5)]";case"away":return"bg-amber-500 shadow-[0_0_8px_rgba(245,158,11,0.5)]";case"offline":return"bg-gray-500";case"pending":return"border-2 border-primary/50 border-t-transparent animate-spin";default:return"bg-gray-400"}}getStatusLabel(e){return e==="pending"?"Invited":e.charAt(0).toUpperCase()+e.slice(1)}onAvatarSelected(e){let t=e.target.files?.[0];t&&(this.loadingService.show("Processing image..."),this.imageService.compressImage(t).then(r=>{this.formAvatarUrl=r}).finally(()=>this.loadingService.hide()))}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Gt({type:n,selectors:[["app-users"]],decls:78,vars:7,consts:[["fileInput",""],[1,"flex-1","flex","flex-col","h-full","overflow-hidden","bg-background-light","dark:bg-background-dark","relative"],[1,"flex","items-center","justify-between","px-8","py-5","border-b","border-border-dark","bg-background-dark","sticky","top-0","z-10"],[1,"flex","flex-col","gap-1"],[1,"text-white","text-2xl","font-bold","leading-tight","tracking-tight"],[1,"flex","items-center","gap-4"],[1,"size-10","rounded-full","bg-surface-dark","hover:bg-border-dark","flex","items-center","justify-center","text-text-muted","hover:text-white","transition-colors"],[1,"material-symbols-outlined"],[1,"bg-primary","hover:bg-primary-hover","text-white","h-10","px-5","rounded-lg","text-sm","font-bold","flex","items-center","gap-2","transition-all","shadow-lg","shadow-primary/20",3,"click"],[1,"material-symbols-outlined","text-[20px]"],[1,"flex-1","overflow-y-auto","p-8"],[1,"max-w-[1200px]","mx-auto","flex","flex-col","gap-6"],[1,"text-text-muted","text-base","max-w-2xl"],[1,"flex","flex-col","sm:flex-row","gap-4","justify-between","items-start","sm:items-center","bg-surface-dark","p-4","rounded-xl","border","border-border-dark"],[1,"relative","w-full","sm:max-w-md","group"],[1,"absolute","inset-y-0","left-0","pl-3","flex","items-center","pointer-events-none"],[1,"material-symbols-outlined","text-text-muted","group-focus-within:text-primary","transition-colors"],["placeholder","Search users by name...","type","text",1,"block","w-full","pl-10","pr-3","py-2.5","border","border-border-dark","rounded-lg","leading-5","bg-background-dark","text-white","placeholder-text-muted","focus:outline-none","focus:ring-1","focus:ring-primary","focus:border-primary","sm:text-sm","transition-all",3,"ngModelChange","ngModel"],[1,"flex","gap-3","w-full","sm:w-auto"],[1,"relative"],[1,"appearance-none","bg-background-dark","border","border-border-dark","text-white","text-sm","rounded-lg","focus:ring-primary","focus:border-primary","block","w-full","pl-3","pr-10","py-2.5","cursor-pointer","hover:border-slate-600","transition-colors",3,"ngModelChange","ngModel"],["value","All"],[3,"value"],[1,"pointer-events-none","absolute","inset-y-0","right-0","flex","items-center","px-2","text-text-muted"],["value","active"],["value","pending"],["value","inactive"],["value","offline"],["value","away"],[1,"bg-surface-dark","rounded-xl","border","border-border-dark","overflow-hidden","shadow-sm"],[1,"overflow-x-auto"],[1,"w-full","text-left","border-collapse"],[1,"border-b","border-border-dark","bg-surface-dark"],[1,"py-4","px-6","text-xs","font-semibold","uppercase","tracking-wider","text-text-muted"],[1,"py-4","px-6","text-xs","font-semibold","uppercase","tracking-wider","text-text-muted","text-right"],[1,"divide-y","divide-border-dark"],[1,"hover:bg-slate-800","transition-colors","group"],[1,"px-6","py-4","border-t","border-border-dark","bg-surface-dark","flex","items-center","justify-between"],[1,"text-sm","text-text-muted"],[1,"font-medium","text-white"],[1,"fixed","inset-0","z-50","flex","items-center","justify-center","p-4","bg-black/50","backdrop-blur-sm","animate-in","fade-in","duration-200"],[1,"py-4","px-6","whitespace-nowrap"],[1,"bg-center","bg-no-repeat","bg-cover","rounded-full","size-10","border","border-border-dark","bg-surface-dark","relative","overflow-hidden"],[1,"absolute","inset-0","flex","items-center","justify-center","text-xs","font-bold","text-text-muted","bg-border-dark"],[1,"flex","flex-col"],[1,"text-white","text-sm","font-semibold"],[1,"inline-flex","items-center","px-2.5","py-0.5","rounded-full","text-xs","font-medium","border"],[1,"flex","items-center","gap-2"],[1,"h-2","w-2","rounded-full"],[1,"text-sm"],[1,"text-text-muted","text-sm"],[1,"py-4","px-6","whitespace-nowrap","text-right"],[1,"flex","items-center","justify-end","gap-2","opacity-0","group-hover:opacity-100","transition-opacity"],[1,"p-2","text-text-muted","hover:text-white","hover:bg-border-dark","rounded-lg","transition-colors",3,"click","title","disabled"],["title","Edit User",1,"p-2","text-text-muted","hover:text-white","hover:bg-border-dark","rounded-lg","transition-colors",3,"click"],["title","Delete User",1,"p-2","text-text-muted","hover:text-red-400","hover:bg-border-dark","rounded-lg","transition-colors",3,"click"],["colspan","5",1,"py-12","text-center","text-text-muted"],[1,"material-symbols-outlined","text-4xl","mb-2","opacity-50"],[1,"bg-surface-dark","border","border-border-dark","w-full","max-w-md","rounded-xl","shadow-2xl","overflow-hidden","animate-in","zoom-in-95","duration-200"],[1,"p-6","border-b","border-border-dark","flex","justify-between","items-center","bg-background-dark"],[1,"font-bold","text-lg","text-white"],[1,"p-1","rounded-full","hover:bg-border-dark","text-text-muted","hover:text-white","transition-colors",3,"click"],[1,"p-6","space-y-4"],[1,"flex","items-center","gap-4","pb-2","border-b","border-border-dark"],[1,"relative","size-14","rounded-full","bg-background-dark","border","border-border-dark","overflow-hidden","flex","items-center","justify-center","group","cursor-pointer",3,"click"],[1,"w-full","h-full","object-cover",3,"src"],[1,"material-symbols-outlined","text-text-muted","text-2xl"],[1,"absolute","inset-0","bg-black/50","flex","items-center","justify-center","opacity-0","group-hover:opacity-100","transition-opacity"],[1,"material-symbols-outlined","text-white","text-sm"],["title","Remove Photo",1,"absolute","top-0","right-0","bg-red-500","rounded-full","p-0.5","text-white","z-20","hover:bg-red-600","transition-colors","shadow-sm","flex","items-center","justify-center","transform","translate-x-1/4","-translate-y-1/4"],[1,"text-xs","font-semibold","uppercase","text-text-muted"],[1,"text-xs","text-text-muted"],["type","file","accept","image/*",1,"hidden",3,"change"],[1,"block","text-xs","font-semibold","uppercase","text-text-muted","mb-1.5"],["type","text","placeholder","e.g. Alex Johnson",1,"w-full","bg-background-dark","border","border-border-dark","rounded-lg","px-4","py-2.5","text-white","focus:outline-none","focus:border-primary","focus:ring-1","focus:ring-primary","transition-all",3,"ngModelChange","ngModel"],["type","password",1,"w-full","bg-background-dark","border","border-border-dark","rounded-lg","px-4","py-2.5","text-white","focus:outline-none","focus:border-primary","focus:ring-1","focus:ring-primary","transition-all",3,"ngModelChange","ngModel","placeholder"],[1,"w-full","bg-background-dark","border","border-border-dark","rounded-lg","px-4","py-2.5","text-white","focus:outline-none","focus:border-primary","focus:ring-1","focus:ring-primary","transition-all","appearance-none",3,"ngModelChange","ngModel"],[1,"p-4","bg-background-dark","border-t","border-border-dark","flex","justify-end","gap-3"],[1,"px-5","py-2.5","rounded-lg","border","border-border-dark","text-text-muted","font-bold","text-sm","hover:text-white","hover:border-white","transition-colors",3,"click"],[1,"px-5","py-2.5","rounded-lg","bg-primary","text-white","font-bold","text-sm","hover:bg-primary-hover","transition-colors","shadow-lg","shadow-primary/20",3,"click"],["title","Remove Photo",1,"absolute","top-0","right-0","bg-red-500","rounded-full","p-0.5","text-white","z-20","hover:bg-red-600","transition-colors","shadow-sm","flex","items-center","justify-center","transform","translate-x-1/4","-translate-y-1/4",3,"click"],[1,"material-symbols-outlined","text-[10px]","font-bold"],[1,"bg-surface-dark","border","border-border-dark","w-full","max-w-sm","rounded-xl","shadow-2xl","overflow-hidden","animate-in","zoom-in-95","duration-200"],[1,"flex","justify-center","mb-4"],[1,"relative","size-20","rounded-full","border-2","border-border-dark","overflow-hidden"],["type","password","placeholder","Enter password","autofocus","",1,"w-full","bg-background-dark","border","border-border-dark","rounded-lg","px-4","py-2.5","text-white","focus:outline-none","focus:border-primary","focus:ring-1","focus:ring-primary","transition-all",3,"ngModelChange","keyup.enter","ngModel"],[1,"text-red-400","text-xs","mt-1"]],template:function(t,r){t&1&&(A(0,"div",1)(1,"header",2)(2,"div",3)(3,"h2",4),P(4,"User Management"),R()(),A(5,"div",5)(6,"button",6)(7,"span",7),P(8,"notifications"),R()(),A(9,"button",8),Y("click",function(){return r.openAddModal()}),A(10,"span",9),P(11,"add"),R(),A(12,"span"),P(13,"Add New User"),R()()()(),A(14,"div",10)(15,"div",11)(16,"p",12),P(17," Manage access and roles for your household members. You can invite new family members, assign tasks, and control permissions. "),R(),A(18,"div",13)(19,"div",14)(20,"div",15)(21,"span",16),P(22,"search"),R()(),A(23,"input",17),Y("ngModelChange",function(s){return r.searchQuery.set(s)}),R()(),A(24,"div",18)(25,"div",19)(26,"select",20),Y("ngModelChange",function(s){return r.roleFilter.set(s)}),A(27,"option",21),P(28,"All Roles"),R(),Mt(29,xne,2,2,"option",22,PB),R(),A(31,"div",23)(32,"span",9),P(33,"expand_more"),R()()(),A(34,"div",19)(35,"select",20),Y("ngModelChange",function(s){return r.statusFilter.set(s)}),A(36,"option",21),P(37,"All Status"),R(),A(38,"option",24),P(39,"Active"),R(),A(40,"option",25),P(41,"Pending"),R(),A(42,"option",26),P(43,"Inactive"),R(),A(44,"option",27),P(45,"Offline"),R(),A(46,"option",28),P(47,"Away"),R()(),A(48,"div",23)(49,"span",9),P(50,"expand_more"),R()()()()(),A(51,"div",29)(52,"div",30)(53,"table",31)(54,"thead")(55,"tr",32)(56,"th",33),P(57,"User"),R(),A(58,"th",33),P(59,"Role"),R(),A(60,"th",33),P(61,"Status"),R(),A(62,"th",33),P(63,"Last Active"),R(),A(64,"th",34),P(65,"Actions"),R()()(),A(66,"tbody",35),Mt(67,Rne,31,22,"tr",36,Dne,!1,kne,6,0,"tr"),R()()(),A(70,"div",37)(71,"p",38),P(72,"Showing "),A(73,"span",39),P(74),R(),P(75," users"),R()()()()(),ue(76,Vne,44,9,"div",40),ue(77,Une,22,4,"div",40),R()),t&2&&(V(23),Le("ngModel",r.searchQuery()),V(3),Le("ngModel",r.roleFilter()),V(3),Ot(r.userRoles),V(6),Le("ngModel",r.statusFilter()),V(32),Ot(r.filteredUsers()),V(7),Ne(r.filteredUsers().length),V(2),de(r.showModal?76:-1),V(),de(r.showLoginModal?77:-1))},dependencies:[cr,Wa,fh,ph,vs,Ga,qa,vo,Uf],encapsulation:2})};var MB=[{path:"",redirectTo:"overview",pathMatch:"full"},{path:"overview",component:qw},{path:"groceries",component:Kw},{path:"users",component:Qw}];var OB={providers:[Ub(),$E(MB),rF(()=>iF(uh.firebase)),S3(()=>x3()),xV(()=>AV())]};function jne(n,e){if(n&1&&(yn(0,"h3",4),P(1),Ln()),n&2){let t=$();V(),Ne(t.title)}}function Bne(n,e){if(n&1){let t=Be();yn(0,"button",9),Uu("click",function(){ee(t);let i=$(2);return te(i.cancel())}),P(1),Ln()}if(n&2){let t=$();V(),dt(" ",t.cancelText||"Cancel"," ")}}function $ne(n,e){if(n&1){let t=Be();yn(0,"div",0)(1,"div",1),Uu("click",function(){let i=ee(t),s=$();return te(i.type==="confirm"?s.cancel():s.confirm())}),Ln(),yn(2,"div",2)(3,"div",3),ue(4,jne,2,1,"h3",4),yn(5,"p",5),P(6),Ln()(),yn(7,"div",6),ue(8,Bne,2,1,"button",7),yn(9,"button",8),Uu("click",function(){ee(t);let i=$();return te(i.confirm())}),P(10),Ln()()()()}if(n&2){let t=e;V(4),de(t.title?4:-1),V(2),Ne(t.message),V(2),de(t.type==="confirm"?8:-1),V(),_n("bg-rose-500",t.type==="error")("bg-primary",t.type!=="error"),V(),dt(" ",t.confirmText||"OK"," ")}}var Yw=class n{dialogService=M(Zr);confirm(){this.dialogService.close(!0)}cancel(){this.dialogService.close(!1)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Gt({type:n,selectors:[["app-dialog"]],decls:1,vars:1,consts:[[1,"fixed","inset-0","z-[100]","flex","items-center","justify-center","p-4","bg-black/50","backdrop-blur-sm","animate-in","fade-in","duration-200"],[1,"absolute","inset-0",3,"click"],[1,"relative","bg-white","dark:bg-surface-dark","w-full","max-w-sm","rounded-2xl","shadow-xl","overflow-hidden","animate-in","zoom-in-95","duration-200","border","border-slate-200","dark:border-border-dark"],[1,"p-6"],[1,"text-xl","font-bold","text-slate-900","dark:text-white","mb-2"],[1,"text-slate-600","dark:text-slate-300","leading-relaxed"],[1,"p-4","bg-slate-50","dark:bg-black/20","flex","justify-end","gap-3"],[1,"px-4","py-2","rounded-lg","text-slate-600","dark:text-slate-400","font-bold","hover:bg-slate-200","dark:hover:bg-border-dark","transition-colors"],[1,"px-5","py-2","rounded-lg","text-slate-900","font-bold","hover:brightness-110","transition-all","shadow-lg","active:scale-95",3,"click"],[1,"px-4","py-2","rounded-lg","text-slate-600","dark:text-slate-400","font-bold","hover:bg-slate-200","dark:hover:bg-border-dark","transition-colors",3,"click"]],template:function(t,r){if(t&1&&ue(0,$ne,11,8,"div",0),t&2){let i;de((i=r.dialogService.dialog())?0:-1,i)}},dependencies:[cr],encapsulation:2})};var Jw=class n{firestore=M(Pi);COLLECTIONS=["groceries","categories","overview_tasks","assignees","shopping_history"];async migrateAllDataToUser(e){if(!e)return console.error("\u274C userId is required"),[];console.log(`\u{1F504} Starting data migration to userId: ${e}`);let t=[];for(let r of this.COLLECTIONS){let i=await this.migrateCollection(r,e);t.push(i)}return console.log("\u2705 Migration complete!",t),t}async migrateCollection(e,t){console.log(`  \u{1F4C1} Migrating collection: ${e}`);let r=0,i=0;try{let s=_o(this.firestore,e),a=(await iR(s)).docs.map(async c=>{let l=c.data();if(l.userId===t){console.log(`    \u23ED\uFE0F Skipping ${c.id} (already has userId)`);return}if(l.userId==="system"&&e==="categories"){console.log(`    \u23ED\uFE0F Skipping ${c.id} (system category)`);return}try{await Ha(kr(this.firestore,e,c.id),{userId:t}),console.log(`    \u2705 Updated ${c.id}`),r++}catch(h){console.error(`    \u274C Error updating ${c.id}:`,h),i++}});await Promise.all(a)}catch(s){console.error(`  \u274C Error reading collection ${e}:`,s),i++}return console.log(`  \u{1F4CA} ${e}: ${r} updated, ${i} errors`),{collection:e,updated:r,errors:i}}async previewMigration(){console.log("\u{1F4CB} Preview of data to migrate:");for(let e of this.COLLECTIONS)try{let t=_o(this.firestore,e),r=await iR(t),i=r.docs.filter(s=>{let o=s.data();return!o.userId||o.userId!=="system"&&e!=="categories"});console.log(`  \u{1F4C1} ${e}: ${i.length}/${r.docs.length} documents need migration`)}catch(t){console.error(`  \u274C Error reading ${e}:`,t)}}static \u0275fac=function(t){return new(t||n)};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})};var zne=(n,e)=>e.id;function Hne(n,e){n&1&&(A(0,"h1",6),P(1,"HomeNeeds"),R())}function qne(n,e){n&1&&(A(0,"p",7),P(1,"Manage your home effortlessly"),R())}function Gne(n,e){if(n&1&&(A(0,"div",10)(1,"span",28),P(2),R(),A(3,"span",29),P(4),R()()),n&2){let t,r,i=$();V(2),Ne(((t=i.currentUser())==null?null:t.name)||"Guest"),V(2),Ne(((r=i.currentUser())==null?null:r.role)||"Visitor")}}function Wne(n,e){n&1&&(A(0,"span",15),P(1,"Overview"),R())}function Kne(n,e){n&1&&(A(0,"span",18),P(1,"Groceries"),R())}function Qne(n,e){n&1&&(A(0,"span",18),P(1,"Users"),R())}function Yne(n,e){n&1&&(A(0,"span",22),P(1,"Log Out"),R())}function Jne(n,e){if(n&1&&(A(0,"div",24)(1,"div",30)(2,"span",31),P(3,"pending_actions"),R(),A(4,"span",32),P(5,"Today"),R()(),A(6,"p",33),P(7),R(),A(8,"p",34),P(9,"Items Pending"),R()()),n&2){let t=$();V(7),Ne(t.pendingItemsCount())}}function Xne(n,e){if(n&1&&(A(0,"div",25)(1,"span",35),P(2,"pending_actions"),R(),A(3,"span",36),P(4),R()()),n&2){let t=$();V(4),Ne(t.pendingItemsCount())}}function Zne(n,e){n&1&&(A(0,"div",47)(1,"span",49),P(2,"lock"),R()())}function ere(n,e){if(n&1){let t=Be();A(0,"button",44),Y("click",function(){let i=ee(t).$implicit,s=$(3);return te(s.selectUser(i))}),A(1,"div",45),kt(2,"img",46),ue(3,Zne,3,0,"div",47),R(),A(4,"span",48),P(5),R()()}if(n&2){let t=e.$implicit;V(2),Le("src",t.avatarUrl||"https://ui-avatars.com/api/?name="+t.name+"&background=random",ir),V(),de(t.password?3:-1),V(2),Ne(t.name)}}function tre(n,e){if(n&1&&(A(0,"div",41),Mt(1,ere,6,3,"button",43,zne),R()),n&2){let t=$(2);V(),Ot(t.allUsers())}}function nre(n,e){if(n&1&&(A(0,"p",55),P(1),R()),n&2){let t=$(3);V(),Ne(t.loginError())}}function rre(n,e){if(n&1){let t=Be();A(0,"div",42)(1,"div",50)(2,"div",51),kt(3,"img",46),R(),A(4,"h3",52),P(5),R()(),A(6,"div",53)(7,"div")(8,"input",54),Y("input",function(i){ee(t);let s=$(2);return te(s.passwordInput.set(i.target.value))})("keyup.enter",function(){ee(t);let i=$(2);return te(i.verifyLogin())}),R(),ue(9,nre,2,1,"p",55),R(),A(10,"button",56),Y("click",function(){ee(t);let i=$(2);return te(i.verifyLogin())}),P(11,"Login"),R(),A(12,"button",57),Y("click",function(){ee(t);let i=$(2);return te(i.cancelPassword())}),P(13,"Back"),R()()()}if(n&2){let t,r,i=$(2);V(3),Le("src",((t=i.selectedUser())==null?null:t.avatarUrl)||"https://ui-avatars.com/api/?name="+((t=i.selectedUser())==null?null:t.name)+"&background=random",ir),V(2),Ne((r=i.selectedUser())==null?null:r.name),V(3),Le("value",i.passwordInput()),V(),de(i.loginError()?9:-1)}}function ire(n,e){if(n&1&&(A(0,"div",27)(1,"div",37)(2,"div",38)(3,"h1",39),P(4,"Welcome Back"),R(),A(5,"p",40),P(6,"Who is using HomeNeeds?"),R()(),ue(7,tre,3,0,"div",41)(8,rre,14,4,"div",42),R()()),n&2){let t=$();V(7),de(t.loginStep()==="select"?7:8)}}var Xw=class n{title=he("frontend");overviewService=M(ws);userService=M(Xr);migrationService=M(Jw);loadingService=M(lr);users=this.userService.users;allUsers=this.userService.allUsers;currentUser=this.userService.currentUser;loading=this.userService.loading;sidebarCollapsed=he(this.getSavedSidebarState());loginStep=he("select");selectedUser=he(null);passwordInput=he("");loginError=he("");pendingItemsCount=ze(()=>this.overviewService.tasks().filter(e=>!e.isCompleted).length);constructor(){window.userService=this.userService,window.migrationService=this.migrationService,window.loadingService=this.loadingService,console.log("\u{1F527} Dev Console Tools Available:"),console.log("   \u2192 window.userService.manualMigrateAllUsers()"),console.log('   \u2192 window.migrationService.migrateAllDataToUser("user_xxx")'),console.log("   \u2192 window.migrationService.previewMigration()"),console.log('   \u2192 window.loadingService.show("Loading...")'),console.log("   \u2192 window.loadingService.hide()"),vr(()=>{let e=this.sidebarCollapsed();localStorage.setItem("sidebar-collapsed",JSON.stringify(e))})}getSavedSidebarState(){let e=localStorage.getItem("sidebar-collapsed");return e?JSON.parse(e):!1}toggleSidebar(){this.sidebarCollapsed.update(e=>!e)}selectUser(e){e.password?(this.selectedUser.set(e),this.loginStep.set("password"),this.passwordInput.set(""),this.loginError.set("")):this.userService.login(e)}cancelPassword(){this.loginStep.set("select"),this.selectedUser.set(null)}async verifyLogin(){let e=this.selectedUser();e&&(e.password===this.passwordInput()?(await this.userService.login(e),this.loginStep.set("select"),this.selectedUser.set(null)):this.loginError.set("Incorrect password"))}logout(){this.userService.logout()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Gt({type:n,selectors:[["app-root"]],hostAttrs:[1,"w-full","h-screen","flex","overflow-hidden"],decls:42,vars:29,consts:[["id","app-sidebar"],["id","sidebar-toggle",1,"absolute","-right-3","top-6","z-10","w-6","h-6","bg-primary","rounded-full","flex","items-center","justify-center","shadow-lg","hover:bg-primary-hover","transition-all",3,"click","title"],[1,"material-symbols-outlined","text-white","text-sm",2,"font-size","16px"],[1,"flex","flex-col","mb-8"],[1,"flex","items-center","gap-2","mb-1"],[1,"material-symbols-outlined","text-primary",2,"font-size","32px"],[1,"text-2xl","font-extrabold","tracking-tight","whitespace-nowrap"],[1,"text-sm","text-slate-500","dark:text-text-muted"],["id","user-profile"],["alt","User avatar",1,"w-8","h-8","rounded-full","object-cover",3,"src","title"],[1,"flex","flex-col"],[2,"border-color","#54585e"],["id","main-nav",1,"flex","flex-col","gap-2"],["id","nav-overview","routerLink","/overview","routerLinkActive","bg-primary/10 text-primary-hover dark:text-primary",3,"title"],[1,"material-symbols-outlined","filled"],[1,"font-bold","text-sm"],["id","nav-groceries","routerLink","/groceries","routerLinkActive","bg-primary/10 text-primary-hover dark:text-primary",3,"title"],[1,"material-symbols-outlined","group-hover:text-slate-900","dark:group-hover:text-white","transition-colors"],[1,"font-medium","text-sm","group-hover:text-slate-900","dark:group-hover:text-white","transition-colors"],["id","nav-users","routerLink","/users","routerLinkActive","bg-primary/10 text-primary-hover dark:text-primary",3,"title"],["id","nav-logout",3,"click","title"],[1,"material-symbols-outlined","group-hover:text-red-500","dark:group-hover:text-red-400","transition-colors"],[1,"font-medium","text-sm","group-hover:text-red-500","dark:group-hover:text-red-400","transition-colors"],[1,"flex","flex-col","gap-4","mt-8"],["id","stats-card",1,"p-5","rounded-2xl","bg-surface-dark/40","border","border-border-dark","backdrop-blur-sm"],["title","Items Pending",1,"flex","flex-col","items-center","p-2","rounded-xl","bg-surface-dark/40","border","border-border-dark"],[1,"flex-1","h-screen","flex","flex-col","overflow-hidden"],[1,"fixed","inset-0","z-[100]","bg-[#111317]","flex","items-center","justify-center","p-4"],[1,"text-sm","font-bold","text-white","leading-none"],[1,"text-[10px]","text-text-muted","capitalize"],[1,"flex","justify-between","items-start","mb-2"],[1,"material-symbols-outlined","text-text-muted"],[1,"text-xs","font-bold","text-primary","bg-primary/10","px-2","py-1","rounded-full"],[1,"text-3xl","font-black","text-white","leading-tight","mb-1"],[1,"text-xs","text-text-muted","font-medium"],[1,"material-symbols-outlined","text-text-muted","text-sm"],[1,"text-lg","font-bold","text-white"],[1,"max-w-4xl","w-full","flex","flex-col","items-center","gap-12","animate-in","fade-in","zoom-in","duration-300"],[1,"text-center","space-y-2"],[1,"text-4xl","font-bold","text-white","tracking-tight"],[1,"text-[#9ea7b7]","text-lg"],[1,"flex","flex-wrap","justify-center","gap-8"],[1,"bg-[#1a202e]","border","border-[#292e38]","rounded-2xl","p-8","w-full","max-w-sm","shadow-2xl","animate-in","zoom-in-95","duration-200"],[1,"group","flex","flex-col","items-center","gap-4","transition-transform","hover:scale-105","outline-none","focus:scale-105"],[1,"group","flex","flex-col","items-center","gap-4","transition-transform","hover:scale-105","outline-none","focus:scale-105",3,"click"],[1,"size-24","rounded-full","border-2","border-[#292e38]","group-hover:border-[#2060df]","overflow-hidden","transition-colors","relative"],[1,"w-full","h-full","object-cover",3,"src"],[1,"absolute","inset-0","bg-black/40","flex","items-center","justify-center","opacity-0","group-hover:opacity-100","transition-opacity"],[1,"text-lg","font-medium","text-[#9ea7b7]","group-hover:text-white","transition-colors"],[1,"material-symbols-outlined","text-white"],[1,"flex","flex-col","items-center","gap-4","mb-6"],[1,"size-16","rounded-full","border","border-[#292e38]","overflow-hidden"],[1,"text-white","font-bold","text-xl"],[1,"space-y-4"],["type","password","placeholder","Enter Password","autofocus","",1,"w-full","bg-[#111317]","border","border-[#292e38]","rounded-lg","px-4","py-3","text-white","focus:outline-none","focus:border-[#2060df]","focus:ring-1","focus:ring-[#2060df]","transition-all","text-center","placeholder-[#586173]",3,"input","keyup.enter","value"],[1,"text-red-400","text-xs","mt-2","text-center"],[1,"w-full","py-3","rounded-lg","bg-[#2060df]","text-white","font-bold","hover:bg-[#2060df]/90","transition-colors",3,"click"],[1,"w-full","py-3","rounded-lg","border","border-[#3b4250]","text-[#9ea7b7]","font-bold","hover:text-white","hover:border-white","transition-colors",3,"click"]],template:function(t,r){if(t&1&&(A(0,"aside",0)(1,"button",1),Y("click",function(){return r.toggleSidebar()}),A(2,"span",2),P(3),R()(),A(4,"div")(5,"div",3)(6,"div",4)(7,"span",5),P(8,"checklist"),R(),ue(9,Hne,2,0,"h1",6),R(),ue(10,qne,2,0,"p",7),R(),A(11,"div",8),kt(12,"img",9),ue(13,Gne,5,2,"div",10),R(),kt(14,"br")(15,"hr",11)(16,"br"),A(17,"nav",12)(18,"a",13)(19,"span",14),P(20,"dashboard"),R(),ue(21,Wne,2,0,"span",15),R(),A(22,"a",16)(23,"span",17),P(24,"shopping_cart"),R(),ue(25,Kne,2,0,"span",18),R(),A(26,"a",19)(27,"span",17),P(28,"group"),R(),ue(29,Qne,2,0,"span",18),R(),A(30,"button",20),Y("click",function(){return r.logout()}),A(31,"span",21),P(32,"logout"),R(),ue(33,Yne,2,0,"span",22),R()(),A(34,"div",23),ue(35,Jne,10,1,"div",24)(36,Xne,5,1,"div",25),R()()(),A(37,"div",26),kt(38,"router-outlet"),R(),kt(39,"app-dialog")(40,"app-loading"),ue(41,ire,9,1,"div",27)),t&2){let i,s;ut(r.sidebarCollapsed()?"sidebar sidebar-collapsed":"sidebar sidebar-expanded"),V(),Le("title",r.sidebarCollapsed()?"Expand sidebar":"Collapse sidebar"),V(2),dt(" ",r.sidebarCollapsed()?"chevron_right":"chevron_left"," "),V(6),de(r.sidebarCollapsed()?-1:9),V(),de(r.sidebarCollapsed()?-1:10),V(),ut(r.sidebarCollapsed()?"flex items-center justify-center p-2 rounded-full bg-surface-dark cursor-pointer hover:bg-border-dark transition-colors":"flex items-center gap-3 p-4 rounded-full bg-surface-dark cursor-pointer hover:bg-border-dark transition-colors"),V(),Le("src",((i=r.currentUser())==null?null:i.avatarUrl)||"https://ui-avatars.com/api/?name=Guest&background=random",ir)("title",((s=r.currentUser())==null?null:s.name)||"Guest"),V(),de(r.sidebarCollapsed()?-1:13),V(5),ut(r.sidebarCollapsed()?"nav-item nav-item-collapsed":"nav-item"),Le("title",r.sidebarCollapsed()?"Overview":""),V(3),de(r.sidebarCollapsed()?-1:21),V(),ut(r.sidebarCollapsed()?"nav-item nav-item-collapsed":"nav-item"),Le("title",r.sidebarCollapsed()?"Groceries":""),V(3),de(r.sidebarCollapsed()?-1:25),V(),ut(r.sidebarCollapsed()?"nav-item nav-item-collapsed":"nav-item"),Le("title",r.sidebarCollapsed()?"Users":""),V(3),de(r.sidebarCollapsed()?-1:29),V(),ut(r.sidebarCollapsed()?"nav-item nav-item-collapsed text-left mt-auto":"nav-item text-left mt-auto"),Le("title",r.sidebarCollapsed()?"Log Out":""),V(3),de(r.sidebarCollapsed()?-1:33),V(2),de(r.sidebarCollapsed()?36:35),V(6),de(!r.currentUser()&&!r.loading()?41:-1)}},dependencies:[sp,ed,BE,Yw,zw],styles:['.sidebar[_ngcontent-%COMP%]{height:100vh;flex-shrink:0;border-right-width:1px;border-right-style:solid;border-color:#e2e8f0;background-color:#fff;display:flex;flex-direction:column;justify-content:space-between;padding:1.5rem;position:relative;transition:width .3s cubic-bezier(.4,0,.2,1),padding .3s cubic-bezier(.4,0,.2,1)}.dark[_nghost-%COMP%]   .sidebar[_ngcontent-%COMP%], .dark   [_nghost-%COMP%]   .sidebar[_ngcontent-%COMP%]{border-color:#292e38;background-color:#111317}.sidebar-expanded[_ngcontent-%COMP%]{width:20rem}.sidebar-collapsed[_ngcontent-%COMP%]{width:5rem;padding-left:1rem;padding-right:1rem}.nav-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;padding:.75rem 1rem;border-radius:9999px;color:#64748b;transition:all .2s ease;width:100%}.nav-item[_ngcontent-%COMP%]:hover{background-color:#f1f5f9}.dark[_nghost-%COMP%]   .nav-item[_ngcontent-%COMP%], .dark   [_nghost-%COMP%]   .nav-item[_ngcontent-%COMP%]{color:#9ea7b7}.dark[_nghost-%COMP%]   .nav-item[_ngcontent-%COMP%]:hover, .dark   [_nghost-%COMP%]   .nav-item[_ngcontent-%COMP%]:hover{background-color:#1e2433}.nav-item-collapsed[_ngcontent-%COMP%]{justify-content:center;padding-left:.5rem;padding-right:.5rem}.nav-item[_ngcontent-%COMP%]   .material-symbols-outlined[_ngcontent-%COMP%]{transition:transform .2s ease}.sidebar-collapsed[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]:hover   .material-symbols-outlined[_ngcontent-%COMP%]{transform:scale(1.1)}#sidebar-toggle[_ngcontent-%COMP%]{transition:transform .3s ease,box-shadow .2s ease;z-index:100}#sidebar-toggle[_ngcontent-%COMP%]:hover{transform:scale(1.1);box-shadow:0 4px 12px #2060df66}#stats-card[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .2s ease}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}#user-profile[_ngcontent-%COMP%]{transition:all .3s cubic-bezier(.4,0,.2,1)}.sidebar-collapsed[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]{position:relative}.sidebar-collapsed[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]:after{content:attr(title);position:absolute;left:100%;top:50%;transform:translateY(-50%);margin-left:.75rem;padding:.5rem .75rem;background:#1a202e;color:#fff;font-size:.75rem;font-weight:500;border-radius:.5rem;white-space:nowrap;opacity:0;pointer-events:none;transition:opacity .2s ease,transform .2s ease;z-index:100;box-shadow:0 4px 12px #0000004d}.sidebar-collapsed[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]:hover:after{opacity:1;transform:translateY(-50%) translate(4px)}.sidebar-collapsed[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]:not([title]):after, .sidebar-collapsed[_ngcontent-%COMP%]   .nav-item[title=""][_ngcontent-%COMP%]:after{display:none}']})};_E(Xw,OB).catch(n=>console.error(n));
